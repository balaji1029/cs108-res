<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 
Copyright Â© 1989, 1991, 1992, 1993, 1996-2005, 2007, 2009-2023 

Free Software Foundation, Inc.



This is Edition 5.3 of GAWK: Effective AWK Programming: A User's Guide for GNU Awk,
for the 5.3.0 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.
A copy of the license is included in the section entitled
"GNU Free Documentation License".

a. The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." -->
<title>The GNU Awk User&rsquo;s Guide</title>

<meta name="description" content="The GNU Awk User&rsquo;s Guide">
<meta name="keywords" content="The GNU Awk User&rsquo;s Guide">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="#Top" rel="start" title="Top">
<link href="#Index" rel="index" title="Index">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<link href="/manual" rel="up" title="(dir)">
<link href="#Foreword3" rel="next" title="Foreword3">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter-printindex {text-decoration: none}
div.center {text-align:center}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
pre.display-preformatted {font-family: inherit}
span.r {font-family: initial; font-weight: normal; font-style: normal}
span:hover a.copiable-link {visibility: visible}
td.index-entry-level-1 {padding-left: 1.5em}
td.index-entry-level-2 {padding-left: 3.0em}
td.printindex-index-entry {vertical-align: top}
td.printindex-index-section {vertical-align: top; padding-left: 1em}
td.printindex-index-see-also {vertical-align: top; padding-left: 1em}
th.entries-header-printindex {text-align:left}
th.sections-header-printindex {text-align:left; padding-left: 1em}
ul.mark-bullet {list-style-type: disc}
ul.mark-minus {list-style-type: "\2212"}
ul.toc-numbered-mark {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="https://www.gnu.org/software/gnulib/manual.css">


</head>

<body lang="en">






































<div class="top-level-extent" id="Top">
<div class="nav-panel">
<p>
Next: <a href="#Foreword3" accesskey="n" rel="next">Foreword to the Third Edition</a>, Up: <a href="/manual" accesskey="u" rel="up">(dir)</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h1 class="top" id="General-Introduction"><span>General Introduction<a class="copiable-link" href="#General-Introduction"> &para;</a></span></h1>

<p>This file documents <code class="command">awk</code>, a program that you can use to select
particular records in a file and perform operations upon them.
</p>

<p>Copyright &copy; 1989, 1991, 1992, 1993, 1996&ndash;2005, 2007, 2009&ndash;2023 <br>
Free Software Foundation, Inc.
</p><br>
<br>

<p>This is Edition 5.3 of <cite class="cite">GAWK: Effective AWK Programming: A User&rsquo;s Guide for GNU Awk</cite>,
for the 5.3.0 (or later) version of the GNU
implementation of AWK.
</p>
<p>Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being &ldquo;GNU General Public License&rdquo;, with the
Front-Cover Texts being &ldquo;A GNU Manual&rdquo;, and with the Back-Cover Texts
as in (a) below.
A copy of the license is included in the section entitled
&ldquo;GNU Free Documentation License&rdquo;.
</p>
<ol class="enumerate" type="a" start="1">
<li> The FSF&rsquo;s Back-Cover Text is: &ldquo;You have the freedom to
copy and modify this GNU manual.&rdquo;
</li></ol>





<div class="element-shortcontents" id="SEC_Shortcontents">
<h2 class="shortcontents-heading">Short Table of Contents</h2>

<div class="shortcontents">
<ul class="toc-numbered-mark">
<li><ul class="toc-numbered-mark">
<li><a id="stoc-Foreword-to-the-Third-Edition" href="#toc-Foreword-to-the-Third-Edition">Foreword to the Third Edition</a></li>
<li><a id="stoc-Foreword-to-the-Fourth-Edition" href="#toc-Foreword-to-the-Fourth-Edition">Foreword to the Fourth Edition</a></li>
<li><a id="stoc-Preface-1" href="#toc-Preface-1">Preface</a></li>
</ul></li>
<li><a id="stoc-Part-I_003a-The-awk-Language" href="#toc-Part-I_003a-The-awk-Language">Part I:<br>The <code class="command">awk</code> Language</a><ul class="toc-numbered-mark">
<li><a id="stoc-Getting-Started-with-awk" href="#toc-Getting-Started-with-awk">1 Getting Started with <code class="command">awk</code></a></li>
<li><a id="stoc-Running-awk-and-gawk" href="#toc-Running-awk-and-gawk">2 Running <code class="command">awk</code> and <code class="command">gawk</code></a></li>
<li><a id="stoc-Regular-Expressions" href="#toc-Regular-Expressions">3 Regular Expressions</a></li>
<li><a id="stoc-Reading-Input-Files" href="#toc-Reading-Input-Files">4 Reading Input Files</a></li>
<li><a id="stoc-Printing-Output" href="#toc-Printing-Output">5 Printing Output</a></li>
<li><a id="stoc-Expressions-1" href="#toc-Expressions-1">6 Expressions</a></li>
<li><a id="stoc-Patterns_002c-Actions_002c-and-Variables" href="#toc-Patterns_002c-Actions_002c-and-Variables">7 Patterns, Actions, and Variables</a></li>
<li><a id="stoc-Arrays-in-awk" href="#toc-Arrays-in-awk">8 Arrays in <code class="command">awk</code></a></li>
<li><a id="stoc-Functions-1" href="#toc-Functions-1">9 Functions</a></li>
</ul></li>
<li><a id="stoc-Part-II_003a-Problem-Solving-with-awk" href="#toc-Part-II_003a-Problem-Solving-with-awk">Part II:<br>Problem Solving with <code class="command">awk</code></a><ul class="toc-numbered-mark">
<li><a id="stoc-A-Library-of-awk-Functions" href="#toc-A-Library-of-awk-Functions">10 A Library of <code class="command">awk</code> Functions</a></li>
<li><a id="stoc-Practical-awk-Programs" href="#toc-Practical-awk-Programs">11 Practical <code class="command">awk</code> Programs</a></li>
</ul></li>
<li><a id="stoc-Part-III_003a-Moving-Beyond-Standard-awk-with-gawk" href="#toc-Part-III_003a-Moving-Beyond-Standard-awk-with-gawk">Part III:<br>Moving Beyond Standard <code class="command">awk</code> with <code class="command">gawk</code></a><ul class="toc-numbered-mark">
<li><a id="stoc-Advanced-Features-of-gawk" href="#toc-Advanced-Features-of-gawk">12 Advanced Features of <code class="command">gawk</code></a></li>
<li><a id="stoc-Internationalization-with-gawk" href="#toc-Internationalization-with-gawk">13 Internationalization with <code class="command">gawk</code></a></li>
<li><a id="stoc-Debugging-awk-Programs" href="#toc-Debugging-awk-Programs">14 Debugging <code class="command">awk</code> Programs</a></li>
<li><a id="stoc-Namespaces-in-gawk" href="#toc-Namespaces-in-gawk">15 Namespaces in <code class="command">gawk</code></a></li>
<li><a id="stoc-Arithmetic-and-Arbitrary_002dPrecision-Arithmetic-with-gawk" href="#toc-Arithmetic-and-Arbitrary_002dPrecision-Arithmetic-with-gawk">16 Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a></li>
<li><a id="stoc-Writing-Extensions-for-gawk" href="#toc-Writing-Extensions-for-gawk">17 Writing Extensions for <code class="command">gawk</code></a></li>
</ul></li>
<li><a id="stoc-Part-IV_003a-Appendices" href="#toc-Part-IV_003a-Appendices">Part IV:<br>Appendices</a><ul class="toc-numbered-mark">
<li><a id="stoc-The-Evolution-of-the-awk-Language" href="#toc-The-Evolution-of-the-awk-Language">Appendix A The Evolution of the <code class="command">awk</code> Language</a></li>
<li><a id="stoc-Installing-gawk" href="#toc-Installing-gawk">Appendix B Installing <code class="command">gawk</code></a></li>
<li><a id="stoc-Implementation-Notes" href="#toc-Implementation-Notes">Appendix C Implementation Notes</a></li>
<li><a id="stoc-Basic-Programming-Concepts" href="#toc-Basic-Programming-Concepts">Appendix D Basic Programming Concepts</a></li>
<li><a id="stoc-Glossary-1" href="#toc-Glossary-1">Glossary</a></li>
<li><a id="stoc-GNU-General-Public-License" href="#toc-GNU-General-Public-License">GNU General Public License</a></li>
<li><a id="stoc-GNU-Free-Documentation-License-1" href="#toc-GNU-Free-Documentation-License-1">GNU Free Documentation License</a></li>
<li><a id="stoc-Index-1" href="#toc-Index-1" rel="index">Index</a></li>
</ul></li>

</ul>
</div>
</div>
<div class="element-contents" id="SEC_Contents">
<h2 class="contents-heading">Table of Contents</h2>

<div class="contents">
<ul class="toc-numbered-mark">
<li>
<ul class="toc-numbered-mark">
  <li><a id="toc-Foreword-to-the-Third-Edition" href="#Foreword3">Foreword to the Third Edition</a></li>
  <li><a id="toc-Foreword-to-the-Fourth-Edition" href="#Foreword4">Foreword to the Fourth Edition</a></li>
  <li><a id="toc-Preface-1" href="#Preface">Preface</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-History-of-awk-and-gawk" href="#History">History of <code class="command">awk</code> and <code class="command">gawk</code></a></li>
    <li><a id="toc-A-Rose-by-Any-Other-Name" href="#Names">A Rose by Any Other Name</a></li>
    <li><a id="toc-Using-This-Book" href="#This-Manual">Using This Book</a></li>
    <li><a id="toc-Typographical-Conventions" href="#Conventions">Typographical Conventions</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Dark-Corners" href="#Dark-Corners">Dark Corners</a></li>
    </ul></li>
    <li><a id="toc-The-GNU-Project-and-This-Book" href="#Manual-History">The GNU Project and This Book</a></li>
    <li><a id="toc-How-to-Contribute" href="#How-To-Contribute">How to Contribute</a></li>
    <li><a id="toc-Acknowledgments-1" href="#Acknowledgments">Acknowledgments</a></li>
  </ul></li>
</ul></li>
<li><a id="toc-Part-I_003a-The-awk-Language" href="#Part-I_003a-The-awk-Language">Part I:<br>The <code class="command">awk</code> Language</a>
<ul class="toc-numbered-mark">
  <li><a id="toc-Getting-Started-with-awk" href="#Getting-Started">1 Getting Started with <code class="command">awk</code></a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-How-to-Run-awk-Programs" href="#Running-gawk">1.1 How to Run <code class="command">awk</code> Programs</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-One_002dShot-Throwaway-awk-Programs" href="#One_002dshot">1.1.1 One-Shot Throwaway <code class="command">awk</code> Programs</a></li>
      <li><a id="toc-Running-awk-Without-Input-Files" href="#Read-Terminal">1.1.2 Running <code class="command">awk</code> Without Input Files</a></li>
      <li><a id="toc-Running-Long-Programs" href="#Long">1.1.3 Running Long Programs</a></li>
      <li><a id="toc-Executable-awk-Programs" href="#Executable-Scripts">1.1.4 Executable <code class="command">awk</code> Programs</a></li>
      <li><a id="toc-Comments-in-awk-Programs" href="#Comments">1.1.5 Comments in <code class="command">awk</code> Programs</a></li>
      <li><a id="toc-Shell-Quoting-Issues" href="#Quoting">1.1.6 Shell Quoting Issues</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-Quoting-in-MS_002dWindows-Batch-Files" href="#DOS-Quoting">1.1.6.1 Quoting in MS-Windows Batch Files</a></li>
      </ul></li>
    </ul></li>
    <li><a id="toc-Data-files-for-the-Examples" href="#Sample-Data-Files">1.2 Data files for the Examples</a></li>
    <li><a id="toc-Some-Simple-Examples" href="#Very-Simple">1.3 Some Simple Examples</a></li>
    <li><a id="toc-An-Example-with-Two-Rules" href="#Two-Rules">1.4 An Example with Two Rules</a></li>
    <li><a id="toc-A-More-Complex-Example" href="#More-Complex">1.5 A More Complex Example</a></li>
    <li><a id="toc-awk-Statements-Versus-Lines" href="#Statements_002fLines">1.6 <code class="command">awk</code> Statements Versus Lines</a></li>
    <li><a id="toc-Other-Features-of-awk" href="#Other-Features">1.7 Other Features of <code class="command">awk</code></a></li>
    <li><a id="toc-When-to-Use-awk" href="#When">1.8 When to Use <code class="command">awk</code></a></li>
    <li><a id="toc-Summary" href="#Intro-Summary">1.9 Summary</a></li>
  </ul></li>
  <li><a id="toc-Running-awk-and-gawk" href="#Invoking-Gawk">2 Running <code class="command">awk</code> and <code class="command">gawk</code></a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Invoking-awk" href="#Command-Line">2.1 Invoking <code class="command">awk</code></a></li>
    <li><a id="toc-Command_002dLine-Options" href="#Options">2.2 Command-Line Options</a></li>
    <li><a id="toc-Other-Command_002dLine-Arguments" href="#Other-Arguments">2.3 Other Command-Line Arguments</a></li>
    <li><a id="toc-Naming-Standard-Input-1" href="#Naming-Standard-Input">2.4 Naming Standard Input</a></li>
    <li><a id="toc-The-Environment-Variables-gawk-Uses" href="#Environment-Variables">2.5 The Environment Variables <code class="command">gawk</code> Uses</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-The-AWKPATH-Environment-Variable" href="#AWKPATH-Variable">2.5.1 The <code class="env">AWKPATH</code> Environment Variable</a></li>
      <li><a id="toc-The-AWKLIBPATH-Environment-Variable" href="#AWKLIBPATH-Variable">2.5.2 The <code class="env">AWKLIBPATH</code> Environment Variable</a></li>
      <li><a id="toc-Other-Environment-Variables-1" href="#Other-Environment-Variables">2.5.3 Other Environment Variables</a></li>
    </ul></li>
    <li><a id="toc-gawk_0027s-Exit-Status" href="#Exit-Status">2.6 <code class="command">gawk</code>&rsquo;s Exit Status</a></li>
    <li><a id="toc-Including-Other-Files-into-Your-Program" href="#Include-Files">2.7 Including Other Files into Your Program</a></li>
    <li><a id="toc-Loading-Dynamic-Extensions-into-Your-Program" href="#Loading-Shared-Libraries">2.8 Loading Dynamic Extensions into Your Program</a></li>
    <li><a id="toc-Obsolete-Options-and_002for-Features" href="#Obsolete">2.9 Obsolete Options and/or Features</a></li>
    <li><a id="toc-Undocumented-Options-and-Features" href="#Undocumented">2.10 Undocumented Options and Features</a></li>
    <li><a id="toc-Summary-1" href="#Invoking-Summary">2.11 Summary</a></li>
  </ul></li>
  <li><a id="toc-Regular-Expressions" href="#Regexp">3 Regular Expressions</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-How-to-Use-Regular-Expressions" href="#Regexp-Usage">3.1 How to Use Regular Expressions</a></li>
    <li><a id="toc-Escape-Sequences-1" href="#Escape-Sequences">3.2 Escape Sequences</a></li>
    <li><a id="toc-Regular-Expression-Operators" href="#Regexp-Operators">3.3 Regular Expression Operators</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Regexp-Operators-in-awk" href="#Regexp-Operator-Details">3.3.1 Regexp Operators in <code class="command">awk</code></a></li>
      <li><a id="toc-Some-Notes-On-Interval-Expressions" href="#Interval-Expressions">3.3.2 Some Notes On Interval Expressions</a></li>
    </ul></li>
    <li><a id="toc-Using-Bracket-Expressions" href="#Bracket-Expressions">3.4 Using Bracket Expressions</a></li>
    <li><a id="toc-How-Much-Text-Matches_003f" href="#Leftmost-Longest">3.5 How Much Text Matches?</a></li>
    <li><a id="toc-Using-Dynamic-Regexps" href="#Computed-Regexps">3.6 Using Dynamic Regexps</a></li>
    <li><a id="toc-gawk_002dSpecific-Regexp-Operators" href="#GNU-Regexp-Operators">3.7 <code class="command">gawk</code>-Specific Regexp Operators</a></li>
    <li><a id="toc-Case-Sensitivity-in-Matching" href="#Case_002dsensitivity">3.8 Case Sensitivity in Matching</a></li>
    <li><a id="toc-Summary-2" href="#Regexp-Summary">3.9 Summary</a></li>
  </ul></li>
  <li><a id="toc-Reading-Input-Files" href="#Reading-Files">4 Reading Input Files</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-How-Input-Is-Split-into-Records" href="#Records">4.1 How Input Is Split into Records</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Record-Splitting-with-Standard-awk" href="#awk-split-records">4.1.1 Record Splitting with Standard <code class="command">awk</code></a></li>
      <li><a id="toc-Record-Splitting-with-gawk" href="#gawk-split-records">4.1.2 Record Splitting with <code class="command">gawk</code></a></li>
    </ul></li>
    <li><a id="toc-Examining-Fields" href="#Fields">4.2 Examining Fields</a></li>
    <li><a id="toc-Nonconstant-Field-Numbers" href="#Nonconstant-Fields">4.3 Nonconstant Field Numbers</a></li>
    <li><a id="toc-Changing-the-Contents-of-a-Field" href="#Changing-Fields">4.4 Changing the Contents of a Field</a></li>
    <li><a id="toc-Specifying-How-Fields-Are-Separated" href="#Field-Separators">4.5 Specifying How Fields Are Separated</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Whitespace-Normally-Separates-Fields" href="#Default-Field-Splitting">4.5.1 Whitespace Normally Separates Fields</a></li>
      <li><a id="toc-Using-Regular-Expressions-to-Separate-Fields" href="#Regexp-Field-Splitting">4.5.2 Using Regular Expressions to Separate Fields</a></li>
      <li><a id="toc-Making-Each-Character-a-Separate-Field" href="#Single-Character-Fields">4.5.3 Making Each Character a Separate Field</a></li>
      <li><a id="toc-Working-With-Comma-Separated-Value-Files" href="#Comma-Separated-Fields">4.5.4 Working With Comma Separated Value Files</a></li>
      <li><a id="toc-Setting-FS-from-the-Command-Line" href="#Command-Line-Field-Separator">4.5.5 Setting <code class="code">FS</code> from the Command Line</a></li>
      <li><a id="toc-Making-the-Full-Line-Be-a-Single-Field" href="#Full-Line-Fields">4.5.6 Making the Full Line Be a Single Field</a></li>
      <li><a id="toc-Field_002dSplitting-Summary" href="#Field-Splitting-Summary">4.5.7 Field-Splitting Summary</a></li>
    </ul></li>
    <li><a id="toc-Reading-Fixed_002dWidth-Data" href="#Constant-Size">4.6 Reading Fixed-Width Data</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Processing-Fixed_002dWidth-Data" href="#Fixed-width-data">4.6.1 Processing Fixed-Width Data</a></li>
      <li><a id="toc-Skipping-Intervening-Fields" href="#Skipping-intervening">4.6.2 Skipping Intervening Fields</a></li>
      <li><a id="toc-Capturing-Optional-Trailing-Data" href="#Allowing-trailing-data">4.6.3 Capturing Optional Trailing Data</a></li>
      <li><a id="toc-Field-Values-With-Fixed_002dWidth-Data" href="#Fields-with-fixed-data">4.6.4 Field Values With Fixed-Width Data</a></li>
    </ul></li>
    <li><a id="toc-Defining-Fields-by-Content" href="#Splitting-By-Content">4.7 Defining Fields by Content</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-More-on-CSV-Files" href="#More-CSV">4.7.1 More on CSV Files</a></li>
      <li><a id="toc-FS-Versus-FPAT_003a-A-Subtle-Difference" href="#FS-versus-FPAT">4.7.2 <code class="code">FS</code> Versus <code class="code">FPAT</code>: A Subtle Difference</a></li>
    </ul></li>
    <li><a id="toc-Checking-How-gawk-Is-Splitting-Records" href="#Testing-field-creation">4.8 Checking How <code class="command">gawk</code> Is Splitting Records</a></li>
    <li><a id="toc-Multiple_002dLine-Records" href="#Multiple-Line">4.9 Multiple-Line Records</a></li>
    <li><a id="toc-Explicit-Input-with-getline" href="#Getline">4.10 Explicit Input with <code class="code">getline</code></a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Using-getline-with-No-Arguments" href="#Plain-Getline">4.10.1 Using <code class="code">getline</code> with No Arguments</a></li>
      <li><a id="toc-Using-getline-into-a-Variable" href="#Getline_002fVariable">4.10.2 Using <code class="code">getline</code> into a Variable</a></li>
      <li><a id="toc-Using-getline-from-a-File" href="#Getline_002fFile">4.10.3 Using <code class="code">getline</code> from a File</a></li>
      <li><a id="toc-Using-getline-into-a-Variable-from-a-File" href="#Getline_002fVariable_002fFile">4.10.4 Using <code class="code">getline</code> into a Variable from a File</a></li>
      <li><a id="toc-Using-getline-from-a-Pipe" href="#Getline_002fPipe">4.10.5 Using <code class="code">getline</code> from a Pipe</a></li>
      <li><a id="toc-Using-getline-into-a-Variable-from-a-Pipe" href="#Getline_002fVariable_002fPipe">4.10.6 Using <code class="code">getline</code> into a Variable from a Pipe</a></li>
      <li><a id="toc-Using-getline-from-a-Coprocess" href="#Getline_002fCoprocess">4.10.7 Using <code class="code">getline</code> from a Coprocess</a></li>
      <li><a id="toc-Using-getline-into-a-Variable-from-a-Coprocess" href="#Getline_002fVariable_002fCoprocess">4.10.8 Using <code class="code">getline</code> into a Variable from a Coprocess</a></li>
      <li><a id="toc-Points-to-Remember-About-getline" href="#Getline-Notes">4.10.9 Points to Remember About <code class="code">getline</code></a></li>
      <li><a id="toc-Summary-of-getline-Variants" href="#Getline-Summary">4.10.10 Summary of <code class="code">getline</code> Variants</a></li>
    </ul></li>
    <li><a id="toc-Reading-Input-with-a-Timeout" href="#Read-Timeout">4.11 Reading Input with a Timeout</a></li>
    <li><a id="toc-Retrying-Reads-After-Certain-Input-Errors" href="#Retrying-Input">4.12 Retrying Reads After Certain Input Errors</a></li>
    <li><a id="toc-Directories-on-the-Command-Line" href="#Command_002dline-directories">4.13 Directories on the Command Line</a></li>
    <li><a id="toc-Summary-3" href="#Input-Summary">4.14 Summary</a></li>
    <li><a id="toc-Exercises" href="#Input-Exercises">4.15 Exercises</a></li>
  </ul></li>
  <li><a id="toc-Printing-Output" href="#Printing">5 Printing Output</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-The-print-Statement" href="#Print">5.1 The <code class="code">print</code> Statement</a></li>
    <li><a id="toc-print-Statement-Examples" href="#Print-Examples">5.2 <code class="code">print</code> Statement Examples</a></li>
    <li><a id="toc-Output-Separators-1" href="#Output-Separators">5.3 Output Separators</a></li>
    <li><a id="toc-Controlling-Numeric-Output-with-print" href="#OFMT">5.4 Controlling Numeric Output with <code class="code">print</code></a></li>
    <li><a id="toc-Using-printf-Statements-for-Fancier-Printing" href="#Printf">5.5 Using <code class="code">printf</code> Statements for Fancier Printing</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Introduction-to-the-printf-Statement" href="#Basic-Printf">5.5.1 Introduction to the <code class="code">printf</code> Statement</a></li>
      <li><a id="toc-Format_002dControl-Letters" href="#Control-Letters">5.5.2 Format-Control Letters</a></li>
      <li><a id="toc-Modifiers-for-printf-Formats" href="#Format-Modifiers">5.5.3 Modifiers for <code class="code">printf</code> Formats</a></li>
      <li><a id="toc-Examples-Using-printf" href="#Printf-Examples">5.5.4 Examples Using <code class="code">printf</code></a></li>
    </ul></li>
    <li><a id="toc-Redirecting-Output-of-print-and-printf" href="#Redirection">5.6 Redirecting Output of <code class="code">print</code> and <code class="code">printf</code></a></li>
    <li><a id="toc-Special-Files-for-Standard-Preopened-Data-Streams" href="#Special-FD">5.7 Special Files for Standard Preopened Data Streams</a></li>
    <li><a id="toc-Special-File-names-in-gawk" href="#Special-Files">5.8 Special File names in <code class="command">gawk</code></a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Accessing-Other-Open-Files-with-gawk" href="#Other-Inherited-Files">5.8.1 Accessing Other Open Files with <code class="command">gawk</code></a></li>
      <li><a id="toc-Special-Files-for-Network-Communications" href="#Special-Network">5.8.2 Special Files for Network Communications</a></li>
      <li><a id="toc-Special-File-name-Caveats" href="#Special-Caveats">5.8.3 Special File name Caveats</a></li>
    </ul></li>
    <li><a id="toc-Closing-Input-and-Output-Redirections" href="#Close-Files-And-Pipes">5.9 Closing Input and Output Redirections</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Using-close_0028_0029_0027s-Return-Value" href="#Close-Return-Value">5.9.1 Using <code class="code">close()</code>&rsquo;s Return Value</a></li>
    </ul></li>
    <li><a id="toc-Speeding-Up-Pipe-Output" href="#Noflush">5.10 Speeding Up Pipe Output</a></li>
    <li><a id="toc-Enabling-Nonfatal-Output" href="#Nonfatal">5.11 Enabling Nonfatal Output</a></li>
    <li><a id="toc-Summary-4" href="#Output-Summary">5.12 Summary</a></li>
    <li><a id="toc-Exercises-1" href="#Output-Exercises">5.13 Exercises</a></li>
  </ul></li>
  <li><a id="toc-Expressions-1" href="#Expressions">6 Expressions</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Constants_002c-Variables_002c-and-Conversions" href="#Values">6.1 Constants, Variables, and Conversions</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Constant-Expressions" href="#Constants">6.1.1 Constant Expressions</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-Numeric-and-String-Constants" href="#Scalar-Constants">6.1.1.1 Numeric and String Constants</a></li>
        <li><a id="toc-Octal-and-Hexadecimal-Numbers" href="#Nondecimal_002dnumbers">6.1.1.2 Octal and Hexadecimal Numbers</a></li>
        <li><a id="toc-Regular-Expression-Constants" href="#Regexp-Constants">6.1.1.3 Regular Expression Constants</a></li>
      </ul></li>
      <li><a id="toc-Using-Regular-Expression-Constants" href="#Using-Constant-Regexps">6.1.2 Using Regular Expression Constants</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-Standard-Regular-Expression-Constants" href="#Standard-Regexp-Constants">6.1.2.1 Standard Regular Expression Constants</a></li>
        <li><a id="toc-Strongly-Typed-Regexp-Constants" href="#Strong-Regexp-Constants">6.1.2.2 Strongly Typed Regexp Constants</a></li>
      </ul></li>
      <li><a id="toc-Variables-1" href="#Variables">6.1.3 Variables</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-Using-Variables-in-a-Program" href="#Using-Variables">6.1.3.1 Using Variables in a Program</a></li>
        <li><a id="toc-Assigning-Variables-on-the-Command-Line" href="#Assignment-Options">6.1.3.2 Assigning Variables on the Command Line</a></li>
      </ul></li>
      <li><a id="toc-Conversion-of-Strings-and-Numbers" href="#Conversion">6.1.4 Conversion of Strings and Numbers</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-How-awk-Converts-Between-Strings-and-Numbers" href="#Strings-And-Numbers">6.1.4.1 How <code class="command">awk</code> Converts Between Strings and Numbers</a></li>
        <li><a id="toc-Locales-Can-Influence-Conversion" href="#Locale-influences-conversions">6.1.4.2 Locales Can Influence Conversion</a></li>
      </ul></li>
    </ul></li>
    <li><a id="toc-Operators_003a-Doing-Something-with-Values" href="#All-Operators">6.2 Operators: Doing Something with Values</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Arithmetic-Operators" href="#Arithmetic-Ops">6.2.1 Arithmetic Operators</a></li>
      <li><a id="toc-String-Concatenation" href="#Concatenation">6.2.2 String Concatenation</a></li>
      <li><a id="toc-Assignment-Expressions" href="#Assignment-Ops">6.2.3 Assignment Expressions</a></li>
      <li><a id="toc-Increment-and-Decrement-Operators" href="#Increment-Ops">6.2.4 Increment and Decrement Operators</a></li>
    </ul></li>
    <li><a id="toc-Truth-Values-and-Conditions-1" href="#Truth-Values-and-Conditions">6.3 Truth Values and Conditions</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-True-and-False-in-awk" href="#Truth-Values">6.3.1 True and False in <code class="command">awk</code></a></li>
      <li><a id="toc-Variable-Typing-and-Comparison-Expressions" href="#Typing-and-Comparison">6.3.2 Variable Typing and Comparison Expressions</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-String-Type-versus-Numeric-Type" href="#Variable-Typing">6.3.2.1 String Type versus Numeric Type</a></li>
        <li><a id="toc-Comparison-Operators-1" href="#Comparison-Operators">6.3.2.2 Comparison Operators</a></li>
        <li><a id="toc-String-Comparison-Based-on-Locale-Collating-Order" href="#POSIX-String-Comparison">6.3.2.3 String Comparison Based on Locale Collating Order</a></li>
      </ul></li>
      <li><a id="toc-Boolean-Expressions" href="#Boolean-Ops">6.3.3 Boolean Expressions</a></li>
      <li><a id="toc-Conditional-Expressions" href="#Conditional-Exp">6.3.4 Conditional Expressions</a></li>
    </ul></li>
    <li><a id="toc-Function-Calls-1" href="#Function-Calls">6.4 Function Calls</a></li>
    <li><a id="toc-Operator-Precedence-_0028How-Operators-Nest_0029" href="#Precedence">6.5 Operator Precedence (How Operators Nest)</a></li>
    <li><a id="toc-Where-You-Are-Makes-a-Difference" href="#Locales">6.6 Where You Are Makes a Difference</a></li>
    <li><a id="toc-Summary-5" href="#Expressions-Summary">6.7 Summary</a></li>
  </ul></li>
  <li><a id="toc-Patterns_002c-Actions_002c-and-Variables" href="#Patterns-and-Actions">7 Patterns, Actions, and Variables</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Pattern-Elements" href="#Pattern-Overview">7.1 Pattern Elements</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Regular-Expressions-as-Patterns" href="#Regexp-Patterns">7.1.1 Regular Expressions as Patterns</a></li>
      <li><a id="toc-Expressions-as-Patterns" href="#Expression-Patterns">7.1.2 Expressions as Patterns</a></li>
      <li><a id="toc-Specifying-Record-Ranges-with-Patterns" href="#Ranges">7.1.3 Specifying Record Ranges with Patterns</a></li>
      <li><a id="toc-The-BEGIN-and-END-Special-Patterns" href="#BEGIN_002fEND">7.1.4 The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-Startup-and-Cleanup-Actions" href="#Using-BEGIN_002fEND">7.1.4.1 Startup and Cleanup Actions</a></li>
        <li><a id="toc-Input_002fOutput-from-BEGIN-and-END-Rules" href="#I_002fO-And-BEGIN_002fEND">7.1.4.2 Input/Output from <code class="code">BEGIN</code> and <code class="code">END</code> Rules</a></li>
      </ul></li>
      <li><a id="toc-The-BEGINFILE-and-ENDFILE-Special-Patterns" href="#BEGINFILE_002fENDFILE">7.1.5 The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a></li>
      <li><a id="toc-The-Empty-Pattern" href="#Empty">7.1.6 The Empty Pattern</a></li>
    </ul></li>
    <li><a id="toc-Using-Shell-Variables-in-Programs" href="#Using-Shell-Variables">7.2 Using Shell Variables in Programs</a></li>
    <li><a id="toc-Actions" href="#Action-Overview">7.3 Actions</a></li>
    <li><a id="toc-Control-Statements-in-Actions" href="#Statements">7.4 Control Statements in Actions</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-The-if_002delse-Statement" href="#If-Statement">7.4.1 The <code class="code">if</code>-<code class="code">else</code> Statement</a></li>
      <li><a id="toc-The-while-Statement" href="#While-Statement">7.4.2 The <code class="code">while</code> Statement</a></li>
      <li><a id="toc-The-do_002dwhile-Statement" href="#Do-Statement">7.4.3 The <code class="code">do</code>-<code class="code">while</code> Statement</a></li>
      <li><a id="toc-The-for-Statement" href="#For-Statement">7.4.4 The <code class="code">for</code> Statement</a></li>
      <li><a id="toc-The-switch-Statement" href="#Switch-Statement">7.4.5 The <code class="code">switch</code> Statement</a></li>
      <li><a id="toc-The-break-Statement" href="#Break-Statement">7.4.6 The <code class="code">break</code> Statement</a></li>
      <li><a id="toc-The-continue-Statement" href="#Continue-Statement">7.4.7 The <code class="code">continue</code> Statement</a></li>
      <li><a id="toc-The-next-Statement" href="#Next-Statement">7.4.8 The <code class="code">next</code> Statement</a></li>
      <li><a id="toc-The-nextfile-Statement" href="#Nextfile-Statement">7.4.9 The <code class="code">nextfile</code> Statement</a></li>
      <li><a id="toc-The-exit-Statement" href="#Exit-Statement">7.4.10 The <code class="code">exit</code> Statement</a></li>
    </ul></li>
    <li><a id="toc-Predefined-Variables" href="#Built_002din-Variables">7.5 Predefined Variables</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Built_002din-Variables-That-Control-awk" href="#User_002dmodified">7.5.1 Built-in Variables That Control <code class="command">awk</code></a></li>
      <li><a id="toc-Built_002din-Variables-That-Convey-Information" href="#Auto_002dset">7.5.2 Built-in Variables That Convey Information</a></li>
      <li><a id="toc-Using-ARGC-and-ARGV" href="#ARGC-and-ARGV">7.5.3 Using <code class="code">ARGC</code> and <code class="code">ARGV</code></a></li>
    </ul></li>
    <li><a id="toc-Summary-6" href="#Pattern-Action-Summary">7.6 Summary</a></li>
  </ul></li>
  <li><a id="toc-Arrays-in-awk" href="#Arrays">8 Arrays in <code class="command">awk</code></a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-The-Basics-of-Arrays" href="#Array-Basics">8.1 The Basics of Arrays</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Introduction-to-Arrays" href="#Array-Intro">8.1.1 Introduction to Arrays</a></li>
      <li><a id="toc-Referring-to-an-Array-Element" href="#Reference-to-Elements">8.1.2 Referring to an Array Element</a></li>
      <li><a id="toc-Assigning-Array-Elements" href="#Assigning-Elements">8.1.3 Assigning Array Elements</a></li>
      <li><a id="toc-Basic-Array-Example" href="#Array-Example">8.1.4 Basic Array Example</a></li>
      <li><a id="toc-Scanning-All-Elements-of-an-Array" href="#Scanning-an-Array">8.1.5 Scanning All Elements of an Array</a></li>
      <li><a id="toc-Using-Predefined-Array-Scanning-Orders-with-gawk" href="#Controlling-Scanning">8.1.6 Using Predefined Array Scanning Orders with <code class="command">gawk</code></a></li>
    </ul></li>
    <li><a id="toc-Using-Numbers-to-Subscript-Arrays" href="#Numeric-Array-Subscripts">8.2 Using Numbers to Subscript Arrays</a></li>
    <li><a id="toc-Using-Uninitialized-Variables-as-Subscripts" href="#Uninitialized-Subscripts">8.3 Using Uninitialized Variables as Subscripts</a></li>
    <li><a id="toc-The-delete-Statement" href="#Delete">8.4 The <code class="code">delete</code> Statement</a></li>
    <li><a id="toc-Multidimensional-Arrays" href="#Multidimensional">8.5 Multidimensional Arrays</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Scanning-Multidimensional-Arrays" href="#Multiscanning">8.5.1 Scanning Multidimensional Arrays</a></li>
    </ul></li>
    <li><a id="toc-Arrays-of-Arrays-1" href="#Arrays-of-Arrays">8.6 Arrays of Arrays</a></li>
    <li><a id="toc-Summary-7" href="#Arrays-Summary">8.7 Summary</a></li>
  </ul></li>
  <li><a id="toc-Functions-1" href="#Functions">9 Functions</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Built_002din-Functions" href="#Built_002din">9.1 Built-in Functions</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Calling-Built_002din-Functions" href="#Calling-Built_002din">9.1.1 Calling Built-in Functions</a></li>
      <li><a id="toc-Generating-Boolean-Values" href="#Boolean-Functions">9.1.2 Generating Boolean Values</a></li>
      <li><a id="toc-Numeric-Functions-1" href="#Numeric-Functions">9.1.3 Numeric Functions</a></li>
      <li><a id="toc-String_002dManipulation-Functions" href="#String-Functions">9.1.4 String-Manipulation Functions</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-More-about-_005c-and-_0026-with-sub_0028_0029_002c-gsub_0028_0029_002c-and-gensub_0028_0029" href="#Gory-Details">9.1.4.1 More about &lsquo;<samp class="samp">\</samp>&rsquo; and &lsquo;<samp class="samp">&amp;</samp>&rsquo; with <code class="code">sub()</code>, <code class="code">gsub()</code>, and <code class="code">gensub()</code></a></li>
      </ul></li>
      <li><a id="toc-Input_002fOutput-Functions" href="#I_002fO-Functions">9.1.5 Input/Output Functions</a></li>
      <li><a id="toc-Time-Functions-1" href="#Time-Functions">9.1.6 Time Functions</a></li>
      <li><a id="toc-Bit_002dManipulation-Functions" href="#Bitwise-Functions">9.1.7 Bit-Manipulation Functions</a></li>
      <li><a id="toc-Getting-Type-Information" href="#Type-Functions">9.1.8 Getting Type Information</a></li>
      <li><a id="toc-String_002dTranslation-Functions" href="#I18N-Functions">9.1.9 String-Translation Functions</a></li>
    </ul></li>
    <li><a id="toc-User_002dDefined-Functions" href="#User_002ddefined">9.2 User-Defined Functions</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Function-Definition-Syntax" href="#Definition-Syntax">9.2.1 Function Definition Syntax</a></li>
      <li><a id="toc-Function-Definition-Examples" href="#Function-Example">9.2.2 Function Definition Examples</a></li>
      <li><a id="toc-Calling-User_002dDefined-Functions" href="#Function-Calling">9.2.3 Calling User-Defined Functions</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-Writing-a-Function-Call" href="#Calling-A-Function">9.2.3.1 Writing a Function Call</a></li>
        <li><a id="toc-Controlling-Variable-Scope" href="#Variable-Scope">9.2.3.2 Controlling Variable Scope</a></li>
        <li><a id="toc-Passing-Function-Arguments-by-Value-Or-by-Reference" href="#Pass-By-Value_002fReference">9.2.3.3 Passing Function Arguments by Value Or by Reference</a></li>
        <li><a id="toc-Other-Points-About-Calling-Functions" href="#Function-Caveats">9.2.3.4 Other Points About Calling Functions</a></li>
      </ul></li>
      <li><a id="toc-The-return-Statement" href="#Return-Statement">9.2.4 The <code class="code">return</code> Statement</a></li>
      <li><a id="toc-Functions-and-Their-Effects-on-Variable-Typing" href="#Dynamic-Typing">9.2.5 Functions and Their Effects on Variable Typing</a></li>
    </ul></li>
    <li><a id="toc-Indirect-Function-Calls" href="#Indirect-Calls">9.3 Indirect Function Calls</a></li>
    <li><a id="toc-Summary-8" href="#Functions-Summary">9.4 Summary</a></li>
  </ul></li>
</ul></li>
<li><a id="toc-Part-II_003a-Problem-Solving-with-awk" href="#Part-II_003a-Problem-Solving-with-awk">Part II:<br>Problem Solving with <code class="command">awk</code></a>
<ul class="toc-numbered-mark">
  <li><a id="toc-A-Library-of-awk-Functions" href="#Library-Functions">10 A Library of <code class="command">awk</code> Functions</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Naming-Library-Function-Global-Variables" href="#Library-Names">10.1 Naming Library Function Global Variables</a></li>
    <li><a id="toc-General-Programming" href="#General-Functions">10.2 General Programming</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Converting-Strings-to-Numbers" href="#Strtonum-Function">10.2.1 Converting Strings to Numbers</a></li>
      <li><a id="toc-Assertions" href="#Assert-Function">10.2.2 Assertions</a></li>
      <li><a id="toc-Rounding-Numbers" href="#Round-Function">10.2.3 Rounding Numbers</a></li>
      <li><a id="toc-The-Cliff-Random-Number-Generator" href="#Cliff-Random-Function">10.2.4 The Cliff Random Number Generator</a></li>
      <li><a id="toc-Translating-Between-Characters-and-Numbers" href="#Ordinal-Functions">10.2.5 Translating Between Characters and Numbers</a></li>
      <li><a id="toc-Merging-an-Array-into-a-String" href="#Join-Function">10.2.6 Merging an Array into a String</a></li>
      <li><a id="toc-Managing-the-Time-of-Day" href="#Getlocaltime-Function">10.2.7 Managing the Time of Day</a></li>
      <li><a id="toc-Reading-a-Whole-File-at-Once" href="#Readfile-Function">10.2.8 Reading a Whole File at Once</a></li>
      <li><a id="toc-Quoting-Strings-to-Pass-to-the-Shell" href="#Shell-Quoting">10.2.9 Quoting Strings to Pass to the Shell</a></li>
      <li><a id="toc-Checking-Whether-A-Value-Is-Numeric" href="#Isnumeric-Function">10.2.10 Checking Whether A Value Is Numeric</a></li>
      <li><a id="toc-Producing-CSV-Data" href="#To-CSV-Function">10.2.11 Producing CSV Data</a></li>
    </ul></li>
    <li><a id="toc-Data-file-Management" href="#Data-File-Management">10.3 Data file Management</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Noting-Data-file-Boundaries" href="#Filetrans-Function">10.3.1 Noting Data file Boundaries</a></li>
      <li><a id="toc-Rereading-the-Current-File" href="#Rewind-Function">10.3.2 Rereading the Current File</a></li>
      <li><a id="toc-Checking-for-Readable-Data-files" href="#File-Checking">10.3.3 Checking for Readable Data files</a></li>
      <li><a id="toc-Checking-for-Zero_002dLength-Files" href="#Empty-Files">10.3.4 Checking for Zero-Length Files</a></li>
      <li><a id="toc-Treating-Assignments-as-File-names" href="#Ignoring-Assigns">10.3.5 Treating Assignments as File names</a></li>
    </ul></li>
    <li><a id="toc-Processing-Command_002dLine-Options" href="#Getopt-Function">10.4 Processing Command-Line Options</a></li>
    <li><a id="toc-Reading-the-User-Database" href="#Passwd-Functions">10.5 Reading the User Database</a></li>
    <li><a id="toc-Reading-the-Group-Database" href="#Group-Functions">10.6 Reading the Group Database</a></li>
    <li><a id="toc-Traversing-Arrays-of-Arrays" href="#Walking-Arrays">10.7 Traversing Arrays of Arrays</a></li>
    <li><a id="toc-Summary-9" href="#Library-Functions-Summary">10.8 Summary</a></li>
    <li><a id="toc-Exercises-2" href="#Library-Exercises">10.9 Exercises</a></li>
  </ul></li>
  <li><a id="toc-Practical-awk-Programs" href="#Sample-Programs">11 Practical <code class="command">awk</code> Programs</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Running-the-Example-Programs" href="#Running-Examples">11.1 Running the Example Programs</a></li>
    <li><a id="toc-Reinventing-Wheels-for-Fun-and-Profit" href="#Clones">11.2 Reinventing Wheels for Fun and Profit</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Cutting-Out-Fields-and-Columns" href="#Cut-Program">11.2.1 Cutting Out Fields and Columns</a></li>
      <li><a id="toc-Searching-for-Regular-Expressions-in-Files" href="#Egrep-Program">11.2.2 Searching for Regular Expressions in Files</a></li>
      <li><a id="toc-Printing-Out-User-Information" href="#Id-Program">11.2.3 Printing Out User Information</a></li>
      <li><a id="toc-Splitting-a-Large-File-into-Pieces" href="#Split-Program">11.2.4 Splitting a Large File into Pieces</a></li>
      <li><a id="toc-Duplicating-Output-into-Multiple-Files" href="#Tee-Program">11.2.5 Duplicating Output into Multiple Files</a></li>
      <li><a id="toc-Printing-Nonduplicated-Lines-of-Text" href="#Uniq-Program">11.2.6 Printing Nonduplicated Lines of Text</a></li>
      <li><a id="toc-Counting-Things" href="#Wc-Program">11.2.7 Counting Things</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-Modern-Character-Sets" href="#Bytes-vs_002e-Characters">11.2.7.1 Modern Character Sets</a></li>
        <li><a id="toc-A-Brief-Introduction-To-Extensions" href="#Using-extensions">11.2.7.2 A Brief Introduction To Extensions</a></li>
        <li><a id="toc-Code-for-wc_002eawk" href="#wc-program">11.2.7.3 Code for <samp class="file">wc.awk</samp></a></li>
      </ul></li>
    </ul></li>
    <li><a id="toc-A-Grab-Bag-of-awk-Programs" href="#Miscellaneous-Programs">11.3 A Grab Bag of <code class="command">awk</code> Programs</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Finding-Duplicated-Words-in-a-Document" href="#Dupword-Program">11.3.1 Finding Duplicated Words in a Document</a></li>
      <li><a id="toc-An-Alarm-Clock-Program" href="#Alarm-Program">11.3.2 An Alarm Clock Program</a></li>
      <li><a id="toc-Transliterating-Characters" href="#Translate-Program">11.3.3 Transliterating Characters</a></li>
      <li><a id="toc-Printing-Mailing-Labels" href="#Labels-Program">11.3.4 Printing Mailing Labels</a></li>
      <li><a id="toc-Generating-Word_002dUsage-Counts" href="#Word-Sorting">11.3.5 Generating Word-Usage Counts</a></li>
      <li><a id="toc-Removing-Duplicates-from-Unsorted-Text" href="#History-Sorting">11.3.6 Removing Duplicates from Unsorted Text</a></li>
      <li><a id="toc-Extracting-Programs-from-Texinfo-Source-Files" href="#Extract-Program">11.3.7 Extracting Programs from Texinfo Source Files</a></li>
      <li><a id="toc-A-Simple-Stream-Editor" href="#Simple-Sed">11.3.8 A Simple Stream Editor</a></li>
      <li><a id="toc-An-Easy-Way-to-Use-Library-Functions" href="#Igawk-Program">11.3.9 An Easy Way to Use Library Functions</a></li>
      <li><a id="toc-Finding-Anagrams-from-a-Dictionary" href="#Anagram-Program">11.3.10 Finding Anagrams from a Dictionary</a></li>
      <li><a id="toc-And-Now-for-Something-Completely-Different" href="#Signature-Program">11.3.11 And Now for Something Completely Different</a></li>
    </ul></li>
    <li><a id="toc-Summary-10" href="#Programs-Summary">11.4 Summary</a></li>
    <li><a id="toc-Exercises-3" href="#Programs-Exercises">11.5 Exercises</a></li>
  </ul></li>
</ul></li>
<li><a id="toc-Part-III_003a-Moving-Beyond-Standard-awk-with-gawk" href="#Part-III_003a-Moving-Beyond-Standard-awk-with-gawk">Part III:<br>Moving Beyond Standard <code class="command">awk</code> with <code class="command">gawk</code></a>
<ul class="toc-numbered-mark">
  <li><a id="toc-Advanced-Features-of-gawk" href="#Advanced-Features">12 Advanced Features of <code class="command">gawk</code></a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Allowing-Nondecimal-Input-Data" href="#Nondecimal-Data">12.1 Allowing Nondecimal Input Data</a></li>
    <li><a id="toc-Boolean-Typed-Values-1" href="#Boolean-Typed-Values">12.2 Boolean Typed Values</a></li>
    <li><a id="toc-Controlling-Array-Traversal-and-Array-Sorting" href="#Array-Sorting">12.3 Controlling Array Traversal and Array Sorting</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Controlling-Array-Traversal-1" href="#Controlling-Array-Traversal">12.3.1 Controlling Array Traversal</a></li>
      <li><a id="toc-Sorting-Array-Values-and-Indices-with-gawk" href="#Array-Sorting-Functions">12.3.2 Sorting Array Values and Indices with <code class="command">gawk</code></a></li>
    </ul></li>
    <li><a id="toc-Two_002dWay-Communications-with-Another-Process" href="#Two_002dway-I_002fO">12.4 Two-Way Communications with Another Process</a></li>
    <li><a id="toc-Using-gawk-for-Network-Programming" href="#TCP_002fIP-Networking">12.5 Using <code class="command">gawk</code> for Network Programming</a></li>
    <li><a id="toc-Profiling-Your-awk-Programs" href="#Profiling">12.6 Profiling Your <code class="command">awk</code> Programs</a></li>
    <li><a id="toc-Preserving-Data-Between-Runs" href="#Persistent-Memory">12.7 Preserving Data Between Runs</a></li>
    <li><a id="toc-Builtin-Features-versus-Extensions" href="#Extension-Philosophy">12.8 Builtin Features versus Extensions</a></li>
    <li><a id="toc-Summary-11" href="#Advanced-Features-Summary">12.9 Summary</a></li>
  </ul></li>
  <li><a id="toc-Internationalization-with-gawk" href="#Internationalization">13 Internationalization with <code class="command">gawk</code></a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Internationalization-and-Localization" href="#I18N-and-L10N">13.1 Internationalization and Localization</a></li>
    <li><a id="toc-GNU-gettext" href="#Explaining-gettext">13.2 GNU <code class="command">gettext</code></a></li>
    <li><a id="toc-Internationalizing-awk-Programs" href="#Programmer-i18n">13.3 Internationalizing <code class="command">awk</code> Programs</a></li>
    <li><a id="toc-Translating-awk-Programs" href="#Translator-i18n">13.4 Translating <code class="command">awk</code> Programs</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Extracting-Marked-Strings" href="#String-Extraction">13.4.1 Extracting Marked Strings</a></li>
      <li><a id="toc-Rearranging-printf-Arguments" href="#Printf-Ordering">13.4.2 Rearranging <code class="code">printf</code> Arguments</a></li>
      <li><a id="toc-awk-Portability-Issues" href="#I18N-Portability">13.4.3 <code class="command">awk</code> Portability Issues</a></li>
    </ul></li>
    <li><a id="toc-A-Simple-Internationalization-Example" href="#I18N-Example">13.5 A Simple Internationalization Example</a></li>
    <li><a id="toc-gawk-Can-Speak-Your-Language" href="#Gawk-I18N">13.6 <code class="command">gawk</code> Can Speak Your Language</a></li>
    <li><a id="toc-Summary-12" href="#I18N-Summary">13.7 Summary</a></li>
  </ul></li>
  <li><a id="toc-Debugging-awk-Programs" href="#Debugger">14 Debugging <code class="command">awk</code> Programs</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Introduction-to-the-gawk-Debugger" href="#Debugging">14.1 Introduction to the <code class="command">gawk</code> Debugger</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Debugging-in-General" href="#Debugging-Concepts">14.1.1 Debugging in General</a></li>
      <li><a id="toc-Debugging-Concepts-1" href="#Debugging-Terms">14.1.2 Debugging Concepts</a></li>
      <li><a id="toc-awk-Debugging" href="#Awk-Debugging">14.1.3 <code class="command">awk</code> Debugging</a></li>
    </ul></li>
    <li><a id="toc-Sample-gawk-Debugging-Session" href="#Sample-Debugging-Session">14.2 Sample <code class="command">gawk</code> Debugging Session</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-How-to-Start-the-Debugger" href="#Debugger-Invocation">14.2.1 How to Start the Debugger</a></li>
      <li><a id="toc-Finding-the-Bug" href="#Finding-The-Bug">14.2.2 Finding the Bug</a></li>
    </ul></li>
    <li><a id="toc-Main-Debugger-Commands" href="#List-of-Debugger-Commands">14.3 Main Debugger Commands</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Control-of-Breakpoints" href="#Breakpoint-Control">14.3.1 Control of Breakpoints</a></li>
      <li><a id="toc-Control-of-Execution" href="#Debugger-Execution-Control">14.3.2 Control of Execution</a></li>
      <li><a id="toc-Viewing-and-Changing-Data" href="#Viewing-And-Changing-Data">14.3.3 Viewing and Changing Data</a></li>
      <li><a id="toc-Working-with-the-Stack" href="#Execution-Stack">14.3.4 Working with the Stack</a></li>
      <li><a id="toc-Obtaining-Information-About-the-Program-and-the-Debugger-State" href="#Debugger-Info">14.3.5 Obtaining Information About the Program and the Debugger State</a></li>
      <li><a id="toc-Miscellaneous-Commands" href="#Miscellaneous-Debugger-Commands">14.3.6 Miscellaneous Commands</a></li>
    </ul></li>
    <li><a id="toc-Readline-Support-1" href="#Readline-Support">14.4 Readline Support</a></li>
    <li><a id="toc-Limitations-1" href="#Limitations">14.5 Limitations</a></li>
    <li><a id="toc-Summary-13" href="#Debugging-Summary">14.6 Summary</a></li>
  </ul></li>
  <li><a id="toc-Namespaces-in-gawk" href="#Namespaces">15 Namespaces in <code class="command">gawk</code></a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Standard-awk_0027s-Single-Namespace" href="#Global-Namespace">15.1 Standard <code class="command">awk</code>&rsquo;s Single Namespace</a></li>
    <li><a id="toc-Qualified-Names-1" href="#Qualified-Names">15.2 Qualified Names</a></li>
    <li><a id="toc-The-Default-Namespace" href="#Default-Namespace">15.3 The Default Namespace</a></li>
    <li><a id="toc-Changing-The-Namespace-1" href="#Changing-The-Namespace">15.4 Changing The Namespace</a></li>
    <li><a id="toc-Namespace-and-Component-Naming-Rules" href="#Naming-Rules">15.5 Namespace and Component Naming Rules</a></li>
    <li><a id="toc-Internal-Name-Management-1" href="#Internal-Name-Management">15.6 Internal Name Management</a></li>
    <li><a id="toc-Namespace-Example-1" href="#Namespace-Example">15.7 Namespace Example</a></li>
    <li><a id="toc-Namespaces-and-Other-gawk-Features" href="#Namespace-And-Features">15.8 Namespaces and Other <code class="command">gawk</code> Features</a></li>
    <li><a id="toc-Summary-14" href="#Namespace-Summary">15.9 Summary</a></li>
  </ul></li>
  <li><a id="toc-Arithmetic-and-Arbitrary_002dPrecision-Arithmetic-with-gawk" href="#Arbitrary-Precision-Arithmetic">16 Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-A-General-Description-of-Computer-Arithmetic" href="#Computer-Arithmetic">16.1 A General Description of Computer Arithmetic</a></li>
    <li><a id="toc-Other-Stuff-to-Know" href="#Math-Definitions">16.2 Other Stuff to Know</a></li>
    <li><a id="toc-Arbitrary_002dPrecision-Arithmetic-Features-in-gawk" href="#MPFR-features">16.3 Arbitrary-Precision Arithmetic Features in <code class="command">gawk</code></a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Arbitrary-Precision-Arithmetic-is-On-Parole_0021" href="#MPFR-On-Parole">16.3.1 Arbitrary Precision Arithmetic is On Parole!</a></li>
      <li><a id="toc-Arbitrary-Precision-Introduction" href="#MPFR-Intro">16.3.2 Arbitrary Precision Introduction</a></li>
    </ul></li>
    <li><a id="toc-Floating_002dPoint-Arithmetic_003a-Caveat-Emptor_0021" href="#FP-Math-Caution">16.4 Floating-Point Arithmetic: Caveat Emptor!</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Floating_002dPoint-Arithmetic-Is-Not-Exact" href="#Inexactness-of-computations">16.4.1 Floating-Point Arithmetic Is Not Exact</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-Many-Numbers-Cannot-Be-Represented-Exactly" href="#Inexact-representation">16.4.1.1 Many Numbers Cannot Be Represented Exactly</a></li>
        <li><a id="toc-Be-Careful-Comparing-Values" href="#Comparing-FP-Values">16.4.1.2 Be Careful Comparing Values</a></li>
        <li><a id="toc-Errors-Accumulate" href="#Errors-accumulate">16.4.1.3 Errors Accumulate</a></li>
        <li><a id="toc-Floating-Point-Values-They-Didn_0027t-Talk-About-In-School" href="#Strange-values">16.4.1.4 Floating Point Values They Didn&rsquo;t Talk About In School</a></li>
      </ul></li>
      <li><a id="toc-Getting-the-Accuracy-You-Need" href="#Getting-Accuracy">16.4.2 Getting the Accuracy You Need</a></li>
      <li><a id="toc-Try-a-Few-Extra-Bits-of-Precision-and-Rounding" href="#Try-To-Round">16.4.3 Try a Few Extra Bits of Precision and Rounding</a></li>
      <li><a id="toc-Setting-the-Precision" href="#Setting-precision">16.4.4 Setting the Precision</a></li>
      <li><a id="toc-Setting-the-Rounding-Mode" href="#Setting-the-rounding-mode">16.4.5 Setting the Rounding Mode</a></li>
    </ul></li>
    <li><a id="toc-Arbitrary_002dPrecision-Integer-Arithmetic-with-gawk" href="#Arbitrary-Precision-Integers">16.5 Arbitrary-Precision Integer Arithmetic with <code class="command">gawk</code></a></li>
    <li><a id="toc-How-To-Check-If-MPFR-Is-Available" href="#Checking-for-MPFR">16.6 How To Check If MPFR Is Available</a></li>
    <li><a id="toc-Standards-Versus-Existing-Practice" href="#POSIX-Floating-Point-Problems">16.7 Standards Versus Existing Practice</a></li>
    <li><a id="toc-Summary-15" href="#Floating-point-summary">16.8 Summary</a></li>
  </ul></li>
  <li><a id="toc-Writing-Extensions-for-gawk" href="#Dynamic-Extensions">17 Writing Extensions for <code class="command">gawk</code></a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Introduction" href="#Extension-Intro">17.1 Introduction</a></li>
    <li><a id="toc-Extension-Licensing" href="#Plugin-License">17.2 Extension Licensing</a></li>
    <li><a id="toc-How-It-Works-at-a-High-Level" href="#Extension-Mechanism-Outline">17.3 How It Works at a High Level</a></li>
    <li><a id="toc-API-Description" href="#Extension-API-Description">17.4 API Description</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Introduction-1" href="#Extension-API-Functions-Introduction">17.4.1 Introduction</a></li>
      <li><a id="toc-General_002dPurpose-Data-Types" href="#General-Data-Types">17.4.2 General-Purpose Data Types</a></li>
      <li><a id="toc-Memory-Allocation-Functions-and-Convenience-Macros" href="#Memory-Allocation-Functions">17.4.3 Memory Allocation Functions and Convenience Macros</a></li>
      <li><a id="toc-Constructor-Functions-1" href="#Constructor-Functions">17.4.4 Constructor Functions</a></li>
      <li><a id="toc-Managing-MPFR-and-GMP-Values" href="#API-Ownership-of-MPFR-and-GMP-Values">17.4.5 Managing MPFR and GMP Values</a></li>
      <li><a id="toc-Registration-Functions-1" href="#Registration-Functions">17.4.6 Registration Functions</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-Registering-An-Extension-Function" href="#Extension-Functions">17.4.6.1 Registering An Extension Function</a></li>
        <li><a id="toc-Registering-An-Exit-Callback-Function" href="#Exit-Callback-Functions">17.4.6.2 Registering An Exit Callback Function</a></li>
        <li><a id="toc-Registering-An-Extension-Version-String" href="#Extension-Version-String">17.4.6.3 Registering An Extension Version String</a></li>
        <li><a id="toc-Customized-Input-Parsers" href="#Input-Parsers">17.4.6.4 Customized Input Parsers</a></li>
        <li><a id="toc-Customized-Output-Wrappers" href="#Output-Wrappers">17.4.6.5 Customized Output Wrappers</a></li>
        <li><a id="toc-Customized-Two_002dway-Processors" href="#Two_002dway-processors">17.4.6.6 Customized Two-way Processors</a></li>
      </ul></li>
      <li><a id="toc-Printing-Messages-1" href="#Printing-Messages">17.4.7 Printing Messages</a></li>
      <li><a id="toc-Updating-ERRNO-1" href="#Updating-ERRNO">17.4.8 Updating <code class="code">ERRNO</code></a></li>
      <li><a id="toc-Requesting-Values-1" href="#Requesting-Values">17.4.9 Requesting Values</a></li>
      <li><a id="toc-Accessing-and-Updating-Parameters" href="#Accessing-Parameters">17.4.10 Accessing and Updating Parameters</a></li>
      <li><a id="toc-Symbol-Table-Access-1" href="#Symbol-Table-Access">17.4.11 Symbol Table Access</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-Variable-Access-and-Update-by-Name" href="#Symbol-table-by-name">17.4.11.1 Variable Access and Update by Name</a></li>
        <li><a id="toc-Variable-Access-and-Update-by-Cookie" href="#Symbol-table-by-cookie">17.4.11.2 Variable Access and Update by Cookie</a></li>
        <li><a id="toc-Creating-and-Using-Cached-Values" href="#Cached-values">17.4.11.3 Creating and Using Cached Values</a></li>
      </ul></li>
      <li><a id="toc-Array-Manipulation-1" href="#Array-Manipulation">17.4.12 Array Manipulation</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-Array-Data-Types-1" href="#Array-Data-Types">17.4.12.1 Array Data Types</a></li>
        <li><a id="toc-Array-Functions-1" href="#Array-Functions">17.4.12.2 Array Functions</a></li>
        <li><a id="toc-Working-With-All-The-Elements-of-an-Array" href="#Flattening-Arrays">17.4.12.3 Working With All The Elements of an Array</a></li>
        <li><a id="toc-How-To-Create-and-Populate-Arrays" href="#Creating-Arrays">17.4.12.4 How To Create and Populate Arrays</a></li>
      </ul></li>
      <li><a id="toc-Accessing-and-Manipulating-Redirections" href="#Redirection-API">17.4.13 Accessing and Manipulating Redirections</a></li>
      <li><a id="toc-API-Variables" href="#Extension-API-Variables">17.4.14 API Variables</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-API-Version-Constants-and-Variables" href="#Extension-Versioning">17.4.14.1 API Version Constants and Variables</a></li>
        <li><a id="toc-GMP-and-MPFR-Version-Information" href="#Extension-GMP_002fMPFR-Versioning">17.4.14.2 GMP and MPFR Version Information</a></li>
        <li><a id="toc-Informational-Variables" href="#Extension-API-Informational-Variables">17.4.14.3 Informational Variables</a></li>
      </ul></li>
      <li><a id="toc-Boilerplate-Code" href="#Extension-API-Boilerplate">17.4.15 Boilerplate Code</a></li>
      <li><a id="toc-Changes-From-Version-1-of-the-API" href="#Changes-from-API-V1">17.4.16 Changes From Version 1 of the API</a></li>
    </ul></li>
    <li><a id="toc-How-gawk-Finds-Extensions" href="#Finding-Extensions">17.5 How <code class="command">gawk</code> Finds Extensions</a></li>
    <li><a id="toc-Example_003a-Some-File-Functions" href="#Extension-Example">17.6 Example: Some File Functions</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Using-chdir_0028_0029-and-stat_0028_0029" href="#Internal-File-Description">17.6.1 Using <code class="code">chdir()</code> and <code class="code">stat()</code></a></li>
      <li><a id="toc-C-Code-for-chdir_0028_0029-and-stat_0028_0029" href="#Internal-File-Ops">17.6.2 C Code for <code class="code">chdir()</code> and <code class="code">stat()</code></a></li>
      <li><a id="toc-Integrating-the-Extensions" href="#Using-Internal-File-Ops">17.6.3 Integrating the Extensions</a></li>
    </ul></li>
    <li><a id="toc-The-Sample-Extensions-in-the-gawk-Distribution" href="#Extension-Samples">17.7 The Sample Extensions in the <code class="command">gawk</code> Distribution</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-File_002dRelated-Functions" href="#Extension-Sample-File-Functions">17.7.1 File-Related Functions</a></li>
      <li><a id="toc-Interface-to-fnmatch_0028_0029" href="#Extension-Sample-Fnmatch">17.7.2 Interface to <code class="code">fnmatch()</code></a></li>
      <li><a id="toc-Interface-to-fork_0028_0029_002c-wait_0028_0029_002c-and-waitpid_0028_0029" href="#Extension-Sample-Fork">17.7.3 Interface to <code class="code">fork()</code>, <code class="code">wait()</code>, and <code class="code">waitpid()</code></a></li>
      <li><a id="toc-Enabling-In_002dPlace-File-Editing" href="#Extension-Sample-Inplace">17.7.4 Enabling In-Place File Editing</a></li>
      <li><a id="toc-Character-and-Numeric-values_003a-ord_0028_0029-and-chr_0028_0029" href="#Extension-Sample-Ord">17.7.5 Character and Numeric values: <code class="code">ord()</code> and <code class="code">chr()</code></a></li>
      <li><a id="toc-Reading-Directories" href="#Extension-Sample-Readdir">17.7.6 Reading Directories</a></li>
      <li><a id="toc-Reversing-Output" href="#Extension-Sample-Revout">17.7.7 Reversing Output</a></li>
      <li><a id="toc-Two_002dWay-I_002fO-Example" href="#Extension-Sample-Rev2way">17.7.8 Two-Way I/O Example</a></li>
      <li><a id="toc-Dumping-and-Restoring-an-Array" href="#Extension-Sample-Read-write-array">17.7.9 Dumping and Restoring an Array</a></li>
      <li><a id="toc-Reading-an-Entire-File" href="#Extension-Sample-Readfile">17.7.10 Reading an Entire File</a></li>
      <li><a id="toc-Extension-Time-Functions" href="#Extension-Sample-Time">17.7.11 Extension Time Functions</a></li>
      <li><a id="toc-API-Tests" href="#Extension-Sample-API-Tests">17.7.12 API Tests</a></li>
    </ul></li>
    <li><a id="toc-The-gawkextlib-Project" href="#gawkextlib">17.8 The <code class="code">gawkextlib</code> Project</a></li>
    <li><a id="toc-Summary-16" href="#Extension-summary">17.9 Summary</a></li>
    <li><a id="toc-Exercises-4" href="#Extension-Exercises">17.10 Exercises</a></li>
  </ul></li>
</ul></li>
<li><a id="toc-Part-IV_003a-Appendices" href="#Part-IV_003a-Appendices">Part IV:<br>Appendices</a>
<ul class="toc-numbered-mark">
  <li><a id="toc-The-Evolution-of-the-awk-Language" href="#Language-History">Appendix A The Evolution of the <code class="command">awk</code> Language</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Major-Changes-Between-V7-and-SVR3_002e1" href="#V7_002fSVR3_002e1">A.1 Major Changes Between V7 and SVR3.1</a></li>
    <li><a id="toc-Changes-Between-SVR3_002e1-and-SVR4" href="#SVR4">A.2 Changes Between SVR3.1 and SVR4</a></li>
    <li><a id="toc-Changes-Between-SVR4-and-POSIX-awk" href="#POSIX">A.3 Changes Between SVR4 and POSIX <code class="command">awk</code></a></li>
    <li><a id="toc-Extensions-in-Brian-Kernighan_0027s-awk" href="#BTL">A.4 Extensions in Brian Kernighan&rsquo;s <code class="command">awk</code></a></li>
    <li><a id="toc-Extensions-in-gawk-Not-in-POSIX-awk" href="#POSIX_002fGNU">A.5 Extensions in <code class="command">gawk</code> Not in POSIX <code class="command">awk</code></a></li>
    <li><a id="toc-History-of-gawk-Features" href="#Feature-History">A.6 History of <code class="command">gawk</code> Features</a></li>
    <li><a id="toc-Common-Extensions-Summary" href="#Common-Extensions">A.7 Common Extensions Summary</a></li>
    <li><a id="toc-Regexp-Ranges-and-Locales_003a-A-Long-Sad-Story" href="#Ranges-and-Locales">A.8 Regexp Ranges and Locales: A Long Sad Story</a></li>
    <li><a id="toc-Major-Contributors-to-gawk" href="#Contributors">A.9 Major Contributors to <code class="command">gawk</code></a></li>
    <li><a id="toc-Summary-17" href="#History-summary">A.10 Summary</a></li>
  </ul></li>
  <li><a id="toc-Installing-gawk" href="#Installation">Appendix B Installing <code class="command">gawk</code></a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-The-gawk-Distribution" href="#Gawk-Distribution">B.1 The <code class="command">gawk</code> Distribution</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Getting-the-gawk-Distribution" href="#Getting">B.1.1 Getting the <code class="command">gawk</code> Distribution</a></li>
      <li><a id="toc-Extracting-the-Distribution" href="#Extracting">B.1.2 Extracting the Distribution</a></li>
      <li><a id="toc-Contents-of-the-gawk-Distribution" href="#Distribution-contents">B.1.3 Contents of the <code class="command">gawk</code> Distribution</a></li>
    </ul></li>
    <li><a id="toc-Compiling-and-Installing-gawk-on-Unix_002dLike-Systems" href="#Unix-Installation">B.2 Compiling and Installing <code class="command">gawk</code> on Unix-Like Systems</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Compiling-gawk-for-Unix_002dLike-Systems" href="#Quick-Installation">B.2.1 Compiling <code class="command">gawk</code> for Unix-Like Systems</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-Building-With-MPFR" href="#Compiling-with-MPFR">B.2.1.1 Building With MPFR</a></li>
      </ul></li>
      <li><a id="toc-Shell-Startup-Files-1" href="#Shell-Startup-Files">B.2.2 Shell Startup Files</a></li>
      <li><a id="toc-Additional-Configuration-Options-1" href="#Additional-Configuration-Options">B.2.3 Additional Configuration Options</a></li>
      <li><a id="toc-The-Configuration-Process" href="#Configuration-Philosophy">B.2.4 The Configuration Process</a></li>
      <li><a id="toc-Compiling-from-Git-1" href="#Compiling-from-Git">B.2.5 Compiling from Git</a></li>
      <li><a id="toc-Building-the-Documentation-1" href="#Building-the-Documentation">B.2.6 Building the Documentation</a></li>
    </ul></li>
    <li><a id="toc-Installation-on-Other-Operating-Systems" href="#Non_002dUnix-Installation">B.3 Installation on Other Operating Systems</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Installation-on-MS_002dWindows" href="#PC-Installation">B.3.1 Installation on MS-Windows</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-Installing-a-Prepared-Distribution-for-MS_002dWindows-Systems" href="#PC-Binary-Installation">B.3.1.1 Installing a Prepared Distribution for MS-Windows Systems</a></li>
        <li><a id="toc-Compiling-gawk-for-PC-Operating-Systems" href="#PC-Compiling">B.3.1.2 Compiling <code class="command">gawk</code> for PC Operating Systems</a></li>
        <li><a id="toc-Using-gawk-on-PC-Operating-Systems" href="#PC-Using">B.3.1.3 Using <code class="command">gawk</code> on PC Operating Systems</a></li>
        <li><a id="toc-Using-gawk-In-The-Cygwin-Environment" href="#Cygwin">B.3.1.4 Using <code class="command">gawk</code> In The Cygwin Environment</a></li>
        <li><a id="toc-Using-gawk-In-The-MSYS-Environment" href="#MSYS">B.3.1.5 Using <code class="command">gawk</code> In The MSYS Environment</a></li>
      </ul></li>
      <li><a id="toc-Compiling-and-Installing-gawk-on-OpenVMS" href="#OpenVMS-Installation">B.3.2 Compiling and Installing <code class="command">gawk</code> on OpenVMS</a>
      <ul class="toc-numbered-mark">
        <li><a id="toc-Compiling-gawk-on-OpenVMS" href="#OpenVMS-Compilation">B.3.2.1 Compiling <code class="command">gawk</code> on OpenVMS</a></li>
        <li><a id="toc-Compiling-gawk-Dynamic-Extensions-on-OpenVMS" href="#OpenVMS-Dynamic-Extensions">B.3.2.2 Compiling <code class="command">gawk</code> Dynamic Extensions on OpenVMS</a></li>
        <li><a id="toc-Installing-gawk-on-OpenVMS" href="#OpenVMS-Installation-Details">B.3.2.3 Installing <code class="command">gawk</code> on OpenVMS</a></li>
        <li><a id="toc-Running-gawk-on-OpenVMS" href="#OpenVMS-Running">B.3.2.4 Running <code class="command">gawk</code> on OpenVMS</a></li>
        <li><a id="toc-The-OpenVMS-GNV-Project" href="#OpenVMS-GNV">B.3.2.5 The OpenVMS GNV Project</a></li>
      </ul></li>
    </ul></li>
    <li><a id="toc-Reporting-Problems-and-Bugs" href="#Bugs">B.4 Reporting Problems and Bugs</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Defining-What-Is-and-What-Is-Not-A-Bug" href="#Bug-definition">B.4.1 Defining What Is and What Is Not A Bug</a></li>
      <li><a id="toc-Submitting-Bug-Reports" href="#Bug-address">B.4.2 Submitting Bug Reports</a></li>
      <li><a id="toc-Please-Don_0027t-Post-Bug-Reports-to-USENET" href="#Usenet">B.4.3 Please Don&rsquo;t Post Bug Reports to USENET</a></li>
      <li><a id="toc-What-To-Do-If-You-Think-There-Is-A-Performance-Issue" href="#Performance-bugs">B.4.4 What To Do If You Think There Is A Performance Issue</a></li>
      <li><a id="toc-Where-To-Send-Non_002dbug-Questions" href="#Asking-for-help">B.4.5 Where To Send Non-bug Questions</a></li>
      <li><a id="toc-Reporting-Problems-with-Non_002dUnix-Ports" href="#Maintainers">B.4.6 Reporting Problems with Non-Unix Ports</a></li>
    </ul></li>
    <li><a id="toc-Other-Freely-Available-awk-Implementations" href="#Other-Versions">B.5 Other Freely Available <code class="command">awk</code> Implementations</a></li>
    <li><a id="toc-Summary-18" href="#Installation-summary">B.6 Summary</a></li>
  </ul></li>
  <li><a id="toc-Implementation-Notes" href="#Notes">Appendix C Implementation Notes</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-Downward-Compatibility-and-Debugging" href="#Compatibility-Mode">C.1 Downward Compatibility and Debugging</a></li>
    <li><a id="toc-Making-Additions-to-gawk" href="#Additions">C.2 Making Additions to <code class="command">gawk</code></a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Accessing-The-gawk-Git-Repository" href="#Accessing-The-Source">C.2.1 Accessing The <code class="command">gawk</code> Git Repository</a></li>
      <li><a id="toc-Adding-New-Features" href="#Adding-Code">C.2.2 Adding New Features</a></li>
      <li><a id="toc-Porting-gawk-to-a-New-Operating-System" href="#New-Ports">C.2.3 Porting <code class="command">gawk</code> to a New Operating System</a></li>
      <li><a id="toc-Why-Generated-Files-Are-Kept-In-Git" href="#Derived-Files">C.2.4 Why Generated Files Are Kept In Git</a></li>
    </ul></li>
    <li><a id="toc-Probable-Future-Extensions" href="#Future-Extensions">C.3 Probable Future Extensions</a></li>
    <li><a id="toc-Some-Limitations-of-the-Implementation" href="#Implementation-Limitations">C.4 Some Limitations of the Implementation</a></li>
    <li><a id="toc-Extension-API-Design" href="#Extension-Design">C.5 Extension API Design</a>
    <ul class="toc-numbered-mark">
      <li><a id="toc-Problems-With-The-Old-Mechanism" href="#Old-Extension-Problems">C.5.1 Problems With The Old Mechanism</a></li>
      <li><a id="toc-Goals-For-A-New-Mechanism" href="#Extension-New-Mechanism-Goals">C.5.2 Goals For A New Mechanism</a></li>
      <li><a id="toc-Other-Design-Decisions" href="#Extension-Other-Design-Decisions">C.5.3 Other Design Decisions</a></li>
      <li><a id="toc-Room-For-Future-Growth" href="#Extension-Future-Growth">C.5.4 Room For Future Growth</a></li>
    </ul></li>
    <li><a id="toc-Summary-19" href="#Notes-summary">C.6 Summary</a></li>
  </ul></li>
  <li><a id="toc-Basic-Programming-Concepts" href="#Basic-Concepts">Appendix D Basic Programming Concepts</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-What-a-Program-Does" href="#Basic-High-Level">D.1 What a Program Does</a></li>
    <li><a id="toc-Data-Values-in-a-Computer" href="#Basic-Data-Typing">D.2 Data Values in a Computer</a></li>
  </ul></li>
  <li><a id="toc-Glossary-1" href="#Glossary">Glossary</a></li>
  <li><a id="toc-GNU-General-Public-License" href="#Copying">GNU General Public License</a></li>
  <li><a id="toc-GNU-Free-Documentation-License-1" href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>
  <ul class="toc-numbered-mark">
    <li><a id="toc-ADDENDUM_003a-How-to-use-this-License-for-your-documents" href="#ADDENDUM_003a-How-to-use-this-License-for-your-documents">ADDENDUM: How to use this License for your documents</a></li>
  </ul></li>
  <li><a id="toc-Index-1" href="#Index" rel="index">Index</a></li>
</ul></li>

</ul>
</div>
</div>
<hr>
<div class="unnumbered-level-extent" id="Foreword3">
<div class="nav-panel">
<p>
Next: <a href="#Foreword4" accesskey="n" rel="next">Foreword to the Fourth Edition</a>, Previous: <a href="#Top" accesskey="p" rel="prev">General Introduction</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="unnumbered" id="Foreword-to-the-Third-Edition"><span>Foreword to the Third Edition<a class="copiable-link" href="#Foreword-to-the-Third-Edition"> &para;</a></span></h2>


<p>Arnold Robbins and I are good friends. We were introduced
in 1990
by circumstances&mdash;and our favorite programming language, AWK.
The circumstances started a couple of years
earlier. I was working at a new job and noticed an unplugged
Unix computer sitting in the corner.  No one knew how to use it,
and neither did I.  However,
a couple of days later, it was running, and
I was <code class="code">root</code> and the one-and-only user.
That day, I began the transition from statistician to Unix programmer.
</p>
<p>On one of many trips to the library or bookstore in search of
books on Unix, I found the gray AWK book, a.k.a.
Alfred V. Aho, Brian W. Kernighan, and
Peter J. Weinberger&rsquo;s <cite class="cite">The AWK Programming Language</cite> (Addison-Wesley,
1988).  <code class="command">awk</code>&rsquo;s simple programming paradigm&mdash;find a pattern in the
input and then perform an action&mdash;often reduced complex or tedious
data manipulations to a few lines of code.  I was excited to try my
hand at programming in AWK.
</p>
<p>Alas,  the <code class="command">awk</code> on my computer was a limited version of the
language described in the gray book.  I discovered that my computer
had &ldquo;old <code class="command">awk</code>&rdquo; and the book described
&ldquo;new <code class="command">awk</code>.&rdquo;
I learned that this was typical; the old version refused to step
aside or relinquish its name.  If a system had a new <code class="command">awk</code>, it was
invariably called <code class="command">nawk</code>, and few systems had it.
The best way to get a new <code class="command">awk</code> was to <code class="command">ftp</code> the source code for
<code class="command">gawk</code> from <code class="code">prep.ai.mit.edu</code>.  <code class="command">gawk</code> was a version of
new <code class="command">awk</code> written by David Trueman and Arnold, and available under
the GNU General Public License.
</p>
<p>(Incidentally,
it&rsquo;s no longer difficult to find a new <code class="command">awk</code>. <code class="command">gawk</code> ships with
GNU/Linux, and you can download binaries or source code for almost
any system; my wife uses <code class="command">gawk</code> on her VMS box.)
</p>
<p>My Unix system started out unplugged from the wall; it certainly was not
plugged into a network.  So, oblivious to the existence of <code class="command">gawk</code>
and the Unix community in general, and desiring a new <code class="command">awk</code>, I wrote
my own, called <code class="command">mawk</code>.
Before I was finished, I knew about <code class="command">gawk</code>,
but it was too late to stop, so I eventually posted
to a <code class="code">comp.sources</code> newsgroup.
</p>
<p>A few days after my posting, I got a friendly email
from Arnold introducing
himself.   He suggested we share design and algorithms and
attached a draft of the POSIX standard so
that I could update <code class="command">mawk</code> to support language extensions added
after publication of <cite class="cite">The AWK Programming Language</cite>.
</p>
<p>Frankly, if our roles had
been reversed, I would not have been so open and we probably would
have never met.  I&rsquo;m glad we did meet.
He is an AWK expert&rsquo;s AWK expert and a genuinely nice person.
Arnold contributes significant amounts of his
expertise and time to the Free Software Foundation.
</p>
<p>This book is the <code class="command">gawk</code> reference manual, but at its core it
is a book about AWK programming that
will appeal to a wide audience.
It is a definitive reference to the AWK language as defined by the
1987 Bell Laboratories release and codified in the 1992 POSIX Utilities
standard.
</p>
<p>On the other hand, the novice AWK programmer can study
a wealth of practical programs that emphasize
the power of AWK&rsquo;s basic idioms:
data-driven control flow, pattern matching with regular expressions,
and associative arrays.
Those looking for something new can try out <code class="command">gawk</code>&rsquo;s
interface to network protocols via special <samp class="file">/inet</samp> files.
</p>
<p>The programs in this book make clear that an AWK program is
typically much smaller and faster to develop than
a counterpart written in C.
Consequently, there is often a payoff to prototyping an
algorithm or design in AWK to get it running quickly and expose
problems early. Often, the interpreted performance is adequate
and the AWK prototype becomes the product.
</p>
<p>The new <code class="command">pgawk</code> (profiling <code class="command">gawk</code>), produces
program execution counts.
I recently experimented with an algorithm that for
<em class="math">n</em>
lines of input, exhibited
~ C n^2
performance, while
theory predicted
~ C n log n
behavior. A few minutes poring
over the <samp class="file">awkprof.out</samp> profile pinpointed the problem to
a single line of code.  <code class="command">pgawk</code> is a welcome addition to
my programmer&rsquo;s toolbox.
</p>
<p>Arnold has distilled over a decade of experience writing and
using AWK programs, and developing <code class="command">gawk</code>, into this book.  If you use
AWK or want to learn how, then read this book.
</p>
<a class="index-entry-id" id="index-Brennan_002c-Michael"></a>
<div class="display">
<pre class="display-preformatted">Michael Brennan
Author of <code class="command">mawk</code>
March 2001
</pre></div>

<hr>
</div>
<div class="unnumbered-level-extent" id="Foreword4">
<div class="nav-panel">
<p>
Next: <a href="#Preface" accesskey="n" rel="next">Preface</a>, Previous: <a href="#Foreword3" accesskey="p" rel="prev">Foreword to the Third Edition</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="unnumbered" id="Foreword-to-the-Fourth-Edition"><span>Foreword to the Fourth Edition<a class="copiable-link" href="#Foreword-to-the-Fourth-Edition"> &para;</a></span></h2>


<p>Some things don&rsquo;t change.  Thirteen years ago I wrote:
&ldquo;If you use AWK or want to learn how, then read this book.&rdquo;
True then, and still true today.
</p>
<p>Learning to use a programming language is about more than mastering the
syntax.  One needs to acquire an understanding of how to use the
features of the language to solve practical programming problems.
A focus of this book is many examples that show how to use AWK.
</p>
<p>Some things do change. Our computers are much faster and have more memory.
Consequently, speed and storage inefficiencies of a high-level language
matter less.  Prototyping in AWK and then rewriting in C for performance
reasons happens less, because more often the prototype is fast enough.
</p>
<p>Of course, there are computing operations that are best done in C or C++.
With <code class="command">gawk</code> 4.1 and later, you do not have to choose between writing
your program in AWK or in C/C++.  You can write most of your
program in AWK and the aspects that require C/C++ capabilities can be written
in C/C++, and then the pieces glued together when the <code class="command">gawk</code> module loads
the C/C++ module as a dynamic plug-in.
<a class="ref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>,
has all the
details, and, as expected, many examples to help you learn the ins and outs.
</p>
<p>I enjoy programming in AWK and had fun (re)reading this book.
I think you will too.
</p>
<a class="index-entry-id" id="index-Brennan_002c-Michael-1"></a>
<div class="display">
<pre class="display-preformatted">Michael Brennan
Author of <code class="command">mawk</code>
October 2014
</pre></div>

<hr>
</div>
<div class="unnumbered-level-extent" id="Preface">
<div class="nav-panel">
<p>
Next: <a href="#Getting-Started" accesskey="n" rel="next">Getting Started with <code class="command">awk</code></a>, Previous: <a href="#Foreword4" accesskey="p" rel="prev">Foreword to the Fourth Edition</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="unnumbered" id="Preface-1"><span>Preface<a class="copiable-link" href="#Preface-1"> &para;</a></span></h2>


<a class="index-entry-id" id="index-awk"></a>
<p>Several kinds of tasks occur repeatedly when working with text files.
You might want to extract certain lines and discard the rest.  Or you
may need to make changes wherever certain patterns appear, but leave the
rest of the file alone.  Such jobs are often easy with <code class="command">awk</code>.
The <code class="command">awk</code> utility interprets a special-purpose programming
language that makes it easy to handle simple data-reformatting jobs.
</p>
<a class="index-entry-id" id="index-gawk"></a>
<p>The GNU implementation of <code class="command">awk</code> is called <code class="command">gawk</code>; if you
invoke it with the proper options or environment variables,
it is fully compatible with
the POSIX<a class="footnote" id="DOCF1" href="#FOOT1"><sup>1</sup></a>
specification of the <code class="command">awk</code> language
and with the Unix version of <code class="command">awk</code> maintained
by Brian Kernighan.
This means that all
properly written <code class="command">awk</code> programs should work with <code class="command">gawk</code>.
So most of the time, we don&rsquo;t distinguish between <code class="command">gawk</code> and other
<code class="command">awk</code> implementations.
</p>
<a class="index-entry-id" id="index-awk-POSIX-and"></a>
<a class="index-entry-id" id="index-awk-POSIX-and-1"></a>
<a class="index-entry-id" id="index-POSIX-awk-and"></a>
<a class="index-entry-id" id="index-gawk-awk-and"></a>
<a class="index-entry-id" id="index-awk-gawk-and"></a>
<a class="index-entry-id" id="index-awk-uses-for"></a>
<p>Using <code class="command">awk</code> you can:
</p>
<ul class="itemize mark-bullet">
<li>Manage small, personal databases

</li><li>Generate reports

</li><li>Validate data

</li><li>Produce indexes and perform other document-preparation tasks

</li><li>Experiment with algorithms that you can adapt later to other computer
languages
</li></ul>

<a class="index-entry-id" id="index-gawk-uses-for"></a>
<p>In addition,
<code class="command">gawk</code>
provides facilities that make it easy to:
</p>
<ul class="itemize mark-bullet">
<li>Extract bits and pieces of data for processing

</li><li>Sort data

</li><li>Perform simple network communications

</li><li>Profile and debug <code class="command">awk</code> programs

</li><li>Extend the language with functions written in C or C++
</li></ul>

<p>This Web page teaches you about the <code class="command">awk</code> language and
how you can use it effectively.  You should already be familiar with basic
system commands, such as <code class="command">cat</code> and <code class="command">ls</code>,<a class="footnote" id="DOCF2" href="#FOOT2"><sup>2</sup></a> as well as basic shell
facilities, such as input/output (I/O) redirection and pipes.
</p>
<p>Implementations of the <code class="command">awk</code> language are available for many
different computing environments.  This Web page, while describing
the <code class="command">awk</code> language in general, also describes the particular
implementation of <code class="command">awk</code> called <code class="command">gawk</code> (which stands for
&ldquo;GNU <code class="command">awk</code>&rdquo;).  <code class="command">gawk</code> runs on a broad range of Unix systems,
ranging from Intel-architecture PC-based computers
up through large-scale systems.
<code class="command">gawk</code> has also been ported to macOS, z/OS,
Microsoft Windows
(all versions),
and OpenVMS.<a class="footnote" id="DOCF3" href="#FOOT3"><sup>3</sup></a>
</p>

<ul class="mini-toc">
<li><a href="#History" accesskey="1">History of <code class="command">awk</code> and <code class="command">gawk</code></a></li>
<li><a href="#Names" accesskey="2">A Rose by Any Other Name</a></li>
<li><a href="#This-Manual" accesskey="3">Using This Book</a></li>
<li><a href="#Conventions" accesskey="4">Typographical Conventions</a></li>
<li><a href="#Manual-History" accesskey="5">The GNU Project and This Book</a></li>
<li><a href="#How-To-Contribute" accesskey="6">How to Contribute</a></li>
<li><a href="#Acknowledgments" accesskey="7">Acknowledgments</a></li>
</ul>
<hr>
<div class="unnumberedsec-level-extent" id="History">
<div class="nav-panel">
<p>
Next: <a href="#Names" accesskey="n" rel="next">A Rose by Any Other Name</a>, Up: <a href="#Preface" accesskey="u" rel="up">Preface</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="unnumberedsec" id="History-of-awk-and-gawk"><span>History of <code class="command">awk</code> and <code class="command">gawk</code><a class="copiable-link" href="#History-of-awk-and-gawk"> &para;</a></span></h3>
<a class="index-entry-id" id="index-recipe-for-a-programming-language"></a>
<a class="index-entry-id" id="index-programming-language_002c-recipe-for"></a>
<a class="index-entry-id" id="index-sidebar-Recipe-for-a-Programming-Language"></a>
<table class="cartouche" border="1"><tr><th>
Recipe for a Programming Language</th></tr><tr><td>

<table class="multitable">
<tbody><tr><td></td><td>1 part  <code class="code">egrep</code></td><td>1 part  <code class="code">snobol</code></td></tr>
<tr><td></td><td>2 parts <code class="code">ed</code></td><td>3 parts C</td></tr>
</tbody>
</table>

<p>Blend all parts well using <code class="code">lex</code> and <code class="code">yacc</code>.
Document minimally and release.
</p>
<p>After eight years, add another part <code class="code">egrep</code> and two
more parts C.  Document very well and release.
</p>
<p>After 35 more years, add Unicode and CSV support, sprinkle lightly with
a few choice features from <code class="command">gawk</code>, document very well again,
and release.
</p></td></tr></table>

<a class="index-entry-id" id="index-Aho_002c-Alfred"></a>
<a class="index-entry-id" id="index-Weinberger_002c-Peter"></a>
<a class="index-entry-id" id="index-Kernighan_002c-Brian"></a>
<a class="index-entry-id" id="index-awk-history-of"></a>
<p>The name <code class="command">awk</code> comes from the initials of its designers: Alfred V.
Aho, Peter J. Weinberger, and Brian W. Kernighan.  The original version of
<code class="command">awk</code> was written in 1977 at AT&amp;T Bell Laboratories.
In 1985, a new version made the programming
language more powerful, introducing user-defined functions, multiple input
streams, and computed regular expressions.
This new version became widely available with Unix System V
Release 3.1 (1987).
The version in System V Release 4 (1989) added some new features and cleaned
up the behavior in some of the &ldquo;dark corners&rdquo; of the language.
The specification for <code class="command">awk</code> in the POSIX Command Language
and Utilities standard further clarified the language.
Both the <code class="command">gawk</code> designers and the original <code class="command">awk</code> designers at Bell Laboratories
provided feedback for the POSIX specification.
</p>
<a class="index-entry-id" id="index-Rubin_002c-Paul"></a>
<a class="index-entry-id" id="index-Fenlason_002c-Jay"></a>
<a class="index-entry-id" id="index-Trueman_002c-David"></a>
<p>Paul Rubin wrote <code class="command">gawk</code> in 1986.
Jay Fenlason completed it, with advice from Richard Stallman.  John Woods
contributed parts of the code as well.  In 1988 and 1989, David Trueman, with
help from me, thoroughly reworked <code class="command">gawk</code> for compatibility
with the newer <code class="command">awk</code>.
Circa 1994, I became the primary maintainer.
Current development focuses on bug fixes,
performance improvements, standards compliance, and, occasionally, new features.
</p>
<p>In May 1997, J&uuml;rgen Kahrs felt the need for network access
from <code class="command">awk</code>, and with a little help from me, set about adding
features to do this for <code class="command">gawk</code>.  At that time, he also
wrote the bulk of
<cite class="cite">TCP/IP Internetworking with <code class="command">gawk</code></cite>
(a separate document, available as part of the <code class="command">gawk</code> distribution).
His code finally became part of the main <code class="command">gawk</code> distribution
with <code class="command">gawk</code> version 3.1.
</p>
<p>John Haque rewrote the <code class="command">gawk</code> internals, in the process providing
an <code class="command">awk</code>-level debugger. This version became available as
<code class="command">gawk</code> version 4.0 in 2011.
</p>
<p>See <a class="xref" href="#Contributors">Major Contributors to <code class="command">gawk</code></a>
for a full list of those who have made important contributions to <code class="command">gawk</code>.
</p>
<hr>
</div>
<div class="unnumberedsec-level-extent" id="Names">
<div class="nav-panel">
<p>
Next: <a href="#This-Manual" accesskey="n" rel="next">Using This Book</a>, Previous: <a href="#History" accesskey="p" rel="prev">History of <code class="command">awk</code> and <code class="command">gawk</code></a>, Up: <a href="#Preface" accesskey="u" rel="up">Preface</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="unnumberedsec" id="A-Rose-by-Any-Other-Name"><span>A Rose by Any Other Name<a class="copiable-link" href="#A-Rose-by-Any-Other-Name"> &para;</a></span></h3>

<a class="index-entry-id" id="index-awk-new-vs_002e-old"></a>
<p>The <code class="command">awk</code> language has evolved over the years. Full details are
provided in <a class="ref" href="#Language-History">The Evolution of the <code class="command">awk</code> Language</a>.
The language described in this Web page
is often referred to as &ldquo;new <code class="command">awk</code>.&rdquo;
By analogy, the original version of <code class="command">awk</code> is
referred to as &ldquo;old <code class="command">awk</code>.&rdquo;
</p>
<p>On most current systems, when you run the <code class="command">awk</code> utility
you get some version of new <code class="command">awk</code>.<a class="footnote" id="DOCF4" href="#FOOT4"><sup>4</sup></a> If your system&rsquo;s standard
<code class="command">awk</code> is the old one, you will see something like this
if you try the following test program:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">$ <kbd class="kbd">awk 1 /dev/null</kbd>
error&rarr; awk: syntax error near line 1
error&rarr; awk: bailing out near line 1
</pre></div></div>

<p>In this case, you should find a version of new <code class="command">awk</code>,
or just install <code class="command">gawk</code>!
</p>
<p>Throughout this Web page, whenever we refer to a language feature
that should be available in any complete implementation of POSIX <code class="command">awk</code>,
we simply use the term <code class="command">awk</code>.  When referring to a feature that is
specific to the GNU implementation, we use the term <code class="command">gawk</code>.
</p>
<hr>
</div>
<div class="unnumberedsec-level-extent" id="This-Manual">
<div class="nav-panel">
<p>
Next: <a href="#Conventions" accesskey="n" rel="next">Typographical Conventions</a>, Previous: <a href="#Names" accesskey="p" rel="prev">A Rose by Any Other Name</a>, Up: <a href="#Preface" accesskey="u" rel="up">Preface</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="unnumberedsec" id="Using-This-Book"><span>Using This Book<a class="copiable-link" href="#Using-This-Book"> &para;</a></span></h3>
<a class="index-entry-id" id="index-awk-terms-describing"></a>

<p>The term <code class="command">awk</code> refers to a particular program as well as to the language you
use to tell this program what to do.  When we need to be careful, we call
the language &ldquo;the <code class="command">awk</code> language,&rdquo;
and the program &ldquo;the <code class="command">awk</code> utility.&rdquo;
This Web page explains
both how to write programs in the <code class="command">awk</code> language and how to
run the <code class="command">awk</code> utility.
The term &ldquo;<code class="command">awk</code> program&rdquo; refers to a program written by you in
the <code class="command">awk</code> programming language.
</p>
<a class="index-entry-id" id="index-gawk-awk-and-1"></a>
<a class="index-entry-id" id="index-awk-gawk-and-1"></a>
<a class="index-entry-id" id="index-POSIX-awk"></a>
<p>Primarily, this Web page explains the features of <code class="command">awk</code>
as defined in the POSIX standard.  It does so in the context of the
<code class="command">gawk</code> implementation.  While doing so, it also
attempts to describe important differences between <code class="command">gawk</code>
and other <code class="command">awk</code>
implementations.<a class="footnote" id="DOCF5" href="#FOOT5"><sup>5</sup></a>
Finally, it notes any <code class="command">gawk</code> features that are not in
the POSIX standard for <code class="command">awk</code>.
</p>
<p>This Web page has the difficult task of being both a tutorial and a reference.
If you are a novice, feel free to skip over details that seem too complex.
You should also ignore the many cross-references; they are for the
expert user and for the Info and
<a class="uref" href="https://www.gnu.org/software/gawk/manual/">HTML</a>
versions of the Web page.
</p>
<p>There are sidebars
scattered throughout the Web page.
They add a more complete explanation of points that are relevant, but not likely
to be of interest on first reading.
All appear in the index, under the heading &ldquo;sidebar.&rdquo;
</p>
<p>Most of the time, the examples use complete <code class="command">awk</code> programs.
Some of the more advanced sections show only the part of the <code class="command">awk</code>
program that illustrates the concept being described.
</p>
<p>Although this Web page is aimed principally at people who have not been
exposed
to <code class="command">awk</code>, there is a lot of information here that even the <code class="command">awk</code>
expert should find useful.  In particular, the description of POSIX
<code class="command">awk</code> and the example programs in
<a class="ref" href="#Library-Functions">A Library of <code class="command">awk</code> Functions</a>, and
in
<a class="ref" href="#Sample-Programs">Practical <code class="command">awk</code> Programs</a>,
should be of interest.
</p>
<p>This Web page is split into several parts, as follows:
</p>

<ul class="itemize mark-bullet">
<li>Part I describes the <code class="command">awk</code> language and the <code class="command">gawk</code> program in detail.
It starts with the basics, and continues through all of the features of <code class="command">awk</code>.
It contains the following chapters:

<ul class="itemize mark-minus">
<li><a class="ref" href="#Getting-Started">Getting Started with <code class="command">awk</code></a>,
provides the essentials you need to know to begin using <code class="command">awk</code>.

</li><li><a class="ref" href="#Invoking-Gawk">Running <code class="command">awk</code> and <code class="command">gawk</code></a>,
describes how to run <code class="command">gawk</code>, the meaning of its
command-line options, and how it finds <code class="command">awk</code>
program source files.

</li><li><a class="ref" href="#Regexp">Regular Expressions</a>,
introduces regular expressions in general, and in particular the flavors
supported by POSIX <code class="command">awk</code> and <code class="command">gawk</code>.

</li><li><a class="ref" href="#Reading-Files">Reading Input Files</a>,
describes how <code class="command">awk</code> reads your data.
It introduces the concepts of records and fields, as well
as the <code class="code">getline</code> command.
I/O redirection is first described here.
Network I/O is also briefly introduced here.

</li><li><a class="ref" href="#Printing">Printing Output</a>,
describes how <code class="command">awk</code> programs can produce output with
<code class="code">print</code> and <code class="code">printf</code>.

</li><li><a class="ref" href="#Expressions">Expressions</a>,
describes expressions, which are the basic building blocks
for getting most things done in a program.

</li><li><a class="ref" href="#Patterns-and-Actions">Patterns, Actions, and Variables</a>,
describes how to write patterns for matching records, actions for
doing something when a record is matched, and the predefined variables
<code class="command">awk</code> and <code class="command">gawk</code> use.

</li><li><a class="ref" href="#Arrays">Arrays in <code class="command">awk</code></a>,
covers <code class="command">awk</code>&rsquo;s one-and-only data structure: the associative array.
Deleting array elements and whole arrays is described, as well as
sorting arrays in <code class="command">gawk</code>.  The chapter also describes how
<code class="command">gawk</code> provides arrays of arrays.

</li><li><a class="ref" href="#Functions">Functions</a>,
describes the built-in functions <code class="command">awk</code> and <code class="command">gawk</code> provide,
as well as how to define your own functions.  It also discusses how
<code class="command">gawk</code> lets you call functions indirectly.
</li></ul>

</li><li>Part II shows how to use <code class="command">awk</code> and <code class="command">gawk</code> for problem solving.
There is lots of code here for you to read and learn from.
This part contains the following chapters:

<ul class="itemize mark-minus">
<li><a class="ref" href="#Library-Functions">A Library of <code class="command">awk</code> Functions</a>, provides a number of functions meant to
be used from main <code class="command">awk</code> programs.

</li><li><a class="ref" href="#Sample-Programs">Practical <code class="command">awk</code> Programs</a>,
provides many sample <code class="command">awk</code> programs.
</li></ul>

<p>Reading these two chapters allows you to see <code class="command">awk</code>
solving real problems.
</p>
</li><li>Part III focuses on features specific to <code class="command">gawk</code>.
It contains the following chapters:

<ul class="itemize mark-minus">
<li><a class="ref" href="#Advanced-Features">Advanced Features of <code class="command">gawk</code></a>,
describes a number of advanced features.
Of particular note
are the abilities to control the order of array traversal,
have two-way communications with another process,
perform TCP/IP networking, and
profile your <code class="command">awk</code> programs.

</li><li><a class="ref" href="#Internationalization">Internationalization with <code class="command">gawk</code></a>,
describes special features for translating program
messages into different languages at runtime.

</li><li><a class="ref" href="#Debugger">Debugging <code class="command">awk</code> Programs</a>, describes the <code class="command">gawk</code> debugger.

</li><li><a class="ref" href="#Namespaces">Namespaces in <code class="command">gawk</code></a>, describes how <code class="command">gawk</code> allows variables and/or
functions of the same name to be in different namespaces.

</li><li><a class="ref" href="#Arbitrary-Precision-Arithmetic">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a>,
describes advanced arithmetic facilities.

</li><li><a class="ref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>, describes how to add new variables and
functions to <code class="command">gawk</code> by writing extensions in C or C++.
</li></ul>

</li><li>Part IV provides the appendices, the Glossary, and two licenses that cover
the <code class="command">gawk</code> source code and this Web page, respectively.
It contains the following appendices:

<ul class="itemize mark-minus">
<li><a class="ref" href="#Language-History">The Evolution of the <code class="command">awk</code> Language</a>,
describes how the <code class="command">awk</code> language has evolved since
its first release to the present.  It also describes how <code class="command">gawk</code>
has acquired features over time.

</li><li><a class="ref" href="#Installation">Installing <code class="command">gawk</code></a>,
describes how to get <code class="command">gawk</code>, how to compile it
on POSIX-compatible systems,
and how to compile and use it on different
non-POSIX systems.  It also describes how to report bugs
in <code class="command">gawk</code> and where to get other freely
available <code class="command">awk</code> implementations.


</li><li><a class="ref" href="#Notes">Implementation Notes</a>,
describes how to disable <code class="command">gawk</code>&rsquo;s extensions, as
well as how to contribute new code to <code class="command">gawk</code>,
and some possible future directions for <code class="command">gawk</code> development.

</li><li><a class="ref" href="#Basic-Concepts">Basic Programming Concepts</a>,
provides some very cursory background material for those who
are completely unfamiliar with computer programming.

</li><li>The <a class="ref" href="#Glossary">Glossary</a>, defines most, if not all, of the significant terms used
throughout the Web page.  If you find terms that you aren&rsquo;t familiar with,
try looking them up here.

</li><li><a class="ref" href="#Copying">GNU General Public License</a>, and
<a class="ref" href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>,
present the licenses that cover the <code class="command">gawk</code> source code
and this Web page, respectively.
</li></ul>
</li></ul>



<hr>
</div>
<div class="unnumberedsec-level-extent" id="Conventions">
<div class="nav-panel">
<p>
Next: <a href="#Manual-History" accesskey="n" rel="next">The GNU Project and This Book</a>, Previous: <a href="#This-Manual" accesskey="p" rel="prev">Using This Book</a>, Up: <a href="#Preface" accesskey="u" rel="up">Preface</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="unnumberedsec" id="Typographical-Conventions"><span>Typographical Conventions<a class="copiable-link" href="#Typographical-Conventions"> &para;</a></span></h3>

<a class="index-entry-id" id="index-Texinfo"></a>
<p>This Web page is written in <a class="uref" href="https://www.gnu.org/software/texinfo/">Texinfo</a>,
the GNU documentation formatting language.
A single Texinfo source file is used to produce both the printed and online
versions of the documentation.
Because of this, the typographical conventions
are slightly different than in other books you may have read.
</p>
<p>Examples you would type at the command line are preceded by the common
shell primary and secondary prompts, &lsquo;<samp class="samp">$</samp>&rsquo; and &lsquo;<samp class="samp">&gt;</samp>&rsquo;, respectively.
Input that you type is shown <kbd class="kbd">like this</kbd>.
Output from the command is preceded by the glyph &ldquo;-|&rdquo;.
This typically represents the command&rsquo;s standard output.
Error messages and other output on the command&rsquo;s standard error are preceded
by the glyph &ldquo;error&rarr;&rdquo;.  For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo hi on stdout</kbd>
-| hi on stdout
$ <kbd class="kbd">echo hello on stderr 1&gt;&amp;2</kbd>
error&rarr; hello on stderr
</pre></div>

<p>In the text, almost anything related to programming, such as
command names,
variable and function names, and string, numeric and regexp constants
appear in <code class="code">this font</code>. Code fragments
appear in the same font and quoted, &lsquo;<samp class="samp">like this</samp>&rsquo;.
Things that are replaced by the user or programmer
appear in <var class="var">this font</var>.
Options look like this: <samp class="option">-f</samp>.
File names are indicated like this: <samp class="file">/path/to/ourfile</samp>.
Some things are
emphasized <em class="emph">like this</em>, and if a point needs to be made
strongly, it is done <strong class="strong">like this</strong>.
The first occurrence of
a new term is usually its <em class="dfn">definition</em> and appears in the same
font as the previous occurrence of &ldquo;definition&rdquo; in this sentence.
</p>
<p>Characters that you type at the keyboard look <kbd class="kbd">like this</kbd>.  In particular,
there are special characters called &ldquo;control characters.&rdquo;  These are
characters that you type by holding down both the <kbd class="kbd">CONTROL</kbd> key and
another key, at the same time.  For example, a <kbd class="kbd">Ctrl-d</kbd> is typed
by first pressing and holding the <kbd class="kbd">CONTROL</kbd> key, next
pressing the <kbd class="kbd">d</kbd> key, and finally releasing both keys.
</p>
<p>For the sake of brevity, throughout this Web page, we refer to
Brian Kernighan&rsquo;s version of <code class="command">awk</code> as &ldquo;BWK <code class="command">awk</code>.&rdquo;
(See <a class="xref" href="#Other-Versions">Other Freely Available <code class="command">awk</code> Implementations</a> for information on his and other versions.)
</p>

<ul class="mini-toc">
<li><a href="#Dark-Corners" accesskey="1">Dark Corners</a></li>
</ul>
<div class="unnumberedsubsec-level-extent" id="Dark-Corners">
<h4 class="unnumberedsubsec"><span>Dark Corners<a class="copiable-link" href="#Dark-Corners"> &para;</a></span></h4>
<a class="index-entry-id" id="index-Kernighan_002c-Brian-quotes"></a>
<blockquote class="quotation">
<p><i class="i">Dark corners are basically fractal&mdash;no matter how much
you illuminate, there&rsquo;s always a smaller but darker one.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Brian Kernighan</em>
</div>
<a class="index-entry-id" id="index-dark-corner"></a>
<p>Until the POSIX standard (and <cite class="cite">GAWK: Effective AWK Programming</cite>),
many features of <code class="command">awk</code> were either poorly documented or not
documented at all.  Descriptions of such features
(often called &ldquo;dark corners&rdquo;) are noted in this Web page with
&ldquo;(d.c.).&rdquo;
They also appear in the index under the heading &ldquo;dark corner.&rdquo;
</p>
<p>But, as noted by the opening quote, any coverage of dark
corners is by definition incomplete.
</p>
<p>Extensions to the standard <code class="command">awk</code> language that are supported by
more than one <code class="command">awk</code> implementation are marked
&ldquo;(c.e.),&rdquo; and listed in the index under &ldquo;common extensions&rdquo;
and &ldquo;extensions, common.&rdquo;
</p>
<hr>
</div>
</div>
<div class="unnumberedsec-level-extent" id="Manual-History">
<div class="nav-panel">
<p>
Next: <a href="#How-To-Contribute" accesskey="n" rel="next">How to Contribute</a>, Previous: <a href="#Conventions" accesskey="p" rel="prev">Typographical Conventions</a>, Up: <a href="#Preface" accesskey="u" rel="up">Preface</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="unnumberedsec" id="The-GNU-Project-and-This-Book"><span>The GNU Project and This Book<a class="copiable-link" href="#The-GNU-Project-and-This-Book"> &para;</a></span></h3>

<a class="index-entry-id" id="index-FSF-_0028Free-Software-Foundation_0029"></a>
<a class="index-entry-id" id="index-Free-Software-Foundation-_0028FSF_0029"></a>
<a class="index-entry-id" id="index-Stallman_002c-Richard"></a>
<p>The Free Software Foundation (FSF) is a nonprofit organization dedicated
to the production and distribution of freely distributable software.
It was founded by Richard M. Stallman, the author of the original
Emacs editor.  GNU Emacs is the most widely used version of Emacs today.
</p>
<a class="index-entry-id" id="index-GNU-Project"></a>
<a class="index-entry-id" id="index-GPL-_0028General-Public-License_0029"></a>
<a class="index-entry-id" id="index-documentation-online"></a>
<p>The GNU<a class="footnote" id="DOCF6" href="#FOOT6"><sup>6</sup></a>
Project is an ongoing effort on the part of the Free Software
Foundation to create a complete, freely distributable, POSIX-compliant
computing environment.
The FSF uses the GNU General Public License (GPL) to ensure that
its software&rsquo;s
source code is always available to the end user.
A copy of the GPL is included
in this Web page
for your reference
(see <a class="pxref" href="#Copying">GNU General Public License</a>).
The GPL applies to the C language source code for <code class="command">gawk</code>.
To find out more about the FSF and the GNU Project online,
see <a class="uref" href="https://www.gnu.org">the GNU Project&rsquo;s home page</a>.
This Web page may also be read from
<a class="uref" href="https://www.gnu.org/software/gawk/manual/">GNU&rsquo;s website</a>.
</p>
<p>A shell, an editor (Emacs), highly portable optimizing C, C++, and
Objective-C compilers, a symbolic debugger and dozens of large and
small utilities (such as <code class="command">gawk</code>), have all been completed and are
freely available.  The GNU operating
system kernel (the HURD), has been released but remains in an early
stage of development.
</p>
<a class="index-entry-id" id="index-GNU_002fLinux"></a>
<a class="index-entry-id" id="index-operating-systems-BSD_002dbased"></a>
<p>Until the GNU operating system is more fully developed, you should
consider using GNU/Linux, a freely distributable, Unix-like operating
system for Intel,
Power Architecture,
Sun SPARC, IBM S/390, and other
systems.<a class="footnote" id="DOCF7" href="#FOOT7"><sup>7</sup></a>
Many GNU/Linux distributions are
available for download from the Internet.
</p>
<p>The Web page you are reading is actually free&mdash;at least, the
information in it is free to anyone.  The machine-readable
source code for the Web page comes with <code class="command">gawk</code>.
(Take a moment to check the Free Documentation
License in <a class="ref" href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>.)
</p>
<a class="index-entry-id" id="index-Close_002c-Diane"></a>
<p>The Web page itself has gone through multiple previous editions.
Paul Rubin wrote the very first draft of <cite class="cite">The GAWK Manual</cite>;
it was around 40 pages long.
Diane Close and Richard Stallman improved it, yielding a
version that was
around 90 pages and barely described the original, &ldquo;old&rdquo;
version of <code class="command">awk</code>.
</p>
<p>I started working with that version in the fall of 1988.
As work on it progressed,
the FSF published several preliminary versions (numbered 0.<var class="var">x</var>).
In 1996, edition 1.0 was released with <code class="command">gawk</code> 3.0.0.
The FSF published the first two editions under
the title <cite class="cite">The GNU Awk User&rsquo;s Guide</cite>.
</p>
<p>This edition maintains the basic structure of the previous editions.
For FSF edition 4.0, the content was thoroughly reviewed and updated. All
references to <code class="command">gawk</code> versions prior to 4.0 were removed.
Of significant note for that edition was the addition of <a class="ref" href="#Debugger">Debugging <code class="command">awk</code> Programs</a>.
</p>
<p>For FSF edition
5.0,
the content has been reorganized into parts,
and the major new additions are <a class="ref" href="#Arbitrary-Precision-Arithmetic">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a>,
and <a class="ref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>.
</p>
<p>This Web page will undoubtedly continue to evolve.  If you
find an error in the Web page, please report it!  See <a class="xref" href="#Bugs">Reporting Problems and Bugs</a>
for information on submitting problem reports electronically.
</p>

<hr>
</div>
<div class="unnumberedsec-level-extent" id="How-To-Contribute">
<div class="nav-panel">
<p>
Next: <a href="#Acknowledgments" accesskey="n" rel="next">Acknowledgments</a>, Previous: <a href="#Manual-History" accesskey="p" rel="prev">The GNU Project and This Book</a>, Up: <a href="#Preface" accesskey="u" rel="up">Preface</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="unnumberedsec" id="How-to-Contribute"><span>How to Contribute<a class="copiable-link" href="#How-to-Contribute"> &para;</a></span></h3>

<p>As the maintainer of GNU <code class="command">awk</code>, I once thought that I would be
able to manage a collection of publicly available <code class="command">awk</code> programs
and I even solicited contributions.  Making things available on the Internet
helps keep the <code class="command">gawk</code> distribution down to manageable size.
</p>
<p>The initial collection of material, such as it is, is still available
at <a class="uref" href="ftp://ftp.freefriends.org/arnold/Awkstuff">ftp://ftp.freefriends.org/arnold/Awkstuff</a>.
</p>
<p>In the hopes of doing something broader, I acquired the
<code class="code">awklang.org</code> domain.  Late in 2017, a volunteer took on the task
of managing it.
</p>
<p>If you have written an interesting <code class="command">awk</code> program that
you would like to share with the rest of the world, please see
<a class="uref" href="http://www.awklang.org">http://www.awklang.org</a> and use the &ldquo;Contact&rdquo; link.
</p>
<p>If you have written a <code class="command">gawk</code> extension, please see
<a class="ref" href="#gawkextlib">The <code class="code">gawkextlib</code> Project</a>.
</p>
<hr>
</div>
<div class="unnumberedsec-level-extent" id="Acknowledgments">
<div class="nav-panel">
<p>
Previous: <a href="#How-To-Contribute" accesskey="p" rel="prev">How to Contribute</a>, Up: <a href="#Preface" accesskey="u" rel="up">Preface</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="unnumberedsec" id="Acknowledgments-1"><span>Acknowledgments<a class="copiable-link" href="#Acknowledgments-1"> &para;</a></span></h3>

<p>The initial draft of <cite class="cite">The GAWK Manual</cite> had the following acknowledgments:
</p>
<blockquote class="quotation">
<p>Many people need to be thanked for their assistance in producing this
manual.  Jay Fenlason contributed many ideas and sample programs.  Richard
Mlynarik and Robert Chassell gave helpful comments on drafts of this
manual.  The paper <cite class="cite">A Supplemental Document for AWK</cite> by John W.
Pierce of the Chemistry Department at UC San Diego, pinpointed several
issues relevant both to <code class="command">awk</code> implementation and to this manual, that
would otherwise have escaped us.
</p></blockquote>

<a class="index-entry-id" id="index-Stallman_002c-Richard-1"></a>
<p>I would like to acknowledge Richard M. Stallman, for his vision of a
better world and for his courage in founding the FSF and starting the
GNU Project.
</p>
<p>Earlier editions of this Web page had the following acknowledgements:
</p>
<blockquote class="quotation">
<p>The following people (in alphabetical order)
provided helpful comments on various
versions of this book:
Rick Adams,
Dr. Nelson H.F. Beebe,
Karl Berry,
Dr. Michael Brennan,
Rich Burridge,
Claire Cloutier,
Diane Close,
Scott Deifik,
Christopher (&ldquo;Topher&rdquo;) Eliot,
Jeffrey Friedl,
Dr. Darrel Hankerson,
Michal Jaegermann,
Dr. Richard J. LeBlanc,
Michael Lijewski,
Pat Rankin,
Miriam Robbins,
Mary Sheehan,
and
Chuck Toporek.
</p>
<a class="index-entry-id" id="index-Berry_002c-Karl"></a>
<a class="index-entry-id" id="index-Chassell_002c-Robert-J_002e"></a>
<p>Robert J. Chassell provided much valuable advice on
the use of Texinfo.
He also deserves special thanks for
convincing me <em class="emph">not</em> to title this Web page
<cite class="cite">How to Gawk Politely</cite>.
Karl Berry helped significantly with the TeX part of Texinfo.
</p>
<a class="index-entry-id" id="index-Hartholz-Marshall"></a>
<a class="index-entry-id" id="index-Hartholz-Elaine"></a>
<a class="index-entry-id" id="index-Schreiber-Bert"></a>
<a class="index-entry-id" id="index-Schreiber-Rita"></a>
<p>I would like to thank Marshall and Elaine Hartholz of Seattle and
Dr. Bert and Rita Schreiber of Detroit for large amounts of quiet vacation
time in their homes, which allowed me to make significant progress on
this Web page and on <code class="command">gawk</code> itself.
</p>
<a class="index-entry-id" id="index-Hughes_002c-Phil"></a>
<p>Phil Hughes of SSC
contributed in a very important way by loaning me his laptop GNU/Linux
system, not once, but twice, which allowed me to do a lot of work while
away from home.
</p>
<a class="index-entry-id" id="index-Trueman_002c-David-1"></a>
<p>David Trueman deserves special credit; he has done a yeoman job
of evolving <code class="command">gawk</code> so that it performs well and without bugs.
Although he is no longer involved with <code class="command">gawk</code>,
working with him on this project was a significant pleasure.
</p>
<a class="index-entry-id" id="index-Drepper_002c-Ulrich"></a>
<a class="index-entry-id" id="index-GNITS-mailing-list"></a>
<a class="index-entry-id" id="index-mailing-list_002c-GNITS"></a>
<p>The intrepid members of the GNITS mailing list, and most notably Ulrich
Drepper, provided invaluable help and feedback for the design of the
internationalization features.
</p>
<p>Chuck Toporek, Mary Sheehan, and Claire Cloutier of O&rsquo;Reilly &amp; Associates contributed
significant editorial help for this Web page for the
3.1 release of <code class="command">gawk</code>.
</p></blockquote>

<a class="index-entry-id" id="index-Beebe_002c-Nelson-H_002eF_002e"></a>
<a class="index-entry-id" id="index-Buening_002c-Andreas"></a>
<a class="index-entry-id" id="index-Collado_002c-Manuel"></a>
<a class="index-entry-id" id="index-Colombo_002c-Antonio"></a>
<a class="index-entry-id" id="index-Davies_002c-Stephen"></a>
<a class="index-entry-id" id="index-Deifik_002c-Scott"></a>
<a class="index-entry-id" id="index-Demaille_002c-Akim"></a>
<a class="index-entry-id" id="index-G_002e_002c-Daniel-Richard"></a>
<a class="index-entry-id" id="index-Guerrero_002c-Juan-Manuel"></a>
<a class="index-entry-id" id="index-Hankerson_002c-Darrel"></a>
<a class="index-entry-id" id="index-Jaegermann_002c-Michal"></a>
<a class="index-entry-id" id="index-Kahrs_002c-Jurgen"></a>
<a class="index-entry-id" id="index-Kasal_002c-Stepan"></a>
<a class="index-entry-id" id="index-Malmberg_002c-John"></a>
<a class="index-entry-id" id="index-Ramey_002c-Chet"></a>
<a class="index-entry-id" id="index-Rankin_002c-Pat"></a>
<a class="index-entry-id" id="index-Schorr_002c-Andrew"></a>
<a class="index-entry-id" id="index-Vinschen_002c-Corinna"></a>
<a class="index-entry-id" id="index-Zaretskii_002c-Eli"></a>

<p>Dr. Nelson Beebe,
Andreas Buening,
Dr. Manuel Collado,
Antonio Colombo,
Stephen Davies,
Scott Deifik,
Akim Demaille,
Daniel Richard G.,
Juan Manuel Guerrero,
Darrel Hankerson,
Michal Jaegermann,
J&uuml;rgen Kahrs,
Stepan Kasal,
John Malmberg,
Chet Ramey,
Pat Rankin,
Andrew Schorr,
Corinna Vinschen,
and Eli Zaretskii
(in alphabetical order)
make up the current <code class="command">gawk</code> &ldquo;crack portability team.&rdquo;  Without
their hard work and help, <code class="command">gawk</code> would not be nearly the robust,
portable program it is today.  It has been and continues to be a pleasure
working with this team of fine people.
</p>
<p>Notable code and documentation contributions were made by
a number of people. See <a class="xref" href="#Contributors">Major Contributors to <code class="command">gawk</code></a> for the full list.
</p>

<p>Thanks to Michael Brennan for the Forewords.
</p>
<a class="index-entry-id" id="index-Duman_002c-Patrice"></a>
<a class="index-entry-id" id="index-Berry_002c-Karl-1"></a>
<a class="index-entry-id" id="index-Smith_002c-Gavin"></a>
<p>Thanks to Patrice Dumas for the new <code class="command">makeinfo</code> program.
Thanks to Karl Berry for his past work on Texinfo, and
to Gavin Smith, who continues to work to improve
the Texinfo markup language.
</p>
<a class="index-entry-id" id="index-Kernighan_002c-Brian-1"></a>
<a class="index-entry-id" id="index-Brennan_002c-Michael-2"></a>
<a class="index-entry-id" id="index-Day_002c-Robert-P_002eJ_002e"></a>
<p>Robert P.J. Day, Michael Brennan, and Brian Kernighan kindly acted as
reviewers for the 2015 edition of this Web page. Their feedback
helped improve the final work.
</p>
<p>I would also like to thank Brian Kernighan for his invaluable assistance during the
testing and debugging of <code class="command">gawk</code>, and for his ongoing
help and advice in clarifying numerous points about the language.
We could not have done nearly as good a job on either <code class="command">gawk</code>
or its documentation without his help.
</p>
<p>Brian is in a class by himself as a programmer and technical
author.  I have to thank him (yet again) for his ongoing friendship
and for being a role model to me for over 30 years!
Having him as a reviewer is an exciting privilege. It has also
been extremely humbling<small class="enddots">...</small>
</p>
<a class="index-entry-id" id="index-Robbins-Miriam"></a>
<a class="index-entry-id" id="index-Robbins-Jean"></a>
<a class="index-entry-id" id="index-Robbins-Harry"></a>
<a class="index-entry-id" id="index-G_002dd"></a>
<p>I must thank my wonderful wife, Miriam, for her patience through
the many versions of this project, for her proofreading,
and for sharing me with the computer.
I would like to thank my parents for their love, and for the grace with
which they raised and educated me.
Finally, I also must acknowledge my gratitude to G-d, for the many opportunities
He has sent my way, as well as for the gifts He has given me with which to
take advantage of those opportunities.
</p><br>
<br>
<p>Arnold Robbins <br>
Nof Ayalon <br>
Israel <br>
March, 2020
</p>
<hr>
</div>
</div>
</div>
<div class="part-level-extent" id="Part-I_003a-The-awk-Language">
<div class="nav-panel">
<p>
Next: <a href="#Invoking-Gawk" accesskey="n" rel="next">Running <code class="command">awk</code> and <code class="command">gawk</code></a>, Previous: <a href="#Preface" accesskey="p" rel="prev">Preface</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h1 class="part"><span>Part I:<br>The <code class="command">awk</code> Language<a class="copiable-link" href="#Part-I_003a-The-awk-Language"> &para;</a></span></h1>
<hr>


<ul class="mini-toc">
<li><a href="#Getting-Started" accesskey="1">Getting Started with <code class="command">awk</code></a></li>
<li><a href="#Invoking-Gawk" accesskey="2">Running <code class="command">awk</code> and <code class="command">gawk</code></a></li>
<li><a href="#Regexp" accesskey="3">Regular Expressions</a></li>
<li><a href="#Reading-Files" accesskey="4">Reading Input Files</a></li>
<li><a href="#Printing" accesskey="5">Printing Output</a></li>
<li><a href="#Expressions" accesskey="6">Expressions</a></li>
<li><a href="#Patterns-and-Actions" accesskey="7">Patterns, Actions, and Variables</a></li>
<li><a href="#Arrays" accesskey="8">Arrays in <code class="command">awk</code></a></li>
<li><a href="#Functions" accesskey="9">Functions</a></li>
</ul>
<div class="chapter-level-extent" id="Getting-Started">
<h2 class="chapter" id="Getting-Started-with-awk"><span>1 Getting Started with <code class="command">awk</code><a class="copiable-link" href="#Getting-Started-with-awk"> &para;</a></span></h2>
<a class="index-entry-id" id="index-awk-function-of"></a>

<p>The basic function of <code class="command">awk</code> is to search files for lines (or other
units of text) that contain certain patterns.  When a line matches one
of the patterns, <code class="command">awk</code> performs specified actions on that line.
<code class="command">awk</code> continues to process input lines in this way until it reaches
the end of the input files.
</p>
<a class="index-entry-id" id="index-awk-uses-for-1"></a>
<a class="index-entry-id" id="index-programming-languages-data_002ddriven-vs_002e-procedural"></a>
<a class="index-entry-id" id="index-awk-programs"></a>
<p>Programs in <code class="command">awk</code> are different from programs in most other languages,
because <code class="command">awk</code> programs are <em class="dfn">data driven</em> (i.e., you describe
the data you want to work with and then what to do when you find it).
Most other languages are <em class="dfn">procedural</em>; you have to describe, in great
detail, every step the program should take.  When working with procedural
languages, it is usually much
harder to clearly describe the data your program will process.
For this reason, <code class="command">awk</code> programs are often refreshingly easy to
read and write.
</p>
<a class="index-entry-id" id="index-program_002c-definition-of"></a>
<a class="index-entry-id" id="index-rule_002c-definition-of"></a>
<p>When you run <code class="command">awk</code>, you specify an <code class="command">awk</code> <em class="dfn">program</em> that
tells <code class="command">awk</code> what to do.  The program consists of a series of
<em class="dfn">rules</em> (it may also contain <em class="dfn">function definitions</em>,
an advanced feature that we will ignore for now;
see <a class="pxref" href="#User_002ddefined">User-Defined Functions</a>).  Each rule specifies one
pattern to search for and one action to perform
upon finding the pattern.
</p>
<p>Syntactically, a rule consists of a <em class="dfn">pattern</em> followed by an
<em class="dfn">action</em>.  The action is enclosed in braces to separate it from the
pattern.  Newlines usually separate rules.  Therefore, an <code class="command">awk</code>
program looks like this:
</p>
<div class="example">
<pre class="example-preformatted"><var class="var">pattern</var> { <var class="var">action</var> }
<var class="var">pattern</var> { <var class="var">action</var> }
...
</pre></div>


<ul class="mini-toc">
<li><a href="#Running-gawk" accesskey="1">How to Run <code class="command">awk</code> Programs</a></li>
<li><a href="#Sample-Data-Files" accesskey="2">Data files for the Examples</a></li>
<li><a href="#Very-Simple" accesskey="3">Some Simple Examples</a></li>
<li><a href="#Two-Rules" accesskey="4">An Example with Two Rules</a></li>
<li><a href="#More-Complex" accesskey="5">A More Complex Example</a></li>
<li><a href="#Statements_002fLines" accesskey="6"><code class="command">awk</code> Statements Versus Lines</a></li>
<li><a href="#Other-Features" accesskey="7">Other Features of <code class="command">awk</code></a></li>
<li><a href="#When" accesskey="8">When to Use <code class="command">awk</code></a></li>
<li><a href="#Intro-Summary" accesskey="9">Summary</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Running-gawk">
<div class="nav-panel">
<p>
Next: <a href="#Sample-Data-Files" accesskey="n" rel="next">Data files for the Examples</a>, Up: <a href="#Getting-Started" accesskey="u" rel="up">Getting Started with <code class="command">awk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="How-to-Run-awk-Programs"><span>1.1 How to Run <code class="command">awk</code> Programs<a class="copiable-link" href="#How-to-Run-awk-Programs"> &para;</a></span></h3>

<a class="index-entry-id" id="index-awk-programs-running"></a>
<p>There are several ways to run an <code class="command">awk</code> program.  If the program is
short, it is easiest to include it in the command that runs <code class="command">awk</code>,
like this:
</p>
<div class="example">
<pre class="example-preformatted">awk '<var class="var">program</var>' <var class="var">input-file1</var> <var class="var">input-file2</var> ...
</pre></div>

<a class="index-entry-id" id="index-command-line-formats"></a>
<p>When the program is long, it is usually more convenient to put it in a file
and run it with a command like this:
</p>
<div class="example">
<pre class="example-preformatted">awk -f <var class="var">program-file</var> <var class="var">input-file1</var> <var class="var">input-file2</var> ...
</pre></div>

<p>This section discusses both mechanisms, along with several
variations of each.
</p>

<ul class="mini-toc">
<li><a href="#One_002dshot" accesskey="1">One-Shot Throwaway <code class="command">awk</code> Programs</a></li>
<li><a href="#Read-Terminal" accesskey="2">Running <code class="command">awk</code> Without Input Files</a></li>
<li><a href="#Long" accesskey="3">Running Long Programs</a></li>
<li><a href="#Executable-Scripts" accesskey="4">Executable <code class="command">awk</code> Programs</a></li>
<li><a href="#Comments" accesskey="5">Comments in <code class="command">awk</code> Programs</a></li>
<li><a href="#Quoting" accesskey="6">Shell Quoting Issues</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="One_002dshot">
<div class="nav-panel">
<p>
Next: <a href="#Read-Terminal" accesskey="n" rel="next">Running <code class="command">awk</code> Without Input Files</a>, Up: <a href="#Running-gawk" accesskey="u" rel="up">How to Run <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="One_002dShot-Throwaway-awk-Programs"><span>1.1.1 One-Shot Throwaway <code class="command">awk</code> Programs<a class="copiable-link" href="#One_002dShot-Throwaway-awk-Programs"> &para;</a></span></h4>

<p>Once you are familiar with <code class="command">awk</code>, you will often type in simple
programs the moment you want to use them.  Then you can write the
program as the first argument of the <code class="command">awk</code> command, like this:
</p>
<div class="example">
<pre class="example-preformatted">awk '<var class="var">program</var>' <var class="var">input-file1</var> <var class="var">input-file2</var> ...
</pre></div>

<p>where <var class="var">program</var> consists of a series of patterns and
actions, as described earlier.
</p>
<a class="index-entry-id" id="index-single-quote-_0028_0027_0029"></a>
<a class="index-entry-id" id="index-_0027-_0028single-quote_0029"></a>
<p>This command format instructs the <em class="dfn">shell</em>, or command interpreter,
to start <code class="command">awk</code> and use the <var class="var">program</var> to process records in the
input file(s).  There are single quotes around <var class="var">program</var> so
the shell won&rsquo;t interpret any <code class="command">awk</code> characters as special shell
characters.  The quotes also cause the shell to treat all of <var class="var">program</var> as
a single argument for <code class="command">awk</code>, and allow <var class="var">program</var> to be more
than one line long.
</p>
<a class="index-entry-id" id="index-shells-scripts"></a>
<a class="index-entry-id" id="index-awk-programs-running-from-shell-scripts"></a>
<p>This format is also useful for running short or medium-sized <code class="command">awk</code>
programs from shell scripts, because it avoids the need for a separate
file for the <code class="command">awk</code> program.  A self-contained shell script is more
reliable because there are no other files to misplace.
</p>
<p>Later in this chapter, in
<a class="ref" href="#Very-Simple">Some Simple Examples</a>,
we&rsquo;ll see examples of several short,
self-contained programs.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Read-Terminal">
<div class="nav-panel">
<p>
Next: <a href="#Long" accesskey="n" rel="next">Running Long Programs</a>, Previous: <a href="#One_002dshot" accesskey="p" rel="prev">One-Shot Throwaway <code class="command">awk</code> Programs</a>, Up: <a href="#Running-gawk" accesskey="u" rel="up">How to Run <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Running-awk-Without-Input-Files"><span>1.1.2 Running <code class="command">awk</code> Without Input Files<a class="copiable-link" href="#Running-awk-Without-Input-Files"> &para;</a></span></h4>

<a class="index-entry-id" id="index-standard-input"></a>
<a class="index-entry-id" id="index-input-standard"></a>
<a class="index-entry-id" id="index-input-files-running-awk-without"></a>
<p>You can also run <code class="command">awk</code> without any input files.  If you type the
following command line:
</p>
<div class="example">
<pre class="example-preformatted">awk '<var class="var">program</var>'
</pre></div>

<p><code class="command">awk</code> applies the <var class="var">program</var> to the <em class="dfn">standard input</em>,
which usually means whatever you type on the keyboard.  This continues
until you indicate end-of-file by typing <kbd class="kbd">Ctrl-d</kbd>.
(On non-POSIX operating systems, the end-of-file character may be different.)
</p>
<a class="index-entry-id" id="index-files-input"></a>
<a class="index-entry-id" id="index-input-files-running-awk-without-1"></a>
<a class="index-entry-id" id="index-awk-programs-running-without-input-files"></a>
<p>As an example, the following program prints a friendly piece of advice
(from Douglas Adams&rsquo;s <cite class="cite">The Hitchhiker&rsquo;s Guide to the Galaxy</cite>),
to keep you from worrying about the complexities of computer
programming:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN { print &quot;Don\47t Panic!&quot; }'</kbd>
-| Don't Panic!
</pre></div>

<p><code class="command">awk</code> executes statements associated with <code class="code">BEGIN</code> before
reading any input.  If there are no other statements in your program,
as is the case here, <code class="command">awk</code> just stops, instead of trying to read
input it doesn&rsquo;t know how to process.
The &lsquo;<samp class="samp">\47</samp>&rsquo; is a magic way (explained later) of getting a single quote into
the program, without having to engage in ugly shell quoting tricks.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> If you use Bash as your shell, you should execute the
command &lsquo;<samp class="samp">set +H</samp>&rsquo; before running this program interactively, to
disable the C shell-style command history, which treats &lsquo;<samp class="samp">!</samp>&rsquo; as a
special character. We recommend putting this command into your personal
startup file.
</p></blockquote>

<p>This next simple <code class="command">awk</code> program
emulates the <code class="command">cat</code> utility; it copies whatever you type on the
keyboard to its standard output (why this works is explained shortly):
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '{ print }'</kbd>
<kbd class="kbd">Now is the time for all good men</kbd>
-| Now is the time for all good men
<kbd class="kbd">to come to the aid of their country.</kbd>
-| to come to the aid of their country.
<kbd class="kbd">Four score and seven years ago, ...</kbd>
-| Four score and seven years ago, ...
<kbd class="kbd">What, me worry?</kbd>
-| What, me worry?
<kbd class="kbd">Ctrl-d</kbd>
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Long">
<div class="nav-panel">
<p>
Next: <a href="#Executable-Scripts" accesskey="n" rel="next">Executable <code class="command">awk</code> Programs</a>, Previous: <a href="#Read-Terminal" accesskey="p" rel="prev">Running <code class="command">awk</code> Without Input Files</a>, Up: <a href="#Running-gawk" accesskey="u" rel="up">How to Run <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Running-Long-Programs"><span>1.1.3 Running Long Programs<a class="copiable-link" href="#Running-Long-Programs"> &para;</a></span></h4>

<a class="index-entry-id" id="index-awk-programs-running-1"></a>
<a class="index-entry-id" id="index-awk-programs-lengthy"></a>
<a class="index-entry-id" id="index-files-awk-programs-in"></a>
<p>Sometimes <code class="command">awk</code> programs are very long.  In these cases, it is
more convenient to put the program into a separate file.  In order to tell
<code class="command">awk</code> to use that file for its program, you type:
</p>
<div class="example">
<pre class="example-preformatted">awk -f <var class="var">source-file</var> <var class="var">input-file1</var> <var class="var">input-file2</var> ...
</pre></div>

<a class="index-entry-id" id="index-_002df-option"></a>
<a class="index-entry-id" id="index-command-line-option-_002df"></a>
<p>The <samp class="option">-f</samp> instructs the <code class="command">awk</code> utility to get the
<code class="command">awk</code> program from the file <var class="var">source-file</var> (see <a class="pxref" href="#Options">Command-Line Options</a>).
Any file name can be used for <var class="var">source-file</var>.  For example, you
could put the program:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN { print &quot;Don't Panic!&quot; }
</pre></div>

<p>into the file <samp class="file">advice</samp>.  Then this command:
</p>
<div class="example">
<pre class="example-preformatted">awk -f advice
</pre></div>

<p>does the same thing as this one:
</p>
<div class="example">
<pre class="example-preformatted">awk 'BEGIN { print &quot;Don\47t Panic!&quot; }'
</pre></div>

<a class="index-entry-id" id="index-quoting-in-gawk-command-lines"></a>
<p>This was explained earlier
(see <a class="pxref" href="#Read-Terminal">Running <code class="command">awk</code> Without Input Files</a>).
Note that you don&rsquo;t usually need single quotes around the file name that you
specify with <samp class="option">-f</samp>, because most file names don&rsquo;t contain any of the shell&rsquo;s
special characters.  Notice that in <samp class="file">advice</samp>, the <code class="command">awk</code>
program did not have single quotes around it.  The quotes are only needed
for programs that are provided on the <code class="command">awk</code> command line.
(Also, placing the program in a file allows us to use a literal single quote in the program
text, instead of the magic &lsquo;<samp class="samp">\47</samp>&rsquo;.)
</p>
<a class="index-entry-id" id="index-single-quote-_0028_0027_0029-in-gawk-command-lines"></a>
<a class="index-entry-id" id="index-_0027-_0028single-quote_0029-in-gawk-command-lines"></a>
<p>If you want to clearly identify an <code class="command">awk</code> program file as such,
you can add the extension <samp class="file">.awk</samp> to the file name.  This doesn&rsquo;t
affect the execution of the <code class="command">awk</code> program but it does make
&ldquo;housekeeping&rdquo; easier.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Executable-Scripts">
<div class="nav-panel">
<p>
Next: <a href="#Comments" accesskey="n" rel="next">Comments in <code class="command">awk</code> Programs</a>, Previous: <a href="#Long" accesskey="p" rel="prev">Running Long Programs</a>, Up: <a href="#Running-gawk" accesskey="u" rel="up">How to Run <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Executable-awk-Programs"><span>1.1.4 Executable <code class="command">awk</code> Programs<a class="copiable-link" href="#Executable-awk-Programs"> &para;</a></span></h4>
<a class="index-entry-id" id="index-awk-programs-1"></a>
<a class="index-entry-id" id="index-_0023-_0028number-sign_0029-_0023_0021-_0028executable-scripts_0029"></a>
<a class="index-entry-id" id="index-Unix-awk-scripts-and"></a>
<a class="index-entry-id" id="index-number-sign-_0028_0023_0029-_0023_0021-_0028executable-scripts_0029"></a>

<p>Once you have learned <code class="command">awk</code>, you may want to write self-contained
<code class="command">awk</code> scripts, using the &lsquo;<samp class="samp">#!</samp>&rsquo; script mechanism.  You can do
this on many systems.<a class="footnote" id="DOCF8" href="#FOOT8"><sup>8</sup></a>
For example, you could update the file <samp class="file">advice</samp> to look like this:
</p>
<div class="example">
<pre class="example-preformatted">#! /bin/awk -f

BEGIN { print &quot;Don't Panic!&quot; }
</pre></div>

<p>After making this file executable (with the <code class="command">chmod</code> utility),
simply type &lsquo;<samp class="samp">advice</samp>&rsquo;
at the shell and the system arranges to run <code class="command">awk</code> as if you had
typed &lsquo;<samp class="samp">awk -f advice</samp>&rsquo;:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">chmod +x advice</kbd>
$ <kbd class="kbd">./advice</kbd>
-| Don't Panic!
</pre></div>

<p>Self-contained <code class="command">awk</code> scripts are useful when you want to write a
program that users can invoke without their having to know that the program is
written in <code class="command">awk</code>.
</p>
<a class="index-entry-id" id="index-sidebar-Understanding-_0023_0021"></a>
<table class="cartouche" border="1"><tr><th>
Understanding &lsquo;<samp class="samp">#!</samp>&rsquo;</th></tr><tr><td>
<a class="index-entry-id" id="index-portability-_0023_0021-_0028executable-scripts_0029"></a>

<p><code class="command">awk</code> is an <em class="dfn">interpreted</em> language. This means that the
<code class="command">awk</code> utility reads your program and then processes your data
according to the instructions in your program. (This is different
from a <em class="dfn">compiled</em> language such as C, where your program is first
compiled into machine code that is executed directly by your system&rsquo;s
processor.)  The <code class="command">awk</code> utility is thus termed an <em class="dfn">interpreter</em>.
Many modern languages are interpreted.
</p>
<p>The line beginning with &lsquo;<samp class="samp">#!</samp>&rsquo; lists the full file name of an
interpreter to run and a single optional initial command-line argument
to pass to that interpreter.  The operating system then runs the
interpreter with the given argument and the full argument list of the
executed program.  The first argument in the list is the full file name
of the <code class="command">awk</code> program.  The rest of the argument list contains
either options to <code class="command">awk</code>, or data files, or both. (Note that on
many systems <code class="command">awk</code> is found in <samp class="file">/usr/bin</samp> instead of
in <samp class="file">/bin</samp>.)
</p>
<p>Some systems limit the length of the interpreter name to 32 characters.
Often, this can be dealt with by using a symbolic link.
</p>
<p>You should not put more than one argument on the &lsquo;<samp class="samp">#!</samp>&rsquo;
line after the path to <code class="command">awk</code>. It does not work. The operating system
treats the rest of the line as a single argument and passes it to <code class="command">awk</code>.
Doing this leads to confusing behavior&mdash;most likely a usage diagnostic
of some sort from <code class="command">awk</code>.
</p>
<a class="index-entry-id" id="index-ARGC_002fARGV-variables-portability-and"></a>
<a class="index-entry-id" id="index-portability-ARGV-variable"></a>
<a class="index-entry-id" id="index-dark-corner-ARGV-variable_002c-value-of"></a>
<p>Finally, the value of <code class="code">ARGV[0]</code>
(see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>)
varies depending upon your operating system.
Some systems put &lsquo;<samp class="samp">awk</samp>&rsquo; there, some put the full pathname
of <code class="command">awk</code> (such as <samp class="file">/bin/awk</samp>), and some put the name
of your script (&lsquo;<samp class="samp">advice</samp>&rsquo;).  (d.c.)
Don&rsquo;t rely on the value of <code class="code">ARGV[0]</code>
to provide your script name.
</p></td></tr></table>

<hr>
</div>
<div class="subsection-level-extent" id="Comments">
<div class="nav-panel">
<p>
Next: <a href="#Quoting" accesskey="n" rel="next">Shell Quoting Issues</a>, Previous: <a href="#Executable-Scripts" accesskey="p" rel="prev">Executable <code class="command">awk</code> Programs</a>, Up: <a href="#Running-gawk" accesskey="u" rel="up">How to Run <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Comments-in-awk-Programs"><span>1.1.5 Comments in <code class="command">awk</code> Programs<a class="copiable-link" href="#Comments-in-awk-Programs"> &para;</a></span></h4>
<a class="index-entry-id" id="index-_0023-_0028number-sign_0029-commenting"></a>
<a class="index-entry-id" id="index-number-sign-_0028_0023_0029-commenting"></a>
<a class="index-entry-id" id="index-commenting"></a>
<a class="index-entry-id" id="index-awk-programs-documenting"></a>

<p>A <em class="dfn">comment</em> is some text that is included in a program for the sake
of human readers; it is not really an executable part of the program.  Comments
can explain what the program does and how it works.  Nearly all
programming languages have provisions for comments, as programs are
typically hard to understand without them.
</p>
<p>In the <code class="command">awk</code> language, a comment starts with the number sign
character (&lsquo;<samp class="samp">#</samp>&rsquo;) and continues to the end of the line.
The &lsquo;<samp class="samp">#</samp>&rsquo; does not have to be the first character on the line. The
<code class="command">awk</code> language ignores the rest of a line following a number sign.
For example, we could have put the following into <samp class="file">advice</samp>:
</p>
<div class="example">
<pre class="example-preformatted"># This program prints a nice, friendly message.  It helps
# keep novice users from being afraid of the computer.
BEGIN    { print &quot;Don't Panic!&quot; }
</pre></div>

<p>You can put comment lines into keyboard-composed throwaway <code class="command">awk</code>
programs, but this usually isn&rsquo;t very useful; the purpose of a
comment is to help you or another person understand the program
when reading it at a later time.
</p>
<a class="index-entry-id" id="index-quoting-for-small-awk-programs"></a>
<a class="index-entry-id" id="index-single-quote-_0028_0027_0029-vs_002e-apostrophe"></a>
<a class="index-entry-id" id="index-_0027-_0028single-quote_0029-vs_002e-apostrophe"></a>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> As mentioned in
<a class="ref" href="#One_002dshot">One-Shot Throwaway <code class="command">awk</code> Programs</a>,
you can enclose short to medium-sized programs in single quotes,
in order to keep
your shell scripts self-contained.  When doing so, <em class="emph">don&rsquo;t</em> put
an apostrophe (i.e., a single quote) into a comment (or anywhere else
in your program). The shell interprets the quote as the closing
quote for the entire program. As a result, usually the shell
prints a message about mismatched quotes, and if <code class="command">awk</code> actually
runs, it will probably print strange messages about syntax errors.
For example, look at the following:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN { print &quot;hello&quot; } # let's be cute'</kbd>
&gt;
</pre></div>

<p>The shell sees that the first two quotes match, and that
a new quoted object begins at the end of the command line.
It therefore prompts with the secondary prompt, waiting for more input.
With Unix <code class="command">awk</code>, closing the quoted string produces this result:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '{ print &quot;hello&quot; } # let's be cute'</kbd>
&gt; <kbd class="kbd">'</kbd>
error&rarr; awk: can't open file be
error&rarr;  source line number 1
</pre></div>

<a class="index-entry-id" id="index-_005c-_0028backslash_0029"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029"></a>
<p>Putting a backslash before the single quote in &lsquo;<samp class="samp">let's</samp>&rsquo; wouldn&rsquo;t help,
because backslashes are not special inside single quotes.
The next subsection describes the shell&rsquo;s quoting rules.
</p></blockquote>

<hr>
</div>
<div class="subsection-level-extent" id="Quoting">
<div class="nav-panel">
<p>
Previous: <a href="#Comments" accesskey="p" rel="prev">Comments in <code class="command">awk</code> Programs</a>, Up: <a href="#Running-gawk" accesskey="u" rel="up">How to Run <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Shell-Quoting-Issues"><span>1.1.6 Shell Quoting Issues<a class="copiable-link" href="#Shell-Quoting-Issues"> &para;</a></span></h4>
<a class="index-entry-id" id="index-shell-quoting_002c-rules-for"></a>


<p>For short to medium-length <code class="command">awk</code> programs, it is most convenient
to enter the program on the <code class="command">awk</code> command line.
This is best done by enclosing the entire program in single quotes.
This is true whether you are entering the program interactively at
the shell prompt, or writing it as part of a larger shell script:
</p>
<div class="example">
<pre class="example-preformatted">awk '<var class="var">program text</var>' <var class="var">input-file1</var> <var class="var">input-file2</var> ...
</pre></div>

<a class="index-entry-id" id="index-shells-quoting-rules-for"></a>
<a class="index-entry-id" id="index-Bourne-shell_002c-quoting-rules-for"></a>
<p>Once you are working with the shell, it is helpful to have a basic
knowledge of shell quoting rules.  The following rules apply only to
POSIX-compliant, Bourne-style shells (such as Bash, the GNU Bourne-Again
Shell).  If you use the C shell, you&rsquo;re on your own.
</p>
<p>Before diving into the rules, we introduce a concept that appears
throughout this Web page, which is that of the <em class="dfn">null</em>,
or empty, string.
</p>
<p>The null string is character data that has no value.
In other words, it is empty.  It is written in <code class="command">awk</code> programs
like this: <code class="code">&quot;&quot;</code>. In the shell, it can be written using single
or double quotes: <code class="code">&quot;&quot;</code> or <code class="code">''</code>. Although the null string has
no characters in it, it does exist. For example, consider this command:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo &quot;&quot;</kbd>
</pre></div>

<p>Here, the <code class="command">echo</code> utility receives a single argument, even
though that argument has no characters in it. In the rest of this
Web page, we use the terms <em class="dfn">null string</em> and <em class="dfn">empty string</em>
interchangeably.  Now, on to the quoting rules:
</p>
<ul class="itemize mark-bullet">
<li>Quoted items can be concatenated with nonquoted items as well as with other
quoted items.  The shell turns everything into one argument for
the command.

</li><li>Preceding any single character with a backslash (&lsquo;<samp class="samp">\</samp>&rsquo;) quotes
that character.  The shell removes the backslash and passes the quoted
character on to the command.

</li><li><a class="index-entry-id" id="index-_005c-_0028backslash_0029-in-shell-commands"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-in-shell-commands"></a>
<a class="index-entry-id" id="index-single-quote-_0028_0027_0029-in-shell-commands"></a>
<a class="index-entry-id" id="index-_0027-_0028single-quote_0029-in-shell-commands"></a>
Single quotes protect everything between the opening and closing quotes.
The shell does no interpretation of the quoted text, passing it on verbatim
to the command.
It is <em class="emph">impossible</em> to embed a single quote inside single-quoted text.
Refer back to
<a class="ref" href="#Comments">Comments in <code class="command">awk</code> Programs</a>
for an example of what happens if you try.

</li><li><a class="index-entry-id" id="index-double-quote-_0028_0022_0029-in-shell-commands"></a>
<a class="index-entry-id" id="index-_0022-_0028double-quote_0029-in-shell-commands"></a>
Double quotes protect most things between the opening and closing quotes.
The shell does at least variable and command substitution on the quoted text.
Different shells may do additional kinds of processing on double-quoted text.

<p>Because certain characters within double-quoted text are processed by the shell,
they must be <em class="dfn">escaped</em> within the text.  Of note are the characters
&lsquo;<samp class="samp">$</samp>&rsquo;, &lsquo;<samp class="samp">`</samp>&rsquo;, &lsquo;<samp class="samp">\</samp>&rsquo;, and &lsquo;<samp class="samp">&quot;</samp>&rsquo;, all of which must be preceded by
a backslash within double-quoted text if they are to be passed on literally
to the program.  (The leading backslash is stripped first.)
Thus, the example seen
previously
in <a class="ref" href="#Read-Terminal">Running <code class="command">awk</code> Without Input Files</a>:
</p>
<div class="example">
<pre class="example-preformatted">awk 'BEGIN { print &quot;Don\47t Panic!&quot; }'
</pre></div>

<p>could instead be written this way:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk &quot;BEGIN { print \&quot;Don't Panic!\&quot; }&quot;</kbd>
-| Don't Panic!
</pre></div>

<a class="index-entry-id" id="index-single-quote-_0028_0027_0029-with-double-quotes"></a>
<a class="index-entry-id" id="index-_0027-_0028single-quote_0029-with-double-quotes"></a>
<p>Note that the single quote is not special within double quotes.
</p>
</li><li>Null strings are removed when they occur as part of a non-null
command-line argument, while explicit null objects are kept.
For example, to specify that the field separator <code class="code">FS</code> should
be set to the null string, use:

<div class="example">
<pre class="example-preformatted">awk -F &quot;&quot; '<var class="var">program</var>' <var class="var">files</var> # correct
</pre></div>

<a class="index-entry-id" id="index-null-strings-in-gawk-arguments_002c-quoting-and"></a>
<p>Don&rsquo;t use this:
</p>
<div class="example">
<pre class="example-preformatted">awk -F&quot;&quot; '<var class="var">program</var>' <var class="var">files</var>  # wrong!
</pre></div>

<p>In the second case, <code class="command">awk</code> attempts to use the text of the program
as the value of <code class="code">FS</code>, and the first file name as the text of the program!
This results in syntax errors at best, and confusing behavior at worst.
</p></li></ul>

<a class="index-entry-id" id="index-quoting-in-gawk-command-lines-tricks-for"></a>
<p>Mixing single and double quotes is difficult.  You have to resort
to shell quoting tricks, like this:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN { print &quot;Here is a single quote &lt;'&quot;'&quot;'&gt;&quot; }'</kbd>
-| Here is a single quote &lt;'&gt;
</pre></div>

<p>This program consists of three concatenated quoted strings.  The first and the
third are single-quoted, and the second is double-quoted.
</p>
<p>This can be &ldquo;simplified&rdquo; to:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN { print &quot;Here is a single quote &lt;'\''&gt;&quot; }'</kbd>
-| Here is a single quote &lt;'&gt;
</pre></div>

<p>Judge for yourself which of these two is the more readable.
</p>
<p>Another option is to use double quotes, escaping the embedded, <code class="command">awk</code>-level
double quotes:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk &quot;BEGIN { print \&quot;Here is a single quote &lt;'&gt;\&quot; }&quot;</kbd>
-| Here is a single quote &lt;'&gt;
</pre></div>

<p>This option is also painful, because double quotes, backslashes, and dollar signs
are very common in more advanced <code class="command">awk</code> programs.
</p>
<p>A third option is to use the octal escape sequence equivalents
(see <a class="pxref" href="#Escape-Sequences">Escape Sequences</a>)
for the
single- and double-quote characters, like so:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN { print &quot;Here is a single quote &lt;\47&gt;&quot; }'</kbd>
-| Here is a single quote &lt;'&gt;
$ <kbd class="kbd">awk 'BEGIN { print &quot;Here is a double quote &lt;\42&gt;&quot; }'</kbd>
-| Here is a double quote &lt;&quot;&gt;
</pre></div></div>

<p>This works nicely, but you should comment clearly what the
escape sequences mean.
</p>
<p>A fourth option is to use command-line variable assignment, like this:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk -v sq=&quot;'&quot; 'BEGIN { print &quot;Here is a single quote &lt;&quot; sq &quot;&gt;&quot; }'</kbd>
-| Here is a single quote &lt;'&gt;
</pre></div>

<p>(Here, the two string constants and the value of <code class="code">sq</code> are concatenated
into a single string that is printed by <code class="code">print</code>.)
</p>
<p>If you really need both single and double quotes in your <code class="command">awk</code>
program, it is probably best to move it into a separate file, where
the shell won&rsquo;t be part of the picture and you can say what you mean.
</p>
<ul class="mini-toc">
<li><a href="#DOS-Quoting" accesskey="1">Quoting in MS-Windows Batch Files</a></li>
</ul>
<hr>
<div class="subsubsection-level-extent" id="DOS-Quoting">
<div class="nav-panel">
<p>
Up: <a href="#Quoting" accesskey="u" rel="up">Shell Quoting Issues</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Quoting-in-MS_002dWindows-Batch-Files"><span>1.1.6.1 Quoting in MS-Windows Batch Files<a class="copiable-link" href="#Quoting-in-MS_002dWindows-Batch-Files"> &para;</a></span></h4>


<p>Although this Web page generally only worries about POSIX systems and the
POSIX shell, the following issue arises often enough for many users that
it is worth addressing.
</p>
<a class="index-entry-id" id="index-Brink_002c-Jeroen"></a>
<p>The &ldquo;shells&rdquo; on Microsoft Windows systems use the double-quote
character for quoting, and make it difficult or impossible to include an
escaped double-quote character in a command-line script.  The following
example, courtesy of Jeroen Brink, shows how to escape the double quotes
from this one liner script that prints all lines in a file surrounded by
double quotes:
</p>
<div class="example">
<pre class="example-preformatted">{ print &quot;\&quot;&quot; $0 &quot;\&quot;&quot; }
</pre></div>

<p>In an MS-Windows command-line the one-liner script above may be passed as
follows:
</p>
<div class="example">
<pre class="example-preformatted">gawk &quot;{ print \&quot;\042\&quot; $0 \&quot;\042\&quot; }&quot; <var class="var">file</var>
</pre></div>

<p>In this example the &lsquo;<samp class="samp">\042</samp>&rsquo; is the octal code for a double-quote;
<code class="command">gawk</code> converts it into a real double-quote for output by
the <code class="code">print</code> statement.
</p>
<p>In MS-Windows escaping double-quotes is a little tricky because you use
backslashes to escape double-quotes, but backslashes themselves are not
escaped in the usual way; indeed they are either duplicated or not,
depending upon whether there is a subsequent double-quote.  The MS-Windows
rule for double-quoting a string is the following:
</p>
<ol class="enumerate">
<li> For each double quote in the original string, let <var class="var">N</var> be the number
of backslash(es) before it, <var class="var">N</var> might be zero. Replace these <var class="var">N</var>
backslash(es) by <em class="math">2*<var class="var">N</var>+1</em> backslash(es)

</li><li> Let <var class="var">N</var> be the number of backslash(es) tailing the original string,
<var class="var">N</var> might be zero. Replace these <var class="var">N</var> backslash(es) by
<em class="math">2*<var class="var">N</var></em> backslash(es)

</li><li> Surround the resulting string by double-quotes.
</li></ol>

<p>So to double-quote the one-liner script &lsquo;<samp class="samp">{ print &quot;\&quot;&quot; $0 &quot;\&quot;&quot; }</samp>&rsquo;
from the previous example you would do it this way:
</p>
<div class="example">
<pre class="example-preformatted">gawk &quot;{ print \&quot;\\\&quot;\&quot; $0 \&quot;\\\&quot;\&quot; }&quot; <var class="var">file</var>
</pre></div>

<p>However, the use of &lsquo;<samp class="samp">\042</samp>&rsquo; instead of &lsquo;<samp class="samp">\\\&quot;</samp>&rsquo; is also possible
and easier to read, because backslashes that are not followed by a
double-quote don&rsquo;t need duplication.
</p>
<hr>
</div>
</div>
</div>
<div class="section-level-extent" id="Sample-Data-Files">
<div class="nav-panel">
<p>
Next: <a href="#Very-Simple" accesskey="n" rel="next">Some Simple Examples</a>, Previous: <a href="#Running-gawk" accesskey="p" rel="prev">How to Run <code class="command">awk</code> Programs</a>, Up: <a href="#Getting-Started" accesskey="u" rel="up">Getting Started with <code class="command">awk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Data-files-for-the-Examples"><span>1.2 Data files for the Examples<a class="copiable-link" href="#Data-files-for-the-Examples"> &para;</a></span></h3>

<a class="index-entry-id" id="index-input-files-examples"></a>
<a class="index-entry-id" id="index-mail_002dlist-file"></a>
<p>Many of the examples in this Web page take their input from two sample
data files.  The first, <samp class="file">mail-list</samp>, represents a list of peoples&rsquo; names
together with their email addresses and information about those people.
The second data file, called <samp class="file">inventory-shipped</samp>, contains
information about monthly shipments.  In both files,
each line is considered to be one <em class="dfn">record</em>.
</p>
<p>In <samp class="file">mail-list</samp>, each record contains the name of a person,
his/her phone number, his/her email address, and a code for his/her relationship
with the author of the list.
The columns are aligned using spaces.
An &lsquo;<samp class="samp">A</samp>&rsquo; in the last column
means that the person is an acquaintance.  An &lsquo;<samp class="samp">F</samp>&rsquo; in the last
column means that the person is a friend.
An &lsquo;<samp class="samp">R</samp>&rsquo; means that the person is a relative:
</p>
<div class="example">
<pre class="example-preformatted">Amelia       555-5553     amelia.zodiacusque@gmail.com    F
Anthony      555-3412     anthony.asserturo@hotmail.com   A
Becky        555-7685     becky.algebrarum@gmail.com      A
Bill         555-1675     bill.drowning@hotmail.com       A
Broderick    555-0542     broderick.aliquotiens@yahoo.com R
Camilla      555-2912     camilla.infusarum@skynet.be     R
Fabius       555-1234     fabius.undevicesimus@ucb.edu    F
Julie        555-6699     julie.perscrutabor@skeeve.com   F
Martin       555-6480     martin.codicibus@hotmail.com    A
Samuel       555-3430     samuel.lanceolis@shu.edu        A
Jean-Paul    555-2127     jeanpaul.campanorum@nyu.edu     R
</pre></div>

<a class="index-entry-id" id="index-inventory_002dshipped-file"></a>
<p>The data file <samp class="file">inventory-shipped</samp> represents
information about shipments during the year.
Each record contains the month, the number
of green crates shipped, the number of red boxes shipped, the number of
orange bags shipped, and the number of blue packages shipped,
respectively.  There are 16 entries, covering the 12 months of last year
and the first four months of the current year.
An empty line separates the data for the two years:
</p>
<div class="example">
<pre class="example-preformatted">Jan  13  25  15 115
Feb  15  32  24 226
Mar  15  24  34 228
Apr  31  52  63 420
May  16  34  29 208
Jun  31  42  75 492
Jul  24  34  67 436
Aug  15  34  47 316
Sep  13  55  37 277
Oct  29  54  68 525
Nov  20  87  82 577
Dec  17  35  61 401

Jan  21  36  64 620
Feb  26  58  80 652
Mar  24  75  70 495
Apr  21  70  74 514
</pre></div>

<p>The sample files are included in the <code class="command">gawk</code> distribution,
in the directory <samp class="file">awklib/eg/data</samp>.
</p>
<hr>
</div>
<div class="section-level-extent" id="Very-Simple">
<div class="nav-panel">
<p>
Next: <a href="#Two-Rules" accesskey="n" rel="next">An Example with Two Rules</a>, Previous: <a href="#Sample-Data-Files" accesskey="p" rel="prev">Data files for the Examples</a>, Up: <a href="#Getting-Started" accesskey="u" rel="up">Getting Started with <code class="command">awk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Some-Simple-Examples"><span>1.3 Some Simple Examples<a class="copiable-link" href="#Some-Simple-Examples"> &para;</a></span></h3>

<p>The following command runs a simple <code class="command">awk</code> program that searches the
input file <samp class="file">mail-list</samp> for the character string &lsquo;<samp class="samp">li</samp>&rsquo; (a
grouping of characters is usually called a <em class="dfn">string</em>;
the term <em class="dfn">string</em> is based on similar usage in English, such
as &ldquo;a string of pearls&rdquo; or &ldquo;a string of cars in a train&rdquo;):
</p>
<div class="example">
<pre class="example-preformatted">awk '/li/ { print $0 }' mail-list
</pre></div>

<p>When lines containing &lsquo;<samp class="samp">li</samp>&rsquo; are found, they are printed because
&lsquo;<samp class="samp">print&nbsp;$0</samp>&rsquo;<!-- /@w --> means print the current line.  (Just &lsquo;<samp class="samp">print</samp>&rsquo; by
itself means the same thing, so we could have written that
instead.)
</p>
<p>You will notice that slashes (&lsquo;<samp class="samp">/</samp>&rsquo;) surround the string &lsquo;<samp class="samp">li</samp>&rsquo;
in the <code class="command">awk</code> program.  The slashes indicate that &lsquo;<samp class="samp">li</samp>&rsquo;
is the pattern to search for.  This type of pattern is called a
<em class="dfn">regular expression</em>, which is covered in more detail later
(see <a class="pxref" href="#Regexp">Regular Expressions</a>).
The pattern is allowed to match parts of words.
There are
single quotes around the <code class="command">awk</code> program so that the shell won&rsquo;t
interpret any of it as special shell characters.
</p>
<p>Here is what this program prints:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '/li/ { print $0 }' mail-list</kbd>
-| Amelia       555-5553     amelia.zodiacusque@gmail.com    F
-| Broderick    555-0542     broderick.aliquotiens@yahoo.com R
-| Julie        555-6699     julie.perscrutabor@skeeve.com   F
-| Samuel       555-3430     samuel.lanceolis@shu.edu        A
</pre></div>

<a class="index-entry-id" id="index-actions-default"></a>
<a class="index-entry-id" id="index-patterns-default"></a>
<p>In an <code class="command">awk</code> rule, either the pattern or the action can be omitted,
but not both.  If the pattern is omitted, then the action is performed
for <em class="emph">every</em> input line.  If the action is omitted, the default
action is to print all lines that match the pattern.
</p>
<a class="index-entry-id" id="index-actions-empty"></a>
<p>Thus, we could leave out the action (the <code class="code">print</code> statement and the
braces) in the previous example and the result would be the same:
<code class="command">awk</code> prints all lines matching the pattern &lsquo;<samp class="samp">li</samp>&rsquo;.  By comparison,
omitting the <code class="code">print</code> statement but retaining the braces makes an
empty action that does nothing (i.e., no lines are printed).
</p>
<a class="index-entry-id" id="index-awk-programs-one_002dline-examples"></a>
<p>Many practical <code class="command">awk</code> programs are just a line or two long.  Following is a
collection of useful, short programs to get you started.  Some of these
programs contain constructs that haven&rsquo;t been covered yet. (The description
of the program will give you a good idea of what is going on, but you&rsquo;ll
need to read the rest of the Web page to become an <code class="command">awk</code> expert!)
Most of the examples use a data file named <samp class="file">data</samp>.  This is just a
placeholder; if you use these programs yourself, substitute
your own file names for <samp class="file">data</samp>.
</p>
<a class="index-entry-id" id="index-ls-utility"></a>
<p>Some of the following examples use the output of &lsquo;<samp class="samp">ls&nbsp;-l</samp>&rsquo;<!-- /@w --> as input.
<code class="command">ls</code> is a system command that gives you a listing of the files in a
directory. With the <samp class="option">-l</samp> option, this listing includes each file&rsquo;s
size and the date the file was last modified. Its output looks like this:
</p>
<div class="example">
<pre class="example-preformatted">-rw-r--r--  1 arnold   user   1933 Nov  7 13:05 Makefile
-rw-r--r--  1 arnold   user  10809 Nov  7 13:03 awk.h
-rw-r--r--  1 arnold   user    983 Apr 13 12:14 awk.tab.h
-rw-r--r--  1 arnold   user  31869 Jun 15 12:20 awkgram.y
-rw-r--r--  1 arnold   user  22414 Nov  7 13:03 awk1.c
-rw-r--r--  1 arnold   user  37455 Nov  7 13:03 awk2.c
-rw-r--r--  1 arnold   user  27511 Dec  9 13:07 awk3.c
-rw-r--r--  1 arnold   user   7989 Nov  7 13:03 awk4.c
</pre></div>

<p>The first field contains read-write permissions, the second field contains
the number of links to the file, and the third field identifies the
file&rsquo;s owner.  The fourth field identifies the file&rsquo;s group.  The fifth
field contains the file&rsquo;s size in bytes.  The sixth, seventh, and eighth
fields contain the month, day, and time, respectively, that the file
was last modified.  Finally, the ninth field contains the file name.
</p>
<p>For future reference, note that there is often more than
one way to do things in <code class="command">awk</code>.  At some point, you may want
to look back at these examples and see if
you can come up with different ways to do the same things shown here:
</p>
<ul class="itemize mark-bullet">
<li>Print every line that is longer than 80 characters:

<div class="example">
<pre class="example-preformatted">awk 'length($0) &gt; 80' data
</pre></div>

<p>The sole rule has a relational expression as its pattern and has no
action&mdash;so it uses the default action, printing the record.
</p>
</li><li>Print the length of the longest input line:

<div class="example">
<div class="group"><pre class="example-preformatted">awk '{ if (length($0) &gt; max) max = length($0) }
     END { print max }' data
</pre></div></div>

<p>The code associated with <code class="code">END</code> executes after all
input has been read; it&rsquo;s the other side of the coin to <code class="code">BEGIN</code>.
</p>
</li><li><a class="index-entry-id" id="index-expand-utility"></a>
Print the length of the longest line in <samp class="file">data</samp>:

<div class="example">
<pre class="example-preformatted">expand data | awk '{ if (x &lt; length($0)) x = length($0) }
                   END { print &quot;maximum line length is &quot; x }'
</pre></div>

<p>This example differs slightly from the previous one:
the input is processed by the <code class="command">expand</code> utility to change TABs
into spaces, so the widths compared are actually the right-margin columns,
as opposed to the number of input characters on each line.
</p>
</li><li>Print every line that has at least one field:

<div class="example">
<pre class="example-preformatted">awk 'NF &gt; 0' data
</pre></div>

<p>This is an easy way to delete blank lines from a file (or rather, to
create a new file similar to the old file but from which the blank lines
have been removed).
</p>
</li><li>Print seven random numbers from 0 to 100, inclusive:

<div class="example">
<pre class="example-preformatted">awk 'BEGIN { for (i = 1; i &lt;= 7; i++)
                 print int(101 * rand()) }'
</pre></div>

</li><li>Print the total number of bytes used by <var class="var">files</var>:

<div class="example">
<pre class="example-preformatted">ls -l <var class="var">files</var> | awk '{ x += $5 }
                   END { print &quot;total bytes: &quot; x }'
</pre></div>

</li><li>Print the total number of kilobytes used by <var class="var">files</var>:

<div class="example">
<pre class="example-preformatted">ls -l <var class="var">files</var> | awk '{ x += $5 }
   END { print &quot;total K-bytes:&quot;, x / 1024 }'
</pre></div>

</li><li>Print a sorted list of the login names of all users:

<div class="example">
<pre class="example-preformatted">awk -F: '{ print $1 }' /etc/passwd | sort
</pre></div>

</li><li>Count the lines in a file:

<div class="example">
<pre class="example-preformatted">awk 'END { print NR }' data
</pre></div>

</li><li>Print the even-numbered lines in the data file:

<div class="example">
<pre class="example-preformatted">awk 'NR % 2 == 0' data
</pre></div>

<p>If you used the expression &lsquo;<samp class="samp">NR % 2 == 1</samp>&rsquo; instead,
the program would print the odd-numbered lines.
</p></li></ul>

<hr>
</div>
<div class="section-level-extent" id="Two-Rules">
<div class="nav-panel">
<p>
Next: <a href="#More-Complex" accesskey="n" rel="next">A More Complex Example</a>, Previous: <a href="#Very-Simple" accesskey="p" rel="prev">Some Simple Examples</a>, Up: <a href="#Getting-Started" accesskey="u" rel="up">Getting Started with <code class="command">awk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="An-Example-with-Two-Rules"><span>1.4 An Example with Two Rules<a class="copiable-link" href="#An-Example-with-Two-Rules"> &para;</a></span></h3>
<a class="index-entry-id" id="index-awk-programs-2"></a>

<p>The <code class="command">awk</code> utility reads the input files one line at a
time.  For each line, <code class="command">awk</code> tries the patterns of each rule.
If several patterns match, then several actions execute in the order in
which they appear in the <code class="command">awk</code> program.  If no patterns match, then
no actions run.
</p>
<p>After processing all the rules that match the line (and perhaps there are none),
<code class="command">awk</code> reads the next line.  (However,
see <a class="pxref" href="#Next-Statement">The <code class="code">next</code> Statement</a>
and also see <a class="pxref" href="#Nextfile-Statement">The <code class="code">nextfile</code> Statement</a>.)
This continues until the program reaches the end of the file.
For example, the following <code class="command">awk</code> program contains two rules:
</p>
<div class="example">
<pre class="example-preformatted">/12/  { print $0 }
/21/  { print $0 }
</pre></div>

<p>The first rule has the string &lsquo;<samp class="samp">12</samp>&rsquo; as the
pattern and &lsquo;<samp class="samp">print $0</samp>&rsquo; as the action.  The second rule has the
string &lsquo;<samp class="samp">21</samp>&rsquo; as the pattern and also has &lsquo;<samp class="samp">print $0</samp>&rsquo; as the
action.  Each rule&rsquo;s action is enclosed in its own pair of braces.
</p>
<p>This program prints every line that contains the string
&lsquo;<samp class="samp">12</samp>&rsquo; <em class="emph">or</em> the string &lsquo;<samp class="samp">21</samp>&rsquo;.  If a line contains both
strings, it is printed twice, once by each rule.
</p>
<p>This is what happens if we run this program on our two sample data files,
<samp class="file">mail-list</samp> and <samp class="file">inventory-shipped</samp>:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '/12/ { print $0 }</kbd>
&gt;      <kbd class="kbd">/21/ { print $0 }' mail-list inventory-shipped</kbd>
-| Anthony      555-3412     anthony.asserturo@hotmail.com   A
-| Camilla      555-2912     camilla.infusarum@skynet.be     R
-| Fabius       555-1234     fabius.undevicesimus@ucb.edu    F
-| Jean-Paul    555-2127     jeanpaul.campanorum@nyu.edu     R
-| Jean-Paul    555-2127     jeanpaul.campanorum@nyu.edu     R
-| Jan  21  36  64 620
-| Apr  21  70  74 514
</pre></div>

<p>Note how the line beginning with &lsquo;<samp class="samp">Jean-Paul</samp>&rsquo;
in <samp class="file">mail-list</samp> was printed twice, once for each rule.
</p>
<hr>
</div>
<div class="section-level-extent" id="More-Complex">
<div class="nav-panel">
<p>
Next: <a href="#Statements_002fLines" accesskey="n" rel="next"><code class="command">awk</code> Statements Versus Lines</a>, Previous: <a href="#Two-Rules" accesskey="p" rel="prev">An Example with Two Rules</a>, Up: <a href="#Getting-Started" accesskey="u" rel="up">Getting Started with <code class="command">awk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="A-More-Complex-Example"><span>1.5 A More Complex Example<a class="copiable-link" href="#A-More-Complex-Example"> &para;</a></span></h3>

<p>Now that we&rsquo;ve mastered some simple tasks, let&rsquo;s look at
what typical <code class="command">awk</code>
programs do.  This example shows how <code class="command">awk</code> can be used to
summarize, select, and rearrange the output of another utility.  It uses
features that haven&rsquo;t been covered yet, so don&rsquo;t worry if you don&rsquo;t
understand all the details:
</p>
<div class="example">
<pre class="example-preformatted">ls -l | awk '$6 == &quot;Nov&quot; { sum += $5 }
             END { print sum }'
</pre></div>

<a class="index-entry-id" id="index-ls-utility-1"></a>
<p>This command prints the total number of bytes in all the files in the
current directory that were last modified in November (of any year).
</p>
<p>As a reminder, the output of &lsquo;<samp class="samp">ls&nbsp;-l</samp>&rsquo;<!-- /@w --> gives you a listing of the
files in a directory, including each file&rsquo;s size and the date the file
was last modified.  The first field contains read-write permissions,
the second field contains the number of links to the file, and the
third field identifies the file&rsquo;s owner.  The fourth field identifies
the file&rsquo;s group.  The fifth field contains the file&rsquo;s size in bytes.
The sixth, seventh, and eighth fields contain the month, day, and time,
respectively, that the file was last modified.  Finally, the ninth field
contains the file name.
</p>
<a class="index-entry-id" id="index-initialization_002c-automatic"></a>
<p>The &lsquo;<samp class="samp">$6 == &quot;Nov&quot;</samp>&rsquo; in our <code class="command">awk</code> program is an expression that
tests whether the sixth field of the output from &lsquo;<samp class="samp">ls&nbsp;-l</samp>&rsquo;<!-- /@w -->
matches the string &lsquo;<samp class="samp">Nov</samp>&rsquo;.  Each time a line has the string
&lsquo;<samp class="samp">Nov</samp>&rsquo; for its sixth field, <code class="command">awk</code> performs the action
&lsquo;<samp class="samp">sum += $5</samp>&rsquo;.  This adds the fifth field (the file&rsquo;s size) to the variable
<code class="code">sum</code>.  As a result, when <code class="command">awk</code> has finished reading all the
input lines, <code class="code">sum</code> is the total of the sizes of the files whose
lines matched the pattern.  (This works because <code class="command">awk</code> variables
are automatically initialized to zero.)
</p>
<p>After the last line of output from <code class="command">ls</code> has been processed, the
<code class="code">END</code> rule executes and prints the value of <code class="code">sum</code>.
In this example, the value of <code class="code">sum</code> is 80600.
</p>
<p>These more advanced <code class="command">awk</code> techniques are covered in later
sections
(see <a class="pxref" href="#Action-Overview">Actions</a>).  Before you can move on to more
advanced <code class="command">awk</code> programming, you have to know how <code class="command">awk</code> interprets
your input and displays your output.  By manipulating fields and using
<code class="code">print</code> statements, you can produce some very useful and
impressive-looking reports.
</p>
<hr>
</div>
<div class="section-level-extent" id="Statements_002fLines">
<div class="nav-panel">
<p>
Next: <a href="#Other-Features" accesskey="n" rel="next">Other Features of <code class="command">awk</code></a>, Previous: <a href="#More-Complex" accesskey="p" rel="prev">A More Complex Example</a>, Up: <a href="#Getting-Started" accesskey="u" rel="up">Getting Started with <code class="command">awk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="awk-Statements-Versus-Lines"><span>1.6 <code class="command">awk</code> Statements Versus Lines<a class="copiable-link" href="#awk-Statements-Versus-Lines"> &para;</a></span></h3>
<a class="index-entry-id" id="index-line-breaks"></a>
<a class="index-entry-id" id="index-newlines"></a>

<p>Most often, each line in an <code class="command">awk</code> program is a separate statement or
separate rule, like this:
</p>
<div class="example">
<pre class="example-preformatted">awk '/12/  { print $0 }
     /21/  { print $0 }' mail-list inventory-shipped
</pre></div>

<a class="index-entry-id" id="index-gawk-newlines-in"></a>
<p>However, <code class="command">gawk</code> ignores newlines after any of the following
symbols and keywords:
</p>
<div class="example">
<pre class="example-preformatted">,    {    ?    :    ||    &amp;&amp;    do    else
</pre></div>

<p>A newline at any other point is considered the end of the
statement.<a class="footnote" id="DOCF9" href="#FOOT9"><sup>9</sup></a>
</p>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-continuing-lines-and"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-continuing-lines-and"></a>
<p>If you would like to split a single statement into two lines at a point
where a newline would terminate it, you can <em class="dfn">continue</em> it by ending the
first line with a backslash character (&lsquo;<samp class="samp">\</samp>&rsquo;).  The backslash must be
the final character on the line in order to be recognized as a continuation
character.  A backslash followed by a newline is allowed anywhere in the statement, even
in the middle of a string or regular expression.  For example:
</p>
<div class="example">
<pre class="example-preformatted">awk '/This regular expression is too long, so continue it\
 on the next line/ { print $1 }'
</pre></div>

<a class="index-entry-id" id="index-portability-backslash-continuation-and"></a>
<p>We have generally not used backslash continuation in our sample programs.
<code class="command">gawk</code> places no limit on the
length of a line, so backslash continuation is never strictly necessary;
it just makes programs more readable.  For this same reason, as well as
for clarity, we have kept most statements short in the programs
presented throughout the Web page.
</p>
<p>Backslash continuation is
most useful when your <code class="command">awk</code> program is in a separate source file
instead of entered from the command line.  You should also note that
many <code class="command">awk</code> implementations are more particular about where you
may use backslash continuation. For example, they may not allow you to
split a string constant using backslash continuation.  Thus, for maximum
portability of your <code class="command">awk</code> programs, it is best not to split your
lines in the middle of a regular expression or a string.
</p>
<a class="index-entry-id" id="index-csh-utility"></a>
<a class="index-entry-id" id="index-line-continuations-with-C-shell"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-continuing-lines-and-in-csh"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-continuing-lines-and-in-csh"></a>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> <em class="emph">Backslash continuation does not work as described
with the C shell.</em>  It works for <code class="command">awk</code> programs in files and
for one-shot programs, <em class="emph">provided</em> you are using a POSIX-compliant
shell, such as the Unix Bourne shell or Bash.  But the C shell behaves
differently!  There you must use two backslashes in a row, followed by
a newline.  Note also that when using the C shell, <em class="emph">every</em> newline
in your <code class="command">awk</code> program must be escaped with a backslash. To illustrate:
</p>
<div class="example">
<pre class="example-preformatted">% <kbd class="kbd">awk 'BEGIN { \</kbd>
? <kbd class="kbd">  print \\</kbd>
? <kbd class="kbd">      &quot;hello, world&quot; \</kbd>
? <kbd class="kbd">}'</kbd>
-| hello, world
</pre></div>

<p>Here, the &lsquo;<samp class="samp">%</samp>&rsquo; and &lsquo;<samp class="samp">?</samp>&rsquo; are the C shell&rsquo;s primary and secondary
prompts, analogous to the standard shell&rsquo;s &lsquo;<samp class="samp">$</samp>&rsquo; and &lsquo;<samp class="samp">&gt;</samp>&rsquo;.
</p>
<p>Compare the previous example to how it is done with a POSIX-compliant shell:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN {</kbd>
&gt;   <kbd class="kbd">print \</kbd>
&gt;       <kbd class="kbd">&quot;hello, world&quot;</kbd>
&gt; <kbd class="kbd">}'</kbd>
-| hello, world
</pre></div>
</blockquote>

<p><code class="command">awk</code> is a line-oriented language.  Each rule&rsquo;s action has to
begin on the same line as the pattern.  To have the pattern and action
on separate lines, you <em class="emph">must</em> use backslash continuation; there
is no other option.
</p>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-continuing-lines-and-comments-and"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-continuing-lines-and-comments-and"></a>
<a class="index-entry-id" id="index-commenting-backslash-continuation-and"></a>
<p>Another thing to keep in mind is that backslash continuation and
comments do not mix. As soon as <code class="command">awk</code> sees the &lsquo;<samp class="samp">#</samp>&rsquo; that
starts a comment, it ignores <em class="emph">everything</em> on the rest of the
line. For example:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { print &quot;dont panic&quot; # a friendly \</kbd>
&gt; <kbd class="kbd">                                   BEGIN rule</kbd>
&gt; <kbd class="kbd">}'</kbd>
error&rarr; gawk: cmd. line:2:                BEGIN rule
error&rarr; gawk: cmd. line:2:                ^ syntax error
</pre></div></div>

<p>In this case, it looks like the backslash would continue the comment onto the
next line. However, the backslash-newline combination is never even
noticed because it is &ldquo;hidden&rdquo; inside the comment. Thus, the
<code class="code">BEGIN</code> is noted as a syntax error.
</p>
<a class="index-entry-id" id="index-dark-corner-backslash-continuation-on-command-line"></a>
<a class="index-entry-id" id="index-dark-corner-command-line_002c-backslash-continuation-on"></a>
<p>Backslash continuation comes into play in an additional, unexpected situation.
Consider:
</p>
<div class="example">
<pre class="example-preformatted">gawk -F'\
a' '...'
</pre></div>

<p>This command line assigns a value to <code class="code">FS</code>. But what value?
There are several possibilities, and in fact different versions of
<code class="command">awk</code> do different things.  <code class="command">gawk</code> treats this as
if it were written:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN { FS = &quot;\
a&quot;
}
...
</pre></div>

<p>In short, the backslash and newline are removed, assigning <code class="code">&quot;a&quot;</code>
to <code class="code">FS</code>.  This same treatment applies to variable assignments
made with the <samp class="option">-v</samp> option (see <a class="pxref" href="#Options">Command-Line Options</a>)
and to regular command-line variable assignments (see <a class="pxref" href="#Assignment-Options">Assigning Variables on the Command Line</a>).
</p>
<p>If you&rsquo;re interested, see
<a class="uref" href="https://lists.gnu.org/archive/html/bug-gawk/2022-10/msg00025.html">https://lists.gnu.org/archive/html/bug-gawk/2022-10/msg00025.html</a>
for a source code patch that allows lines to be continued when inside
parentheses. This patch was not added to <code class="command">gawk</code> since it would
quietly decrease the portability of <code class="command">awk</code> programs.
</p>
<a class="index-entry-id" id="index-statements-multiple"></a>
<a class="index-entry-id" id="index-_003b-_0028semicolon_0029-separating-statements-in-actions"></a>
<a class="index-entry-id" id="index-semicolon-_0028_003b_0029-separating-statements-in-actions"></a>
<a class="index-entry-id" id="index-_003b-_0028semicolon_0029-separating-rules"></a>
<a class="index-entry-id" id="index-semicolon-_0028_003b_0029-separating-rules"></a>
<p>When <code class="command">awk</code> statements within one rule are short, you might want to put
more than one of them on a line.  This is accomplished by separating the statements
with a semicolon (&lsquo;<samp class="samp">;</samp>&rsquo;).
This also applies to the rules themselves.
Thus, the program shown at the start of this section
could also be written this way:
</p>
<div class="example">
<pre class="example-preformatted">/12/ { print $0 } ; /21/ { print $0 }
</pre></div>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> The requirement that states that rules on the same line must be
separated with a semicolon was not in the original <code class="command">awk</code>
language; it was added for consistency with the treatment of statements
within an action.
</p></blockquote>

<hr>
</div>
<div class="section-level-extent" id="Other-Features">
<div class="nav-panel">
<p>
Next: <a href="#When" accesskey="n" rel="next">When to Use <code class="command">awk</code></a>, Previous: <a href="#Statements_002fLines" accesskey="p" rel="prev"><code class="command">awk</code> Statements Versus Lines</a>, Up: <a href="#Getting-Started" accesskey="u" rel="up">Getting Started with <code class="command">awk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Other-Features-of-awk"><span>1.7 Other Features of <code class="command">awk</code><a class="copiable-link" href="#Other-Features-of-awk"> &para;</a></span></h3>

<a class="index-entry-id" id="index-variables"></a>
<p>The <code class="command">awk</code> language provides a number of predefined, or
<em class="dfn">built-in</em>, variables that your programs can use to get information
from <code class="command">awk</code>.  There are other variables your program can set
as well to control how <code class="command">awk</code> processes your data.
</p>
<p>In addition, <code class="command">awk</code> provides a number of built-in functions for doing
common computational and string-related operations.
<code class="command">gawk</code> provides built-in functions for working with timestamps,
performing bit manipulation, for runtime string translation (internationalization),
determining the type of a variable,
and array sorting.
</p>
<p>As we develop our presentation of the <code class="command">awk</code> language, we will introduce
most of the variables and many of the functions. They are described
systematically in <a class="ref" href="#Built_002din-Variables">Predefined Variables</a> and in
<a class="ref" href="#Built_002din">Built-in Functions</a>.
</p>
<hr>
</div>
<div class="section-level-extent" id="When">
<div class="nav-panel">
<p>
Next: <a href="#Intro-Summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Other-Features" accesskey="p" rel="prev">Other Features of <code class="command">awk</code></a>, Up: <a href="#Getting-Started" accesskey="u" rel="up">Getting Started with <code class="command">awk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="When-to-Use-awk"><span>1.8 When to Use <code class="command">awk</code><a class="copiable-link" href="#When-to-Use-awk"> &para;</a></span></h3>

<a class="index-entry-id" id="index-awk-uses-for-2"></a>
<p>Now that you&rsquo;ve seen some of what <code class="command">awk</code> can do,
you might wonder how <code class="command">awk</code> could be useful for you.  By using
utility programs, advanced patterns, field separators, arithmetic
statements, and other selection criteria, you can produce much more
complex output.  The <code class="command">awk</code> language is very useful for producing
reports from large amounts of raw data, such as summarizing information
from the output of other utility programs like <code class="command">ls</code>.
(See <a class="xref" href="#More-Complex">A More Complex Example</a>.)
</p>
<p>Programs written with <code class="command">awk</code> are usually much smaller than they would
be in other languages.  This makes <code class="command">awk</code> programs easy to compose and
use.  Often, <code class="command">awk</code> programs can be quickly composed at your keyboard,
used once, and thrown away.  Because <code class="command">awk</code> programs are interpreted, you
can avoid the (usually lengthy) compilation part of the typical
edit-compile-test-debug cycle of software development.
</p>
<a class="index-entry-id" id="index-Brian-Kernighan_0027s-awk"></a>
<p>Complex programs have been written in <code class="command">awk</code>, including a complete
retargetable assembler for
eight-bit microprocessors (see <a class="pxref" href="#Glossary">Glossary</a>, for more information),
and a microcode assembler for a special-purpose Prolog
computer.
The original <code class="command">awk</code>&rsquo;s capabilities were strained by tasks
of such complexity, but modern versions are more capable.
</p>
<a class="index-entry-id" id="index-awk-programs-complex"></a>
<p>If you find yourself writing <code class="command">awk</code> scripts of more than, say,
a few hundred lines, you might consider using a different programming
language.  The shell is good at string and pattern matching; in addition,
it allows powerful use of the system utilities.  Python offers a nice
balance between high-level ease of programming and access to system
facilities.<a class="footnote" id="DOCF10" href="#FOOT10"><sup>10</sup></a>
</p>
<hr>
</div>
<div class="section-level-extent" id="Intro-Summary">
<div class="nav-panel">
<p>
Previous: <a href="#When" accesskey="p" rel="prev">When to Use <code class="command">awk</code></a>, Up: <a href="#Getting-Started" accesskey="u" rel="up">Getting Started with <code class="command">awk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary"><span>1.9 Summary<a class="copiable-link" href="#Summary"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>Programs in <code class="command">awk</code> consist of <var class="var">pattern</var>&ndash;<var class="var">action</var> pairs.

</li><li>An <var class="var">action</var> without a <var class="var">pattern</var> always runs.  The default
<var class="var">action</var> for a pattern without one is &lsquo;<samp class="samp">{ print $0 }</samp>&rsquo;.

</li><li>Use either
&lsquo;<samp class="samp">awk '<var class="var">program</var>' <var class="var">files</var></samp>&rsquo;
or
&lsquo;<samp class="samp">awk -f <var class="var">program-file</var> <var class="var">files</var></samp>&rsquo;
to run <code class="command">awk</code>.

</li><li>You may use the special &lsquo;<samp class="samp">#!</samp>&rsquo; header line to create <code class="command">awk</code>
programs that are directly executable.

</li><li>Comments in <code class="command">awk</code> programs start with &lsquo;<samp class="samp">#</samp>&rsquo; and continue to
the end of the same line.

</li><li>Be aware of quoting issues when writing <code class="command">awk</code> programs as
part of a larger shell script (or MS-Windows batch file).

</li><li>You may use backslash continuation to continue a source line.
Lines are automatically continued after
a comma, open brace, question mark, colon,
&lsquo;<samp class="samp">||</samp>&rsquo;, &lsquo;<samp class="samp">&amp;&amp;</samp>&rsquo;, <code class="code">do</code>, and <code class="code">else</code>.
</li></ul>

<hr>
</div>
</div>
<div class="chapter-level-extent" id="Invoking-Gawk">
<div class="nav-panel">
<p>
Next: <a href="#Regexp" accesskey="n" rel="next">Regular Expressions</a>, Previous: <a href="#Getting-Started" accesskey="p" rel="prev">Getting Started with <code class="command">awk</code></a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Running-awk-and-gawk"><span>2 Running <code class="command">awk</code> and <code class="command">gawk</code><a class="copiable-link" href="#Running-awk-and-gawk"> &para;</a></span></h2>

<p>This chapter covers how to run <code class="command">awk</code>, both POSIX-standard
and <code class="command">gawk</code>-specific command-line options, and what
<code class="command">awk</code> and
<code class="command">gawk</code> do with nonoption arguments.
It then proceeds to cover how <code class="command">gawk</code> searches for source files,
reading standard input along with other files, <code class="command">gawk</code>&rsquo;s
environment variables, <code class="command">gawk</code>&rsquo;s exit status, using include files,
and obsolete and undocumented options and/or features.
</p>
<p>Many of the options and features described here are discussed in
more detail later in the Web page; feel free to skip over
things in this chapter that don&rsquo;t interest you right now.
</p>

<ul class="mini-toc">
<li><a href="#Command-Line" accesskey="1">Invoking <code class="command">awk</code></a></li>
<li><a href="#Options" accesskey="2">Command-Line Options</a></li>
<li><a href="#Other-Arguments" accesskey="3">Other Command-Line Arguments</a></li>
<li><a href="#Naming-Standard-Input" accesskey="4">Naming Standard Input</a></li>
<li><a href="#Environment-Variables" accesskey="5">The Environment Variables <code class="command">gawk</code> Uses</a></li>
<li><a href="#Exit-Status" accesskey="6"><code class="command">gawk</code>&rsquo;s Exit Status</a></li>
<li><a href="#Include-Files" accesskey="7">Including Other Files into Your Program</a></li>
<li><a href="#Loading-Shared-Libraries" accesskey="8">Loading Dynamic Extensions into Your Program</a></li>
<li><a href="#Obsolete" accesskey="9">Obsolete Options and/or Features</a></li>
<li><a href="#Undocumented">Undocumented Options and Features</a></li>
<li><a href="#Invoking-Summary">Summary</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Command-Line">
<div class="nav-panel">
<p>
Next: <a href="#Options" accesskey="n" rel="next">Command-Line Options</a>, Up: <a href="#Invoking-Gawk" accesskey="u" rel="up">Running <code class="command">awk</code> and <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Invoking-awk"><span>2.1 Invoking <code class="command">awk</code><a class="copiable-link" href="#Invoking-awk"> &para;</a></span></h3>
<a class="index-entry-id" id="index-command-line-invoking-awk-from"></a>
<a class="index-entry-id" id="index-awk-invoking"></a>
<a class="index-entry-id" id="index-arguments-command_002dline-invoking-awk"></a>
<a class="index-entry-id" id="index-options-command_002dline-invoking-awk"></a>

<p>There are two ways to run <code class="command">awk</code>&mdash;with an explicit program or with
one or more program files.  Here are templates for both of them; items
enclosed in [&hellip;] in these templates are optional:
</p>
<div class="display">
<pre class="display-preformatted"><code class="command">awk</code> [<var class="var">options</var>] <samp class="option">-f</samp> <var class="var">progfile</var> [<samp class="option">--</samp>] <var class="var">file</var> ...
<code class="command">awk</code> [<var class="var">options</var>] [<samp class="option">--</samp>] <code class="code">'<var class="var">program</var>'</code> <var class="var">file</var> ...
</pre></div>

<a class="index-entry-id" id="index-GNU-long-options"></a>
<a class="index-entry-id" id="index-long-options"></a>
<a class="index-entry-id" id="index-options-long"></a>
<p>In addition to traditional one-letter POSIX-style options, <code class="command">gawk</code> also
supports GNU long options.
</p>
<a class="index-entry-id" id="index-dark-corner-invoking-awk"></a>
<a class="index-entry-id" id="index-lint-checking-empty-programs"></a>
<p>It is possible to invoke <code class="command">awk</code> with an empty program:
</p>
<div class="example">
<pre class="example-preformatted">awk '' datafile1 datafile2
</pre></div>

<a class="index-entry-id" id="index-_002d_002dlint-option"></a>
<a class="index-entry-id" id="index-dark-corner-empty-programs"></a>
<p>Doing so makes little sense, though; <code class="command">awk</code> exits
silently when given an empty program.
(d.c.)
If <samp class="option">--lint</samp> has
been specified on the command line, <code class="command">gawk</code> issues a
warning that the program is empty.
</p>
<hr>
</div>
<div class="section-level-extent" id="Options">
<div class="nav-panel">
<p>
Next: <a href="#Other-Arguments" accesskey="n" rel="next">Other Command-Line Arguments</a>, Previous: <a href="#Command-Line" accesskey="p" rel="prev">Invoking <code class="command">awk</code></a>, Up: <a href="#Invoking-Gawk" accesskey="u" rel="up">Running <code class="command">awk</code> and <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Command_002dLine-Options"><span>2.2 Command-Line Options<a class="copiable-link" href="#Command_002dLine-Options"> &para;</a></span></h3>
<a class="index-entry-id" id="index-options-command_002dline"></a>
<a class="index-entry-id" id="index-command-line-options"></a>
<a class="index-entry-id" id="index-GNU-long-options-1"></a>
<a class="index-entry-id" id="index-options-long-1"></a>

<p>Options begin with a dash and consist of a single character.
GNU-style long options consist of two dashes and a keyword.
The keyword can be abbreviated, as long as the abbreviation allows the option
to be uniquely identified.  If the option takes an argument, either the
keyword is immediately followed by an equals sign (&lsquo;<samp class="samp">=</samp>&rsquo;) and the
argument&rsquo;s value, or the keyword and the argument&rsquo;s value are separated
by whitespace (spaces or TABs).
If a particular option with a value is given more than once, it is (usually)
the last value that counts.
</p>
<a class="index-entry-id" id="index-POSIX-awk-GNU-long-options-and"></a>
<p>Each long option for <code class="command">gawk</code> has a corresponding
POSIX-style short option.
The long and short options are
interchangeable in all contexts.
The following list describes options mandated by the POSIX standard:
</p>
<dl class="table">
<dt><a class="index-entry-id" id="index-_002d_002dfield_002dseparator-option"></a>
<a class="index-entry-id" id="index-FS-variable-_002d_002dfield_002dseparator-option-and"></a>
<a id="index-_002dF-option"></a><span><code class="code">-F <var class="var">fs</var></code><a class="copiable-link" href="#index-_002dF-option"> &para;</a></span></dt>
<dt><code class="code">--field-separator <var class="var">fs</var></code></dt>
<dd><p>Set the <code class="code">FS</code> variable to <var class="var">fs</var>
(see <a class="pxref" href="#Field-Separators">Specifying How Fields Are Separated</a>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dfile-option"></a>
<a class="index-entry-id" id="index-awk-programs-location-of"></a>
<a id="index-_002df-option-1"></a><span><code class="code">-f <var class="var">source-file</var></code><a class="copiable-link" href="#index-_002df-option-1"> &para;</a></span></dt>
<dt><code class="code">--file <var class="var">source-file</var></code></dt>
<dd><p>Read the <code class="command">awk</code> program source from <var class="var">source-file</var>
instead of in the first nonoption argument.
This option may be given multiple times; the <code class="command">awk</code>
program consists of the concatenation of the contents of
each specified <var class="var">source-file</var>.
</p>
<p>Files named with <samp class="option">-f</samp> are treated as if they had &lsquo;<samp class="samp">@namespace &quot;awk&quot;</samp>&rsquo;
at their beginning. See <a class="xref" href="#Changing-The-Namespace">Changing The Namespace</a>, for more information
on this advanced feature.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dassign-option"></a>
<a class="index-entry-id" id="index-variables-setting"></a>
<a id="index-_002dv-option"></a><span><code class="code">-v <var class="var">var</var>=<var class="var">val</var></code><a class="copiable-link" href="#index-_002dv-option"> &para;</a></span></dt>
<dt><code class="code">--assign <var class="var">var</var>=<var class="var">val</var></code></dt>
<dd><p>Set the variable <var class="var">var</var> to the value <var class="var">val</var> <em class="emph">before</em>
execution of the program begins.  Such variable values are available
inside the <code class="code">BEGIN</code> rule
(see <a class="pxref" href="#Other-Arguments">Other Command-Line Arguments</a>).
</p>
<p>The <samp class="option">-v</samp> option can only set one variable, but it can be used
more than once, setting another variable each time, like this:
&lsquo;<samp class="samp">awk -v&nbsp;foo=1<!-- /@w --> -v&nbsp;bar=2<!-- /@w --> &hellip;</samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-predefined-variables-_002dv-option_002c-setting-with"></a>
<a class="index-entry-id" id="index-variables-predefined-_002dv-option_002c-setting-with"></a>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> Using <samp class="option">-v</samp> to set the values of the built-in
variables may lead to surprising results.  <code class="command">awk</code> will reset the
values of those variables as it needs to, possibly ignoring any
initial value you may have given.
</p></blockquote>

</dd>
<dt><a id="index-_002dW-option"></a><span><code class="code">-W <var class="var">gawk-opt</var></code><a class="copiable-link" href="#index-_002dW-option"> &para;</a></span></dt>
<dd><p>Provide an implementation-specific option.
This is the POSIX convention for providing implementation-specific options.
These options
also have corresponding GNU-style long options.
Note that the long options may be abbreviated, as long as
the abbreviations remain unique.
The full list of <code class="command">gawk</code>-specific options is provided next.
</p>
</dd>
<dt><a id="index-command-line-options-end-of"></a><span><code class="code">--</code><a class="copiable-link" href="#index-command-line-options-end-of"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-options-command_002dline-end-of"></a>
<p>Signal the end of the command-line options.  The following arguments
are not treated as options even if they begin with &lsquo;<samp class="samp">-</samp>&rsquo;.  This
interpretation of <samp class="option">--</samp> follows the POSIX argument parsing
conventions.
</p>
<a class="index-entry-id" id="index-_002d-_0028hyphen_0029-file-names-beginning-with"></a>
<a class="index-entry-id" id="index-hyphen-_0028_002d_0029-file-names-beginning-with"></a>
<p>This is useful if you have file names that start with &lsquo;<samp class="samp">-</samp>&rsquo;,
or in shell scripts, if you have file names that will be specified
by the user that could start with &lsquo;<samp class="samp">-</samp>&rsquo;.
It is also useful for passing options on to the <code class="command">awk</code>
program; see <a class="ref" href="#Getopt-Function">Processing Command-Line Options</a>.
</p></dd>
</dl>

<p>The following list describes <code class="command">gawk</code>-specific options:
</p>
<dl class="table">
<dt><a class="index-entry-id" id="index-_002d_002dcharacters_002das_002dbytes-option"></a>
<a id="index-_002db-option"></a><span><samp class="option">-b</samp><a class="copiable-link" href="#index-_002db-option"> &para;</a></span></dt>
<dt><samp class="option">--characters-as-bytes</samp></dt>
<dd><p>Cause <code class="command">gawk</code> to treat all input data as single-byte characters.
In addition, all output written with <code class="code">print</code> or <code class="code">printf</code>
is treated as single-byte characters.
</p>
<p>Normally, <code class="command">gawk</code> follows the POSIX standard and attempts to process
its input data according to the current locale (see <a class="pxref" href="#Locales">Where You Are Makes a Difference</a>). This can often involve
converting multibyte characters into wide characters (internally), and
can lead to problems or confusion if the input data does not contain valid
multibyte characters. This option is an easy way to tell <code class="command">gawk</code>,
&ldquo;Hands off my data!&rdquo;
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dtraditional-option"></a>
<a class="index-entry-id" id="index-compatibility-mode-_0028gawk_0029-specifying"></a>
<a id="index-_002dc-option"></a><span><samp class="option">-c</samp><a class="copiable-link" href="#index-_002dc-option"> &para;</a></span></dt>
<dt><samp class="option">--traditional</samp></dt>
<dd><p>Specify <em class="dfn">compatibility mode</em>, in which the GNU extensions to
the <code class="command">awk</code> language are disabled, so that <code class="command">gawk</code> behaves just
like BWK <code class="command">awk</code>.
See <a class="xref" href="#POSIX_002fGNU">Extensions in <code class="command">gawk</code> Not in POSIX <code class="command">awk</code></a>,
which summarizes the extensions.
Also see
<a class="ref" href="#Compatibility-Mode">Downward Compatibility and Debugging</a>.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dcopyright-option"></a>
<a class="index-entry-id" id="index-GPL-_0028General-Public-License_0029-printing"></a>
<a id="index-_002dC-option"></a><span><samp class="option">-C</samp><a class="copiable-link" href="#index-_002dC-option"> &para;</a></span></dt>
<dt><samp class="option">--copyright</samp></dt>
<dd><p>Print the short version of the General Public License and then exit.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002ddump_002dvariables-option"></a>
<a class="index-entry-id" id="index-dump-all-variables-of-a-program"></a>
<a class="index-entry-id" id="index-awkvars_002eout-file"></a>
<a class="index-entry-id" id="index-files-awkvars_002eout"></a>
<a id="index-_002dd-option"></a><span><samp class="option">-d</samp>[<var class="var">file</var>]<a class="copiable-link" href="#index-_002dd-option"> &para;</a></span></dt>
<dt><samp class="option">--dump-variables</samp>[<code class="code">=</code><var class="var">file</var>]</dt>
<dd><a class="index-entry-id" id="index-variables-global-printing-list-of"></a>
<p>Print a sorted list of global variables, their types, and final values
to <var class="var">file</var>.  If no <var class="var">file</var> is provided, print this
list to a file named <samp class="file">awkvars.out</samp> in the current directory.
No space is allowed between the <samp class="option">-d</samp> and <var class="var">file</var>, if
<var class="var">file</var> is supplied.
</p>
<a class="index-entry-id" id="index-troubleshooting-typographical-errors_002c-global-variables"></a>
<p>Having a list of all global variables is a good way to look for
typographical errors in your programs.
You would also use this option if you have a large program with a lot of
functions, and you want to be sure that your functions don&rsquo;t
inadvertently use global variables that you meant to be local.
(This is a particularly easy mistake to make with simple variable
names like <code class="code">i</code>, <code class="code">j</code>, etc.)
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002ddebug-option"></a>
<a class="index-entry-id" id="index-awk-programs-debugging_002c-enabling"></a>
<a id="index-_002dD-option"></a><span><samp class="option">-D</samp>[<var class="var">file</var>]<a class="copiable-link" href="#index-_002dD-option"> &para;</a></span></dt>
<dt><samp class="option">--debug</samp>[<code class="code">=</code><var class="var">file</var>]</dt>
<dd><p>Enable debugging of <code class="command">awk</code> programs
(see <a class="pxref" href="#Debugging">Introduction to the <code class="command">gawk</code> Debugger</a>).
By default, the debugger reads commands interactively from the keyboard
(standard input).
The optional <var class="var">file</var> argument allows you to specify a file with a list
of commands for the debugger to execute noninteractively.
No space is allowed between the <samp class="option">-D</samp> and <var class="var">file</var>, if
<var class="var">file</var> is supplied.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dsource-option"></a>
<a class="index-entry-id" id="index-source-code-mixing"></a>
<a id="index-_002de-option"></a><span><samp class="option">-e</samp> <var class="var">program-text</var><a class="copiable-link" href="#index-_002de-option"> &para;</a></span></dt>
<dt><samp class="option">--source</samp> <var class="var">program-text</var></dt>
<dd><p>Provide program source code in the <var class="var">program-text</var>.
This option allows you to mix source code in files with source
code that you enter on the command line.
This is particularly useful
when you have library functions that you want to use from your command-line
programs (see <a class="pxref" href="#AWKPATH-Variable">The <code class="env">AWKPATH</code> Environment Variable</a>).
</p>
<p>Note that <code class="command">gawk</code> treats each string as if it ended with
a newline character (even if it doesn&rsquo;t). This makes building
the total program easier.
</p>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> Prior to version 5.0, there was
no requirement that each <var class="var">program-text</var>
be a full syntactic unit. I.e., the following worked:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -e 'BEGIN { a = 5 ;' -e 'print a }'</kbd>
-| 5
</pre></div>

<p>However, this is no longer true. If you have any scripts that
rely upon this feature, you should revise them.
</p>
<p>This is because each <var class="var">program-text</var> is treated as if it had
&lsquo;<samp class="samp">@namespace &quot;awk&quot;</samp>&rsquo; at its beginning. See <a class="xref" href="#Changing-The-Namespace">Changing The Namespace</a>,
for more information.
</p></blockquote>

</dd>
<dt><a class="index-entry-id" id="index-_002d_002dexec-option"></a>
<a class="index-entry-id" id="index-awk-programs-location-of-1"></a>
<a id="index-_002dE-option"></a><span><samp class="option">-E</samp> <var class="var">file</var><a class="copiable-link" href="#index-_002dE-option"> &para;</a></span></dt>
<dt><samp class="option">--exec</samp> <var class="var">file</var></dt>
<dd><a class="index-entry-id" id="index-CGI_002c-awk-scripts-for"></a>
<p>Similar to <samp class="option">-f</samp>, read <code class="command">awk</code> program text from <var class="var">file</var>.
There are two differences from <samp class="option">-f</samp>:
</p>
<ul class="itemize mark-bullet">
<li>This option terminates option processing; anything
else on the command line is passed on directly to the <code class="command">awk</code> program.

</li><li>Command-line variable assignments of the form
&lsquo;<samp class="samp"><var class="var">var</var>=<var class="var">value</var></samp>&rsquo; are disallowed.
</li></ul>

<p>This option is particularly necessary for World Wide Web CGI applications
that pass arguments through the URL; using this option prevents a malicious
(or other) user from passing in options, assignments, or <code class="command">awk</code> source
code (via <samp class="option">-e</samp>) to the CGI application.<a class="footnote" id="DOCF11" href="#FOOT11"><sup>11</sup></a>
This option should be used
with &lsquo;<samp class="samp">#!</samp>&rsquo; scripts (see <a class="pxref" href="#Executable-Scripts">Executable <code class="command">awk</code> Programs</a>), like so:
</p>
<div class="example">
<pre class="example-preformatted">#! /usr/local/bin/gawk -E

<var class="var">awk program here ...</var>
</pre></div>

</dd>
<dt><a class="index-entry-id" id="index-_002d_002dgen_002dpot-option"></a>
<a class="index-entry-id" id="index-portable-object-files-generating"></a>
<a id="index-_002dg-option"></a><span><samp class="option">-g</samp><a class="copiable-link" href="#index-_002dg-option"> &para;</a></span></dt>
<dt><samp class="option">--gen-pot</samp></dt>
<dd><a class="index-entry-id" id="index-files-portable-object-generating"></a>
<p>Analyze the source program and
generate a GNU <code class="command">gettext</code> portable object template file on standard
output for all string constants that have been marked for translation.
See <a class="xref" href="#Internationalization">Internationalization with <code class="command">gawk</code></a>,
for information about this option.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dhelp-option"></a>
<a class="index-entry-id" id="index-GNU-long-options-printing-list-of"></a>
<a id="index-_002dh-option"></a><span><samp class="option">-h</samp><a class="copiable-link" href="#index-_002dh-option"> &para;</a></span></dt>
<dt><samp class="option">--help</samp></dt>
<dd><a class="index-entry-id" id="index-options-printing-list-of"></a>
<a class="index-entry-id" id="index-printing-list-of-options"></a>
<p>Print a &ldquo;usage&rdquo; message summarizing the short- and long-style options
that <code class="command">gawk</code> accepts and then exit.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dinclude-option"></a>
<a class="index-entry-id" id="index-awk-programs-location-of-2"></a>
<a id="index-_002di-option"></a><span><samp class="option">-i</samp> <var class="var">source-file</var><a class="copiable-link" href="#index-_002di-option"> &para;</a></span></dt>
<dt><samp class="option">--include</samp> <var class="var">source-file</var></dt>
<dd><p>Read an <code class="command">awk</code> source library from <var class="var">source-file</var>.  This option
is completely equivalent to using the <code class="code">@include</code> directive inside
your program.  It is very similar to the <samp class="option">-f</samp> option,
but there are two important differences.  First, when <samp class="option">-i</samp> is
used, the program source is not loaded if it has been previously
loaded, whereas with <samp class="option">-f</samp>, <code class="command">gawk</code> always loads the file.
Second, because this option is intended to be used with code libraries,
<code class="command">gawk</code> does not recognize such files as constituting main program
input.  Thus, after processing an <samp class="option">-i</samp> argument, <code class="command">gawk</code>
still expects to find the main source code via the <samp class="option">-f</samp> option
or on the command line.
</p>
<p>Files named with <samp class="option">-i</samp> are treated as if they had &lsquo;<samp class="samp">@namespace &quot;awk&quot;</samp>&rsquo;
at their beginning.  See <a class="xref" href="#Changing-The-Namespace">Changing The Namespace</a>, for more information.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dtrace-option"></a>
<a class="index-entry-id" id="index-trace_002c-internal-instructions"></a>
<a class="index-entry-id" id="index-instructions_002c-trace-of-internal"></a>
<a class="index-entry-id" id="index-op_002dcodes_002c-trace-of-internal"></a>
<a id="index-_002dI-option"></a><span><samp class="option">-I</samp><a class="copiable-link" href="#index-_002dI-option"> &para;</a></span></dt>
<dt><samp class="option">--trace</samp></dt>
<dd><p>Print the internal byte code names as they are executed when running
the program. The trace is printed to standard error. Each &ldquo;op code&rdquo;
is preceded by a <code class="code">+</code>
sign in the output.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dcsv-option"></a>
<a class="index-entry-id" id="index-comma-separated-values-_0028CSV_0029-data-_002dk-option"></a>
<a id="index-_002dk-option"></a><span><samp class="option">-k</samp><a class="copiable-link" href="#index-_002dk-option"> &para;</a></span></dt>
<dt><samp class="option">--csv</samp></dt>
<dd><a class="index-entry-id" id="index-comma-separated-values-_0028CSV_0029-data-_002d_002dcsv-option"></a>
<a class="index-entry-id" id="index-CSV-_0028comma-separated-values_0029-data-_002dk-option"></a>
<a class="index-entry-id" id="index-CSV-_0028comma-separated-values_0029-data-_002d_002dcsv-option"></a>
<p>Enable special processing for files with comma separated values
(CSV). See <a class="xref" href="#Comma-Separated-Fields">Working With Comma Separated Value Files</a>.
This option cannot be used with <samp class="option">--posix</samp>. Attempting to do
causes a fatal error.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dload-option"></a>
<a class="index-entry-id" id="index-loading-extensions"></a>
<a class="index-entry-id" id="index-AWKLIBPATH-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-AWKLIBPATH"></a>
<a id="index-_002dl-option"></a><span><samp class="option">-l</samp> <var class="var">ext</var><a class="copiable-link" href="#index-_002dl-option"> &para;</a></span></dt>
<dt><samp class="option">--load</samp> <var class="var">ext</var></dt>
<dd><p>Load a dynamic extension named <var class="var">ext</var>. Extensions
are stored as system shared libraries.
This option searches for the library using the <code class="env">AWKLIBPATH</code>
environment variable.  The correct library suffix for your platform will be
supplied by default, so it need not be specified in the extension name.
The extension initialization routine should be named <code class="code">dl_load()</code>.
An alternative is to use the <code class="code">@load</code> keyword inside the program to load
a shared library.  This advanced feature is described in detail in <a class="ref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dlint-option-1"></a>
<a class="index-entry-id" id="index-lint-checking-issuing-warnings"></a>
<a id="index-_002dl-option-1"></a><span><samp class="option">-L</samp>[<var class="var">value</var>]<a class="copiable-link" href="#index-_002dl-option-1"> &para;</a></span></dt>
<dt><samp class="option">--lint</samp>[<code class="code">=</code><var class="var">value</var>]</dt>
<dd><a class="index-entry-id" id="index-warnings_002c-issuing"></a>
<p>Warn about constructs that are dubious or nonportable to
other <code class="command">awk</code> implementations.
No space is allowed between the <samp class="option">-L</samp> and <var class="var">value</var>, if
<var class="var">value</var> is supplied.
Some warnings are issued when <code class="command">gawk</code> first reads your program.  Others
are issued at runtime, as your program executes. The optional
argument may be one of the following:
</p>
<dl class="table">
<dt><code class="code">fatal</code></dt>
<dd><p>Cause lint warnings become fatal errors.
This may be drastic, but its use will certainly encourage the
development of cleaner <code class="command">awk</code> programs.
</p>
</dd>
<dt><code class="code">invalid</code></dt>
<dd><p>Only issue warnings about things
that are actually invalid are issued. (This is not fully implemented yet.)
</p>
</dd>
<dt><code class="code">no-ext</code></dt>
<dd><p>Disable warnings about <code class="command">gawk</code> extensions.
</p></dd>
</dl>

<p>Some warnings are only printed once, even if the dubious constructs they
warn about occur multiple times in your <code class="command">awk</code> program.  Thus,
when eliminating problems pointed out by <samp class="option">--lint</samp>, you should take
care to search for all occurrences of each inappropriate construct. As
<code class="command">awk</code> programs are usually short, doing so is not burdensome.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dbignum-option"></a>
<a id="index-_002dM-option"></a><span><samp class="option">-M</samp><a class="copiable-link" href="#index-_002dM-option"> &para;</a></span></dt>
<dt><samp class="option">--bignum</samp></dt>
<dd><p>Select arbitrary-precision arithmetic on numbers. This option has no effect
if <code class="command">gawk</code> is not compiled to use the GNU MPFR and MP libraries
(see <a class="pxref" href="#Arbitrary-Precision-Arithmetic">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a>).
</p>
<p>As of version 5.2,
the arbitrary precision arithmetic features in <code class="command">gawk</code>
are &ldquo;on parole.&rdquo;
The primary maintainer is no longer willing to support this feature,
but another member of the development team has stepped up to take it over.
As long as this situation remains stable, MPFR will be supported. If it
changes, the MPFR support will be removed from <code class="command">gawk</code>.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dnon_002ddecimal_002ddata-option"></a>
<a class="index-entry-id" id="index-hexadecimal-values_002c-enabling-interpretation-of"></a>
<a class="index-entry-id" id="index-octal-values_002c-enabling-interpretation-of"></a>
<a class="index-entry-id" id="index-troubleshooting-_002d_002dnon_002ddecimal_002ddata-option"></a>
<a id="index-_002dn-option"></a><span><samp class="option">-n</samp><a class="copiable-link" href="#index-_002dn-option"> &para;</a></span></dt>
<dt><samp class="option">--non-decimal-data</samp></dt>
<dd><p>Enable automatic interpretation of octal and hexadecimal
values in input data
(see <a class="pxref" href="#Nondecimal-Data">Allowing Nondecimal Input Data</a>).
</p>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> This option can severely break old programs.  Use with care.  Also note
that this option may disappear in a future version of <code class="command">gawk</code>.
</p></blockquote>

</dd>
<dt><a class="index-entry-id" id="index-_002d_002duse_002dlc_002dnumeric-option"></a>
<a id="index-_002dN-option"></a><span><samp class="option">-N</samp><a class="copiable-link" href="#index-_002dN-option"> &para;</a></span></dt>
<dt><samp class="option">--use-lc-numeric</samp></dt>
<dd><p>Force the use of the locale&rsquo;s decimal point character
when parsing numeric input data (see <a class="pxref" href="#Locales">Where You Are Makes a Difference</a>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dpretty_002dprint-option"></a>
<a class="index-entry-id" id="index-pretty-printing"></a>
<a id="index-_002do-option"></a><span><samp class="option">-o</samp>[<var class="var">file</var>]<a class="copiable-link" href="#index-_002do-option"> &para;</a></span></dt>
<dt><samp class="option">--pretty-print</samp>[<code class="code">=</code><var class="var">file</var>]</dt>
<dd><p>Enable pretty-printing of <code class="command">awk</code> programs.
Implies <samp class="option">--no-optimize</samp>.
By default, the output program is created in a file named <samp class="file">awkprof.out</samp>
(see <a class="pxref" href="#Profiling">Profiling Your <code class="command">awk</code> Programs</a>).
The optional <var class="var">file</var> argument allows you to specify a different
file name for the output.
No space is allowed between the <samp class="option">-o</samp> and <var class="var">file</var>, if
<var class="var">file</var> is supplied.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> In the past, this option would also execute your program.
This is no longer the case.
</p></blockquote>

</dd>
<dt><a class="index-entry-id" id="index-_002dO-option"></a>
<a id="index-_002d_002doptimize-option"></a><span><samp class="option">-O</samp><a class="copiable-link" href="#index-_002d_002doptimize-option"> &para;</a></span></dt>
<dt><samp class="option">--optimize</samp></dt>
<dd><p>Enable <code class="command">gawk</code>&rsquo;s default optimizations on the internal
representation of the program.  At the moment, this includes just simple
constant folding.
</p>
<p>Optimization is enabled by default.
This option remains primarily for backwards compatibility. However, it may
be used to cancel the effect of an earlier <samp class="option">-s</samp> option
(see later in this list).
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dprofile-option"></a>
<a class="index-entry-id" id="index-awk-profiling_002c-enabling"></a>
<a id="index-_002dp-option"></a><span><samp class="option">-p</samp>[<var class="var">file</var>]<a class="copiable-link" href="#index-_002dp-option"> &para;</a></span></dt>
<dt><samp class="option">--profile</samp>[<code class="code">=</code><var class="var">file</var>]</dt>
<dd><p>Enable profiling of <code class="command">awk</code> programs
(see <a class="pxref" href="#Profiling">Profiling Your <code class="command">awk</code> Programs</a>).
Implies <samp class="option">--no-optimize</samp>.
By default, profiles are created in a file named <samp class="file">awkprof.out</samp>.
The optional <var class="var">file</var> argument allows you to specify a different
file name for the profile file.
No space is allowed between the <samp class="option">-p</samp> and <var class="var">file</var>, if
<var class="var">file</var> is supplied.
</p>
<p>The profile contains execution counts for each statement in the program
in the left margin, and function call counts for each function.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dposix-option"></a>
<a class="index-entry-id" id="index-POSIX-mode"></a>
<a class="index-entry-id" id="index-gawk-extensions_002c-disabling"></a>
<a id="index-_002dP-option"></a><span><samp class="option">-P</samp><a class="copiable-link" href="#index-_002dP-option"> &para;</a></span></dt>
<dt><samp class="option">--posix</samp></dt>
<dd><p>Operate in strict POSIX mode.  This disables all <code class="command">gawk</code>
extensions (just like <samp class="option">--traditional</samp>) and
disables all extensions not allowed by POSIX.
See <a class="xref" href="#Common-Extensions">Common Extensions Summary</a> for a summary of the extensions
in <code class="command">gawk</code> that are disabled by this option.
Also,
the following additional
restrictions apply:
</p>
<ul class="itemize mark-bullet">
<li>
<a class="index-entry-id" id="index-newlines-1"></a>
<a class="index-entry-id" id="index-whitespace-newlines-as"></a>
</li><li>Newlines are not allowed after &lsquo;<samp class="samp">?</samp>&rsquo; or &lsquo;<samp class="samp">:</samp>&rsquo;
(see <a class="pxref" href="#Conditional-Exp">Conditional Expressions</a>).


<a class="index-entry-id" id="index-FS-variable-TAB-character-as"></a>
</li><li>Specifying &lsquo;<samp class="samp">-Ft</samp>&rsquo; on the command line does not set the value
of <code class="code">FS</code> to be a single TAB character
(see <a class="pxref" href="#Field-Separators">Specifying How Fields Are Separated</a>).

</li><li><a class="index-entry-id" id="index-locale-decimal-point-character"></a>
<a class="index-entry-id" id="index-decimal-point-character_002c-locale-specific"></a>
The locale&rsquo;s decimal point character is used for parsing input
data (see <a class="pxref" href="#Locales">Where You Are Makes a Difference</a>).
</li></ul>

<a class="index-entry-id" id="index-_002d_002dtraditional-option-_002d_002dposix-option-and"></a>
<a class="index-entry-id" id="index-_002d_002dposix-option-_002d_002dtraditional-option-and"></a>
<p>If you supply both <samp class="option">--traditional</samp> and <samp class="option">--posix</samp> on the
command line, <samp class="option">--posix</samp> takes precedence. <code class="command">gawk</code>
issues a warning if both options are supplied.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dre_002dinterval-option"></a>
<a class="index-entry-id" id="index-regular-expressions-interval-expressions-and"></a>
<a id="index-_002dr-option"></a><span><samp class="option">-r</samp><a class="copiable-link" href="#index-_002dr-option"> &para;</a></span></dt>
<dt><samp class="option">--re-interval</samp></dt>
<dd><p>Allow interval expressions
(see <a class="pxref" href="#Regexp-Operators">Regular Expression Operators</a>)
in regexps.
This is now <code class="command">gawk</code>&rsquo;s default behavior.
Nevertheless, this option remains for backward compatibility.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002ds-option"></a>
<a id="index-_002d_002dno_002doptimize-option"></a><span><samp class="option">-s</samp><a class="copiable-link" href="#index-_002d_002dno_002doptimize-option"> &para;</a></span></dt>
<dt><samp class="option">--no-optimize</samp></dt>
<dd><p>Disable <code class="command">gawk</code>&rsquo;s default optimizations on the internal
representation of the program.
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dsandbox-option"></a>
<a class="index-entry-id" id="index-sandbox-mode"></a>
<a class="index-entry-id" id="index-ARGV-array"></a>
<a id="index-_002dS-option"></a><span><samp class="option">-S</samp><a class="copiable-link" href="#index-_002dS-option"> &para;</a></span></dt>
<dt><samp class="option">--sandbox</samp></dt>
<dd><p>Disable the <code class="code">system()</code> function,
input redirections with <code class="code">getline</code>,
output redirections with <code class="code">print</code> and <code class="code">printf</code>,
and dynamic extensions.
Also, disallow adding file names to <code class="code">ARGV</code> that were
not there when <code class="command">gawk</code> started running.
This is particularly useful when you want to run <code class="command">awk</code> scripts
from questionable sources and need to make sure the scripts
can&rsquo;t access your system (other than the specified input data files).
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dlint_002dold-option"></a>
<a id="index-_002dL-option"></a><span><samp class="option">-t</samp><a class="copiable-link" href="#index-_002dL-option"> &para;</a></span></dt>
<dt><samp class="option">--lint-old</samp></dt>
<dd><p>Warn about constructs that are not available in the original version of
<code class="command">awk</code> from Version 7 Unix
(see <a class="pxref" href="#V7_002fSVR3_002e1">Major Changes Between V7 and SVR3.1</a>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-_002d_002dversion-option"></a>
<a class="index-entry-id" id="index-gawk-version-of-printing-information-about"></a>
<a id="index-_002dV-option"></a><span><samp class="option">-V</samp><a class="copiable-link" href="#index-_002dV-option"> &para;</a></span></dt>
<dt><samp class="option">--version</samp></dt>
<dd><p>Print version information for this particular copy of <code class="command">gawk</code>.
This allows you to determine if your copy of <code class="command">gawk</code> is up to date
with respect to whatever the Free Software Foundation is currently
distributing.
It is also useful for bug reports
(see <a class="pxref" href="#Bugs">Reporting Problems and Bugs</a>).
</p>
<a class="index-entry-id" id="index-_002d-_0028hyphen_0029-_002d_002d-end-of-options-marker"></a>
<a class="index-entry-id" id="index-hyphen-_0028_002d_0029-_002d_002d-end-of-options-marker"></a>
</dd>
<dt><code class="code">--</code></dt>
<dd><p>Mark the end of all options.
Any command-line arguments following <code class="code">--</code> are placed in <code class="code">ARGV</code>,
even if they start with a minus sign.
</p></dd>
</dl>

<p>In compatibility mode,
as long as program text has been supplied,
any other options are flagged as invalid with a warning message but
are otherwise ignored.
</p>
<a class="index-entry-id" id="index-_002dF-option-_002dFt-sets-FS-to-TAB"></a>
<p>In compatibility mode, as a special case, if the value of <var class="var">fs</var> supplied
to the <samp class="option">-F</samp> option is &lsquo;<samp class="samp">t</samp>&rsquo;, then <code class="code">FS</code> is set to the TAB
character (<code class="code">&quot;\t&quot;</code>).  This is true only for <samp class="option">--traditional</samp> and not
for <samp class="option">--posix</samp>
(see <a class="pxref" href="#Field-Separators">Specifying How Fields Are Separated</a>).
</p>
<a class="index-entry-id" id="index-_002df-option-multiple-uses"></a>
<p>The <samp class="option">-f</samp> option may be used more than once on the command line.
If it is, <code class="command">awk</code> reads its program source from all of the named files, as
if they had been concatenated together into one big file.  This is
useful for creating libraries of <code class="command">awk</code> functions.  These functions
can be written once and then retrieved from a standard place, instead
of having to be included in each individual program.
The <samp class="option">-i</samp> option is similar in this regard.
(As mentioned in
<a class="ref" href="#Definition-Syntax">Function Definition Syntax</a>,
function names must be unique.)
</p>
<p>With standard <code class="command">awk</code>, library functions can still be used, even
if the program is entered at the keyboard,
by specifying &lsquo;<samp class="samp">-f /dev/tty</samp>&rsquo;.  After typing your program,
type <kbd class="kbd">Ctrl-d</kbd> (the end-of-file character) to terminate it.
(You may also use &lsquo;<samp class="samp">-f -</samp>&rsquo; to read program source from the standard
input, but then you will not be able to also use the standard input as a
source of data.)
</p>
<p>Because it is clumsy using the standard <code class="command">awk</code> mechanisms to mix
source file and command-line <code class="command">awk</code> programs, <code class="command">gawk</code>
provides the <samp class="option">-e</samp> option.  This does not require you to
preempt the standard input for your source code, and it allows you to easily
mix command-line and library source code (see <a class="pxref" href="#AWKPATH-Variable">The <code class="env">AWKPATH</code> Environment Variable</a>).
As with <samp class="option">-f</samp>, the <samp class="option">-e</samp> and <samp class="option">-i</samp>
options may also be used multiple times on the command line.
</p>
<a class="index-entry-id" id="index-_002de-option-1"></a>
<p>If no <samp class="option">-f</samp> option (or <samp class="option">-e</samp> option for <code class="command">gawk</code>)
is specified, then <code class="command">awk</code> uses the first nonoption command-line
argument as the text of the program source code.  Arguments on
the command line that follow the program text are entered into the
<code class="code">ARGV</code> array; <code class="command">awk</code> does <em class="emph">not</em> continue to parse the
command line looking for options.
</p>
<a class="index-entry-id" id="index-POSIXLY_005fCORRECT-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-POSIXLY_005fCORRECT"></a>
<a class="index-entry-id" id="index-lint-checking-POSIXLY_005fCORRECT-environment-variable"></a>
<a class="index-entry-id" id="index-POSIX-mode-1"></a>
<p>If the environment variable <code class="env">POSIXLY_CORRECT</code> exists,
then <code class="command">gawk</code> behaves in strict POSIX mode, exactly as if
you had supplied <samp class="option">--posix</samp>.
Many GNU programs look for this environment variable to suppress
extensions that conflict with POSIX, but <code class="command">gawk</code> behaves
differently: it suppresses all extensions, even those that do not
conflict with POSIX, and behaves in
strict POSIX mode. If <samp class="option">--lint</samp> is supplied on the command line
and <code class="command">gawk</code> turns on POSIX mode because of <code class="env">POSIXLY_CORRECT</code>,
then it issues a warning message indicating that POSIX
mode is in effect.
You would typically set this variable in your shell&rsquo;s startup file.
For a Bourne-compatible shell (such as Bash), you would add these
lines to the <samp class="file">.profile</samp> file in your home directory:
</p>
<div class="example">
<pre class="example-preformatted">POSIXLY_CORRECT=true
export POSIXLY_CORRECT
</pre></div>

<a class="index-entry-id" id="index-csh-utility-POSIXLY_005fCORRECT-environment-variable"></a>
<p>For a C shell-compatible
shell,<a class="footnote" id="DOCF12" href="#FOOT12"><sup>12</sup></a>
you would add this line to the <samp class="file">.login</samp> file in your home directory:
</p>
<div class="example">
<pre class="example-preformatted">setenv POSIXLY_CORRECT true
</pre></div>

<a class="index-entry-id" id="index-portability-POSIXLY_005fCORRECT-environment-variable"></a>
<p>Having <code class="env">POSIXLY_CORRECT</code> set is not recommended for daily use,
but it is good for testing the portability of your programs to other
environments.
</p>
<hr>
</div>
<div class="section-level-extent" id="Other-Arguments">
<div class="nav-panel">
<p>
Next: <a href="#Naming-Standard-Input" accesskey="n" rel="next">Naming Standard Input</a>, Previous: <a href="#Options" accesskey="p" rel="prev">Command-Line Options</a>, Up: <a href="#Invoking-Gawk" accesskey="u" rel="up">Running <code class="command">awk</code> and <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Other-Command_002dLine-Arguments"><span>2.3 Other Command-Line Arguments<a class="copiable-link" href="#Other-Command_002dLine-Arguments"> &para;</a></span></h3>
<a class="index-entry-id" id="index-command-line-arguments"></a>
<a class="index-entry-id" id="index-arguments-command_002dline"></a>

<p>Any additional arguments on the command line are normally treated as
input files to be processed in the order specified.   However, an
argument that has the form <code class="code"><var class="var">var</var>=<var class="var">value</var></code>, assigns
the value <var class="var">value</var> to the variable <var class="var">var</var>&mdash;it does not specify a
file at all.  (See <a class="ref" href="#Assignment-Options">Assigning Variables on the Command Line</a>.) In the following example,
&lsquo;<samp class="samp">count=1</samp>&rsquo; is a variable assignment, not a file name:
</p>
<div class="example">
<pre class="example-preformatted">awk -f program.awk file1 count=1 file2
</pre></div>

<p>As a side point, should you really need to have <code class="command">awk</code>
process a file named <samp class="file">count=1</samp> (or any file whose name looks like
a variable assignment), precede the file name with &lsquo;<samp class="samp">./</samp>&rsquo;, like so:
</p>
<div class="example">
<pre class="example-preformatted">awk -f program.awk file1 ./count=1 file2
</pre></div>

<a class="index-entry-id" id="index-gawk-ARGIND-variable-in"></a>
<a class="index-entry-id" id="index-ARGIND-variable-command_002dline-arguments"></a>
<a class="index-entry-id" id="index-ARGV-array_002c-indexing-into"></a>
<a class="index-entry-id" id="index-ARGC_002fARGV-variables-command_002dline-arguments"></a>
<a class="index-entry-id" id="index-gawk-PROCINFO-array-in"></a>
<p>All the command-line arguments are made available to your <code class="command">awk</code> program in the
<code class="code">ARGV</code> array (see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>).  Command-line options
and the program text (if present) are omitted from <code class="code">ARGV</code>.
All other arguments, including variable assignments, are
included.   As each element of <code class="code">ARGV</code> is processed, <code class="command">gawk</code>
sets <code class="code">ARGIND</code> to the index in <code class="code">ARGV</code> of the
current element.  (<code class="command">gawk</code> makes the full command line,
including program text and options, available in <code class="code">PROCINFO[&quot;argv&quot;]</code>;
see <a class="pxref" href="#Auto_002dset">Built-in Variables That Convey Information</a>.)
</p>
<p>Changing <code class="code">ARGC</code> and <code class="code">ARGV</code> in your <code class="command">awk</code> program lets
you control how <code class="command">awk</code> processes the input files; this is described
in more detail in <a class="ref" href="#ARGC-and-ARGV">Using <code class="code">ARGC</code> and <code class="code">ARGV</code></a>.
</p>
<a class="index-entry-id" id="index-input-files-variable-assignments-and"></a>
<a class="index-entry-id" id="index-variable-assignments-and-input-files"></a>
<p>The distinction between file name arguments and variable-assignment
arguments is made when <code class="command">awk</code> is about to open the next input file.
At that point in execution, it checks the file name to see whether
it is really a variable assignment; if so, <code class="command">awk</code> sets the variable
instead of reading a file.
</p>
<p>Therefore, the variables actually receive the given values after all
previously specified files have been read.  In particular, the values of
variables assigned in this fashion are <em class="emph">not</em> available inside a
<code class="code">BEGIN</code> rule
(see <a class="pxref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>),
because such rules are run before <code class="command">awk</code> begins scanning the argument list.
</p>
<a class="index-entry-id" id="index-dark-corner-escape-sequences"></a>
<p>The variable values given on the command line are processed for escape
sequences (see <a class="pxref" href="#Escape-Sequences">Escape Sequences</a>).
(d.c.)
</p>
<p>In some very early implementations of <code class="command">awk</code>, when a variable assignment
occurred before any file names, the assignment would happen <em class="emph">before</em>
the <code class="code">BEGIN</code> rule was executed.  <code class="command">awk</code>&rsquo;s behavior was thus
inconsistent; some command-line assignments were available inside the
<code class="code">BEGIN</code> rule, while others were not.  Unfortunately,
some applications came to depend
upon this &ldquo;feature.&rdquo;  When <code class="command">awk</code> was changed to be more consistent,
the <samp class="option">-v</samp> option was added to accommodate applications that depended
upon the old behavior.
</p>
<p>The variable assignment feature is most useful for assigning to variables
such as <code class="code">RS</code>, <code class="code">OFS</code>, and <code class="code">ORS</code>, which control input and
output formats, before scanning the data files.  It is also useful for
controlling state if multiple passes are needed over a data file.  For
example:
</p>
<a class="index-entry-id" id="index-files-multiple-passes-over"></a>
<div class="example">
<pre class="example-preformatted">awk 'pass == 1  { <var class="var">pass 1 stuff</var> }
     pass == 2  { <var class="var">pass 2 stuff</var> }' pass=1 mydata pass=2 mydata
</pre></div>

<p>Given the variable assignment feature, the <samp class="option">-F</samp> option for setting
the value of <code class="code">FS</code> is not
strictly necessary.  It remains for historical compatibility.
</p>
<a class="index-entry-id" id="index-sidebar-Quoting-Shell-Variables-On-The-awk-Command-Line"></a>
<table class="cartouche" border="1"><tr><th>
Quoting Shell Variables On The <code class="command">awk</code> Command Line</th></tr><tr><td>
<a class="index-entry-id" id="index-quoting-in-gawk-command-lines-1"></a>
<a class="index-entry-id" id="index-shell-quoting_002c-rules-for-1"></a>
<a class="index-entry-id" id="index-null-strings-in-gawk-arguments_002c-quoting-and-1"></a>

<p>Small <code class="command">awk</code> programs are often embedded in larger shell scripts,
so it&rsquo;s worthwhile to understand some shell basics. Consider the following:
</p>
<div class="example">
<pre class="example-preformatted">f=&quot;&quot;
awk '{ print(&quot;hi&quot;) }' $f
</pre></div>

<p>In this case, <code class="command">awk</code> reads from standard input instead of trying
to open any command line files. To the unwary, this looks like <code class="command">awk</code>
is hanging.
</p>
<p>However <code class="command">awk</code> doesn&rsquo;t see an explicit empty string. When a
variable expansion is the null string, <em class="emph">and</em> it&rsquo;s not quoted,
the shell simply removes it from the command line. To demonstrate:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">f=&quot;&quot;</kbd>
$ <kbd class="kbd">awk 'BEGIN { print ARGC }' $f</kbd>
-| 1
$ <kbd class="kbd">awk 'BEGIN { print ARGC }' &quot;$f&quot;</kbd>
-| 2
</pre></div>
</td></tr></table>

<hr>
</div>
<div class="section-level-extent" id="Naming-Standard-Input">
<div class="nav-panel">
<p>
Next: <a href="#Environment-Variables" accesskey="n" rel="next">The Environment Variables <code class="command">gawk</code> Uses</a>, Previous: <a href="#Other-Arguments" accesskey="p" rel="prev">Other Command-Line Arguments</a>, Up: <a href="#Invoking-Gawk" accesskey="u" rel="up">Running <code class="command">awk</code> and <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Naming-Standard-Input-1"><span>2.4 Naming Standard Input<a class="copiable-link" href="#Naming-Standard-Input-1"> &para;</a></span></h3>

<p>Often, you may wish to read standard input together with other files.
For example, you may wish to read one file, read standard input coming
from a pipe, and then read another file.
</p>
<p>The way to name the standard input, with all versions of <code class="command">awk</code>,
is to use a single, standalone minus sign or dash, &lsquo;<samp class="samp">-</samp>&rsquo;.  For example:
</p>
<div class="example">
<pre class="example-preformatted"><var class="var">some_command</var> | awk -f myprog.awk file1 - file2
</pre></div>

<p>Here, <code class="command">awk</code> first reads <samp class="file">file1</samp>, then it reads
the output of <var class="var">some_command</var>, and finally it reads
<samp class="file">file2</samp>.
</p>
<p>You may also use <code class="code">&quot;-&quot;</code> to name standard input when reading
files with <code class="code">getline</code> (see <a class="pxref" href="#Getline_002fFile">Using <code class="code">getline</code> from a File</a>).
And, you can even use <code class="code">&quot;-&quot;</code> with the <samp class="option">-f</samp> option
to read program source code from standard input (see <a class="pxref" href="#Options">Command-Line Options</a>).
</p>
<p>In addition, <code class="command">gawk</code> allows you to specify the special
file name <samp class="file">/dev/stdin</samp>, both on the command line and
with <code class="code">getline</code>.
Some other versions of <code class="command">awk</code> also support this, but it
is not standard.
(Some operating systems provide a <samp class="file">/dev/stdin</samp> file
in the filesystem; however, <code class="command">gawk</code> always processes
this file name itself.)
</p>
<hr>
</div>
<div class="section-level-extent" id="Environment-Variables">
<div class="nav-panel">
<p>
Next: <a href="#Exit-Status" accesskey="n" rel="next"><code class="command">gawk</code>&rsquo;s Exit Status</a>, Previous: <a href="#Naming-Standard-Input" accesskey="p" rel="prev">Naming Standard Input</a>, Up: <a href="#Invoking-Gawk" accesskey="u" rel="up">Running <code class="command">awk</code> and <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="The-Environment-Variables-gawk-Uses"><span>2.5 The Environment Variables <code class="command">gawk</code> Uses<a class="copiable-link" href="#The-Environment-Variables-gawk-Uses"> &para;</a></span></h3>
<a class="index-entry-id" id="index-environment-variables-used-by-gawk"></a>

<p>A number of environment variables influence how <code class="command">gawk</code>
behaves.
</p>

<ul class="mini-toc">
<li><a href="#AWKPATH-Variable" accesskey="1">The <code class="env">AWKPATH</code> Environment Variable</a></li>
<li><a href="#AWKLIBPATH-Variable" accesskey="2">The <code class="env">AWKLIBPATH</code> Environment Variable</a></li>
<li><a href="#Other-Environment-Variables" accesskey="3">Other Environment Variables</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="AWKPATH-Variable">
<div class="nav-panel">
<p>
Next: <a href="#AWKLIBPATH-Variable" accesskey="n" rel="next">The <code class="env">AWKLIBPATH</code> Environment Variable</a>, Up: <a href="#Environment-Variables" accesskey="u" rel="up">The Environment Variables <code class="command">gawk</code> Uses</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-AWKPATH-Environment-Variable"><span>2.5.1 The <code class="env">AWKPATH</code> Environment Variable<a class="copiable-link" href="#The-AWKPATH-Environment-Variable"> &para;</a></span></h4>
<a class="index-entry-id" id="index-AWKPATH-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-AWKPATH"></a>
<a class="index-entry-id" id="index-directories-searching-for-source-files"></a>
<a class="index-entry-id" id="index-search-paths-for-source-files"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-AWKPATH-environment-variable"></a>
<p>In most <code class="command">awk</code>
implementations, you must supply a precise pathname for each program
file, unless the file is in the current directory.
But with <code class="command">gawk</code>, if the file name supplied to the <samp class="option">-f</samp>
or <samp class="option">-i</samp> options
does not contain a directory separator &lsquo;<samp class="samp">/</samp>&rsquo;, then <code class="command">gawk</code> searches a list of
directories (called the <em class="dfn">search path</em>) one by one, looking for a
file with the specified name.
</p>
<p>The search path is a string consisting of directory names
separated by colons.<a class="footnote" id="DOCF13" href="#FOOT13"><sup>13</sup></a>
<code class="command">gawk</code> gets its search path from the
<code class="env">AWKPATH</code> environment variable.  If that variable does not exist,
or if it has an empty value,
<code class="command">gawk</code> uses a default path (described shortly).
</p>
<p>The search path feature is particularly helpful for building libraries
of useful <code class="command">awk</code> functions.  The library files can be placed in a
standard directory in the default path and then specified on
the command line with a short file name.  Otherwise, you would have to
type the full file name for each file.
</p>
<p>By using the <samp class="option">-i</samp> or <samp class="option">-f</samp> options, your command-line
<code class="command">awk</code> programs can use facilities in <code class="command">awk</code> library files
(see <a class="pxref" href="#Library-Functions">A Library of <code class="command">awk</code> Functions</a>).
Path searching is not done if <code class="command">gawk</code> is in compatibility mode.
This is true for both <samp class="option">--traditional</samp> and <samp class="option">--posix</samp>.
See <a class="xref" href="#Options">Command-Line Options</a>.
</p>
<p>If the source code file is not found after the initial search, the path is searched
again after adding the suffix &lsquo;<samp class="samp">.awk</samp>&rsquo; to the file name.
</p>
<p><code class="command">gawk</code>&rsquo;s path search mechanism is similar
to the shell&rsquo;s.
(See <a class="uref" href="https://www.gnu.org/software/bash/manual/"><cite class="cite">The Bourne-Again SHell manual</cite></a>.)
It treats a null entry in the path as indicating the current
directory.
(A null entry is indicated by starting or ending the path with a
colon or by placing two colons next to each other [&lsquo;<samp class="samp">::</samp>&rsquo;].)
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> To include the current directory in the path, either place <samp class="file">.</samp>
as an entry in the path or write a null entry in the path.
</p>
<p>Different past versions of <code class="command">gawk</code> would also look explicitly in
the current directory, either before or after the path search.  As of
version 4.1.2, this no longer happens; if you wish to look
in the current directory, you must include <samp class="file">.</samp> either as a separate
entry or as a null entry in the search path.
</p></blockquote>

<p>The default value for <code class="env">AWKPATH</code> is
&lsquo;<samp class="samp">.:/usr/local/share/awk</samp>&rsquo;.<a class="footnote" id="DOCF14" href="#FOOT14"><sup>14</sup></a>  Since <samp class="file">.</samp> is included at the beginning, <code class="command">gawk</code>
searches first in the current directory and then in <samp class="file">/usr/local/share/awk</samp>.
In practice, this means that you will rarely need to change the
value of <code class="env">AWKPATH</code>.
</p>
<p>See <a class="xref" href="#Shell-Startup-Files">Shell Startup Files</a>, for information on functions that help to
manipulate the <code class="env">AWKPATH</code> variable.
</p>
<p><code class="command">gawk</code> places the value of the search path that it used into
<code class="code">ENVIRON[&quot;AWKPATH&quot;]</code>. This provides access to the actual search
path value from within an <code class="command">awk</code> program.
</p>
<p>Although you can change <code class="code">ENVIRON[&quot;AWKPATH&quot;]</code> within your <code class="command">awk</code>
program, this has no effect on the running program&rsquo;s behavior.  This makes
sense: the <code class="env">AWKPATH</code> environment variable is used to find the program
source files.  Once your program is running, all the files have been
found, and <code class="command">gawk</code> no longer needs to use <code class="env">AWKPATH</code>.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="AWKLIBPATH-Variable">
<div class="nav-panel">
<p>
Next: <a href="#Other-Environment-Variables" accesskey="n" rel="next">Other Environment Variables</a>, Previous: <a href="#AWKPATH-Variable" accesskey="p" rel="prev">The <code class="env">AWKPATH</code> Environment Variable</a>, Up: <a href="#Environment-Variables" accesskey="u" rel="up">The Environment Variables <code class="command">gawk</code> Uses</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-AWKLIBPATH-Environment-Variable"><span>2.5.2 The <code class="env">AWKLIBPATH</code> Environment Variable<a class="copiable-link" href="#The-AWKLIBPATH-Environment-Variable"> &para;</a></span></h4>
<a class="index-entry-id" id="index-AWKLIBPATH-environment-variable-1"></a>
<a class="index-entry-id" id="index-environment-variables-AWKLIBPATH-1"></a>
<a class="index-entry-id" id="index-directories-searching-for-loadable-extensions"></a>
<a class="index-entry-id" id="index-search-paths-for-loadable-extensions"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-AWKLIBPATH-environment-variable"></a>

<p>The <code class="env">AWKLIBPATH</code> environment variable is similar to the <code class="env">AWKPATH</code>
variable, but it is used to search for loadable extensions (stored as
system shared libraries) specified with the <samp class="option">-l</samp> option rather
than for source files.  If the extension is not found, the path is
searched again after adding the appropriate shared library suffix for
the platform.  For example, on GNU/Linux systems, the suffix &lsquo;<samp class="samp">.so</samp>&rsquo;
is used.  The search path specified is also used for extensions loaded
via the <code class="code">@load</code> keyword (see <a class="pxref" href="#Loading-Shared-Libraries">Loading Dynamic Extensions into Your Program</a>).
</p>
<p>If <code class="env">AWKLIBPATH</code> does not exist in the environment, or if it has
an empty value, <code class="command">gawk</code> uses a default path; this
is typically &lsquo;<samp class="samp">/usr/local/lib/gawk</samp>&rsquo;, although it can vary depending
upon how <code class="command">gawk</code> was built.<a class="footnote" id="DOCF15" href="#FOOT15"><sup>15</sup></a>
</p>
<p>See <a class="xref" href="#Shell-Startup-Files">Shell Startup Files</a>, for information on functions that help to
manipulate the <code class="env">AWKLIBPATH</code> variable.
</p>
<p><code class="command">gawk</code> places the value of the search path that it used into
<code class="code">ENVIRON[&quot;AWKLIBPATH&quot;]</code>. This provides access to the actual search
path value from within an <code class="command">awk</code> program.
</p>
<p>Although you can change <code class="code">ENVIRON[&quot;AWKLIBPATH&quot;]</code> within your
<code class="command">awk</code> program, this has no effect on the running program&rsquo;s
behavior.  This makes sense: the <code class="env">AWKLIBPATH</code> environment variable
is used to find any requested extensions, and they are loaded before
the program starts to run.  Once your program is running, all the
extensions have been found, and <code class="command">gawk</code> no longer needs to use
<code class="env">AWKLIBPATH</code>.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Other-Environment-Variables">
<div class="nav-panel">
<p>
Previous: <a href="#AWKLIBPATH-Variable" accesskey="p" rel="prev">The <code class="env">AWKLIBPATH</code> Environment Variable</a>, Up: <a href="#Environment-Variables" accesskey="u" rel="up">The Environment Variables <code class="command">gawk</code> Uses</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Other-Environment-Variables-1"><span>2.5.3 Other Environment Variables<a class="copiable-link" href="#Other-Environment-Variables-1"> &para;</a></span></h4>

<p>A number of other environment variables affect <code class="command">gawk</code>&rsquo;s
behavior, but they are more specialized. Those in the following
list are meant to be used by regular users:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-GAWK_005fMSEC_005fSLEEP-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-GAWK_005fMSEC_005fSLEEP"></a>
</dd>
<dt><code class="env">GAWK_MSEC_SLEEP</code></dt>
<dd><p>Specifies the interval between connection retries,
in milliseconds. On systems that do not support
the <code class="code">usleep()</code> system call,
the value is rounded up to an integral number of seconds.
</p>

<a class="index-entry-id" id="index-GAWK_005fPERSIST_005fFILE-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-GAWK_005fPERSIST_005fFILE"></a>
</dd>
<dt><code class="env">GAWK_PERSIST_FILE</code></dt>
<dd><p>Specifies the backing file to use for persistent storage
of <code class="command">gawk</code>&rsquo;s variables and arrays.
See <a class="xref" href="#Persistent-Memory">Preserving Data Between Runs</a>.
</p>
<a class="index-entry-id" id="index-GAWK_005fREAD_005fTIMEOUT-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-GAWK_005fREAD_005fTIMEOUT"></a>
</dd>
<dt><code class="env">GAWK_READ_TIMEOUT</code></dt>
<dd><p>Specifies the time, in milliseconds, for <code class="command">gawk</code> to
wait for input before returning with an error.
See <a class="xref" href="#Read-Timeout">Reading Input with a Timeout</a>.
</p>
<a class="index-entry-id" id="index-GAWK_005fSOCK_005fRETRIES-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-GAWK_005fSOCK_005fRETRIES"></a>
</dd>
<dt><code class="env">GAWK_SOCK_RETRIES</code></dt>
<dd><p>Controls the number of times <code class="command">gawk</code> attempts to
retry a two-way TCP/IP (socket) connection before giving up.
See <a class="xref" href="#TCP_002fIP-Networking">Using <code class="command">gawk</code> for Network Programming</a>.
Note that when nonfatal I/O is enabled (see <a class="pxref" href="#Nonfatal">Enabling Nonfatal Output</a>),
<code class="command">gawk</code> only tries to open a TCP/IP socket once.
</p>
<a class="index-entry-id" id="index-PMA_005fVERBOSITY-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-PMA_005fVERBOSITY"></a>
</dd>
<dt><code class="env">PMA_VERBOSITY</code></dt>
<dd><p>Controls the verbosity of the persistent memory allocator.
See <a class="xref" href="#Persistent-Memory">Preserving Data Between Runs</a>.
</p>
<a class="index-entry-id" id="index-POSIXLY_005fCORRECT-environment-variable-1"></a>
<a class="index-entry-id" id="index-environment-variables-POSIXLY_005fCORRECT-1"></a>
</dd>
<dt><code class="env">POSIXLY_CORRECT</code></dt>
<dd><p>Causes <code class="command">gawk</code> to switch to POSIX-compatibility
mode, disabling all traditional and GNU extensions.
See <a class="xref" href="#Options">Command-Line Options</a>.
</p></dd>
</dl>

<p>The environment variables in the following list are meant
for use by the <code class="command">gawk</code> developers for testing and tuning.
They are subject to change. The variables are:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-AWKBUFSIZE-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-AWKBUFSIZE"></a>
</dd>
<dt><code class="env">AWKBUFSIZE</code></dt>
<dd><p>This variable only affects <code class="command">gawk</code> on POSIX-compliant systems.
With a value of &lsquo;<samp class="samp">exact</samp>&rsquo;, <code class="command">gawk</code> uses the size of each input
file as the size of the memory buffer to allocate for I/O. Otherwise,
the value should be a number, and <code class="command">gawk</code> uses that number as
the size of the buffer to allocate.  (When this variable is not set,
<code class="command">gawk</code> uses the smaller of the file&rsquo;s size and the &ldquo;default&rdquo;
blocksize, which is usually the filesystem&rsquo;s I/O blocksize.)
</p>
<a class="index-entry-id" id="index-AWK_005fHASH-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-AWK_005fHASH"></a>
</dd>
<dt><code class="env">AWK_HASH</code></dt>
<dd><p>If this variable exists with a value of &lsquo;<samp class="samp">gst</samp>&rsquo;, <code class="command">gawk</code>
switches to using the hash function from GNU Smalltalk for
managing arrays.
With a value of &lsquo;<samp class="samp">fnv1a</samp>&rsquo;, <code class="command">gawk</code> uses the
<a class="uref" href="http://www.isthe.com/chongo/tech/comp/fnv/index.html">FNV1-A hash function</a>.
These functions may be marginally faster than the standard function.
</p>
<a class="index-entry-id" id="index-AWKREADFUNC-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-AWKREADFUNC"></a>
</dd>
<dt><code class="env">AWKREADFUNC</code></dt>
<dd><p>If this variable exists, <code class="command">gawk</code> switches to reading source
files one line at a time, instead of reading in blocks. This exists
for debugging problems on filesystems on non-POSIX operating systems
where I/O is performed in records, not in blocks.
</p>
<a class="index-entry-id" id="index-GAWK_005fMSG_005fSRC-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-GAWK_005fMSG_005fSRC"></a>
</dd>
<dt><code class="env">GAWK_MSG_SRC</code></dt>
<dd><p>If this variable exists, <code class="command">gawk</code> includes the file name
and line number within the <code class="command">gawk</code> source code
from which warning and/or fatal messages
are generated.  Its purpose is to help isolate the source of a
message, as there are multiple places that produce the
same warning or error message.
</p>
<a class="index-entry-id" id="index-GAWK_005fLOCALE_005fDIR-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-GAWK_005fLOCALE_005fDIR"></a>
</dd>
<dt><code class="env">GAWK_LOCALE_DIR</code></dt>
<dd><p>Specifies the location of compiled message object files
for <code class="command">gawk</code> itself. This is passed to the <code class="code">bindtextdomain()</code>
function when <code class="command">gawk</code> starts up.
</p>
<a class="index-entry-id" id="index-GAWK_005fNO_005fDFA-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-GAWK_005fNO_005fDFA"></a>
</dd>
<dt><code class="env">GAWK_NO_DFA</code></dt>
<dd><p>If this variable exists, <code class="command">gawk</code> does not use the DFA regexp matcher
for &ldquo;does it match&rdquo; kinds of tests. This can cause <code class="command">gawk</code>
to be slower. Its purpose is to help isolate differences between the
two regexp matchers that <code class="command">gawk</code> uses internally. (There aren&rsquo;t
supposed to be differences, but occasionally theory and practice don&rsquo;t
coordinate with each other.)
</p>
<a class="index-entry-id" id="index-GAWK_005fSTACKSIZE-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-GAWK_005fSTACKSIZE"></a>
</dd>
<dt><code class="env">GAWK_STACKSIZE</code></dt>
<dd><p>This specifies the amount by which <code class="command">gawk</code> should grow its
internal evaluation stack, when needed.
</p>
<a class="index-entry-id" id="index-INT_005fCHAIN_005fMAX-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-INT_005fCHAIN_005fMAX"></a>
</dd>
<dt><code class="env">INT_CHAIN_MAX</code></dt>
<dd><p>This specifies intended maximum number of items <code class="command">gawk</code> will maintain on a
hash chain for managing arrays indexed by integers.
</p>
<a class="index-entry-id" id="index-STR_005fCHAIN_005fMAX-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-STR_005fCHAIN_005fMAX"></a>
</dd>
<dt><code class="env">STR_CHAIN_MAX</code></dt>
<dd><p>This specifies intended maximum number of items <code class="command">gawk</code> will maintain on a
hash chain for managing arrays indexed by strings.
</p>
<a class="index-entry-id" id="index-TIDYMEM-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-TIDYMEM"></a>
</dd>
<dt><code class="env">TIDYMEM</code></dt>
<dd><p>If this variable exists, <code class="command">gawk</code> uses the <code class="code">mtrace()</code> library
calls from the GNU C library to help track down possible memory leaks.
This cannot be used together with the persistent memory allocator.
</p></dd>
</dl>

<hr>
</div>
</div>
<div class="section-level-extent" id="Exit-Status">
<div class="nav-panel">
<p>
Next: <a href="#Include-Files" accesskey="n" rel="next">Including Other Files into Your Program</a>, Previous: <a href="#Environment-Variables" accesskey="p" rel="prev">The Environment Variables <code class="command">gawk</code> Uses</a>, Up: <a href="#Invoking-Gawk" accesskey="u" rel="up">Running <code class="command">awk</code> and <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="gawk_0027s-Exit-Status"><span>2.6 <code class="command">gawk</code>&rsquo;s Exit Status<a class="copiable-link" href="#gawk_0027s-Exit-Status"> &para;</a></span></h3>

<a class="index-entry-id" id="index-exit-status_002c-of-gawk"></a>
<p>If the <code class="code">exit</code> statement is used with a value
(see <a class="pxref" href="#Exit-Statement">The <code class="code">exit</code> Statement</a>), then <code class="command">gawk</code> exits with
the numeric value given to it.
</p>
<p>Otherwise, if there were no problems during execution,
<code class="command">gawk</code> exits with the value of the C constant
<code class="code">EXIT_SUCCESS</code>.  This is usually zero.
</p>
<p>If an error occurs, <code class="command">gawk</code> exits with the value of
the C constant <code class="code">EXIT_FAILURE</code>.  This is usually one.
</p>
<p>If <code class="command">gawk</code> exits because of a fatal error, the exit
status is two.  On non-POSIX systems, this value may be mapped
to <code class="code">EXIT_FAILURE</code>.
</p>
<hr>
</div>
<div class="section-level-extent" id="Include-Files">
<div class="nav-panel">
<p>
Next: <a href="#Loading-Shared-Libraries" accesskey="n" rel="next">Loading Dynamic Extensions into Your Program</a>, Previous: <a href="#Exit-Status" accesskey="p" rel="prev"><code class="command">gawk</code>&rsquo;s Exit Status</a>, Up: <a href="#Invoking-Gawk" accesskey="u" rel="up">Running <code class="command">awk</code> and <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Including-Other-Files-into-Your-Program"><span>2.7 Including Other Files into Your Program<a class="copiable-link" href="#Including-Other-Files-into-Your-Program"> &para;</a></span></h3>


<p>This section describes a feature that is specific to <code class="command">gawk</code>.
</p>
<a class="index-entry-id" id="index-_0040-_0028at_002dsign_0029-_0040include-directive"></a>
<a class="index-entry-id" id="index-at_002dsign-_0028_0040_0029-_0040include-directive"></a>
<a class="index-entry-id" id="index-file-inclusion_002c-_0040include-directive"></a>
<a class="index-entry-id" id="index-including-files_002c-_0040include-directive"></a>
<a class="index-entry-id" id="index-_0040include-directive"></a>
<a class="index-entry-id" id="index-AWKPATH-environment-variable-1"></a>
<a class="index-entry-id" id="index-environment-variables-AWKPATH-1"></a>
<p>The <code class="code">@include</code> keyword can be used to read external <code class="command">awk</code> source
files.  This gives you the ability to split large <code class="command">awk</code> source files
into smaller, more manageable pieces, and also lets you reuse common <code class="command">awk</code>
code from various <code class="command">awk</code> scripts.  In other words, you can group
together <code class="command">awk</code> functions used to carry out specific tasks
into external files. These files can be used just like function libraries,
using the <code class="code">@include</code> keyword in conjunction with the <code class="env">AWKPATH</code>
environment variable.  Note that source files may also be included
using the <samp class="option">-i</samp> option.
</p>
<p>Let&rsquo;s see an example.
We&rsquo;ll start with two (trivial) <code class="command">awk</code> scripts, namely
<samp class="file">test1</samp> and <samp class="file">test2</samp>. Here is the <samp class="file">test1</samp> script:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    print &quot;This is script test1.&quot;
}
</pre></div>

<p>and here is <samp class="file">test2</samp>:
</p>
<div class="example">
<pre class="example-preformatted">@include &quot;test1&quot;
BEGIN {
    print &quot;This is script test2.&quot;
}
</pre></div>

<p>Running <code class="command">gawk</code> with <samp class="file">test2</samp>
produces the following result:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f test2</kbd>
-| This is script test1.
-| This is script test2.
</pre></div>

<p><code class="command">gawk</code> runs the <samp class="file">test2</samp> script, which includes <samp class="file">test1</samp>
using the <code class="code">@include</code>
keyword.  So, to include external <code class="command">awk</code> source files, you just
use <code class="code">@include</code> followed by the name of the file to be included,
enclosed in double quotes.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> Keep in mind that this is a language construct and the file name cannot
be a string variable, but rather just a literal string constant in double quotes.
</p></blockquote>

<p>The files to be included may be nested; e.g., given a third
script, namely <samp class="file">test3</samp>:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">@include &quot;test2&quot;
BEGIN {
    print &quot;This is script test3.&quot;
}
</pre></div></div>

<p>Running <code class="command">gawk</code> with the <samp class="file">test3</samp> script produces the
following results:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f test3</kbd>
-| This is script test1.
-| This is script test2.
-| This is script test3.
</pre></div>

<p>The file name can, of course, be a pathname. For example:
</p>
<div class="example">
<pre class="example-preformatted">@include &quot;../io_funcs&quot;
</pre></div>

<p>and:
</p>
<div class="example">
<pre class="example-preformatted">@include &quot;/usr/awklib/network&quot;
</pre></div>

<p>are both valid. The <code class="env">AWKPATH</code> environment variable can be of great
value when using <code class="code">@include</code>. The same rules for the use
of the <code class="env">AWKPATH</code> variable in command-line file searches
(see <a class="pxref" href="#AWKPATH-Variable">The <code class="env">AWKPATH</code> Environment Variable</a>) apply to
<code class="code">@include</code> also.
</p>
<p>This is very helpful in constructing <code class="command">gawk</code> function libraries.
If you have a large script with useful, general-purpose <code class="command">awk</code>
functions, you can break it down into library files and put those files
in a special directory.  You can then include those &ldquo;libraries,&rdquo;
either by using the full pathnames of the files, or by setting the <code class="env">AWKPATH</code>
environment variable accordingly and then using <code class="code">@include</code> with
just the file part of the full pathname. Of course,
you can keep library files in more than one directory;
the more complex the working
environment is, the more directories you may need to organize the files
to be included.
</p>
<p>Given the ability to specify multiple <samp class="option">-f</samp> options, the
<code class="code">@include</code> mechanism is not strictly necessary.
However, the <code class="code">@include</code> keyword
can help you in constructing self-contained <code class="command">gawk</code> programs,
thus reducing the need for writing complex and tedious command lines.
In particular, <code class="code">@include</code> is very useful for writing CGI scripts
to be run from web pages.
</p>
<p>The <code class="code">@include</code> directive and the <samp class="option">-i</samp>/<samp class="option">--include</samp>
command line option are completely equivalent. An included program
source is not loaded if it has been previously loaded.
</p>
<p>The rules for finding a source file described in <a class="ref" href="#AWKPATH-Variable">The <code class="env">AWKPATH</code> Environment Variable</a> also
apply to files loaded with <code class="code">@include</code>.
</p>
<p>Finally, files included with <code class="code">@include</code>
are treated as if they had &lsquo;<samp class="samp">@namespace &quot;awk&quot;</samp>&rsquo;
at their beginning.  See <a class="xref" href="#Changing-The-Namespace">Changing The Namespace</a>, for more information.
</p>
<hr>
</div>
<div class="section-level-extent" id="Loading-Shared-Libraries">
<div class="nav-panel">
<p>
Next: <a href="#Obsolete" accesskey="n" rel="next">Obsolete Options and/or Features</a>, Previous: <a href="#Include-Files" accesskey="p" rel="prev">Including Other Files into Your Program</a>, Up: <a href="#Invoking-Gawk" accesskey="u" rel="up">Running <code class="command">awk</code> and <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Loading-Dynamic-Extensions-into-Your-Program"><span>2.8 Loading Dynamic Extensions into Your Program<a class="copiable-link" href="#Loading-Dynamic-Extensions-into-Your-Program"> &para;</a></span></h3>

<p>This section describes a feature that is specific to <code class="command">gawk</code>.
</p>
<a class="index-entry-id" id="index-_0040-_0028at_002dsign_0029-_0040load-directive"></a>
<a class="index-entry-id" id="index-at_002dsign-_0028_0040_0029-_0040load-directive"></a>
<a class="index-entry-id" id="index-loading-extensions-_0040load-directive"></a>
<a class="index-entry-id" id="index-extensions-loadable-loading_002c-_0040load-directive"></a>
<a class="index-entry-id" id="index-_0040load-directive"></a>
<a class="index-entry-id" id="index-AWKLIBPATH-environment-variable-2"></a>
<a class="index-entry-id" id="index-environment-variables-AWKLIBPATH-2"></a>
<p>The <code class="code">@load</code> keyword can be used to read external <code class="command">awk</code> extensions
(stored as system shared libraries).
This allows you to link in compiled code that may offer superior
performance and/or give you access to extended capabilities not supported
by the <code class="command">awk</code> language.  The <code class="env">AWKLIBPATH</code> variable is used to
search for the extension.  Using <code class="code">@load</code> is completely equivalent
to using the <samp class="option">-l</samp> command-line option.
</p>
<p>If the extension is not initially found in <code class="env">AWKLIBPATH</code>, another
search is conducted after appending the platform&rsquo;s default shared library
suffix to the file name.  For example, on GNU/Linux systems, the suffix
&lsquo;<samp class="samp">.so</samp>&rsquo; is used:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk '@load &quot;ordchr&quot;; BEGIN {print chr(65)}'</kbd>
-| A
</pre></div>

<p>This is equivalent to the following example:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">$ <kbd class="kbd">gawk -lordchr 'BEGIN {print chr(65)}'</kbd>
-| A
</pre></div></div>

<p>For command-line usage, the <samp class="option">-l</samp> option is more convenient,
but <code class="code">@load</code> is useful for embedding inside an <code class="command">awk</code> source file
that requires access to an extension.
</p>
<p><a class="ref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>, describes how to write extensions (in C or C++)
that can be loaded with either <code class="code">@load</code> or the <samp class="option">-l</samp> option.
It also describes the <code class="code">ordchr</code> extension.
</p>
<hr>
</div>
<div class="section-level-extent" id="Obsolete">
<div class="nav-panel">
<p>
Next: <a href="#Undocumented" accesskey="n" rel="next">Undocumented Options and Features</a>, Previous: <a href="#Loading-Shared-Libraries" accesskey="p" rel="prev">Loading Dynamic Extensions into Your Program</a>, Up: <a href="#Invoking-Gawk" accesskey="u" rel="up">Running <code class="command">awk</code> and <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Obsolete-Options-and_002for-Features"><span>2.9 Obsolete Options and/or Features<a class="copiable-link" href="#Obsolete-Options-and_002for-Features"> &para;</a></span></h3>


<a class="index-entry-id" id="index-options-deprecated"></a>
<a class="index-entry-id" id="index-features-deprecated"></a>
<a class="index-entry-id" id="index-obsolete-features"></a>
<p>This section describes features and/or command-line options from
previous releases of <code class="command">gawk</code> that either are not available in the
current version or are still supported but deprecated (meaning that
they will <em class="emph">not</em> be in a future release).
</p>



<p>As of
<code class="command">gawk</code> version 5.2.
the arbitrary precision arithmetic feature is &ldquo;on parole.&rdquo;
This feature is now being
supported by a volunteer in the development team and not by the primary
maintainer.  If this situation changes, then the feature will be removed.
For more information see <a class="ref" href="#MPFR-On-Parole">Arbitrary Precision Arithmetic is On Parole!</a>.
</p>
<hr>
</div>
<div class="section-level-extent" id="Undocumented">
<div class="nav-panel">
<p>
Next: <a href="#Invoking-Summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Obsolete" accesskey="p" rel="prev">Obsolete Options and/or Features</a>, Up: <a href="#Invoking-Gawk" accesskey="u" rel="up">Running <code class="command">awk</code> and <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Undocumented-Options-and-Features"><span>2.10 Undocumented Options and Features<a class="copiable-link" href="#Undocumented-Options-and-Features"> &para;</a></span></h3>
<a class="index-entry-id" id="index-undocumented-features"></a>
<a class="index-entry-id" id="index-features-undocumented"></a>
<a class="index-entry-id" id="index-Skywalker_002c-Luke"></a>
<a class="index-entry-id" id="index-Kenobi_002c-Obi_002dWan"></a>
<a class="index-entry-id" id="index-jedi-knights"></a>
<a class="index-entry-id" id="index-knights_002c-jedi"></a>
<blockquote class="quotation">
<p><i class="i">Use the Source, Luke!</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Obi-Wan</em>
</div>
<a class="index-entry-id" id="index-shells-sea"></a>
<p>This section intentionally left
blank.
</p>

<hr>
</div>
<div class="section-level-extent" id="Invoking-Summary">
<div class="nav-panel">
<p>
Previous: <a href="#Undocumented" accesskey="p" rel="prev">Undocumented Options and Features</a>, Up: <a href="#Invoking-Gawk" accesskey="u" rel="up">Running <code class="command">awk</code> and <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary-1"><span>2.11 Summary<a class="copiable-link" href="#Summary-1"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li><code class="command">gawk</code> parses arguments on the command line, left to right, to
determine if they should be treated as options or as non-option arguments.

</li><li><code class="command">gawk</code> recognizes several options which control its operation,
as described in <a class="ref" href="#Options">Command-Line Options</a>.  All options begin with &lsquo;<samp class="samp">-</samp>&rsquo;.

</li><li>Any argument that is not recognized as an option is treated as a
non-option argument, even if it begins with &lsquo;<samp class="samp">-</samp>&rsquo;.

<ul class="itemize mark-minus">
<li>However, when an option itself requires an argument, and the option is separated
from that argument on the command line by at least one space, the space
is ignored, and the argument is considered to be related to the option.  Thus, in
the invocation, &lsquo;<samp class="samp">gawk -F x</samp>&rsquo;, the &lsquo;<samp class="samp">x</samp>&rsquo; is treated as belonging to the
<samp class="option">-F</samp> option, not as a separate non-option argument.
</li></ul>

</li><li>Once <code class="command">gawk</code> finds a non-option argument, it stops looking for
options. Therefore, all following arguments are also non-option arguments,
even if they resemble recognized options.

</li><li>If no <samp class="option">-e</samp> or <samp class="option">-f</samp> options are present, <code class="command">gawk</code>
expects the program text to be in the first non-option argument.

</li><li>All non-option arguments, except program text provided in the first
non-option argument, are placed in <code class="code">ARGV</code> as explained in
<a class="ref" href="#ARGC-and-ARGV">Using <code class="code">ARGC</code> and <code class="code">ARGV</code></a>, and are processed as described in <a class="ref" href="#Other-Arguments">Other Command-Line Arguments</a>.
Adjusting <code class="code">ARGC</code> and <code class="code">ARGV</code>
affects how <code class="command">awk</code> processes input.


</li><li>The three standard options for all versions of <code class="command">awk</code> are
<samp class="option">-f</samp>, <samp class="option">-F</samp>, and <samp class="option">-v</samp>.  <code class="command">gawk</code> supplies these
and many others, as well as corresponding GNU-style long options.

</li><li>Nonoption command-line arguments are usually treated as file names,
unless they have the form &lsquo;<samp class="samp"><var class="var">var</var>=<var class="var">value</var></samp>&rsquo;, in which case
they are taken as variable assignments to be performed at that point
in processing the input.

</li><li>You can use a single minus sign (&lsquo;<samp class="samp">-</samp>&rsquo;) to refer to standard input
on the command line. <code class="command">gawk</code> also lets you use the special
file name <samp class="file">/dev/stdin</samp>.

</li><li><a class="index-entry-id" id="index-AWKPATH-environment-variable-2"></a>
<a class="index-entry-id" id="index-environment-variables-AWKPATH-2"></a>
<a class="index-entry-id" id="index-AWKLIBPATH-environment-variable-3"></a>
<a class="index-entry-id" id="index-environment-variables-AWKLIBPATH-3"></a>
<a class="index-entry-id" id="index-POSIXLY_005fCORRECT-environment-variable-2"></a>
<a class="index-entry-id" id="index-environment-variables-POSIXLY_005fCORRECT-2"></a>
<code class="command">gawk</code> pays attention to a number of environment variables.
<code class="env">AWKPATH</code>, <code class="env">AWKLIBPATH</code>, and <code class="env">POSIXLY_CORRECT</code> are the
most important ones.

</li><li><code class="command">gawk</code>&rsquo;s exit status conveys information to the program
that invoked it. Use the <code class="code">exit</code> statement from within
an <code class="command">awk</code> program to set the exit status.

</li><li><code class="command">gawk</code> allows you to include other <code class="command">awk</code> source files into
your program using the <code class="code">@include</code> statement and/or the <samp class="option">-i</samp>
and <samp class="option">-f</samp> command-line options.

</li><li><code class="command">gawk</code> allows you to load additional functions written in C
or C++ using the <code class="code">@load</code> statement and/or the <samp class="option">-l</samp> option.
(This advanced feature is described later, in <a class="ref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>.)
</li></ul>

<hr>
</div>
</div>
<div class="chapter-level-extent" id="Regexp">
<div class="nav-panel">
<p>
Next: <a href="#Reading-Files" accesskey="n" rel="next">Reading Input Files</a>, Previous: <a href="#Invoking-Gawk" accesskey="p" rel="prev">Running <code class="command">awk</code> and <code class="command">gawk</code></a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Regular-Expressions"><span>3 Regular Expressions<a class="copiable-link" href="#Regular-Expressions"> &para;</a></span></h2>
<a class="index-entry-id" id="index-regexp"></a>
<a class="index-entry-id" id="index-regular-expressions"></a>

<p>A <em class="dfn">regular expression</em>, or <em class="dfn">regexp</em>, is a way of describing a
set of strings.
Because regular expressions are such a fundamental part of <code class="command">awk</code>
programming, their format and use deserve a separate chapter.
</p>
<a class="index-entry-id" id="index-forward-slash-_0028_002f_0029-to-enclose-regular-expressions"></a>
<a class="index-entry-id" id="index-_002f-_0028forward-slash_0029-to-enclose-regular-expressions"></a>
<p>A regular expression enclosed in slashes (&lsquo;<samp class="samp">/</samp>&rsquo;)
is an <code class="command">awk</code> pattern that matches every input record whose text
belongs to that set.
The simplest regular expression is a sequence of letters, numbers, or
both.  Such a regexp matches any string that contains that sequence.
Thus, the regexp &lsquo;<samp class="samp">foo</samp>&rsquo; matches any string containing &lsquo;<samp class="samp">foo</samp>&rsquo;.
Thus, the pattern <code class="code">/foo/</code> matches any input record containing
the three adjacent characters &lsquo;<samp class="samp">foo</samp>&rsquo; <em class="emph">anywhere</em> in the record.  Other
kinds of regexps let you specify more complicated classes of strings.
</p>
<p>Initially, the examples in this chapter are simple.
As we explain more about how
regular expressions work, we present more complicated instances.
</p>

<ul class="mini-toc">
<li><a href="#Regexp-Usage" accesskey="1">How to Use Regular Expressions</a></li>
<li><a href="#Escape-Sequences" accesskey="2">Escape Sequences</a></li>
<li><a href="#Regexp-Operators" accesskey="3">Regular Expression Operators</a></li>
<li><a href="#Bracket-Expressions" accesskey="4">Using Bracket Expressions</a></li>
<li><a href="#Leftmost-Longest" accesskey="5">How Much Text Matches?</a></li>
<li><a href="#Computed-Regexps" accesskey="6">Using Dynamic Regexps</a></li>
<li><a href="#GNU-Regexp-Operators" accesskey="7"><code class="command">gawk</code>-Specific Regexp Operators</a></li>
<li><a href="#Case_002dsensitivity" accesskey="8">Case Sensitivity in Matching</a></li>
<li><a href="#Regexp-Summary" accesskey="9">Summary</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Regexp-Usage">
<div class="nav-panel">
<p>
Next: <a href="#Escape-Sequences" accesskey="n" rel="next">Escape Sequences</a>, Up: <a href="#Regexp" accesskey="u" rel="up">Regular Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="How-to-Use-Regular-Expressions"><span>3.1 How to Use Regular Expressions<a class="copiable-link" href="#How-to-Use-Regular-Expressions"> &para;</a></span></h3>

<a class="index-entry-id" id="index-patterns-regexp-constants-as"></a>
<a class="index-entry-id" id="index-regular-expressions-as-patterns"></a>
<p>A regular expression can be used as a pattern by enclosing it in
slashes.  Then the regular expression is tested against the
entire text of each record.  (Normally, it only needs
to match some part of the text in order to succeed.)  For example, the
following prints the second field of each record where the string
&lsquo;<samp class="samp">li</samp>&rsquo; appears anywhere in the record:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '/li/ { print $2 }' mail-list</kbd>
-| 555-5553
-| 555-0542
-| 555-6699
-| 555-3430
</pre></div>

<a class="index-entry-id" id="index-regular-expressions-operators"></a>
<a class="index-entry-id" id="index-operators-string_002dmatching"></a>
<a class="index-entry-id" id="index-string_002dmatching-operators"></a>
<a class="index-entry-id" id="index-_007e-_0028tilde_0029_002c-_007e-operator"></a>
<a class="index-entry-id" id="index-tilde-_0028_007e_0029_002c-_007e-operator"></a>
<a class="index-entry-id" id="index-_0021-_0028exclamation-point_0029-_0021_007e-operator"></a>
<a class="index-entry-id" id="index-exclamation-point-_0028_0021_0029-_0021_007e-operator"></a>
<a class="index-entry-id" id="index-if-statement-use-of-regexps-in"></a>
<a class="index-entry-id" id="index-while-statement-use-of-regexps-in"></a>
<a class="index-entry-id" id="index-do_002dwhile-statement-use-of-regexps-in"></a>
<p>Regular expressions can also be used in matching expressions.  These
expressions allow you to specify the string to match against; it need
not be the entire current input record.  The two operators &lsquo;<samp class="samp">~</samp>&rsquo;
and &lsquo;<samp class="samp">!~</samp>&rsquo; perform regular expression comparisons.  Expressions
using these operators can be used as patterns, or in <code class="code">if</code>,
<code class="code">while</code>, <code class="code">for</code>, and <code class="code">do</code> statements.
(See <a class="xref" href="#Statements">Control Statements in Actions</a>.)
For example, the following is true if the expression <var class="var">exp</var> (taken
as a string) matches <var class="var">regexp</var>:
</p>
<div class="example">
<pre class="example-preformatted"><var class="var">exp</var> ~ /<var class="var">regexp</var>/
</pre></div>

<p>This example matches, or selects, all input records with the uppercase
letter &lsquo;<samp class="samp">J</samp>&rsquo; somewhere in the first field:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '$1 ~ /J/' inventory-shipped</kbd>
-| Jan  13  25  15 115
-| Jun  31  42  75 492
-| Jul  24  34  67 436
-| Jan  21  36  64 620
</pre></div>

<p>So does this:
</p>
<div class="example">
<pre class="example-preformatted">awk '{ if ($1 ~ /J/) print }' inventory-shipped
</pre></div>

<p>This next example is true if the expression <var class="var">exp</var>
(taken as a character string)
does <em class="emph">not</em> match <var class="var">regexp</var>:
</p>
<div class="example">
<pre class="example-preformatted"><var class="var">exp</var> !~ /<var class="var">regexp</var>/
</pre></div>

<p>The following example matches,
or selects, all input records whose first field <em class="emph">does not</em> contain
the uppercase letter &lsquo;<samp class="samp">J</samp>&rsquo;:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '$1 !~ /J/' inventory-shipped</kbd>
-| Feb  15  32  24 226
-| Mar  15  24  34 228
-| Apr  31  52  63 420
-| May  16  34  29 208
...
</pre></div>

<a class="index-entry-id" id="index-regexp-constants"></a>
<a class="index-entry-id" id="index-constants-regexp"></a>
<p>When a regexp is enclosed in slashes, such as <code class="code">/foo/</code>, we call it
a <em class="dfn">regexp constant</em>, much like <code class="code">5.27</code> is a numeric constant and
<code class="code">&quot;foo&quot;</code> is a string constant.
</p>
<hr>
</div>
<div class="section-level-extent" id="Escape-Sequences">
<div class="nav-panel">
<p>
Next: <a href="#Regexp-Operators" accesskey="n" rel="next">Regular Expression Operators</a>, Previous: <a href="#Regexp-Usage" accesskey="p" rel="prev">How to Use Regular Expressions</a>, Up: <a href="#Regexp" accesskey="u" rel="up">Regular Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Escape-Sequences-1"><span>3.2 Escape Sequences<a class="copiable-link" href="#Escape-Sequences-1"> &para;</a></span></h3>

<a class="index-entry-id" id="index-escape-sequences"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-in-escape-sequences"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-in-escape-sequences"></a>
<p>Some characters cannot be included literally in string constants
(<code class="code">&quot;foo&quot;</code>) or regexp constants (<code class="code">/foo/</code>).
Instead, they should be represented with <em class="dfn">escape sequences</em>,
which are character sequences beginning with a backslash (&lsquo;<samp class="samp">\</samp>&rsquo;).
One use of an escape sequence is to include a double-quote character in
a string constant.  Because a plain double quote ends the string, you
must use &lsquo;<samp class="samp">\&quot;</samp>&rsquo; to represent an actual double-quote character as a
part of the string.  For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN { print &quot;He said \&quot;hi!\&quot; to her.&quot; }'</kbd>
-| He said &quot;hi!&quot; to her.
</pre></div>

<p>The  backslash character itself is another character that cannot be
included normally; you must write &lsquo;<samp class="samp">\\</samp>&rsquo; to put one backslash in the
string or regexp.  Thus, the string whose contents are the two characters
&lsquo;<samp class="samp">&quot;</samp>&rsquo; and &lsquo;<samp class="samp">\</samp>&rsquo; must be written <code class="code">&quot;\&quot;\\&quot;</code>.
</p>
<p>Other escape sequences represent unprintable characters
such as TAB or newline.  There is nothing to stop you from entering most
unprintable characters directly in a string constant or regexp constant,
but they may look ugly.
</p>
<p>The following list presents
all the escape sequences used in <code class="command">awk</code> and
what they represent. Unless noted otherwise, all these escape
sequences apply to both string constants and regexp constants:
</p>
<a class="index-entry-id" id="index-ASCII"></a>
<dl class="table">
<dt><code class="code">\\</code></dt>
<dd><p>A literal backslash, &lsquo;<samp class="samp">\</samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005ca-escape-sequence"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005ca-escape-sequence"></a>
</dd>
<dt><code class="code">\a</code></dt>
<dd><p>The &ldquo;alert&rdquo; character, <kbd class="kbd">Ctrl-g</kbd>, ASCII code 7 (BEL).
(This often makes some sort of audible noise.)
</p>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005cb-escape-sequence"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005cb-escape-sequence"></a>
</dd>
<dt><code class="code">\b</code></dt>
<dd><p>Backspace, <kbd class="kbd">Ctrl-h</kbd>, ASCII code 8 (BS).
</p>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005cf-escape-sequence"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005cf-escape-sequence"></a>
</dd>
<dt><code class="code">\f</code></dt>
<dd><p>Formfeed, <kbd class="kbd">Ctrl-l</kbd>, ASCII code 12 (FF).
</p>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005cn-escape-sequence"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005cn-escape-sequence"></a>
</dd>
<dt><code class="code">\n</code></dt>
<dd><p>Newline, <kbd class="kbd">Ctrl-j</kbd>, ASCII code 10 (LF).
</p>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005cr-escape-sequence"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005cr-escape-sequence"></a>
</dd>
<dt><code class="code">\r</code></dt>
<dd><p>Carriage return, <kbd class="kbd">Ctrl-m</kbd>, ASCII code 13 (CR).
</p>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005ct-escape-sequence"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005ct-escape-sequence"></a>
</dd>
<dt><code class="code">\t</code></dt>
<dd><p>Horizontal TAB, <kbd class="kbd">Ctrl-i</kbd>, ASCII code 9 (HT).
</p>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005cv-escape-sequence"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005cv-escape-sequence"></a>
</dd>
<dt><code class="code">\v</code></dt>
<dd><p>Vertical TAB, <kbd class="kbd">Ctrl-k</kbd>, ASCII code 11 (VT).
</p>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005cnnn-escape-sequence"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005cnnn-escape-sequence"></a>
</dd>
<dt><code class="code">\<var class="var">nnn</var></code></dt>
<dd><p>The octal value <var class="var">nnn</var>, where <var class="var">nnn</var> stands for 1 to 3 digits
between &lsquo;<samp class="samp">0</samp>&rsquo; and &lsquo;<samp class="samp">7</samp>&rsquo;.  For example, the code for the ASCII ESC
(escape) character is &lsquo;<samp class="samp">\033</samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005cx-escape-sequence"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005cx-escape-sequence"></a>
<a class="index-entry-id" id="index-common-extensions-_005cx-escape-sequence"></a>
<a class="index-entry-id" id="index-extensions-common-_005cx-escape-sequence"></a>
</dd>
<dt><code class="code">\x<var class="var">hh</var>&hellip;</code></dt>
<dd><p>The hexadecimal value <var class="var">hh</var>, where <var class="var">hh</var> stands for a sequence
of hexadecimal digits (&lsquo;<samp class="samp">0</samp>&rsquo;&ndash;&lsquo;<samp class="samp">9</samp>&rsquo;, and either &lsquo;<samp class="samp">A</samp>&rsquo;&ndash;&lsquo;<samp class="samp">F</samp>&rsquo;
or &lsquo;<samp class="samp">a</samp>&rsquo;&ndash;&lsquo;<samp class="samp">f</samp>&rsquo;).  A maximum of two digits are allowed after
the &lsquo;<samp class="samp">\x</samp>&rsquo;. Any further hexadecimal digits are treated as simple
letters or numbers.  (c.e.)
(The &lsquo;<samp class="samp">\x</samp>&rsquo; escape sequence is not allowed in POSIX awk.)
</p>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> In ISO C, the escape sequence continues until the first nonhexadecimal
digit is seen.
For many years, <code class="command">gawk</code> would continue incorporating
hexadecimal digits into the value until a non-hexadecimal digit
or the end of the string was encountered.
However, using more than two hexadecimal digits produced
undefined results.
As of version 4.2, only two digits
are processed.
</p></blockquote>

<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005cu-escape-sequence"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005cu-escape-sequence"></a>
<a class="index-entry-id" id="index-common-extensions-_005cu-escape-sequence"></a>
<a class="index-entry-id" id="index-extensions-common-_005cu-escape-sequence"></a>
</dd>
<dt><code class="code">\u<var class="var">hh</var>&hellip;</code></dt>
<dd><p>The hexadecimal value <var class="var">hh</var>, where <var class="var">hh</var> stands for a sequence
of one or more hexadecimal digits (&lsquo;<samp class="samp">0</samp>&rsquo;&ndash;&lsquo;<samp class="samp">9</samp>&rsquo;, and either
&lsquo;<samp class="samp">A</samp>&rsquo;&ndash;&lsquo;<samp class="samp">F</samp>&rsquo; or &lsquo;<samp class="samp">a</samp>&rsquo;&ndash;&lsquo;<samp class="samp">f</samp>&rsquo;).  A maximum of eight digits
are allowed after the &lsquo;<samp class="samp">\u</samp>&rsquo;. Any further hexadecimal digits are
treated as simple letters or numbers.  (c.e.) (The &lsquo;<samp class="samp">\u</samp>&rsquo;
escape sequence is not allowed in POSIX awk.)
</p>
<p>This escape sequence is intended for designating a character in
the current locale&rsquo;s character set.<a class="footnote" id="DOCF16" href="#FOOT16"><sup>16</sup></a> <code class="command">gawk</code> first
converts the given digits into an integer and then translates the given
&ldquo;wide character&rdquo; value into the current locale&rsquo;s multibyte encoding. If
the wide character value does not represent a valid character, or if
the character is valid but cannot be encoded into the current locale&rsquo;s
multibyte encoding, the value becomes <code class="code">&quot;?&quot;</code>. <code class="command">gawk</code> issues
a warning message when this happens.
</p>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005c_002f-escape-sequence"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005c_002f-escape-sequence"></a>
</dd>
<dt><code class="code">\/</code></dt>
<dd><p>A literal slash (should be used for regexp constants only).
This sequence is used when you want to write a regexp
constant that contains a slash
(such as <code class="code">/.*:\/home\/[[:alnum:]]+:.*/</code>; the &lsquo;<samp class="samp">[[:alnum:]]</samp>&rsquo;
notation is discussed in <a class="ref" href="#Bracket-Expressions">Using Bracket Expressions</a>).
Because the regexp is delimited by
slashes, you need to escape any slash that is part of the pattern,
in order to tell <code class="command">awk</code> to keep processing the rest of the regexp.
</p>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005c_0022-escape-sequence"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005c_0022-escape-sequence"></a>
</dd>
<dt><code class="code">\&quot;</code></dt>
<dd><p>A literal double quote (should be used for string constants only).
This sequence is used when you want to write a string
constant that contains a double quote
(such as <code class="code">&quot;He said \&quot;hi!\&quot; to her.&quot;</code>).
Because the string is delimited by
double quotes, you need to escape any quote that is part of the string,
in order to tell <code class="command">awk</code> to keep processing the rest of the string.
</p></dd>
</dl>

<p>In <code class="command">gawk</code>, a number of additional two-character sequences that begin
with a backslash have special meaning in regexps.
See <a class="xref" href="#GNU-Regexp-Operators"><code class="command">gawk</code>-Specific Regexp Operators</a>.
</p>
<p>In a regexp, a backslash before any character that is not in the previous list
and not listed in
<a class="ref" href="#GNU-Regexp-Operators"><code class="command">gawk</code>-Specific Regexp Operators</a>
means that the next character should be taken literally, even if it would
normally be a regexp operator.  For example, <code class="code">/a\+b/</code> matches the three
characters &lsquo;<samp class="samp">a+b</samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-in-escape-sequences-1"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-in-escape-sequences-1"></a>
<a class="index-entry-id" id="index-portability"></a>
<p>For complete portability, do not use a backslash before any character not
shown in the previous list or that is not an operator.
</p>
<a class="index-entry-id" id="index-sidebar-Backslash-Before-Regular-Characters"></a>
<table class="cartouche" border="1"><tr><th>
Backslash Before Regular Characters</th></tr><tr><td>
<a class="index-entry-id" id="index-portability-backslash-in-escape-sequences"></a>
<a class="index-entry-id" id="index-POSIX-awk-backslashes-in-string-constants"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-in-escape-sequences-POSIX-and"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-in-escape-sequences-POSIX-and"></a>

<a class="index-entry-id" id="index-troubleshooting-backslash-before-nonspecial-character"></a>
<p>If you place a backslash in a string constant before something that is
not one of the characters previously listed, POSIX <code class="command">awk</code> purposely
leaves what happens as undefined.  There are two choices:
</p>
<a class="index-entry-id" id="index-Brian-Kernighan_0027s-awk-1"></a>
<dl class="table">
<dt>Strip the backslash out</dt>
<dd><p>This is what BWK <code class="command">awk</code> and <code class="command">gawk</code> both do.
For example, <code class="code">&quot;a\qc&quot;</code> is the same as <code class="code">&quot;aqc&quot;</code>.
(Because this is such an easy bug both to introduce and to miss,
<code class="command">gawk</code> warns you about it.)
Consider &lsquo;<samp class="samp">FS = &quot;[&nbsp;\t]+\|[&nbsp;\t]+&quot;<!-- /@w --></samp>&rsquo; to use vertical bars
surrounded by whitespace as the field separator. There should be
two backslashes in the string: &lsquo;<samp class="samp">FS = &quot;[&nbsp;\t]+\\|[&nbsp;\t]+&quot;<!-- /@w --></samp>&rsquo;.)
</p>
<a class="index-entry-id" id="index-gawk-escape-sequences"></a>
<a class="index-entry-id" id="index-gawk-escape-sequences-1"></a>
<a class="index-entry-id" id="index-Unix-awk-backslashes-in-escape-sequences"></a>
</dd>
<dt><a id="index-mawk-utility"></a><span>Leave the backslash alone<a class="copiable-link" href="#index-mawk-utility"> &para;</a></span></dt>
<dd><p>Some other <code class="command">awk</code> implementations do this.
In such implementations, typing <code class="code">&quot;a\qc&quot;</code> is the same as typing
<code class="code">&quot;a\\qc&quot;</code>.
</p></dd>
</dl>
</td></tr></table>

<p>To summarize:
</p>
<ul class="itemize mark-bullet">
<li>The escape sequences in the preceding list are always processed first,
for both string constants and regexp constants. This happens very early,
as soon as <code class="command">awk</code> reads your program.

</li><li><code class="command">gawk</code> processes both regexp constants and dynamic regexps
(see <a class="pxref" href="#Computed-Regexps">Using Dynamic Regexps</a>),
for the special operators listed in
<a class="ref" href="#GNU-Regexp-Operators"><code class="command">gawk</code>-Specific Regexp Operators</a>.

</li><li>A backslash before any other character means to treat that character
literally.
</li></ul>

<a class="index-entry-id" id="index-sidebar-Escape-Sequences-for-Metacharacters"></a>
<table class="cartouche" border="1"><tr><th>
Escape Sequences for Metacharacters</th></tr><tr><td>
<a class="index-entry-id" id="index-metacharacters-escape-sequences-for"></a>

<p>Suppose you use an octal or hexadecimal
escape to represent a regexp metacharacter.
(See <a class="ref" href="#Regexp-Operators">Regular Expression Operators</a>.)
Does <code class="command">awk</code> treat the character as a literal character or as a regexp
operator?
</p>
<a class="index-entry-id" id="index-dark-corner-escape-sequences-for-metacharacters"></a>
<p>Historically, such characters were taken literally.
(d.c.)
However, the POSIX standard indicates that they should be treated
as real metacharacters, which is what <code class="command">gawk</code> does.
In compatibility mode (see <a class="pxref" href="#Options">Command-Line Options</a>),
<code class="command">gawk</code> treats the characters represented by octal and hexadecimal
escape sequences literally when used in regexp constants. Thus,
<code class="code">/a\52b/</code> is equivalent to <code class="code">/a\*b/</code>.
</p></td></tr></table>

<hr>
</div>
<div class="section-level-extent" id="Regexp-Operators">
<div class="nav-panel">
<p>
Next: <a href="#Bracket-Expressions" accesskey="n" rel="next">Using Bracket Expressions</a>, Previous: <a href="#Escape-Sequences" accesskey="p" rel="prev">Escape Sequences</a>, Up: <a href="#Regexp" accesskey="u" rel="up">Regular Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Regular-Expression-Operators"><span>3.3 Regular Expression Operators<a class="copiable-link" href="#Regular-Expression-Operators"> &para;</a></span></h3>
<a class="index-entry-id" id="index-regular-expressions-operators-1"></a>
<a class="index-entry-id" id="index-metacharacters-in-regular-expressions"></a>

<p>You can combine regular expressions with special characters,
called <em class="dfn">regular expression operators</em> or <em class="dfn">metacharacters</em>, to
increase the power and versatility of regular expressions.
</p>

<ul class="mini-toc">
<li><a href="#Regexp-Operator-Details" accesskey="1">Regexp Operators in <code class="command">awk</code></a></li>
<li><a href="#Interval-Expressions" accesskey="2">Some Notes On Interval Expressions</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Regexp-Operator-Details">
<div class="nav-panel">
<p>
Next: <a href="#Interval-Expressions" accesskey="n" rel="next">Some Notes On Interval Expressions</a>, Up: <a href="#Regexp-Operators" accesskey="u" rel="up">Regular Expression Operators</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Regexp-Operators-in-awk"><span>3.3.1 Regexp Operators in <code class="command">awk</code><a class="copiable-link" href="#Regexp-Operators-in-awk"> &para;</a></span></h4>

<p>The escape sequences described
earlier
in <a class="ref" href="#Escape-Sequences">Escape Sequences</a>
are valid inside a regexp.  They are introduced by a &lsquo;<samp class="samp">\</samp>&rsquo; and
are recognized and converted into corresponding real characters as
the very first step in processing regexps.
</p>
<p>Here is a list of metacharacters.  All characters that are not escape
sequences and that are not listed here stand for themselves:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-backslash-_0028_005c_0029-regexp-operator"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-regexp-operator"></a>
</dd>
<dt><code class="code">\</code></dt>
<dd><p>This suppresses the special meaning of a character when
matching.  For example, &lsquo;<samp class="samp">\$</samp>&rsquo;
matches the character &lsquo;<samp class="samp">$</samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-regular-expressions-anchors-in"></a>
<a class="index-entry-id" id="index-Texinfo-chapter-beginnings-in-files"></a>
<a class="index-entry-id" id="index-_005e-_0028caret_0029-regexp-operator"></a>
<a class="index-entry-id" id="index-caret-_0028_005e_0029-regexp-operator"></a>
</dd>
<dt><code class="code">^</code></dt>
<dd><p>This matches the beginning of a string.  &lsquo;<samp class="samp">^@chapter</samp>&rsquo;
matches &lsquo;<samp class="samp">@chapter</samp>&rsquo; at the beginning of a string,
for example, and can be used
to identify chapter beginnings in Texinfo source files.
The &lsquo;<samp class="samp">^</samp>&rsquo; is known as an <em class="dfn">anchor</em>, because it anchors the pattern to
match only at the beginning of the string.
</p>
<p>It is important to realize that &lsquo;<samp class="samp">^</samp>&rsquo; does not match the beginning of
a line (the point right after a &lsquo;<samp class="samp">\n</samp>&rsquo; newline character) embedded in a string.
The condition is not true in the following example:
</p>
<div class="example">
<pre class="example-preformatted">if (&quot;line1\nLINE 2&quot; ~ /^L/) ...
</pre></div>

<a class="index-entry-id" id="index-_0024-_0028dollar-sign_0029-regexp-operator"></a>
<a class="index-entry-id" id="index-dollar-sign-_0028_0024_0029-regexp-operator"></a>
</dd>
<dt><code class="code">$</code></dt>
<dd><p>This is similar to &lsquo;<samp class="samp">^</samp>&rsquo;, but it matches only at the end of a string.
For example, &lsquo;<samp class="samp">p$</samp>&rsquo;
matches a record that ends with a &lsquo;<samp class="samp">p</samp>&rsquo;.  The &lsquo;<samp class="samp">$</samp>&rsquo; is an anchor
and does not match the end of a line
(the point right before a &lsquo;<samp class="samp">\n</samp>&rsquo; newline character)
embedded in a string.
The condition in the following example is not true:
</p>
<div class="example">
<pre class="example-preformatted">if (&quot;line1\nLINE 2&quot; ~ /1$/) ...
</pre></div>

</dd>
<dt><a class="index-entry-id" id="index-period-_0028_002e_0029_002c-regexp-operator"></a>
<a id="index-_002e-_0028period_0029_002c-regexp-operator"></a><span><code class="code">.</code> (period)<a class="copiable-link" href="#index-_002e-_0028period_0029_002c-regexp-operator"> &para;</a></span></dt>
<dd><p>This matches any single character,
<em class="emph">including</em> the newline character.  For example, &lsquo;<samp class="samp">.P</samp>&rsquo;
matches any single character followed by a &lsquo;<samp class="samp">P</samp>&rsquo; in a string.  Using
concatenation, we can make a regular expression such as &lsquo;<samp class="samp">U.A</samp>&rsquo;, which
matches any three-character sequence that begins with &lsquo;<samp class="samp">U</samp>&rsquo; and ends
with &lsquo;<samp class="samp">A</samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-POSIX-mode-2"></a>
<a class="index-entry-id" id="index-POSIX-awk-period-_0028_002e_0029_002c-using"></a>
<p>In strict POSIX mode (see <a class="pxref" href="#Options">Command-Line Options</a>),
&lsquo;<samp class="samp">.</samp>&rsquo; does not match the <small class="sc">NUL</small>
character, which is a character with all bits equal to zero.
Otherwise, <small class="sc">NUL</small> is just another character. Other versions of <code class="command">awk</code>
may not be able to match the <small class="sc">NUL</small> character.
</p>
</dd>
<dt><a class="index-entry-id" id="index-square-brackets-_0028_005b_005d_0029_002c-regexp-operator"></a>
<a class="index-entry-id" id="index-bracket-expressions"></a>
<a id="index-_005b_005d-_0028square-brackets_0029_002c-regexp-operator"></a><span><code class="code">[</code>&hellip;<code class="code">]</code><a class="copiable-link" href="#index-_005b_005d-_0028square-brackets_0029_002c-regexp-operator"> &para;</a></span></dt>
<dd><p>This is called a <em class="dfn">bracket expression</em>.<a class="footnote" id="DOCF17" href="#FOOT17"><sup>17</sup></a>
It matches any <em class="emph">one</em> of the characters that are enclosed in
the square brackets.  For example, &lsquo;<samp class="samp">[MVX]</samp>&rsquo; matches any one of
the characters &lsquo;<samp class="samp">M</samp>&rsquo;, &lsquo;<samp class="samp">V</samp>&rsquo;, or &lsquo;<samp class="samp">X</samp>&rsquo; in a string.  A full
discussion of what can be inside the square brackets of a bracket expression
is given in
<a class="ref" href="#Bracket-Expressions">Using Bracket Expressions</a>.
</p>
<a class="index-entry-id" id="index-bracket-expressions-complemented"></a>
</dd>
<dt><code class="code">[^</code>&hellip;<code class="code">]</code></dt>
<dd><p>This is a <em class="dfn">complemented bracket expression</em>.  The first character after
the &lsquo;<samp class="samp">[</samp>&rsquo; <em class="emph">must</em> be a &lsquo;<samp class="samp">^</samp>&rsquo;.  It matches any characters
<em class="emph">except</em> those in the square brackets.  For example, &lsquo;<samp class="samp">[^awk]</samp>&rsquo;
matches any character that is not an &lsquo;<samp class="samp">a</samp>&rsquo;, &lsquo;<samp class="samp">w</samp>&rsquo;,
or &lsquo;<samp class="samp">k</samp>&rsquo;.
</p>
</dd>
<dt><a class="index-entry-id" id="index-vertical-bar-_0028_007c_0029"></a>
<a id="index-_007c-_0028vertical-bar_0029"></a><span><code class="code">|</code><a class="copiable-link" href="#index-_007c-_0028vertical-bar_0029"> &para;</a></span></dt>
<dd><p>This is the <em class="dfn">alternation operator</em> and it is used to specify
alternatives.  The &lsquo;<samp class="samp">|</samp>&rsquo; has the lowest precedence of all the regular
expression operators.  For example, &lsquo;<samp class="samp">^P|[aeiouy]</samp>&rsquo; matches any string
that matches either &lsquo;<samp class="samp">^P</samp>&rsquo; or &lsquo;<samp class="samp">[aeiouy]</samp>&rsquo;.  This means it matches
any string that starts with &lsquo;<samp class="samp">P</samp>&rsquo; or contains (anywhere within it)
a lowercase English vowel.
</p>
<p>The alternation applies to the largest possible regexps on either side.
</p>
<a class="index-entry-id" id="index-_0028_0029-_0028parentheses_0029-regexp-operator"></a>
<a class="index-entry-id" id="index-parentheses-_0028_0029-regexp-operator"></a>
</dd>
<dt><code class="code">(</code>&hellip;<code class="code">)</code></dt>
<dd><p>Parentheses are used for grouping in regular expressions, as in
arithmetic.  They can be used to concatenate regular expressions
containing the alternation operator, &lsquo;<samp class="samp">|</samp>&rsquo;.  For example,
&lsquo;<samp class="samp">@(samp|code)\{[^}]+\}</samp>&rsquo; matches both &lsquo;<samp class="samp">@code{foo}</samp>&rsquo; and
&lsquo;<samp class="samp">@samp{bar}</samp>&rsquo;.
(These are Texinfo formatting control sequences. The &lsquo;<samp class="samp">+</samp>&rsquo; is
explained further on in this list.)
</p>
<p>The left or opening parenthesis is always a metacharacter; to match
one literally, precede it with a backslash. However, the right or
closing parenthesis is only special when paired with a left parenthesis;
an unpaired right parenthesis is (silently) treated as a regular character.
</p>
<a class="index-entry-id" id="index-_002a-_0028asterisk_0029-_002a-operator-as-regexp-operator"></a>
<a class="index-entry-id" id="index-asterisk-_0028_002a_0029-_002a-operator-as-regexp-operator"></a>
</dd>
<dt><code class="code">*</code></dt>
<dd><p>This symbol means that the preceding regular expression should be
repeated as many times as necessary to find a match.  For example, &lsquo;<samp class="samp">ph*</samp>&rsquo;
applies the &lsquo;<samp class="samp">*</samp>&rsquo; symbol to the preceding &lsquo;<samp class="samp">h</samp>&rsquo; and looks for matches
of one &lsquo;<samp class="samp">p</samp>&rsquo; followed by any number of &lsquo;<samp class="samp">h</samp>&rsquo;s.  This also matches
just &lsquo;<samp class="samp">p</samp>&rsquo; if no &lsquo;<samp class="samp">h</samp>&rsquo;s are present.
</p>
<p>There are two subtle points to understand about how &lsquo;<samp class="samp">*</samp>&rsquo; works.
First, the &lsquo;<samp class="samp">*</samp>&rsquo; applies only to the single preceding regular expression
component (e.g., in &lsquo;<samp class="samp">ph*</samp>&rsquo;, it applies just to the &lsquo;<samp class="samp">h</samp>&rsquo;).
To cause &lsquo;<samp class="samp">*</samp>&rsquo; to apply to a larger subexpression, use parentheses:
&lsquo;<samp class="samp">(ph)*</samp>&rsquo; matches &lsquo;<samp class="samp">ph</samp>&rsquo;, &lsquo;<samp class="samp">phph</samp>&rsquo;, &lsquo;<samp class="samp">phphph</samp>&rsquo;, and so on.
</p>
<p>Second, &lsquo;<samp class="samp">*</samp>&rsquo; finds as many repetitions as possible. If the text
to be matched is &lsquo;<samp class="samp">phhhhhhhhhhhhhhooey</samp>&rsquo;, &lsquo;<samp class="samp">ph*</samp>&rsquo; matches all of
the &lsquo;<samp class="samp">h</samp>&rsquo;s.
</p>
<a class="index-entry-id" id="index-_002b-_0028plus-sign_0029-regexp-operator"></a>
<a class="index-entry-id" id="index-plus-sign-_0028_002b_0029-regexp-operator"></a>
</dd>
<dt><code class="code">+</code></dt>
<dd><p>This symbol is similar to &lsquo;<samp class="samp">*</samp>&rsquo;, except that the preceding expression must be
matched at least once.  This means that &lsquo;<samp class="samp">wh+y</samp>&rsquo;
would match &lsquo;<samp class="samp">why</samp>&rsquo; and &lsquo;<samp class="samp">whhy</samp>&rsquo;, but not &lsquo;<samp class="samp">wy</samp>&rsquo;, whereas
&lsquo;<samp class="samp">wh*y</samp>&rsquo; would match all three.
</p>
<a class="index-entry-id" id="index-_003f-_0028question-mark_0029-regexp-operator"></a>
<a class="index-entry-id" id="index-question-mark-_0028_003f_0029-regexp-operator"></a>
</dd>
<dt><code class="code">?</code></dt>
<dd><p>This symbol is similar to &lsquo;<samp class="samp">*</samp>&rsquo;, except that the preceding expression can be
matched either once or not at all.  For example, &lsquo;<samp class="samp">fe?d</samp>&rsquo;
matches &lsquo;<samp class="samp">fed</samp>&rsquo; and &lsquo;<samp class="samp">fd</samp>&rsquo;, but nothing else.
</p>
<a class="index-entry-id" id="index-_007b_007d-_0028braces_0029-regexp-operator"></a>
<a class="index-entry-id" id="index-braces-_0028_007b_007d_0029-regexp-operator"></a>
</dd>
<dt><a id="index-interval-expressions_002c-regexp-operator"></a><span><code class="code">{</code><var class="var">n</var><code class="code">}</code><a class="copiable-link" href="#index-interval-expressions_002c-regexp-operator"> &para;</a></span></dt>
<dt><code class="code">{</code><var class="var">n</var><code class="code">,}</code></dt>
<dt><code class="code">{</code><var class="var">n</var><code class="code">,</code><var class="var">m</var><code class="code">}</code></dt>
<dd><p>One or two numbers inside braces denote an <em class="dfn">interval expression</em>.
If there is one number in the braces, the preceding regexp is repeated
<var class="var">n</var> times.
If there are two numbers separated by a comma, the preceding regexp is
repeated <var class="var">n</var> to <var class="var">m</var> times.
If there is one number followed by a comma, then the preceding regexp
is repeated at least <var class="var">n</var> times:
</p>
<dl class="table">
<dt><code class="code">wh{3}y</code></dt>
<dd><p>Matches &lsquo;<samp class="samp">whhhy</samp>&rsquo;, but not &lsquo;<samp class="samp">why</samp>&rsquo; or &lsquo;<samp class="samp">whhhhy</samp>&rsquo;.
</p>
</dd>
<dt><code class="code">wh{3,5}y</code></dt>
<dd><p>Matches &lsquo;<samp class="samp">whhhy</samp>&rsquo;, &lsquo;<samp class="samp">whhhhy</samp>&rsquo;, or &lsquo;<samp class="samp">whhhhhy</samp>&rsquo; only.
</p>
</dd>
<dt><code class="code">wh{2,}y</code></dt>
<dd><p>Matches &lsquo;<samp class="samp">whhy</samp>&rsquo;, &lsquo;<samp class="samp">whhhy</samp>&rsquo;, and so on.
</p></dd>
</dl>
</dd>
</dl>

<a class="index-entry-id" id="index-precedence-regexp-operators"></a>
<a class="index-entry-id" id="index-regular-expressions-operators-precedence-of"></a>
<p>In regular expressions, the &lsquo;<samp class="samp">*</samp>&rsquo;, &lsquo;<samp class="samp">+</samp>&rsquo;, and &lsquo;<samp class="samp">?</samp>&rsquo; operators,
as well as the braces &lsquo;<samp class="samp">{</samp>&rsquo; and &lsquo;<samp class="samp">}</samp>&rsquo;,
have
the highest precedence, followed by concatenation, and finally by &lsquo;<samp class="samp">|</samp>&rsquo;.
As in arithmetic, parentheses can change how operators are grouped.
</p>
<a class="index-entry-id" id="index-POSIX-awk-regular-expressions-and"></a>
<a class="index-entry-id" id="index-gawk-regular-expressions-precedence"></a>
<p>According to the POSIX specification, when &lsquo;<samp class="samp">*</samp>&rsquo;, &lsquo;<samp class="samp">+</samp>&rsquo;, &lsquo;<samp class="samp">?</samp>&rsquo;,
or &lsquo;<samp class="samp">{</samp>&rsquo; are not preceded by a character, the behavior is
&ldquo;undefined.&rdquo;
In practice, for <code class="command">gawk</code>, the &lsquo;<samp class="samp">*</samp>&rsquo;, &lsquo;<samp class="samp">+</samp>&rsquo;, &lsquo;<samp class="samp">?</samp>&rsquo; and
&lsquo;<samp class="samp">{</samp>&rsquo; operators stand for themselves when there is nothing in the
regexp that precedes them.  For example, <code class="code">/+/</code> matches a literal
plus sign.  However, many other versions of <code class="command">awk</code> treat such a
usage as a syntax error.
</p>
<a class="index-entry-id" id="index-sidebar-What-About-The-Empty-Regexp_003f"></a>
<table class="cartouche" border="1"><tr><th>
What About The Empty Regexp?</th></tr><tr><td>
<a class="index-entry-id" id="index-empty-regexps"></a>
<a class="index-entry-id" id="index-regexps_002c-empty"></a>
<p>We describe here an advanced regexp usage. Feel free to skip it
upon first reading.
</p>
<p>You can supply an empty regexp constant (&lsquo;<samp class="samp">//</samp>&rsquo;) in all places
where a regexp is expected. Is this useful?  What does it match?
</p>
<p>It is useful. It matches the (invisible) empty string at the start
and end of a string of characters, as well as the empty string
between characters. This is best illustrated with the <code class="code">gsub()</code>
function, which makes global substitutions in a string
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).  Normal usage of <code class="code">gsub()</code> is like
so:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '</kbd>
&gt; <kbd class="kbd">BEGIN {</kbd>
&gt; <kbd class="kbd">    x = &quot;ABC_CBA&quot;</kbd>
&gt; <kbd class="kbd">    gsub(/B/, &quot;bb&quot;, x)</kbd>
&gt; <kbd class="kbd">    print x</kbd>
&gt; <kbd class="kbd">}'</kbd>
-| AbbC_CbbA
</pre></div>

<p>We can use <code class="code">gsub()</code> to see where the empty strings
are that match the empty regexp:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '</kbd>
&gt; <kbd class="kbd">BEGIN {</kbd>
&gt; <kbd class="kbd">    x = &quot;ABC&quot;</kbd>
&gt; <kbd class="kbd">    gsub(//, &quot;x&quot;, x)</kbd>
&gt; <kbd class="kbd">    print x</kbd>
&gt; <kbd class="kbd">}'</kbd>
-| xAxBxCx
</pre></div>
</td></tr></table>

<hr>
</div>
<div class="subsection-level-extent" id="Interval-Expressions">
<div class="nav-panel">
<p>
Previous: <a href="#Regexp-Operator-Details" accesskey="p" rel="prev">Regexp Operators in <code class="command">awk</code></a>, Up: <a href="#Regexp-Operators" accesskey="u" rel="up">Regular Expression Operators</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Some-Notes-On-Interval-Expressions"><span>3.3.2 Some Notes On Interval Expressions<a class="copiable-link" href="#Some-Notes-On-Interval-Expressions"> &para;</a></span></h4>

<a class="index-entry-id" id="index-POSIX-awk-interval-expressions-in"></a>
<p>Interval expressions were not traditionally available in <code class="command">awk</code>.
They were added as part of the POSIX standard to make <code class="command">awk</code>
and <code class="command">egrep</code> consistent with each other.
</p>
<a class="index-entry-id" id="index-gawk-interval-expressions-and"></a>
<p>Initially, because old programs may use &lsquo;<samp class="samp">{</samp>&rsquo; and &lsquo;<samp class="samp">}</samp>&rsquo; in regexp
constants,
<code class="command">gawk</code> did <em class="emph">not</em> match interval expressions
in regexps.
</p>
<p>However, beginning with version 4.0,
<code class="command">gawk</code> does match interval expressions by default.
This is because compatibility with POSIX has become more
important to most <code class="command">gawk</code> users than compatibility with
old programs.
</p>
<p>For programs that use &lsquo;<samp class="samp">{</samp>&rsquo; and &lsquo;<samp class="samp">}</samp>&rsquo; in regexp constants,
it is good practice to always escape them with a backslash.  Then the
regexp constants are valid and work the way you want them to, using
any version of <code class="command">awk</code>.<a class="footnote" id="DOCF18" href="#FOOT18"><sup>18</sup></a>
</p>
<p>When &lsquo;<samp class="samp">{</samp>&rsquo; and &lsquo;<samp class="samp">}</samp>&rsquo; appear in regexp constants
in a way that cannot be interpreted as an interval expression
(such as <code class="code">/q{a}/</code>), then they stand for themselves.
</p>
<a class="index-entry-id" id="index-BWK-awk-interval-expressions-in"></a>
<p>As mentioned, interval expressions were not traditionally available
in <code class="command">awk</code>. In March of 2019, BWK <code class="command">awk</code> (finally) acquired them.
Starting with version 5.2, <code class="command">gawk</code>&rsquo;s
<samp class="option">--traditional</samp> option no longer disables interval
expressions in regular expressions.
</p>
<p>POSIX says that interval expressions containing repetition counts greater
than 255 produce unspecified results.
</p>
<a class="index-entry-id" id="index-Eggert_002c-Paul"></a>
<p>In the manual for GNU <code class="command">grep</code>, Paul Eggert notes the following:
</p>
<blockquote class="quotation">
<p>Interval expressions may be implemented internally via repetition.
For example, &lsquo;<samp class="samp">^(a|bc){2,4}$</samp>&rsquo; might be implemented as
&lsquo;<samp class="samp">^(a|bc)(a|bc)((a|bc)(a|bc)?)?$</samp>&rsquo;.  A large repetition count may
exhaust memory or greatly slow matching.  Even small counts can cause
problems if cascaded; for example, &lsquo;<samp class="samp">grep -E
&quot;.*{10,}{10,}{10,}{10,}{10,}&quot;</samp>&rsquo; is likely to overflow a
stack.  Fortunately, regular expressions like these are typically
artificial, and cascaded repetitions do not conform to POSIX so cannot
be used in portable programs anyway.
</p></blockquote>

<p>This same caveat applies to <code class="command">gawk</code>.
</p>
<hr>
</div>
</div>
<div class="section-level-extent" id="Bracket-Expressions">
<div class="nav-panel">
<p>
Next: <a href="#Leftmost-Longest" accesskey="n" rel="next">How Much Text Matches?</a>, Previous: <a href="#Regexp-Operators" accesskey="p" rel="prev">Regular Expression Operators</a>, Up: <a href="#Regexp" accesskey="u" rel="up">Regular Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Using-Bracket-Expressions"><span>3.4 Using Bracket Expressions<a class="copiable-link" href="#Using-Bracket-Expressions"> &para;</a></span></h3>
<a class="index-entry-id" id="index-bracket-expressions-1"></a>
<a class="index-entry-id" id="index-bracket-expressions-range-expressions"></a>
<a class="index-entry-id" id="index-range-expressions-_0028regexps_0029"></a>
<a class="index-entry-id" id="index-bracket-expressions-character-lists"></a>

<p>As mentioned earlier, a bracket expression matches any character among
those listed between the opening and closing square brackets.
</p>
<p>Within a bracket expression, a <em class="dfn">range expression</em> consists of two
characters separated by a hyphen.  It matches any single character that
sorts between the two characters, based upon the system&rsquo;s native character
set.  For example, &lsquo;<samp class="samp">[0-9]</samp>&rsquo; is equivalent to &lsquo;<samp class="samp">[0123456789]</samp>&rsquo;.
(See <a class="ref" href="#Ranges-and-Locales">Regexp Ranges and Locales: A Long Sad Story</a> for an explanation of how the POSIX
standard and <code class="command">gawk</code> have changed over time.  This is mainly
of historical interest.)
</p>
<p>With the increasing popularity of the
<a class="uref" href="http://www.unicode.org">Unicode character standard</a>,
there is an additional wrinkle to consider. Octal and hexadecimal
escape sequences inside bracket expressions are taken to represent
only single-byte characters (characters whose values fit within
the range 0&ndash;256).  To match a range of characters where the endpoints
of the range are larger than 256, enter the multibyte encodings of
the characters directly.
</p>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-in-bracket-expressions"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-in-bracket-expressions"></a>
<a class="index-entry-id" id="index-_005e-_0028caret_0029-in-bracket-expressions"></a>
<a class="index-entry-id" id="index-caret-_0028_005e_0029-in-bracket-expressions"></a>
<a class="index-entry-id" id="index-_002d-_0028hyphen_0029-in-bracket-expressions"></a>
<a class="index-entry-id" id="index-hyphen-_0028_002d_0029-in-bracket-expressions"></a>
<p>To include one of the characters &lsquo;<samp class="samp">\</samp>&rsquo;, &lsquo;<samp class="samp">]</samp>&rsquo;, &lsquo;<samp class="samp">-</samp>&rsquo;, or &lsquo;<samp class="samp">^</samp>&rsquo; in a
bracket expression, put a &lsquo;<samp class="samp">\</samp>&rsquo; in front of it.  For example:
</p>
<div class="example">
<pre class="example-preformatted">[d\]]
</pre></div>

<p>matches either &lsquo;<samp class="samp">d</samp>&rsquo; or &lsquo;<samp class="samp">]</samp>&rsquo;.
Additionally, if you place &lsquo;<samp class="samp">]</samp>&rsquo; right after the opening
&lsquo;<samp class="samp">[</samp>&rsquo;, the closing bracket is treated as one of the
characters to be matched.
</p>
<a class="index-entry-id" id="index-POSIX-awk-bracket-expressions-and"></a>
<a class="index-entry-id" id="index-Extended-Regular-Expressions-_0028EREs_0029"></a>
<a class="index-entry-id" id="index-EREs-_0028Extended-Regular-Expressions_0029"></a>
<a class="index-entry-id" id="index-egrep-utility"></a>
<p>The treatment of &lsquo;<samp class="samp">\</samp>&rsquo; in bracket expressions
is compatible with other <code class="command">awk</code>
implementations and is also mandated by POSIX.
The regular expressions in <code class="command">awk</code> are a superset
of the POSIX specification for Extended Regular Expressions (EREs).
POSIX EREs are based on the regular expressions accepted by the
traditional <code class="command">egrep</code> utility.
</p>
<a class="index-entry-id" id="index-bracket-expressions-character-classes"></a>
<a class="index-entry-id" id="index-POSIX-awk-bracket-expressions-and-character-classes"></a>
<p><em class="dfn">Character classes</em> are a feature introduced in the POSIX standard.
A character class is a special notation for describing
lists of characters that have a specific attribute, but the
actual characters can vary from country to country and/or
from character set to character set.  For example, the notion of what
is an alphabetic character differs between the United States and France.
</p>
<p>A character class is only valid in a regexp <em class="emph">inside</em> the
brackets of a bracket expression.  Character classes consist of &lsquo;<samp class="samp">[:</samp>&rsquo;,
a keyword denoting the class, and &lsquo;<samp class="samp">:]</samp>&rsquo;.
<a class="ref" href="#table_002dchar_002dclasses">Table 3.1</a> lists the character classes defined by the
POSIX standard.
</p>
<div class="float" id="table_002dchar_002dclasses">
<table class="multitable">
<thead><tr><th width="15%">Class</th><th width="85%">Meaning</th></tr></thead>
<tbody><tr><td width="15%"><code class="code">[:alnum:]</code></td><td width="85%">Alphanumeric characters</td></tr>
<tr><td width="15%"><code class="code">[:alpha:]</code></td><td width="85%">Alphabetic characters</td></tr>
<tr><td width="15%"><code class="code">[:blank:]</code></td><td width="85%">Space and TAB characters</td></tr>
<tr><td width="15%"><code class="code">[:cntrl:]</code></td><td width="85%">Control characters</td></tr>
<tr><td width="15%"><code class="code">[:digit:]</code></td><td width="85%">Numeric characters</td></tr>
<tr><td width="15%"><code class="code">[:graph:]</code></td><td width="85%">Characters that are both printable and visible
(a space is printable but not visible, whereas an &lsquo;<samp class="samp">a</samp>&rsquo; is both)</td></tr>
<tr><td width="15%"><code class="code">[:lower:]</code></td><td width="85%">Lowercase alphabetic characters</td></tr>
<tr><td width="15%"><code class="code">[:print:]</code></td><td width="85%">Printable characters (characters that are not control characters)</td></tr>
<tr><td width="15%"><code class="code">[:punct:]</code></td><td width="85%">Punctuation characters (characters that are not letters, digits,
control characters, or space characters)</td></tr>
<tr><td width="15%"><code class="code">[:space:]</code></td><td width="85%">Space characters (these are: space, TAB, newline, carriage return, formfeed and vertical tab)</td></tr>
<tr><td width="15%"><code class="code">[:upper:]</code></td><td width="85%">Uppercase alphabetic characters</td></tr>
<tr><td width="15%"><code class="code">[:xdigit:]</code></td><td width="85%">Characters that are hexadecimal digits</td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 3.1: </strong>POSIX character classes</p></div></div>
<p>For example, before the POSIX standard, you had to write <code class="code">/[A-Za-z0-9]/</code>
to match alphanumeric characters.  If your
character set had other alphabetic characters in it, this would not
match them.
With the POSIX character classes, you can write
<code class="code">/[[:alnum:]]/</code> to match the alphabetic
and numeric characters in your character set.
</p>

<a class="index-entry-id" id="index-ASCII-1"></a>
<p>Some utilities that match regular expressions provide a nonstandard
&lsquo;<samp class="samp">[:ascii:]</samp>&rsquo; character class; <code class="command">awk</code> does not. However, you
can simulate such a construct using &lsquo;<samp class="samp">[\x00-\x7F]</samp>&rsquo;.  This matches
all values numerically between zero and 127, which is the defined
range of the ASCII character set.  Use a complemented character list
(&lsquo;<samp class="samp">[^\x00-\x7F]</samp>&rsquo;) to match any single-byte characters that are not
in the ASCII range.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> Some older versions of Unix <code class="command">awk</code>
treat <code class="code">[:blank:]</code> like <code class="code">[:space:]</code>, incorrectly matching
more characters than they should.  Caveat Emptor.
</p></blockquote>

<a class="index-entry-id" id="index-bracket-expressions-collating-elements"></a>
<a class="index-entry-id" id="index-bracket-expressions-non_002dASCII"></a>
<a class="index-entry-id" id="index-collating-elements"></a>
<p>Two additional special sequences can appear in bracket expressions.
These apply to non-ASCII character sets, which can have single symbols
(called <em class="dfn">collating elements</em>) that are represented with more than one
character. They can also have several characters that are equivalent for
<em class="dfn">collating</em>, or sorting, purposes.  (For example, in French, a plain &ldquo;e&rdquo;
and a grave-accented &ldquo;&egrave;&rdquo; are equivalent.)
These sequences are:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-bracket-expressions-collating-symbols"></a>
</dd>
<dt><a id="index-collating-symbols"></a><span>Collating symbols<a class="copiable-link" href="#index-collating-symbols"> &para;</a></span></dt>
<dd><p>Multicharacter collating elements enclosed between
&lsquo;<samp class="samp">[.</samp>&rsquo; and &lsquo;<samp class="samp">.]</samp>&rsquo;.  For example, if &lsquo;<samp class="samp">ch</samp>&rsquo; is a collating element,
then &lsquo;<samp class="samp">[[.ch.]]</samp>&rsquo; is a regexp that matches this collating element, whereas
&lsquo;<samp class="samp">[ch]</samp>&rsquo; is a regexp that matches either &lsquo;<samp class="samp">c</samp>&rsquo; or &lsquo;<samp class="samp">h</samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-bracket-expressions-equivalence-classes"></a>
</dd>
<dt>Equivalence classes</dt>
<dd><p>Locale-specific names for a list of
characters that are equal. The name is enclosed between
&lsquo;<samp class="samp">[=</samp>&rsquo; and &lsquo;<samp class="samp">=]</samp>&rsquo;.
For example, the name &lsquo;<samp class="samp">e</samp>&rsquo; might be used to represent all of
&ldquo;e,&rdquo; &ldquo;&ecirc;,&rdquo; &ldquo;&egrave;,&rdquo; and &ldquo;&eacute;.&rdquo; In this case, &lsquo;<samp class="samp">[[=e=]]</samp>&rsquo; is a regexp
that matches any of &lsquo;<samp class="samp">e</samp>&rsquo;, &lsquo;<samp class="samp">&ecirc;</samp>&rsquo;, &lsquo;<samp class="samp">&eacute;</samp>&rsquo;, or &lsquo;<samp class="samp">&egrave;</samp>&rsquo;.
</p></dd>
</dl>

<p>These features are very valuable in non-English-speaking locales.
</p>
<a class="index-entry-id" id="index-internationalization-localization-character-classes"></a>
<a class="index-entry-id" id="index-gawk-character-classes-and"></a>
<a class="index-entry-id" id="index-POSIX-awk-bracket-expressions-and-character-classes-1"></a>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> The library functions that <code class="command">gawk</code> uses for regular
expression matching currently recognize only POSIX character classes;
they do not recognize collating symbols or equivalence classes.
</p></blockquote>

<p>Inside a bracket expression, an opening bracket (&lsquo;<samp class="samp">[</samp>&rsquo;) that does
not start a character class, collating element or equivalence class is
taken literally. This is also true of &lsquo;<samp class="samp">.</samp>&rsquo; and &lsquo;<samp class="samp">*</samp>&rsquo;.
</p>
<hr>
</div>
<div class="section-level-extent" id="Leftmost-Longest">
<div class="nav-panel">
<p>
Next: <a href="#Computed-Regexps" accesskey="n" rel="next">Using Dynamic Regexps</a>, Previous: <a href="#Bracket-Expressions" accesskey="p" rel="prev">Using Bracket Expressions</a>, Up: <a href="#Regexp" accesskey="u" rel="up">Regular Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="How-Much-Text-Matches_003f"><span>3.5 How Much Text Matches?<a class="copiable-link" href="#How-Much-Text-Matches_003f"> &para;</a></span></h3>

<a class="index-entry-id" id="index-regular-expressions-leftmost-longest-match"></a>
<p>Consider the following:
</p>
<div class="example">
<pre class="example-preformatted">echo aaaabcd | awk '{ sub(/a+/, &quot;&lt;A&gt;&quot;); print }'
</pre></div>

<p>This example uses the <code class="code">sub()</code> function to make a change to the input
record.  (<code class="code">sub()</code> replaces the first instance of any text matched
by the first argument with the string provided as the second argument;
see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>.)  Here, the regexp <code class="code">/a+/</code> indicates &ldquo;one
or more &lsquo;<samp class="samp">a</samp>&rsquo; characters,&rdquo; and the replacement text is &lsquo;<samp class="samp">&lt;A&gt;</samp>&rsquo;.
</p>
<p>The input contains four &lsquo;<samp class="samp">a</samp>&rsquo; characters.
<code class="command">awk</code> (and POSIX) regular expressions always match
the leftmost, <em class="emph">longest</em> sequence of input characters that can
match.  Thus, all four &lsquo;<samp class="samp">a</samp>&rsquo; characters are
replaced with &lsquo;<samp class="samp">&lt;A&gt;</samp>&rsquo; in this example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo aaaabcd | awk '{ sub(/a+/, &quot;&lt;A&gt;&quot;); print }'</kbd>
-| &lt;A&gt;bcd
</pre></div>

<p>For simple match/no-match tests, this is not so important. But when doing
text matching and substitutions with the <code class="code">match()</code>, <code class="code">sub()</code>, <code class="code">gsub()</code>,
and <code class="code">gensub()</code> functions, it is very important.
Understanding this principle is also important for regexp-based record
and field splitting (see <a class="pxref" href="#Records">How Input Is Split into Records</a>,
and also see <a class="pxref" href="#Field-Separators">Specifying How Fields Are Separated</a>).
</p>
<hr>
</div>
<div class="section-level-extent" id="Computed-Regexps">
<div class="nav-panel">
<p>
Next: <a href="#GNU-Regexp-Operators" accesskey="n" rel="next"><code class="command">gawk</code>-Specific Regexp Operators</a>, Previous: <a href="#Leftmost-Longest" accesskey="p" rel="prev">How Much Text Matches?</a>, Up: <a href="#Regexp" accesskey="u" rel="up">Regular Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Using-Dynamic-Regexps"><span>3.6 Using Dynamic Regexps<a class="copiable-link" href="#Using-Dynamic-Regexps"> &para;</a></span></h3>

<a class="index-entry-id" id="index-regular-expressions-computed"></a>
<a class="index-entry-id" id="index-regular-expressions-dynamic"></a>
<a class="index-entry-id" id="index-_007e-_0028tilde_0029_002c-_007e-operator-1"></a>
<a class="index-entry-id" id="index-tilde-_0028_007e_0029_002c-_007e-operator-1"></a>
<a class="index-entry-id" id="index-_0021-_0028exclamation-point_0029-_0021_007e-operator-1"></a>
<a class="index-entry-id" id="index-exclamation-point-_0028_0021_0029-_0021_007e-operator-1"></a>
<p>The righthand side of a &lsquo;<samp class="samp">~</samp>&rsquo; or &lsquo;<samp class="samp">!~</samp>&rsquo; operator need not be a
regexp constant (i.e., a string of characters between slashes).  It may
be any expression.  The expression is evaluated and converted to a string
if necessary; the contents of the string are then used as the
regexp.  A regexp computed in this way is called a <em class="dfn">dynamic
regexp</em> or a <em class="dfn">computed regexp</em>:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN { digits_regexp = &quot;[[:digit:]]+&quot; }
$0 ~ digits_regexp    { print }
</pre></div>

<p>This sets <code class="code">digits_regexp</code> to a regexp that describes one or more digits,
and tests whether the input record matches this regexp.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> When using the &lsquo;<samp class="samp">~</samp>&rsquo; and &lsquo;<samp class="samp">!~</samp>&rsquo;
operators, be aware that there is a difference between a regexp constant
enclosed in slashes and a string constant enclosed in double quotes.
If you are going to use a string constant, you have to understand that
the string is, in essence, scanned <em class="emph">twice</em>: the first time when
<code class="command">awk</code> reads your program, and the second time when it goes to
match the string on the lefthand side of the operator with the pattern
on the right.  This is true of any string-valued expression (such as
<code class="code">digits_regexp</code>, shown in the previous example), not just string constants.
</p></blockquote>

<a class="index-entry-id" id="index-regexp-constants-slashes-vs_002e-quotes"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-in-regexp-constants"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-in-regexp-constants"></a>
<a class="index-entry-id" id="index-_0022-_0028double-quote_0029-in-regexp-constants"></a>
<a class="index-entry-id" id="index-double-quote-_0028_0022_0029-in-regexp-constants"></a>
<p>What difference does it make if the string is
scanned twice? The answer has to do with escape sequences, and particularly
with backslashes.  To get a backslash into a regular expression inside a
string, you have to type two backslashes.
</p>
<p>For example, <code class="code">/\*/</code> is a regexp constant for a literal &lsquo;<samp class="samp">*</samp>&rsquo;.
Only one backslash is needed.  To do the same thing with a string,
you have to type <code class="code">&quot;\\*&quot;</code>.  The first backslash escapes the
second one so that the string actually contains the
two characters &lsquo;<samp class="samp">\</samp>&rsquo; and &lsquo;<samp class="samp">*</samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-troubleshooting-regexp-constants-vs_002e-string-constants"></a>
<a class="index-entry-id" id="index-regexp-constants-vs_002e-string-constants"></a>
<a class="index-entry-id" id="index-string-constants-vs_002e-regexp-constants"></a>
<p>Given that you can use both regexp and string constants to describe
regular expressions, which should you use?  The answer is &ldquo;regexp
constants,&rdquo; for several reasons:
</p>
<ul class="itemize mark-bullet">
<li>String constants are more complicated to write and
more difficult to read. Using regexp constants makes your programs
less error-prone.  Not understanding the difference between the two
kinds of constants is a common source of errors.

</li><li>It is more efficient to use regexp constants. <code class="command">awk</code> can note
that you have supplied a regexp and store it internally in a form that
makes pattern matching more efficient.  When using a string constant,
<code class="command">awk</code> must first convert the string into this internal form and
then perform the pattern matching.

</li><li>Using regexp constants is better form; it shows clearly that you
intend a regexp match.
</li></ul>

<a class="index-entry-id" id="index-sidebar-Using-_005cn-in-Bracket-Expressions-of-Dynamic-Regexps"></a>
<table class="cartouche" border="1"><tr><th>
Using <code class="code">\n</code> in Bracket Expressions of Dynamic Regexps</th></tr><tr><td>
<a class="index-entry-id" id="index-regular-expressions-dynamic-with-embedded-newlines"></a>
<a class="index-entry-id" id="index-newlines-in-dynamic-regexps"></a>

<p>Some older versions of <code class="command">awk</code> do not allow the newline
character to be used inside a bracket expression for a dynamic regexp:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '$0 ~ &quot;[ \t\n]&quot;'</kbd>
error&rarr; awk: newline in character class [
error&rarr; ]...
error&rarr;  source line number 1
error&rarr;  context is
error&rarr;        $0 ~ &quot;[ &gt;&gt;&gt;  \t\n]&quot; &lt;&lt;&lt;
</pre></div>

<a class="index-entry-id" id="index-newlines-in-regexp-constants"></a>
<p>But a newline in a regexp constant works with no problem:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '$0 ~ /[ \t\n]/'</kbd>
<kbd class="kbd">here is a sample line</kbd>
-| here is a sample line
<kbd class="kbd">Ctrl-d</kbd>
</pre></div>

<p><code class="command">gawk</code> does not have this problem, and it isn&rsquo;t likely to
occur often in practice, but it&rsquo;s worth noting for future reference.
</p></td></tr></table>

<hr>
</div>
<div class="section-level-extent" id="GNU-Regexp-Operators">
<div class="nav-panel">
<p>
Next: <a href="#Case_002dsensitivity" accesskey="n" rel="next">Case Sensitivity in Matching</a>, Previous: <a href="#Computed-Regexps" accesskey="p" rel="prev">Using Dynamic Regexps</a>, Up: <a href="#Regexp" accesskey="u" rel="up">Regular Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="gawk_002dSpecific-Regexp-Operators"><span>3.7 <code class="command">gawk</code>-Specific Regexp Operators<a class="copiable-link" href="#gawk_002dSpecific-Regexp-Operators"> &para;</a></span></h3>


<a class="index-entry-id" id="index-regular-expressions-operators-gawk"></a>
<a class="index-entry-id" id="index-gawk-regular-expressions-operators"></a>
<a class="index-entry-id" id="index-operators-GNU_002dspecific"></a>
<a class="index-entry-id" id="index-regular-expressions-operators-for-words"></a>
<a class="index-entry-id" id="index-word_002c-regexp-definition-of"></a>
<p>GNU software that deals with regular expressions provides a number of
additional regexp operators.  These operators are described in this
section and are specific to <code class="command">gawk</code>;
they are not available in other <code class="command">awk</code> implementations.
Most of the additional operators deal with word matching.
For our purposes, a <em class="dfn">word</em> is a sequence of one or more letters, digits,
or underscores (&lsquo;<samp class="samp">_</samp>&rsquo;):
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005cs-operator-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005cs-operator-_0028gawk_0029"></a>
</dd>
<dt><code class="code">\s</code></dt>
<dd><p>Matches any space character as defined by the current locale.
Think of it as shorthand for
&lsquo;<samp class="samp">[[:space:]]</samp>&rsquo;<!-- /@w -->.
</p>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005cS-operator-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005cS-operator-_0028gawk_0029"></a>
</dd>
<dt><code class="code">\S</code></dt>
<dd><p>Matches any character that is not a space, as defined by the current locale.
Think of it as shorthand for
&lsquo;<samp class="samp">[^[:space:]]</samp>&rsquo;<!-- /@w -->.
</p>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005cw-operator-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005cw-operator-_0028gawk_0029"></a>
</dd>
<dt><code class="code">\w</code></dt>
<dd><p>Matches any word-constituent character&mdash;that is, it matches any
letter, digit, or underscore. Think of it as shorthand for
&lsquo;<samp class="samp">[[:alnum:]_]</samp>&rsquo;<!-- /@w -->.
</p>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005cW-operator-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005cW-operator-_0028gawk_0029"></a>
</dd>
<dt><code class="code">\W</code></dt>
<dd><p>Matches any character that is not word-constituent.
Think of it as shorthand for
&lsquo;<samp class="samp">[^[:alnum:]_]</samp>&rsquo;<!-- /@w -->.
</p>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005c_003c-operator-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005c_003c-operator-_0028gawk_0029"></a>
</dd>
<dt><code class="code">\&lt;</code></dt>
<dd><p>Matches the empty string at the beginning of a word.
For example, <code class="code">/\&lt;away/</code> matches &lsquo;<samp class="samp">away</samp>&rsquo; but not
&lsquo;<samp class="samp">stowaway</samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005c_003e-operator-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005c_003e-operator-_0028gawk_0029"></a>
</dd>
<dt><code class="code">\&gt;</code></dt>
<dd><p>Matches the empty string at the end of a word.
For example, <code class="code">/stow\&gt;/</code> matches &lsquo;<samp class="samp">stow</samp>&rsquo; but not &lsquo;<samp class="samp">stowaway</samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005cy-operator-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005cy-operator-_0028gawk_0029"></a>
</dd>
<dt><a id="index-word-boundaries_002c-matching"></a><span><code class="code">\y</code><a class="copiable-link" href="#index-word-boundaries_002c-matching"> &para;</a></span></dt>
<dd><p>Matches the empty string at either the beginning or the
end of a word (i.e., the word boundar<strong class="strong">y</strong>).  For example, &lsquo;<samp class="samp">\yballs?\y</samp>&rsquo;
matches either &lsquo;<samp class="samp">ball</samp>&rsquo; or &lsquo;<samp class="samp">balls</samp>&rsquo;, as a separate word.
</p>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005cB-operator-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005cB-operator-_0028gawk_0029"></a>
</dd>
<dt><code class="code">\B</code></dt>
<dd><p>Matches the empty string that occurs between two
word-constituent characters. For example,
<code class="code">/\Brat\B/</code> matches &lsquo;<samp class="samp">crate</samp>&rsquo;, but it does not match &lsquo;<samp class="samp">dirty rat</samp>&rsquo;.
&lsquo;<samp class="samp">\B</samp>&rsquo; is essentially the opposite of &lsquo;<samp class="samp">\y</samp>&rsquo;.
Another way to think of this is that &lsquo;<samp class="samp">\B</samp>&rsquo; matches the empty string
provided it&rsquo;s not at the edge of a word.
</p></dd>
</dl>

<a class="index-entry-id" id="index-buffers-operators-for"></a>
<a class="index-entry-id" id="index-regular-expressions-operators-for-buffers"></a>
<a class="index-entry-id" id="index-operators-string_002dmatching-for-buffers"></a>
<p>There are two other operators that work on buffers.  In Emacs, a
<em class="dfn">buffer</em> is, naturally, an Emacs buffer.
Other GNU programs, including <code class="command">gawk</code>,
consider the entire string to match as the buffer.
The operators are:
</p>
<dl class="table">
<dt><code class="code">\`</code></dt>
<dd><a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005c_0060-operator-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005c_0060-operator-_0028gawk_0029"></a>
<p>Matches the empty string at the
beginning of a buffer (string)
</p>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-_005c_0027-operator-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-_005c_0027-operator-_0028gawk_0029"></a>
</dd>
<dt><code class="code">\'</code></dt>
<dd><p>Matches the empty string at the
end of a buffer (string)
</p></dd>
</dl>

<a class="index-entry-id" id="index-_005e-_0028caret_0029-regexp-operator-1"></a>
<a class="index-entry-id" id="index-caret-_0028_005e_0029-regexp-operator-1"></a>
<a class="index-entry-id" id="index-_003f-_0028question-mark_0029-regexp-operator-1"></a>
<a class="index-entry-id" id="index-question-mark-_0028_003f_0029-regexp-operator-1"></a>
<p>Because &lsquo;<samp class="samp">^</samp>&rsquo; and &lsquo;<samp class="samp">$</samp>&rsquo; always work in terms of the beginning
and end of strings, these operators don&rsquo;t add any new capabilities
for <code class="command">awk</code>.  They are provided for compatibility with other
GNU software.
</p>
<a class="index-entry-id" id="index-gawk-word_002dboundary-operator"></a>
<a class="index-entry-id" id="index-word_002dboundary-operator-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-operators-word_002dboundary-_0028gawk_0029"></a>
<p>In other GNU software, the word-boundary operator is &lsquo;<samp class="samp">\b</samp>&rsquo;. However,
that conflicts with the <code class="command">awk</code> language&rsquo;s definition of &lsquo;<samp class="samp">\b</samp>&rsquo;
as backspace, so <code class="command">gawk</code> uses a different letter.
An alternative method would have been to require two backslashes in the
GNU operators, but this was deemed too confusing. The current
method of using &lsquo;<samp class="samp">\y</samp>&rsquo; for the GNU &lsquo;<samp class="samp">\b</samp>&rsquo; appears to be the
lesser of two evils.
</p>
<a class="index-entry-id" id="index-regular-expressions-gawk_002c-command_002dline-options"></a>
<a class="index-entry-id" id="index-gawk-command_002dline-options_002c-regular-expressions-and"></a>
<p>The various command-line options
(see <a class="pxref" href="#Options">Command-Line Options</a>)
control how <code class="command">gawk</code> interprets characters in regexps:
</p>
<dl class="table">
<dt>No options</dt>
<dd><p>In the default case, <code class="command">gawk</code> provides all the facilities of
POSIX regexps and the
previously described
GNU regexp operators.
GNU regexp operators described
in <a class="ref" href="#Regexp-Operators">Regular Expression Operators</a>.
</p>
</dd>
<dt><samp class="option">--posix</samp></dt>
<dd><p>Match only POSIX regexps; the GNU operators are not special
(e.g., &lsquo;<samp class="samp">\w</samp>&rsquo; matches a literal &lsquo;<samp class="samp">w</samp>&rsquo;).  Interval expressions
are allowed.
</p>
</dd>
<dt><a id="index-Brian-Kernighan_0027s-awk-2"></a><span><samp class="option">--traditional</samp><a class="copiable-link" href="#index-Brian-Kernighan_0027s-awk-2"> &para;</a></span></dt>
<dd><p>Match traditional Unix <code class="command">awk</code> regexps. The GNU operators
are not special.  Because BWK <code class="command">awk</code> supports them,
the POSIX character classes (&lsquo;<samp class="samp">[[:alnum:]]</samp>&rsquo;, etc.) are available.
So too, interval expressions are allowed.
Characters described by octal and hexadecimal escape sequences are
treated literally, even if they represent regexp metacharacters.
</p>
</dd>
<dt><samp class="option">--re-interval</samp></dt>
<dd><p>This option remains for backwards compatibility but no longer has any
real effect.
</p></dd>
</dl>

<hr>
</div>
<div class="section-level-extent" id="Case_002dsensitivity">
<div class="nav-panel">
<p>
Next: <a href="#Regexp-Summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#GNU-Regexp-Operators" accesskey="p" rel="prev"><code class="command">gawk</code>-Specific Regexp Operators</a>, Up: <a href="#Regexp" accesskey="u" rel="up">Regular Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Case-Sensitivity-in-Matching"><span>3.8 Case Sensitivity in Matching<a class="copiable-link" href="#Case-Sensitivity-in-Matching"> &para;</a></span></h3>

<a class="index-entry-id" id="index-regular-expressions-case-sensitivity"></a>
<a class="index-entry-id" id="index-case-sensitivity-regexps-and"></a>
<p>Case is normally significant in regular expressions, both when matching
ordinary characters (i.e., not metacharacters) and inside bracket
expressions.  Thus, a &lsquo;<samp class="samp">w</samp>&rsquo; in a regular expression matches only a lowercase
&lsquo;<samp class="samp">w</samp>&rsquo; and not an uppercase &lsquo;<samp class="samp">W</samp>&rsquo;.
</p>
<p>The simplest way to do a case-independent match is to use a bracket
expression&mdash;for example, &lsquo;<samp class="samp">[Ww]</samp>&rsquo;.  However, this can be cumbersome if
you need to use it often, and it can make the regular expressions harder
to read.  There are two alternatives that you might prefer.
</p>
<p>One way to perform a case-insensitive match at a particular point in the
program is to convert the data to a single case, using the
<code class="code">tolower()</code> or <code class="code">toupper()</code> built-in string functions (which we
haven&rsquo;t discussed yet;
see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
For example:
</p>
<div class="example">
<pre class="example-preformatted">tolower($1) ~ /foo/  { ... }
</pre></div>

<p>converts the first field to lowercase before matching against it.
This works in any POSIX-compliant <code class="command">awk</code>.
</p>
<a class="index-entry-id" id="index-gawk-regular-expressions-case-sensitivity"></a>
<a class="index-entry-id" id="index-case-sensitivity-gawk"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-regular-expressions"></a>
<a class="index-entry-id" id="index-_007e-_0028tilde_0029_002c-_007e-operator-2"></a>
<a class="index-entry-id" id="index-tilde-_0028_007e_0029_002c-_007e-operator-2"></a>
<a class="index-entry-id" id="index-_0021-_0028exclamation-point_0029-_0021_007e-operator-2"></a>
<a class="index-entry-id" id="index-exclamation-point-_0028_0021_0029-_0021_007e-operator-2"></a>
<a class="index-entry-id" id="index-IGNORECASE-variable-with-_007e-and-_0021_007e-operators"></a>
<a class="index-entry-id" id="index-gawk-IGNORECASE-variable-in"></a>
<p>Another method, specific to <code class="command">gawk</code>, is to set the variable
<code class="code">IGNORECASE</code> to a nonzero value (see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>).
When <code class="code">IGNORECASE</code> is not zero, <em class="emph">all</em> regexp and string
operations ignore case.
</p>
<p>Changing the value of <code class="code">IGNORECASE</code> dynamically controls the
case sensitivity of the program as it runs.  Case is significant by
default because <code class="code">IGNORECASE</code> (like most variables) is initialized
to zero:
</p>
<div class="example">
<pre class="example-preformatted">x = &quot;aB&quot;
if (x ~ /ab/) ...   # this test will fail

IGNORECASE = 1
if (x ~ /ab/) ...   # now it will succeed
</pre></div>

<p>In general, you cannot use <code class="code">IGNORECASE</code> to make certain rules
case insensitive and other rules case sensitive, as there is no
straightforward way
to set <code class="code">IGNORECASE</code> just for the pattern of
a particular rule.<a class="footnote" id="DOCF19" href="#FOOT19"><sup>19</sup></a>
To do this, use either bracket expressions or <code class="code">tolower()</code>.  However, one
thing you can do with <code class="code">IGNORECASE</code> only is dynamically turn
case sensitivity on or off for all the rules at once.
</p>
<p><code class="code">IGNORECASE</code> can be set on the command line or in a <code class="code">BEGIN</code> rule
(see <a class="pxref" href="#Other-Arguments">Other Command-Line Arguments</a>; also
see <a class="pxref" href="#Using-BEGIN_002fEND">Startup and Cleanup Actions</a>).
Setting <code class="code">IGNORECASE</code> from the command line is a way to make
a program case insensitive without having to edit it.
</p>
<p>In multibyte locales, the equivalences between upper- and lowercase
characters are tested based on the wide-character values of the locale&rsquo;s
character set.  Prior to version 5.0, single-byte characters were
tested based on the ISO-8859-1 (ISO Latin-1) character set.  However, as
of version 5.0, single-byte characters are also tested based on
the values of the locale&rsquo;s character set.<a class="footnote" id="DOCF20" href="#FOOT20"><sup>20</sup></a>
</p>
<p>The value of <code class="code">IGNORECASE</code> has no effect if <code class="command">gawk</code> is in
compatibility mode (see <a class="pxref" href="#Options">Command-Line Options</a>).
Case is always significant in compatibility mode.
</p>
<hr>
</div>
<div class="section-level-extent" id="Regexp-Summary">
<div class="nav-panel">
<p>
Previous: <a href="#Case_002dsensitivity" accesskey="p" rel="prev">Case Sensitivity in Matching</a>, Up: <a href="#Regexp" accesskey="u" rel="up">Regular Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary-2"><span>3.9 Summary<a class="copiable-link" href="#Summary-2"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>Regular expressions describe sets of strings to be matched.
In <code class="command">awk</code>, regular expression constants are written enclosed
between slashes: <code class="code">/</code>&hellip;<code class="code">/</code>.

</li><li>Regexp constants may be used standalone in patterns and
in conditional expressions, or as part of matching expressions
using the &lsquo;<samp class="samp">~</samp>&rsquo; and &lsquo;<samp class="samp">!~</samp>&rsquo; operators.

</li><li>Escape sequences let you represent nonprintable characters and
also let you represent regexp metacharacters as literal characters
to be matched.

</li><li>Regexp operators provide grouping, alternation, and repetition.

</li><li>Bracket expressions give you a shorthand for specifying sets
of characters that can match at a particular point in a regexp.
Within bracket expressions, POSIX character classes let you specify
certain groups of characters in a locale-independent fashion.

</li><li>Regular expressions match the leftmost longest text in the string being
matched.  This matters for cases where you need to know the extent of
the match, such as for text substitution and when the record separator
is a regexp.

</li><li>Matching expressions may use dynamic regexps (i.e., string values
treated as regular expressions).

</li><li><code class="command">gawk</code>&rsquo;s <code class="code">IGNORECASE</code> variable lets you control the
case sensitivity of regexp matching.  In other <code class="command">awk</code>
versions, use <code class="code">tolower()</code> or <code class="code">toupper()</code>.

</li></ul>


<hr>
</div>
</div>
<div class="chapter-level-extent" id="Reading-Files">
<div class="nav-panel">
<p>
Next: <a href="#Printing" accesskey="n" rel="next">Printing Output</a>, Previous: <a href="#Regexp" accesskey="p" rel="prev">Regular Expressions</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Reading-Input-Files"><span>4 Reading Input Files<a class="copiable-link" href="#Reading-Input-Files"> &para;</a></span></h2>

<a class="index-entry-id" id="index-reading-input-files"></a>
<a class="index-entry-id" id="index-input-files-reading"></a>
<a class="index-entry-id" id="index-input-files"></a>
<a class="index-entry-id" id="index-FILENAME-variable"></a>
<p>In the typical <code class="command">awk</code> program,
<code class="command">awk</code> reads all input either from the
standard input (by default, this is the keyboard, but often it is a pipe from another
command) or from files whose names you specify on the <code class="command">awk</code>
command line.  If you specify input files, <code class="command">awk</code> reads them
in order, processing all the data from one before going on to the next.
The name of the current input file can be found in the predefined variable
<code class="code">FILENAME</code>
(see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>).
</p>
<a class="index-entry-id" id="index-records"></a>
<a class="index-entry-id" id="index-fields"></a>
<p>The input is read in units called <em class="dfn">records</em>, and is processed by the
rules of your program one record at a time.
By default, each record is one line.  Each
record is automatically split into chunks called <em class="dfn">fields</em>.
This makes it more convenient for programs to work on the parts of a record.
</p>
<a class="index-entry-id" id="index-getline-command"></a>
<p>On rare occasions, you may need to use the <code class="code">getline</code> command.
The  <code class="code">getline</code> command is valuable both because it
can do explicit input from any number of files, and because the files
used with it do not have to be named on the <code class="command">awk</code> command line
(see <a class="pxref" href="#Getline">Explicit Input with <code class="code">getline</code></a>).
</p>

<ul class="mini-toc">
<li><a href="#Records" accesskey="1">How Input Is Split into Records</a></li>
<li><a href="#Fields" accesskey="2">Examining Fields</a></li>
<li><a href="#Nonconstant-Fields" accesskey="3">Nonconstant Field Numbers</a></li>
<li><a href="#Changing-Fields" accesskey="4">Changing the Contents of a Field</a></li>
<li><a href="#Field-Separators" accesskey="5">Specifying How Fields Are Separated</a></li>
<li><a href="#Constant-Size" accesskey="6">Reading Fixed-Width Data</a></li>
<li><a href="#Splitting-By-Content" accesskey="7">Defining Fields by Content</a></li>
<li><a href="#Testing-field-creation" accesskey="8">Checking How <code class="command">gawk</code> Is Splitting Records</a></li>
<li><a href="#Multiple-Line" accesskey="9">Multiple-Line Records</a></li>
<li><a href="#Getline">Explicit Input with <code class="code">getline</code></a></li>
<li><a href="#Read-Timeout">Reading Input with a Timeout</a></li>
<li><a href="#Retrying-Input">Retrying Reads After Certain Input Errors</a></li>
<li><a href="#Command_002dline-directories">Directories on the Command Line</a></li>
<li><a href="#Input-Summary">Summary</a></li>
<li><a href="#Input-Exercises">Exercises</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Records">
<div class="nav-panel">
<p>
Next: <a href="#Fields" accesskey="n" rel="next">Examining Fields</a>, Up: <a href="#Reading-Files" accesskey="u" rel="up">Reading Input Files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="How-Input-Is-Split-into-Records"><span>4.1 How Input Is Split into Records<a class="copiable-link" href="#How-Input-Is-Split-into-Records"> &para;</a></span></h3>

<a class="index-entry-id" id="index-input-splitting-into-records"></a>
<a class="index-entry-id" id="index-records-splitting-input-into"></a>
<a class="index-entry-id" id="index-NR-variable"></a>
<a class="index-entry-id" id="index-FNR-variable"></a>
<p><code class="command">awk</code> divides the input for your program into records and fields.
It keeps track of the number of records that have been read so far from
the current input file.  This value is stored in a predefined variable
called <code class="code">FNR</code>, which is reset to zero every time a new file is started.
Another predefined variable, <code class="code">NR</code>, records the total number of input
records read so far from all data files.  It starts at zero, but is
never automatically reset to zero.
</p>
<p>Normally, records are separated by newline characters.  You can control how
records are separated by assigning values to the built-in variable <code class="code">RS</code>.
If <code class="code">RS</code> is any single character, that character separates records.
Otherwise (in <code class="command">gawk</code>), <code class="code">RS</code> is treated as a regular expression.
This mechanism is explained in greater detail shortly.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> When <code class="command">gawk</code> is invoked with the <samp class="option">--csv</samp> option, nothing
in this section applies. See <a class="xref" href="#Comma-Separated-Fields">Working With Comma Separated Value Files</a>, for the
details.
</p></blockquote>


<ul class="mini-toc">
<li><a href="#awk-split-records" accesskey="1">Record Splitting with Standard <code class="command">awk</code></a></li>
<li><a href="#gawk-split-records" accesskey="2">Record Splitting with <code class="command">gawk</code></a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="awk-split-records">
<div class="nav-panel">
<p>
Next: <a href="#gawk-split-records" accesskey="n" rel="next">Record Splitting with <code class="command">gawk</code></a>, Up: <a href="#Records" accesskey="u" rel="up">How Input Is Split into Records</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Record-Splitting-with-Standard-awk"><span>4.1.1 Record Splitting with Standard <code class="command">awk</code><a class="copiable-link" href="#Record-Splitting-with-Standard-awk"> &para;</a></span></h4>

<a class="index-entry-id" id="index-separators-for-records"></a>
<a class="index-entry-id" id="index-record-separators"></a>
<p>Records are separated by a character called the <em class="dfn">record separator</em>.
By default, the record separator is the newline character.
This is why records are, by default, single lines.
To use a different character for the record separator,
simply assign that character to the predefined variable <code class="code">RS</code>.
</p>
<a class="index-entry-id" id="index-record-separators-newlines-as"></a>
<a class="index-entry-id" id="index-newlines-as-record-separators"></a>
<a class="index-entry-id" id="index-RS-variable"></a>
<p>Like any other variable,
the value of <code class="code">RS</code> can be changed in the <code class="command">awk</code> program
with the assignment operator, &lsquo;<samp class="samp">=</samp>&rsquo;
(see <a class="pxref" href="#Assignment-Ops">Assignment Expressions</a>).
The new record-separator character should be enclosed in quotation marks,
which indicate a string constant.  Often, the right time to do this is
at the beginning of execution, before any input is processed,
so that the very first record is read with the proper separator.
To do this, use the special <code class="code">BEGIN</code> pattern
(see <a class="pxref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>).
For example:
</p>
<div class="example">
<pre class="example-preformatted">awk 'BEGIN { RS = &quot;u&quot; }
     { print $0 }' mail-list
</pre></div>

<p>changes the value of <code class="code">RS</code> to &lsquo;<samp class="samp">u</samp>&rsquo;, before reading any input.
The new value is a string whose first character is the letter &ldquo;u&rdquo;; as a result, records
are separated by the letter &ldquo;u&rdquo;.  Then the input file is read, and the second
rule in the <code class="command">awk</code> program (the action with no pattern) prints each
record.  Because each <code class="code">print</code> statement adds a newline at the end of
its output, this <code class="command">awk</code> program copies the input
with each &lsquo;<samp class="samp">u</samp>&rsquo; changed to a newline.  Here are the results of running
the program on <samp class="file">mail-list</samp>:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN { RS = &quot;u&quot; }</kbd>
&gt;      <kbd class="kbd">{ print $0 }' mail-list</kbd>
</pre></div><pre class="example-preformatted">-| Amelia       555-5553     amelia.zodiac
-| sq
-| e@gmail.com    F
-| Anthony      555-3412     anthony.assert
-| ro@hotmail.com   A
-| Becky        555-7685     becky.algebrar
-| m@gmail.com      A
-| Bill         555-1675     bill.drowning@hotmail.com       A
-| Broderick    555-0542     broderick.aliq
-| otiens@yahoo.com R
-| Camilla      555-2912     camilla.inf
-| sar
-| m@skynet.be     R
-| Fabi
-| s       555-1234     fabi
-| s.
-| ndevicesim
-| s@
-| cb.ed
-|     F
-| J
-| lie        555-6699     j
-| lie.perscr
-| tabor@skeeve.com   F
-| Martin       555-6480     martin.codicib
-| s@hotmail.com    A
-| Sam
-| el       555-3430     sam
-| el.lanceolis@sh
-| .ed
-|         A
-| Jean-Pa
-| l    555-2127     jeanpa
-| l.campanor
-| m@ny
-| .ed
-|      R
-|
</pre></div>

<p>Note that the entry for the name &lsquo;<samp class="samp">Bill</samp>&rsquo; is not split.
In the original data file
(see <a class="pxref" href="#Sample-Data-Files">Data files for the Examples</a>),
the line looks like this:
</p>
<div class="example">
<pre class="example-preformatted">Bill         555-1675     bill.drowning@hotmail.com       A
</pre></div>

<p>It contains no &lsquo;<samp class="samp">u</samp>&rsquo;, so there is no reason to split the record,
unlike the others, which each have one or more occurrences of the &lsquo;<samp class="samp">u</samp>&rsquo;.
In fact, this record is treated as part of the previous record;
the newline separating them in the output
is the original newline in the data file, not the one added by
<code class="command">awk</code> when it printed the record!
</p>
<a class="index-entry-id" id="index-record-separators-changing"></a>
<a class="index-entry-id" id="index-separators-for-records-1"></a>
<p>Another way to change the record separator is on the command line,
using the variable-assignment feature
(see <a class="pxref" href="#Other-Arguments">Other Command-Line Arguments</a>):
</p>
<div class="example">
<pre class="example-preformatted">awk '{ print $0 }' RS=&quot;u&quot; mail-list
</pre></div>

<p>This sets <code class="code">RS</code> to &lsquo;<samp class="samp">u</samp>&rsquo; before processing <samp class="file">mail-list</samp>.
</p>
<p>Using an alphabetic character such as &lsquo;<samp class="samp">u</samp>&rsquo; for the record separator
is highly likely to produce strange results.
Using an unusual character such as &lsquo;<samp class="samp">/</samp>&rsquo; is more likely to
produce correct behavior in the majority of cases, but there
are no guarantees. The moral is: Know Your Data.
</p>
<p><code class="command">gawk</code> allows <code class="code">RS</code> to be a full regular expression
(discussed shortly; see <a class="pxref" href="#gawk-split-records">Record Splitting with <code class="command">gawk</code></a>).  Even so, using
a regular expression metacharacter, such as &lsquo;<samp class="samp">.</samp>&rsquo; as the single
character in the value of <code class="code">RS</code> has no special effect: it is
treated literally. This is required for backwards compatibility with
both Unix <code class="command">awk</code> and with POSIX.
</p>
<a class="index-entry-id" id="index-dark-corner-input-files"></a>
<p>Reaching the end of an input file terminates the current input record,
even if the last character in the file is not the character in <code class="code">RS</code>.
(d.c.)
</p>
<a class="index-entry-id" id="index-null-strings"></a>
<a class="index-entry-id" id="index-strings-empty"></a>
<p>The empty string <code class="code">&quot;&quot;</code> (a string without any characters)
has a special meaning
as the value of <code class="code">RS</code>. It means that records are separated
by one or more blank lines and nothing else.
See <a class="xref" href="#Multiple-Line">Multiple-Line Records</a> for more details.
</p>
<p>If you change the value of <code class="code">RS</code> in the middle of an <code class="command">awk</code> run,
the new value is used to delimit subsequent records, but the record
currently being processed, as well as records already processed, are not
affected.
</p>
<a class="index-entry-id" id="index-gawk-RT-variable-in"></a>
<a class="index-entry-id" id="index-RT-variable"></a>
<a class="index-entry-id" id="index-records-terminating"></a>
<a class="index-entry-id" id="index-terminating-records"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-record-separators"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-RS_002fRT-variables"></a>
<a class="index-entry-id" id="index-regular-expressions-as-record-separators"></a>
<a class="index-entry-id" id="index-record-separators-regular-expressions-as"></a>
<a class="index-entry-id" id="index-separators-for-records-regular-expressions-as"></a>
<p>After the end of the record has been determined, <code class="command">gawk</code>
sets the variable <code class="code">RT</code> to the text in the input that matched
<code class="code">RS</code>.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="gawk-split-records">
<div class="nav-panel">
<p>
Previous: <a href="#awk-split-records" accesskey="p" rel="prev">Record Splitting with Standard <code class="command">awk</code></a>, Up: <a href="#Records" accesskey="u" rel="up">How Input Is Split into Records</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Record-Splitting-with-gawk"><span>4.1.2 Record Splitting with <code class="command">gawk</code><a class="copiable-link" href="#Record-Splitting-with-gawk"> &para;</a></span></h4>

<a class="index-entry-id" id="index-common-extensions-RS-as-a-regexp"></a>
<a class="index-entry-id" id="index-extensions-common-RS-as-a-regexp"></a>
<p>When using <code class="command">gawk</code>, the value of <code class="code">RS</code> is not limited to a
one-character string.  If it contains more than one character, it is
treated as a regular expression
(see <a class="pxref" href="#Regexp">Regular Expressions</a>). (c.e.)
In general, each record
ends at the next string that matches the regular expression; the next
record starts at the end of the matching string.  This general rule is
actually at work in the usual case, where <code class="code">RS</code> contains just a
newline: a record ends at the beginning of the next matching string (the
next newline in the input), and the following record starts just after
the end of this string (at the first character of the following line).
The newline, because it matches <code class="code">RS</code>, is not part of either record.
</p>
<p>When <code class="code">RS</code> is a single character, <code class="code">RT</code>
contains the same single character. However, when <code class="code">RS</code> is a
regular expression, <code class="code">RT</code> contains
the actual input text that matched the regular expression.
</p>
<p>If the input file ends without any text matching <code class="code">RS</code>,
<code class="command">gawk</code> sets <code class="code">RT</code> to the null string.
</p>
<p>The following example illustrates both of these features.
It sets <code class="code">RS</code> equal to a regular expression that
matches either a newline or a series of one or more uppercase letters
with optional leading and/or trailing whitespace:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">$ <kbd class="kbd">echo record 1 AAAA record 2 BBBB record 3 |</kbd>
&gt; <kbd class="kbd">gawk 'BEGIN { RS = &quot;\n|( *[[:upper:]]+ *)&quot; }</kbd>
&gt;             <kbd class="kbd">{ print &quot;Record =&quot;, $0,&quot;and RT = [&quot; RT &quot;]&quot; }'</kbd>
</pre></div><pre class="example-preformatted">-| Record = record 1 and RT = [ AAAA ]
-| Record = record 2 and RT = [ BBBB ]
-| Record = record 3 and RT = [
-| ]
</pre></div>

<p>The square brackets delineate the contents of <code class="code">RT</code>, letting you
see the leading and trailing whitespace. The final value of
<code class="code">RT</code> is a newline.
See <a class="xref" href="#Simple-Sed">A Simple Stream Editor</a> for a more useful example
of <code class="code">RS</code> as a regexp and <code class="code">RT</code>.
</p>
<p>If you set <code class="code">RS</code> to a regular expression that allows optional
trailing text, such as &lsquo;<samp class="samp">RS = &quot;abc(XYZ)?&quot;</samp>&rsquo;, it is possible, due
to implementation constraints, that <code class="command">gawk</code> may match the leading
part of the regular expression, but not the trailing part, particularly
if the input text that could match the trailing part is fairly long.
<code class="command">gawk</code> attempts to avoid this problem, but currently, there&rsquo;s
no guarantee that this will never happen.
</p>
<a class="index-entry-id" id="index-sidebar-Caveats-When-Using-Regular-Expressions-for-RS"></a>
<table class="cartouche" border="1"><tr><th>
Caveats When Using Regular Expressions for <code class="code">RS</code></th></tr><tr><td>
<p>Remember that in <code class="command">awk</code>, the &lsquo;<samp class="samp">^</samp>&rsquo; and &lsquo;<samp class="samp">$</samp>&rsquo; anchor
metacharacters match the beginning and end of a <em class="emph">string</em>, and not
the beginning and end of a <em class="emph">line</em>.  As a result, something like
&lsquo;<samp class="samp">RS = &quot;^[[:upper:]]&quot;</samp>&rsquo; can only match at the beginning of a file.
This is because <code class="command">gawk</code> views the input file as one long string
that happens to contain newline characters.
It is thus best to avoid anchor metacharacters in the value of <code class="code">RS</code>.
</p>
<p>Record splitting with regular expressions works differently than
regexp matching with the <code class="code">sub()</code>, <code class="code">gsub()</code>, and <code class="code">gensub()</code>
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).  Those functions allow a regexp to match the empty string;
record splitting does not.  Thus, for example &lsquo;<samp class="samp">RS = &quot;()&quot;</samp>&rsquo; does <em class="emph">not</em>
split records between characters.
</p></td></tr></table>

<a class="index-entry-id" id="index-gawk-RT-variable-in-1"></a>
<a class="index-entry-id" id="index-RT-variable-1"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-RS_002fRT-variables-1"></a>
<p>The use of <code class="code">RS</code> as a regular expression and the <code class="code">RT</code>
variable are <code class="command">gawk</code> extensions; they are not available in
compatibility mode
(see <a class="pxref" href="#Options">Command-Line Options</a>).
In compatibility mode, only the first character of the value of
<code class="code">RS</code> determines the end of the record.
</p>
<a class="index-entry-id" id="index-Brian-Kernighan_0027s-awk-3"></a>
<p><code class="command">mawk</code> has allowed <code class="code">RS</code> to be a regexp for decades.
As of October, 2019, BWK <code class="command">awk</code> also supports it.  Neither
version supplies <code class="code">RT</code>, however.
</p>
<a class="index-entry-id" id="index-sidebar-RS-_003d-_0022_005c0_0022-Is-Not-Portable"></a>
<table class="cartouche" border="1"><tr><th>
<code class="code">RS = &quot;\0&quot;</code> Is Not Portable</th></tr><tr><td>
<a class="index-entry-id" id="index-portability-data-files-as-single-record"></a>
<p>There are times when you might want to treat an entire data file as a
single record.  The only way to make this happen is to give <code class="code">RS</code>
a value that you know doesn&rsquo;t occur in the input file.  This is hard
to do in a general way, such that a program always works for arbitrary
input files.
</p>
<p>You might think that for text files, the <small class="sc">NUL</small> character, which
consists of a character with all bits equal to zero, is a good
value to use for <code class="code">RS</code> in this case:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN { RS = &quot;\0&quot; }  # whole file becomes one record?
</pre></div>

<a class="index-entry-id" id="index-differences-in-awk-and-gawk-strings-storing"></a>
<p><code class="command">gawk</code> in fact accepts this, and uses the <small class="sc">NUL</small>
character for the record separator.
This works for certain special files, such as <samp class="file">/proc/environ</samp> on
GNU/Linux systems, where the <small class="sc">NUL</small> character is in fact the record separator.
However, this usage is <em class="emph">not</em> portable
to most other <code class="command">awk</code> implementations.
</p>
<a class="index-entry-id" id="index-dark-corner-strings_002c-storing"></a>
<p>Almost all other <code class="command">awk</code> implementations<a class="footnote" id="DOCF21" href="#FOOT21"><sup>21</sup></a> store strings internally as C-style strings.  C strings use the
<small class="sc">NUL</small> character as the string terminator.  In effect, this means that
&lsquo;<samp class="samp">RS = &quot;\0&quot;</samp>&rsquo; is the same as &lsquo;<samp class="samp">RS = &quot;&quot;</samp>&rsquo;.
(d.c.)
</p>
<p>It happens that recent versions of <code class="command">mawk</code> can use the <small class="sc">NUL</small>
character as a record separator. However, this is a special case:
<code class="command">mawk</code> does not allow embedded <small class="sc">NUL</small> characters in strings.
(This may change in a future version of <code class="command">mawk</code>.)
</p>
<a class="index-entry-id" id="index-records-treating-files-as"></a>
<a class="index-entry-id" id="index-treating-files_002c-as-single-records"></a>
<a class="index-entry-id" id="index-single-records_002c-treating-files-as"></a>
<p>See <a class="xref" href="#Readfile-Function">Reading a Whole File at Once</a> for an interesting way to read
whole files.  If you are using <code class="command">gawk</code>, see <a class="ref" href="#Extension-Sample-Readfile">Reading an Entire File</a> for another option.
</p></td></tr></table>

<hr>
</div>
</div>
<div class="section-level-extent" id="Fields">
<div class="nav-panel">
<p>
Next: <a href="#Nonconstant-Fields" accesskey="n" rel="next">Nonconstant Field Numbers</a>, Previous: <a href="#Records" accesskey="p" rel="prev">How Input Is Split into Records</a>, Up: <a href="#Reading-Files" accesskey="u" rel="up">Reading Input Files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Examining-Fields"><span>4.2 Examining Fields<a class="copiable-link" href="#Examining-Fields"> &para;</a></span></h3>

<a class="index-entry-id" id="index-examining-fields"></a>
<a class="index-entry-id" id="index-fields-1"></a>
<a class="index-entry-id" id="index-accessing-fields"></a>
<a class="index-entry-id" id="index-fields-examining"></a>
<a class="index-entry-id" id="index-whitespace-definition-of"></a>
<p>When <code class="command">awk</code> reads an input record, the record is
automatically <em class="dfn">parsed</em> or separated by the <code class="command">awk</code> utility into chunks
called <em class="dfn">fields</em>.  By default, fields are separated by <em class="dfn">whitespace</em>,
like words in a line.
Whitespace in <code class="command">awk</code> means any string of one or more spaces,
TABs, or newlines; other characters
that are considered whitespace by other languages
(such as formfeed, vertical tab, etc.) are <em class="emph">not</em> considered
whitespace by <code class="command">awk</code>.
</p>
<p>The purpose of fields is to make it more convenient for you to refer to
these pieces of the record.  You don&rsquo;t have to use them&mdash;you can
operate on the whole record if you want&mdash;but fields are what make
simple <code class="command">awk</code> programs so powerful.
</p>
<a class="index-entry-id" id="index-field-operator-_0024"></a>
<a class="index-entry-id" id="index-_0024-_0028dollar-sign_0029-_0024-field-operator"></a>
<a class="index-entry-id" id="index-dollar-sign-_0028_0024_0029-_0024-field-operator"></a>
<a class="index-entry-id" id="index-field-operators_002c-dollar-sign-as"></a>
<p>You use a dollar sign (&lsquo;<samp class="samp">$</samp>&rsquo;)
to refer to a field in an <code class="command">awk</code> program,
followed by the number of the field you want.  Thus, <code class="code">$1</code>
refers to the first field, <code class="code">$2</code> to the second, and so on.
(Unlike in the Unix shells, the field numbers are not limited to single digits.
<code class="code">$127</code> is the 127th field in the record.)
For example, suppose the following is a line of input:
</p>
<div class="example">
<pre class="example-preformatted">This seems like a pretty nice example.
</pre></div>

<p>Here the first field, or <code class="code">$1</code>, is &lsquo;<samp class="samp">This</samp>&rsquo;, the second field, or
<code class="code">$2</code>, is &lsquo;<samp class="samp">seems</samp>&rsquo;, and so on.  Note that the last field,
<code class="code">$7</code>, is &lsquo;<samp class="samp">example.</samp>&rsquo;.  Because there is no space between the
&lsquo;<samp class="samp">e</samp>&rsquo; and the &lsquo;<samp class="samp">.</samp>&rsquo;, the period is considered part of the seventh
field.
</p>
<a class="index-entry-id" id="index-NF-variable"></a>
<a class="index-entry-id" id="index-fields-number-of"></a>
<p><code class="code">NF</code> is a predefined variable whose value is the number of fields
in the current record.  <code class="command">awk</code> automatically updates the value
of <code class="code">NF</code> each time it reads a record.  No matter how many fields
there are, the last field in a record can be represented by <code class="code">$NF</code>.
So, <code class="code">$NF</code> is the same as <code class="code">$7</code>, which is &lsquo;<samp class="samp">example.</samp>&rsquo;.
If you try to reference a field beyond the last
one (such as <code class="code">$8</code> when the record has only seven fields), you get
the empty string.  If used in a numeric operation, you get zero.<a class="footnote" id="DOCF22" href="#FOOT22"><sup>22</sup></a>
</p>
<p>The use of <code class="code">$0</code>, which looks like a reference to the &ldquo;zeroth&rdquo; field, is
a special case: it represents the whole input record. Use it
when you are not interested in specific fields.
Here are some more examples:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '$1 ~ /li/ { print $0 }' mail-list</kbd>
-| Amelia       555-5553     amelia.zodiacusque@gmail.com    F
-| Julie        555-6699     julie.perscrutabor@skeeve.com   F
</pre></div>

<p>This example prints each record in the file <samp class="file">mail-list</samp> whose first
field contains the string &lsquo;<samp class="samp">li</samp>&rsquo;.
</p>
<p>By contrast, the following example looks for &lsquo;<samp class="samp">li</samp>&rsquo; in <em class="emph">the
entire record</em> and prints the first and last fields for each matching
input record:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '/li/ { print $1, $NF }' mail-list</kbd>
-| Amelia F
-| Broderick R
-| Julie F
-| Samuel A
</pre></div>

<hr>
</div>
<div class="section-level-extent" id="Nonconstant-Fields">
<div class="nav-panel">
<p>
Next: <a href="#Changing-Fields" accesskey="n" rel="next">Changing the Contents of a Field</a>, Previous: <a href="#Fields" accesskey="p" rel="prev">Examining Fields</a>, Up: <a href="#Reading-Files" accesskey="u" rel="up">Reading Input Files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Nonconstant-Field-Numbers"><span>4.3 Nonconstant Field Numbers<a class="copiable-link" href="#Nonconstant-Field-Numbers"> &para;</a></span></h3>
<a class="index-entry-id" id="index-fields-numbers"></a>
<a class="index-entry-id" id="index-field-numbers"></a>

<p>A field number need not be a constant.  Any expression in
the <code class="command">awk</code> language can be used after a &lsquo;<samp class="samp">$</samp>&rsquo; to refer to a
field.  The value of the expression specifies the field number.  If the
value is a string, rather than a number, it is converted to a number.
Consider this example:
</p>
<div class="example">
<pre class="example-preformatted">awk '{ print $NR }'
</pre></div>

<p>Recall that <code class="code">NR</code> is the number of records read so far: one in the
first record, two in the second, and so on.  So this example prints the first
field of the first record, the second field of the second record, and so
on.  For the twentieth record, field number 20 is printed; most likely,
the record has fewer than 20 fields, so this prints a blank line.
Here is another example of using expressions as field numbers:
</p>
<div class="example">
<pre class="example-preformatted">awk '{ print $(2*2) }' mail-list
</pre></div>

<p><code class="command">awk</code> evaluates the expression &lsquo;<samp class="samp">(2*2)</samp>&rsquo; and uses
its value as the number of the field to print.  The &lsquo;<samp class="samp">*</samp>&rsquo;
represents multiplication, so the expression &lsquo;<samp class="samp">2*2</samp>&rsquo; evaluates to four.
The parentheses are used so that the multiplication is done before the
&lsquo;<samp class="samp">$</samp>&rsquo; operation; they are necessary whenever there is a binary
operator<a class="footnote" id="DOCF23" href="#FOOT23"><sup>23</sup></a>
in the field-number expression.  This example, then, prints the
type of relationship (the fourth field) for every line of the file
<samp class="file">mail-list</samp>.  (All of the <code class="command">awk</code> operators are listed, in
order of decreasing precedence, in
<a class="ref" href="#Precedence">Operator Precedence (How Operators Nest)</a>.)
</p>
<p>If the field number you compute is zero, you get the entire record.
Thus, &lsquo;<samp class="samp">$(2-2)</samp>&rsquo; has the same value as <code class="code">$0</code>.  Negative field
numbers are not allowed; trying to reference one usually terminates
the program.  (The POSIX standard does not define
what happens when you reference a negative field number.  <code class="command">gawk</code>
notices this and terminates your program.  Other <code class="command">awk</code>
implementations may behave differently.)
</p>
<p>As mentioned in <a class="ref" href="#Fields">Examining Fields</a>,
<code class="command">awk</code> stores the current record&rsquo;s number of fields in the built-in
variable <code class="code">NF</code> (also see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>).  Thus, the expression
<code class="code">$NF</code> is not a special feature&mdash;it is the direct consequence of
evaluating <code class="code">NF</code> and using its value as a field number.
</p>
<hr>
</div>
<div class="section-level-extent" id="Changing-Fields">
<div class="nav-panel">
<p>
Next: <a href="#Field-Separators" accesskey="n" rel="next">Specifying How Fields Are Separated</a>, Previous: <a href="#Nonconstant-Fields" accesskey="p" rel="prev">Nonconstant Field Numbers</a>, Up: <a href="#Reading-Files" accesskey="u" rel="up">Reading Input Files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Changing-the-Contents-of-a-Field"><span>4.4 Changing the Contents of a Field<a class="copiable-link" href="#Changing-the-Contents-of-a-Field"> &para;</a></span></h3>

<a class="index-entry-id" id="index-fields-changing-contents-of"></a>
<p>The contents of a field, as seen by <code class="command">awk</code>, can be changed within an
<code class="command">awk</code> program; this changes what <code class="command">awk</code> perceives as the
current input record.  (The actual input is untouched; <code class="command">awk</code> <em class="emph">never</em>
modifies the input file.)
Consider the following example and its output:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '{ nboxes = $3 ; $3 = $3 - 10</kbd>
&gt;        <kbd class="kbd">print nboxes, $3 }' inventory-shipped</kbd>
-| 25 15
-| 32 22
-| 24 14
...
</pre></div>

<p>The program first saves the original value of field three in the variable
<code class="code">nboxes</code>.
The &lsquo;<samp class="samp">-</samp>&rsquo; sign represents subtraction, so this program reassigns
field three, <code class="code">$3</code>, as the original value of field three minus ten:
&lsquo;<samp class="samp">$3 - 10</samp>&rsquo;.  (See <a class="xref" href="#Arithmetic-Ops">Arithmetic Operators</a>.)
Then it prints the original and new values for field three.
(Someone in the warehouse made a consistent mistake while inventorying
the red boxes.)
</p>
<p>For this to work, the text in <code class="code">$3</code> must make sense
as a number; the string of characters must be converted to a number
for the computer to do arithmetic on it.  The number resulting
from the subtraction is converted back to a string of characters that
then becomes field three.
See <a class="xref" href="#Conversion">Conversion of Strings and Numbers</a>.
</p>
<p>When the value of a field is changed (as perceived by <code class="command">awk</code>), the
text of the input record is recalculated to contain the new field where
the old one was.  In other words, <code class="code">$0</code> changes to reflect the altered
field.  Thus, this program
prints a copy of the input file, with 10 subtracted from the second
field of each line:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '{ $2 = $2 - 10; print $0 }' inventory-shipped</kbd>
-| Jan 3 25 15 115
-| Feb 5 32 24 226
-| Mar 5 24 34 228
...
</pre></div>

<p>It is also possible to assign contents to fields that are out
of range.  For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '{ $6 = ($5 + $4 + $3 + $2)</kbd>
&gt; <kbd class="kbd">       print $6 }' inventory-shipped</kbd>
-| 168
-| 297
-| 301
...
</pre></div>

<a class="index-entry-id" id="index-adding-fields"></a>
<a class="index-entry-id" id="index-fields-adding"></a>
<p>We&rsquo;ve just created <code class="code">$6</code>, whose value is the sum of fields
<code class="code">$2</code>, <code class="code">$3</code>, <code class="code">$4</code>, and <code class="code">$5</code>.  The &lsquo;<samp class="samp">+</samp>&rsquo; sign
represents addition.  For the file <samp class="file">inventory-shipped</samp>, <code class="code">$6</code>
represents the total number of parcels shipped for a particular month.
</p>
<p>Creating a new field changes <code class="command">awk</code>&rsquo;s internal copy of the current
input record, which is the value of <code class="code">$0</code>.  Thus, if you do &lsquo;<samp class="samp">print $0</samp>&rsquo;
after adding a field, the record printed includes the new field, with
the appropriate number of field separators between it and the previously
existing fields.
</p>
<a class="index-entry-id" id="index-OFS-variable"></a>
<p>This recomputation affects and is affected by
<code class="code">NF</code> (the number of fields; see <a class="pxref" href="#Fields">Examining Fields</a>).
For example, the value of <code class="code">NF</code> is set to the number of the highest
field you create.
The exact format of <code class="code">$0</code> is also affected by a feature that has not been discussed yet:
the <em class="dfn">output field separator</em>, <code class="code">OFS</code>,
used to separate the fields (see <a class="pxref" href="#Output-Separators">Output Separators</a>).
</p>
<p>Note, however, that merely <em class="emph">referencing</em> an out-of-range field
does <em class="emph">not</em> change the value of either <code class="code">$0</code> or <code class="code">NF</code>.
Referencing an out-of-range field only produces an empty string.  For
example:
</p>
<div class="example">
<pre class="example-preformatted">if ($(NF+1) != &quot;&quot;)
    print &quot;can't happen&quot;
else
    print &quot;everything is normal&quot;
</pre></div>

<p>should print &lsquo;<samp class="samp">everything is normal</samp>&rsquo;, because <code class="code">NF+1</code> is certain
to be out of range.  (See <a class="xref" href="#If-Statement">The <code class="code">if</code>-<code class="code">else</code> Statement</a>
for more information about <code class="command">awk</code>&rsquo;s <code class="code">if-else</code> statements.
See <a class="xref" href="#Typing-and-Comparison">Variable Typing and Comparison Expressions</a>
for more information about the &lsquo;<samp class="samp">!=</samp>&rsquo; operator.)
</p>
<p>It is important to note that making an assignment to an existing field
changes the
value of <code class="code">$0</code> but does not change the value of <code class="code">NF</code>,
even when you assign the empty string to a field.  For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo a b c d | awk '{ OFS = &quot;:&quot;; $2 = &quot;&quot;</kbd>
&gt;                       <kbd class="kbd">print $0; print NF }'</kbd>
-| a::c:d
-| 4
</pre></div>

<p>The field is still there; it just has an empty value, delimited by
the two colons between &lsquo;<samp class="samp">a</samp>&rsquo; and &lsquo;<samp class="samp">c</samp>&rsquo;.
This example shows what happens if you create a new field:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo a b c d | awk '{ OFS = &quot;:&quot;; $2 = &quot;&quot;; $6 = &quot;new&quot;</kbd>
&gt;                       <kbd class="kbd">print $0; print NF }'</kbd>
-| a::c:d::new
-| 6
</pre></div>

<p>The intervening field, <code class="code">$5</code>, is created with an empty value
(indicated by the second pair of adjacent colons),
and <code class="code">NF</code> is updated with the value six.
</p>
<a class="index-entry-id" id="index-dark-corner-NF-variable_002c-decrementing"></a>
<a class="index-entry-id" id="index-NF-variable-decrementing"></a>
<p>Decrementing <code class="code">NF</code> throws away the values of the fields
after the new value of <code class="code">NF</code> and recomputes <code class="code">$0</code>.
(d.c.)
Here is an example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo a b c d e f | awk '{ print &quot;NF =&quot;, NF;</kbd>
&gt; <kbd class="kbd">                          NF = 3; print $0 }'</kbd>
-| NF = 6
-| a b c
</pre></div>

<a class="index-entry-id" id="index-portability-NF-variable_002c-decrementing"></a>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> Some versions of <code class="command">awk</code> don&rsquo;t
rebuild <code class="code">$0</code> when <code class="code">NF</code> is decremented.
Until August, 2018, this included BWK <code class="command">awk</code>; fortunately
his version now handles this correctly.
</p></blockquote>

<p>Finally, there are times when it is convenient to force
<code class="command">awk</code> to rebuild the entire record, using the current
values of the fields and <code class="code">OFS</code>.  To do this, use the
seemingly innocuous assignment:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">$1 = $1   # force record to be reconstituted
print $0  # or whatever else with $0
</pre></div></div>

<p>This forces <code class="command">awk</code> to rebuild the record.  It does help
to add a comment, as we&rsquo;ve shown here.
</p>
<p>There is a flip side to the relationship between <code class="code">$0</code> and
the fields.  Any assignment to <code class="code">$0</code> causes the record to be
reparsed into fields using the <em class="emph">current</em> value of <code class="code">FS</code>.
This also applies to any built-in function that updates <code class="code">$0</code>,
such as <code class="code">sub()</code> and <code class="code">gsub()</code>
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
</p>
<a class="index-entry-id" id="index-sidebar-Understanding-_00240"></a>
<table class="cartouche" border="1"><tr><th>
Understanding <code class="code">$0</code></th></tr><tr><td>

<p>It is important to remember that <code class="code">$0</code> is the <em class="emph">full</em>
record, exactly as it was read from the input.  This includes
any leading or trailing whitespace, and the exact whitespace (or other
characters) that separates the fields.
</p>
<p>It is a common error to try to change the field separators
in a record simply by setting <code class="code">FS</code> and <code class="code">OFS</code>, and then
expecting a plain &lsquo;<samp class="samp">print</samp>&rsquo; or &lsquo;<samp class="samp">print $0</samp>&rsquo; to print the
modified record.
</p>
<p>But this does not work, because nothing was done to change the record
itself.  Instead, you must force the record to be rebuilt, typically
with a statement such as &lsquo;<samp class="samp">$1 = $1</samp>&rsquo;, as described earlier.
</p></td></tr></table>


<hr>
</div>
<div class="section-level-extent" id="Field-Separators">
<div class="nav-panel">
<p>
Next: <a href="#Constant-Size" accesskey="n" rel="next">Reading Fixed-Width Data</a>, Previous: <a href="#Changing-Fields" accesskey="p" rel="prev">Changing the Contents of a Field</a>, Up: <a href="#Reading-Files" accesskey="u" rel="up">Reading Input Files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Specifying-How-Fields-Are-Separated"><span>4.5 Specifying How Fields Are Separated<a class="copiable-link" href="#Specifying-How-Fields-Are-Separated"> &para;</a></span></h3>


<a class="index-entry-id" id="index-FS-variable"></a>
<a class="index-entry-id" id="index-fields-separating"></a>
<a class="index-entry-id" id="index-field-separator"></a>
<a class="index-entry-id" id="index-fields-separating-1"></a>
<p>The <em class="dfn">field separator</em>, which is either a single character or a regular
expression, controls the way <code class="command">awk</code> splits an input record into fields.
<code class="command">awk</code> scans the input record for character sequences that
match the separator; the fields themselves are the text between the matches.
</p>
<p>In the examples that follow, we use the bullet symbol (&bull;) to
represent spaces in the output.
If the field separator is &lsquo;<samp class="samp">oo</samp>&rsquo;, then the following line:
</p>
<div class="example">
<pre class="example-preformatted">moo goo gai pan
</pre></div>

<p>is split into three fields: &lsquo;<samp class="samp">m</samp>&rsquo;, &lsquo;<samp class="samp">&bull;g</samp>&rsquo;, and
&lsquo;<samp class="samp">&bull;gai&bull;pan</samp>&rsquo;.
Note the leading spaces in the values of the second and third fields.
</p>
<a class="index-entry-id" id="index-troubleshooting-awk-uses-FS-not-IFS"></a>
<p>The field separator is represented by the predefined variable <code class="code">FS</code>.
Shell programmers take note:  <code class="command">awk</code> does <em class="emph">not</em> use the
name <code class="code">IFS</code> that is used by the POSIX-compliant shells (such as
the Unix Bourne shell, <code class="command">sh</code>, or Bash).
</p>
<a class="index-entry-id" id="index-FS-variable-changing-value-of"></a>
<p>The value of <code class="code">FS</code> can be changed in the <code class="command">awk</code> program with the
assignment operator, &lsquo;<samp class="samp">=</samp>&rsquo; (see <a class="pxref" href="#Assignment-Ops">Assignment Expressions</a>).
Often, the right time to do this is at the beginning of execution
before any input has been processed, so that the very first record
is read with the proper separator.  To do this, use the special
<code class="code">BEGIN</code> pattern
(see <a class="pxref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>).
For example, here we set the value of <code class="code">FS</code> to the string
<code class="code">&quot;:&quot;</code>:
</p>
<div class="example">
<pre class="example-preformatted">awk 'BEGIN { FS = &quot;:&quot; } ; { print $2 }'
</pre></div>

<a class="index-entry-id" id="index-BEGIN-pattern"></a>
<p>Given the input line:
</p>
<div class="example">
<pre class="example-preformatted">John Q. Smith: 29 Oak St.: Walamazoo: MI 42139
</pre></div>

<p>this <code class="command">awk</code> program extracts and prints the string
&lsquo;<samp class="samp">&bull;29&bull;Oak&bull;St.</samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-field-separator-choice-of"></a>
<a class="index-entry-id" id="index-regular-expressions-as-field-separators"></a>
<a class="index-entry-id" id="index-field-separator-regular-expression-as"></a>
<p>Sometimes the input data contains separator characters that don&rsquo;t
separate fields the way you thought they would.  For instance, the
person&rsquo;s name in the example we just used might have a title or
suffix attached, such as:
</p>
<div class="example">
<pre class="example-preformatted">John Q. Smith: LXIX: 29 Oak St.: Walamazoo: MI 42139
</pre></div>

<p>The same program would extract &lsquo;<samp class="samp">&bull;LXIX</samp>&rsquo; instead of
&lsquo;<samp class="samp">&bull;29&bull;Oak&bull;St.</samp>&rsquo;.
If you were expecting the program to print the
address, you would be surprised.  The moral is to choose your data layout and
separator characters carefully to prevent such problems.
(If the data is not in a form that is easy to process, perhaps you
can massage it first with a separate <code class="command">awk</code> program.)
</p>

<ul class="mini-toc">
<li><a href="#Default-Field-Splitting" accesskey="1">Whitespace Normally Separates Fields</a></li>
<li><a href="#Regexp-Field-Splitting" accesskey="2">Using Regular Expressions to Separate Fields</a></li>
<li><a href="#Single-Character-Fields" accesskey="3">Making Each Character a Separate Field</a></li>
<li><a href="#Comma-Separated-Fields" accesskey="4">Working With Comma Separated Value Files</a></li>
<li><a href="#Command-Line-Field-Separator" accesskey="5">Setting <code class="code">FS</code> from the Command Line</a></li>
<li><a href="#Full-Line-Fields" accesskey="6">Making the Full Line Be a Single Field</a></li>
<li><a href="#Field-Splitting-Summary" accesskey="7">Field-Splitting Summary</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Default-Field-Splitting">
<div class="nav-panel">
<p>
Next: <a href="#Regexp-Field-Splitting" accesskey="n" rel="next">Using Regular Expressions to Separate Fields</a>, Up: <a href="#Field-Separators" accesskey="u" rel="up">Specifying How Fields Are Separated</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Whitespace-Normally-Separates-Fields"><span>4.5.1 Whitespace Normally Separates Fields<a class="copiable-link" href="#Whitespace-Normally-Separates-Fields"> &para;</a></span></h4>

<a class="index-entry-id" id="index-field-separator-whitespace-as"></a>
<a class="index-entry-id" id="index-whitespace-as-field-separators"></a>
<a class="index-entry-id" id="index-field-separator-FS-variable-and"></a>
<a class="index-entry-id" id="index-separators-field-FS-variable-and"></a>
<p>Fields are normally separated by whitespace sequences
(spaces, TABs, and newlines), not by single spaces.  Two spaces in a row do not
delimit an empty field.  The default value of the field separator <code class="code">FS</code>
is a string containing a single space, <code class="code">&quot;&nbsp;&quot;</code><!-- /@w -->.  If <code class="command">awk</code>
interpreted this value in the usual way, each space character would separate
fields, so two spaces in a row would make an empty field between them.
The reason this does not happen is that a single space as the value of
<code class="code">FS</code> is a special case&mdash;it is taken to specify the default manner
of delimiting fields.
</p>
<p>If <code class="code">FS</code> is any other single character, such as <code class="code">&quot;,&quot;</code>, then
each occurrence of that character separates two fields.  Two consecutive
occurrences delimit an empty field.  If the character occurs at the
beginning or the end of the line, that too delimits an empty field.  The
space character is the only single character that does not follow these
rules.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Regexp-Field-Splitting">
<div class="nav-panel">
<p>
Next: <a href="#Single-Character-Fields" accesskey="n" rel="next">Making Each Character a Separate Field</a>, Previous: <a href="#Default-Field-Splitting" accesskey="p" rel="prev">Whitespace Normally Separates Fields</a>, Up: <a href="#Field-Separators" accesskey="u" rel="up">Specifying How Fields Are Separated</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Using-Regular-Expressions-to-Separate-Fields"><span>4.5.2 Using Regular Expressions to Separate Fields<a class="copiable-link" href="#Using-Regular-Expressions-to-Separate-Fields"> &para;</a></span></h4>

<a class="index-entry-id" id="index-regular-expressions-as-field-separators-1"></a>
<a class="index-entry-id" id="index-field-separator-regular-expression-as-1"></a>
<p>The previous subsection
discussed the use of single characters or simple strings as the
value of <code class="code">FS</code>.
More generally, the value of <code class="code">FS</code> may be a string containing any
regular expression.  In this case, each match in the record for the regular
expression separates fields.  For example, the assignment:
</p>
<div class="example">
<pre class="example-preformatted">FS = &quot;, \t&quot;
</pre></div>

<p>makes every area of an input line that consists of a comma followed by a
space and a TAB into a field separator.
</p>
<p>For a less trivial example of a regular expression, try using
single spaces to separate fields the way single commas are used.
<code class="code">FS</code> can be set to <code class="code">&quot;[&nbsp;]&quot;</code><!-- /@w --> (left bracket, space, right
bracket).  This regular expression matches a single space and nothing else
(see <a class="pxref" href="#Regexp">Regular Expressions</a>).
</p>
<p>There is an important difference between the two cases of &lsquo;<samp class="samp">FS = &quot;&nbsp;&quot;<!-- /@w --></samp>&rsquo;
(a single space) and &lsquo;<samp class="samp">FS = &quot;[&nbsp;\t\n]+&quot;<!-- /@w --></samp>&rsquo;
(a regular expression matching one or more spaces, TABs, or newlines).
For both values of <code class="code">FS</code>, fields are separated by <em class="dfn">runs</em>
(multiple adjacent occurrences) of spaces, TABs,
and/or newlines.  However, when the value of <code class="code">FS</code> is <code class="code">&quot;&nbsp;&quot;</code><!-- /@w -->,
<code class="command">awk</code> first strips leading and trailing whitespace from
the record and then decides where the fields are.
For example, the following pipeline prints &lsquo;<samp class="samp">b</samp>&rsquo;:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo ' a b c d ' | awk '{ print $2 }'</kbd>
-| b
</pre></div>

<p>However, this pipeline prints &lsquo;<samp class="samp">a</samp>&rsquo; (note the extra spaces around
each letter):
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo ' a  b  c  d ' | awk 'BEGIN { FS = &quot;[ \t\n]+&quot; }</kbd>
&gt;                                  <kbd class="kbd">{ print $2 }'</kbd>
-| a
</pre></div>

<a class="index-entry-id" id="index-null-strings-1"></a>
<a class="index-entry-id" id="index-strings-null"></a>
<p>In this case, the first field is null, or empty.
</p>
<p>The stripping of leading and trailing whitespace also comes into
play whenever <code class="code">$0</code> is recomputed.  For instance, study this pipeline:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo '   a b c d' | awk '{ print; $2 = $2; print }'</kbd>
-|    a b c d
-| a b c d
</pre></div>

<p>The first <code class="code">print</code> statement prints the record as it was read,
with leading whitespace intact.  The assignment to <code class="code">$2</code> rebuilds
<code class="code">$0</code> by concatenating <code class="code">$1</code> through <code class="code">$NF</code> together,
separated by the value of <code class="code">OFS</code> (which is a space by default).
Because the leading whitespace was ignored when finding <code class="code">$1</code>,
it is not part of the new <code class="code">$0</code>.  Finally, the last <code class="code">print</code>
statement prints the new <code class="code">$0</code>.
</p>
<a class="index-entry-id" id="index-FS-variable-containing-_005e"></a>
<a class="index-entry-id" id="index-_005e-_0028caret_0029-in-FS"></a>
<a class="index-entry-id" id="index-dark-corner-_005e_002c-in-FS"></a>
<p>There is an additional subtlety to be aware of when using regular expressions
for field splitting.
It is not well specified in the POSIX standard, or anywhere else, what &lsquo;<samp class="samp">^</samp>&rsquo;
means when splitting fields.  Does the &lsquo;<samp class="samp">^</samp>&rsquo;  match only at the beginning of
the entire record? Or is each field separator a new string?  It turns out that
different <code class="command">awk</code> versions answer this question differently, and you
should not rely on any specific behavior in your programs.
(d.c.)
</p>
<a class="index-entry-id" id="index-Brian-Kernighan_0027s-awk-4"></a>
<p>As a point of information, BWK <code class="command">awk</code> allows &lsquo;<samp class="samp">^</samp>&rsquo;
to match only at the beginning of the record. <code class="command">gawk</code>
also works this way. For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo 'xxAA  xxBxx  C' |</kbd>
&gt; <kbd class="kbd">gawk -F '(^x+)|( +)' '{ for (i = 1; i &lt;= NF; i++)</kbd>
&gt; <kbd class="kbd">                            printf &quot;--&gt;%s&lt;--\n&quot;, $i }'</kbd>
-| --&gt;&lt;--
-| --&gt;AA&lt;--
-| --&gt;xxBxx&lt;--
-| --&gt;C&lt;--
</pre></div>

<p>Finally, field splitting with regular expressions works differently than
regexp matching with the <code class="code">sub()</code>, <code class="code">gsub()</code>, and <code class="code">gensub()</code>
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).  Those functions allow a regexp to match the
empty string; field splitting does not.  Thus, for example &lsquo;<samp class="samp">FS =
&quot;()&quot;</samp>&rsquo; does <em class="emph">not</em> split fields between characters.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Single-Character-Fields">
<div class="nav-panel">
<p>
Next: <a href="#Comma-Separated-Fields" accesskey="n" rel="next">Working With Comma Separated Value Files</a>, Previous: <a href="#Regexp-Field-Splitting" accesskey="p" rel="prev">Using Regular Expressions to Separate Fields</a>, Up: <a href="#Field-Separators" accesskey="u" rel="up">Specifying How Fields Are Separated</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Making-Each-Character-a-Separate-Field"><span>4.5.3 Making Each Character a Separate Field<a class="copiable-link" href="#Making-Each-Character-a-Separate-Field"> &para;</a></span></h4>

<a class="index-entry-id" id="index-common-extensions-single-character-fields"></a>
<a class="index-entry-id" id="index-extensions-common-single-character-fields"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-single_002dcharacter-fields"></a>
<a class="index-entry-id" id="index-single_002dcharacter-fields"></a>
<a class="index-entry-id" id="index-fields-single_002dcharacter"></a>
<p>There are times when you may want to examine each character
of a record separately.  This can be done in <code class="command">gawk</code> by
simply assigning the null string (<code class="code">&quot;&quot;</code>) to <code class="code">FS</code>. (c.e.)
In this case,
each individual character in the record becomes a separate field.
For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo a b | gawk 'BEGIN { FS = &quot;&quot; }</kbd>
&gt;                  <kbd class="kbd">{</kbd>
&gt;                      <kbd class="kbd">for (i = 1; i &lt;= NF; i = i + 1)</kbd>
&gt;                          <kbd class="kbd">print &quot;Field&quot;, i, &quot;is&quot;, $i</kbd>
&gt;                  <kbd class="kbd">}'</kbd>
-| Field 1 is a
-| Field 2 is
-| Field 3 is b
</pre></div>

<a class="index-entry-id" id="index-dark-corner-FS-as-null-string"></a>
<a class="index-entry-id" id="index-FS-variable-null-string-as"></a>
<p>Traditionally, the behavior of <code class="code">FS</code> equal to <code class="code">&quot;&quot;</code> was not defined.
In this case, most versions of Unix <code class="command">awk</code> simply treat the entire record
as only having one field.
(d.c.)
In compatibility mode
(see <a class="pxref" href="#Options">Command-Line Options</a>),
if <code class="code">FS</code> is the null string, then <code class="command">gawk</code> also
behaves this way.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Comma-Separated-Fields">
<div class="nav-panel">
<p>
Next: <a href="#Command-Line-Field-Separator" accesskey="n" rel="next">Setting <code class="code">FS</code> from the Command Line</a>, Previous: <a href="#Single-Character-Fields" accesskey="p" rel="prev">Making Each Character a Separate Field</a>, Up: <a href="#Field-Separators" accesskey="u" rel="up">Specifying How Fields Are Separated</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Working-With-Comma-Separated-Value-Files"><span>4.5.4 Working With Comma Separated Value Files<a class="copiable-link" href="#Working-With-Comma-Separated-Value-Files"> &para;</a></span></h4>

<a class="index-entry-id" id="index-comma-separated-values-_0028CSV_0029-data-records-and-fields"></a>
<a class="index-entry-id" id="index-CSV-_0028comma-separated-values_0029-data-records-and-fields"></a>
<p>Many commonly-used tools use a comma to separate fields, instead of whitespace.
This is particularly true of popular spreadsheet programs.  There is no
universally accepted standard for the format of these files, although
<a class="uref" href="http://www.ietf.org/rfc/rfc4180">RFC 4180</a> lists the common
practices.
</p>
<p>For decades, anyone wishing to work with CSV files and <code class="command">awk</code>
had to &ldquo;roll their own&rdquo; solution.
(For an example, see <a class="pxref" href="#Splitting-By-Content">Defining Fields by Content</a>).
In 2023, Brian Kernighan decided to add CSV support to his version of
<code class="command">awk</code>.  In order to keep up, <code class="command">gawk</code> too provides the same
support as his version.
To use CSV data, invoke <code class="command">gawk</code> with either of the
<samp class="option">-k</samp> or <samp class="option">--csv</samp> options.
</p>
<p>Fields in CSV files are separated by commas.  In order to allow a comma
to appear inside a field (i.e., as data), the field may be quoted
by beginning and ending it with double quotes.  In order to allow a double
quote inside a field, the field <em class="emph">must</em> be quoted, and two double quotes
represent an actual double quote.
The double quote that starts a quoted field must be the first
character after the comma.
<a class="ref" href="#table_002dcsv_002dexamples">Table 4.1</a> shows some examples.
</p>
<div class="float" id="table_002dcsv_002dexamples">
<table class="multitable">
<thead><tr><th width="30%">Input</th><th width="30%">Field Contents</th></tr></thead>
<tbody><tr><td width="30%"><code class="code">abc def</code></td><td width="30%"><code class="code">abc def</code></td></tr>
<tr><td width="30%"><code class="code">&quot;quoted data&quot;</code></td><td width="30%"><code class="code">quoted data</code></td></tr>
<tr><td width="30%"><code class="code">&quot;quoted, data&quot;</code></td><td width="30%"><code class="code">quoted, data</code></td></tr>
<tr><td width="30%"><code class="code">&quot;She said &quot;&quot;Stop!&quot;&quot;.&quot;</code></td><td width="30%"><code class="code">She said &quot;Stop!&quot;.</code></td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 4.1: </strong>Examples of CSV data</p></div></div>
<p>Additionally, and here&rsquo;s where it gets messy, newlines are also
allowed inside double-quoted fields!
In order to deal with such things, when processing CSV files,
<code class="command">gawk</code> scans the input data looking for newlines that
are not enclosed in double quotes. Thus, use of the <samp class="option">--csv</samp> option
totally overrides normal record processing with <code class="code">RS</code> (see <a class="pxref" href="#Records">How Input Is Split into Records</a>),
as well as field splitting with any of <code class="code">FS</code>, <code class="code">FIELDWIDTHS</code>,
or <code class="code">FPAT</code>.
</p>
<a class="index-entry-id" id="index-Kernighan_002c-Brian-quotes-1"></a>
<a class="index-entry-id" id="index-sidebar-Carriage_002dReturn_002d_002dLine_002dFeed-Line-Endings-In-CSV-Files"></a>
<table class="cartouche" border="1"><tr><th>
Carriage-Return&ndash;Line-Feed Line Endings In CSV Files</th></tr><tr><td>
<blockquote class="quotation">
<p><code class="code">\r\n</code> <i class="i">is the invention of the devil.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Brian Kernighan</em>
</div>
<p>Many CSV files are imported from systems where the line terminator
for text files is a carriage-return&ndash;line-feed pair
(CR-LF, &lsquo;<samp class="samp">\r</samp>&rsquo; followed by &lsquo;<samp class="samp">\n</samp>&rsquo;).
For ease of use, when processing CSV files, <code class="command">gawk</code> converts
CR-LF pairs into a single newline. That is, the &lsquo;<samp class="samp">\r</samp>&rsquo; is removed.
</p>
<p>This occurs only when a CR is paired with an LF; a standalone CR
is left alone. This behavior is consistent with Windows systems
which automatically convert CR-LF in files into a plain LF in memory,
and also with the commonly available <code class="command">unix2dos</code> utility program.
</p></td></tr></table>

<p>The behavior of the <code class="code">split()</code> function (not formally discussed
yet, see <a class="ref" href="#String-Functions">String-Manipulation Functions</a>) differs slightly when processing CSV
files. When called with two arguments
(&lsquo;<samp class="samp">split(<var class="var">string</var>, <var class="var">array</var>)</samp>&rsquo;), <code class="code">split()</code>
does CSV-based splitting.  Otherwise, it behaves normally.
</p>
<p>If <samp class="option">--csv</samp> has been used, <code class="code">PROCINFO[&quot;CSV&quot;]</code> will
exist. Otherwise, it will not. See <a class="xref" href="#Auto_002dset">Built-in Variables That Convey Information</a>.
</p>
<p>Finally, if <samp class="option">--csv</samp> has been used, assigning a value
to any of <code class="code">FS</code>, <code class="code">FIELDWIDTHS</code>, <code class="code">FPAT</code>, or
<code class="code">RS</code> generates a warning message.
</p>
<p>To be clear, <code class="command">gawk</code> takes
<a class="uref" href="http://www.ietf.org/rfc/rfc4180">RFC 4180</a> as its
specification for CSV input data.  There are no mechanisms
for accepting nonstandard CSV data, such as files that use
a semicolon instead of a comma as the separator.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Command-Line-Field-Separator">
<div class="nav-panel">
<p>
Next: <a href="#Full-Line-Fields" accesskey="n" rel="next">Making the Full Line Be a Single Field</a>, Previous: <a href="#Comma-Separated-Fields" accesskey="p" rel="prev">Working With Comma Separated Value Files</a>, Up: <a href="#Field-Separators" accesskey="u" rel="up">Specifying How Fields Are Separated</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Setting-FS-from-the-Command-Line"><span>4.5.5 Setting <code class="code">FS</code> from the Command Line<a class="copiable-link" href="#Setting-FS-from-the-Command-Line"> &para;</a></span></h4>
<a class="index-entry-id" id="index-_002dF-option-command_002dline"></a>
<a class="index-entry-id" id="index-field-separator-on-command-line"></a>
<a class="index-entry-id" id="index-command-line-FS-on_002c-setting"></a>
<a class="index-entry-id" id="index-FS-variable-setting-from-command-line"></a>

<p><code class="code">FS</code> can be set on the command line.  Use the <samp class="option">-F</samp> option to
do so.  For example:
</p>
<div class="example">
<pre class="example-preformatted">awk -F, '<var class="var">program</var>' <var class="var">input-files</var>
</pre></div>

<p>sets <code class="code">FS</code> to the &lsquo;<samp class="samp">,</samp>&rsquo; character.  Notice that the option uses
an uppercase &lsquo;<samp class="samp">F</samp>&rsquo; instead of a lowercase &lsquo;<samp class="samp">f</samp>&rsquo;. The latter
option (<samp class="option">-f</samp>) specifies a file containing an <code class="command">awk</code> program.
</p>
<p>The value used for the argument to <samp class="option">-F</samp> is processed in exactly the
same way as assignments to the predefined variable <code class="code">FS</code>.
Any special characters in the field separator must be escaped
appropriately.  For example, to use a &lsquo;<samp class="samp">\</samp>&rsquo; as the field separator
on the command line, you would have to type:
</p>
<div class="example">
<pre class="example-preformatted"># same as FS = &quot;\\&quot;
awk -F\\\\ '...' files ...
</pre></div>

<a class="index-entry-id" id="index-field-separator-backslash-_0028_005c_0029-as"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-as-field-separator"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-as-field-separator"></a>
<p>Because &lsquo;<samp class="samp">\</samp>&rsquo; is used for quoting in the shell, <code class="command">awk</code> sees
&lsquo;<samp class="samp">-F\\</samp>&rsquo;.  Then <code class="command">awk</code> processes the &lsquo;<samp class="samp">\\</samp>&rsquo; for escape
characters (see <a class="pxref" href="#Escape-Sequences">Escape Sequences</a>), finally yielding
a single &lsquo;<samp class="samp">\</samp>&rsquo; to use for the field separator.
</p>
<p>As a special case, in compatibility mode
(see <a class="pxref" href="#Options">Command-Line Options</a>),
if the argument to <samp class="option">-F</samp> is &lsquo;<samp class="samp">t</samp>&rsquo;, then <code class="code">FS</code> is set to
the TAB character.  If you type &lsquo;<samp class="samp">-F\t</samp>&rsquo; at the
shell, without any quotes, the &lsquo;<samp class="samp">\</samp>&rsquo; gets deleted, so <code class="command">awk</code>
figures that you really want your fields to be separated with TABs and
not &lsquo;<samp class="samp">t</samp>&rsquo;s.  Use &lsquo;<samp class="samp">-v FS=&quot;t&quot;</samp>&rsquo; or &lsquo;<samp class="samp">-F&quot;[t]&quot;</samp>&rsquo; on the command line
if you really do want to separate your fields with &lsquo;<samp class="samp">t</samp>&rsquo;s.
Use &lsquo;<samp class="samp">-F '\t'</samp>&rsquo; when not in compatibility mode to specify that TABs
separate fields.
</p>
<p>As an example, let&rsquo;s use an <code class="command">awk</code> program file called <samp class="file">edu.awk</samp>
that contains the pattern <code class="code">/edu/</code> and the action &lsquo;<samp class="samp">print $1</samp>&rsquo;:
</p>
<div class="example">
<pre class="example-preformatted">/edu/   { print $1 }
</pre></div>

<p>Let&rsquo;s also set <code class="code">FS</code> to be the &lsquo;<samp class="samp">-</samp>&rsquo; character and run the
program on the file <samp class="file">mail-list</samp>.  The following command prints a
list of the names of the people that work at or attend a university, and
the first three digits of their phone numbers:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk -F- -f edu.awk mail-list</kbd>
-| Fabius       555
-| Samuel       555
-| Jean
</pre></div>

<p>Note the third line of output.  The third line
in the original file looked like this:
</p>
<div class="example">
<pre class="example-preformatted">Jean-Paul    555-2127     jeanpaul.campanorum@nyu.edu     R
</pre></div>

<p>The &lsquo;<samp class="samp">-</samp>&rsquo; as part of the person&rsquo;s name was used as the field
separator, instead of the &lsquo;<samp class="samp">-</samp>&rsquo; in the phone number that was
originally intended.  This demonstrates why you have to be careful in
choosing your field and record separators.
</p>
<a class="index-entry-id" id="index-Unix-awk-password-files_002c-field-separators-and"></a>
<p>Perhaps the most common use of a single character as the field separator
occurs when processing the Unix system password file.  On many Unix
systems, each user has a separate entry in the system password file, with one
line per user.  The information in these lines is separated by colons.
The first field is the user&rsquo;s login name and the second is the user&rsquo;s
encrypted or shadow password.  (A shadow password is indicated by the
presence of a single &lsquo;<samp class="samp">x</samp>&rsquo; in the second field.)  A password file
entry might look like this:
</p>
<a class="index-entry-id" id="index-Robbins-Arnold"></a>
<div class="example">
<pre class="example-preformatted">arnold:x:2076:10:Arnold Robbins:/home/arnold:/bin/bash
</pre></div>

<p>The following program searches the system password file and prints
the entries for users whose full name is not indicated:
</p>
<div class="example">
<pre class="example-preformatted">awk -F: '$5 == &quot;&quot;' /etc/passwd
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Full-Line-Fields">
<div class="nav-panel">
<p>
Next: <a href="#Field-Splitting-Summary" accesskey="n" rel="next">Field-Splitting Summary</a>, Previous: <a href="#Command-Line-Field-Separator" accesskey="p" rel="prev">Setting <code class="code">FS</code> from the Command Line</a>, Up: <a href="#Field-Separators" accesskey="u" rel="up">Specifying How Fields Are Separated</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Making-the-Full-Line-Be-a-Single-Field"><span>4.5.6 Making the Full Line Be a Single Field<a class="copiable-link" href="#Making-the-Full-Line-Be-a-Single-Field"> &para;</a></span></h4>

<p>Occasionally, it&rsquo;s useful to treat the whole input line as a
single field.  This can be done easily and portably simply by
setting <code class="code">FS</code> to <code class="code">&quot;\n&quot;</code> (a newline):<a class="footnote" id="DOCF24" href="#FOOT24"><sup>24</sup></a>
</p>
<div class="example">
<pre class="example-preformatted">awk -F'\n' '<var class="var">program</var>' <var class="var">files ...</var>
</pre></div>

<p>When you do this, <code class="code">$1</code> is the same as <code class="code">$0</code>.
</p>
<a class="index-entry-id" id="index-sidebar-Changing-FS-Does-Not-Affect-the-Fields"></a>
<table class="cartouche" border="1"><tr><th>
Changing <code class="code">FS</code> Does Not Affect the Fields</th></tr><tr><td>

<a class="index-entry-id" id="index-POSIX-awk-field-separators-and"></a>
<a class="index-entry-id" id="index-field-separator-POSIX-and"></a>
<p>According to the POSIX standard, <code class="command">awk</code> is supposed to behave
as if each record is split into fields at the time it is read.
In particular, this means that if you change the value of <code class="code">FS</code>
after a record is read, the values of the fields (i.e., how they were split)
should reflect the old value of <code class="code">FS</code>, not the new one.
</p>
<a class="index-entry-id" id="index-dark-corner-field-separators"></a>
<a class="index-entry-id" id="index-sed-utility"></a>
<a class="index-entry-id" id="index-stream-editors"></a>
<p>However, many older implementations of <code class="command">awk</code> do not work this way.  Instead,
they defer splitting the fields until a field is actually
referenced.  The fields are split
using the <em class="emph">current</em> value of <code class="code">FS</code>!
(d.c.)
This behavior can be difficult
to diagnose. The following example illustrates the difference
between the two methods:
</p>
<div class="example">
<pre class="example-preformatted">sed 1q /etc/passwd | awk '{ FS = &quot;:&quot; ; print $1 }'
</pre></div>

<p>which usually prints:
</p>
<div class="example">
<pre class="example-preformatted">root
</pre></div>

<p>on an incorrect implementation of <code class="command">awk</code>, while <code class="command">gawk</code>
prints the full first line of the file, something like:
</p>
<div class="example">
<pre class="example-preformatted">root:x:0:0:Root:/:
</pre></div>

<p>(The <code class="command">sed</code><a class="footnote" id="DOCF25" href="#FOOT25"><sup>25</sup></a>
command prints just the first line of <samp class="file">/etc/passwd</samp>.)
</p></td></tr></table>

<hr>
</div>
<div class="subsection-level-extent" id="Field-Splitting-Summary">
<div class="nav-panel">
<p>
Previous: <a href="#Full-Line-Fields" accesskey="p" rel="prev">Making the Full Line Be a Single Field</a>, Up: <a href="#Field-Separators" accesskey="u" rel="up">Specifying How Fields Are Separated</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Field_002dSplitting-Summary"><span>4.5.7 Field-Splitting Summary<a class="copiable-link" href="#Field_002dSplitting-Summary"> &para;</a></span></h4>

<p>It is important to remember that when you assign a string constant
as the value of <code class="code">FS</code>, it undergoes normal <code class="command">awk</code> string
processing.  For example, with Unix <code class="command">awk</code> and <code class="command">gawk</code>,
the assignment &lsquo;<samp class="samp">FS = &quot;\..&quot;</samp>&rsquo; assigns the character string <code class="code">&quot;..&quot;</code>
to <code class="code">FS</code> (the backslash is stripped).  This creates a regexp meaning
&ldquo;fields are separated by occurrences of any two characters.&rdquo;
If instead you want fields to be separated by a literal period followed
by any single character, use &lsquo;<samp class="samp">FS = &quot;\\..&quot;</samp>&rsquo;.
</p>
<p>The following list summarizes how fields are split, based on the value
of <code class="code">FS</code> (&lsquo;<samp class="samp">==</samp>&rsquo; means &ldquo;is equal to&rdquo;):
</p>
<dl class="table">
<dt><code class="code"><code class="command">gawk</code> was invoked with <samp class="option">--csv</samp></code></dt>
<dd><p>Field splitting follows the rules given in <a class="ref" href="#Comma-Separated-Fields">Working With Comma Separated Value Files</a>.
The value of <code class="code">FS</code> is ignored.
</p>
</dd>
<dt><code class="code">FS == &quot; &quot;</code></dt>
<dd><p>Fields are separated by runs of whitespace.  Leading and trailing
whitespace are ignored.  This is the default.
</p>
</dd>
<dt><code class="code">FS == <var class="var">any other single character</var></code></dt>
<dd><p>Fields are separated by each occurrence of the character.  Multiple
successive occurrences delimit empty fields, as do leading and
trailing occurrences.
The character can even be a regexp metacharacter; it does not need
to be escaped.
</p>
</dd>
<dt><code class="code">FS == <var class="var">regexp</var></code></dt>
<dd><p>Fields are separated by occurrences of characters that match <var class="var">regexp</var>.
Leading and trailing matches of <var class="var">regexp</var> delimit empty fields.
</p>
</dd>
<dt><code class="code">FS == &quot;&quot;</code></dt>
<dd><p>Each individual character in the record becomes a separate field.
(This is a common extension; it is not specified by the POSIX standard.)
</p></dd>
</dl>

<a class="index-entry-id" id="index-sidebar-FS-and-IGNORECASE"></a>
<table class="cartouche" border="1"><tr><th>
<code class="code">FS</code> and <code class="code">IGNORECASE</code></th></tr><tr><td>

<p>The <code class="code">IGNORECASE</code> variable
(see <a class="pxref" href="#User_002dmodified">Built-in Variables That Control <code class="command">awk</code></a>)
affects field splitting <em class="emph">only</em> when the value of <code class="code">FS</code> is a regexp.
It has no effect when <code class="code">FS</code> is a single character, even if
that character is a letter.  Thus, in the following code:
</p>
<div class="example">
<pre class="example-preformatted">FS = &quot;c&quot;
IGNORECASE = 1
$0 = &quot;aCa&quot;
print $1
</pre></div>

<p>The output is &lsquo;<samp class="samp">aCa</samp>&rsquo;.  If you really want to split fields on an
alphabetic character while ignoring case, use a regexp that will
do it for you (e.g., &lsquo;<samp class="samp">FS = &quot;[c]&quot;</samp>&rsquo;).  In this case, <code class="code">IGNORECASE</code>
will take effect.
</p></td></tr></table>


<hr>
</div>
</div>
<div class="section-level-extent" id="Constant-Size">
<div class="nav-panel">
<p>
Next: <a href="#Splitting-By-Content" accesskey="n" rel="next">Defining Fields by Content</a>, Previous: <a href="#Field-Separators" accesskey="p" rel="prev">Specifying How Fields Are Separated</a>, Up: <a href="#Reading-Files" accesskey="u" rel="up">Reading Input Files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Reading-Fixed_002dWidth-Data"><span>4.6 Reading Fixed-Width Data<a class="copiable-link" href="#Reading-Fixed_002dWidth-Data"> &para;</a></span></h3>

<a class="index-entry-id" id="index-data_002c-fixed_002dwidth"></a>
<a class="index-entry-id" id="index-fixed_002dwidth-data"></a>
<a class="index-entry-id" id="index-advanced-features-fixed_002dwidth-data"></a>

<p>This section discusses an advanced
feature of <code class="command">gawk</code>.  If you are a novice <code class="command">awk</code> user,
you might want to skip it on the first reading.
</p>
<p><code class="command">gawk</code> provides a facility for dealing with fixed-width fields
with no distinctive field separator. We discuss this feature in
the following subsections.
</p>

<ul class="mini-toc">
<li><a href="#Fixed-width-data" accesskey="1">Processing Fixed-Width Data</a></li>
<li><a href="#Skipping-intervening" accesskey="2">Skipping Intervening Fields</a></li>
<li><a href="#Allowing-trailing-data" accesskey="3">Capturing Optional Trailing Data</a></li>
<li><a href="#Fields-with-fixed-data" accesskey="4">Field Values With Fixed-Width Data</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Fixed-width-data">
<div class="nav-panel">
<p>
Next: <a href="#Skipping-intervening" accesskey="n" rel="next">Skipping Intervening Fields</a>, Up: <a href="#Constant-Size" accesskey="u" rel="up">Reading Fixed-Width Data</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Processing-Fixed_002dWidth-Data"><span>4.6.1 Processing Fixed-Width Data<a class="copiable-link" href="#Processing-Fixed_002dWidth-Data"> &para;</a></span></h4>

<p>An example of fixed-width data would be the input for old Fortran programs
where numbers are run together, or the output of programs that did not
anticipate the use of their output as input for other programs.
</p>
<p>An example of the latter is a table where all the columns are lined up
by the use of a variable number of spaces and <em class="emph">empty fields are
just spaces</em>.  Clearly, <code class="command">awk</code>&rsquo;s normal field splitting based
on <code class="code">FS</code> does not work well in this case.  Although a portable
<code class="command">awk</code> program can use a series of <code class="code">substr()</code> calls on
<code class="code">$0</code> (see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>), this is awkward and inefficient
for a large number of fields.
</p>
<a class="index-entry-id" id="index-troubleshooting-fatal-errors-field-widths_002c-specifying"></a>
<a class="index-entry-id" id="index-w-utility"></a>
<a class="index-entry-id" id="index-FIELDWIDTHS-variable"></a>
<a class="index-entry-id" id="index-gawk-FIELDWIDTHS-variable-in"></a>
<p>The splitting of an input record into fixed-width fields is specified by
assigning a string containing space-separated numbers to the built-in
variable <code class="code">FIELDWIDTHS</code>.  Each number specifies the width of the
field, <em class="emph">including</em> columns between fields.  If you want to ignore
the columns between fields, you can specify the width as a separate
field that is subsequently ignored.  It is a fatal error to supply a
field width that has a negative value.
</p>
<p>The following data is the output of the Unix <code class="command">w</code> utility.  It is useful
to illustrate the use of <code class="code">FIELDWIDTHS</code>:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted"> 10:06pm  up 21 days, 14:04,  23 users
User     tty       login&nbsp; idle   JCPU   PCPU  what
hzuo     ttyV0     8:58pm            9      5  vi p24.tex
hzang    ttyV3     6:37pm    50                -csh
eklye    ttyV5     9:53pm            7      1  em thes.tex
dportein ttyV6     8:17pm  1:47                -csh
gierd    ttyD3    10:00pm     1                elm
dave     ttyD4     9:47pm            4      4  w
brent    ttyp0    26Jun91  4:46  26:46   4:41  bash
dave     ttyq4    26Jun9115days     46     46  wnewmail
</pre></div></div>

<p>The following program takes this input, converts the idle time to
number of seconds, and prints out the first two fields and the calculated
idle time:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN  { FIELDWIDTHS = &quot;9 6 10 6 7 7 35&quot; }
NR &gt; 2 {
    idle = $4
    sub(/^ +/, &quot;&quot;, idle)   # strip leading spaces
    if (idle == &quot;&quot;)
        idle = 0
    if (idle ~ /:/) {      # hh:mm
        split(idle, t, &quot;:&quot;)
        idle = t[1] * 60 + t[2]
    }
    if (idle ~ /days/)
        idle *= 24 * 60 * 60

    print $1, $2, idle
}
</pre></div>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> The preceding program uses a number of <code class="command">awk</code> features that
haven&rsquo;t been introduced yet.
</p></blockquote>

<p>Running the program on the data produces the following results:
</p>
<div class="example">
<pre class="example-preformatted">hzuo      ttyV0  0
hzang     ttyV3  50
eklye     ttyV5  0
dportein  ttyV6  107
gierd     ttyD3  1
dave      ttyD4  0
brent     ttyp0  286
dave      ttyq4  1296000
</pre></div>

<p>Another (possibly more practical) example of fixed-width input data
is the input from a deck of balloting cards.  In some parts of
the United States, voters mark their choices by punching holes in computer
cards.  These cards are then processed to count the votes for any particular
candidate or on any particular issue.  Because a voter may choose not to
vote on some issue, any column on the card may be empty.  An <code class="command">awk</code>
program for processing such data could use the <code class="code">FIELDWIDTHS</code> feature
to simplify reading the data.  (Of course, getting <code class="command">gawk</code> to run on
a system with card readers is another story!)
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Skipping-intervening">
<div class="nav-panel">
<p>
Next: <a href="#Allowing-trailing-data" accesskey="n" rel="next">Capturing Optional Trailing Data</a>, Previous: <a href="#Fixed-width-data" accesskey="p" rel="prev">Processing Fixed-Width Data</a>, Up: <a href="#Constant-Size" accesskey="u" rel="up">Reading Fixed-Width Data</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Skipping-Intervening-Fields"><span>4.6.2 Skipping Intervening Fields<a class="copiable-link" href="#Skipping-Intervening-Fields"> &para;</a></span></h4>

<p>Starting in version 4.2, each field width may optionally be
preceded by a colon-separated value specifying the number of characters
to skip before the field starts.  Thus, the preceding program could be
rewritten to specify <code class="code">FIELDWIDTHS</code> like so:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN  { FIELDWIDTHS = &quot;8 1:5 4:7 6 1:6 1:6 2:33&quot; }
</pre></div>

<p>This strips away some of the white space separating the fields. With such
a change, the program produces the following results:
</p>
<div class="example">
<pre class="example-preformatted">hzang    ttyV3 50
eklye    ttyV5 0
dportein ttyV6 107
gierd    ttyD3 1
dave     ttyD4 0
brent    ttyp0 286
dave     ttyq4 1296000
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Allowing-trailing-data">
<div class="nav-panel">
<p>
Next: <a href="#Fields-with-fixed-data" accesskey="n" rel="next">Field Values With Fixed-Width Data</a>, Previous: <a href="#Skipping-intervening" accesskey="p" rel="prev">Skipping Intervening Fields</a>, Up: <a href="#Constant-Size" accesskey="u" rel="up">Reading Fixed-Width Data</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Capturing-Optional-Trailing-Data"><span>4.6.3 Capturing Optional Trailing Data<a class="copiable-link" href="#Capturing-Optional-Trailing-Data"> &para;</a></span></h4>

<p>There are times when fixed-width data may be followed by additional data
that has no fixed length.  Such data may or may not be present, but if
it is, it should be possible to get at it from an <code class="command">awk</code> program.
</p>
<p>Starting with version 4.2, in order to provide a way to say &ldquo;anything
else in the record after the defined fields,&rdquo; <code class="command">gawk</code>
allows you to add a final &lsquo;<samp class="samp">*</samp>&rsquo; character to the value of
<code class="code">FIELDWIDTHS</code>. There can only be one such character, and it must
be the final non-whitespace character in <code class="code">FIELDWIDTHS</code>.
For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">cat fw.awk</kbd>                         <i class="i">Show the program</i>
-| BEGIN { FIELDWIDTHS = &quot;2 2 *&quot; }
-| { print NF, $1, $2, $3 }
$ <kbd class="kbd">cat fw.in</kbd>                          <i class="i">Show sample input</i>
-| 1234abcdefghi
$ <kbd class="kbd">gawk -f fw.awk fw.in</kbd>               <i class="i">Run the program</i>
-| 3 12 34 abcdefghi
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Fields-with-fixed-data">
<div class="nav-panel">
<p>
Previous: <a href="#Allowing-trailing-data" accesskey="p" rel="prev">Capturing Optional Trailing Data</a>, Up: <a href="#Constant-Size" accesskey="u" rel="up">Reading Fixed-Width Data</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Field-Values-With-Fixed_002dWidth-Data"><span>4.6.4 Field Values With Fixed-Width Data<a class="copiable-link" href="#Field-Values-With-Fixed_002dWidth-Data"> &para;</a></span></h4>

<p>So far, so good.  But what happens if there isn&rsquo;t as much data as there
should be based on the contents of <code class="code">FIELDWIDTHS</code>? Or, what happens
if there is more data than expected?
</p>
<p>For many years, what happens in these cases was not well defined. Starting
with version 4.2, the rules are as follows:
</p>
<dl class="table">
<dt>Enough data for some fields</dt>
<dd><p>For example, if <code class="code">FIELDWIDTHS</code> is set to <code class="code">&quot;2 3 4&quot;</code> and the
input record is &lsquo;<samp class="samp">aabbb</samp>&rsquo;.  In this case, <code class="code">NF</code> is set to two.
</p>
</dd>
<dt>Not enough data for a field</dt>
<dd><p>For example, if <code class="code">FIELDWIDTHS</code> is set to <code class="code">&quot;2 3 4&quot;</code> and the
input record is &lsquo;<samp class="samp">aab</samp>&rsquo;.  In this case, <code class="code">NF</code> is set to two and
<code class="code">$2</code> has the value <code class="code">&quot;b&quot;</code>. The idea is that even though there
aren&rsquo;t as many characters as were expected, there are some, so the data
should be made available to the program.
</p>
</dd>
<dt>Too much data</dt>
<dd><p>For example, if <code class="code">FIELDWIDTHS</code> is set to <code class="code">&quot;2 3 4&quot;</code> and the
input record is &lsquo;<samp class="samp">aabbbccccddd</samp>&rsquo;.  In this case, <code class="code">NF</code> is set to
three and the extra characters (&lsquo;<samp class="samp">ddd</samp>&rsquo;) are ignored.  If you want
<code class="command">gawk</code> to capture the extra characters, supply a final &lsquo;<samp class="samp">*</samp>&rsquo;
in the value of <code class="code">FIELDWIDTHS</code>.
</p>
</dd>
<dt>Too much data, but with &lsquo;<samp class="samp">*</samp>&rsquo; supplied</dt>
<dd><p>For example, if <code class="code">FIELDWIDTHS</code> is set to <code class="code">&quot;2 3 4 *&quot;</code> and the
input record is &lsquo;<samp class="samp">aabbbccccddd</samp>&rsquo;.  In this case, <code class="code">NF</code> is set to
four, and <code class="code">$4</code> has the value <code class="code">&quot;ddd&quot;</code>.
</p>
</dd>
</dl>

<hr>
</div>
</div>
<div class="section-level-extent" id="Splitting-By-Content">
<div class="nav-panel">
<p>
Next: <a href="#Testing-field-creation" accesskey="n" rel="next">Checking How <code class="command">gawk</code> Is Splitting Records</a>, Previous: <a href="#Constant-Size" accesskey="p" rel="prev">Reading Fixed-Width Data</a>, Up: <a href="#Reading-Files" accesskey="u" rel="up">Reading Input Files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Defining-Fields-by-Content"><span>4.7 Defining Fields by Content<a class="copiable-link" href="#Defining-Fields-by-Content"> &para;</a></span></h3>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> This whole section needs rewriting now
that <code class="command">gawk</code> has built-in CSV parsing. Sigh.
</p></blockquote>


<p>This section discusses an advanced
feature of <code class="command">gawk</code>.  If you are a novice <code class="command">awk</code> user,
you might want to skip it on the first reading.
</p>
<a class="index-entry-id" id="index-advanced-features-specifying-field-content"></a>
<p>Normally, when using <code class="code">FS</code>, <code class="command">gawk</code> defines the fields as the
parts of the record that occur in between each field separator. In other
words, <code class="code">FS</code> defines what a field <em class="emph">is not</em>, instead of what a field
<em class="emph">is</em>.
However, there are times when you really want to define the fields by
what they are, and not by what they are not.
</p>
<a class="index-entry-id" id="index-CSV-_0028comma-separated-values_0029-data-parsing-with-FPAT"></a>
<a class="index-entry-id" id="index-Comma-separated-values-_0028CSV_0029-data-parsing-with-FPAT"></a>
<p>The most notorious such case
is comma-separated values (CSV) data. Many spreadsheet programs,
for example, can export their data into text files, where each record is
terminated with a newline, and fields are separated by commas. If
commas only separated the data, there wouldn&rsquo;t be an issue. The problem comes when
one of the fields contains an <em class="emph">embedded</em> comma.
In such cases, most programs embed the field in double quotes.<a class="footnote" id="DOCF26" href="#FOOT26"><sup>26</sup></a>
So, we might have data like this:
</p>
<div class="example">
<pre class="example-preformatted">Robbins,Arnold,&quot;1234 A Pretty Street, NE&quot;,MyTown,MyState,12345-6789,USA
</pre></div>

<a class="index-entry-id" id="index-gawk-FPAT-variable-in"></a>
<a class="index-entry-id" id="index-FPAT-variable"></a>
<p>The <code class="code">FPAT</code> variable offers a solution for cases like this.
The value of <code class="code">FPAT</code> should be a string that provides a regular expression.
This regular expression describes the contents of each field.
</p>
<p>In the case of CSV data as presented here, each field is either &ldquo;anything that
is not a comma,&rdquo; or &ldquo;a double quote, anything that is not a double quote, and a
closing double quote.&rdquo;  (There are more complicated definitions of CSV data,
treated shortly.)
If written as a regular expression constant
(see <a class="pxref" href="#Regexp">Regular Expressions</a>),
we would have <code class="code">/([^,]+)|(&quot;[^&quot;]+&quot;)/</code>.
Writing this as a string requires us to escape the double quotes, leading to:
</p>
<div class="example">
<pre class="example-preformatted">FPAT = &quot;([^,]+)|(\&quot;[^\&quot;]+\&quot;)&quot;
</pre></div>

<p>Putting this to use, here is a simple program to parse the data:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">BEGIN {
    FPAT = &quot;([^,]+)|(\&quot;[^\&quot;]+\&quot;)&quot;
}
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">{
    print &quot;NF = &quot;, NF
    for (i = 1; i &lt;= NF; i++) {
        printf(&quot;$%d = &lt;%s&gt;\n&quot;, i, $i)
    }
}
</pre></div></div>

<p>When run, we get the following:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f simple-csv.awk addresses.csv</kbd>
NF =  7
$1 = &lt;Robbins&gt;
$2 = &lt;Arnold&gt;
$3 = &lt;&quot;1234 A Pretty Street, NE&quot;&gt;
$4 = &lt;MyTown&gt;
$5 = &lt;MyState&gt;
$6 = &lt;12345-6789&gt;
$7 = &lt;USA&gt;
</pre></div>

<p>Note the embedded comma in the value of <code class="code">$3</code>.
</p>
<p>A straightforward improvement when processing CSV data of this sort
would be to remove the quotes when they occur, with something like this:
</p>
<div class="example">
<pre class="example-preformatted">if (substr($i, 1, 1) == &quot;\&quot;&quot;) {
    len = length($i)
    $i = substr($i, 2, len - 2)    # Get text within the two quotes
}
</pre></div>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> Some programs export CSV data that contains embedded newlines between
the double quotes.  <code class="command">gawk</code> provides no way to deal with this.
Even though a formal specification for CSV data exists, there isn&rsquo;t much
more to be done;
the <code class="code">FPAT</code> mechanism provides an elegant solution for the majority
of cases, and the <code class="command">gawk</code> developers are satisfied with that.
</p></blockquote>

<p>As written, the regexp used for <code class="code">FPAT</code> requires that each field
contain at least one character.  A straightforward modification
(changing the first &lsquo;<samp class="samp">+</samp>&rsquo; to &lsquo;<samp class="samp">*</samp>&rsquo;) allows fields to be empty:
</p>
<div class="example">
<pre class="example-preformatted">FPAT = &quot;([^,]*)|(\&quot;[^\&quot;]+\&quot;)&quot;
</pre></div>


<p>As with <code class="code">FS</code>, the <code class="code">IGNORECASE</code> variable (see <a class="pxref" href="#User_002dmodified">Built-in Variables That Control <code class="command">awk</code></a>)
affects field splitting with <code class="code">FPAT</code>.
</p>
<p>Assigning a value to <code class="code">FPAT</code> overrides field splitting
with <code class="code">FS</code> and with <code class="code">FIELDWIDTHS</code>.
</p>
<p>Finally, the <code class="code">patsplit()</code> function makes the same functionality
available for splitting regular strings (see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> Given that <code class="command">gawk</code> now has built-in CSV parsing
(see <a class="pxref" href="#Comma-Separated-Fields">Working With Comma Separated Value Files</a>), the examples presented here are obsolete.
Nonetheless, it remains useful as an example of what <code class="code">FPAT</code>-based
field parsing can do.
</p></blockquote>

<ul class="mini-toc">
<li><a href="#More-CSV" accesskey="1">More on CSV Files</a></li>
<li><a href="#FS-versus-FPAT" accesskey="2"><code class="code">FS</code> Versus <code class="code">FPAT</code>: A Subtle Difference</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="More-CSV">
<div class="nav-panel">
<p>
Next: <a href="#FS-versus-FPAT" accesskey="n" rel="next"><code class="code">FS</code> Versus <code class="code">FPAT</code>: A Subtle Difference</a>, Up: <a href="#Splitting-By-Content" accesskey="u" rel="up">Defining Fields by Content</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="More-on-CSV-Files"><span>4.7.1 More on CSV Files<a class="copiable-link" href="#More-on-CSV-Files"> &para;</a></span></h4>

<a class="index-entry-id" id="index-Collado_002c-Manuel-1"></a>
<p>Manuel Collado notes that in addition to commas, a CSV field can also
contains quotes, that have to be escaped by doubling them. The previously
described regexps fail to accept quoted fields with both commas and
quotes inside. He suggests that the simplest <code class="code">FPAT</code> expression that
recognizes this kind of fields is <code class="code">/([^,]*)|(&quot;([^&quot;]|&quot;&quot;)+&quot;)/</code>. He
provides the following input data to test these variants:
</p>
<div class="example">
<pre class="example-preformatted">p,&quot;q,r&quot;,s
p,&quot;q&quot;&quot;r&quot;,s
p,&quot;q,&quot;&quot;r&quot;,s
p,&quot;&quot;,s
p,,s
</pre></div>

<p>And here is his test program:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">BEGIN {
     fp[0] = &quot;([^,]+)|(\&quot;[^\&quot;]+\&quot;)&quot;
     fp[1] = &quot;([^,]*)|(\&quot;[^\&quot;]+\&quot;)&quot;
     fp[2] = &quot;([^,]*)|(\&quot;([^\&quot;]|\&quot;\&quot;)+\&quot;)&quot;
     FPAT = fp[fpat+0]
}
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">{
     print &quot;&lt;&quot; $0 &quot;&gt;&quot;
     printf(&quot;NF = %s &quot;, NF)
     for (i = 1; i &lt;= NF; i++) {
         printf(&quot;&lt;%s&gt;&quot;, $i)
     }
     print &quot;&quot;
}
</pre></div></div>

<p>When run on the third variant, it produces:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -v fpat=2 -f test-csv.awk sample.csv</kbd>
-| &lt;p,&quot;q,r&quot;,s&gt;
-| NF = 3 &lt;p&gt;&lt;&quot;q,r&quot;&gt;&lt;s&gt;
-| &lt;p,&quot;q&quot;&quot;r&quot;,s&gt;
-| NF = 3 &lt;p&gt;&lt;&quot;q&quot;&quot;r&quot;&gt;&lt;s&gt;
-| &lt;p,&quot;q,&quot;&quot;r&quot;,s&gt;
-| NF = 3 &lt;p&gt;&lt;&quot;q,&quot;&quot;r&quot;&gt;&lt;s&gt;
-| &lt;p,&quot;&quot;,s&gt;
-| NF = 3 &lt;p&gt;&lt;&quot;&quot;&gt;&lt;s&gt;
-| &lt;p,,s&gt;
-| NF = 3 &lt;p&gt;&lt;&gt;&lt;s&gt;
</pre></div>

<a class="index-entry-id" id="index-Collado_002c-Manuel-2"></a>
<a class="index-entry-id" id="index-CSVMODE-library-for-gawk"></a>
<a class="index-entry-id" id="index-CSV-_0028comma-separated-values_0029-data-parsing-with-CSVMODE-library"></a>
<a class="index-entry-id" id="index-Comma-separated-values-_0028CSV_0029-data-parsing-with-FPAT-library"></a>
<p>In general, using <code class="code">FPAT</code> to do your own CSV parsing is like having
a bed with a blanket that&rsquo;s not quite big enough. There&rsquo;s always a corner
that isn&rsquo;t covered. We recommend, instead, that you use Manuel Collado&rsquo;s
<a class="uref" href="http://mcollado.z15.es/xgawk/"><code class="code">CSVMODE</code> library for <code class="command">gawk</code></a>.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="FS-versus-FPAT">
<div class="nav-panel">
<p>
Previous: <a href="#More-CSV" accesskey="p" rel="prev">More on CSV Files</a>, Up: <a href="#Splitting-By-Content" accesskey="u" rel="up">Defining Fields by Content</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="FS-Versus-FPAT_003a-A-Subtle-Difference"><span>4.7.2 <code class="code">FS</code> Versus <code class="code">FPAT</code>: A Subtle Difference<a class="copiable-link" href="#FS-Versus-FPAT_003a-A-Subtle-Difference"> &para;</a></span></h4>

<p>As we discussed earlier, <code class="code">FS</code> describes the data between fields (&ldquo;what fields are not&rdquo;)
and <code class="code">FPAT</code> describes the fields themselves (&ldquo;what fields are&rdquo;).
This leads to a subtle difference in how fields are found when using regexps as the value
for <code class="code">FS</code> or <code class="code">FPAT</code>.
</p>
<p>In order to distinguish one field from another, there must be a non-empty separator between
each field.  This makes intuitive sense&mdash;otherwise one could not distinguish fields from
separators.
</p>
<p>Thus, regular expression matching as done when splitting fields with <code class="code">FS</code> is not
allowed to match the null string; it must always match at least one character, in order
to be able to proceed through the entire record.
</p>
<p>On the other hand, regular expression matching with <code class="code">FPAT</code> can match the null
string, and the non-matching intervening characters function as the separators.
</p>
<p>This same difference is reflected in how matching is done with the <code class="code">split()</code>
and <code class="code">patsplit()</code> functions (see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
</p>
<hr>
</div>
</div>
<div class="section-level-extent" id="Testing-field-creation">
<div class="nav-panel">
<p>
Next: <a href="#Multiple-Line" accesskey="n" rel="next">Multiple-Line Records</a>, Previous: <a href="#Splitting-By-Content" accesskey="p" rel="prev">Defining Fields by Content</a>, Up: <a href="#Reading-Files" accesskey="u" rel="up">Reading Input Files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Checking-How-gawk-Is-Splitting-Records"><span>4.8 Checking How <code class="command">gawk</code> Is Splitting Records<a class="copiable-link" href="#Checking-How-gawk-Is-Splitting-Records"> &para;</a></span></h3>

<a class="index-entry-id" id="index-gawk-splitting-fields-and"></a>
<p>As we&rsquo;ve seen, <code class="command">gawk</code> provides three independent methods to split
input records into fields.  The mechanism used is based on which of the
three variables&mdash;<code class="code">FS</code>, <code class="code">FIELDWIDTHS</code>, or <code class="code">FPAT</code>&mdash;was
last assigned to. In addition, an API input parser may choose to override
the record parsing mechanism; please refer to <a class="ref" href="#Input-Parsers">Customized Input Parsers</a> for
further information about this feature.
</p>
<p>To restore normal field splitting after using <code class="code">FIELDWIDTHS</code>
and/or <code class="code">FPAT</code>, simply assign a value to <code class="code">FS</code>.
You can use &lsquo;<samp class="samp">FS = FS</samp>&rsquo; to do this,
without having to know the current value of <code class="code">FS</code>.
</p>
<p>In order to tell which kind of field splitting is in effect,
use <code class="code">PROCINFO[&quot;FS&quot;]</code> (see <a class="pxref" href="#Auto_002dset">Built-in Variables That Convey Information</a>).
The value is <code class="code">&quot;FS&quot;</code> if regular field splitting is being used,
<code class="code">&quot;FIELDWIDTHS&quot;</code> if fixed-width field splitting is being used,
or <code class="code">&quot;FPAT&quot;</code> if content-based field splitting is being used:
</p>
<div class="example">
<pre class="example-preformatted">if (&quot;CSV&quot; in PROCINFO)
    <var class="var">CSV-based field splitting</var> ...
else if (PROCINFO[&quot;FS&quot;] == &quot;FS&quot;)
    <var class="var">regular field splitting</var> ...
else if (PROCINFO[&quot;FS&quot;] == &quot;FIELDWIDTHS&quot;)
    <var class="var">fixed-width field splitting</var> ...
else if (PROCINFO[&quot;FS&quot;] == &quot;FPAT&quot;)
    <var class="var">content-based field splitting</var> ...
else
    <var class="var">API input parser field splitting</var> ... <i class="i">(advanced feature)</i>
</pre></div>

<p>This information is useful when writing a function that needs to
temporarily change <code class="code">FS</code>, <code class="code">FIELDWIDTHS</code>, or <code class="code">FPAT</code>, read some records,
and then restore the original settings (see <a class="pxref" href="#Passwd-Functions">Reading the User Database</a> for an
example of such a function).
</p>
<hr>
</div>
<div class="section-level-extent" id="Multiple-Line">
<div class="nav-panel">
<p>
Next: <a href="#Getline" accesskey="n" rel="next">Explicit Input with <code class="code">getline</code></a>, Previous: <a href="#Testing-field-creation" accesskey="p" rel="prev">Checking How <code class="command">gawk</code> Is Splitting Records</a>, Up: <a href="#Reading-Files" accesskey="u" rel="up">Reading Input Files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Multiple_002dLine-Records"><span>4.9 Multiple-Line Records<a class="copiable-link" href="#Multiple_002dLine-Records"> &para;</a></span></h3>

<a class="index-entry-id" id="index-multiple_002dline-records"></a>
<a class="index-entry-id" id="index-records-multiline"></a>
<a class="index-entry-id" id="index-input-multiline-records"></a>
<a class="index-entry-id" id="index-files-reading-multiline-records"></a>
<p>In some databases, a single line cannot conveniently hold all the
information in one entry.  In such cases, you can use multiline
records.  The first step in doing this is to choose your data format.
</p>
<a class="index-entry-id" id="index-record-separators-with-multiline-records"></a>
<p>One technique is to use an unusual character or string to separate
records.  For example, you could use the formfeed character (written
&lsquo;<samp class="samp">\f</samp>&rsquo; in <code class="command">awk</code>, as in C) to separate them, making each record
a page of the file.  To do this, just set the variable <code class="code">RS</code> to
<code class="code">&quot;\f&quot;</code> (a string containing the formfeed character).  Any
other character could equally well be used, as long as it won&rsquo;t be part
of the data in a record.
</p>
<a class="index-entry-id" id="index-RS-variable-multiline-records-and"></a>
<p>Another technique is to have blank lines separate records.  By a special
dispensation, an empty string as the value of <code class="code">RS</code> indicates that
records are separated by one or more blank lines.  When <code class="code">RS</code> is set
to the empty string, each record always ends at the first blank line
encountered.  The next record doesn&rsquo;t start until the first nonblank
line that follows.  No matter how many blank lines appear in a row, they
all act as one record separator.
(Blank lines must be completely empty; lines that contain only
whitespace do not count.)
</p>
<a class="index-entry-id" id="index-leftmost-longest-match"></a>
<a class="index-entry-id" id="index-matching-leftmost-longest"></a>
<p>You can achieve the same effect as &lsquo;<samp class="samp">RS = &quot;&quot;</samp>&rsquo; by assigning the
string <code class="code">&quot;\n\n+&quot;</code> to <code class="code">RS</code>. This regexp matches the newline
at the end of the record and one or more blank lines after the record.
In addition, a regular expression always matches the longest possible
sequence when there is a choice
(see <a class="pxref" href="#Leftmost-Longest">How Much Text Matches?</a>).
So, the next record doesn&rsquo;t start until
the first nonblank line that follows&mdash;no matter how many blank lines
appear in a row, they are considered one record separator.
</p>
<a class="index-entry-id" id="index-dark-corner-multiline-records"></a>
<p>However, there is an important difference between &lsquo;<samp class="samp">RS = &quot;&quot;</samp>&rsquo; and
&lsquo;<samp class="samp">RS = &quot;\n\n+&quot;</samp>&rsquo;. In the first case, leading newlines in the input
data file are ignored, and if a file ends without extra blank lines
after the last record, the final newline is removed from the record.
In the second case, this special processing is not done.
(d.c.)
</p>
<a class="index-entry-id" id="index-field-separator-in-multiline-records"></a>
<a class="index-entry-id" id="index-FS-variable-in-multiline-records"></a>
<p>Now that the input is separated into records, the second step is to
separate the fields in the records.  One way to do this is to divide each
of the lines into fields in the normal manner.  This happens by default
as the result of a special feature.  When <code class="code">RS</code> is set to the empty
string <em class="emph">and</em> <code class="code">FS</code> is set to a single character,
the newline character <em class="emph">always</em> acts as a field separator.
This is in addition to whatever field separations result from
<code class="code">FS</code>.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> When <code class="code">FS</code> is the null string (<code class="code">&quot;&quot;</code>)
or a regexp, this special feature of <code class="code">RS</code> does not apply.
It does apply to the default field separator of a single space:
&lsquo;<samp class="samp">FS = &quot;&nbsp;&quot;<!-- /@w --></samp>&rsquo;.
</p>
<p>Note that language in the POSIX specification implies that
this special feature should apply when <code class="code">FS</code> is a regexp.
However, Unix <code class="command">awk</code> has never behaved that way, nor has
<code class="command">gawk</code>. This is essentially a bug in POSIX.
</p></blockquote>

<p>The original motivation for this special exception was probably to provide
useful behavior in the default case (i.e., <code class="code">FS</code> is equal
to <code class="code">&quot;&nbsp;&quot;</code><!-- /@w -->).  This feature can be a problem if you really don&rsquo;t
want the newline character to separate fields, because there is no way to
prevent it.  However, you can work around this by using the <code class="code">split()</code>
function to break up the record manually
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
If you have a single-character field separator, you can work around
the special feature in a different way, by making <code class="code">FS</code> into a
regexp for that single character.  For example, if the field
separator is a percent character, instead of
&lsquo;<samp class="samp">FS = &quot;%&quot;</samp>&rsquo;, use &lsquo;<samp class="samp">FS = &quot;[%]&quot;</samp>&rsquo;.
</p>
<p>Another way to separate fields is to
put each field on a separate line: to do this, just set the
variable <code class="code">FS</code> to the string <code class="code">&quot;\n&quot;</code>.
(This single-character separator matches a single newline.)
A practical example of a data file organized this way might be a mailing
list, where blank lines separate the entries.  Consider a mailing
list in a file named <samp class="file">addresses</samp>, which looks like this:
</p>
<div class="example">
<pre class="example-preformatted">Jane Doe
123 Main Street
Anywhere, SE 12345-6789

John Smith
456 Tree-lined Avenue
Smallville, MW 98765-4321
...
</pre></div>

<p>A simple program to process this file is as follows:
</p>
<div class="example">
<pre class="example-preformatted"># addrs.awk --- simple mailing list program

# Records are separated by blank lines.
# Each line is one field.
BEGIN { RS = &quot;&quot; ; FS = &quot;\n&quot; }

{
      print &quot;Name is:&quot;, $1
      print &quot;Address is:&quot;, $2
      print &quot;City and State are:&quot;, $3
      print &quot;&quot;
}
</pre></div>

<p>Running the program produces the following output:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk -f addrs.awk addresses</kbd>
-| Name is: Jane Doe
-| Address is: 123 Main Street
-| City and State are: Anywhere, SE 12345-6789
-|
-| Name is: John Smith
-| Address is: 456 Tree-lined Avenue
-| City and State are: Smallville, MW 98765-4321
-|
...
</pre></div>

<p>See <a class="xref" href="#Labels-Program">Printing Mailing Labels</a> for a more realistic program dealing with
address lists.  The following list summarizes how records are split,
based on the value of
<code class="code">RS</code>:
</p>
<dl class="table">
<dt><code class="code">RS == &quot;\n&quot;</code></dt>
<dd><p>Records are separated by the newline character (&lsquo;<samp class="samp">\n</samp>&rsquo;).  In effect,
every line in the data file is a separate record, including blank lines.
This is the default.
</p>
</dd>
<dt><code class="code">RS == <var class="var">any single character</var></code></dt>
<dd><p>Records are separated by each occurrence of the character.  Multiple
successive occurrences delimit empty records.
</p>
</dd>
<dt><code class="code">RS == &quot;&quot;</code></dt>
<dd><p>Records are separated by runs of blank lines.
When <code class="code">FS</code> is a single character, then
the newline character
always serves as a field separator, in addition to whatever value
<code class="code">FS</code> may have. Leading and trailing newlines in a file are ignored.
</p>
</dd>
<dt><code class="code">RS == <var class="var">regexp</var></code></dt>
<dd><p>Records are separated by occurrences of characters that match <var class="var">regexp</var>.
Leading and trailing matches of <var class="var">regexp</var> delimit empty records.
(This is a <code class="command">gawk</code> extension; it is not specified by the
POSIX standard.)
</p></dd>
</dl>

<a class="index-entry-id" id="index-gawk-RT-variable-in-2"></a>
<a class="index-entry-id" id="index-RT-variable-2"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-RS_002fRT-variables-2"></a>
<p>If not in compatibility mode (see <a class="pxref" href="#Options">Command-Line Options</a>), <code class="command">gawk</code> sets
<code class="code">RT</code> to the input text that matched the value specified by <code class="code">RS</code>.
But if the input file ended without any text that matches <code class="code">RS</code>,
then <code class="command">gawk</code> sets <code class="code">RT</code> to the null string.
</p>
<hr>
</div>
<div class="section-level-extent" id="Getline">
<div class="nav-panel">
<p>
Next: <a href="#Read-Timeout" accesskey="n" rel="next">Reading Input with a Timeout</a>, Previous: <a href="#Multiple-Line" accesskey="p" rel="prev">Multiple-Line Records</a>, Up: <a href="#Reading-Files" accesskey="u" rel="up">Reading Input Files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Explicit-Input-with-getline"><span>4.10 Explicit Input with <code class="code">getline</code><a class="copiable-link" href="#Explicit-Input-with-getline"> &para;</a></span></h3>

<a class="index-entry-id" id="index-getline-command-explicit-input-with"></a>
<a class="index-entry-id" id="index-input-explicit"></a>
<p>So far we have been getting our input data from <code class="command">awk</code>&rsquo;s main
input stream&mdash;either the standard input (usually your keyboard, sometimes
the output from another program) or the
files specified on the command line.  The <code class="command">awk</code> language has a
special built-in command called <code class="code">getline</code> that
can be used to read input under your explicit control.
</p>
<p>The <code class="code">getline</code> command is used in several different ways and should
<em class="emph">not</em> be used by beginners.
The examples that follow the explanation of the <code class="code">getline</code> command
include material that has not been covered yet.  Therefore, come back
and study the <code class="code">getline</code> command <em class="emph">after</em> you have reviewed the
rest of
this Web page
and have a good knowledge of how <code class="command">awk</code> works.
</p>
<a class="index-entry-id" id="index-gawk-ERRNO-variable-in"></a>
<a class="index-entry-id" id="index-ERRNO-variable-with-getline-command"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-getline-command"></a>
<a class="index-entry-id" id="index-getline-command-return-values"></a>
<a class="index-entry-id" id="index-_002d_002dsandbox-option-input-redirection-with-getline"></a>

<p>The <code class="code">getline</code> command returns 1 if it finds a record and 0 if
it encounters the end of the file.  If there is some error in getting
a record, such as a file that cannot be opened, then <code class="code">getline</code>
returns &minus;1.  In this case, <code class="command">gawk</code> sets the variable
<code class="code">ERRNO</code> to a string describing the error that occurred.
</p>
<p>If <code class="code">ERRNO</code> indicates that the I/O operation may be
retried, and <code class="code">PROCINFO[&quot;<var class="var">input</var>&quot;, &quot;RETRY&quot;]</code> is set,
then <code class="code">getline</code> returns &minus;2
instead of &minus;1, and further calls to <code class="code">getline</code>
may be attempted.  See <a class="xref" href="#Retrying-Input">Retrying Reads After Certain Input Errors</a> for further information about
this feature.
</p>
<p>In the following examples, <var class="var">command</var> stands for a string value that
represents a shell command.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> When <samp class="option">--sandbox</samp> is specified (see <a class="pxref" href="#Options">Command-Line Options</a>),
reading lines from files, pipes, and coprocesses is disabled.
</p></blockquote>


<ul class="mini-toc">
<li><a href="#Plain-Getline" accesskey="1">Using <code class="code">getline</code> with No Arguments</a></li>
<li><a href="#Getline_002fVariable" accesskey="2">Using <code class="code">getline</code> into a Variable</a></li>
<li><a href="#Getline_002fFile" accesskey="3">Using <code class="code">getline</code> from a File</a></li>
<li><a href="#Getline_002fVariable_002fFile" accesskey="4">Using <code class="code">getline</code> into a Variable from a File</a></li>
<li><a href="#Getline_002fPipe" accesskey="5">Using <code class="code">getline</code> from a Pipe</a></li>
<li><a href="#Getline_002fVariable_002fPipe" accesskey="6">Using <code class="code">getline</code> into a Variable from a Pipe</a></li>
<li><a href="#Getline_002fCoprocess" accesskey="7">Using <code class="code">getline</code> from a Coprocess</a></li>
<li><a href="#Getline_002fVariable_002fCoprocess" accesskey="8">Using <code class="code">getline</code> into a Variable from a Coprocess</a></li>
<li><a href="#Getline-Notes" accesskey="9">Points to Remember About <code class="code">getline</code></a></li>
<li><a href="#Getline-Summary">Summary of <code class="code">getline</code> Variants</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Plain-Getline">
<div class="nav-panel">
<p>
Next: <a href="#Getline_002fVariable" accesskey="n" rel="next">Using <code class="code">getline</code> into a Variable</a>, Up: <a href="#Getline" accesskey="u" rel="up">Explicit Input with <code class="code">getline</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Using-getline-with-No-Arguments"><span>4.10.1 Using <code class="code">getline</code> with No Arguments<a class="copiable-link" href="#Using-getline-with-No-Arguments"> &para;</a></span></h4>

<p>The <code class="code">getline</code> command can be used without arguments to read input
from the current input file.  All it does in this case is read the next
input record and split it up into fields.  This is useful if you&rsquo;ve
finished processing the current record, but want to do some special
processing on the next record <em class="emph">right now</em>.  For example:
</p>
<div class="example">
<pre class="example-preformatted"># Remove text between /* and */, inclusive
{
    while ((start = index($0, &quot;/*&quot;)) != 0) {
        out = substr($0, 1, start - 1)  # leading part of the string
        rest = substr($0, start + 2)    # ... */ ...
        while ((end = index(rest, &quot;*/&quot;)) == 0) {  # is */ in trailing part?
            # get more text
            if (getline &lt;= 0) {
                print(&quot;unexpected EOF or error:&quot;, ERRNO) &gt; &quot;/dev/stderr&quot;
                exit
            }
            # build up the line using string concatenation
            rest = rest $0
        }
        rest = substr(rest, end + 2)  # remove comment
        # build up the output line using string concatenation
        $0 = out rest
    }
    print $0
}
</pre></div>

<p>This <code class="command">awk</code> program deletes C-style comments (&lsquo;<samp class="samp">/* &hellip;
*/</samp>&rsquo;) from the input.
It uses a number of features we haven&rsquo;t covered yet, including
string concatenation
(see <a class="pxref" href="#Concatenation">String Concatenation</a>)
and the <code class="code">index()</code> and <code class="code">substr()</code> built-in
functions
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
By replacing the &lsquo;<samp class="samp">print $0</samp>&rsquo; with other
statements, you could perform more complicated processing on the
decommented input, such as searching for matches of a regular
expression.
</p>
<p>Here is some sample input:
</p>
<div class="example">
<pre class="example-preformatted">mon/*comment*/key
rab/*commen
t*/bit
horse /*comment*/more text
part 1 /*comment*/part 2 /*comment*/part 3
no comment
</pre></div>

<p>When run, the output is:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk -f strip_comments.awk example_text</kbd>
-| monkey
-| rabbit
-| horse more text
-| part 1 part 2 part 3
-| no comment
</pre></div>

<p>This form of the <code class="code">getline</code> command sets <code class="code">NF</code>,
<code class="code">NR</code>, <code class="code">FNR</code>, <code class="code">RT</code>, and the value of <code class="code">$0</code>.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> The new value of <code class="code">$0</code> is used to test
the patterns of any subsequent rules.  The original value
of <code class="code">$0</code> that triggered the rule that executed <code class="code">getline</code>
is lost.
By contrast, the <code class="code">next</code> statement reads a new record
but immediately begins processing it normally, starting with the first
rule in the program.  See <a class="xref" href="#Next-Statement">The <code class="code">next</code> Statement</a>.
</p></blockquote>

<hr>
</div>
<div class="subsection-level-extent" id="Getline_002fVariable">
<div class="nav-panel">
<p>
Next: <a href="#Getline_002fFile" accesskey="n" rel="next">Using <code class="code">getline</code> from a File</a>, Previous: <a href="#Plain-Getline" accesskey="p" rel="prev">Using <code class="code">getline</code> with No Arguments</a>, Up: <a href="#Getline" accesskey="u" rel="up">Explicit Input with <code class="code">getline</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Using-getline-into-a-Variable"><span>4.10.2 Using <code class="code">getline</code> into a Variable<a class="copiable-link" href="#Using-getline-into-a-Variable"> &para;</a></span></h4>
<a class="index-entry-id" id="index-getline-command-into-a-variable"></a>
<a class="index-entry-id" id="index-variables-getline-command-into_002c-using"></a>

<p>You can use &lsquo;<samp class="samp">getline <var class="var">var</var></samp>&rsquo; to read the next record from
<code class="command">awk</code>&rsquo;s input into the variable <var class="var">var</var>.  No other processing is
done.
For example, suppose the next line is a comment or a special string,
and you want to read it without triggering
any rules.  This form of <code class="code">getline</code> allows you to read that line
and store it in a variable so that the main
read-a-line-and-check-each-rule loop of <code class="command">awk</code> never sees it.
The following example swaps every two lines of input:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">{
     if ((getline tmp) &gt; 0) {
          print tmp
          print $0
     } else
          print $0
}
</pre></div></div>

<p>It takes the following list:
</p>
<div class="example">
<pre class="example-preformatted">wan
tew
free
phore
</pre></div>

<p>and produces these results:
</p>
<div class="example">
<pre class="example-preformatted">tew
wan
phore
free
</pre></div>

<p>The <code class="code">getline</code> command used in this way sets only the variables
<code class="code">NR</code>, <code class="code">FNR</code>, and <code class="code">RT</code> (and, of course, <var class="var">var</var>).
The record is not
split into fields, so the values of the fields (including <code class="code">$0</code>) and
the value of <code class="code">NF</code> do not change.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Getline_002fFile">
<div class="nav-panel">
<p>
Next: <a href="#Getline_002fVariable_002fFile" accesskey="n" rel="next">Using <code class="code">getline</code> into a Variable from a File</a>, Previous: <a href="#Getline_002fVariable" accesskey="p" rel="prev">Using <code class="code">getline</code> into a Variable</a>, Up: <a href="#Getline" accesskey="u" rel="up">Explicit Input with <code class="code">getline</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Using-getline-from-a-File"><span>4.10.3 Using <code class="code">getline</code> from a File<a class="copiable-link" href="#Using-getline-from-a-File"> &para;</a></span></h4>

<a class="index-entry-id" id="index-getline-command-from-a-file"></a>
<a class="index-entry-id" id="index-input-redirection"></a>
<a class="index-entry-id" id="index-redirection-of-input"></a>
<a class="index-entry-id" id="index-_003c-_0028left-angle-bracket_0029-_003c-operator-_0028I_002fO_0029"></a>
<a class="index-entry-id" id="index-left-angle-bracket-_0028_003c_0029-_003c-operator-_0028I_002fO_0029"></a>
<a class="index-entry-id" id="index-operators-input_002foutput"></a>
<p>Use &lsquo;<samp class="samp">getline &lt; <var class="var">file</var></samp>&rsquo; to read the next record from <var class="var">file</var>.
Here, <var class="var">file</var> is a string-valued expression that
specifies the file name.  &lsquo;<samp class="samp">&lt; <var class="var">file</var></samp>&rsquo; is called a <em class="dfn">redirection</em>
because it directs input to come from a different place.
For example, the following
program reads its input record from the file <samp class="file">secondary.input</samp> when it
encounters a first field with a value equal to 10 in the current input
file:
</p>
<div class="example">
<pre class="example-preformatted">{
    if ($1 == 10) {
         getline &lt; &quot;secondary.input&quot;
         print
    } else
         print
}
</pre></div>

<p>Because the main input stream is not used, the values of <code class="code">NR</code> and
<code class="code">FNR</code> are not changed. However, the record it reads is split into fields in
the normal manner, so the values of <code class="code">$0</code> and the other fields are
changed, resulting in a new value of <code class="code">NF</code>.
<code class="code">RT</code> is also set.
</p>
<a class="index-entry-id" id="index-POSIX-awk-_003c-operator-and"></a>
<p>According to POSIX, &lsquo;<samp class="samp">getline &lt; <var class="var">expression</var></samp>&rsquo; is ambiguous if
<var class="var">expression</var> contains unparenthesized operators other than
&lsquo;<samp class="samp">$</samp>&rsquo;; for example, &lsquo;<samp class="samp">getline &lt; dir &quot;/&quot; file</samp>&rsquo; is ambiguous
because the concatenation operator (not discussed yet; see <a class="pxref" href="#Concatenation">String Concatenation</a>)
is not parenthesized.  You should write it as &lsquo;<samp class="samp">getline &lt; (dir &quot;/&quot; file)</samp>&rsquo; if
you want your program to be portable to all <code class="command">awk</code> implementations.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Getline_002fVariable_002fFile">
<div class="nav-panel">
<p>
Next: <a href="#Getline_002fPipe" accesskey="n" rel="next">Using <code class="code">getline</code> from a Pipe</a>, Previous: <a href="#Getline_002fFile" accesskey="p" rel="prev">Using <code class="code">getline</code> from a File</a>, Up: <a href="#Getline" accesskey="u" rel="up">Explicit Input with <code class="code">getline</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Using-getline-into-a-Variable-from-a-File"><span>4.10.4 Using <code class="code">getline</code> into a Variable from a File<a class="copiable-link" href="#Using-getline-into-a-Variable-from-a-File"> &para;</a></span></h4>
<a class="index-entry-id" id="index-variables-getline-command-into_002c-using-1"></a>

<p>Use &lsquo;<samp class="samp">getline <var class="var">var</var> &lt; <var class="var">file</var></samp>&rsquo; to read input
from the file
<var class="var">file</var>, and put it in the variable <var class="var">var</var>.  As earlier, <var class="var">file</var>
is a string-valued expression that specifies the file from which to read.
</p>
<p>In this version of <code class="code">getline</code>, none of the predefined variables are
changed and the record is not split into fields.  The only variable
changed is <var class="var">var</var>.<a class="footnote" id="DOCF27" href="#FOOT27"><sup>27</sup></a>
For example, the following program copies all the input files to the
output, except for records that say &lsquo;<samp class="samp">@include&nbsp;<var class="var">filename</var></samp>&rsquo;<!-- /@w -->.
Such a record is replaced by the contents of the file
<var class="var">filename</var>:
</p>
<div class="example">
<pre class="example-preformatted">{
     if (NF == 2 &amp;&amp; $1 == &quot;@include&quot;) {
          while ((getline line &lt; $2) &gt; 0)
               print line
          close($2)
     } else
          print
}
</pre></div>

<p>Note here how the name of the extra input file is not built into
the program; it is taken directly from the data, specifically from the second field on
the <code class="code">@include</code> line.
</p>
<p>The <code class="code">close()</code> function is called to ensure that if two identical
<code class="code">@include</code> lines appear in the input, the entire specified file is
included twice.
See <a class="xref" href="#Close-Files-And-Pipes">Closing Input and Output Redirections</a>.
</p>
<p>One deficiency of this program is that it does not process nested
<code class="code">@include</code> statements
(i.e., <code class="code">@include</code> statements in included files)
the way a true macro preprocessor would.
See <a class="xref" href="#Igawk-Program">An Easy Way to Use Library Functions</a> for a program
that does handle nested <code class="code">@include</code> statements.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Getline_002fPipe">
<div class="nav-panel">
<p>
Next: <a href="#Getline_002fVariable_002fPipe" accesskey="n" rel="next">Using <code class="code">getline</code> into a Variable from a Pipe</a>, Previous: <a href="#Getline_002fVariable_002fFile" accesskey="p" rel="prev">Using <code class="code">getline</code> into a Variable from a File</a>, Up: <a href="#Getline" accesskey="u" rel="up">Explicit Input with <code class="code">getline</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Using-getline-from-a-Pipe"><span>4.10.5 Using <code class="code">getline</code> from a Pipe<a class="copiable-link" href="#Using-getline-from-a-Pipe"> &para;</a></span></h4>

<a class="index-entry-id" id="index-Kernighan_002c-Brian-quotes-2"></a>
<blockquote class="quotation">
<p><i class="i">Omniscience has much to recommend it.
Failing that, attention to details would be useful.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Brian Kernighan</em>
</div>
<a class="index-entry-id" id="index-_007c-_0028vertical-bar_0029-_007c-operator-_0028I_002fO_0029"></a>
<a class="index-entry-id" id="index-vertical-bar-_0028_007c_0029-_007c-operator-_0028I_002fO_0029"></a>
<a class="index-entry-id" id="index-input-pipeline"></a>
<a class="index-entry-id" id="index-pipe-input"></a>
<a class="index-entry-id" id="index-operators-input_002foutput-1"></a>
<p>The output of a command can also be piped into <code class="code">getline</code>, using
&lsquo;<samp class="samp"><var class="var">command</var> | getline</samp>&rsquo;.  In
this case, the string <var class="var">command</var> is run as a shell command and its output
is piped into <code class="command">awk</code> to be used as input.  This form of <code class="code">getline</code>
reads one record at a time from the pipe.
For example, the following program copies its input to its output, except for
lines that begin with &lsquo;<samp class="samp">@execute</samp>&rsquo;, which are replaced by the output
produced by running the rest of the line as a shell command:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">{
     if ($1 == &quot;@execute&quot;) {
          tmp = substr($0, 10)        # Remove &quot;@execute&quot;
          while ((tmp | getline) &gt; 0)
               print
          close(tmp)
     } else
          print
}
</pre></div></div>

<p>The <code class="code">close()</code> function is called to ensure that if two identical
&lsquo;<samp class="samp">@execute</samp>&rsquo; lines appear in the input, the command is run for
each one.
See <a class="xref" href="#Close-Files-And-Pipes">Closing Input and Output Redirections</a>.
Given the input:
</p>
<div class="example">
<pre class="example-preformatted">foo
bar
baz
@execute who
bletch
</pre></div>

<p>the program might produce:
</p>
<a class="index-entry-id" id="index-Robbins-Bill"></a>
<a class="index-entry-id" id="index-Robbins-Miriam-1"></a>
<a class="index-entry-id" id="index-Robbins-Arnold-1"></a>
<div class="example">
<pre class="example-preformatted">foo
bar
baz
arnold     ttyv0   Jul 13 14:22
miriam     ttyp0   Jul 13 14:23     (murphy:0)
bill       ttyp1   Jul 13 14:23     (murphy:0)
bletch
</pre></div>

<p>Notice that this program ran the command <code class="command">who</code> and printed the result.
(If you try this program yourself, you will of course get different results,
depending upon who is logged in on your system.)
</p>
<p>This variation of <code class="code">getline</code> splits the record into fields, sets the
value of <code class="code">NF</code>, and recomputes the value of <code class="code">$0</code>.  The values of
<code class="code">NR</code> and <code class="code">FNR</code> are not changed.
<code class="code">RT</code> is set.
</p>
<a class="index-entry-id" id="index-POSIX-awk-_007c-I_002fO-operator-and"></a>
<p>According to POSIX, &lsquo;<samp class="samp"><var class="var">expression</var> | getline</samp>&rsquo; is ambiguous if
<var class="var">expression</var> contains unparenthesized operators other than
&lsquo;<samp class="samp">$</samp>&rsquo;&mdash;for example, &lsquo;<samp class="samp">&quot;echo&nbsp;&quot;<!-- /@w --> &quot;date&quot; | getline</samp>&rsquo; is ambiguous
because the concatenation operator is not parenthesized.  You should
write it as &lsquo;<samp class="samp">(&quot;echo&nbsp;&quot;<!-- /@w --> &quot;date&quot;) | getline</samp>&rsquo; if you want your program
to be portable to all <code class="command">awk</code> implementations.
</p>
<a class="index-entry-id" id="index-Brian-Kernighan_0027s-awk-5"></a>
<a class="index-entry-id" id="index-mawk-utility-1"></a>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> Unfortunately, <code class="command">gawk</code> has not been consistent in its treatment
of a construct like &lsquo;<samp class="samp">&quot;echo&nbsp;&quot;<!-- /@w --> &quot;date&quot; | getline</samp>&rsquo;.
Most versions, including the current version, treat it as
&lsquo;<samp class="samp">(&quot;echo&nbsp;&quot;<!-- /@w --> &quot;date&quot;) | getline</samp>&rsquo;.
(This is also how BWK <code class="command">awk</code> behaves.)
Some versions instead treat it as
&lsquo;<samp class="samp">&quot;echo&nbsp;&quot;<!-- /@w --> (&quot;date&quot; | getline)</samp>&rsquo;.
(This is how <code class="command">mawk</code> behaves.)
In short, <em class="emph">always</em> use explicit parentheses, and then you won&rsquo;t
have to worry.
</p></blockquote>

<hr>
</div>
<div class="subsection-level-extent" id="Getline_002fVariable_002fPipe">
<div class="nav-panel">
<p>
Next: <a href="#Getline_002fCoprocess" accesskey="n" rel="next">Using <code class="code">getline</code> from a Coprocess</a>, Previous: <a href="#Getline_002fPipe" accesskey="p" rel="prev">Using <code class="code">getline</code> from a Pipe</a>, Up: <a href="#Getline" accesskey="u" rel="up">Explicit Input with <code class="code">getline</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Using-getline-into-a-Variable-from-a-Pipe"><span>4.10.6 Using <code class="code">getline</code> into a Variable from a Pipe<a class="copiable-link" href="#Using-getline-into-a-Variable-from-a-Pipe"> &para;</a></span></h4>
<a class="index-entry-id" id="index-variables-getline-command-into_002c-using-2"></a>

<p>When you use &lsquo;<samp class="samp"><var class="var">command</var> | getline <var class="var">var</var></samp>&rsquo;, the
output of <var class="var">command</var> is sent through a pipe to
<code class="code">getline</code> and into the variable <var class="var">var</var>.  For example, the
following program reads the current date and time into the variable
<code class="code">current_time</code>, using the <code class="command">date</code> utility, and then
prints it:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
     &quot;date&quot; | getline current_time
     close(&quot;date&quot;)
     print &quot;Report printed on &quot; current_time
}
</pre></div>

<p>In this version of <code class="code">getline</code>, none of the predefined variables are
changed and the record is not split into fields. However, <code class="code">RT</code> is set.
</p>

<hr>
</div>
<div class="subsection-level-extent" id="Getline_002fCoprocess">
<div class="nav-panel">
<p>
Next: <a href="#Getline_002fVariable_002fCoprocess" accesskey="n" rel="next">Using <code class="code">getline</code> into a Variable from a Coprocess</a>, Previous: <a href="#Getline_002fVariable_002fPipe" accesskey="p" rel="prev">Using <code class="code">getline</code> into a Variable from a Pipe</a>, Up: <a href="#Getline" accesskey="u" rel="up">Explicit Input with <code class="code">getline</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Using-getline-from-a-Coprocess"><span>4.10.7 Using <code class="code">getline</code> from a Coprocess<a class="copiable-link" href="#Using-getline-from-a-Coprocess"> &para;</a></span></h4>
<a class="index-entry-id" id="index-coprocesses-getline-from"></a>
<a class="index-entry-id" id="index-getline-command-coprocesses_002c-using-from"></a>
<a class="index-entry-id" id="index-_007c-_0028vertical-bar_0029-_007c_0026-operator-_0028I_002fO_0029"></a>
<a class="index-entry-id" id="index-vertical-bar-_0028_007c_0029-_007c_0026-operator-_0028I_002fO_0029"></a>
<a class="index-entry-id" id="index-operators-input_002foutput-2"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-input_002foutput-operators"></a>

<p>Reading input into <code class="code">getline</code> from a pipe is a one-way operation.
The command that is started with &lsquo;<samp class="samp"><var class="var">command</var> | getline</samp>&rsquo; only
sends data <em class="emph">to</em> your <code class="command">awk</code> program.
</p>
<p>On occasion, you might want to send data to another program
for processing and then read the results back.
<code class="command">gawk</code> allows you to start a <em class="dfn">coprocess</em>, with which two-way
communications are possible.  This is done with the &lsquo;<samp class="samp">|&amp;</samp>&rsquo;
operator.
Typically, you write data to the coprocess first and then
read the results back, as shown in the following:
</p>
<div class="example">
<pre class="example-preformatted">print &quot;<var class="var">some query</var>&quot; |&amp; &quot;db_server&quot;
&quot;db_server&quot; |&amp; getline
</pre></div>

<p>which sends a query to <code class="command">db_server</code> and then reads the results.
</p>
<p>The values of <code class="code">NR</code> and
<code class="code">FNR</code> are not changed,
because the main input stream is not used.
However, the record is split into fields in
the normal manner, thus changing the values of <code class="code">$0</code>, of the other fields,
and of <code class="code">NF</code> and <code class="code">RT</code>.
</p>
<p>Coprocesses are an advanced feature. They are discussed here only because
this is the section on <code class="code">getline</code>.
See <a class="xref" href="#Two_002dway-I_002fO">Two-Way Communications with Another Process</a>,
where coprocesses are discussed in more detail.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Getline_002fVariable_002fCoprocess">
<div class="nav-panel">
<p>
Next: <a href="#Getline-Notes" accesskey="n" rel="next">Points to Remember About <code class="code">getline</code></a>, Previous: <a href="#Getline_002fCoprocess" accesskey="p" rel="prev">Using <code class="code">getline</code> from a Coprocess</a>, Up: <a href="#Getline" accesskey="u" rel="up">Explicit Input with <code class="code">getline</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Using-getline-into-a-Variable-from-a-Coprocess"><span>4.10.8 Using <code class="code">getline</code> into a Variable from a Coprocess<a class="copiable-link" href="#Using-getline-into-a-Variable-from-a-Coprocess"> &para;</a></span></h4>
<a class="index-entry-id" id="index-variables-getline-command-into_002c-using-3"></a>

<p>When you use &lsquo;<samp class="samp"><var class="var">command</var> |&amp; getline <var class="var">var</var></samp>&rsquo;, the output from
the coprocess <var class="var">command</var> is sent through a two-way pipe to <code class="code">getline</code>
and into the variable <var class="var">var</var>.
</p>
<p>In this version of <code class="code">getline</code>, none of the predefined variables are
changed and the record is not split into fields.  The only variable
changed is <var class="var">var</var>.
However, <code class="code">RT</code> is set.
</p>

<hr>
</div>
<div class="subsection-level-extent" id="Getline-Notes">
<div class="nav-panel">
<p>
Next: <a href="#Getline-Summary" accesskey="n" rel="next">Summary of <code class="code">getline</code> Variants</a>, Previous: <a href="#Getline_002fVariable_002fCoprocess" accesskey="p" rel="prev">Using <code class="code">getline</code> into a Variable from a Coprocess</a>, Up: <a href="#Getline" accesskey="u" rel="up">Explicit Input with <code class="code">getline</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Points-to-Remember-About-getline"><span>4.10.9 Points to Remember About <code class="code">getline</code><a class="copiable-link" href="#Points-to-Remember-About-getline"> &para;</a></span></h4>
<p>Here are some miscellaneous points about <code class="code">getline</code> that
you should bear in mind:
</p>
<ul class="itemize mark-bullet">
<li>When <code class="code">getline</code> changes the value of <code class="code">$0</code> and <code class="code">NF</code>,
<code class="command">awk</code> does <em class="emph">not</em> automatically jump to the start of the
program and start testing the new record against every pattern.
However, the new record is tested against any subsequent rules.

<a class="index-entry-id" id="index-differences-in-awk-and-gawk-implementation-limitations"></a>
<a class="index-entry-id" id="index-implementation-issues_002c-gawk-limits"></a>
<a class="index-entry-id" id="index-awk-implementations-limits"></a>
<a class="index-entry-id" id="index-gawk-implementation-issues-limits"></a>
</li><li>Some very old <code class="command">awk</code> implementations limit the number of pipelines that an <code class="command">awk</code>
program may have open to just one.  In <code class="command">gawk</code>, there is no such limit.
You can open as many pipelines (and coprocesses) as the underlying operating
system permits.

<a class="index-entry-id" id="index-side-effects-FILENAME-variable"></a>
<a class="index-entry-id" id="index-FILENAME-variable-getline_002c-setting-with"></a>
<a class="index-entry-id" id="index-dark-corner-FILENAME-variable"></a>
<a class="index-entry-id" id="index-getline-command-FILENAME-variable-and"></a>
<a class="index-entry-id" id="index-BEGIN-pattern-getline-and"></a>
</li><li>An interesting side effect occurs if you use <code class="code">getline</code> without a
redirection inside a <code class="code">BEGIN</code> rule. Because an unredirected <code class="code">getline</code>
reads from the command-line data files, the first <code class="code">getline</code> command
causes <code class="command">awk</code> to set the value of <code class="code">FILENAME</code>. Normally,
<code class="code">FILENAME</code> does not have a value inside <code class="code">BEGIN</code> rules, because you
have not yet started to process the command-line data files.
(d.c.)
(See <a class="ref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>;
also see <a class="pxref" href="#Auto_002dset">Built-in Variables That Convey Information</a>.)

</li><li>Using <code class="code">FILENAME</code> with <code class="code">getline</code>
(&lsquo;<samp class="samp">getline &lt; FILENAME</samp>&rsquo;)
is likely to be a source of
confusion.  <code class="command">awk</code> opens a separate input stream from the
current input file.  However, by not using a variable, <code class="code">$0</code>
and <code class="code">NF</code> are still updated.  If you&rsquo;re doing this, it&rsquo;s
probably by accident, and you should reconsider what it is you&rsquo;re
trying to accomplish.

</li><li><a class="ref" href="#Getline-Summary">Summary of <code class="code">getline</code> Variants</a>,
presents a table summarizing the
<code class="code">getline</code> variants and which variables they can affect.
It is worth noting that those variants that do not use redirection
can cause <code class="code">FILENAME</code> to be updated if they cause
<code class="command">awk</code> to start reading a new input file.

</li><li><a class="index-entry-id" id="index-Moore_002c-Duncan"></a>
If the variable being assigned is an expression with side effects,
different versions of <code class="command">awk</code> behave differently upon encountering
end-of-file.  Some versions don&rsquo;t evaluate the expression; many versions
(including <code class="command">gawk</code>) do.  Here is an example, courtesy of Duncan Moore:


<div class="example">
<pre class="example-preformatted">BEGIN {
    system(&quot;echo 1 &gt; f&quot;)
    while ((getline a[++c] &lt; &quot;f&quot;) &gt; 0) { }
    print c
}
</pre></div>

<p>Here, the side effect is the &lsquo;<samp class="samp">++c</samp>&rsquo;.  Is <code class="code">c</code> incremented if
end-of-file is encountered before the element in <code class="code">a</code> is assigned?
</p>
<p><code class="command">gawk</code> treats <code class="code">getline</code> like a function call, and evaluates
the expression &lsquo;<samp class="samp">a[++c]</samp>&rsquo; before attempting to read from <samp class="file">f</samp>.
However, some versions of <code class="command">awk</code> only evaluate the expression once they
know that there is a string value to be assigned.
</p></li></ul>

<hr>
</div>
<div class="subsection-level-extent" id="Getline-Summary">
<div class="nav-panel">
<p>
Previous: <a href="#Getline-Notes" accesskey="p" rel="prev">Points to Remember About <code class="code">getline</code></a>, Up: <a href="#Getline" accesskey="u" rel="up">Explicit Input with <code class="code">getline</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Summary-of-getline-Variants"><span>4.10.10 Summary of <code class="code">getline</code> Variants<a class="copiable-link" href="#Summary-of-getline-Variants"> &para;</a></span></h4>
<a class="index-entry-id" id="index-getline-command-variants"></a>

<p><a class="ref" href="#table_002dgetline_002dvariants">Table 4.2</a>
summarizes the eight variants of <code class="code">getline</code>,
listing which predefined variables are set by each one,
and whether the variant is standard or a <code class="command">gawk</code> extension.
Note: for each variant, <code class="command">gawk</code> sets the <code class="code">RT</code> predefined variable.
</p>
<div class="float" id="table_002dgetline_002dvariants">
<table class="multitable">
<thead><tr><th width="33%">Variant</th><th width="38%">Effect</th><th width="27%"><code class="command">awk</code> / <code class="command">gawk</code></th></tr></thead>
<tbody><tr><td width="33%"><code class="code">getline</code></td><td width="38%">Sets <code class="code">$0</code>, <code class="code">NF</code>, <code class="code">FNR</code>, <code class="code">NR</code>, and <code class="code">RT</code></td><td width="27%"><code class="command">awk</code></td></tr>
<tr><td width="33%"><code class="code">getline</code> <var class="var">var</var></td><td width="38%">Sets <var class="var">var</var>, <code class="code">FNR</code>, <code class="code">NR</code>, and <code class="code">RT</code></td><td width="27%"><code class="command">awk</code></td></tr>
<tr><td width="33%"><code class="code">getline &lt;</code> <var class="var">file</var></td><td width="38%">Sets <code class="code">$0</code>, <code class="code">NF</code>, and <code class="code">RT</code></td><td width="27%"><code class="command">awk</code></td></tr>
<tr><td width="33%"><code class="code">getline <var class="var">var</var> &lt; <var class="var">file</var></code></td><td width="38%">Sets <var class="var">var</var> and <code class="code">RT</code></td><td width="27%"><code class="command">awk</code></td></tr>
<tr><td width="33%"><var class="var">command</var> <code class="code">| getline</code></td><td width="38%">Sets <code class="code">$0</code>, <code class="code">NF</code>, and <code class="code">RT</code></td><td width="27%"><code class="command">awk</code></td></tr>
<tr><td width="33%"><var class="var">command</var> <code class="code">| getline</code> <var class="var">var</var></td><td width="38%">Sets <var class="var">var</var> and <code class="code">RT</code></td><td width="27%"><code class="command">awk</code></td></tr>
<tr><td width="33%"><var class="var">command</var> <code class="code">|&amp; getline</code></td><td width="38%">Sets <code class="code">$0</code>, <code class="code">NF</code>, and <code class="code">RT</code></td><td width="27%"><code class="command">gawk</code></td></tr>
<tr><td width="33%"><var class="var">command</var> <code class="code">|&amp; getline</code> <var class="var">var</var></td><td width="38%">Sets <var class="var">var</var> and <code class="code">RT</code></td><td width="27%"><code class="command">gawk</code></td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 4.2: </strong><code class="code">getline</code> variants and what they set</p></div></div>
<hr>
</div>
</div>
<div class="section-level-extent" id="Read-Timeout">
<div class="nav-panel">
<p>
Next: <a href="#Retrying-Input" accesskey="n" rel="next">Retrying Reads After Certain Input Errors</a>, Previous: <a href="#Getline" accesskey="p" rel="prev">Explicit Input with <code class="code">getline</code></a>, Up: <a href="#Reading-Files" accesskey="u" rel="up">Reading Input Files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Reading-Input-with-a-Timeout"><span>4.11 Reading Input with a Timeout<a class="copiable-link" href="#Reading-Input-with-a-Timeout"> &para;</a></span></h3>
<a class="index-entry-id" id="index-timeout_002c-reading-input"></a>

<a class="index-entry-id" id="index-differences-in-awk-and-gawk-read-timeouts"></a>
<p>This section describes a feature that is specific to <code class="command">gawk</code>.
</p>
<p>You may specify a timeout in milliseconds for reading input from the keyboard,
a pipe, or two-way communication, including TCP/IP sockets. This can be done
on a per-input, per-command, or per-connection basis, by setting a special
element in the <code class="code">PROCINFO</code> array (see <a class="pxref" href="#Auto_002dset">Built-in Variables That Convey Information</a>):
</p>
<div class="example">
<pre class="example-preformatted">PROCINFO[&quot;input_name&quot;, &quot;READ_TIMEOUT&quot;] = <var class="var">timeout in milliseconds</var>
</pre></div>

<p>When set, this causes <code class="command">gawk</code> to time out and return failure
if no data is available to read within the specified timeout period.
For example, a TCP client can decide to give up on receiving
any response from the server after a certain amount of time:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">Service = &quot;/inet/tcp/0/localhost/daytime&quot;
PROCINFO[Service, &quot;READ_TIMEOUT&quot;] = 100
if ((Service |&amp; getline) &gt; 0)
    print $0
else if (ERRNO != &quot;&quot;)
    print ERRNO
</pre></div></div>

<p>Here is how to read interactively from the user<a class="footnote" id="DOCF28" href="#FOOT28"><sup>28</sup></a> without waiting
for more than five seconds:
</p>
<div class="example">
<pre class="example-preformatted">PROCINFO[&quot;/dev/stdin&quot;, &quot;READ_TIMEOUT&quot;] = 5000
while ((getline &lt; &quot;/dev/stdin&quot;) &gt; 0)
    print $0
</pre></div>

<p><code class="command">gawk</code> terminates the read operation if input does not
arrive after waiting for the timeout period, returns failure,
and sets <code class="code">ERRNO</code> to an appropriate string value.
A negative or zero value for the timeout is the same as specifying
no timeout at all.
</p>
<p>A timeout can also be set for reading from the keyboard in the implicit
loop that reads input records and matches them against patterns,
like so:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { PROCINFO[&quot;-&quot;, &quot;READ_TIMEOUT&quot;] = 5000 }</kbd>
&gt; <kbd class="kbd">{ print &quot;You entered: &quot; $0 }'</kbd>
<kbd class="kbd">gawk</kbd>
-| You entered: gawk
</pre></div>

<p>In this case, failure to respond within five seconds results in the following
error message:
</p>
<div class="example">
<pre class="example-preformatted">error&rarr; gawk: cmd. line:2: (FILENAME=- FNR=1) fatal: error reading input file `-': Connection timed out
</pre></div>

<p>The timeout can be set or changed at any time, and will take effect on the
next attempt to read from the input device. In the following example,
we start with a timeout value of one second, and progressively
reduce it by one-tenth of a second until we wait indefinitely
for the input to arrive:
</p>
<div class="example">
<pre class="example-preformatted">PROCINFO[Service, &quot;READ_TIMEOUT&quot;] = 1000
while ((Service |&amp; getline) &gt; 0) {
    print $0
    PROCINFO[Service, &quot;READ_TIMEOUT&quot;] -= 100
}
</pre></div>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> You should not assume that the read operation will block
exactly after the tenth record has been printed. It is possible that
<code class="command">gawk</code> will read and buffer more than one record&rsquo;s
worth of data the first time. Because of this, changing the value
of timeout like in the preceding example is not very useful.
</p></blockquote>

<a class="index-entry-id" id="index-GAWK_005fREAD_005fTIMEOUT-environment-variable-1"></a>
<a class="index-entry-id" id="index-environment-variables-GAWK_005fREAD_005fTIMEOUT-1"></a>
<p>If the <code class="code">PROCINFO</code> element is not present and the
<code class="env">GAWK_READ_TIMEOUT</code> environment variable exists,
<code class="command">gawk</code> uses its value to initialize the timeout value.
The exclusive use of the environment variable to specify timeout
has the disadvantage of not being able to control it
on a per-command or per-connection basis.
</p>
<p><code class="command">gawk</code> considers a timeout event to be an error even though
the attempt to read from the underlying device may
succeed in a later attempt. This is a limitation, and it also
means that you cannot use this to multiplex input from
two or more sources.  See <a class="xref" href="#Retrying-Input">Retrying Reads After Certain Input Errors</a> for a way to enable
later I/O attempts to succeed.
</p>
<p>Assigning a timeout value prevents read operations from being
blocked indefinitely. But bear in mind that there are other ways
<code class="command">gawk</code> can stall waiting for an input device to be ready.
A network client can sometimes take a long time to establish
a connection before it can start reading any data,
or the attempt to open a FIFO special file for reading can be blocked
indefinitely until some other process opens it for writing.
</p>
<hr>
</div>
<div class="section-level-extent" id="Retrying-Input">
<div class="nav-panel">
<p>
Next: <a href="#Command_002dline-directories" accesskey="n" rel="next">Directories on the Command Line</a>, Previous: <a href="#Read-Timeout" accesskey="p" rel="prev">Reading Input with a Timeout</a>, Up: <a href="#Reading-Files" accesskey="u" rel="up">Reading Input Files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Retrying-Reads-After-Certain-Input-Errors"><span>4.12 Retrying Reads After Certain Input Errors<a class="copiable-link" href="#Retrying-Reads-After-Certain-Input-Errors"> &para;</a></span></h3>
<a class="index-entry-id" id="index-retrying-input"></a>

<a class="index-entry-id" id="index-differences-in-awk-and-gawk-retrying-input"></a>
<p>This section describes a feature that is specific to <code class="command">gawk</code>.
</p>
<p>When <code class="command">gawk</code> encounters an error while reading input, by
default <code class="code">getline</code> returns &minus;1, and subsequent attempts to
read from that file result in an end-of-file indication.  However, you
may optionally instruct <code class="command">gawk</code> to allow I/O to be retried when
certain errors are encountered by setting a special element in
the <code class="code">PROCINFO</code> array (see <a class="pxref" href="#Auto_002dset">Built-in Variables That Convey Information</a>):
</p>
<div class="example">
<pre class="example-preformatted">PROCINFO[&quot;<var class="var">input_name</var>&quot;, &quot;RETRY&quot;] = 1
</pre></div>

<p>When this element exists, <code class="command">gawk</code> checks the value of the system
(C language)
<code class="code">errno</code> variable when an I/O error occurs.  If <code class="code">errno</code> indicates
a subsequent I/O attempt may succeed, <code class="code">getline</code> instead returns
&minus;2 and
further calls to <code class="code">getline</code> may succeed.  This applies to the <code class="code">errno</code>
values <code class="code">EAGAIN</code>, <code class="code">EWOULDBLOCK</code>, <code class="code">EINTR</code>, or <code class="code">ETIMEDOUT</code>.
</p>
<p>This feature is useful in conjunction with
<code class="code">PROCINFO[&quot;<var class="var">input_name</var>&quot;, &quot;READ_TIMEOUT&quot;]</code> or situations where a file
descriptor has been configured to behave in a non-blocking fashion.
</p>
<hr>
</div>
<div class="section-level-extent" id="Command_002dline-directories">
<div class="nav-panel">
<p>
Next: <a href="#Input-Summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Retrying-Input" accesskey="p" rel="prev">Retrying Reads After Certain Input Errors</a>, Up: <a href="#Reading-Files" accesskey="u" rel="up">Reading Input Files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Directories-on-the-Command-Line"><span>4.13 Directories on the Command Line<a class="copiable-link" href="#Directories-on-the-Command-Line"> &para;</a></span></h3>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-command_002dline-directories"></a>
<a class="index-entry-id" id="index-directories-command_002dline"></a>
<a class="index-entry-id" id="index-command-line-directories-on"></a>

<p>According to the POSIX standard, files named on the <code class="command">awk</code>
command line must be text files; it is a fatal error if they are not.
Most versions of <code class="command">awk</code> treat a directory on the command line as
a fatal error.
</p>
<p>By default, <code class="command">gawk</code> produces a warning for a directory on the
command line, but otherwise ignores it.  This makes it easier to use
shell wildcards with your <code class="command">awk</code> program:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f whizprog.awk *</kbd>        <i class="i">Directories could kill this program</i>
</pre></div>

<p>If either of the <samp class="option">--posix</samp>
or <samp class="option">--traditional</samp> options is given, then <code class="command">gawk</code> reverts
to treating a directory on the command line as a fatal error.
</p>
<p>See <a class="xref" href="#Extension-Sample-Readdir">Reading Directories</a> for a way to treat directories
as usable data from an <code class="command">awk</code> program.
</p>
<hr>
</div>
<div class="section-level-extent" id="Input-Summary">
<div class="nav-panel">
<p>
Next: <a href="#Input-Exercises" accesskey="n" rel="next">Exercises</a>, Previous: <a href="#Command_002dline-directories" accesskey="p" rel="prev">Directories on the Command Line</a>, Up: <a href="#Reading-Files" accesskey="u" rel="up">Reading Input Files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary-3"><span>4.14 Summary<a class="copiable-link" href="#Summary-3"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>Input is split into records based on the value of <code class="code">RS</code>.
The possibilities are as follows:

<table class="multitable">
<thead><tr><th width="25%">Value of <code class="code">RS</code></th><th width="35%">Records are split on &hellip;</th><th width="40%"><code class="command">awk</code> / <code class="command">gawk</code></th></tr></thead>
<tbody><tr><td width="25%">Any single character</td><td width="35%">That character</td><td width="40%"><code class="command">awk</code></td></tr>
<tr><td width="25%">The empty string (<code class="code">&quot;&quot;</code>)</td><td width="35%">Runs of two or more newlines</td><td width="40%"><code class="command">awk</code></td></tr>
<tr><td width="25%">A regexp</td><td width="35%">Text that matches the regexp</td><td width="40%"><code class="command">gawk</code></td></tr>
</tbody>
</table>

</li><li><code class="code">FNR</code> indicates how many records have been read from the current input file;
<code class="code">NR</code> indicates how many records have been read in total.

</li><li><code class="command">gawk</code> sets <code class="code">RT</code> to the text matched by <code class="code">RS</code>.

</li><li>After splitting the input into records, <code class="command">awk</code> further splits
the records into individual fields, named <code class="code">$1</code>, <code class="code">$2</code>, and so
on. <code class="code">$0</code> is the whole record, and <code class="code">NF</code> indicates how many
fields there are.  The default way to split fields is between whitespace
characters.

</li><li>Fields may be referenced using a variable, as in <code class="code">$NF</code>.  Fields
may also be assigned values, which causes the value of <code class="code">$0</code> to be
recomputed when it is later referenced. Assigning to a field with a number
greater than <code class="code">NF</code> creates the field and rebuilds the record, using
<code class="code">OFS</code> to separate the fields.  Incrementing <code class="code">NF</code> does the same
thing. Decrementing <code class="code">NF</code> throws away fields and rebuilds the record.

</li><li>Field splitting is more complicated than record splitting:

<table class="multitable">
<thead><tr><th width="40%">Field separator value</th><th width="40%">Fields are split &hellip;</th><th width="20%"><code class="command">awk</code> / <code class="command">gawk</code></th></tr></thead>
<tbody><tr><td width="40%"><code class="code">FS == &quot; &quot;</code></td><td width="40%">On runs of whitespace</td><td width="20%"><code class="command">awk</code></td></tr>
<tr><td width="40%"><code class="code">FS == <var class="var">any single character</var></code></td><td width="40%">On that character</td><td width="20%"><code class="command">awk</code></td></tr>
<tr><td width="40%"><code class="code">FS == <var class="var">regexp</var></code></td><td width="40%">On text matching the regexp</td><td width="20%"><code class="command">awk</code></td></tr>
<tr><td width="40%"><code class="code">FS == &quot;&quot;</code></td><td width="40%">Such that each individual character is a separate field</td><td width="20%"><code class="command">gawk</code></td></tr>
<tr><td width="40%"><code class="code">FIELDWIDTHS == <var class="var">list of columns</var></code></td><td width="40%">Based on character position</td><td width="20%"><code class="command">gawk</code></td></tr>
<tr><td width="40%"><code class="code">FPAT == <var class="var">regexp</var></code></td><td width="40%">On the text surrounding text matching the regexp</td><td width="20%"><code class="command">gawk</code></td></tr>
</tbody>
</table>

</li><li>Using &lsquo;<samp class="samp">FS = &quot;\n&quot;</samp>&rsquo; causes the entire record to be a single field
(assuming that newlines separate records).

</li><li><code class="code">FS</code> may be set from the command line using the <samp class="option">-F</samp> option.
This can also be done using command-line variable assignment.

</li><li>Use <code class="code">PROCINFO[&quot;FS&quot;]</code> to see how fields are being split.

</li><li>Use <code class="code">getline</code> in its various forms to read additional records
from the default input stream, from a file, or from a pipe or coprocess.

</li><li>Use <code class="code">PROCINFO[<var class="var">file</var>, &quot;READ_TIMEOUT&quot;]</code> to cause reads to time out
for <var class="var">file</var>.

</li><li><a class="index-entry-id" id="index-POSIX-mode-3"></a>
Directories on the command line are fatal for standard <code class="command">awk</code>;
<code class="command">gawk</code> ignores them if not in POSIX mode.

</li></ul>

<hr>
</div>
<div class="section-level-extent" id="Input-Exercises">
<div class="nav-panel">
<p>
Previous: <a href="#Input-Summary" accesskey="p" rel="prev">Summary</a>, Up: <a href="#Reading-Files" accesskey="u" rel="up">Reading Input Files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Exercises"><span>4.15 Exercises<a class="copiable-link" href="#Exercises"> &para;</a></span></h3>

<ol class="enumerate">
<li> Using the <code class="code">FIELDWIDTHS</code> variable (see <a class="pxref" href="#Constant-Size">Reading Fixed-Width Data</a>),
write a program to read election data, where each record represents
one voter&rsquo;s votes.  Come up with a way to define which columns are
associated with each ballot item, and print the total votes,
including abstentions, for each item.

</li></ol>

<hr>
</div>
</div>
<div class="chapter-level-extent" id="Printing">
<div class="nav-panel">
<p>
Next: <a href="#Expressions" accesskey="n" rel="next">Expressions</a>, Previous: <a href="#Reading-Files" accesskey="p" rel="prev">Reading Input Files</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Printing-Output"><span>5 Printing Output<a class="copiable-link" href="#Printing-Output"> &para;</a></span></h2>

<a class="index-entry-id" id="index-printing"></a>
<p>One of the most common programming actions is to <em class="dfn">print</em>, or output,
some or all of the input.  Use the <code class="code">print</code> statement
for simple output, and the <code class="code">printf</code> statement
for fancier formatting.
The <code class="code">print</code> statement is not limited when
computing <em class="emph">which</em> values to print. However, with two exceptions,
you cannot specify <em class="emph">how</em> to print them&mdash;how many
columns, whether to use exponential notation or not, and so on.
(For the exceptions, see <a class="pxref" href="#Output-Separators">Output Separators</a> and
<a class="ref" href="#OFMT">Controlling Numeric Output with <code class="code">print</code></a>.)
For printing with specifications, you need the <code class="code">printf</code> statement
(see <a class="pxref" href="#Printf">Using <code class="code">printf</code> Statements for Fancier Printing</a>).
</p>
<a class="index-entry-id" id="index-print-statement"></a>
<a class="index-entry-id" id="index-printf-statement"></a>
<p>Besides basic and formatted printing, this chapter
also covers I/O redirections to files and pipes, introduces
the special file names that <code class="command">gawk</code> processes internally,
and discusses the <code class="code">close()</code> built-in function.
</p>

<ul class="mini-toc">
<li><a href="#Print" accesskey="1">The <code class="code">print</code> Statement</a></li>
<li><a href="#Print-Examples" accesskey="2"><code class="code">print</code> Statement Examples</a></li>
<li><a href="#Output-Separators" accesskey="3">Output Separators</a></li>
<li><a href="#OFMT" accesskey="4">Controlling Numeric Output with <code class="code">print</code></a></li>
<li><a href="#Printf" accesskey="5">Using <code class="code">printf</code> Statements for Fancier Printing</a></li>
<li><a href="#Redirection" accesskey="6">Redirecting Output of <code class="code">print</code> and <code class="code">printf</code></a></li>
<li><a href="#Special-FD" accesskey="7">Special Files for Standard Preopened Data Streams</a></li>
<li><a href="#Special-Files" accesskey="8">Special File names in <code class="command">gawk</code></a></li>
<li><a href="#Close-Files-And-Pipes" accesskey="9">Closing Input and Output Redirections</a></li>
<li><a href="#Noflush">Speeding Up Pipe Output</a></li>
<li><a href="#Nonfatal">Enabling Nonfatal Output</a></li>
<li><a href="#Output-Summary">Summary</a></li>
<li><a href="#Output-Exercises">Exercises</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Print">
<div class="nav-panel">
<p>
Next: <a href="#Print-Examples" accesskey="n" rel="next"><code class="code">print</code> Statement Examples</a>, Up: <a href="#Printing" accesskey="u" rel="up">Printing Output</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="The-print-Statement"><span>5.1 The <code class="code">print</code> Statement<a class="copiable-link" href="#The-print-Statement"> &para;</a></span></h3>

<p>Use the <code class="code">print</code> statement to produce output with simple, standardized
formatting.  You specify only the strings or numbers to print, in a
list separated by commas.  They are output, separated by single spaces,
followed by a newline.  The statement looks like this:
</p>
<div class="example">
<pre class="example-preformatted">print <var class="var">item1</var>, <var class="var">item2</var>, ...
</pre></div>

<p>The entire list of items may be optionally enclosed in parentheses.  The
parentheses are necessary if any of the item expressions uses the &lsquo;<samp class="samp">&gt;</samp>&rsquo;
relational operator; otherwise it could be confused with an output redirection
(see <a class="pxref" href="#Redirection">Redirecting Output of <code class="code">print</code> and <code class="code">printf</code></a>).
</p>
<p>The items to print can be constant strings or numbers, fields of the
current record (such as <code class="code">$1</code>), variables, or any <code class="command">awk</code>
expression.  Numeric values are converted to strings and then printed.
</p>
<a class="index-entry-id" id="index-records-printing"></a>
<a class="index-entry-id" id="index-lines-blank_002c-printing"></a>
<a class="index-entry-id" id="index-text_002c-printing"></a>
<p>The simple statement &lsquo;<samp class="samp">print</samp>&rsquo; with no items is equivalent to
&lsquo;<samp class="samp">print $0</samp>&rsquo;: it prints the entire current record.  To print a blank
line, use &lsquo;<samp class="samp">print &quot;&quot;</samp>&rsquo;.
To print a fixed piece of text, use a string constant, such as
<code class="code">&quot;Don't&nbsp;Panic&quot;</code><!-- /@w -->, as one item.  If you forget to use the
double-quote characters, your text is taken as an <code class="command">awk</code>
expression, and you will probably get an error.  Keep in mind that a
space is printed between any two items.
</p>
<p>Note that the <code class="code">print</code> statement is a statement and not an
expression&mdash;you can&rsquo;t use it in the pattern part of a
pattern&ndash;action statement, for example.
</p>
<hr>
</div>
<div class="section-level-extent" id="Print-Examples">
<div class="nav-panel">
<p>
Next: <a href="#Output-Separators" accesskey="n" rel="next">Output Separators</a>, Previous: <a href="#Print" accesskey="p" rel="prev">The <code class="code">print</code> Statement</a>, Up: <a href="#Printing" accesskey="u" rel="up">Printing Output</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="print-Statement-Examples"><span>5.2 <code class="code">print</code> Statement Examples<a class="copiable-link" href="#print-Statement-Examples"> &para;</a></span></h3>

<p>Each <code class="code">print</code> statement makes at least one line of output.  However, it
isn&rsquo;t limited to only one line.  If an item value is a string containing a
newline, the newline is output along with the rest of the string.  A
single <code class="code">print</code> statement can make any number of lines this way.
</p>
<a class="index-entry-id" id="index-newlines-printing"></a>
<p>The following is an example of printing a string that contains embedded
newlines
(the &lsquo;<samp class="samp">\n</samp>&rsquo; is an escape sequence, used to represent the newline
character; see <a class="pxref" href="#Escape-Sequences">Escape Sequences</a>):
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN { print &quot;line one\nline two\nline three&quot; }'</kbd>
-| line one
-| line two
-| line three
</pre></div></div>

<a class="index-entry-id" id="index-fields-printing"></a>
<p>The next example, which is run on the <samp class="file">inventory-shipped</samp> file,
prints the first two fields of each input record, with a space between
them:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '{ print $1, $2 }' inventory-shipped</kbd>
-| Jan 13
-| Feb 15
-| Mar 15
...
</pre></div>

<a class="index-entry-id" id="index-print-statement-commas_002c-omitting"></a>
<a class="index-entry-id" id="index-troubleshooting-print-statement_002c-omitting-commas"></a>
<p>A common mistake in using the <code class="code">print</code> statement is to omit the comma
between two items.  This often has the effect of making the items run
together in the output, with no space.  The reason for this is that
juxtaposing two string expressions in <code class="command">awk</code> means to concatenate
them.  Here is the same program, without the comma:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '{ print $1 $2 }' inventory-shipped</kbd>
-| Jan13
-| Feb15
-| Mar15
...
</pre></div>

<a class="index-entry-id" id="index-BEGIN-pattern-headings_002c-adding"></a>
<p>To someone unfamiliar with the <samp class="file">inventory-shipped</samp> file, neither
example&rsquo;s output makes much sense.  A heading line at the beginning
would make it clearer.  Let&rsquo;s add some headings to our table of months
(<code class="code">$1</code>) and green crates shipped (<code class="code">$2</code>).  We do this using
a <code class="code">BEGIN</code> rule (see <a class="pxref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>) so that the headings are only
printed once:
</p>
<div class="example">
<pre class="example-preformatted">awk 'BEGIN {  print &quot;Month Crates&quot;
              print &quot;----- ------&quot; }
           {  print $1, $2 }' inventory-shipped
</pre></div>

<p>When run, the program prints the following:
</p>
<div class="example">
<pre class="example-preformatted">Month Crates
----- ------
Jan 13
Feb 15
Mar 15
...
</pre></div>

<p>The only problem, however, is that the headings and the table data
don&rsquo;t line up!  We can fix this by printing some spaces between the
two fields:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">awk 'BEGIN { print &quot;Month Crates&quot;
             print &quot;----- ------&quot; }
           { print $1, &quot;     &quot;, $2 }' inventory-shipped
</pre></div></div>

<a class="index-entry-id" id="index-printf-statement-columns_002c-aligning"></a>
<a class="index-entry-id" id="index-columns-aligning"></a>
<p>Lining up columns this way can get pretty
complicated when there are many columns to fix.  Counting spaces for two
or three columns is simple, but any more than this can take up
a lot of time. This is why the <code class="code">printf</code> statement was
created (see <a class="pxref" href="#Printf">Using <code class="code">printf</code> Statements for Fancier Printing</a>);
one of its specialties is lining up columns of data.
</p>
<a class="index-entry-id" id="index-line-continuations-in-print-statement"></a>
<a class="index-entry-id" id="index-print-statement-line-continuations-and"></a>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> You can continue either a <code class="code">print</code> or
<code class="code">printf</code> statement simply by putting a newline after any comma
(see <a class="pxref" href="#Statements_002fLines"><code class="command">awk</code> Statements Versus Lines</a>).
</p></blockquote>

<hr>
</div>
<div class="section-level-extent" id="Output-Separators">
<div class="nav-panel">
<p>
Next: <a href="#OFMT" accesskey="n" rel="next">Controlling Numeric Output with <code class="code">print</code></a>, Previous: <a href="#Print-Examples" accesskey="p" rel="prev"><code class="code">print</code> Statement Examples</a>, Up: <a href="#Printing" accesskey="u" rel="up">Printing Output</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Output-Separators-1"><span>5.3 Output Separators<a class="copiable-link" href="#Output-Separators-1"> &para;</a></span></h3>

<a class="index-entry-id" id="index-OFS-variable-1"></a>
<p>As mentioned previously, a <code class="code">print</code> statement contains a list
of items separated by commas.  In the output, the items are normally
separated by single spaces.  However, this doesn&rsquo;t need to be the case;
a single space is simply the default.  Any string of
characters may be used as the <em class="dfn">output field separator</em> by setting the
predefined variable <code class="code">OFS</code>.  The initial value of this variable
is the string <code class="code">&quot;&nbsp;&quot;</code><!-- /@w --> (i.e., a single space).
</p>
<p>The output from an entire <code class="code">print</code> statement is called an <em class="dfn">output
record</em>.  Each <code class="code">print</code> statement outputs one output record, and
then outputs a string called the <em class="dfn">output record separator</em> (or
<code class="code">ORS</code>).  The initial value of <code class="code">ORS</code> is the string <code class="code">&quot;\n&quot;</code>
(i.e., a newline character).  Thus, each <code class="code">print</code> statement normally
makes a separate line.
</p>
<a class="index-entry-id" id="index-output-records"></a>
<a class="index-entry-id" id="index-ORS-variable"></a>
<a class="index-entry-id" id="index-BEGIN-pattern-OFS_002fORS-variables_002c-assigning-values-to"></a>
<p>In order to change how output fields and records are separated, assign
new values to the variables <code class="code">OFS</code> and <code class="code">ORS</code>.  The usual
place to do this is in the <code class="code">BEGIN</code> rule
(see <a class="pxref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>), so
that it happens before any input is processed.  It can also be done
with assignments on the command line, before the names of the input
files, or using the <samp class="option">-v</samp> command-line option
(see <a class="pxref" href="#Options">Command-Line Options</a>).
The following example prints the first and second fields of each input
record, separated by a semicolon, with a blank line added after each
newline:
</p>

<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN { OFS = &quot;;&quot;; ORS = &quot;\n\n&quot; }</kbd>
&gt;            <kbd class="kbd">{ print $1, $2 }' mail-list</kbd>
-| Amelia;555-5553
-|
-| Anthony;555-3412
-|
-| Becky;555-7685
-|
-| Bill;555-1675
-|
-| Broderick;555-0542
-|
-| Camilla;555-2912
-|
-| Fabius;555-1234
-|
-| Julie;555-6699
-|
-| Martin;555-6480
-|
-| Samuel;555-3430
-|
-| Jean-Paul;555-2127
-|
</pre></div>

<p>If the value of <code class="code">ORS</code> does not contain a newline, the program&rsquo;s output
runs together on a single line.
</p>
<hr>
</div>
<div class="section-level-extent" id="OFMT">
<div class="nav-panel">
<p>
Next: <a href="#Printf" accesskey="n" rel="next">Using <code class="code">printf</code> Statements for Fancier Printing</a>, Previous: <a href="#Output-Separators" accesskey="p" rel="prev">Output Separators</a>, Up: <a href="#Printing" accesskey="u" rel="up">Printing Output</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Controlling-Numeric-Output-with-print"><span>5.4 Controlling Numeric Output with <code class="code">print</code><a class="copiable-link" href="#Controlling-Numeric-Output-with-print"> &para;</a></span></h3>
<a class="index-entry-id" id="index-numeric-output-format"></a>
<a class="index-entry-id" id="index-formats_002c-numeric-output"></a>
<p>When printing numeric values with the <code class="code">print</code> statement,
<code class="command">awk</code> internally converts each number to a string of characters
and prints that string.  <code class="command">awk</code> uses the <code class="code">sprintf()</code> function
to do this conversion
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
For now, it suffices to say that the <code class="code">sprintf()</code>
function accepts a <em class="dfn">format specification</em> that tells it how to format
numbers (or strings), and that there are a number of different ways in which
numbers can be formatted.  The different format specifications are discussed
more fully in
<a class="ref" href="#Control-Letters">Format-Control Letters</a>.
</p>
<a class="index-entry-id" id="index-sprintf_0028_0029-function"></a>
<a class="index-entry-id" id="index-OFMT-variable"></a>
<a class="index-entry-id" id="index-output-format-specifier_002c-OFMT"></a>
<p>The predefined variable <code class="code">OFMT</code> contains the format specification
that <code class="code">print</code> uses with <code class="code">sprintf()</code> when it wants to convert a
number to a string for printing.
The default value of <code class="code">OFMT</code> is <code class="code">&quot;%.6g&quot;</code>.
The way <code class="code">print</code> prints numbers can be changed
by supplying a different format specification
for the value of <code class="code">OFMT</code>, as shown in the following example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN {</kbd>
&gt;   <kbd class="kbd">OFMT = &quot;%.0f&quot;  # print numbers as integers (rounds)</kbd>
&gt;   <kbd class="kbd">print 17.23, 17.54 }'</kbd>
-| 17 18
</pre></div>

<p>More detail on how <code class="command">awk</code> converts numeric values into
strings is provided in <a class="ref" href="#Strings-And-Numbers">How <code class="command">awk</code> Converts Between Strings and Numbers</a>. In particular, for
<code class="code">print</code>, <code class="command">awk</code> uses the value of <code class="code">OFMT</code> instead of
that of <code class="code">CONVFMT</code>, but otherwise behaves exactly the same
as described in that section.
</p>
<a class="index-entry-id" id="index-dark-corner-OFMT-variable"></a>
<a class="index-entry-id" id="index-POSIX-awk-OFMT-variable-and"></a>
<a class="index-entry-id" id="index-OFMT-variable-POSIX-awk-and"></a>
<p>According to the POSIX standard, <code class="command">awk</code>&rsquo;s behavior is undefined
if <code class="code">OFMT</code> contains anything but a floating-point conversion specification.
(d.c.)
</p>
<hr>
</div>
<div class="section-level-extent" id="Printf">
<div class="nav-panel">
<p>
Next: <a href="#Redirection" accesskey="n" rel="next">Redirecting Output of <code class="code">print</code> and <code class="code">printf</code></a>, Previous: <a href="#OFMT" accesskey="p" rel="prev">Controlling Numeric Output with <code class="code">print</code></a>, Up: <a href="#Printing" accesskey="u" rel="up">Printing Output</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Using-printf-Statements-for-Fancier-Printing"><span>5.5 Using <code class="code">printf</code> Statements for Fancier Printing<a class="copiable-link" href="#Using-printf-Statements-for-Fancier-Printing"> &para;</a></span></h3>

<a class="index-entry-id" id="index-printf-statement-1"></a>
<a class="index-entry-id" id="index-output-formatted"></a>
<a class="index-entry-id" id="index-formatting-output"></a>
<p>For more precise control over the output format than what is
provided by <code class="code">print</code>, use <code class="code">printf</code>.
With <code class="code">printf</code> you can
specify the width to use for each item, as well as various
formatting choices for numbers (such as what output base to use, whether to
print an exponent, whether to print a sign, and how many digits to print
after the decimal point).
</p>

<ul class="mini-toc">
<li><a href="#Basic-Printf" accesskey="1">Introduction to the <code class="code">printf</code> Statement</a></li>
<li><a href="#Control-Letters" accesskey="2">Format-Control Letters</a></li>
<li><a href="#Format-Modifiers" accesskey="3">Modifiers for <code class="code">printf</code> Formats</a></li>
<li><a href="#Printf-Examples" accesskey="4">Examples Using <code class="code">printf</code></a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Basic-Printf">
<div class="nav-panel">
<p>
Next: <a href="#Control-Letters" accesskey="n" rel="next">Format-Control Letters</a>, Up: <a href="#Printf" accesskey="u" rel="up">Using <code class="code">printf</code> Statements for Fancier Printing</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Introduction-to-the-printf-Statement"><span>5.5.1 Introduction to the <code class="code">printf</code> Statement<a class="copiable-link" href="#Introduction-to-the-printf-Statement"> &para;</a></span></h4>

<a class="index-entry-id" id="index-printf-statement-syntax-of"></a>
<p>A simple <code class="code">printf</code> statement looks like this:
</p>
<div class="example">
<pre class="example-preformatted">printf <var class="var">format</var>, <var class="var">item1</var>, <var class="var">item2</var>, ...
</pre></div>

<p>As for <code class="code">print</code>, the entire list of arguments may optionally be
enclosed in parentheses. Here too, the parentheses are necessary if any
of the item expressions uses the &lsquo;<samp class="samp">&gt;</samp>&rsquo; relational operator; otherwise,
it can be confused with an output redirection (see <a class="pxref" href="#Redirection">Redirecting Output of <code class="code">print</code> and <code class="code">printf</code></a>).
</p>
<a class="index-entry-id" id="index-format-specifiers"></a>
<p>The difference between <code class="code">printf</code> and <code class="code">print</code> is the <var class="var">format</var>
argument.  This is an expression whose value is taken as a string; it
specifies how to output each of the other arguments.  It is called the
<em class="dfn">format string</em>.
</p>
<p>The format string is very similar to that in the ISO C library function
<code class="code">printf()</code>.  Most of <var class="var">format</var> is text to output verbatim.
Scattered among this text are <em class="dfn">format specifiers</em>&mdash;one per item.
Each format specifier says to output the next item in the argument list
at that place in the format.
</p>
<p>The <code class="code">printf</code> statement does not automatically append a newline
to its output.  It outputs only what the format string specifies.
So if a newline is needed, you must include one in the format string.
The output separator variables <code class="code">OFS</code> and <code class="code">ORS</code> have no effect
on <code class="code">printf</code> statements. For example:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN {</kbd>
&gt;    <kbd class="kbd">ORS = &quot;\nOUCH!\n&quot;; OFS = &quot;+&quot;</kbd>
&gt;    <kbd class="kbd">msg = &quot;Don\47t Panic!&quot;</kbd>
&gt;    <kbd class="kbd">printf &quot;%s\n&quot;, msg</kbd>
&gt; <kbd class="kbd">}'</kbd>
-| Don't Panic!
</pre></div></div>

<p>Here, neither the &lsquo;<samp class="samp">+</samp>&rsquo; nor the &lsquo;<samp class="samp">OUCH!</samp>&rsquo; appears in
the output message.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Control-Letters">
<div class="nav-panel">
<p>
Next: <a href="#Format-Modifiers" accesskey="n" rel="next">Modifiers for <code class="code">printf</code> Formats</a>, Previous: <a href="#Basic-Printf" accesskey="p" rel="prev">Introduction to the <code class="code">printf</code> Statement</a>, Up: <a href="#Printf" accesskey="u" rel="up">Using <code class="code">printf</code> Statements for Fancier Printing</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Format_002dControl-Letters"><span>5.5.2 Format-Control Letters<a class="copiable-link" href="#Format_002dControl-Letters"> &para;</a></span></h4>
<a class="index-entry-id" id="index-printf-statement-format_002dcontrol-characters"></a>
<a class="index-entry-id" id="index-format-specifiers-printf-statement"></a>

<p>A format specifier starts with the character &lsquo;<samp class="samp">%</samp>&rsquo; and ends with
a <em class="dfn">format-control letter</em>&mdash;it tells the <code class="code">printf</code> statement
how to output one item.  The format-control letter specifies what <em class="emph">kind</em>
of value to print.  The rest of the format specifier is made up of
optional <em class="dfn">modifiers</em> that control <em class="emph">how</em> to print the value, such as
the field width.  Here is a list of the format-control letters:
</p>
<dl class="table">
<dt><code class="code">%a</code>, <code class="code">%A</code></dt>
<dd><p>A floating point number of the form
[<code class="code">-</code>]<code class="code">0x<var class="var">h</var>.<var class="var">hhhh</var>p+-<var class="var">dd</var></code>
(C99 hexadecimal floating point format).
For <code class="code">%A</code>,
uppercase letters are used instead of lowercase ones.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> The current POSIX standard requires support for <code class="code">%a</code> and <code class="code">%A</code> in
<code class="command">awk</code>. As far as we know, besides <code class="command">gawk</code>, the only other
version of <code class="command">awk</code> that actually implements it is BWK <code class="command">awk</code>.
It&rsquo;s use is thus highly nonportable!
</p>
<p>Furthermore, these formats are not available on any system where the
underlying C library <code class="code">printf()</code> function does not support them. As
of this writing, among current systems, only OpenVMS is known to not
support them.
</p></blockquote>

</dd>
<dt><code class="code">%c</code></dt>
<dd><p>Print a number as a character; thus, &lsquo;<samp class="samp">printf &quot;%c&quot;,
65</samp>&rsquo; outputs the letter &lsquo;<samp class="samp">A</samp>&rsquo;. The output for a string value is
the first character of the string.
</p>
<a class="index-entry-id" id="index-dark-corner-format_002dcontrol-characters"></a>
<a class="index-entry-id" id="index-gawk-format_002dcontrol-characters"></a>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> The POSIX standard says the first character of a string is printed.
In locales with multibyte characters, <code class="command">gawk</code> attempts to
convert the leading bytes of the string into a valid wide character
and then to print the multibyte encoding of that character.
Similarly, when printing a numeric value, <code class="command">gawk</code> allows the
value to be within the numeric range of values that can be held
in a wide character.
If the conversion to multibyte encoding fails, <code class="command">gawk</code>
uses the low eight bits of the value as the character to print.
</p>
<p>Other <code class="command">awk</code> versions generally restrict themselves to printing
the first byte of a string or to numeric values within the range of
a single byte (0&ndash;255).
(d.c.)
</p></blockquote>


</dd>
<dt><code class="code">%d</code>, <code class="code">%i</code></dt>
<dd><p>Print a decimal integer.
The two control letters are equivalent.
(The &lsquo;<samp class="samp">%i</samp>&rsquo; specification is for compatibility with ISO C.)
</p>
</dd>
<dt><code class="code">%e</code>, <code class="code">%E</code></dt>
<dd><p>Print a number in scientific (exponential) notation.
For example:
</p>
<div class="example">
<pre class="example-preformatted">printf &quot;%4.3e\n&quot;, 1950
</pre></div>

<p>prints &lsquo;<samp class="samp">1.950e+03</samp>&rsquo;, with a total of four significant figures, three of
which follow the decimal point.
(The &lsquo;<samp class="samp">4.3</samp>&rsquo; represents two modifiers,
discussed in the next subsection.)
&lsquo;<samp class="samp">%E</samp>&rsquo; uses &lsquo;<samp class="samp">E</samp>&rsquo; instead of &lsquo;<samp class="samp">e</samp>&rsquo; in the output.
</p>
</dd>
<dt><code class="code">%f</code></dt>
<dd><p>Print a number in floating-point notation.
For example:
</p>
<div class="example">
<pre class="example-preformatted">printf &quot;%4.3f&quot;, 1950
</pre></div>

<p>prints &lsquo;<samp class="samp">1950.000</samp>&rsquo;, with a minimum of four significant figures, three of
which follow the decimal point.
(The &lsquo;<samp class="samp">4.3</samp>&rsquo; represents two modifiers,
discussed in the next subsection.)
</p>
<p>On systems supporting IEEE 754 floating-point format, values
representing negative
infinity are formatted as
&lsquo;<samp class="samp">-inf</samp>&rsquo; or &lsquo;<samp class="samp">-infinity</samp>&rsquo;,
and positive infinity as
&lsquo;<samp class="samp">inf</samp>&rsquo; or &lsquo;<samp class="samp">infinity</samp>&rsquo;.
The special &ldquo;not a number&rdquo; value formats as &lsquo;<samp class="samp">-nan</samp>&rsquo; or &lsquo;<samp class="samp">nan</samp>&rsquo;
(see <a class="pxref" href="#Strange-values">Floating Point Values They Didn&rsquo;t Talk About In School</a>).
</p>
</dd>
<dt><code class="code">%F</code></dt>
<dd><p>Like &lsquo;<samp class="samp">%f</samp>&rsquo;, but the infinity and &ldquo;not a number&rdquo; values are spelled
using uppercase letters.
</p>
<p>The &lsquo;<samp class="samp">%F</samp>&rsquo; format is a POSIX extension to ISO C; not all systems
support it.  On those that don&rsquo;t, <code class="command">gawk</code> uses &lsquo;<samp class="samp">%f</samp>&rsquo; instead.
</p>
</dd>
<dt><code class="code">%g</code>, <code class="code">%G</code></dt>
<dd><p>Print a number in either scientific notation or in floating-point
notation, whichever uses fewer characters; if the result is printed in
scientific notation, &lsquo;<samp class="samp">%G</samp>&rsquo; uses &lsquo;<samp class="samp">E</samp>&rsquo; instead of &lsquo;<samp class="samp">e</samp>&rsquo;.
</p>
</dd>
<dt><code class="code">%o</code></dt>
<dd><p>Print an unsigned octal integer
(see <a class="pxref" href="#Nondecimal_002dnumbers">Octal and Hexadecimal Numbers</a>).
</p>
</dd>
<dt><code class="code">%s</code></dt>
<dd><p>Print a string.
</p>
</dd>
<dt><code class="code">%u</code></dt>
<dd><p>Print an unsigned decimal integer.
(This format is of marginal use, because all numbers in <code class="command">awk</code>
are floating point; it is provided primarily for compatibility with C.)
</p>
</dd>
<dt><code class="code">%x</code>, <code class="code">%X</code></dt>
<dd><p>Print an unsigned hexadecimal integer;
&lsquo;<samp class="samp">%X</samp>&rsquo; uses the letters &lsquo;<samp class="samp">A</samp>&rsquo; through &lsquo;<samp class="samp">F</samp>&rsquo;
instead of &lsquo;<samp class="samp">a</samp>&rsquo; through &lsquo;<samp class="samp">f</samp>&rsquo;
(see <a class="pxref" href="#Nondecimal_002dnumbers">Octal and Hexadecimal Numbers</a>).
</p>
</dd>
<dt><code class="code">%%</code></dt>
<dd><p>Print a single &lsquo;<samp class="samp">%</samp>&rsquo;.
This does not consume an
argument and it ignores any modifiers.
</p></dd>
</dl>

<a class="index-entry-id" id="index-dark-corner-format_002dcontrol-characters-1"></a>
<a class="index-entry-id" id="index-gawk-format_002dcontrol-characters-1"></a>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> When using the integer format-control letters for values that are
outside the range of the widest C integer type, <code class="command">gawk</code> switches to
the &lsquo;<samp class="samp">%g</samp>&rsquo; format specifier. If <samp class="option">--lint</samp> is provided on the
command line (see <a class="pxref" href="#Options">Command-Line Options</a>), <code class="command">gawk</code>
warns about this.  Other versions of <code class="command">awk</code> may print invalid
values or do something else entirely.
(d.c.)
</p></blockquote>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> The IEEE 754 standard for floating-point arithmetic allows for special
values that represent &ldquo;infinity&rdquo; (positive and negative) and values
that are &ldquo;not a number&rdquo; (NaN).
</p>
<p>Input and output of these values occurs as text strings. This is
somewhat problematic for the <code class="command">awk</code> language, which predates
the IEEE standard.  Further details are provided in
<a class="ref" href="#POSIX-Floating-Point-Problems">Standards Versus Existing Practice</a>; please see there.
</p></blockquote>

<hr>
</div>
<div class="subsection-level-extent" id="Format-Modifiers">
<div class="nav-panel">
<p>
Next: <a href="#Printf-Examples" accesskey="n" rel="next">Examples Using <code class="code">printf</code></a>, Previous: <a href="#Control-Letters" accesskey="p" rel="prev">Format-Control Letters</a>, Up: <a href="#Printf" accesskey="u" rel="up">Using <code class="code">printf</code> Statements for Fancier Printing</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Modifiers-for-printf-Formats"><span>5.5.3 Modifiers for <code class="code">printf</code> Formats<a class="copiable-link" href="#Modifiers-for-printf-Formats"> &para;</a></span></h4>

<a class="index-entry-id" id="index-printf-statement-modifiers"></a>
<a class="index-entry-id" id="index-modifiers_002c-in-format-specifiers"></a>
<p>A format specification can also include <em class="dfn">modifiers</em> that can control
how much of the item&rsquo;s value is printed, as well as how much space it gets.
The modifiers come between the &lsquo;<samp class="samp">%</samp>&rsquo; and the format-control letter.
We use the bullet symbol &ldquo;&bull;&rdquo; in the following examples to
represent
spaces in the output. Here are the possible modifiers, in the order in
which they may appear:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-differences-in-awk-and-gawk-print_002fprintf-statements"></a>
<a class="index-entry-id" id="index-printf-statement-positional-specifiers"></a>
</dd>
<dt><a id="index-positional-specifiers_002c-printf-statement"></a><span><code class="code"><var class="var">N</var>$</code><a class="copiable-link" href="#index-positional-specifiers_002c-printf-statement"> &para;</a></span></dt>
<dd><p>An integer constant followed by a &lsquo;<samp class="samp">$</samp>&rsquo; is a <em class="dfn">positional specifier</em>.
Normally, format specifications are applied to arguments in the order
given in the format string.  With a positional specifier, the format
specification is applied to a specific argument, instead of what
would be the next argument in the list.  Positional specifiers begin
counting with one. Thus:
</p>
<div class="example">
<pre class="example-preformatted">printf &quot;%s %s\n&quot;, &quot;don't&quot;, &quot;panic&quot;
printf &quot;%2$s %1$s\n&quot;, &quot;panic&quot;, &quot;don't&quot;
</pre></div>

<p>prints the famous friendly message twice.
</p>
<p>At first glance, this feature doesn&rsquo;t seem to be of much use.
It is in fact a <code class="command">gawk</code> extension, intended for use in translating
messages at runtime.
See <a class="xref" href="#Printf-Ordering">Rearranging <code class="code">printf</code> Arguments</a>,
which describes how and why to use positional specifiers.
For now, we ignore them.
</p>
</dd>
<dt><code class="code">-</code> (Minus)</dt>
<dd><p>The minus sign, used before the width modifier (see later on in
this list),
says to left-justify
the argument within its specified width.  Normally, the argument
is printed right-justified in the specified width.  Thus:
</p>
<div class="example">
<pre class="example-preformatted">printf &quot;%-4s&quot;, &quot;foo&quot;
</pre></div>

<p>prints &lsquo;<samp class="samp">foo&bull;</samp>&rsquo;.
</p>
</dd>
<dt><var class="var">space</var></dt>
<dd><p>For numeric conversions, prefix positive values with a space and
negative values with a minus sign.
</p>
</dd>
<dt><code class="code">+</code></dt>
<dd><p>The plus sign, used before the width modifier (see later on in
this list),
says to always supply a sign for numeric conversions, even if the data
to format is positive. The &lsquo;<samp class="samp">+</samp>&rsquo; overrides the space modifier.
</p>
</dd>
<dt><code class="code">#</code></dt>
<dd><p>Use an &ldquo;alternative form&rdquo; for certain control letters.
For &lsquo;<samp class="samp">%o</samp>&rsquo;, supply a leading zero.
For &lsquo;<samp class="samp">%x</samp>&rsquo; and &lsquo;<samp class="samp">%X</samp>&rsquo;, supply a leading &lsquo;<samp class="samp">0x</samp>&rsquo; or &lsquo;<samp class="samp">0X</samp>&rsquo; for
a nonzero result.
For &lsquo;<samp class="samp">%e</samp>&rsquo;, &lsquo;<samp class="samp">%E</samp>&rsquo;, &lsquo;<samp class="samp">%f</samp>&rsquo;, and &lsquo;<samp class="samp">%F</samp>&rsquo;, the result always
contains a decimal point.
For &lsquo;<samp class="samp">%g</samp>&rsquo; and &lsquo;<samp class="samp">%G</samp>&rsquo;, trailing zeros are not removed from the result.
</p>
</dd>
<dt><code class="code">0</code></dt>
<dd><p>A leading &lsquo;<samp class="samp">0</samp>&rsquo; (zero) acts as a flag indicating that output should be
padded with zeros instead of spaces.
This applies only to the numeric output formats.
This flag only has an effect when the field width is wider than the
value to print.
</p>
</dd>
<dt><code class="code">'</code></dt>
<dd><p>A single quote or apostrophe character is a POSIX extension to ISO C.
It indicates that the integer part of a floating-point value, or the
entire part of an integer decimal value, should have a thousands-separator
character in it.  This only works in locales that support such characters.
For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">cat thousands.awk</kbd>          <i class="i">Show source program</i>
-| BEGIN { printf &quot;%'d\n&quot;, 1234567 }
$ <kbd class="kbd">LC_ALL=C gawk -f thousands.awk</kbd>
-| 1234567                   <i class="i">Results in</i> &quot;C&quot; <i class="i">locale</i>
$ <kbd class="kbd">LC_ALL=en_US.UTF-8 gawk -f thousands.awk</kbd>
-| 1,234,567                 <i class="i">Results in US English UTF locale</i>
</pre></div>

<p>For more information about locales and internationalization issues,
see <a class="ref" href="#Locales">Where You Are Makes a Difference</a>.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> The &lsquo;<samp class="samp">'</samp>&rsquo; flag is a nice feature, but its use complicates things: it
becomes difficult to use it in command-line programs.  For information
on appropriate quoting tricks, see <a class="ref" href="#Quoting">Shell Quoting Issues</a>.
</p></blockquote>

</dd>
<dt><var class="var">width</var></dt>
<dd><p>This is a number specifying the desired minimum width of a field.  Inserting any
number between the &lsquo;<samp class="samp">%</samp>&rsquo; sign and the format-control character forces the
field to expand to this width.  The default way to do this is to
pad with spaces on the left.  For example:
</p>
<div class="example">
<pre class="example-preformatted">printf &quot;%4s&quot;, &quot;foo&quot;
</pre></div>

<p>prints &lsquo;<samp class="samp">&bull;foo</samp>&rsquo;.
</p>
<p>The value of <var class="var">width</var> is a minimum width, not a maximum.  If the item
value requires more than <var class="var">width</var> characters, it can be as wide as
necessary.  Thus, the following:
</p>
<div class="example">
<pre class="example-preformatted">printf &quot;%4s&quot;, &quot;foobar&quot;
</pre></div>

<p>prints &lsquo;<samp class="samp">foobar</samp>&rsquo;.
</p>
<p>Preceding the <var class="var">width</var> with a minus sign causes the output to be
padded with spaces on the right, instead of on the left.
</p>
</dd>
<dt><code class="code">.<var class="var">prec</var></code></dt>
<dd><p>A period followed by an integer constant
specifies the precision to use when printing.
The meaning of the precision varies by control letter:
</p>
<dl class="table">
<dt><code class="code">%d</code>, <code class="code">%i</code>, <code class="code">%o</code>, <code class="code">%u</code>, <code class="code">%x</code>, <code class="code">%X</code></dt>
<dd><p>Minimum number of digits to print.
</p>
</dd>
<dt><code class="code">%e</code>, <code class="code">%E</code>, <code class="code">%f</code>, <code class="code">%F</code></dt>
<dd><p>Number of digits to the right of the decimal point.
</p>
</dd>
<dt><code class="code">%g</code>, <code class="code">%G</code></dt>
<dd><p>Maximum number of significant digits.
</p>
</dd>
<dt><code class="code">%s</code></dt>
<dd><p>Maximum number of characters from the string that should print.
</p></dd>
</dl>

<p>Thus, the following:
</p>
<div class="example">
<pre class="example-preformatted">printf &quot;%.4s&quot;, &quot;foobar&quot;
</pre></div>

<p>prints &lsquo;<samp class="samp">foob</samp>&rsquo;.
</p></dd>
</dl>

<p>The C library <code class="code">printf</code>&rsquo;s dynamic <var class="var">width</var> and <var class="var">prec</var>
capability (e.g., <code class="code">&quot;%*.*s&quot;</code>) is supported.  Instead of
supplying explicit <var class="var">width</var> and/or <var class="var">prec</var> values in the format
string, they are passed in the argument list.  For example:
</p>
<div class="example">
<pre class="example-preformatted">w = 5
p = 3
s = &quot;abcdefg&quot;
printf &quot;%*.*s\n&quot;, w, p, s
</pre></div>

<p>is exactly equivalent to:
</p>
<div class="example">
<pre class="example-preformatted">s = &quot;abcdefg&quot;
printf &quot;%5.3s\n&quot;, s
</pre></div>

<p>Both programs output &lsquo;<samp class="samp">&bull;&bull;abc<!-- /@w --></samp>&rsquo;.
Earlier versions of <code class="command">awk</code> did not support this capability.
If you must use such a version, you may simulate this feature by using
concatenation to build up the format string, like so:
</p>
<div class="example">
<pre class="example-preformatted">w = 5
p = 3
s = &quot;abcdefg&quot;
printf &quot;%&quot; w &quot;.&quot; p &quot;s\n&quot;, s
</pre></div>

<p>This is not particularly easy to read, but it does work.
</p>
<a class="index-entry-id" id="index-troubleshooting-fatal-errors-printf-format-strings"></a>
<a class="index-entry-id" id="index-POSIX-awk-printf-format-strings-and"></a>
<p>C programmers may be used to supplying additional modifiers (&lsquo;<samp class="samp">h</samp>&rsquo;,
&lsquo;<samp class="samp">j</samp>&rsquo;, &lsquo;<samp class="samp">l</samp>&rsquo;, &lsquo;<samp class="samp">L</samp>&rsquo;, &lsquo;<samp class="samp">t</samp>&rsquo;, and &lsquo;<samp class="samp">z</samp>&rsquo;) in <code class="code">printf</code>
format strings. These are not valid in <code class="command">awk</code>.  Most <code class="command">awk</code>
implementations silently ignore them.  If <samp class="option">--lint</samp> is provided
on the command line (see <a class="pxref" href="#Options">Command-Line Options</a>), <code class="command">gawk</code> warns about their
use. If <samp class="option">--posix</samp> is supplied, their use is a fatal error.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Printf-Examples">
<div class="nav-panel">
<p>
Previous: <a href="#Format-Modifiers" accesskey="p" rel="prev">Modifiers for <code class="code">printf</code> Formats</a>, Up: <a href="#Printf" accesskey="u" rel="up">Using <code class="code">printf</code> Statements for Fancier Printing</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Examples-Using-printf"><span>5.5.4 Examples Using <code class="code">printf</code><a class="copiable-link" href="#Examples-Using-printf"> &para;</a></span></h4>

<p>The following simple example shows
how to use <code class="code">printf</code> to make an aligned table:
</p>
<div class="example">
<pre class="example-preformatted">awk '{ printf &quot;%-10s %s\n&quot;, $1, $2 }' mail-list
</pre></div>

<p>This command
prints the names of the people (<code class="code">$1</code>) in the file
<samp class="file">mail-list</samp> as a string of 10 characters that are left-justified.  It also
prints the phone numbers (<code class="code">$2</code>) next on the line.  This
produces an aligned two-column table of names and phone numbers,
as shown here:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '{ printf &quot;%-10s %s\n&quot;, $1, $2 }' mail-list</kbd>
-| Amelia     555-5553
-| Anthony    555-3412
-| Becky      555-7685
-| Bill       555-1675
-| Broderick  555-0542
-| Camilla    555-2912
-| Fabius     555-1234
-| Julie      555-6699
-| Martin     555-6480
-| Samuel     555-3430
-| Jean-Paul  555-2127
</pre></div>

<p>In this case, the phone numbers had to be printed as strings because
the numbers are separated by dashes.  Printing the phone numbers as
numbers would have produced just the first three digits: &lsquo;<samp class="samp">555</samp>&rsquo;.
This would have been pretty confusing.
</p>
<p>It wasn&rsquo;t necessary to specify a width for the phone numbers because
they are last on their lines.  They don&rsquo;t need to have spaces
after them.
</p>
<p>The table could be made to look even nicer by adding headings to the
tops of the columns.  This is done using a <code class="code">BEGIN</code> rule
(see <a class="pxref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>)
so that the headers are only printed once, at the beginning of
the <code class="command">awk</code> program:
</p>
<div class="example">
<pre class="example-preformatted">awk 'BEGIN { print &quot;Name      Number&quot;
             print &quot;----      ------&quot; }
           { printf &quot;%-10s %s\n&quot;, $1, $2 }' mail-list
</pre></div>

<p>The preceding example mixes <code class="code">print</code> and <code class="code">printf</code> statements in
the same program.  Using just <code class="code">printf</code> statements can produce the
same results:
</p>
<div class="example">
<pre class="example-preformatted">awk 'BEGIN { printf &quot;%-10s %s\n&quot;, &quot;Name&quot;, &quot;Number&quot;
             printf &quot;%-10s %s\n&quot;, &quot;----&quot;, &quot;------&quot; }
           { printf &quot;%-10s %s\n&quot;, $1, $2 }' mail-list
</pre></div>

<p>Printing each column heading with the same format specification
used for the column elements ensures that the headings
are aligned just like the columns.
</p>
<p>The fact that the same format specification is used three times can be
emphasized by storing it in a variable, like this:
</p>
<div class="example">
<pre class="example-preformatted">awk 'BEGIN { format = &quot;%-10s %s\n&quot;
             printf format, &quot;Name&quot;, &quot;Number&quot;
             printf format, &quot;----&quot;, &quot;------&quot; }
           { printf format, $1, $2 }' mail-list
</pre></div>


<hr>
</div>
</div>
<div class="section-level-extent" id="Redirection">
<div class="nav-panel">
<p>
Next: <a href="#Special-FD" accesskey="n" rel="next">Special Files for Standard Preopened Data Streams</a>, Previous: <a href="#Printf" accesskey="p" rel="prev">Using <code class="code">printf</code> Statements for Fancier Printing</a>, Up: <a href="#Printing" accesskey="u" rel="up">Printing Output</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Redirecting-Output-of-print-and-printf"><span>5.6 Redirecting Output of <code class="code">print</code> and <code class="code">printf</code><a class="copiable-link" href="#Redirecting-Output-of-print-and-printf"> &para;</a></span></h3>

<a class="index-entry-id" id="index-output-redirection"></a>
<a class="index-entry-id" id="index-redirection-of-output"></a>
<a class="index-entry-id" id="index-_002d_002dsandbox-option-output-redirection-with-print-printf"></a>
<p>So far, the output from <code class="code">print</code> and <code class="code">printf</code> has gone
to the standard
output, usually the screen.  Both <code class="code">print</code> and <code class="code">printf</code> can
also send their output to other places.
This is called <em class="dfn">redirection</em>.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> When <samp class="option">--sandbox</samp> is specified (see <a class="pxref" href="#Options">Command-Line Options</a>),
redirecting output to files, pipes, and coprocesses is disabled.
</p></blockquote>

<p>A redirection appears after the <code class="code">print</code> or <code class="code">printf</code> statement.
Redirections in <code class="command">awk</code> are written just like redirections in shell
commands, except that they are written inside the <code class="command">awk</code> program.
</p>
<p>There are four forms of output redirection: output to a file, output
appended to a file, output through a pipe to another command, and output
to a coprocess.  We show them all for the <code class="code">print</code> statement,
but they work identically for <code class="code">printf</code>:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-_003e-_0028right-angle-bracket_0029-_003e-operator-_0028I_002fO_0029"></a>
<a class="index-entry-id" id="index-right-angle-bracket-_0028_003e_0029-_003e-operator-_0028I_002fO_0029"></a>
<a class="index-entry-id" id="index-operators-input_002foutput-3"></a>
</dd>
<dt><code class="code">print <var class="var">items</var> &gt; <var class="var">output-file</var></code></dt>
<dd><p>This redirection prints the items into the output file named
<var class="var">output-file</var>.  The file name <var class="var">output-file</var> can be any
expression.  Its value is changed to a string and then used as a
file name (see <a class="pxref" href="#Expressions">Expressions</a>).
</p>
<p>When this type of redirection is used, the <var class="var">output-file</var> is erased
before the first output is written to it.  Subsequent writes to the same
<var class="var">output-file</var> do not erase <var class="var">output-file</var>, but append to it.
(This is different from how you use redirections in shell scripts.)
If <var class="var">output-file</var> does not exist, it is created.  For example, here
is how an <code class="command">awk</code> program can write a list of peoples&rsquo; names to one
file named <samp class="file">name-list</samp>, and a list of phone numbers to another file
named <samp class="file">phone-list</samp>:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '{ print $2 &gt; &quot;phone-list&quot;</kbd>
&gt;        <kbd class="kbd">print $1 &gt; &quot;name-list&quot; }' mail-list</kbd>
$ <kbd class="kbd">cat phone-list</kbd>
-| 555-5553
-| 555-3412
...
$ <kbd class="kbd">cat name-list</kbd>
-| Amelia
-| Anthony
...
</pre></div>

<p>Each output file contains one name or number per line.
</p>
<a class="index-entry-id" id="index-_003e-_0028right-angle-bracket_0029-_003e_003e-operator-_0028I_002fO_0029"></a>
<a class="index-entry-id" id="index-right-angle-bracket-_0028_003e_0029-_003e_003e-operator-_0028I_002fO_0029"></a>
</dd>
<dt><code class="code">print <var class="var">items</var> &gt;&gt; <var class="var">output-file</var></code></dt>
<dd><p>This redirection prints the items into the preexisting output file
named <var class="var">output-file</var>.  The difference between this and the
single-&lsquo;<samp class="samp">&gt;</samp>&rsquo; redirection is that the old contents (if any) of
<var class="var">output-file</var> are not erased.  Instead, the <code class="command">awk</code> output is
appended to the file.
If <var class="var">output-file</var> does not exist, then it is created.
</p>
<a class="index-entry-id" id="index-_007c-_0028vertical-bar_0029-_007c-operator-_0028I_002fO_0029-1"></a>
<a class="index-entry-id" id="index-pipe-output"></a>
<a class="index-entry-id" id="index-output-pipes"></a>
</dd>
<dt><code class="code">print <var class="var">items</var> | <var class="var">command</var></code></dt>
<dd><p>It is possible to send output to another program through a pipe
instead of into a file.   This redirection opens a pipe to
<var class="var">command</var>, and writes the values of <var class="var">items</var> through this pipe
to another process created to execute <var class="var">command</var>.
</p>
<p>The redirection argument <var class="var">command</var> is actually an <code class="command">awk</code>
expression.  Its value is converted to a string whose contents give
the shell command to be run.  For example, the following produces two
files, one unsorted list of peoples&rsquo; names, and one list sorted in reverse
alphabetical order:
</p>

<div class="example">
<div class="group"><pre class="example-preformatted">awk '{ print $1 &gt; &quot;names.unsorted&quot;
       command = &quot;sort -r &gt; names.sorted&quot;
       print $1 | command }' mail-list
</pre></div></div>

<p>The unsorted list is written with an ordinary redirection, while
the sorted list is written by piping through the <code class="command">sort</code> utility.
</p>
<p>The next example uses redirection to mail a message to the mailing
list <code class="code">bug-system</code>.  This might be useful when trouble is encountered
in an <code class="command">awk</code> script run periodically for system maintenance:
</p>
<div class="example">
<pre class="example-preformatted">report = &quot;mail bug-system&quot;
print(&quot;Awk script failed:&quot;, $0) | report
print(&quot;at record number&quot;, FNR, &quot;of&quot;, FILENAME) | report
close(report)
</pre></div>

<p>The <code class="code">close()</code> function is called here because it&rsquo;s a good idea to close
the pipe as soon as all the intended output has been sent to it.
See <a class="xref" href="#Close-Files-And-Pipes">Closing Input and Output Redirections</a>
for more information.
</p>
<p>This example also illustrates the use of a variable to represent
a <var class="var">file</var> or <var class="var">command</var>&mdash;it is not necessary to always
use a string constant.  Using a variable is generally a good idea,
because (if you mean to refer to that same file or command)
<code class="command">awk</code> requires that the string value be written identically
every time.
</p>
<a class="index-entry-id" id="index-coprocesses"></a>
<a class="index-entry-id" id="index-_007c-_0028vertical-bar_0029-_007c_0026-operator-_0028I_002fO_0029-1"></a>
<a class="index-entry-id" id="index-operators-input_002foutput-4"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-input_002foutput-operators-1"></a>
</dd>
<dt><code class="code">print <var class="var">items</var> |&amp; <var class="var">command</var></code></dt>
<dd><p>This redirection prints the items to the input of <var class="var">command</var>.
The difference between this and the
single-&lsquo;<samp class="samp">|</samp>&rsquo; redirection is that the output from <var class="var">command</var>
can be read with <code class="code">getline</code>.
Thus, <var class="var">command</var> is a <em class="dfn">coprocess</em>, which works together with
but is subsidiary to the <code class="command">awk</code> program.
</p>
<p>This feature is a <code class="command">gawk</code> extension, and is not available in
POSIX <code class="command">awk</code>.
See <a class="xref" href="#Getline_002fCoprocess">Using <code class="code">getline</code> from a Coprocess</a>,
for a brief discussion.
See <a class="xref" href="#Two_002dway-I_002fO">Two-Way Communications with Another Process</a>,
for a more complete discussion.
</p></dd>
</dl>

<p>Redirecting output using &lsquo;<samp class="samp">&gt;</samp>&rsquo;, &lsquo;<samp class="samp">&gt;&gt;</samp>&rsquo;, &lsquo;<samp class="samp">|</samp>&rsquo;, or &lsquo;<samp class="samp">|&amp;</samp>&rsquo;
asks the system to open a file, pipe, or coprocess only if the particular
<var class="var">file</var> or <var class="var">command</var> you specify has not already been written
to by your program or if it has been closed since it was last written to.
In other words, files, pipes, and coprocesses remain open until
explicitly closed. All further <code class="code">print</code> and <code class="code">printf</code> statements
continue to write to the same open file, pipe, or coprocess.
</p>
<a class="index-entry-id" id="index-troubleshooting-printing"></a>
<p>In the shell, when you are building up a file a line at a time, you
first use &lsquo;<samp class="samp">&gt;</samp>&rsquo; to create the file, and then you use &lsquo;<samp class="samp">&gt;&gt;</samp>&rsquo; for
subsequent additions to it, like so:
</p>
<div class="example">
<pre class="example-preformatted">echo Name: Arnold Robbins &gt; data
echo Street Address: 1234 A Pretty Street, NE &gt;&gt; data
echo City and State: MyTown, MyState 12345-6789 &gt;&gt; data
</pre></div>

<p>In <code class="command">awk</code>, the &lsquo;<samp class="samp">&gt;</samp>&rsquo; and &lsquo;<samp class="samp">&gt;&gt;</samp>&rsquo; operators are subtly
different.  The operator you use the <em class="emph">first time</em> you write to a
file determines how <code class="command">awk</code> will open (or create) the file.
If you use &lsquo;<samp class="samp">&gt;</samp>&rsquo;, the file is truncated, and then all subsequent
output appends data to the file, even if additional <code class="code">print</code> or
<code class="code">printf</code> statements continue to use &lsquo;<samp class="samp">&gt;</samp>&rsquo;.  If you use &lsquo;<samp class="samp">&gt;&gt;</samp>&rsquo;
the first time, then existing data is not truncated, and all subsequent
<code class="code">print</code> or <code class="code">printf</code> statements append data to the file.
</p>
<p>You should be consistent and always use the same operator for all output
to the same file. (You can mix &lsquo;<samp class="samp">&gt;</samp>&rsquo; and &lsquo;<samp class="samp">&gt;&gt;</samp>&rsquo;, and nothing bad
will happen, but mixing the operators is considered to be bad style in
<code class="command">awk</code>. If invoked with the <samp class="option">--lint</samp> option, <code class="command">gawk</code>
issues a warning when it encounters both operators being used for the
same open file.)
</p>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-implementation-limitations-1"></a>
<a class="index-entry-id" id="index-implementation-issues_002c-gawk-limits-1"></a>
<a class="index-entry-id" id="index-awk-implementation-issues-pipes"></a>
<a class="index-entry-id" id="index-gawk-implementation-issues-pipes"></a>
<p>As mentioned earlier
(see <a class="pxref" href="#Getline-Notes">Points to Remember About <code class="code">getline</code></a>),
many
Many
older
<code class="command">awk</code> implementations limit the number of pipelines that an <code class="command">awk</code>
program may have open to just one!  In <code class="command">gawk</code>, there is no such limit.
<code class="command">gawk</code> allows a program to
open as many pipelines as the underlying operating system permits.
</p>
<a class="index-entry-id" id="index-sidebar-Piping-into-sh"></a>
<table class="cartouche" border="1"><tr><th>
Piping into <code class="command">sh</code></th></tr><tr><td>
<a class="index-entry-id" id="index-shells-piping-commands-into"></a>

<p>A particularly powerful way to use redirection is to build command lines
and pipe them into the shell, <code class="command">sh</code>.  For example, suppose you
have a list of files brought over from a system where all the file names
are stored in uppercase, and you wish to rename them to have names in
all lowercase.  The following program is both simple and efficient:
</p>
<div class="example">
<pre class="example-preformatted">{ printf(&quot;mv %s %s\n&quot;, $0, tolower($0)) | &quot;sh&quot; }

END { close(&quot;sh&quot;) }
</pre></div>

<p>The <code class="code">tolower()</code> function returns its argument string with all
uppercase characters converted to lowercase
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
The program builds up a list of command lines,
using the <code class="command">mv</code> utility to rename the files.
It then sends the list to the shell for execution.
</p>
<p>See <a class="xref" href="#Shell-Quoting">Quoting Strings to Pass to the Shell</a> for a function that can help in generating
command lines to be fed to the shell.
</p></td></tr></table>

<hr>
</div>
<div class="section-level-extent" id="Special-FD">
<div class="nav-panel">
<p>
Next: <a href="#Special-Files" accesskey="n" rel="next">Special File names in <code class="command">gawk</code></a>, Previous: <a href="#Redirection" accesskey="p" rel="prev">Redirecting Output of <code class="code">print</code> and <code class="code">printf</code></a>, Up: <a href="#Printing" accesskey="u" rel="up">Printing Output</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Special-Files-for-Standard-Preopened-Data-Streams"><span>5.7 Special Files for Standard Preopened Data Streams<a class="copiable-link" href="#Special-Files-for-Standard-Preopened-Data-Streams"> &para;</a></span></h3>
<a class="index-entry-id" id="index-standard-input-1"></a>
<a class="index-entry-id" id="index-input-standard-1"></a>
<a class="index-entry-id" id="index-standard-output"></a>
<a class="index-entry-id" id="index-output-standard"></a>
<a class="index-entry-id" id="index-error-output"></a>
<a class="index-entry-id" id="index-standard-error"></a>
<a class="index-entry-id" id="index-file-descriptors"></a>
<a class="index-entry-id" id="index-files-descriptors"></a>

<p>Running programs conventionally have three input and output streams
already available to them for reading and writing.  These are known
as the <em class="dfn">standard input</em>, <em class="dfn">standard output</em>, and <em class="dfn">standard
error output</em>.  These open streams (and any other open files or pipes)
are often referred to by the technical term <em class="dfn">file descriptors</em>.
</p>
<p>These streams are, by default, connected to your keyboard and screen, but
they are often redirected with the shell, via the &lsquo;<samp class="samp">&lt;</samp>&rsquo;, &lsquo;<samp class="samp">&lt;&lt;</samp>&rsquo;,
&lsquo;<samp class="samp">&gt;</samp>&rsquo;, &lsquo;<samp class="samp">&gt;&gt;</samp>&rsquo;, &lsquo;<samp class="samp">&gt;&amp;</samp>&rsquo;, and &lsquo;<samp class="samp">|</samp>&rsquo; operators.  Standard error
is typically used for writing error messages; the reason there are two separate
streams, standard output and standard error, is so that they can be
redirected separately.
</p>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-error-messages"></a>
<a class="index-entry-id" id="index-error-handling"></a>
<p>In traditional implementations of <code class="command">awk</code>, the only way to write an error
message to standard error in an <code class="command">awk</code> program is as follows:
</p>
<div class="example">
<pre class="example-preformatted">print &quot;Serious error detected!&quot; | &quot;cat 1&gt;&amp;2&quot;
</pre></div>

<p>This works by opening a pipeline to a shell command that can access the
standard error stream that it inherits from the <code class="command">awk</code> process.
This is far from elegant, and it also requires a
separate process.  So people writing <code class="command">awk</code> programs often
don&rsquo;t do this.  Instead, they send the error messages to the
screen, like this:
</p>
<div class="example">
<pre class="example-preformatted">print &quot;Serious error detected!&quot; &gt; &quot;/dev/tty&quot;
</pre></div>

<p>(<samp class="file">/dev/tty</samp> is a special file supplied by the operating system
that is connected to your keyboard and screen. It represents the
&ldquo;terminal,&rdquo;<a class="footnote" id="DOCF29" href="#FOOT29"><sup>29</sup></a> which on modern systems is a keyboard
and screen, not a serial console.)
This generally has the same effect, but not always: although the
standard error stream is usually the screen, it can be redirected; when
that happens, writing to the screen is not correct.  In fact, if
<code class="command">awk</code> is run from a background job, it may not have a
terminal at all.
Then opening <samp class="file">/dev/tty</samp> fails.
</p>
<p><code class="command">gawk</code>, BWK <code class="command">awk</code>, and <code class="command">mawk</code> provide
special file names for accessing the three standard streams.
If the file name matches one of these special names when <code class="command">gawk</code>
(or one of the others) redirects input or output, then it directly uses
the descriptor that the file name stands for.  These special
file names work for all operating systems that <code class="command">gawk</code>
has been ported to, not just those that are POSIX-compliant:
</p>
<a class="index-entry-id" id="index-common-extensions-_002fdev_002fstdin-special-file"></a>
<a class="index-entry-id" id="index-common-extensions-_002fdev_002fstdout-special-file"></a>
<a class="index-entry-id" id="index-common-extensions-_002fdev_002fstderr-special-file"></a>
<a class="index-entry-id" id="index-extensions-common-_002fdev_002fstdin-special-file"></a>
<a class="index-entry-id" id="index-extensions-common-_002fdev_002fstdout-special-file"></a>
<a class="index-entry-id" id="index-extensions-common-_002fdev_002fstderr-special-file"></a>
<a class="index-entry-id" id="index-file-names-standard-streams-in-gawk"></a>
<a class="index-entry-id" id="index-_002fdev_002f_2026-special-files"></a>
<a class="index-entry-id" id="index-files-_002fdev_002f_2026-special-files"></a>
<a class="index-entry-id" id="index-_002fdev_002ffd_002fN-special-files-_0028gawk_0029"></a>
<dl class="table">
<dt><samp class="file">/dev/stdin</samp></dt>
<dd><p>The standard input (file descriptor 0).
</p>
</dd>
<dt><samp class="file">/dev/stdout</samp></dt>
<dd><p>The standard output (file descriptor 1).
</p>
</dd>
<dt><samp class="file">/dev/stderr</samp></dt>
<dd><p>The standard error output (file descriptor 2).
</p></dd>
</dl>

<p>With these facilities,
the proper way to write an error message then becomes:
</p>
<div class="example">
<pre class="example-preformatted">print &quot;Serious error detected!&quot; &gt; &quot;/dev/stderr&quot;
</pre></div>

<a class="index-entry-id" id="index-troubleshooting-quotes-with-file-names"></a>
<p>Note the use of quotes around the file name.
Like with any other redirection, the value must be a string.
It is a common error to omit the quotes, which leads
to confusing results.
</p>
<p><code class="command">gawk</code> does not treat these file names as special when
in POSIX-compatibility mode. However, because BWK <code class="command">awk</code>
supports them, <code class="command">gawk</code> does support them even when
invoked with the <samp class="option">--traditional</samp> option (see <a class="pxref" href="#Options">Command-Line Options</a>).
</p>
<hr>
</div>
<div class="section-level-extent" id="Special-Files">
<div class="nav-panel">
<p>
Next: <a href="#Close-Files-And-Pipes" accesskey="n" rel="next">Closing Input and Output Redirections</a>, Previous: <a href="#Special-FD" accesskey="p" rel="prev">Special Files for Standard Preopened Data Streams</a>, Up: <a href="#Printing" accesskey="u" rel="up">Printing Output</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Special-File-names-in-gawk"><span>5.8 Special File names in <code class="command">gawk</code><a class="copiable-link" href="#Special-File-names-in-gawk"> &para;</a></span></h3>
<a class="index-entry-id" id="index-gawk-file-names-in"></a>

<p>Besides access to standard input, standard output, and standard error,
<code class="command">gawk</code> provides access to any open file descriptor.
Additionally, there are special file names reserved for
TCP/IP networking.
</p>

<ul class="mini-toc">
<li><a href="#Other-Inherited-Files" accesskey="1">Accessing Other Open Files with <code class="command">gawk</code></a></li>
<li><a href="#Special-Network" accesskey="2">Special Files for Network Communications</a></li>
<li><a href="#Special-Caveats" accesskey="3">Special File name Caveats</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Other-Inherited-Files">
<div class="nav-panel">
<p>
Next: <a href="#Special-Network" accesskey="n" rel="next">Special Files for Network Communications</a>, Up: <a href="#Special-Files" accesskey="u" rel="up">Special File names in <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Accessing-Other-Open-Files-with-gawk"><span>5.8.1 Accessing Other Open Files with <code class="command">gawk</code><a class="copiable-link" href="#Accessing-Other-Open-Files-with-gawk"> &para;</a></span></h4>

<p>Besides the <code class="code">/dev/stdin</code>, <code class="code">/dev/stdout</code>, and <code class="code">/dev/stderr</code>
special file names mentioned earlier, <code class="command">gawk</code> provides syntax
for accessing any other inherited open file:
</p>
<dl class="table">
<dt><samp class="file">/dev/fd/<var class="var">N</var></samp></dt>
<dd><p>The file associated with file descriptor <var class="var">N</var>.  Such a file must
be opened by the program initiating the <code class="command">awk</code> execution (typically
the shell).  Unless special pains are taken in the shell from which
<code class="command">gawk</code> is invoked, only descriptors 0, 1, and 2 are available.
</p></dd>
</dl>

<p>The file names <samp class="file">/dev/stdin</samp>, <samp class="file">/dev/stdout</samp>, and <samp class="file">/dev/stderr</samp>
are essentially aliases for <samp class="file">/dev/fd/0</samp>, <samp class="file">/dev/fd/1</samp>, and
<samp class="file">/dev/fd/2</samp>, respectively. However, those names are more self-explanatory.
</p>
<p>Note that using <code class="code">close()</code> on a file name of the
form <code class="code">&quot;/dev/fd/<var class="var">N</var>&quot;</code>, for file descriptor numbers
above two, does actually close the given file descriptor.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Special-Network">
<div class="nav-panel">
<p>
Next: <a href="#Special-Caveats" accesskey="n" rel="next">Special File name Caveats</a>, Previous: <a href="#Other-Inherited-Files" accesskey="p" rel="prev">Accessing Other Open Files with <code class="command">gawk</code></a>, Up: <a href="#Special-Files" accesskey="u" rel="up">Special File names in <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Special-Files-for-Network-Communications"><span>5.8.2 Special Files for Network Communications<a class="copiable-link" href="#Special-Files-for-Network-Communications"> &para;</a></span></h4>
<a class="index-entry-id" id="index-networks-support-for"></a>
<a class="index-entry-id" id="index-TCP_002fIP-support-for"></a>

<p><code class="command">gawk</code> programs
can open a two-way
TCP/IP connection, acting as either a client or a server.
This is done using a special file name of the form:
</p>
<div class="example">
<pre class="example-preformatted"><samp class="file">/<var class="var">net-type</var>/<var class="var">protocol</var>/<var class="var">local-port</var>/<var class="var">remote-host</var>/<var class="var">remote-port</var></samp>
</pre></div>

<p>The <var class="var">net-type</var> is one of &lsquo;<samp class="samp">inet</samp>&rsquo;, &lsquo;<samp class="samp">inet4</samp>&rsquo;, or &lsquo;<samp class="samp">inet6</samp>&rsquo;.
The <var class="var">protocol</var> is one of &lsquo;<samp class="samp">tcp</samp>&rsquo; or &lsquo;<samp class="samp">udp</samp>&rsquo;,
and the other fields represent the other essential pieces of information
for making a networking connection.
These file names are used with the &lsquo;<samp class="samp">|&amp;</samp>&rsquo; operator for communicating
with a&nbsp;coprocess<!-- /@w -->
(see <a class="pxref" href="#Two_002dway-I_002fO">Two-Way Communications with Another Process</a>).
This is an advanced feature, mentioned here only for completeness.
Full discussion is delayed until
<a class="ref" href="#TCP_002fIP-Networking">Using <code class="command">gawk</code> for Network Programming</a>.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Special-Caveats">
<div class="nav-panel">
<p>
Previous: <a href="#Special-Network" accesskey="p" rel="prev">Special Files for Network Communications</a>, Up: <a href="#Special-Files" accesskey="u" rel="up">Special File names in <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Special-File-name-Caveats"><span>5.8.3 Special File name Caveats<a class="copiable-link" href="#Special-File-name-Caveats"> &para;</a></span></h4>

<p>Here are some things to bear in mind when using the
special file names that <code class="command">gawk</code> provides:
</p>
<ul class="itemize mark-bullet">
<li><a class="index-entry-id" id="index-compatibility-mode-_0028gawk_0029-file-names"></a>
<a class="index-entry-id" id="index-file-names-in-compatibility-mode"></a>
</li><li><a class="index-entry-id" id="index-POSIX-mode-4"></a>
Recognition of the file names for the three standard preopened
files is disabled only in POSIX mode.

</li><li>Recognition of the other special file names is disabled if <code class="command">gawk</code> is in
compatibility mode (either <samp class="option">--traditional</samp> or <samp class="option">--posix</samp>;
see <a class="pxref" href="#Options">Command-Line Options</a>).

</li><li><code class="command">gawk</code> <em class="emph">always</em>
interprets these special file names.
For example, using &lsquo;<samp class="samp">/dev/fd/4</samp>&rsquo;
for output actually writes on file descriptor 4, and not on a new
file descriptor that is <code class="code">dup()</code>ed from file descriptor 4.  Most of
the time this does not matter; however, it is important to <em class="emph">not</em>
close any of the files related to file descriptors 0, 1, and 2.
Doing so results in unpredictable behavior.
</li></ul>

<hr>
</div>
</div>
<div class="section-level-extent" id="Close-Files-And-Pipes">
<div class="nav-panel">
<p>
Next: <a href="#Noflush" accesskey="n" rel="next">Speeding Up Pipe Output</a>, Previous: <a href="#Special-Files" accesskey="p" rel="prev">Special File names in <code class="command">gawk</code></a>, Up: <a href="#Printing" accesskey="u" rel="up">Printing Output</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Closing-Input-and-Output-Redirections"><span>5.9 Closing Input and Output Redirections<a class="copiable-link" href="#Closing-Input-and-Output-Redirections"> &para;</a></span></h3>
<a class="index-entry-id" id="index-files-output"></a>
<a class="index-entry-id" id="index-input-files-closing"></a>
<a class="index-entry-id" id="index-output-files_002c-closing"></a>
<a class="index-entry-id" id="index-pipe-closing"></a>
<a class="index-entry-id" id="index-coprocesses-closing"></a>
<a class="index-entry-id" id="index-getline-command-coprocesses_002c-using-from-1"></a>


<p>If the same file name or the same shell command is used with <code class="code">getline</code>
more than once during the execution of an <code class="command">awk</code> program
(see <a class="pxref" href="#Getline">Explicit Input with <code class="code">getline</code></a>),
the file is opened (or the command is executed) the first time only.
At that time, the first record of input is read from that file or command.
The next time the same file or command is used with <code class="code">getline</code>,
another record is read from it, and so on.
</p>
<p>Similarly, when a file or pipe is opened for output, <code class="command">awk</code> remembers
the file name or command associated with it, and subsequent
writes to the same file or command are appended to the previous writes.
The file or pipe stays open until <code class="command">awk</code> exits.
</p>
<a class="index-entry-id" id="index-close_0028_0029-function"></a>
<p>This implies that special steps are necessary in order to read the same
file again from the beginning, or to rerun a shell command (rather than
reading more output from the same command).  The <code class="code">close()</code> function
makes these things possible:
</p>
<div class="example">
<pre class="example-preformatted">close(<var class="var">filename</var>)
</pre></div>

<p>or:
</p>
<div class="example">
<pre class="example-preformatted">close(<var class="var">command</var>)
</pre></div>

<p>The argument <var class="var">filename</var> or <var class="var">command</var> can be any expression.  Its
value must <em class="emph">exactly</em> match the string that was used to open the file or
start the command (spaces and other &ldquo;irrelevant&rdquo; characters
included). For example, if you open a pipe with this:
</p>
<div class="example">
<pre class="example-preformatted">&quot;sort -r names&quot; | getline foo
</pre></div>

<p>then you must close it with this:
</p>
<div class="example">
<pre class="example-preformatted">close(&quot;sort -r names&quot;)
</pre></div>

<p>Once this function call is executed, the next <code class="code">getline</code> from that
file or command, or the next <code class="code">print</code> or <code class="code">printf</code> to that
file or command, reopens the file or reruns the command.
Because the expression that you use to close a file or pipeline must
exactly match the expression used to open the file or run the command,
it is good practice to use a variable to store the file name or command.
The previous example becomes the following:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">sortcom = &quot;sort -r names&quot;
sortcom | getline foo
</pre></div><div class="group"><pre class="example-preformatted">...
close(sortcom)
</pre></div></div>

<p>This helps avoid hard-to-find typographical errors in your <code class="command">awk</code>
programs.  Here are some of the reasons for closing an output file:
</p>
<ul class="itemize mark-bullet">
<li>To write a file and read it back later on in the same <code class="command">awk</code>
program.  Close the file after writing it, then
begin reading it with <code class="code">getline</code>.

</li><li>To write numerous files, successively, in the same <code class="command">awk</code>
program.  If the files aren&rsquo;t closed, eventually <code class="command">awk</code> may exceed a
system limit on the number of open files in one process.  It is best to
close each one when the program has finished writing it.

</li><li>To make a command finish.  When output is redirected through a pipe,
the command reading the pipe normally continues to try to read input
as long as the pipe is open.  Often this means the command cannot
really do its work until the pipe is closed.  For example, if
output is redirected to the <code class="command">mail</code> program, the message is not
actually sent until the pipe is closed.

</li><li>To run the same program a second time, with the same arguments.
This is not the same thing as giving more input to the first run!

<p>For example, suppose a program pipes output to the <code class="command">mail</code> program.
If it outputs several lines redirected to this pipe without closing
it, they make a single message of several lines.  By contrast, if the
program closes the pipe after each line of output, then each line makes
a separate message.
</p></li></ul>

<a class="index-entry-id" id="index-differences-in-awk-and-gawk-close_0028_0029-function"></a>
<a class="index-entry-id" id="index-portability-close_0028_0029-function-and"></a>
<a class="index-entry-id" id="index-close_0028_0029-function-portability"></a>
<p>If you use more files than the system allows you to have open,
<code class="command">gawk</code> attempts to multiplex the available open files among
your data files.  <code class="command">gawk</code>&rsquo;s ability to do this depends upon the
facilities of your operating system, so it may not always work.  It is
therefore both good practice and good portability advice to always
use <code class="code">close()</code> on your files when you are done with them.
In fact, if you are using a lot of pipes, it is essential that
you close commands when done. For example, consider something like this:
</p>
<div class="example">
<pre class="example-preformatted">{
    ...
    command = (&quot;grep &quot; $1 &quot; /some/file | my_prog -q &quot; $3)
    while ((command | getline) &gt; 0) {
        <var class="var">process output of</var> command
    }
    # need close(command) here
}
</pre></div>

<p>This example creates a new pipeline based on data in <em class="emph">each</em> record.
Without the call to <code class="code">close()</code> indicated in the comment, <code class="command">awk</code>
creates child processes to run the commands, until it eventually
runs out of file descriptors for more pipelines.
</p>
<p>Even though each command has finished (as indicated by the end-of-file
return status from <code class="code">getline</code>), the child process is not
terminated;<a class="footnote" id="DOCF30" href="#FOOT30"><sup>30</sup></a>
more importantly, the file descriptor for the pipe
is not closed and released until <code class="code">close()</code> is called or
<code class="command">awk</code> exits.
</p>
<p><code class="code">close()</code> silently does nothing if given an argument that
does not represent a file, pipe, or coprocess that was opened with
a redirection.  In such a case, it returns a negative value,
indicating an error. In addition, <code class="command">gawk</code> sets <code class="code">ERRNO</code>
to a string indicating the error.
</p>
<p>Note also that &lsquo;<samp class="samp">close(FILENAME)</samp>&rsquo; has no &ldquo;magic&rdquo; effects on the
implicit loop that reads through the files named on the command line.
It is, more likely, a close of a file that was never opened with a
redirection, so <code class="command">awk</code> silently does nothing, except return
a negative value.
</p>
<a class="index-entry-id" id="index-_007c-_0028vertical-bar_0029-_007c_0026-operator-_0028I_002fO_0029-pipes_002c-closing"></a>
<p>When using the &lsquo;<samp class="samp">|&amp;</samp>&rsquo; operator to communicate with a coprocess,
it is occasionally useful to be able to close one end of the two-way
pipe without closing the other.
This is done by supplying a second argument to <code class="code">close()</code>.
As in any other call to <code class="code">close()</code>,
the first argument is the name of the command or special file used
to start the coprocess.
The second argument should be a string, with either of the values
<code class="code">&quot;to&quot;</code> or <code class="code">&quot;from&quot;</code>.  Case does not matter.
As this is an advanced feature, discussion is
delayed until
<a class="ref" href="#Two_002dway-I_002fO">Two-Way Communications with Another Process</a>,
which describes it in more detail and gives an example.
</p>
<ul class="mini-toc">
<li><a href="#Close-Return-Value" accesskey="1">Using <code class="code">close()</code>&rsquo;s Return Value</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Close-Return-Value">
<div class="nav-panel">
<p>
Up: <a href="#Close-Files-And-Pipes" accesskey="u" rel="up">Closing Input and Output Redirections</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Using-close_0028_0029_0027s-Return-Value"><span>5.9.1 Using <code class="code">close()</code>&rsquo;s Return Value<a class="copiable-link" href="#Using-close_0028_0029_0027s-Return-Value"> &para;</a></span></h4>
<a class="index-entry-id" id="index-dark-corner-close_0028_0029-function"></a>
<a class="index-entry-id" id="index-close_0028_0029-function-return-value"></a>
<a class="index-entry-id" id="index-return-value_002c-close_0028_0029-function"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-close_0028_0029-function-1"></a>
<a class="index-entry-id" id="index-Unix-awk-close_0028_0029-function-and"></a>

<p>In many older versions of Unix <code class="command">awk</code>, the <code class="code">close()</code> function
is actually a statement.
(d.c.)
It is a syntax error to try and use the return
value from <code class="code">close()</code>:
</p>
<div class="example">
<pre class="example-preformatted">command = &quot;...&quot;
command | getline info
retval = close(command)  # syntax error in many Unix awks
</pre></div>

<a class="index-entry-id" id="index-gawk-ERRNO-variable-in-1"></a>
<a class="index-entry-id" id="index-ERRNO-variable-with-close_0028_0029-function"></a>
<p><code class="command">gawk</code> treats <code class="code">close()</code> as a function.
The return value is &minus;1 if the argument names something
that was never opened with a redirection, or if there is
a system problem closing the file or process.
In these cases, <code class="command">gawk</code> sets the predefined variable
<code class="code">ERRNO</code> to a string describing the problem.
</p>
<p>In <code class="command">gawk</code>, starting with version 4.2, when closing a pipe or
coprocess (input or output), the return value is the exit status of the
command, as described in <a class="ref" href="#table_002dclose_002dpipe_002dreturn_002dvalues">Table 5.1</a>.<a class="footnote" id="DOCF31" href="#FOOT31"><sup>31</sup></a> Otherwise, it is the return value from the system&rsquo;s <code class="code">close()</code>
or <code class="code">fclose()</code> C functions when closing input or output files,
respectively.  This value is zero if the close succeeds, or &minus;1
if it fails.
Recent versions of BWK <code class="command">awk</code> also return the same values
from <code class="command">close()</code>.
</p>
<div class="float" id="table_002dclose_002dpipe_002dreturn_002dvalues">
<table class="multitable">
<thead><tr><th width="50%">Situation</th><th width="50%">Return value from <code class="code">close()</code></th></tr></thead>
<tbody><tr><td width="50%">Normal exit of command</td><td width="50%">Command&rsquo;s exit status</td></tr>
<tr><td width="50%">Death by signal of command</td><td width="50%">256 + number of murderous signal</td></tr>
<tr><td width="50%">Death by signal of command with core dump</td><td width="50%">512 + number of murderous signal</td></tr>
<tr><td width="50%">Some kind of error</td><td width="50%">&minus;1</td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 5.1: </strong>Return values from <code class="code">close()</code> of a pipe</p></div></div>
<a class="index-entry-id" id="index-POSIX-mode-5"></a>
<p>The POSIX standard is very vague; it says that <code class="code">close()</code>
returns zero on success and a nonzero value otherwise.  In general,
different implementations vary in what they report when closing
pipes; thus, the return value cannot be used portably.
(d.c.)
In POSIX mode (see <a class="pxref" href="#Options">Command-Line Options</a>), <code class="command">gawk</code> just returns zero
when closing a pipe.
</p>
<hr>
</div>
</div>
<div class="section-level-extent" id="Noflush">
<div class="nav-panel">
<p>
Next: <a href="#Nonfatal" accesskey="n" rel="next">Enabling Nonfatal Output</a>, Previous: <a href="#Close-Files-And-Pipes" accesskey="p" rel="prev">Closing Input and Output Redirections</a>, Up: <a href="#Printing" accesskey="u" rel="up">Printing Output</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Speeding-Up-Pipe-Output"><span>5.10 Speeding Up Pipe Output<a class="copiable-link" href="#Speeding-Up-Pipe-Output"> &para;</a></span></h3>
<a class="index-entry-id" id="index-PROCINFO-array-not-flushing-pipe-buffers"></a>
<a class="index-entry-id" id="index-pipe-output_002c-speeding-up"></a>

<p>This section describes a <code class="command">gawk</code>-specific feature.
</p>
<p>Normally, when you send data down a pipeline to a command with
<code class="code">print</code> or <code class="code">printf</code>, <code class="command">gawk</code> <em class="dfn">flushes</em> the
output down the pipe. That is, output is not buffered, but
written directly.  This assures, that pipeline output
intermixed with <code class="command">gawk</code>&rsquo;s output comes out in the
expected order:
</p>
<div class="example">
<pre class="example-preformatted">print &quot;something&quot;                       # goes to standard output
print &quot;something else&quot; | &quot;some-command&quot; # also to standard output
print &quot;more stuff&quot;                      # and this too
</pre></div>

<p>There can be a price to pay for this; flushing data down
the pipeline uses more CPU time, and in certain environments
this can become expensive.
</p>
<p>You can tell <code class="command">gawk</code> not to flush buffered data in
one of two ways:
</p>
<ul class="itemize mark-bullet">
<li>Set <code class="code">PROCINFO[&quot;BUFFERPIPE&quot;]</code> to any value. When this is done,
<code class="command">gawk</code> will buffer data for all pipelines.

</li><li>Set <code class="code">PROCINFO[&quot;<var class="var">command</var>&quot;, &quot;BUFFERPIPE&quot;]</code> to any value.
In this case, only <var class="var">command</var>&rsquo;s data will be fully buffered.
</li></ul>

<p>You <em class="emph">must</em> create one or the other of these elements
in <code class="code">PROCINFO</code> before the first <code class="code">print</code> or
<code class="code">printf</code> to the pipeline.  Doing so after output has
already been sent is too late.
</p>
<p>Be aware that using this feature may change the output behavior of
your programs, so exercise caution.
</p>
<hr>
</div>
<div class="section-level-extent" id="Nonfatal">
<div class="nav-panel">
<p>
Next: <a href="#Output-Summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Noflush" accesskey="p" rel="prev">Speeding Up Pipe Output</a>, Up: <a href="#Printing" accesskey="u" rel="up">Printing Output</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Enabling-Nonfatal-Output"><span>5.11 Enabling Nonfatal Output<a class="copiable-link" href="#Enabling-Nonfatal-Output"> &para;</a></span></h3>
<a class="index-entry-id" id="index-PROCINFO-array-nonfatal-output"></a>
<a class="index-entry-id" id="index-output_002c-nonfatal"></a>
<a class="index-entry-id" id="index-nonfatal-output"></a>

<p>This section describes a <code class="command">gawk</code>-specific feature.
</p>
<p>In standard <code class="command">awk</code>, output with <code class="code">print</code> or <code class="code">printf</code>
to a nonexistent file, or some other I/O error (such as filling up the
disk) is a fatal error.
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { print &quot;hi&quot; &gt; &quot;/no/such/file&quot; }'</kbd>
error&rarr; gawk: cmd. line:1: fatal: can't redirect to `/no/such/file' (No
error&rarr; such file or directory)
</pre></div>

<p><code class="command">gawk</code> makes it possible to detect that an error has
occurred, allowing you to possibly recover from the error, or
at least print an error message of your choosing before exiting.
You can do this in one of two ways:
</p>
<ul class="itemize mark-bullet">
<li>For all output files, by assigning any value to <code class="code">PROCINFO[&quot;NONFATAL&quot;]</code>.

</li><li>On a per-file basis, by assigning any value to
<code class="code">PROCINFO[<var class="var">filename</var>, &quot;NONFATAL&quot;]</code>.
Here, <var class="var">filename</var> is the name of the file to which
you wish output to be nonfatal.
</li></ul>

<p>Once you have enabled nonfatal output, you must check <code class="code">ERRNO</code>
after every relevant <code class="code">print</code> or <code class="code">printf</code> statement to
see if something went wrong.  It is also a good idea to initialize
<code class="code">ERRNO</code> to zero before attempting the output. For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk '</kbd>
&gt; <kbd class="kbd">BEGIN {</kbd>
&gt; <kbd class="kbd">    PROCINFO[&quot;NONFATAL&quot;] = 1</kbd>
&gt; <kbd class="kbd">    ERRNO = 0</kbd>
&gt; <kbd class="kbd">    print &quot;hi&quot; &gt; &quot;/no/such/file&quot;</kbd>
&gt; <kbd class="kbd">    if (ERRNO) {</kbd>
&gt; <kbd class="kbd">        print(&quot;Output failed:&quot;, ERRNO) &gt; &quot;/dev/stderr&quot;</kbd>
&gt; <kbd class="kbd">        exit 1</kbd>
&gt; <kbd class="kbd">    }</kbd>
&gt; <kbd class="kbd">}'</kbd>
error&rarr; Output failed: No such file or directory
</pre></div>

<p>Here, <code class="command">gawk</code> did not produce a fatal error; instead
it let the <code class="command">awk</code> program code detect the problem and handle it.
</p>
<p>This mechanism works also for standard output and standard error.
For standard output, you may use <code class="code">PROCINFO[&quot;-&quot;, &quot;NONFATAL&quot;]</code>
or <code class="code">PROCINFO[&quot;/dev/stdout&quot;, &quot;NONFATAL&quot;]</code>.  For standard error, use
<code class="code">PROCINFO[&quot;/dev/stderr&quot;, &quot;NONFATAL&quot;]</code>.
</p>
<a class="index-entry-id" id="index-GAWK_005fSOCK_005fRETRIES-environment-variable-1"></a>
<a class="index-entry-id" id="index-environment-variables-GAWK_005fSOCK_005fRETRIES-1"></a>
<p>When attempting to open a TCP/IP socket (see <a class="pxref" href="#TCP_002fIP-Networking">Using <code class="command">gawk</code> for Network Programming</a>),
<code class="command">gawk</code> tries multiple times. The <code class="env">GAWK_SOCK_RETRIES</code>
environment variable (see <a class="pxref" href="#Other-Environment-Variables">Other Environment Variables</a>) allows you to
override <code class="command">gawk</code>&rsquo;s builtin default number of attempts.  However,
once nonfatal I/O is enabled for a given socket, <code class="command">gawk</code> only
retries once, relying on <code class="command">awk</code>-level code to notice that there
was a problem.
</p>
<hr>
</div>
<div class="section-level-extent" id="Output-Summary">
<div class="nav-panel">
<p>
Next: <a href="#Output-Exercises" accesskey="n" rel="next">Exercises</a>, Previous: <a href="#Nonfatal" accesskey="p" rel="prev">Enabling Nonfatal Output</a>, Up: <a href="#Printing" accesskey="u" rel="up">Printing Output</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary-4"><span>5.12 Summary<a class="copiable-link" href="#Summary-4"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>The <code class="code">print</code> statement prints comma-separated expressions. Each
expression is separated by the value of <code class="code">OFS</code> and terminated by
the value of <code class="code">ORS</code>.  <code class="code">OFMT</code> provides the conversion format
for numeric values for the <code class="code">print</code> statement.

</li><li>The <code class="code">printf</code> statement provides finer-grained control over output,
with format-control letters for different data types and various flags
that modify the behavior of the format-control letters.

</li><li>Output from both <code class="code">print</code> and <code class="code">printf</code> may be redirected to
files, pipes, and coprocesses.

</li><li><code class="command">gawk</code> provides special file names for access to standard input,
output, and error, and for network communications.

</li><li>Use <code class="code">close()</code> to close open file, pipe, and coprocess redirections.
For coprocesses, it is possible to close only one direction of the
communications.

</li><li>Normally errors with <code class="code">print</code> or <code class="code">printf</code> are fatal.
<code class="command">gawk</code> lets you make output errors be nonfatal either for
all files or on a per-file basis. You must then check for errors
after every relevant output statement.

</li></ul>

<hr>
</div>
<div class="section-level-extent" id="Output-Exercises">
<div class="nav-panel">
<p>
Previous: <a href="#Output-Summary" accesskey="p" rel="prev">Summary</a>, Up: <a href="#Printing" accesskey="u" rel="up">Printing Output</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Exercises-1"><span>5.13 Exercises<a class="copiable-link" href="#Exercises-1"> &para;</a></span></h3>

<ol class="enumerate">
<li> Rewrite the program:

<div class="example">
<pre class="example-preformatted">awk 'BEGIN { print &quot;Month Crates&quot;
             print &quot;----- ------&quot; }
           { print $1, &quot;     &quot;, $2 }' inventory-shipped
</pre></div>

<p>from <a class="ref" href="#Output-Separators">Output Separators</a>, by using a new value of <code class="code">OFS</code>.
</p>
</li><li> Use the <code class="code">printf</code> statement to line up the headings and table data
for the <samp class="file">inventory-shipped</samp> example that was covered in <a class="ref" href="#Print">The <code class="code">print</code> Statement</a>.

</li><li> What happens if you forget the double quotes when redirecting
output, as follows:

<div class="example">
<pre class="example-preformatted">BEGIN { print &quot;Serious error detected!&quot; &gt; /dev/stderr }
</pre></div>

</li></ol>


<hr>
</div>
</div>
<div class="chapter-level-extent" id="Expressions">
<div class="nav-panel">
<p>
Next: <a href="#Patterns-and-Actions" accesskey="n" rel="next">Patterns, Actions, and Variables</a>, Previous: <a href="#Printing" accesskey="p" rel="prev">Printing Output</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Expressions-1"><span>6 Expressions<a class="copiable-link" href="#Expressions-1"> &para;</a></span></h2>
<a class="index-entry-id" id="index-expressions"></a>

<p>Expressions are the basic building blocks of <code class="command">awk</code> patterns
and actions.  An expression evaluates to a value that you can print, test,
or pass to a function.  Additionally, an expression
can assign a new value to a variable or a field by using an assignment operator.
</p>
<p>An expression can serve as a pattern or action statement on its own.
Most other kinds of
statements contain one or more expressions that specify the data on which to
operate.  As in other languages, expressions in <code class="command">awk</code> can include
variables, array references, constants, and function calls, as well as
combinations of these with various operators.
</p>

<ul class="mini-toc">
<li><a href="#Values" accesskey="1">Constants, Variables, and Conversions</a></li>
<li><a href="#All-Operators" accesskey="2">Operators: Doing Something with Values</a></li>
<li><a href="#Truth-Values-and-Conditions" accesskey="3">Truth Values and Conditions</a></li>
<li><a href="#Function-Calls" accesskey="4">Function Calls</a></li>
<li><a href="#Precedence" accesskey="5">Operator Precedence (How Operators Nest)</a></li>
<li><a href="#Locales" accesskey="6">Where You Are Makes a Difference</a></li>
<li><a href="#Expressions-Summary" accesskey="7">Summary</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Values">
<div class="nav-panel">
<p>
Next: <a href="#All-Operators" accesskey="n" rel="next">Operators: Doing Something with Values</a>, Up: <a href="#Expressions" accesskey="u" rel="up">Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Constants_002c-Variables_002c-and-Conversions"><span>6.1 Constants, Variables, and Conversions<a class="copiable-link" href="#Constants_002c-Variables_002c-and-Conversions"> &para;</a></span></h3>

<p>Expressions are built up from values and the operations performed
upon them. This section describes the elementary objects
that provide the values used in expressions.
</p>

<ul class="mini-toc">
<li><a href="#Constants" accesskey="1">Constant Expressions</a></li>
<li><a href="#Using-Constant-Regexps" accesskey="2">Using Regular Expression Constants</a></li>
<li><a href="#Variables" accesskey="3">Variables</a></li>
<li><a href="#Conversion" accesskey="4">Conversion of Strings and Numbers</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Constants">
<div class="nav-panel">
<p>
Next: <a href="#Using-Constant-Regexps" accesskey="n" rel="next">Using Regular Expression Constants</a>, Up: <a href="#Values" accesskey="u" rel="up">Constants, Variables, and Conversions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Constant-Expressions"><span>6.1.1 Constant Expressions<a class="copiable-link" href="#Constant-Expressions"> &para;</a></span></h4>

<a class="index-entry-id" id="index-constants-types-of"></a>

<p>The simplest type of expression is the <em class="dfn">constant</em>, which always has
the same value.  There are three types of constants: numeric,
string, and regular expression.
</p>
<p>Each is used in the appropriate context when you need a data
value that isn&rsquo;t going to change.  Numeric constants can
have different forms, but are internally stored in an identical manner.
</p>

<ul class="mini-toc">
<li><a href="#Scalar-Constants" accesskey="1">Numeric and String Constants</a></li>
<li><a href="#Nondecimal_002dnumbers" accesskey="2">Octal and Hexadecimal Numbers</a></li>
<li><a href="#Regexp-Constants" accesskey="3">Regular Expression Constants</a></li>
</ul>
<hr>
<div class="subsubsection-level-extent" id="Scalar-Constants">
<div class="nav-panel">
<p>
Next: <a href="#Nondecimal_002dnumbers" accesskey="n" rel="next">Octal and Hexadecimal Numbers</a>, Up: <a href="#Constants" accesskey="u" rel="up">Constant Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Numeric-and-String-Constants"><span>6.1.1.1 Numeric and String Constants<a class="copiable-link" href="#Numeric-and-String-Constants"> &para;</a></span></h4>

<a class="index-entry-id" id="index-constants-numeric"></a>
<a class="index-entry-id" id="index-numeric-constants"></a>
<p>A <em class="dfn">numeric constant</em> stands for a number.  This number can be an
integer, a decimal fraction, or a number in scientific (exponential)
notation.<a class="footnote" id="DOCF32" href="#FOOT32"><sup>32</sup></a>
Here are some examples of numeric constants that all
have the same value:
</p>
<div class="example">
<pre class="example-preformatted">105
1.05e+2
1050e-1
</pre></div>

<a class="index-entry-id" id="index-string-constants"></a>
<a class="index-entry-id" id="index-constants-string"></a>
<p>A <em class="dfn">string constant</em> consists of a sequence of characters enclosed in
double quotation marks.  For example:
</p>
<div class="example">
<pre class="example-preformatted">&quot;parrot&quot;
</pre></div>

<a class="index-entry-id" id="index-differences-in-awk-and-gawk-strings"></a>
<a class="index-entry-id" id="index-strings-length-limitations"></a>
<a class="index-entry-id" id="index-ASCII-2"></a>
<p>represents the string whose contents are &lsquo;<samp class="samp">parrot</samp>&rsquo;.  Strings in
<code class="command">gawk</code> can be of any length, and they can contain any of the possible
eight-bit ASCII characters, including ASCII <small class="sc">NUL</small> (character code zero).
Other <code class="command">awk</code>
implementations may have difficulty with some character codes.
</p>
<p>Some languages allow you to continue long strings across
multiple lines by ending the line with a backslash. For example in C:
</p>
<div class="example">
<pre class="example-preformatted">#include &lt;stdio.h&gt;

int main()
{
    printf(&quot;hello, \
world\n&quot;);
    return 0;
}
</pre></div>

<p>In such a case, the C compiler removes both the backslash and the newline,
producing a string as if it had been typed &lsquo;<samp class="samp">&quot;hello, world\n&quot;</samp>&rsquo;.
This is useful when a single string needs to contain a large amount of text.
</p>
<p>The POSIX standard says explicitly that newlines are not allowed inside string
constants.  And indeed, all <code class="command">awk</code> implementations report an error
if you try to do so. For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { print &quot;hello, </kbd>
&gt; <kbd class="kbd">world&quot; }'</kbd>
-| gawk: cmd. line:1: BEGIN { print &quot;hello,
-| gawk: cmd. line:1:               ^ unterminated string
-| gawk: cmd. line:1: BEGIN { print &quot;hello,
-| gawk: cmd. line:1:               ^ syntax error
</pre></div>

<a class="index-entry-id" id="index-dark-corner-string-continuation"></a>
<a class="index-entry-id" id="index-strings-continuation-across-lines"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-strings-1"></a>
<p>Although POSIX doesn&rsquo;t define what happens if you use an escaped
newline, as in the previous C example, all known versions of
<code class="command">awk</code> allow you to do so.  Unfortunately, what each one
does with such a string varies.  (d.c.) <code class="command">gawk</code>,
<code class="command">mawk</code>, and the OpenSolaris POSIX <code class="command">awk</code>
(see <a class="pxref" href="#Other-Versions">Other Freely Available <code class="command">awk</code> Implementations</a>) elide the backslash and newline, as in C:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { print &quot;hello, \</kbd>
&gt; <kbd class="kbd">world&quot; }'</kbd>
-| hello, world
</pre></div>

<a class="index-entry-id" id="index-POSIX-mode-6"></a>
<p>In POSIX mode (see <a class="pxref" href="#Options">Command-Line Options</a>), <code class="command">gawk</code> does not
allow escaped newlines.  Otherwise, it behaves as just described.
</p>
<p>BWK <code class="command">awk</code><a class="footnote" id="DOCF33" href="#FOOT33"><sup>33</sup></a> and BusyBox <code class="command">awk</code>
remove the backslash but leave the newline
intact, as part of the string:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">nawk 'BEGIN { print &quot;hello, \</kbd>
&gt; <kbd class="kbd">world&quot; }'</kbd>
-| hello,
-| world
</pre></div>

<hr>
</div>
<div class="subsubsection-level-extent" id="Nondecimal_002dnumbers">
<div class="nav-panel">
<p>
Next: <a href="#Regexp-Constants" accesskey="n" rel="next">Regular Expression Constants</a>, Previous: <a href="#Scalar-Constants" accesskey="p" rel="prev">Numeric and String Constants</a>, Up: <a href="#Constants" accesskey="u" rel="up">Constant Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Octal-and-Hexadecimal-Numbers"><span>6.1.1.2 Octal and Hexadecimal Numbers<a class="copiable-link" href="#Octal-and-Hexadecimal-Numbers"> &para;</a></span></h4>
<a class="index-entry-id" id="index-octal-numbers"></a>
<a class="index-entry-id" id="index-hexadecimal-numbers"></a>
<a class="index-entry-id" id="index-numbers-octal"></a>
<a class="index-entry-id" id="index-numbers-hexadecimal"></a>

<p>In <code class="command">awk</code>, all numbers are in decimal (i.e., base 10).  Many other
programming languages allow you to specify numbers in other bases, often
octal (base 8) and hexadecimal (base 16).
In octal, the numbers go 0, 1, 2, 3, 4, 5, 6, 7, 10, 11, 12, and so on.
Just as &lsquo;<samp class="samp">11</samp>&rsquo; in decimal is 1 times 10 plus 1, so
&lsquo;<samp class="samp">11</samp>&rsquo; in octal is 1 times 8 plus 1. This equals 9 in decimal.
In hexadecimal, there are 16 digits. Because the everyday decimal
number system only has ten digits (&lsquo;<samp class="samp">0</samp>&rsquo;&ndash;&lsquo;<samp class="samp">9</samp>&rsquo;), the letters
&lsquo;<samp class="samp">a</samp>&rsquo; through &lsquo;<samp class="samp">f</samp>&rsquo; represent the rest.
(Case in the letters is usually irrelevant; hexadecimal &lsquo;<samp class="samp">a</samp>&rsquo; and &lsquo;<samp class="samp">A</samp>&rsquo;
have the same value.)
Thus, &lsquo;<samp class="samp">11</samp>&rsquo; in
hexadecimal is 1 times 16 plus 1, which equals 17 in decimal.
</p>
<p>Just by looking at plain &lsquo;<samp class="samp">11</samp>&rsquo;, you can&rsquo;t tell what base it&rsquo;s in.
So, in C, C++, and other languages derived from C,
there is a special notation to signify the base.
Octal numbers start with a leading &lsquo;<samp class="samp">0</samp>&rsquo;,
and hexadecimal numbers start with a leading &lsquo;<samp class="samp">0x</samp>&rsquo; or &lsquo;<samp class="samp">0X</samp>&rsquo;:
</p>
<dl class="table">
<dt><code class="code">11</code></dt>
<dd><p>Decimal value 11
</p>
</dd>
<dt><code class="code">011</code></dt>
<dd><p>Octal 11, decimal value 9
</p>
</dd>
<dt><code class="code">0x11</code></dt>
<dd><p>Hexadecimal 11, decimal value 17
</p></dd>
</dl>

<p>This example shows the difference:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { printf &quot;%d, %d, %d\n&quot;, 011, 11, 0x11 }'</kbd>
-| 9, 11, 17
</pre></div>

<p>Being able to use octal and hexadecimal constants in your programs is most
useful when working with data that cannot be represented conveniently as
characters or as regular numbers, such as binary data of various sorts.
</p>
<a class="index-entry-id" id="index-gawk-octal-numbers-and"></a>
<a class="index-entry-id" id="index-gawk-hexadecimal-numbers-and"></a>
<p><code class="command">gawk</code> allows the use of octal and hexadecimal
constants in your program text.  However, such numbers in the input data
are not treated differently; doing so by default would break old
programs.
(If you really need to do this, use the <samp class="option">--non-decimal-data</samp>
command-line option;
see <a class="pxref" href="#Nondecimal-Data">Allowing Nondecimal Input Data</a>.)
If you have octal or hexadecimal data,
you can use the <code class="code">strtonum()</code> function
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>)
to convert the data into a number.
Most of the time, you will want to use octal or hexadecimal constants
when working with the built-in bit-manipulation functions;
see <a class="ref" href="#Bitwise-Functions">Bit-Manipulation Functions</a>
for more information.
</p>
<p>Unlike in some early C implementations, &lsquo;<samp class="samp">8</samp>&rsquo; and &lsquo;<samp class="samp">9</samp>&rsquo; are not
valid in octal constants.  For example, <code class="command">gawk</code> treats &lsquo;<samp class="samp">018</samp>&rsquo;
as decimal 18:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { print &quot;021 is&quot;, 021 ; print 018 }'</kbd>
-| 021 is 17
-| 18
</pre></div>

<a class="index-entry-id" id="index-compatibility-mode-_0028gawk_0029-octal-numbers"></a>
<a class="index-entry-id" id="index-compatibility-mode-_0028gawk_0029-hexadecimal-numbers"></a>
<p>Octal and hexadecimal source code constants are a <code class="command">gawk</code> extension.
If <code class="command">gawk</code> is in compatibility mode
(see <a class="pxref" href="#Options">Command-Line Options</a>),
they are not available.
</p>
<a class="index-entry-id" id="index-sidebar-A-Constant_0027s-Base-Does-Not-Affect-Its-Value"></a>
<table class="cartouche" border="1"><tr><th>
A Constant&rsquo;s Base Does Not Affect Its Value</th></tr><tr><td>

<p>Once a numeric constant has
been converted internally into a number,
<code class="command">gawk</code> no longer remembers
what the original form of the constant was; the internal value is
always used.  This has particular consequences for conversion of
numbers to strings:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { printf &quot;0x11 is &lt;%s&gt;\n&quot;, 0x11 }'</kbd>
-| 0x11 is &lt;17&gt;
</pre></div>
</td></tr></table>

<hr>
</div>
<div class="subsubsection-level-extent" id="Regexp-Constants">
<div class="nav-panel">
<p>
Previous: <a href="#Nondecimal_002dnumbers" accesskey="p" rel="prev">Octal and Hexadecimal Numbers</a>, Up: <a href="#Constants" accesskey="u" rel="up">Constant Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Regular-Expression-Constants"><span>6.1.1.3 Regular Expression Constants<a class="copiable-link" href="#Regular-Expression-Constants"> &para;</a></span></h4>

<a class="index-entry-id" id="index-regexp-constants-1"></a>
<a class="index-entry-id" id="index-_007e-_0028tilde_0029_002c-_007e-operator-3"></a>
<a class="index-entry-id" id="index-tilde-_0028_007e_0029_002c-_007e-operator-3"></a>
<a class="index-entry-id" id="index-_0021-_0028exclamation-point_0029-_0021_007e-operator-3"></a>
<a class="index-entry-id" id="index-exclamation-point-_0028_0021_0029-_0021_007e-operator-3"></a>
<p>A <em class="dfn">regexp constant</em> is a regular expression description enclosed in
slashes, such as <code class="code">/^beginning&nbsp;and&nbsp;end$/<!-- /@w --></code>.  Most regexps used in
<code class="command">awk</code> programs are constant, but the &lsquo;<samp class="samp">~</samp>&rsquo; and &lsquo;<samp class="samp">!~</samp>&rsquo;
matching operators can also match computed or dynamic regexps
(which are typically just ordinary strings or variables that contain a regexp,
but could be more complex expressions).
</p>
<hr>
</div>
</div>
<div class="subsection-level-extent" id="Using-Constant-Regexps">
<div class="nav-panel">
<p>
Next: <a href="#Variables" accesskey="n" rel="next">Variables</a>, Previous: <a href="#Constants" accesskey="p" rel="prev">Constant Expressions</a>, Up: <a href="#Values" accesskey="u" rel="up">Constants, Variables, and Conversions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Using-Regular-Expression-Constants"><span>6.1.2 Using Regular Expression Constants<a class="copiable-link" href="#Using-Regular-Expression-Constants"> &para;</a></span></h4>

<p>Regular expression constants consist of text describing
a regular expression enclosed in slashes (such as <code class="code">/the +answer/</code>).
This section describes how such constants work in
POSIX <code class="command">awk</code> and <code class="command">gawk</code>, and then goes on to describe
<em class="dfn">strongly typed regexp constants</em>, which are a <code class="command">gawk</code> extension.
</p>

<ul class="mini-toc">
<li><a href="#Standard-Regexp-Constants" accesskey="1">Standard Regular Expression Constants</a></li>
<li><a href="#Strong-Regexp-Constants" accesskey="2">Strongly Typed Regexp Constants</a></li>
</ul>
<hr>
<div class="subsubsection-level-extent" id="Standard-Regexp-Constants">
<div class="nav-panel">
<p>
Next: <a href="#Strong-Regexp-Constants" accesskey="n" rel="next">Strongly Typed Regexp Constants</a>, Up: <a href="#Using-Constant-Regexps" accesskey="u" rel="up">Using Regular Expression Constants</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Standard-Regular-Expression-Constants"><span>6.1.2.1 Standard Regular Expression Constants<a class="copiable-link" href="#Standard-Regular-Expression-Constants"> &para;</a></span></h4>

<a class="index-entry-id" id="index-dark-corner-regexp-constants"></a>
<p>When used on the righthand side of the &lsquo;<samp class="samp">~</samp>&rsquo; or &lsquo;<samp class="samp">!~</samp>&rsquo;
operators, a regexp constant merely stands for the regexp that is to be
matched.
However, regexp constants (such as <code class="code">/foo/</code>) may be used like simple expressions.
When a
regexp constant appears by itself, it has the same meaning as if it appeared
in a pattern (i.e., &lsquo;<samp class="samp">($0 ~ /foo/)</samp>&rsquo;).
(d.c.)
See <a class="xref" href="#Expression-Patterns">Expressions as Patterns</a>.
This means that the following two code segments:
</p>
<div class="example">
<pre class="example-preformatted">if ($0 ~ /barfly/ || $0 ~ /camelot/)
    print &quot;found&quot;
</pre></div>

<p>and:
</p>
<div class="example">
<pre class="example-preformatted">if (/barfly/ || /camelot/)
    print &quot;found&quot;
</pre></div>

<p>are exactly equivalent.
One rather bizarre consequence of this rule is that the following
Boolean expression is valid, but does not do what its author probably
intended:
</p>
<div class="example">
<pre class="example-preformatted"># Note that /foo/ is on the left of the ~
if (/foo/ ~ $1) print &quot;found foo&quot;
</pre></div>

<a class="index-entry-id" id="index-gawk-regexp-constants-and"></a>
<a class="index-entry-id" id="index-regexp-constants-in-gawk"></a>
<p>This code is &ldquo;obviously&rdquo; testing <code class="code">$1</code> for a match against the regexp
<code class="code">/foo/</code>.  But in fact, the expression &lsquo;<samp class="samp">/foo/ ~ $1</samp>&rsquo; really means
&lsquo;<samp class="samp">($0 ~ /foo/) ~ $1</samp>&rsquo;.  In other words, first match the input record
against the regexp <code class="code">/foo/</code>.  The result is either zero or one,
depending upon the success or failure of the match.  That result
is then matched against the first field in the record.
Because it is unlikely that you would ever really want to make this kind of
test, <code class="command">gawk</code> issues a warning when it sees this construct in
a program.
Another consequence of this rule is that the assignment statement:
</p>
<div class="example">
<pre class="example-preformatted">matches = /foo/
</pre></div>

<p>assigns either zero or one to the variable <code class="code">matches</code>, depending
upon the contents of the current input record.
</p>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-regexp-constants"></a>
<a class="index-entry-id" id="index-dark-corner-regexp-constants-as-arguments-to-user_002ddefined-functions"></a>
<a class="index-entry-id" id="index-gensub_0028_0029-function-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-sub_0028_0029-function"></a>
<a class="index-entry-id" id="index-gsub_0028_0029-function"></a>
<p>Constant regular expressions are also used as the first argument for
the <code class="code">gensub()</code>, <code class="code">sub()</code>, and <code class="code">gsub()</code> functions, as the
second argument of the <code class="code">match()</code> function,
and as the third argument of the <code class="code">split()</code> and <code class="code">patsplit()</code> functions
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
Modern implementations of <code class="command">awk</code>, including <code class="command">gawk</code>, allow
the third argument of <code class="code">split()</code> to be a regexp constant, but some
older implementations do not.
(d.c.)
Because some built-in functions accept regexp constants as arguments,
confusion can arise when attempting to use regexp constants as arguments
to user-defined functions (see <a class="pxref" href="#User_002ddefined">User-Defined Functions</a>).  For example:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">function mysub(pat, repl, str, global)
{
    if (global)
        gsub(pat, repl, str)
    else
        sub(pat, repl, str)
    return str
}
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">{
    ...
    text = &quot;hi! hi yourself!&quot;
    mysub(/hi/, &quot;howdy&quot;, text, 1)
    ...
}
</pre></div></div>

<p>In this example, the programmer wants to pass a regexp constant to the
user-defined function <code class="code">mysub()</code>, which in turn passes it on to
either <code class="code">sub()</code> or <code class="code">gsub()</code>.  However, what really happens is that
the <code class="code">pat</code> parameter is assigned a value of either one or zero, depending upon whether
or not <code class="code">$0</code> matches <code class="code">/hi/</code>.
<code class="command">gawk</code> issues a warning when it sees a regexp constant used as
a parameter to a user-defined function, because passing a truth value in
this way is probably not what was intended.
</p>
<hr>
</div>
<div class="subsubsection-level-extent" id="Strong-Regexp-Constants">
<div class="nav-panel">
<p>
Previous: <a href="#Standard-Regexp-Constants" accesskey="p" rel="prev">Standard Regular Expression Constants</a>, Up: <a href="#Using-Constant-Regexps" accesskey="u" rel="up">Using Regular Expression Constants</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Strongly-Typed-Regexp-Constants"><span>6.1.2.2 Strongly Typed Regexp Constants<a class="copiable-link" href="#Strongly-Typed-Regexp-Constants"> &para;</a></span></h4>

<p>This section describes a <code class="command">gawk</code>-specific feature.
</p>
<p>As we saw in the previous section,
regexp constants (<code class="code">/&hellip;/</code>) hold a strange position in the
<code class="command">awk</code> language. In most contexts, they act like an expression:
&lsquo;<samp class="samp">$0 ~ /&hellip;/</samp>&rsquo;. In other contexts, they denote only a regexp to
be matched. In no case are they really a &ldquo;first class citizen&rdquo; of the
language. That is, you cannot define a scalar variable whose type is
&ldquo;regexp&rdquo; in the same sense that you can define a variable to be a
number or a string:
</p>
<div class="example">
<pre class="example-preformatted">num = 42        <i class="i">Numeric variable</i>
str = &quot;hi&quot;      <i class="i">String variable</i>
re = /foo/      <i class="i">Wrong!</i> re <i class="i">is the result of</i> $0 ~ /foo/
</pre></div>

<p>For a number of more advanced use cases,
it would be nice to have regexp constants that
are <em class="dfn">strongly typed</em>; in other words, that denote a regexp useful
for matching, and not an expression.
</p>
<a class="index-entry-id" id="index-values-regexp"></a>
<p><code class="command">gawk</code> provides this feature.  A strongly typed regexp constant
looks almost like a regular regexp constant, except that it is preceded
by an &lsquo;<samp class="samp">@</samp>&rsquo; sign:
</p>
<div class="example">
<pre class="example-preformatted">re = @/foo/     <i class="i">Regexp variable</i>
</pre></div>

<p>Strongly typed regexp constants <em class="emph">cannot</em> be used everywhere that a
regular regexp constant can, because this would make the language even more
confusing.  Instead, you may use them only in certain contexts:
</p>
<ul class="itemize mark-bullet">
<li>On the righthand side of the &lsquo;<samp class="samp">~</samp>&rsquo; and &lsquo;<samp class="samp">!~</samp>&rsquo; operators: &lsquo;<samp class="samp">some_var ~ @/foo/</samp>&rsquo;
(see <a class="pxref" href="#Regexp-Usage">How to Use Regular Expressions</a>).

</li><li>In the <code class="code">case</code> part of a <code class="code">switch</code> statement
(see <a class="pxref" href="#Switch-Statement">The <code class="code">switch</code> Statement</a>).

</li><li>As an argument to one of the built-in functions that accept regexp constants:
<code class="code">gensub()</code>,
<code class="code">gsub()</code>,
<code class="code">match()</code>,
<code class="code">patsplit()</code>,
<code class="code">split()</code>,
and
<code class="code">sub()</code>
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).

</li><li>As a parameter in a call to a user-defined function
(see <a class="pxref" href="#User_002ddefined">User-Defined Functions</a>).

</li><li>As the return value of a user-defined function.

</li><li>On the righthand side of an assignment to a variable: &lsquo;<samp class="samp">some_var = @/foo/</samp>&rsquo;.
In this case, the type of <code class="code">some_var</code> is regexp. Additionally, <code class="code">some_var</code>
can be used with &lsquo;<samp class="samp">~</samp>&rsquo; and &lsquo;<samp class="samp">!~</samp>&rsquo;, passed to one of the built-in functions
listed above, or passed as a parameter to a user-defined function.
</li></ul>

<p>You may use the <samp class="option">-v</samp> option (see <a class="pxref" href="#Options">Command-Line Options</a>) to assign a
strongly-typed regexp constant to a variable on the command line, like so:
</p>
<div class="example">
<pre class="example-preformatted">gawk -v pattern='@/something(interesting)+/' ...
</pre></div>

<p>You may also make such assignments as regular command-line arguments
(see <a class="pxref" href="#Other-Arguments">Other Command-Line Arguments</a>).
</p>
<p>You may use the <code class="code">typeof()</code> built-in function
(see <a class="pxref" href="#Type-Functions">Getting Type Information</a>)
to determine if a variable or function parameter is
a regexp variable.
</p>
<p>The true power of this feature comes from the ability to create variables that
have regexp type. Such variables can be passed on to user-defined functions,
without the confusing aspects of computed regular expressions created from
strings or string constants. They may also be passed through indirect function
calls (see <a class="pxref" href="#Indirect-Calls">Indirect Function Calls</a>)
and on to the built-in functions that accept regexp constants.
</p>
<p>When used in numeric conversions, strongly typed regexp variables convert
to zero. When used in string conversions, they convert to the string
value of the original regexp text.
</p>
<p>There is an additional, interesting corner case. When used as the third
argument to <code class="code">sub()</code> or <code class="code">gsub()</code>, they retain their type.  Thus,
if you have something like this:
</p>
<div class="example">
<pre class="example-preformatted">re = @/don't panic/
sub(/don't/, &quot;do&quot;, re)
print typeof(re), re
</pre></div>

<p>then <code class="code">re</code> retains its type, but now attempts to match the string
&lsquo;<samp class="samp">do panic</samp>&rsquo;.  This provides a (very indirect) way to create regexp-typed
variables at runtime.
</p>
<hr>
</div>
</div>
<div class="subsection-level-extent" id="Variables">
<div class="nav-panel">
<p>
Next: <a href="#Conversion" accesskey="n" rel="next">Conversion of Strings and Numbers</a>, Previous: <a href="#Using-Constant-Regexps" accesskey="p" rel="prev">Using Regular Expression Constants</a>, Up: <a href="#Values" accesskey="u" rel="up">Constants, Variables, and Conversions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Variables-1"><span>6.1.3 Variables<a class="copiable-link" href="#Variables-1"> &para;</a></span></h4>

<a class="index-entry-id" id="index-variables-user_002ddefined"></a>
<a class="index-entry-id" id="index-user_002ddefined-variables"></a>
<p><em class="dfn">Variables</em> are ways of storing values at one point in your program for
use later in another part of your program.  They can be manipulated
entirely within the program text, and they can also be assigned values
on the <code class="command">awk</code> command line.
</p>

<ul class="mini-toc">
<li><a href="#Using-Variables" accesskey="1">Using Variables in a Program</a></li>
<li><a href="#Assignment-Options" accesskey="2">Assigning Variables on the Command Line</a></li>
</ul>
<hr>
<div class="subsubsection-level-extent" id="Using-Variables">
<div class="nav-panel">
<p>
Next: <a href="#Assignment-Options" accesskey="n" rel="next">Assigning Variables on the Command Line</a>, Up: <a href="#Variables" accesskey="u" rel="up">Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Using-Variables-in-a-Program"><span>6.1.3.1 Using Variables in a Program<a class="copiable-link" href="#Using-Variables-in-a-Program"> &para;</a></span></h4>

<p>Variables let you give names to values and refer to them later.  Variables
have already been used in many of the examples.  The name of a variable
must be a sequence of letters, digits, or underscores, and it may not begin
with a digit.
Here, a <em class="dfn">letter</em> is any one of the 52 upper- and lowercase
English letters.  Other characters that may be defined as letters
in non-English locales are not valid in variable names.
Case is significant in variable names; <code class="code">a</code> and <code class="code">A</code>
are distinct variables.
</p>
<p>A variable name is a valid expression by itself; it represents the
variable&rsquo;s current value.  Variables are given new values with
<em class="dfn">assignment operators</em>, <em class="dfn">increment operators</em>, and
<em class="dfn">decrement operators</em>
(see <a class="pxref" href="#Assignment-Ops">Assignment Expressions</a>).
In addition, the <code class="code">sub()</code> and <code class="code">gsub()</code> functions can
change a variable&rsquo;s value, and the <code class="code">match()</code>, <code class="code">split()</code>,
and <code class="code">patsplit()</code> functions can change the contents of their
array parameters (see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
</p>
<a class="index-entry-id" id="index-variables-built_002din"></a>
<a class="index-entry-id" id="index-variables-initializing"></a>
<p>A few variables have special built-in meanings, such as <code class="code">FS</code> (the
field separator) and <code class="code">NF</code> (the number of fields in the current input
record).  See <a class="xref" href="#Built_002din-Variables">Predefined Variables</a> for a list of the predefined variables.
These predefined variables can be used and assigned just like all other
variables, but their values are also used or changed automatically by
<code class="command">awk</code>.  All predefined variables&rsquo; names are entirely uppercase.
</p>
<p>Variables in <code class="command">awk</code> can be assigned either numeric or string values.
The kind of value a variable holds can change over the life of a program.
By default, variables are initialized to the empty string, which
is zero if converted to a number.  There is no need to explicitly
initialize a variable in <code class="command">awk</code>,
which is what you would do in C and in most other traditional languages.
</p>
<hr>
</div>
<div class="subsubsection-level-extent" id="Assignment-Options">
<div class="nav-panel">
<p>
Previous: <a href="#Using-Variables" accesskey="p" rel="prev">Using Variables in a Program</a>, Up: <a href="#Variables" accesskey="u" rel="up">Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Assigning-Variables-on-the-Command-Line"><span>6.1.3.2 Assigning Variables on the Command Line<a class="copiable-link" href="#Assigning-Variables-on-the-Command-Line"> &para;</a></span></h4>
<a class="index-entry-id" id="index-variables-assigning-on-command-line"></a>
<a class="index-entry-id" id="index-command-line-variables_002c-assigning-on"></a>

<p>Any <code class="command">awk</code> variable can be set by including a <em class="dfn">variable assignment</em>
among the arguments on the command line when <code class="command">awk</code> is invoked
(see <a class="pxref" href="#Other-Arguments">Other Command-Line Arguments</a>).
Such an assignment has the following form:
</p>
<div class="example">
<pre class="example-preformatted"><var class="var">variable</var>=<var class="var">text</var>
</pre></div>

<a class="index-entry-id" id="index-_002dv-option-1"></a>
<p>With it, a variable is set either at the beginning of the
<code class="command">awk</code> run or in between input files.
When the assignment is preceded with the <samp class="option">-v</samp> option,
as in the following:
</p>
<div class="example">
<pre class="example-preformatted">-v <var class="var">variable</var>=<var class="var">text</var>
</pre></div>

<p>the variable is set at the very beginning, even before the
<code class="code">BEGIN</code> rules execute.  The <samp class="option">-v</samp> option and its assignment
must precede all the file name arguments, as well as the program text.
(See <a class="xref" href="#Options">Command-Line Options</a> for more information about
the <samp class="option">-v</samp> option.)
Otherwise, the variable assignment is performed at a time determined by
its position among the input file arguments&mdash;after the processing of the
preceding input file argument.  For example:
</p>
<div class="example">
<pre class="example-preformatted">awk '{ print $n }' n=4 inventory-shipped n=2 mail-list
</pre></div>

<p>prints the value of field number <code class="code">n</code> for all input records.  Before
the first file is read, the command line sets the variable <code class="code">n</code>
equal to four.  This causes the fourth field to be printed in lines from
<samp class="file">inventory-shipped</samp>.  After the first file has finished,
but before the second file is started, <code class="code">n</code> is set to two, so that the
second field is printed in lines from <samp class="file">mail-list</samp>:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '{ print $n }' n=4 inventory-shipped n=2 mail-list</kbd>
-| 15
-| 24
...
-| 555-5553
-| 555-3412
...
</pre></div>

<a class="index-entry-id" id="index-dark-corner-command_002dline-arguments"></a>
<p>Command-line arguments are made available for explicit examination by
the <code class="command">awk</code> program in the <code class="code">ARGV</code> array
(see <a class="pxref" href="#ARGC-and-ARGV">Using <code class="code">ARGC</code> and <code class="code">ARGV</code></a>).
<code class="command">awk</code> processes the values of command-line assignments for escape
sequences
(see <a class="pxref" href="#Escape-Sequences">Escape Sequences</a>).
(d.c.)
</p>
<p>Normally, variables assigned on the command line (with or without the
<samp class="option">-v</samp> option) are treated as strings.  When such variables are
used as numbers, <code class="command">awk</code>&rsquo;s normal automatic conversion of strings
to numbers takes place, and everything &ldquo;just works.&rdquo;
</p>
<p>However, <code class="command">gawk</code> supports variables whose types are &ldquo;regexp&rdquo;.
You can assign variables of this type using the following syntax:
</p>
<div class="example">
<pre class="example-preformatted">gawk -v 're1=@/foo|bar/' '...' /path/to/file1 're2=@/baz|quux/' /path/to/file2
</pre></div>

<p>Strongly typed regexps are an advanced feature (see <a class="pxref" href="#Strong-Regexp-Constants">Strongly Typed Regexp Constants</a>).
We mention them here only for completeness.
</p>
<hr>
</div>
</div>
<div class="subsection-level-extent" id="Conversion">
<div class="nav-panel">
<p>
Previous: <a href="#Variables" accesskey="p" rel="prev">Variables</a>, Up: <a href="#Values" accesskey="u" rel="up">Constants, Variables, and Conversions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Conversion-of-Strings-and-Numbers"><span>6.1.4 Conversion of Strings and Numbers<a class="copiable-link" href="#Conversion-of-Strings-and-Numbers"> &para;</a></span></h4>

<p>Number-to-string and string-to-number conversion are generally
straightforward.  There can be subtleties to be aware of;
this section discusses this important facet of <code class="command">awk</code>.
</p>

<ul class="mini-toc">
<li><a href="#Strings-And-Numbers" accesskey="1">How <code class="command">awk</code> Converts Between Strings and Numbers</a></li>
<li><a href="#Locale-influences-conversions" accesskey="2">Locales Can Influence Conversion</a></li>
</ul>
<hr>
<div class="subsubsection-level-extent" id="Strings-And-Numbers">
<div class="nav-panel">
<p>
Next: <a href="#Locale-influences-conversions" accesskey="n" rel="next">Locales Can Influence Conversion</a>, Up: <a href="#Conversion" accesskey="u" rel="up">Conversion of Strings and Numbers</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="How-awk-Converts-Between-Strings-and-Numbers"><span>6.1.4.1 How <code class="command">awk</code> Converts Between Strings and Numbers<a class="copiable-link" href="#How-awk-Converts-Between-Strings-and-Numbers"> &para;</a></span></h4>

<a class="index-entry-id" id="index-converting-string-to-numbers"></a>
<a class="index-entry-id" id="index-strings-converting"></a>
<a class="index-entry-id" id="index-numbers-converting"></a>
<a class="index-entry-id" id="index-converting-numbers-to-strings"></a>
<p>Strings are converted to numbers and numbers are converted to strings, if the context
of the <code class="command">awk</code> program demands it.  For example, if the value of
either <code class="code">foo</code> or <code class="code">bar</code> in the expression &lsquo;<samp class="samp">foo + bar</samp>&rsquo;
happens to be a string, it is converted to a number before the addition
is performed.  If numeric values appear in string concatenation, they
are converted to strings.  Consider the following:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">two = 2; three = 3
print (two three) + 4
</pre></div></div>

<p>This prints the (numeric) value 27.  The numeric values of
the variables <code class="code">two</code> and <code class="code">three</code> are converted to strings and
concatenated together.  The resulting string is converted back to the
number 23, to which 4 is then added.
</p>
<a class="index-entry-id" id="index-null-strings-converting-numbers-to-strings"></a>
<a class="index-entry-id" id="index-type-conversion"></a>
<p>If, for some reason, you need to force a number to be converted to a
string, concatenate that number with the empty string, <code class="code">&quot;&quot;</code>.
To force a string to be converted to a number, add zero to that string.
A string is converted to a number by interpreting any numeric prefix
of the string as numerals:
<code class="code">&quot;2.5&quot;</code> converts to 2.5, <code class="code">&quot;1e3&quot;</code> converts to 1,000, and <code class="code">&quot;25fix&quot;</code>
has a numeric value of 25.
Strings that can&rsquo;t be interpreted as valid numbers convert to zero.
</p>
<a class="index-entry-id" id="index-CONVFMT-variable"></a>
<p>The exact manner in which numbers are converted into strings is controlled
by the <code class="command">awk</code> predefined variable <code class="code">CONVFMT</code> (see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>).
Numbers are converted using the <code class="code">sprintf()</code> function
with <code class="code">CONVFMT</code> as the format
specifier
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
</p>
<p><code class="code">CONVFMT</code>&rsquo;s default value is <code class="code">&quot;%.6g&quot;</code>, which creates a value with
at most six significant digits.  For some applications, you might want to
change it to specify more precision.
On most modern machines,
17 digits is usually enough to capture a floating-point number&rsquo;s
value exactly.<a class="footnote" id="DOCF34" href="#FOOT34"><sup>34</sup></a>
</p>
<a class="index-entry-id" id="index-dark-corner-CONVFMT-variable"></a>
<p>Strange results can occur if you set <code class="code">CONVFMT</code> to a string that doesn&rsquo;t
tell <code class="code">sprintf()</code> how to format floating-point numbers in a useful way.
For example, if you forget the &lsquo;<samp class="samp">%</samp>&rsquo; in the format, <code class="command">awk</code> converts
all numbers to the same constant string.
</p>
<p>As a special case, if a number is an integer, then the result of converting
it to a string is <em class="emph">always</em> an integer, no matter what the value of
<code class="code">CONVFMT</code> may be.  Given the following code fragment:
</p>
<div class="example">
<pre class="example-preformatted">CONVFMT = &quot;%2.2f&quot;
a = 12
b = a &quot;&quot;
</pre></div>

<p><code class="code">b</code> has the value <code class="code">&quot;12&quot;</code>, not <code class="code">&quot;12.00&quot;</code>.
(d.c.)
</p>
<a class="index-entry-id" id="index-sidebar-Pre_002dPOSIX-awk-Used-OFMT-for-String-Conversion"></a>
<table class="cartouche" border="1"><tr><th>
Pre-POSIX <code class="command">awk</code> Used <code class="code">OFMT</code> for String Conversion</th></tr><tr><td>
<a class="index-entry-id" id="index-POSIX-awk-OFMT-variable-and-1"></a>
<a class="index-entry-id" id="index-OFMT-variable-1"></a>
<a class="index-entry-id" id="index-portability-new-awk-vs_002e-old-awk"></a>
<a class="index-entry-id" id="index-awk-new-vs_002e-old-OFMT-variable"></a>
<p>Prior to the POSIX standard, <code class="command">awk</code> used the value
of <code class="code">OFMT</code> for converting numbers to strings.  <code class="code">OFMT</code>
specifies the output format to use when printing numbers with <code class="code">print</code>.
<code class="code">CONVFMT</code> was introduced in order to separate the semantics of
conversion from the semantics of printing.  Both <code class="code">CONVFMT</code> and
<code class="code">OFMT</code> have the same default value: <code class="code">&quot;%.6g&quot;</code>.  In the vast majority
of cases, old <code class="command">awk</code> programs do not change their behavior.
See <a class="xref" href="#Print">The <code class="code">print</code> Statement</a> for more information on the <code class="code">print</code> statement.
</p></td></tr></table>

<hr>
</div>
<div class="subsubsection-level-extent" id="Locale-influences-conversions">
<div class="nav-panel">
<p>
Previous: <a href="#Strings-And-Numbers" accesskey="p" rel="prev">How <code class="command">awk</code> Converts Between Strings and Numbers</a>, Up: <a href="#Conversion" accesskey="u" rel="up">Conversion of Strings and Numbers</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Locales-Can-Influence-Conversion"><span>6.1.4.2 Locales Can Influence Conversion<a class="copiable-link" href="#Locales-Can-Influence-Conversion"> &para;</a></span></h4>

<p>Where you are can matter when it comes to converting between numbers and
strings.  The local character set and language&mdash;the <em class="dfn">locale</em>&mdash;can
affect numeric formats.  In particular, for <code class="command">awk</code> programs,
it affects the decimal point character and the thousands-separator
character.  The <code class="code">&quot;C&quot;</code> locale, and most English-language locales,
use the period character (&lsquo;<samp class="samp">.</samp>&rsquo;) as the decimal point and don&rsquo;t
have a thousands separator.  However, many (if not most) European and
non-English locales use the comma (&lsquo;<samp class="samp">,</samp>&rsquo;) as the decimal point
character. European locales often use either a space or a period as
the thousands separator, if they have one.
</p>
<a class="index-entry-id" id="index-dark-corner-locale_0027s-decimal-point-character"></a>
<p>The POSIX standard says that <code class="command">awk</code> always uses the period as the decimal
point when reading the <code class="command">awk</code> program source code, and for
command-line variable assignments (see <a class="pxref" href="#Other-Arguments">Other Command-Line Arguments</a>).  However,
when interpreting input data, for <code class="code">print</code> and <code class="code">printf</code> output,
and for number-to-string conversion, the local decimal point character
is used.  (d.c.) In all cases, numbers in source code and
in input data cannot have a thousands separator.  Here are some examples
indicating the difference in behavior, on a GNU/Linux system:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">export POSIXLY_CORRECT=1</kbd>                        <i class="i">Force POSIX behavior</i>
$ <kbd class="kbd">gawk 'BEGIN { printf &quot;%g\n&quot;, 3.1415927 }'</kbd>
-| 3.14159
$ <kbd class="kbd">LC_ALL=en_DK.utf-8 gawk 'BEGIN { printf &quot;%g\n&quot;, 3.1415927 }'</kbd>
-| 3,14159
$ <kbd class="kbd">echo 4,321 | gawk '{ print $1 + 1 }'</kbd>
-| 5
$ <kbd class="kbd">echo 4,321 | LC_ALL=en_DK.utf-8 gawk '{ print $1 + 1 }'</kbd>
-| 5,321
</pre></div>

<p>The <code class="code">en_DK.utf-8</code> locale is for English in Denmark, where the comma acts as
the decimal point separator.  In the normal <code class="code">&quot;C&quot;</code> locale, <code class="command">gawk</code>
treats &lsquo;<samp class="samp">4,321</samp>&rsquo; as 4, while in the Danish locale, it&rsquo;s treated
as the full number including the fractional part, 4.321.
</p>
<a class="index-entry-id" id="index-POSIX-mode-7"></a>
<a class="index-entry-id" id="index-POSIXLY_005fCORRECT-environment-variable-3"></a>
<a class="index-entry-id" id="index-environment-variables-POSIXLY_005fCORRECT-3"></a>
<p>Some earlier versions of <code class="command">gawk</code> fully complied with this aspect
of the standard.  However, many users in non-English locales complained
about this behavior, because their data used a period as the decimal
point, so the default behavior was restored to use a period as the
decimal point character.  You can use the <samp class="option">--use-lc-numeric</samp>
option (see <a class="pxref" href="#Options">Command-Line Options</a>) to force <code class="command">gawk</code> to use the locale&rsquo;s
decimal point character.  (<code class="command">gawk</code> also uses the locale&rsquo;s decimal
point character when in POSIX mode, either via <samp class="option">--posix</samp> or the
<code class="env">POSIXLY_CORRECT</code> environment variable, as shown previously.)
</p>
<p><a class="ref" href="#table_002dlocale_002daffects">Table 6.1</a> describes the cases in which the locale&rsquo;s decimal
point character is used and when a period is used. Some of these
features have not been described yet.
</p>
<div class="float" id="table_002dlocale_002daffects">
<table class="multitable">
<thead><tr><th width="15%">Feature</th><th width="20%">Default</th><th width="45%"><samp class="option">--posix</samp> or <samp class="option">--use-lc-numeric</samp></th></tr></thead>
<tbody><tr><td width="15%"><code class="code">%'g</code></td><td width="20%">Use locale</td><td width="45%">Use locale</td></tr>
<tr><td width="15%"><code class="code">%g</code></td><td width="20%">Use period</td><td width="45%">Use locale</td></tr>
<tr><td width="15%">Input</td><td width="20%">Use period</td><td width="45%">Use locale</td></tr>
<tr><td width="15%"><code class="code">strtonum()</code></td><td width="20%">Use period</td><td width="45%">Use locale</td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 6.1: </strong>Locale decimal point versus a period</p></div></div>
<p>Finally, modern-day formal standards and the IEEE standard floating-point
representation can have an unusual but important effect on the way
<code class="command">gawk</code> converts some special string values to numbers.  The details
are presented in <a class="ref" href="#POSIX-Floating-Point-Problems">Standards Versus Existing Practice</a>.
</p>
<hr>
</div>
</div>
</div>
<div class="section-level-extent" id="All-Operators">
<div class="nav-panel">
<p>
Next: <a href="#Truth-Values-and-Conditions" accesskey="n" rel="next">Truth Values and Conditions</a>, Previous: <a href="#Values" accesskey="p" rel="prev">Constants, Variables, and Conversions</a>, Up: <a href="#Expressions" accesskey="u" rel="up">Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Operators_003a-Doing-Something-with-Values"><span>6.2 Operators: Doing Something with Values<a class="copiable-link" href="#Operators_003a-Doing-Something-with-Values"> &para;</a></span></h3>

<p>This section introduces the <em class="dfn">operators</em> that make use
of the values provided by constants and variables.
</p>

<ul class="mini-toc">
<li><a href="#Arithmetic-Ops" accesskey="1">Arithmetic Operators</a></li>
<li><a href="#Concatenation" accesskey="2">String Concatenation</a></li>
<li><a href="#Assignment-Ops" accesskey="3">Assignment Expressions</a></li>
<li><a href="#Increment-Ops" accesskey="4">Increment and Decrement Operators</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Arithmetic-Ops">
<div class="nav-panel">
<p>
Next: <a href="#Concatenation" accesskey="n" rel="next">String Concatenation</a>, Up: <a href="#All-Operators" accesskey="u" rel="up">Operators: Doing Something with Values</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Arithmetic-Operators"><span>6.2.1 Arithmetic Operators<a class="copiable-link" href="#Arithmetic-Operators"> &para;</a></span></h4>
<a class="index-entry-id" id="index-arithmetic-operators"></a>
<a class="index-entry-id" id="index-operators-arithmetic"></a>

<p>The <code class="command">awk</code> language uses the common arithmetic operators when
evaluating expressions.  All of these arithmetic operators follow normal
precedence rules and work as you would expect them to.
</p>
<p>The following example uses a file named <samp class="file">grades</samp>, which contains
a list of student names as well as three test scores per student (it&rsquo;s
a small class):
</p>
<div class="example">
<pre class="example-preformatted">Pat   100 97 58
Sandy  84 72 93
Chris  72 92 89
</pre></div>

<p>This program takes the file <samp class="file">grades</samp> and prints the average
of the scores:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '{ sum = $2 + $3 + $4 ; avg = sum / 3</kbd>
&gt;        <kbd class="kbd">print $1, avg }' grades</kbd>
-| Pat 85
-| Sandy 83
-| Chris 84.3333
</pre></div>

<p>The following list provides the arithmetic operators in <code class="command">awk</code>,
in order from the highest precedence to the lowest:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-common-extensions-_002a_002a-operator"></a>
<a class="index-entry-id" id="index-extensions-common-_002a_002a-operator"></a>
<a class="index-entry-id" id="index-POSIX-awk-arithmetic-operators-and"></a>
</dd>
<dt><code class="code"><var class="var">x</var> ^ <var class="var">y</var></code></dt>
<dt><code class="code"><var class="var">x</var> ** <var class="var">y</var></code></dt>
<dd><p>Exponentiation; <var class="var">x</var> raised to the <var class="var">y</var> power.  &lsquo;<samp class="samp">2 ^ 3</samp>&rsquo; has
the value eight; the character sequence &lsquo;<samp class="samp">**</samp>&rsquo; is equivalent to
&lsquo;<samp class="samp">^</samp>&rsquo;. (c.e.)
</p>
</dd>
<dt><code class="code">- <var class="var">x</var></code></dt>
<dd><p>Negation.
</p>
</dd>
<dt><code class="code">+ <var class="var">x</var></code></dt>
<dd><p>Unary plus; the expression is converted to a number.
</p>
</dd>
<dt><code class="code"><var class="var">x</var> * <var class="var">y</var></code></dt>
<dd><p>Multiplication.
</p>
<a class="index-entry-id" id="index-troubleshooting-division"></a>
</dd>
<dt><a id="index-division"></a><span><code class="code"><var class="var">x</var> / <var class="var">y</var></code><a class="copiable-link" href="#index-division"> &para;</a></span></dt>
<dd><p>Division;  because all numbers in <code class="command">awk</code> are floating-point
numbers, the result is <em class="emph">not</em> rounded to an integer&mdash;&lsquo;<samp class="samp">3 / 4</samp>&rsquo; has
the value 0.75.  (It is a common mistake, especially for C programmers,
to forget that <em class="emph">all</em> numbers in <code class="command">awk</code> are floating point,
and that division of integer-looking constants produces a real number,
not an integer.)
</p>
</dd>
<dt><code class="code"><var class="var">x</var> % <var class="var">y</var></code></dt>
<dd><p>Remainder; further discussion is provided in the text, just
after this list.
</p>
</dd>
<dt><code class="code"><var class="var">x</var> + <var class="var">y</var></code></dt>
<dd><p>Addition.
</p>
</dd>
<dt><code class="code"><var class="var">x</var> - <var class="var">y</var></code></dt>
<dd><p>Subtraction.
</p></dd>
</dl>

<p>Unary plus and minus have the same precedence,
the multiplication operators all have the same precedence, and
addition and subtraction have the same precedence.
</p>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-trunc_002dmod-operation"></a>
<a class="index-entry-id" id="index-trunc_002dmod-operation"></a>
<p>When computing the remainder of &lsquo;<samp class="samp"><var class="var">x</var> % <var class="var">y</var></samp>&rsquo;,
the quotient is rounded toward zero to an integer and
multiplied by <var class="var">y</var>. This result is subtracted from <var class="var">x</var>;
this operation is sometimes known as &ldquo;trunc-mod.&rdquo;  The following
relation always holds:
</p>
<div class="example">
<pre class="example-preformatted">b * int(a / b) + (a % b) == a
</pre></div>

<p>One possibly undesirable effect of this definition of remainder is that
&lsquo;<samp class="samp"><var class="var">x</var> % <var class="var">y</var></samp>&rsquo; is negative if <var class="var">x</var> is negative.  Thus:
</p>
<div class="example">
<pre class="example-preformatted">-17 % 8 = -1
</pre></div>

<p>This definition is compliant with the POSIX standard, which says that the <code class="code">%</code>
operator produces results equivalent to using the standard C
<code class="code">fmod()</code> function, and that function in turn works as just
described.
</p>
<p>In other <code class="command">awk</code> implementations, the signedness of the remainder
may be machine-dependent.
</p>
<a class="index-entry-id" id="index-portability-_002a_002a-operator-and"></a>
<a class="index-entry-id" id="index-_002a-_0028asterisk_0029-_002a_002a-operator"></a>
<a class="index-entry-id" id="index-asterisk-_0028_002a_0029-_002a_002a-operator"></a>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> The POSIX standard only specifies the use of &lsquo;<samp class="samp">^</samp>&rsquo;
for exponentiation.
For maximum portability, do not use the &lsquo;<samp class="samp">**</samp>&rsquo; operator.
</p></blockquote>

<hr>
</div>
<div class="subsection-level-extent" id="Concatenation">
<div class="nav-panel">
<p>
Next: <a href="#Assignment-Ops" accesskey="n" rel="next">Assignment Expressions</a>, Previous: <a href="#Arithmetic-Ops" accesskey="p" rel="prev">Arithmetic Operators</a>, Up: <a href="#All-Operators" accesskey="u" rel="up">Operators: Doing Something with Values</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="String-Concatenation"><span>6.2.2 String Concatenation<a class="copiable-link" href="#String-Concatenation"> &para;</a></span></h4>
<a class="index-entry-id" id="index-Kernighan_002c-Brian-quotes-3"></a>
<blockquote class="quotation">
<p><i class="i">It seemed like a good idea at the time.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Brian Kernighan</em>
</div>
<a class="index-entry-id" id="index-string-operators"></a>
<a class="index-entry-id" id="index-operators-string"></a>
<a class="index-entry-id" id="index-concatenating"></a>
<p>There is only one string operation: concatenation.  It does not have a
specific operator to represent it.  Instead, concatenation is performed by
writing expressions next to one another, with no operator.  For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '{ print &quot;Field number one: &quot; $1 }' mail-list</kbd>
-| Field number one: Amelia
-| Field number one: Anthony
...
</pre></div>

<p>Without the space in the string constant after the &lsquo;<samp class="samp">:</samp>&rsquo;, the line
runs together.  For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '{ print &quot;Field number one:&quot; $1 }' mail-list</kbd>
-| Field number one:Amelia
-| Field number one:Anthony
...
</pre></div>

<a class="index-entry-id" id="index-troubleshooting-string-concatenation"></a>
<p>Because string concatenation does not have an explicit operator, it is
often necessary to ensure that it happens at the right time by using
parentheses to enclose the items to concatenate.  For example,
you might expect that the
following code fragment concatenates <code class="code">file</code> and <code class="code">name</code>:
</p>
<div class="example">
<pre class="example-preformatted">file = &quot;file&quot;
name = &quot;name&quot;
print &quot;something meaningful&quot; &gt; file name
</pre></div>

<a class="index-entry-id" id="index-Brian-Kernighan_0027s-awk-6"></a>
<a class="index-entry-id" id="index-mawk-utility-2"></a>
<p>This produces a syntax error with some versions of Unix
<code class="command">awk</code>.<a class="footnote" id="DOCF35" href="#FOOT35"><sup>35</sup></a>
It is necessary to use the following:
</p>
<div class="example">
<pre class="example-preformatted">print &quot;something meaningful&quot; &gt; (file name)
</pre></div>

<a class="index-entry-id" id="index-order-of-evaluation_002c-concatenation"></a>
<a class="index-entry-id" id="index-evaluation-order-concatenation"></a>
<a class="index-entry-id" id="index-side-effects"></a>
<p>Parentheses should be used around concatenation in all but the
most common contexts, such as on the righthand side of &lsquo;<samp class="samp">=</samp>&rsquo;.
Be careful about the kinds of expressions used in string concatenation.
In particular, the order of evaluation of expressions used for concatenation
is undefined in the <code class="command">awk</code> language.  Consider this example:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    a = &quot;don't&quot;
    print (a &quot; &quot; (a = &quot;panic&quot;))
}
</pre></div>

<p>It is not defined whether the second assignment to <code class="code">a</code> happens
before or after the value of <code class="code">a</code> is retrieved for producing the
concatenated value.  The result could be either &lsquo;<samp class="samp">don't panic</samp>&rsquo;,
or &lsquo;<samp class="samp">panic panic</samp>&rsquo;.
</p>
<p>The precedence of concatenation, when mixed with other operators, is often
counter-intuitive.  Consider this example:
</p>

<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN { print -12 &quot; &quot; -24 }'</kbd>
-| -12-24
</pre></div>

<p>This &ldquo;obviously&rdquo; is concatenating &minus;12, a space, and &minus;24.
But where did the space disappear to?
The answer lies in the combination of operator precedences and
<code class="command">awk</code>&rsquo;s automatic conversion rules.  To get the desired result,
write the program this way:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN { print -12 &quot; &quot; (-24) }'</kbd>
-| -12 -24
</pre></div>

<p>This forces <code class="command">awk</code> to treat the &lsquo;<samp class="samp">-</samp>&rsquo; on the &lsquo;<samp class="samp">-24</samp>&rsquo; as unary.
Otherwise, it&rsquo;s parsed as follows:
</p>
<div class="display">
<pre class="display-preformatted">    &minus;12 (<code class="code">&quot;&nbsp;&quot;</code> &minus; 24)
&rArr; &minus;12 (0 &minus; 24)
&rArr; &minus;12 (&minus;24)
&rArr; &minus;12&minus;24
</pre></div>

<p>As mentioned earlier,
when mixing concatenation with other operators, <em class="emph">parenthesize</em>.  Otherwise,
you&rsquo;re never quite sure what you&rsquo;ll get.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Assignment-Ops">
<div class="nav-panel">
<p>
Next: <a href="#Increment-Ops" accesskey="n" rel="next">Increment and Decrement Operators</a>, Previous: <a href="#Concatenation" accesskey="p" rel="prev">String Concatenation</a>, Up: <a href="#All-Operators" accesskey="u" rel="up">Operators: Doing Something with Values</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Assignment-Expressions"><span>6.2.3 Assignment Expressions<a class="copiable-link" href="#Assignment-Expressions"> &para;</a></span></h4>
<a class="index-entry-id" id="index-assignment-operators"></a>
<a class="index-entry-id" id="index-operators-assignment"></a>
<a class="index-entry-id" id="index-expressions-assignment"></a>
<a class="index-entry-id" id="index-_003d-_0028equals-sign_0029-_003d-operator"></a>
<a class="index-entry-id" id="index-equals-sign-_0028_003d_0029-_003d-operator"></a>
<p>An <em class="dfn">assignment</em> is an expression that stores a (usually different)
value into a variable.  For example, let&rsquo;s assign the value one to the variable
<code class="code">z</code>:
</p>
<div class="example">
<pre class="example-preformatted">z = 1
</pre></div>

<p>After this expression is executed, the variable <code class="code">z</code> has the value one.
Whatever old value <code class="code">z</code> had before the assignment is forgotten.
</p>
<p>Assignments can also store string values.  For example, the
following stores
the value <code class="code">&quot;this food is good&quot;</code> in the variable <code class="code">message</code>:
</p>
<div class="example">
<pre class="example-preformatted">thing = &quot;food&quot;
predicate = &quot;good&quot;
message = &quot;this &quot; thing &quot; is &quot; predicate
</pre></div>

<a class="index-entry-id" id="index-side-effects-assignment-expressions"></a>
<p>This also illustrates string concatenation.
The &lsquo;<samp class="samp">=</samp>&rsquo; sign is called an <em class="dfn">assignment operator</em>.  It is the
simplest assignment operator because the value of the righthand
operand is stored unchanged.
Most operators (addition, concatenation, and so on) have no effect
except to compute a value.  If the value isn&rsquo;t used, there&rsquo;s no reason to
use the operator.  An assignment operator is different; it does
produce a value, but even if you ignore it, the assignment still
makes itself felt through the alteration of the variable.  We call this
a <em class="dfn">side effect</em>.
</p>
<a class="index-entry-id" id="index-lvalues_002frvalues"></a>
<a class="index-entry-id" id="index-rvalues_002flvalues"></a>
<a class="index-entry-id" id="index-assignment-operators-lvalues_002frvalues"></a>
<a class="index-entry-id" id="index-operators-assignment-1"></a>
<p>The lefthand operand of an assignment need not be a variable
(see <a class="pxref" href="#Variables">Variables</a>); it can also be a field
(see <a class="pxref" href="#Changing-Fields">Changing the Contents of a Field</a>) or
an array element (see <a class="pxref" href="#Arrays">Arrays in <code class="command">awk</code></a>).
These are all called <em class="dfn">lvalues</em>,
which means they can appear on the lefthand side of an assignment operator.
The righthand operand may be any expression; it produces the new value
that the assignment stores in the specified variable, field, or array
element. (Such values are called <em class="dfn">rvalues</em>.)
</p>
<a class="index-entry-id" id="index-variables-types-of"></a>
<p>It is important to note that variables do <em class="emph">not</em> have permanent types.
A variable&rsquo;s type is simply the type of whatever value was last assigned
to it.  In the following program fragment, the variable
<code class="code">foo</code> has a numeric value at first, and a string value later on:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">foo = 1
print foo
</pre></div><div class="group"><pre class="example-preformatted">foo = &quot;bar&quot;
print foo
</pre></div></div>

<p>When the second assignment gives <code class="code">foo</code> a string value, the fact that
it previously had a numeric value is forgotten.
</p>
<p>String values that do not begin with a digit have a numeric value of
zero. After executing the following code, the value of <code class="code">foo</code> is five:
</p>
<div class="example">
<pre class="example-preformatted">foo = &quot;a string&quot;
foo = foo + 5
</pre></div>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> Using a variable as a number and then later as a string
can be confusing and is poor programming style.  The previous two examples
illustrate how <code class="command">awk</code> works, <em class="emph">not</em> how you should write your
programs!
</p></blockquote>

<p>An assignment is an expression, so it has a value&mdash;the same value that
is assigned.  Thus, &lsquo;<samp class="samp">z = 1</samp>&rsquo; is an expression with the value one.
One consequence of this is that you can write multiple assignments together,
such as:
</p>
<div class="example">
<pre class="example-preformatted">x = y = z = 5
</pre></div>

<p>This example stores the value five in all three variables
(<code class="code">x</code>, <code class="code">y</code>, and <code class="code">z</code>).
It does so because the
value of &lsquo;<samp class="samp">z = 5</samp>&rsquo;, which is five, is stored into <code class="code">y</code> and then
the value of &lsquo;<samp class="samp">y = z = 5</samp>&rsquo;, which is five, is stored into <code class="code">x</code>.
</p>
<p>Assignments may be used anywhere an expression is called for.  For
example, it is valid to write &lsquo;<samp class="samp">x != (y = 1)</samp>&rsquo; to set <code class="code">y</code> to one,
and then test whether <code class="code">x</code> equals one.  But this style tends to make
programs hard to read; such nesting of assignments should be avoided,
except perhaps in a one-shot program.
</p>
<a class="index-entry-id" id="index-_002b-_0028plus-sign_0029-_002b_003d-operator"></a>
<a class="index-entry-id" id="index-plus-sign-_0028_002b_0029-_002b_003d-operator"></a>
<p>Aside from &lsquo;<samp class="samp">=</samp>&rsquo;, there are several other assignment operators that
do arithmetic with the old value of the variable.  For example, the
operator &lsquo;<samp class="samp">+=</samp>&rsquo; computes a new value by adding the righthand value
to the old value of the variable.  Thus, the following assignment adds
five to the value of <code class="code">foo</code>:
</p>
<div class="example">
<pre class="example-preformatted">foo += 5
</pre></div>

<p>This is equivalent to the following:
</p>
<div class="example">
<pre class="example-preformatted">foo = foo + 5
</pre></div>

<p>Use whichever makes the meaning of your program clearer.
</p>
<p>There are situations where using &lsquo;<samp class="samp">+=</samp>&rsquo; (or any assignment operator)
is <em class="emph">not</em> the same as simply repeating the lefthand operand in the
righthand expression.  For example:
</p>
<a class="index-entry-id" id="index-Rankin_002c-Pat-1"></a>
<div class="example">
<div class="group"><pre class="example-preformatted"># Thanks to Pat Rankin for this example
BEGIN  {
    foo[rand()] += 5
    for (x in foo)
       print x, foo[x]
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">    bar[rand()] = bar[rand()] + 5
    for (x in bar)
       print x, bar[x]
}
</pre></div></div>

<a class="index-entry-id" id="index-operators-assignment-evaluation-order"></a>
<a class="index-entry-id" id="index-assignment-operators-evaluation-order"></a>
<p>The indices of <code class="code">bar</code> are practically guaranteed to be different, because
<code class="code">rand()</code> returns different values each time it is called.
(Arrays and the <code class="code">rand()</code> function haven&rsquo;t been covered yet.
See <a class="xref" href="#Arrays">Arrays in <code class="command">awk</code></a>,
and
see <a class="pxref" href="#Numeric-Functions">Numeric Functions</a>
for more information.)
This example illustrates an important fact about assignment
operators: the lefthand expression is only evaluated <em class="emph">once</em>.
</p>
<p>It is up to the implementation as to which expression is evaluated
first, the lefthand or the righthand.
Consider this example:
</p>
<div class="example">
<pre class="example-preformatted">i = 1
a[i += 2] = i + 1
</pre></div>

<p>The value of <code class="code">a[3]</code> could be either two or four.
</p>
<p><a class="ref" href="#table_002dassign_002dops">Table 6.2</a> lists the arithmetic assignment operators.  In each
case, the righthand operand is an expression whose value is converted
to a number.
</p>
<a class="index-entry-id" id="index-_002d-_0028hyphen_0029-_002d_003d-operator"></a>
<a class="index-entry-id" id="index-hyphen-_0028_002d_0029-_002d_003d-operator"></a>
<a class="index-entry-id" id="index-_002a-_0028asterisk_0029-_002a_003d-operator"></a>
<a class="index-entry-id" id="index-asterisk-_0028_002a_0029-_002a_003d-operator"></a>
<a class="index-entry-id" id="index-_002f-_0028forward-slash_0029-_002f_003d-operator"></a>
<a class="index-entry-id" id="index-forward-slash-_0028_002f_0029-_002f_003d-operator"></a>
<a class="index-entry-id" id="index-_0025-_0028percent-sign_0029-_0025_003d-operator"></a>
<a class="index-entry-id" id="index-percent-sign-_0028_0025_0029-_0025_003d-operator"></a>
<a class="index-entry-id" id="index-_005e-_0028caret_0029-_005e_003d-operator"></a>
<a class="index-entry-id" id="index-caret-_0028_005e_0029-_005e_003d-operator"></a>
<a class="index-entry-id" id="index-_002a-_0028asterisk_0029-_002a_002a_003d-operator"></a>
<a class="index-entry-id" id="index-asterisk-_0028_002a_0029-_002a_002a_003d-operator"></a>
<div class="float" id="table_002dassign_002dops">
<table class="multitable">
<thead><tr><th width="30%">Operator</th><th width="70%">Effect</th></tr></thead>
<tbody><tr><td width="30%"><var class="var">lvalue</var> <code class="code">+=</code> <var class="var">increment</var></td><td width="70%">Add <var class="var">increment</var> to the value of <var class="var">lvalue</var>.</td></tr>
<tr><td width="30%"><var class="var">lvalue</var> <code class="code">-=</code> <var class="var">decrement</var></td><td width="70%">Subtract <var class="var">decrement</var> from the value of <var class="var">lvalue</var>.</td></tr>
<tr><td width="30%"><var class="var">lvalue</var> <code class="code">*=</code> <var class="var">coefficient</var></td><td width="70%">Multiply the value of <var class="var">lvalue</var> by <var class="var">coefficient</var>.</td></tr>
<tr><td width="30%"><var class="var">lvalue</var> <code class="code">/=</code> <var class="var">divisor</var></td><td width="70%">Divide the value of <var class="var">lvalue</var> by <var class="var">divisor</var>.</td></tr>
<tr><td width="30%"><var class="var">lvalue</var> <code class="code">%=</code> <var class="var">modulus</var></td><td width="70%">Set <var class="var">lvalue</var> to its remainder by <var class="var">modulus</var>.
<a class="index-entry-id" id="index-common-extensions-_002a_002a_003d-operator"></a>
<a class="index-entry-id" id="index-extensions-common-_002a_002a_003d-operator"></a>
<a class="index-entry-id" id="index-awk-language_002c-POSIX-version"></a>
<a class="index-entry-id" id="index-POSIX-awk-1"></a></td></tr>
<tr><td width="30%"><var class="var">lvalue</var> <code class="code">^=</code> <var class="var">power</var></td><td width="70%">Raise <var class="var">lvalue</var> to the power <var class="var">power</var>.</td></tr>
<tr><td width="30%"><var class="var">lvalue</var> <code class="code">**=</code> <var class="var">power</var></td><td width="70%">Raise <var class="var">lvalue</var> to the power <var class="var">power</var>. (c.e.)</td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 6.2: </strong>Arithmetic assignment operators</p></div></div>
<a class="index-entry-id" id="index-POSIX-awk-_002a_002a_003d-operator-and"></a>
<a class="index-entry-id" id="index-portability-_002a_002a_003d-operator-and"></a>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> Only the &lsquo;<samp class="samp">^=</samp>&rsquo; operator is specified by POSIX.
For maximum portability, do not use the &lsquo;<samp class="samp">**=</samp>&rsquo; operator.
</p></blockquote>

<a class="index-entry-id" id="index-sidebar-Syntactic-Ambiguities-Between-_002f_003d-and-Regular-Expressions"></a>
<table class="cartouche" border="1"><tr><th>
Syntactic Ambiguities Between &lsquo;<samp class="samp">/=</samp>&rsquo; and Regular Expressions</th></tr><tr><td>
<a class="index-entry-id" id="index-dark-corner-regexp-constants-_002f_003d-operator-and"></a>
<a class="index-entry-id" id="index-_002f-_0028forward-slash_0029-_002f_003d-operator-vs_002e-_002f_003d_2026_002f-regexp-constant"></a>
<a class="index-entry-id" id="index-forward-slash-_0028_002f_0029-_002f_003d-operator-vs_002e-_002f_003d_2026_002f-regexp-constant"></a>
<a class="index-entry-id" id="index-regexp-constants-_002f_003d_2026_002f-_002f_003d-operator-and"></a>


<a class="index-entry-id" id="index-dark-corner-_002f_003d-operator-vs_002e-_002f_003d_2026_002f-regexp-constant"></a>
<a class="index-entry-id" id="index-ambiguity_002c-syntactic_003a-_002f_003d-operator-vs_002e-_002f_003d_2026_002f-regexp-constant"></a>
<a class="index-entry-id" id="index-syntactic-ambiguity_003a-_002f_003d-operator-vs_002e-_002f_003d_2026_002f-regexp-constant"></a>
<a class="index-entry-id" id="index-_002f_003d-operator-vs_002e-_002f_003d_2026_002f-regexp-constant"></a>
<p>There is a syntactic ambiguity between the <code class="code">/=</code> assignment
operator and regexp constants whose first character is an &lsquo;<samp class="samp">=</samp>&rsquo;.
(d.c.)
This is most notable in some commercial <code class="command">awk</code> versions.
For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk /==/ /dev/null</kbd>
error&rarr; awk: syntax error at source line 1
error&rarr;  context is
error&rarr;         &gt;&gt;&gt; /= &lt;&lt;&lt;
error&rarr; awk: bailing out at source line 1
</pre></div>

<p>A workaround is:
</p>
<div class="example">
<pre class="example-preformatted">awk '/[=]=/' /dev/null
</pre></div>

<p><code class="command">gawk</code> does not have this problem; BWK <code class="command">awk</code>
and <code class="command">mawk</code> also do not.
</p></td></tr></table>

<hr>
</div>
<div class="subsection-level-extent" id="Increment-Ops">
<div class="nav-panel">
<p>
Previous: <a href="#Assignment-Ops" accesskey="p" rel="prev">Assignment Expressions</a>, Up: <a href="#All-Operators" accesskey="u" rel="up">Operators: Doing Something with Values</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Increment-and-Decrement-Operators"><span>6.2.4 Increment and Decrement Operators<a class="copiable-link" href="#Increment-and-Decrement-Operators"> &para;</a></span></h4>

<a class="index-entry-id" id="index-increment-operators"></a>
<a class="index-entry-id" id="index-operators-decrement_002fincrement"></a>
<p><em class="dfn">Increment</em> and <em class="dfn">decrement operators</em> increase or decrease the value of
a variable by one.  An assignment operator can do the same thing, so
the increment operators add no power to the <code class="command">awk</code> language; however, they
are convenient abbreviations for very common operations.
</p>
<a class="index-entry-id" id="index-side-effects-1"></a>
<a class="index-entry-id" id="index-_002b-_0028plus-sign_0029-_002b_002b-operator"></a>
<a class="index-entry-id" id="index-plus-sign-_0028_002b_0029-_002b_002b-operator"></a>
<a class="index-entry-id" id="index-side-effects-decrement_002fincrement-operators"></a>
<p>The operator used for adding one is written &lsquo;<samp class="samp">++</samp>&rsquo;.  It can be used to increment
a variable either before or after taking its value.
To <em class="dfn">pre-increment</em> a variable <code class="code">v</code>, write &lsquo;<samp class="samp">++v</samp>&rsquo;.  This adds
one to the value of <code class="code">v</code>&mdash;that new value is also the value of the
expression. (The assignment expression &lsquo;<samp class="samp">v += 1</samp>&rsquo; is completely equivalent.)
Writing the &lsquo;<samp class="samp">++</samp>&rsquo; after the variable specifies <em class="dfn">post-increment</em>.  This
increments the variable value just the same; the difference is that the
value of the increment expression itself is the variable&rsquo;s <em class="emph">old</em>
value.  Thus, if <code class="code">foo</code> has the value four, then the expression &lsquo;<samp class="samp">foo++</samp>&rsquo;
has the value four, but it changes the value of <code class="code">foo</code> to five.
In other words, the operator returns the old value of the variable,
but with the side effect of incrementing it.
</p>
<p>The post-increment &lsquo;<samp class="samp">foo++</samp>&rsquo; is nearly the same as writing &lsquo;<samp class="samp">(foo
+= 1) - 1</samp>&rsquo;.  It is not perfectly equivalent because all numbers in
<code class="command">awk</code> are floating point&mdash;in floating point, &lsquo;<samp class="samp">foo + 1 - 1</samp>&rsquo; does
not necessarily equal <code class="code">foo</code>.  But the difference is minute as
long as you stick to numbers that are fairly small (less than
10<sup class="sup">12</sup>).
</p>
<a class="index-entry-id" id="index-_0024-_0028dollar-sign_0029-incrementing-fields-and-arrays"></a>
<a class="index-entry-id" id="index-dollar-sign-_0028_0024_0029-incrementing-fields-and-arrays"></a>
<p>Fields and array elements are incremented
just like variables.  (Use &lsquo;<samp class="samp">$(i++)</samp>&rsquo; when you want to do a field reference
and a variable increment at the same time.  The parentheses are necessary
because of the precedence of the field reference operator &lsquo;<samp class="samp">$</samp>&rsquo;.)
</p>
<a class="index-entry-id" id="index-decrement-operators"></a>
<p>The decrement operator &lsquo;<samp class="samp">--</samp>&rsquo; works just like &lsquo;<samp class="samp">++</samp>&rsquo;, except that
it subtracts one instead of adding it.  As with &lsquo;<samp class="samp">++</samp>&rsquo;, it can be used before
the lvalue to pre-decrement or after it to post-decrement.
Following is a summary of increment and decrement expressions:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-_002b-_0028plus-sign_0029-_002b_002b-operator-1"></a>
<a class="index-entry-id" id="index-plus-sign-_0028_002b_0029-_002b_002b-operator-1"></a>
</dd>
<dt><code class="code">++<var class="var">lvalue</var></code></dt>
<dd><p>Increment <var class="var">lvalue</var>, returning the new value as the
value of the expression.
</p>
</dd>
<dt><code class="code"><var class="var">lvalue</var>++</code></dt>
<dd><p>Increment <var class="var">lvalue</var>, returning the <em class="emph">old</em> value of <var class="var">lvalue</var>
as the value of the expression.
</p>
<a class="index-entry-id" id="index-_002d-_0028hyphen_0029-_002d_002d-operator"></a>
<a class="index-entry-id" id="index-hyphen-_0028_002d_0029-_002d_002d-operator"></a>
</dd>
<dt><code class="code">--<var class="var">lvalue</var></code></dt>
<dd><p>Decrement <var class="var">lvalue</var>, returning the new value as the
value of the expression.
(This expression is
like &lsquo;<samp class="samp">++<var class="var">lvalue</var></samp>&rsquo;, but instead of adding, it subtracts.)
</p>
</dd>
<dt><code class="code"><var class="var">lvalue</var>--</code></dt>
<dd><p>Decrement <var class="var">lvalue</var>, returning the <em class="emph">old</em> value of <var class="var">lvalue</var>
as the value of the expression.
(This expression is
like &lsquo;<samp class="samp"><var class="var">lvalue</var>++</samp>&rsquo;, but instead of adding, it subtracts.)
</p></dd>
</dl>

<a class="index-entry-id" id="index-sidebar-Operator-Evaluation-Order"></a>
<table class="cartouche" border="1"><tr><th>
Operator Evaluation Order</th></tr><tr><td>
<a class="index-entry-id" id="index-precedence"></a>
<a class="index-entry-id" id="index-operators-precedence-of"></a>
<a class="index-entry-id" id="index-portability-operators"></a>
<a class="index-entry-id" id="index-evaluation-order"></a>
<a class="index-entry-id" id="index-Marx_002c-Groucho"></a>
<blockquote class="quotation">
<p><i class="i">Doctor, it hurts when I do this!<br>
Then don&rsquo;t do that!</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Groucho Marx</em>
</div>
<p>What happens for something like the following?
</p>
<div class="example">
<pre class="example-preformatted">b = 6
print b += b++
</pre></div>

<p>Or something even stranger?
</p>
<div class="example">
<pre class="example-preformatted">b = 6
b += ++b + b++
print b
</pre></div>

<a class="index-entry-id" id="index-side-effects-2"></a>
<p>In other words, when do the various side effects prescribed by the
postfix operators (&lsquo;<samp class="samp">b++</samp>&rsquo;) take effect?
When side effects happen is <em class="dfn">implementation-defined</em>.
In other words, it is up to the particular version of <code class="command">awk</code>.
The result for the first example may be 12 or 13, and for the second, it
may be 22 or 23.
</p>
<p>In short, doing things like this is not recommended and definitely
not anything that you can rely upon for portability.
You should avoid such things in your own programs.
</p></td></tr></table>

<hr>
</div>
</div>
<div class="section-level-extent" id="Truth-Values-and-Conditions">
<div class="nav-panel">
<p>
Next: <a href="#Function-Calls" accesskey="n" rel="next">Function Calls</a>, Previous: <a href="#All-Operators" accesskey="p" rel="prev">Operators: Doing Something with Values</a>, Up: <a href="#Expressions" accesskey="u" rel="up">Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Truth-Values-and-Conditions-1"><span>6.3 Truth Values and Conditions<a class="copiable-link" href="#Truth-Values-and-Conditions-1"> &para;</a></span></h3>

<p>In certain contexts, expression values also serve as &ldquo;truth values&rdquo;; i.e.,
they determine what should happen next as the program runs. This
section describes how <code class="command">awk</code> defines &ldquo;true&rdquo; and &ldquo;false&rdquo;
and how values are compared.
</p>

<ul class="mini-toc">
<li><a href="#Truth-Values" accesskey="1">True and False in <code class="command">awk</code></a></li>
<li><a href="#Typing-and-Comparison" accesskey="2">Variable Typing and Comparison Expressions</a></li>
<li><a href="#Boolean-Ops" accesskey="3">Boolean Expressions</a></li>
<li><a href="#Conditional-Exp" accesskey="4">Conditional Expressions</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Truth-Values">
<div class="nav-panel">
<p>
Next: <a href="#Typing-and-Comparison" accesskey="n" rel="next">Variable Typing and Comparison Expressions</a>, Up: <a href="#Truth-Values-and-Conditions" accesskey="u" rel="up">Truth Values and Conditions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="True-and-False-in-awk"><span>6.3.1 True and False in <code class="command">awk</code><a class="copiable-link" href="#True-and-False-in-awk"> &para;</a></span></h4>
<a class="index-entry-id" id="index-truth-values"></a>
<a class="index-entry-id" id="index-logical-false_002ftrue"></a>
<a class="index-entry-id" id="index-false_002c-logical"></a>
<a class="index-entry-id" id="index-true_002c-logical"></a>

<a class="index-entry-id" id="index-null-strings-2"></a>
<p>Many programming languages have a special representation for the concepts
of &ldquo;true&rdquo; and &ldquo;false.&rdquo;  Such languages usually use the special
constants <code class="code">true</code> and <code class="code">false</code>, or perhaps their uppercase
equivalents.
However, <code class="command">awk</code> is different.
It borrows a very simple concept of true and
false from C.  In <code class="command">awk</code>, any nonzero numeric value <em class="emph">or</em> any
nonempty string value is true.  Any other value (zero or the null
string, <code class="code">&quot;&quot;</code>) is false.  The following program prints &lsquo;<samp class="samp">A strange
truth value</samp>&rsquo; three times:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
   if (3.1415927)
       print &quot;A strange truth value&quot;
   if (&quot;Four Score And Seven Years Ago&quot;)
       print &quot;A strange truth value&quot;
   if (j = 57)
       print &quot;A strange truth value&quot;
}
</pre></div>

<a class="index-entry-id" id="index-dark-corner-_00220_0022-is-actually-true"></a>
<p>There is a surprising consequence of the &ldquo;nonzero or non-null&rdquo; rule:
the string constant <code class="code">&quot;0&quot;</code> is actually true, because it is non-null.
(d.c.)
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Typing-and-Comparison">
<div class="nav-panel">
<p>
Next: <a href="#Boolean-Ops" accesskey="n" rel="next">Boolean Expressions</a>, Previous: <a href="#Truth-Values" accesskey="p" rel="prev">True and False in <code class="command">awk</code></a>, Up: <a href="#Truth-Values-and-Conditions" accesskey="u" rel="up">Truth Values and Conditions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Variable-Typing-and-Comparison-Expressions"><span>6.3.2 Variable Typing and Comparison Expressions<a class="copiable-link" href="#Variable-Typing-and-Comparison-Expressions"> &para;</a></span></h4>
<blockquote class="quotation">
<p><i class="i">The Guide is definitive. Reality is frequently inaccurate.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Douglas Adams, <cite class="cite">The Hitchhiker&rsquo;s Guide to the Galaxy</cite></em>
</div>
<a class="index-entry-id" id="index-comparison-expressions"></a>
<a class="index-entry-id" id="index-expressions-comparison"></a>
<a class="index-entry-id" id="index-matching-expressions"></a>
<a class="index-entry-id" id="index-variables-types-of-comparison-expressions-and"></a>
<p>Unlike in other programming languages, in <code class="command">awk</code> variables do not have a
fixed type. Instead, they can be either a number or a string, depending
upon the value that is assigned to them.
We look now at how variables are typed, and how <code class="command">awk</code>
compares variables.
</p>

<ul class="mini-toc">
<li><a href="#Variable-Typing" accesskey="1">String Type versus Numeric Type</a></li>
<li><a href="#Comparison-Operators" accesskey="2">Comparison Operators</a></li>
<li><a href="#POSIX-String-Comparison" accesskey="3">String Comparison Based on Locale Collating Order</a></li>
</ul>
<hr>
<div class="subsubsection-level-extent" id="Variable-Typing">
<div class="nav-panel">
<p>
Next: <a href="#Comparison-Operators" accesskey="n" rel="next">Comparison Operators</a>, Up: <a href="#Typing-and-Comparison" accesskey="u" rel="up">Variable Typing and Comparison Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="String-Type-versus-Numeric-Type"><span>6.3.2.1 String Type versus Numeric Type<a class="copiable-link" href="#String-Type-versus-Numeric-Type"> &para;</a></span></h4>

<p>Scalar objects in <code class="command">awk</code> (variables, array elements, and fields)
are <em class="emph">dynamically</em> typed.  This means their type can change as the
program runs, from <em class="dfn">untyped</em> before any use,<a class="footnote" id="DOCF36" href="#FOOT36"><sup>36</sup></a> to string
or number, and then from string to number or number to string, as the
program progresses.  (<code class="command">gawk</code> also provides regexp-typed scalars,
but let&rsquo;s ignore that for now; see <a class="pxref" href="#Strong-Regexp-Constants">Strongly Typed Regexp Constants</a>.)
</p>
<p>You can&rsquo;t do much with untyped variables, other than tell that they
are untyped. The following program tests <code class="code">a</code> against <code class="code">&quot;&quot;</code>
and <code class="code">0</code>; the test succeeds when <code class="code">a</code> has never been assigned
a value.  It also uses the built-in <code class="code">typeof()</code> function
(not presented yet; see <a class="pxref" href="#Type-Functions">Getting Type Information</a>) to show <code class="code">a</code>&rsquo;s type:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { print (a == &quot;&quot; &amp;&amp; a == 0 ?</kbd>
&gt; <kbd class="kbd">&quot;a is untyped&quot; : &quot;a has a type!&quot;) ; print typeof(a) }'</kbd>
-| a is untyped
-| unassigned
</pre></div>

<p>A scalar has numeric type when assigned a numeric value,
such as from a numeric constant, or from another scalar
with numeric type:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { a = 42 ; print typeof(a)</kbd>
&gt; <kbd class="kbd">b = a ; print typeof(b) }'</kbd>
number
number
</pre></div>

<p>Similarly, a scalar has string type when assigned a string
value, such as from a string constant, or from another scalar
with string type:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { a = &quot;forty two&quot; ; print typeof(a)</kbd>
&gt; <kbd class="kbd">b = a ; print typeof(b) }'</kbd>
string
string
</pre></div>

<p>So far, this is all simple and straightforward.  What happens, though,
when <code class="command">awk</code> has to process data from a user?  Let&rsquo;s start with
field data.  What should the following command produce as output?
</p>
<div class="example">
<pre class="example-preformatted">echo hello | awk '{ printf(&quot;%s %s &lt; 42\n&quot;, $1,
                           ($1 &lt; 42 ? &quot;is&quot; : &quot;is not&quot;)) }'
</pre></div>

<p>Since &lsquo;<samp class="samp">hello</samp>&rsquo; is alphabetic data, <code class="command">awk</code> can only do a string
comparison.  Internally, it converts <code class="code">42</code> into <code class="code">&quot;42&quot;</code> and compares
the two string values <code class="code">&quot;hello&quot;</code> and <code class="code">&quot;42&quot;</code>. Here&rsquo;s the result:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo hello | awk '{ printf(&quot;%s %s &lt; 42\n&quot;, $1,</kbd>
&gt; <kbd class="kbd">                           ($1 &lt; 42 ? &quot;is&quot; : &quot;is not&quot;)) }'</kbd>
-| hello is not &lt; 42
</pre></div>

<p>However, what happens when data from a user <em class="emph">looks like</em> a number?
On the one hand, in reality, the input data consists of characters, not
binary numeric
values.  But, on the other hand, the data looks numeric, and <code class="command">awk</code>
really ought to treat it as such. And indeed, it does:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo 37 | awk '{ printf(&quot;%s %s &lt; 42\n&quot;, $1,</kbd>
&gt; <kbd class="kbd">                        ($1 &lt; 42 ? &quot;is&quot; : &quot;is not&quot;)) }'</kbd>
-| 37 is &lt; 42
</pre></div>

<p>Here are the rules for when <code class="command">awk</code>
treats data as a number, and for when it treats data as a string.
</p>
<a class="index-entry-id" id="index-numeric-strings"></a>
<a class="index-entry-id" id="index-strings-numeric"></a>
<a class="index-entry-id" id="index-POSIX-awk-numeric-strings-and"></a>
<p>The POSIX standard uses the term <em class="dfn">numeric string</em> for input data that
looks numeric.  The &lsquo;<samp class="samp">37</samp>&rsquo; in the previous example is a numeric string.
So what is the type of a numeric string? Answer: numeric.
</p>
<p>The type of a variable is important because the types of two variables
determine how they are compared.
Variable typing follows these definitions and rules:
</p>
<ul class="itemize mark-bullet">
<li>A numeric constant or the result of a numeric operation has the <em class="dfn">numeric</em>
attribute.

</li><li>A string constant or the result of a string operation has the <em class="dfn">string</em>
attribute.

</li><li>Fields, <code class="code">getline</code> input, <code class="code">FILENAME</code>, <code class="code">ARGV</code> elements,
<code class="code">ENVIRON</code> elements, and the elements of an array created by
<code class="code">match()</code>, <code class="code">split()</code>, and <code class="code">patsplit()</code> that are numeric
strings have the <em class="dfn">strnum</em> attribute.<a class="footnote" id="DOCF37" href="#FOOT37"><sup>37</sup></a>
Otherwise, they have
the <em class="dfn">string</em> attribute.  Uninitialized variables also have the
<em class="dfn">strnum</em> attribute.

</li><li>Attributes propagate across assignments but are not changed by
any use.
</li></ul>

<p>The last rule is particularly important. In the following program,
<code class="code">a</code> has numeric type, even though it is later used in a string
operation:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
     a = 12.345
     b = a &quot; is a cute number&quot;
     print b
}
</pre></div>

<p>When two operands are compared, either string comparison or numeric comparison
may be used. This depends upon the attributes of the operands, according to the
following symmetric matrix:
</p>
<pre class="verbatim">        +----------------------------------------------
        |       STRING          NUMERIC         STRNUM
--------+----------------------------------------------
        |
STRING  |       string          string          string
        |
NUMERIC |       string          numeric         numeric
        |
STRNUM  |       string          numeric         numeric
--------+----------------------------------------------
</pre>
<p>The basic idea is that user input that looks numeric&mdash;and <em class="emph">only</em>
user input&mdash;should be treated as numeric, even though it is actually
made of characters and is therefore also a string.
Thus, for example, the string constant <code class="code">&quot;&nbsp;+3.14&quot;</code><!-- /@w -->,
when it appears in program source code,
is a string&mdash;even though it looks numeric&mdash;and
is <em class="emph">never</em> treated as a number for comparison
purposes.
</p>
<p>In short, when one operand is a &ldquo;pure&rdquo; string, such as a string
constant, then a string comparison is performed.  Otherwise, a
numeric comparison is performed.
(The primary difference between a number and a strnum is that
for strnums <code class="command">gawk</code> preserves the original string value that
the scalar had when it came in.)
</p>
<p>This point bears additional emphasis:
Input that looks numeric <em class="emph">is</em> numeric.
All other input is treated as strings.
</p>
<p>Thus, the six-character input string &lsquo;<samp class="samp">&nbsp;+3.14</samp>&rsquo;<!-- /@w --> receives the
strnum attribute. In contrast, the eight characters
<code class="code">&quot;&nbsp;+3.14&quot;</code><!-- /@w --> appearing in program text comprise a string constant.
The following examples print &lsquo;<samp class="samp">1</samp>&rsquo; when the comparison between
the two different constants is true, and &lsquo;<samp class="samp">0</samp>&rsquo; otherwise:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo ' +3.14' | awk '{ print($0 == &quot; +3.14&quot;) }'</kbd>    <i class="i">True</i>
-| 1
$ <kbd class="kbd">echo ' +3.14' | awk '{ print($0 == &quot;+3.14&quot;) }'</kbd>     <i class="i">False</i>
-| 0
$ <kbd class="kbd">echo ' +3.14' | awk '{ print($0 == &quot;3.14&quot;) }'</kbd>      <i class="i">False</i>
-| 0
$ <kbd class="kbd">echo ' +3.14' | awk '{ print($0 == 3.14) }'</kbd>        <i class="i">True</i>
-| 1
$ <kbd class="kbd">echo ' +3.14' | awk '{ print($1 == &quot; +3.14&quot;) }'</kbd>    <i class="i">False</i>
-| 0
$ <kbd class="kbd">echo ' +3.14' | awk '{ print($1 == &quot;+3.14&quot;) }'</kbd>     <i class="i">True</i>
-| 1
$ <kbd class="kbd">echo ' +3.14' | awk '{ print($1 == &quot;3.14&quot;) }'</kbd>      <i class="i">False</i>
-| 0
$ <kbd class="kbd">echo ' +3.14' | awk '{ print($1 == 3.14) }'</kbd>        <i class="i">True</i>
-| 1
</pre></div>

<p>You can see the type of an input field (or other user input)
using <code class="code">typeof()</code>:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo hello 37 | gawk '{ print typeof($1), typeof($2) }'</kbd>
-| string strnum
</pre></div>

<hr>
</div>
<div class="subsubsection-level-extent" id="Comparison-Operators">
<div class="nav-panel">
<p>
Next: <a href="#POSIX-String-Comparison" accesskey="n" rel="next">String Comparison Based on Locale Collating Order</a>, Previous: <a href="#Variable-Typing" accesskey="p" rel="prev">String Type versus Numeric Type</a>, Up: <a href="#Typing-and-Comparison" accesskey="u" rel="up">Variable Typing and Comparison Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Comparison-Operators-1"><span>6.3.2.2 Comparison Operators<a class="copiable-link" href="#Comparison-Operators-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-operators-comparison"></a>

<p><em class="dfn">Comparison expressions</em> compare strings or numbers for
relationships such as equality.  They are written using <em class="dfn">relational
operators</em>, which are a superset of those in C.
<a class="ref" href="#table_002drelational_002dops">Table 6.3</a> describes them.
</p>
<a class="index-entry-id" id="index-_003c-_0028left-angle-bracket_0029-_003c-operator"></a>
<a class="index-entry-id" id="index-left-angle-bracket-_0028_003c_0029-_003c-operator"></a>
<a class="index-entry-id" id="index-_003c-_0028left-angle-bracket_0029-_003c_003d-operator"></a>
<a class="index-entry-id" id="index-left-angle-bracket-_0028_003c_0029-_003c_003d-operator"></a>
<a class="index-entry-id" id="index-_003e-_0028right-angle-bracket_0029-_003e_003d-operator"></a>
<a class="index-entry-id" id="index-right-angle-bracket-_0028_003e_0029-_003e_003d-operator"></a>
<a class="index-entry-id" id="index-_003e-_0028right-angle-bracket_0029-_003e-operator"></a>
<a class="index-entry-id" id="index-right-angle-bracket-_0028_003e_0029-_003e-operator"></a>
<a class="index-entry-id" id="index-_003d-_0028equals-sign_0029-_003d_003d-operator"></a>
<a class="index-entry-id" id="index-equals-sign-_0028_003d_0029-_003d_003d-operator"></a>
<a class="index-entry-id" id="index-_0021-_0028exclamation-point_0029-_0021_003d-operator"></a>
<a class="index-entry-id" id="index-exclamation-point-_0028_0021_0029-_0021_003d-operator"></a>
<a class="index-entry-id" id="index-_007e-_0028tilde_0029_002c-_007e-operator-4"></a>
<a class="index-entry-id" id="index-tilde-_0028_007e_0029_002c-_007e-operator-4"></a>
<a class="index-entry-id" id="index-_0021-_0028exclamation-point_0029-_0021_007e-operator-4"></a>
<a class="index-entry-id" id="index-exclamation-point-_0028_0021_0029-_0021_007e-operator-4"></a>
<a class="index-entry-id" id="index-in-operator"></a>
<div class="float" id="table_002drelational_002dops">
<table class="multitable">
<thead><tr><th width="25%">Expression</th><th width="75%">Result</th></tr></thead>
<tbody><tr><td width="25%"><var class="var">x</var> <code class="code">&lt;</code> <var class="var">y</var></td><td width="75%">True if <var class="var">x</var> is less than <var class="var">y</var></td></tr>
<tr><td width="25%"><var class="var">x</var> <code class="code">&lt;=</code> <var class="var">y</var></td><td width="75%">True if <var class="var">x</var> is less than or equal to <var class="var">y</var></td></tr>
<tr><td width="25%"><var class="var">x</var> <code class="code">&gt;</code> <var class="var">y</var></td><td width="75%">True if <var class="var">x</var> is greater than <var class="var">y</var></td></tr>
<tr><td width="25%"><var class="var">x</var> <code class="code">&gt;=</code> <var class="var">y</var></td><td width="75%">True if <var class="var">x</var> is greater than or equal to <var class="var">y</var></td></tr>
<tr><td width="25%"><var class="var">x</var> <code class="code">==</code> <var class="var">y</var></td><td width="75%">True if <var class="var">x</var> is equal to <var class="var">y</var></td></tr>
<tr><td width="25%"><var class="var">x</var> <code class="code">!=</code> <var class="var">y</var></td><td width="75%">True if <var class="var">x</var> is not equal to <var class="var">y</var></td></tr>
<tr><td width="25%"><var class="var">x</var> <code class="code">~</code> <var class="var">y</var></td><td width="75%">True if the string <var class="var">x</var> matches the regexp denoted by <var class="var">y</var></td></tr>
<tr><td width="25%"><var class="var">x</var> <code class="code">!~</code> <var class="var">y</var></td><td width="75%">True if the string <var class="var">x</var> does not match the regexp denoted by <var class="var">y</var></td></tr>
<tr><td width="25%"><var class="var">subscript</var> <code class="code">in</code> <var class="var">array</var></td><td width="75%">True if the array <var class="var">array</var> has an element with the subscript <var class="var">subscript</var></td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 6.3: </strong>Relational operators</p></div></div>
<p>Comparison expressions have the value one if true and zero if false.
When comparing operands of mixed types, numeric operands are converted
to strings using the value of <code class="code">CONVFMT</code>
(see <a class="pxref" href="#Conversion">Conversion of Strings and Numbers</a>).
</p>
<p>Strings are compared
by comparing the first character of each, then the second character of each,
and so on.  Thus, <code class="code">&quot;10&quot;</code> is less than <code class="code">&quot;9&quot;</code>.  If there are two
strings where one is a prefix of the other, the shorter string is less than
the longer one.  Thus, <code class="code">&quot;abc&quot;</code> is less than <code class="code">&quot;abcd&quot;</code>.
</p>
<a class="index-entry-id" id="index-troubleshooting-_003d_003d-operator"></a>
<p>It is very easy to accidentally mistype the &lsquo;<samp class="samp">==</samp>&rsquo; operator and
leave off one of the &lsquo;<samp class="samp">=</samp>&rsquo; characters.  The result is still valid
<code class="command">awk</code> code, but the program does not do what is intended:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">if (a = b)   # oops! should be a == b
   ...
else
   ...
</pre></div></div>

<p>Unless <code class="code">b</code> happens to be zero or the null string, the <code class="code">if</code>
part of the test always succeeds.  Because the operators are
so similar, this kind of error is very difficult to spot when
scanning the source code.
</p>
<p>The following list of expressions illustrates the kinds of comparisons
<code class="command">awk</code> performs, as well as what the result of each comparison is:
</p>
<dl class="table">
<dt><code class="code">1.5 &lt;= 2.0</code></dt>
<dd><p>Numeric comparison (true)
</p>
</dd>
<dt><code class="code">&quot;abc&quot; &gt;= &quot;xyz&quot;</code></dt>
<dd><p>String comparison (false)
</p>
</dd>
<dt><code class="code">1.5 != &quot; +2&quot;</code></dt>
<dd><p>String comparison (true)
</p>
</dd>
<dt><code class="code">&quot;1e2&quot; &lt; &quot;3&quot;</code></dt>
<dd><p>String comparison (true)
</p>
</dd>
<dt><code class="code">a = 2; b = &quot;2&quot;</code></dt>
<dt><code class="code">a == b</code></dt>
<dd><p>String comparison (true)
</p>
</dd>
<dt><code class="code">a = 2; b = &quot; +2&quot;</code></dt>
<dt><code class="code">a == b</code></dt>
<dd><p>String comparison (false)
</p></dd>
</dl>

<p>In this example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo 1e2 3 | awk '{ print ($1 &lt; $2) ? &quot;true&quot; : &quot;false&quot; }'</kbd>
-| false
</pre></div>

<a class="index-entry-id" id="index-comparison-expressions-string-vs_002e-regexp"></a>
<p>the result is &lsquo;<samp class="samp">false</samp>&rsquo; because both <code class="code">$1</code> and <code class="code">$2</code>
are user input.  They are numeric strings&mdash;therefore both have
the strnum attribute, dictating a numeric comparison.
The purpose of the comparison rules and the use of numeric strings is
to attempt to produce the behavior that is &ldquo;least surprising,&rdquo; while
still &ldquo;doing the right thing.&rdquo;
</p>
<p>String comparisons and regular expression comparisons are very different.
For example:
</p>
<div class="example">
<pre class="example-preformatted">x == &quot;foo&quot;
</pre></div>

<p>has the value one, or is true if the variable <code class="code">x</code>
is precisely &lsquo;<samp class="samp">foo</samp>&rsquo;.  By contrast:
</p>
<div class="example">
<pre class="example-preformatted">x ~ /foo/
</pre></div>

<p>has the value one if <code class="code">x</code> contains &lsquo;<samp class="samp">foo</samp>&rsquo;, such as
<code class="code">&quot;Oh, what a fool am I!&quot;</code>.
</p>
<a class="index-entry-id" id="index-_007e-_0028tilde_0029_002c-_007e-operator-5"></a>
<a class="index-entry-id" id="index-tilde-_0028_007e_0029_002c-_007e-operator-5"></a>
<a class="index-entry-id" id="index-_0021-_0028exclamation-point_0029-_0021_007e-operator-5"></a>
<a class="index-entry-id" id="index-exclamation-point-_0028_0021_0029-_0021_007e-operator-5"></a>
<p>The righthand operand of the &lsquo;<samp class="samp">~</samp>&rsquo; and &lsquo;<samp class="samp">!~</samp>&rsquo; operators may be
either a regexp constant (<code class="code">/</code>&hellip;<code class="code">/</code>) or an ordinary
expression. In the latter case, the value of the expression as a string is used as a
dynamic regexp (see <a class="pxref" href="#Regexp-Usage">How to Use Regular Expressions</a>; also
see <a class="pxref" href="#Computed-Regexps">Using Dynamic Regexps</a>).
</p>
<a class="index-entry-id" id="index-awk-regexp-constants-and"></a>
<a class="index-entry-id" id="index-regexp-constants-2"></a>
<p>A constant regular
expression in slashes by itself is also an expression.
<code class="code">/<var class="var">regexp</var>/</code> is an abbreviation for the following comparison expression:
</p>
<div class="example">
<pre class="example-preformatted">$0 ~ /<var class="var">regexp</var>/
</pre></div>

<p>One special place where <code class="code">/foo/</code> is <em class="emph">not</em> an abbreviation for
&lsquo;<samp class="samp">$0 ~ /foo/</samp>&rsquo; is when it is the righthand operand of &lsquo;<samp class="samp">~</samp>&rsquo; or
&lsquo;<samp class="samp">!~</samp>&rsquo;.
See <a class="xref" href="#Using-Constant-Regexps">Using Regular Expression Constants</a>,
where this is discussed in more detail.
</p>
<hr>
</div>
<div class="subsubsection-level-extent" id="POSIX-String-Comparison">
<div class="nav-panel">
<p>
Previous: <a href="#Comparison-Operators" accesskey="p" rel="prev">Comparison Operators</a>, Up: <a href="#Typing-and-Comparison" accesskey="u" rel="up">Variable Typing and Comparison Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="String-Comparison-Based-on-Locale-Collating-Order"><span>6.3.2.3 String Comparison Based on Locale Collating Order<a class="copiable-link" href="#String-Comparison-Based-on-Locale-Collating-Order"> &para;</a></span></h4>

<p>The POSIX standard used to say that all string comparisons are
performed based on the locale&rsquo;s <em class="dfn">collating order</em>. This
is the order in which characters sort, as defined by the locale
(for more discussion, see <a class="pxref" href="#Locales">Where You Are Makes a Difference</a>).  This order is usually very
different from the results obtained when doing straight byte-by-byte
comparison.<a class="footnote" id="DOCF38" href="#FOOT38"><sup>38</sup></a>
</p>
<a class="index-entry-id" id="index-POSIX-mode-8"></a>
<p>Because this behavior differs considerably from existing practice,
<code class="command">gawk</code> only implemented it when in POSIX mode (see <a class="pxref" href="#Options">Command-Line Options</a>).
Here is an example to illustrate the difference, in an <code class="code">en_US.UTF-8</code>
locale:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { printf(&quot;ABC &lt; abc = %s\n&quot;,</kbd>
&gt;                     <kbd class="kbd">(&quot;ABC&quot; &lt; &quot;abc&quot; ? &quot;TRUE&quot; : &quot;FALSE&quot;)) }'</kbd>
-| ABC &lt; abc = TRUE
$ <kbd class="kbd">gawk --posix 'BEGIN { printf(&quot;ABC &lt; abc = %s\n&quot;,</kbd>
&gt;                             <kbd class="kbd">(&quot;ABC&quot; &lt; &quot;abc&quot; ? &quot;TRUE&quot; : &quot;FALSE&quot;)) }'</kbd>
-| ABC &lt; abc = FALSE
</pre></div>

<p>Fortunately, as of August 2016, comparison based on locale
collating order is no longer required for the <code class="code">==</code> and <code class="code">!=</code>
operators.<a class="footnote" id="DOCF39" href="#FOOT39"><sup>39</sup></a> However, comparison based on locales is still
required for <code class="code">&lt;</code>, <code class="code">&lt;=</code>, <code class="code">&gt;</code>, and <code class="code">&gt;=</code>.  POSIX thus
recommends as follows:
</p>
<blockquote class="quotation">
<p>Since the <code class="code">==</code> operator checks whether strings are identical,
not whether they collate equally, applications needing to check whether
strings collate equally can use:
</p>
<div class="example">
<pre class="example-preformatted">a &lt;= b &amp;&amp; a &gt;= b
</pre></div>
</blockquote>

<a class="index-entry-id" id="index-POSIX-mode-9"></a>
<p>As of version 4.2, <code class="command">gawk</code> continues to use locale
collating order for <code class="code">&lt;</code>, <code class="code">&lt;=</code>, <code class="code">&gt;</code>, and <code class="code">&gt;=</code> only
in POSIX mode.
</p>

<hr>
</div>
</div>
<div class="subsection-level-extent" id="Boolean-Ops">
<div class="nav-panel">
<p>
Next: <a href="#Conditional-Exp" accesskey="n" rel="next">Conditional Expressions</a>, Previous: <a href="#Typing-and-Comparison" accesskey="p" rel="prev">Variable Typing and Comparison Expressions</a>, Up: <a href="#Truth-Values-and-Conditions" accesskey="u" rel="up">Truth Values and Conditions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Boolean-Expressions"><span>6.3.3 Boolean Expressions<a class="copiable-link" href="#Boolean-Expressions"> &para;</a></span></h4>
<a class="index-entry-id" id="index-and-Boolean_002dlogic-operator"></a>
<a class="index-entry-id" id="index-or-Boolean_002dlogic-operator"></a>
<a class="index-entry-id" id="index-not-Boolean_002dlogic-operator"></a>
<a class="index-entry-id" id="index-expressions-Boolean"></a>
<a class="index-entry-id" id="index-Boolean-expressions"></a>

<p>A <em class="dfn">Boolean expression</em> is a combination of comparison expressions or
matching expressions, using the Boolean operators &ldquo;or&rdquo;
(&lsquo;<samp class="samp">||</samp>&rsquo;), &ldquo;and&rdquo; (&lsquo;<samp class="samp">&amp;&amp;</samp>&rsquo;), and &ldquo;not&rdquo; (&lsquo;<samp class="samp">!</samp>&rsquo;), along with
parentheses to control nesting.  The truth value of the Boolean expression is
computed by combining the truth values of the component expressions.
Boolean expressions are also referred to as <em class="dfn">logical expressions</em>.
The terms are equivalent.
</p>
<p>Boolean expressions can be used wherever comparison and matching
expressions can be used.  They can be used in <code class="code">if</code>, <code class="code">while</code>,
<code class="code">do</code>, and <code class="code">for</code> statements
(see <a class="pxref" href="#Statements">Control Statements in Actions</a>).
They have numeric values (one if true, zero if false) that come into play
if the result of the Boolean expression is stored in a variable or
used in arithmetic.
</p>
<p>In addition, every Boolean expression is also a valid pattern, so
you can use one as a pattern to control the execution of rules.
The Boolean operators are:
</p>
<dl class="table">
<dt><code class="code"><var class="var">boolean1</var> &amp;&amp; <var class="var">boolean2</var></code></dt>
<dd><p>True if both <var class="var">boolean1</var> and <var class="var">boolean2</var> are true.  For example,
the following statement prints the current input record if it contains
both &lsquo;<samp class="samp">edu</samp>&rsquo; and &lsquo;<samp class="samp">li</samp>&rsquo;:
</p>
<div class="example">
<pre class="example-preformatted">if ($0 ~ /edu/ &amp;&amp; $0 ~ /li/) print
</pre></div>

<a class="index-entry-id" id="index-side-effects-Boolean-operators"></a>
<p>The subexpression <var class="var">boolean2</var> is evaluated only if <var class="var">boolean1</var>
is true.  This can make a difference when <var class="var">boolean2</var> contains
expressions that have side effects. In the case of &lsquo;<samp class="samp">$0 ~ /foo/ &amp;&amp;
($2 == bar++)</samp>&rsquo;, the variable <code class="code">bar</code> is not incremented if there is
no substring &lsquo;<samp class="samp">foo</samp>&rsquo; in the record.
</p>
</dd>
<dt><code class="code"><var class="var">boolean1</var> || <var class="var">boolean2</var></code></dt>
<dd><p>True if at least one of <var class="var">boolean1</var> or <var class="var">boolean2</var> is true.
For example, the following statement prints all records in the input
that contain <em class="emph">either</em> &lsquo;<samp class="samp">edu</samp>&rsquo; or
&lsquo;<samp class="samp">li</samp>&rsquo;:
</p>
<div class="example">
<pre class="example-preformatted">if ($0 ~ /edu/ || $0 ~ /li/) print
</pre></div>

<p>The subexpression <var class="var">boolean2</var> is evaluated only if <var class="var">boolean1</var>
is false.  This can make a difference when <var class="var">boolean2</var> contains
expressions that have side effects.
(Thus, this test never really distinguishes records that contain both
&lsquo;<samp class="samp">edu</samp>&rsquo; and &lsquo;<samp class="samp">li</samp>&rsquo;&mdash;as soon as &lsquo;<samp class="samp">edu</samp>&rsquo; is matched,
the full test succeeds.)
</p>
</dd>
<dt><code class="code">! <var class="var">boolean</var></code></dt>
<dd><p>True if <var class="var">boolean</var> is false.  For example,
the following program prints &lsquo;<samp class="samp">no home!</samp>&rsquo; in
the unusual event that the <code class="env">HOME</code> environment
variable is not defined:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN { if (! (&quot;HOME&quot; in ENVIRON))
            print &quot;no home!&quot; }
</pre></div>

<p>(The <code class="code">in</code> operator is described in
<a class="ref" href="#Reference-to-Elements">Referring to an Array Element</a>.)
</p></dd>
</dl>

<a class="index-entry-id" id="index-short_002dcircuit-operators"></a>
<a class="index-entry-id" id="index-operators-short_002dcircuit"></a>
<a class="index-entry-id" id="index-_0026-_0028ampersand_0029-_0026_0026-operator"></a>
<a class="index-entry-id" id="index-ampersand-_0028_0026_0029-_0026_0026-operator"></a>
<a class="index-entry-id" id="index-_007c-_0028vertical-bar_0029-_007c_007c-operator"></a>
<a class="index-entry-id" id="index-vertical-bar-_0028_007c_0029-_007c_007c-operator"></a>
<p>The &lsquo;<samp class="samp">&amp;&amp;</samp>&rsquo; and &lsquo;<samp class="samp">||</samp>&rsquo; operators are called <em class="dfn">short-circuit</em>
operators because of the way they work.  Evaluation of the full expression
is &ldquo;short-circuited&rdquo; if the result can be determined partway through
its evaluation.
</p>
<a class="index-entry-id" id="index-line-continuations"></a>
<p>Statements that end with &lsquo;<samp class="samp">&amp;&amp;</samp>&rsquo; or &lsquo;<samp class="samp">||</samp>&rsquo; can be continued simply
by putting a newline after them.  But you cannot put a newline in front
of either of these operators without using backslash continuation
(see <a class="pxref" href="#Statements_002fLines"><code class="command">awk</code> Statements Versus Lines</a>).
</p>
<a class="index-entry-id" id="index-_0021-_0028exclamation-point_0029-_0021-operator"></a>
<a class="index-entry-id" id="index-exclamation-point-_0028_0021_0029-_0021-operator"></a>
<a class="index-entry-id" id="index-newlines-2"></a>
<a class="index-entry-id" id="index-variables-flag"></a>
<a class="index-entry-id" id="index-flag-variables"></a>
<p>The actual value of an expression using the &lsquo;<samp class="samp">!</samp>&rsquo; operator is
either one or zero, depending upon the truth value of the expression it
is applied to.
The &lsquo;<samp class="samp">!</samp>&rsquo; operator is often useful for changing the sense of a flag
variable from false to true and back again. For example, the following
program is one way to print lines in between special bracketing lines:
</p>
<div class="example">
<pre class="example-preformatted">$1 == &quot;START&quot;   { interested = ! interested; next }
interested      { print }
$1 == &quot;END&quot;     { interested = ! interested; next }
</pre></div>

<p>The variable <code class="code">interested</code>, as with all <code class="command">awk</code> variables, starts
out initialized to zero, which is also false.  When a line is seen whose
first field is &lsquo;<samp class="samp">START</samp>&rsquo;, the value of <code class="code">interested</code> is toggled
to true, using &lsquo;<samp class="samp">!</samp>&rsquo;. The next rule prints lines as long as
<code class="code">interested</code> is true.  When a line is seen whose first field is
&lsquo;<samp class="samp">END</samp>&rsquo;, <code class="code">interested</code> is toggled back to false.<a class="footnote" id="DOCF40" href="#FOOT40"><sup>40</sup></a>
</p>

<p>Most commonly, the &lsquo;<samp class="samp">!</samp>&rsquo; operator is used in the conditions of
<code class="code">if</code> and <code class="code">while</code> statements, where it often makes more
sense to phrase the logic in the negative:
</p>
<div class="example">
<pre class="example-preformatted">if (! <var class="var">some condition</var> || <var class="var">some other condition</var>) {
    <var class="var">... do whatever processing ...</var>
}
</pre></div>

<a class="index-entry-id" id="index-next-statement"></a>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> The <code class="code">next</code> statement is discussed in
<a class="ref" href="#Next-Statement">The <code class="code">next</code> Statement</a>.
<code class="code">next</code> tells <code class="command">awk</code> to skip the rest of the rules, get the
next record, and start processing the rules over again at the top.
The reason it&rsquo;s there is to avoid printing the bracketing
&lsquo;<samp class="samp">START</samp>&rsquo; and &lsquo;<samp class="samp">END</samp>&rsquo; lines.
</p></blockquote>

<hr>
</div>
<div class="subsection-level-extent" id="Conditional-Exp">
<div class="nav-panel">
<p>
Previous: <a href="#Boolean-Ops" accesskey="p" rel="prev">Boolean Expressions</a>, Up: <a href="#Truth-Values-and-Conditions" accesskey="u" rel="up">Truth Values and Conditions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Conditional-Expressions"><span>6.3.4 Conditional Expressions<a class="copiable-link" href="#Conditional-Expressions"> &para;</a></span></h4>
<a class="index-entry-id" id="index-conditional-expressions"></a>
<a class="index-entry-id" id="index-expressions-conditional"></a>
<a class="index-entry-id" id="index-expressions-selecting"></a>

<p>A <em class="dfn">conditional expression</em> is a special kind of expression that has
three operands.  It allows you to use one expression&rsquo;s value to select
one of two other expressions.
The conditional expression in <code class="command">awk</code> is the same as in the C
language, as shown here:
</p>
<div class="example">
<pre class="example-preformatted"><var class="var">selector</var> ? <var class="var">if-true-exp</var> : <var class="var">if-false-exp</var>
</pre></div>

<p>There are three subexpressions.  The first, <var class="var">selector</var>, is always
computed first.  If it is &ldquo;true&rdquo; (not zero or not null), then
<var class="var">if-true-exp</var> is computed next, and its value becomes the value of
the whole expression.  Otherwise, <var class="var">if-false-exp</var> is computed next,
and its value becomes the value of the whole expression.
For example, the following expression produces the absolute value of <code class="code">x</code>:
</p>
<div class="example">
<pre class="example-preformatted">x &gt;= 0 ? x : -x
</pre></div>

<a class="index-entry-id" id="index-side-effects-conditional-expressions"></a>
<p>Each time the conditional expression is computed, only one of
<var class="var">if-true-exp</var> and <var class="var">if-false-exp</var> is used; the other is ignored.
This is important when the expressions have side effects.  For example,
this conditional expression examines element <code class="code">i</code> of either array
<code class="code">a</code> or array <code class="code">b</code>, and increments <code class="code">i</code>:
</p>
<div class="example">
<pre class="example-preformatted">x == y ? a[i++] : b[i++]
</pre></div>

<p>This is guaranteed to increment <code class="code">i</code> exactly once, because each time
only one of the two increment expressions is executed
and the other is not.
See <a class="xref" href="#Arrays">Arrays in <code class="command">awk</code></a>,
for more information about arrays.
</p>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-line-continuations"></a>
<a class="index-entry-id" id="index-line-continuations-gawk"></a>
<a class="index-entry-id" id="index-gawk-line-continuation-in"></a>
<p>As a minor <code class="command">gawk</code> extension,
a statement that uses &lsquo;<samp class="samp">?:</samp>&rsquo; can be continued simply
by putting a newline after either character.
However, putting a newline in front
of either character does not work without using backslash continuation
(see <a class="pxref" href="#Statements_002fLines"><code class="command">awk</code> Statements Versus Lines</a>).
If <samp class="option">--posix</samp> is specified
(see <a class="pxref" href="#Options">Command-Line Options</a>), this extension is disabled.
</p>
<hr>
</div>
</div>
<div class="section-level-extent" id="Function-Calls">
<div class="nav-panel">
<p>
Next: <a href="#Precedence" accesskey="n" rel="next">Operator Precedence (How Operators Nest)</a>, Previous: <a href="#Truth-Values-and-Conditions" accesskey="p" rel="prev">Truth Values and Conditions</a>, Up: <a href="#Expressions" accesskey="u" rel="up">Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Function-Calls-1"><span>6.4 Function Calls<a class="copiable-link" href="#Function-Calls-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-function-calls"></a>

<p>A <em class="dfn">function</em> is a name for a particular calculation.
This enables you to
ask for it by name at any point in the program.  For
example, the function <code class="code">sqrt()</code> computes the square root of a number.
</p>
<a class="index-entry-id" id="index-functions-built_002din"></a>
<p>A fixed set of functions are <em class="dfn">built in</em>, which means they are
available in every <code class="command">awk</code> program.  The <code class="code">sqrt()</code> function is one
of these.  See <a class="xref" href="#Built_002din">Built-in Functions</a> for a list of built-in
functions and their descriptions.  In addition, you can define
functions for use in your program.
See <a class="xref" href="#User_002ddefined">User-Defined Functions</a>
for instructions on how to do this.
Finally, <code class="command">gawk</code> lets you write functions in C or C++
that may be called from your program (see <a class="pxref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>).
</p>
<a class="index-entry-id" id="index-arguments-in-function-calls"></a>
<p>The way to use a function is with a <em class="dfn">function call</em> expression,
which consists of the function name followed immediately by a list of
<em class="dfn">arguments</em> in parentheses.  The arguments are expressions that
provide the raw materials for the function&rsquo;s calculations.
When there is more than one argument, they are separated by commas.  If
there are no arguments, just write &lsquo;<samp class="samp">()</samp>&rsquo; after the function name.
The following examples show function calls with and without arguments:
</p>
<div class="example">
<pre class="example-preformatted">sqrt(x^2 + y^2)        <i class="i">one argument</i>
atan2(y, x)            <i class="i">two arguments</i>
rand()                 <i class="i">no arguments</i>
</pre></div>

<a class="index-entry-id" id="index-troubleshooting-function-call-syntax"></a>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> Do not put any space between the function name and the opening parenthesis!
A user-defined function name looks just like the name of a
variable&mdash;a space would make the expression look like concatenation of
a variable with an expression inside parentheses.
With built-in functions, space before the parenthesis is harmless, but
it is best not to get into the habit of using space to avoid mistakes
with user-defined functions.
</p></blockquote>

<p>Each function expects a particular number
of arguments.  For example, the <code class="code">sqrt()</code> function must be called with
a single argument, the number of which to take the square root:
</p>
<div class="example">
<pre class="example-preformatted">sqrt(<var class="var">argument</var>)
</pre></div>

<p>Some of the built-in functions have one or
more optional arguments.
If those arguments are not supplied, the functions
use a reasonable default value.
See <a class="xref" href="#Built_002din">Built-in Functions</a> for full details.  If arguments
are omitted in calls to user-defined functions, then those arguments are
treated as local variables. Such local variables act like the
empty string if referenced where a string value is required,
and like zero if referenced where a numeric value is required
(see <a class="pxref" href="#User_002ddefined">User-Defined Functions</a>).
</p>
<p>As an advanced feature, <code class="command">gawk</code> provides indirect function calls,
which is a way to choose the function to call at runtime, instead of
when you write the source code to your program. We defer discussion of
this feature until later; see <a class="ref" href="#Indirect-Calls">Indirect Function Calls</a>.
</p>
<a class="index-entry-id" id="index-side-effects-function-calls"></a>
<p>Like every other expression, the function call has a value, often
called the <em class="dfn">return value</em>, which is computed by the function
based on the arguments you give it.  In this example, the return value
of &lsquo;<samp class="samp">sqrt(<var class="var">argument</var>)</samp>&rsquo; is the square root of <var class="var">argument</var>.
The following program reads numbers, one number per line, and prints
the square root of each one:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '{ print &quot;The square root of&quot;, $1, &quot;is&quot;, sqrt($1) }'</kbd>
<kbd class="kbd">1</kbd>
-| The square root of 1 is 1
<kbd class="kbd">3</kbd>
-| The square root of 3 is 1.73205
<kbd class="kbd">5</kbd>
-| The square root of 5 is 2.23607
<kbd class="kbd">Ctrl-d</kbd>
</pre></div>

<p>A function can also have side effects, such as assigning
values to certain variables or doing I/O.
This program shows how the <code class="code">match()</code> function
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>)
changes the variables <code class="code">RSTART</code> and <code class="code">RLENGTH</code>:
</p>
<div class="example">
<pre class="example-preformatted">{
    if (match($1, $2))
        print RSTART, RLENGTH
    else
        print &quot;no match&quot;
}
</pre></div>

<p>Here is a sample run:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk -f matchit.awk</kbd>
<kbd class="kbd">aaccdd  c+</kbd>
-| 3 2
<kbd class="kbd">foo     bar</kbd>
-| no match
<kbd class="kbd">abcdefg e</kbd>
-| 5 1
</pre></div>

<hr>
</div>
<div class="section-level-extent" id="Precedence">
<div class="nav-panel">
<p>
Next: <a href="#Locales" accesskey="n" rel="next">Where You Are Makes a Difference</a>, Previous: <a href="#Function-Calls" accesskey="p" rel="prev">Function Calls</a>, Up: <a href="#Expressions" accesskey="u" rel="up">Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Operator-Precedence-_0028How-Operators-Nest_0029"><span>6.5 Operator Precedence (How Operators Nest)<a class="copiable-link" href="#Operator-Precedence-_0028How-Operators-Nest_0029"> &para;</a></span></h3>
<a class="index-entry-id" id="index-precedence-1"></a>
<a class="index-entry-id" id="index-operators-precedence-of-1"></a>

<p><em class="dfn">Operator precedence</em> determines how operators are grouped when
different operators appear close by in one expression.  For example,
&lsquo;<samp class="samp">*</samp>&rsquo; has higher precedence than &lsquo;<samp class="samp">+</samp>&rsquo;; thus, &lsquo;<samp class="samp">a + b * c</samp>&rsquo;
means to multiply <code class="code">b</code> and <code class="code">c</code>, and then add <code class="code">a</code> to the
product (i.e., &lsquo;<samp class="samp">a + (b * c)</samp>&rsquo;).
</p>
<p>The normal precedence of the operators can be overruled by using parentheses.
Think of the precedence rules as saying where the
parentheses are assumed to be.  In
fact, it is wise to always use parentheses whenever there is an unusual
combination of operators, because other people who read the program may
not remember what the precedence is in this case.
Even experienced programmers occasionally forget the exact rules,
which leads to mistakes.
Explicit parentheses help prevent
any such mistakes.
</p>
<p>When operators of equal precedence are used together, the leftmost
operator groups first, except for the assignment, conditional, and
exponentiation operators, which group in the opposite order.
Thus, &lsquo;<samp class="samp">a - b + c</samp>&rsquo; groups as &lsquo;<samp class="samp">(a - b) + c</samp>&rsquo; and
&lsquo;<samp class="samp">a = b = c</samp>&rsquo; groups as &lsquo;<samp class="samp">a = (b = c)</samp>&rsquo;.
</p>
<p>Normally the precedence of prefix unary operators does not matter,
because there is only one way to interpret
them: innermost first.  Thus, &lsquo;<samp class="samp">$++i</samp>&rsquo; means &lsquo;<samp class="samp">$(++i)</samp>&rsquo; and
&lsquo;<samp class="samp">++$x</samp>&rsquo; means &lsquo;<samp class="samp">++($x)</samp>&rsquo;.  However, when another operator follows
the operand, then the precedence of the unary operators can matter.
&lsquo;<samp class="samp">$x^2</samp>&rsquo; means &lsquo;<samp class="samp">($x)^2</samp>&rsquo;, but &lsquo;<samp class="samp">-x^2</samp>&rsquo; means
&lsquo;<samp class="samp">-(x^2)</samp>&rsquo;, because &lsquo;<samp class="samp">-</samp>&rsquo; has lower precedence than &lsquo;<samp class="samp">^</samp>&rsquo;,
whereas &lsquo;<samp class="samp">$</samp>&rsquo; has higher precedence.
Also, operators cannot be combined in a way that violates the
precedence rules; for example, &lsquo;<samp class="samp">$$0++--</samp>&rsquo; is not a valid
expression because the first &lsquo;<samp class="samp">$</samp>&rsquo; has higher precedence than the
&lsquo;<samp class="samp">++</samp>&rsquo;; to avoid the problem the expression can be rewritten as
&lsquo;<samp class="samp">$($0++)--</samp>&rsquo;.
</p>
<p>This list presents <code class="command">awk</code>&rsquo;s operators, in order of highest
to lowest precedence:
</p>
<dl class="table">
<dt><code class="code">(</code>&hellip;<code class="code">)</code></dt>
<dd><p>Grouping.
</p>
<a class="index-entry-id" id="index-_0024-_0028dollar-sign_0029-_0024-field-operator-1"></a>
<a class="index-entry-id" id="index-dollar-sign-_0028_0024_0029-_0024-field-operator-1"></a>
</dd>
<dt><code class="code">$</code></dt>
<dd><p>Field reference.
</p>
<a class="index-entry-id" id="index-_002b-_0028plus-sign_0029-_002b_002b-operator-2"></a>
<a class="index-entry-id" id="index-plus-sign-_0028_002b_0029-_002b_002b-operator-2"></a>
<a class="index-entry-id" id="index-_002d-_0028hyphen_0029-_002d_002d-operator-1"></a>
<a class="index-entry-id" id="index-hyphen-_0028_002d_0029-_002d_002d-operator-1"></a>
</dd>
<dt><code class="code">++ --</code></dt>
<dd><p>Increment, decrement.
</p>
<a class="index-entry-id" id="index-_005e-_0028caret_0029-_005e-operator"></a>
<a class="index-entry-id" id="index-caret-_0028_005e_0029-_005e-operator"></a>
<a class="index-entry-id" id="index-_002a-_0028asterisk_0029-_002a_002a-operator-1"></a>
<a class="index-entry-id" id="index-asterisk-_0028_002a_0029-_002a_002a-operator-1"></a>
</dd>
<dt><code class="code">^ **</code></dt>
<dd><p>Exponentiation.  These operators group right to left.
</p>
<a class="index-entry-id" id="index-_002b-_0028plus-sign_0029-_002b-operator"></a>
<a class="index-entry-id" id="index-plus-sign-_0028_002b_0029-_002b-operator"></a>
<a class="index-entry-id" id="index-_002d-_0028hyphen_0029-_002d-operator"></a>
<a class="index-entry-id" id="index-hyphen-_0028_002d_0029-_002d-operator"></a>
<a class="index-entry-id" id="index-_0021-_0028exclamation-point_0029-_0021-operator-1"></a>
<a class="index-entry-id" id="index-exclamation-point-_0028_0021_0029-_0021-operator-1"></a>
</dd>
<dt><code class="code">+ - !</code></dt>
<dd><p>Unary plus, minus, logical &ldquo;not.&rdquo;
</p>
<a class="index-entry-id" id="index-_002a-_0028asterisk_0029-_002a-operator-as-multiplication-operator"></a>
<a class="index-entry-id" id="index-asterisk-_0028_002a_0029-_002a-operator-as-multiplication-operator"></a>
<a class="index-entry-id" id="index-_002f-_0028forward-slash_0029-_002f-operator"></a>
<a class="index-entry-id" id="index-forward-slash-_0028_002f_0029-_002f-operator"></a>
<a class="index-entry-id" id="index-_0025-_0028percent-sign_0029-_0025-operator"></a>
<a class="index-entry-id" id="index-percent-sign-_0028_0025_0029-_0025-operator"></a>
</dd>
<dt><code class="code">* / %</code></dt>
<dd><p>Multiplication, division, remainder.
</p>
<a class="index-entry-id" id="index-_002b-_0028plus-sign_0029-_002b-operator-1"></a>
<a class="index-entry-id" id="index-plus-sign-_0028_002b_0029-_002b-operator-1"></a>
<a class="index-entry-id" id="index-_002d-_0028hyphen_0029-_002d-operator-1"></a>
<a class="index-entry-id" id="index-hyphen-_0028_002d_0029-_002d-operator-1"></a>
</dd>
<dt><code class="code">+ -</code></dt>
<dd><p>Addition, subtraction.
</p>
</dd>
<dt>String concatenation</dt>
<dd><p>There is no special symbol for concatenation.
The operands are simply written side by side
(see <a class="pxref" href="#Concatenation">String Concatenation</a>).
</p>
<a class="index-entry-id" id="index-_003c-_0028left-angle-bracket_0029-_003c-operator-1"></a>
<a class="index-entry-id" id="index-left-angle-bracket-_0028_003c_0029-_003c-operator-1"></a>
<a class="index-entry-id" id="index-_003c-_0028left-angle-bracket_0029-_003c_003d-operator-1"></a>
<a class="index-entry-id" id="index-left-angle-bracket-_0028_003c_0029-_003c_003d-operator-1"></a>
<a class="index-entry-id" id="index-_003e-_0028right-angle-bracket_0029-_003e_003d-operator-1"></a>
<a class="index-entry-id" id="index-right-angle-bracket-_0028_003e_0029-_003e_003d-operator-1"></a>
<a class="index-entry-id" id="index-_003e-_0028right-angle-bracket_0029-_003e-operator-1"></a>
<a class="index-entry-id" id="index-right-angle-bracket-_0028_003e_0029-_003e-operator-1"></a>
<a class="index-entry-id" id="index-_003d-_0028equals-sign_0029-_003d_003d-operator-1"></a>
<a class="index-entry-id" id="index-equals-sign-_0028_003d_0029-_003d_003d-operator-1"></a>
<a class="index-entry-id" id="index-_0021-_0028exclamation-point_0029-_0021_003d-operator-1"></a>
<a class="index-entry-id" id="index-exclamation-point-_0028_0021_0029-_0021_003d-operator-1"></a>
<a class="index-entry-id" id="index-_003e-_0028right-angle-bracket_0029-_003e_003e-operator-_0028I_002fO_0029-1"></a>
<a class="index-entry-id" id="index-right-angle-bracket-_0028_003e_0029-_003e_003e-operator-_0028I_002fO_0029-1"></a>
<a class="index-entry-id" id="index-operators-input_002foutput-5"></a>
<a class="index-entry-id" id="index-_007c-_0028vertical-bar_0029-_007c-operator-_0028I_002fO_0029-2"></a>
<a class="index-entry-id" id="index-vertical-bar-_0028_007c_0029-_007c-operator-_0028I_002fO_0029-1"></a>
<a class="index-entry-id" id="index-operators-input_002foutput-6"></a>
<a class="index-entry-id" id="index-_007c-_0028vertical-bar_0029-_007c_0026-operator-_0028I_002fO_0029-2"></a>
<a class="index-entry-id" id="index-vertical-bar-_0028_007c_0029-_007c_0026-operator-_0028I_002fO_0029-1"></a>
<a class="index-entry-id" id="index-operators-input_002foutput-7"></a>
</dd>
<dt><code class="code">&lt; &lt;= == != &gt; &gt;= &gt;&gt; | |&amp;</code></dt>
<dd><p>Relational and redirection.
The relational operators and the redirections have the same precedence
level.  Characters such as &lsquo;<samp class="samp">&gt;</samp>&rsquo; serve both as relationals and as
redirections; the context distinguishes between the two meanings.
</p>
<a class="index-entry-id" id="index-print-statement-I_002fO-operators-in"></a>
<a class="index-entry-id" id="index-printf-statement-I_002fO-operators-in"></a>
<p>Note that the I/O redirection operators in <code class="code">print</code> and <code class="code">printf</code>
statements belong to the statement level, not to expressions.  The
redirection does not produce an expression that could be the operand of
another operator.  As a result, it does not make sense to use a
redirection operator near another operator of lower precedence without
parentheses.  Such combinations (e.g., &lsquo;<samp class="samp">print foo &gt; a ? b : c</samp>&rsquo;)
result in syntax errors.
The correct way to write this statement is &lsquo;<samp class="samp">print foo &gt; (a ? b : c)</samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-_007e-_0028tilde_0029_002c-_007e-operator-6"></a>
<a class="index-entry-id" id="index-tilde-_0028_007e_0029_002c-_007e-operator-6"></a>
<a class="index-entry-id" id="index-_0021-_0028exclamation-point_0029-_0021_007e-operator-6"></a>
<a class="index-entry-id" id="index-exclamation-point-_0028_0021_0029-_0021_007e-operator-6"></a>
</dd>
<dt><code class="code">~ !~</code></dt>
<dd><p>Matching, nonmatching.
</p>
</dd>
<dt><a id="index-in-operator-1"></a><span><code class="code">in</code><a class="copiable-link" href="#index-in-operator-1"> &para;</a></span></dt>
<dd><p>Array membership.
</p>
<a class="index-entry-id" id="index-_0026-_0028ampersand_0029-_0026_0026-operator-1"></a>
<a class="index-entry-id" id="index-ampersand-_0028_0026_0029-_0026_0026-operator-1"></a>
</dd>
<dt><code class="code">&amp;&amp;</code></dt>
<dd><p>Logical &ldquo;and.&rdquo;
</p>
<a class="index-entry-id" id="index-_007c-_0028vertical-bar_0029-_007c_007c-operator-1"></a>
<a class="index-entry-id" id="index-vertical-bar-_0028_007c_0029-_007c_007c-operator-1"></a>
</dd>
<dt><code class="code">||</code></dt>
<dd><p>Logical &ldquo;or.&rdquo;
</p>
<a class="index-entry-id" id="index-_003f-_0028question-mark_0029-_003f_003a-operator"></a>
<a class="index-entry-id" id="index-question-mark-_0028_003f_0029-_003f_003a-operator"></a>
<a class="index-entry-id" id="index-_003a-_0028colon_0029-_003f_003a-operator"></a>
<a class="index-entry-id" id="index-colon-_0028_003a_0029-_003f_003a-operator"></a>
</dd>
<dt><code class="code">?:</code></dt>
<dd><p>Conditional.  This operator groups right to left.
</p>
<a class="index-entry-id" id="index-_002b-_0028plus-sign_0029-_002b_003d-operator-1"></a>
<a class="index-entry-id" id="index-plus-sign-_0028_002b_0029-_002b_003d-operator-1"></a>
<a class="index-entry-id" id="index-_002d-_0028hyphen_0029-_002d_003d-operator-1"></a>
<a class="index-entry-id" id="index-hyphen-_0028_002d_0029-_002d_003d-operator-1"></a>
<a class="index-entry-id" id="index-_002a-_0028asterisk_0029-_002a_003d-operator-1"></a>
<a class="index-entry-id" id="index-asterisk-_0028_002a_0029-_002a_003d-operator-1"></a>
<a class="index-entry-id" id="index-_002a-_0028asterisk_0029-_002a_002a_003d-operator-1"></a>
<a class="index-entry-id" id="index-asterisk-_0028_002a_0029-_002a_002a_003d-operator-1"></a>
<a class="index-entry-id" id="index-_002f-_0028forward-slash_0029-_002f_003d-operator-1"></a>
<a class="index-entry-id" id="index-forward-slash-_0028_002f_0029-_002f_003d-operator-1"></a>
<a class="index-entry-id" id="index-_0025-_0028percent-sign_0029-_0025_003d-operator-1"></a>
<a class="index-entry-id" id="index-percent-sign-_0028_0025_0029-_0025_003d-operator-1"></a>
<a class="index-entry-id" id="index-_005e-_0028caret_0029-_005e_003d-operator-1"></a>
<a class="index-entry-id" id="index-caret-_0028_005e_0029-_005e_003d-operator-1"></a>
</dd>
<dt><code class="code">= += -= *= /= %= ^= **=</code></dt>
<dd><p>Assignment.  These operators group right to left.
</p></dd>
</dl>

<a class="index-entry-id" id="index-POSIX-awk-_002a_002a-operator-and"></a>
<a class="index-entry-id" id="index-portability-operators-not-in-POSIX-awk"></a>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> The &lsquo;<samp class="samp">|&amp;</samp>&rsquo;, &lsquo;<samp class="samp">**</samp>&rsquo;, and &lsquo;<samp class="samp">**=</samp>&rsquo; operators are not specified by POSIX.
For maximum portability, do not use them.
</p></blockquote>

<hr>
</div>
<div class="section-level-extent" id="Locales">
<div class="nav-panel">
<p>
Next: <a href="#Expressions-Summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Precedence" accesskey="p" rel="prev">Operator Precedence (How Operators Nest)</a>, Up: <a href="#Expressions" accesskey="u" rel="up">Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Where-You-Are-Makes-a-Difference"><span>6.6 Where You Are Makes a Difference<a class="copiable-link" href="#Where-You-Are-Makes-a-Difference"> &para;</a></span></h3>
<a class="index-entry-id" id="index-locale_002c-definition-of"></a>

<p>Modern systems support the notion of <em class="dfn">locales</em>: a way to tell the
system about the local character set and language.  The ISO C standard
defines a default <code class="code">&quot;C&quot;</code> locale, which is an environment that is
typical of what many C programmers are used to.
</p>
<p>Once upon a time, the locale setting used to affect regexp matching,
but this is no longer true (see <a class="pxref" href="#Ranges-and-Locales">Regexp Ranges and Locales: A Long Sad Story</a>).
</p>
<p>Locales can affect record splitting.  For the normal case of &lsquo;<samp class="samp">RS =
&quot;\n&quot;</samp>&rsquo;, the locale is largely irrelevant.  For other single-character
record separators, setting &lsquo;<samp class="samp">LC_ALL=C</samp>&rsquo; in the environment will
give you much better performance when reading records.  Otherwise,
<code class="command">gawk</code> has to make several function calls, <em class="emph">per input
character</em>, to find the record terminator.
</p>
<p>Locales can affect how dates and times are formatted (see <a class="pxref" href="#Time-Functions">Time Functions</a>).  For example, a common way to abbreviate the date September
4, 2015, in the United States is &ldquo;9/4/15.&rdquo;  In many countries in
Europe, however, it is abbreviated &ldquo;4.9.15.&rdquo;  Thus, the &lsquo;<samp class="samp">%x</samp>&rsquo;
specification in a <code class="code">&quot;US&quot;</code> locale might produce &lsquo;<samp class="samp">9/4/15</samp>&rsquo;,
while in a <code class="code">&quot;EUROPE&quot;</code> locale, it might produce &lsquo;<samp class="samp">4.9.15</samp>&rsquo;.
</p>
<p>According to POSIX, string comparison is also affected by locales (similar
to regular expressions).  The details are presented in <a class="ref" href="#POSIX-String-Comparison">String Comparison Based on Locale Collating Order</a>.
</p>
<p>Finally, the locale affects the value of the decimal point character
used when <code class="command">gawk</code> parses input data.  This is discussed in detail
in <a class="ref" href="#Conversion">Conversion of Strings and Numbers</a>.
</p>
<hr>
</div>
<div class="section-level-extent" id="Expressions-Summary">
<div class="nav-panel">
<p>
Previous: <a href="#Locales" accesskey="p" rel="prev">Where You Are Makes a Difference</a>, Up: <a href="#Expressions" accesskey="u" rel="up">Expressions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary-5"><span>6.7 Summary<a class="copiable-link" href="#Summary-5"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>Expressions are the basic elements of computation in programs.  They are
built from constants, variables, function calls, and combinations of the
various kinds of values with operators.

</li><li><code class="command">awk</code> supplies three kinds of constants: numeric, string, and
regexp.  <code class="command">gawk</code> lets you specify numeric constants in octal
and hexadecimal (bases 8 and 16) as well as decimal (base 10).
In certain contexts, a standalone regexp constant such as <code class="code">/foo/</code>
has the same meaning as &lsquo;<samp class="samp">$0 ~ /foo/</samp>&rsquo;.

</li><li>Variables hold values between uses in computations. A number of built-in
variables provide information to your <code class="command">awk</code> program, and a number
of others let you control how <code class="command">awk</code> behaves.

</li><li>Numbers are automatically converted to strings, and strings to numbers,
as needed by <code class="command">awk</code>. Numeric values are converted as if they were
formatted with <code class="code">sprintf()</code> using the format in <code class="code">CONVFMT</code>.
Locales can influence the conversions.

</li><li><code class="command">awk</code> provides the usual arithmetic operators (addition,
subtraction, multiplication, division, modulus), and unary plus and minus.
It also provides comparison operators, Boolean operators, an array membership
testing operator, and regexp
matching operators.  String concatenation is accomplished by placing
two expressions next to each other; there is no explicit operator.
The three-operand &lsquo;<samp class="samp">?:</samp>&rsquo; operator provides an &ldquo;if-else&rdquo; test within
expressions.

</li><li>Assignment operators provide convenient shorthands for common arithmetic
operations.

</li><li>In <code class="command">awk</code>, a value is considered to be true if it is nonzero
<em class="emph">or</em> non-null. Otherwise, the value is false.

</li><li>A variable&rsquo;s type is set upon each assignment and may change over its
lifetime.  The type determines how it behaves in comparisons (string
or numeric).

</li><li>Function calls return a value that may be used as part of a larger
expression.  Expressions used to pass parameter values are fully
evaluated before the function is called.  <code class="command">awk</code> provides
built-in and user-defined functions; this is described in
<a class="ref" href="#Functions">Functions</a>.

</li><li>Operator precedence specifies the order in which operations are performed,
unless explicitly overridden by parentheses.  <code class="command">awk</code>&rsquo;s operator
precedence is compatible with that of C.

</li><li>Locales can affect the format of data as output by an <code class="command">awk</code>
program, and occasionally the format for data read as input.

</li></ul>


<hr>
</div>
</div>
<div class="chapter-level-extent" id="Patterns-and-Actions">
<div class="nav-panel">
<p>
Next: <a href="#Arrays" accesskey="n" rel="next">Arrays in <code class="command">awk</code></a>, Previous: <a href="#Expressions" accesskey="p" rel="prev">Expressions</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Patterns_002c-Actions_002c-and-Variables"><span>7 Patterns, Actions, and Variables<a class="copiable-link" href="#Patterns_002c-Actions_002c-and-Variables"> &para;</a></span></h2>
<a class="index-entry-id" id="index-patterns"></a>

<p>As you have already seen, each <code class="command">awk</code> statement consists of
a pattern with an associated action.  This chapter describes how
you build patterns and actions, what kinds of things you can do within
actions, and <code class="command">awk</code>&rsquo;s predefined variables.
</p>
<p>The pattern&ndash;action rules and the statements available for use
within actions form the core of <code class="command">awk</code> programming.
In a sense, everything covered
up to here has been the foundation
that programs are built on top of.  Now it&rsquo;s time to start
building something useful.
</p>

<ul class="mini-toc">
<li><a href="#Pattern-Overview" accesskey="1">Pattern Elements</a></li>
<li><a href="#Using-Shell-Variables" accesskey="2">Using Shell Variables in Programs</a></li>
<li><a href="#Action-Overview" accesskey="3">Actions</a></li>
<li><a href="#Statements" accesskey="4">Control Statements in Actions</a></li>
<li><a href="#Built_002din-Variables" accesskey="5">Predefined Variables</a></li>
<li><a href="#Pattern-Action-Summary" accesskey="6">Summary</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Pattern-Overview">
<div class="nav-panel">
<p>
Next: <a href="#Using-Shell-Variables" accesskey="n" rel="next">Using Shell Variables in Programs</a>, Up: <a href="#Patterns-and-Actions" accesskey="u" rel="up">Patterns, Actions, and Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Pattern-Elements"><span>7.1 Pattern Elements<a class="copiable-link" href="#Pattern-Elements"> &para;</a></span></h3>


<a class="index-entry-id" id="index-patterns-types-of"></a>
<p>Patterns in <code class="command">awk</code> control the execution of rules&mdash;a rule is
executed when its pattern matches the current input record.
The following is a summary of the types of <code class="command">awk</code> patterns:
</p>
<dl class="table">
<dt><code class="code">/<var class="var">regular expression</var>/</code></dt>
<dd><p>A regular expression. It matches when the text of the
input record fits the regular expression.
(See <a class="xref" href="#Regexp">Regular Expressions</a>.)
</p>
</dd>
<dt><code class="code"><var class="var">expression</var></code></dt>
<dd><p>A single expression.  It matches when its value
is nonzero (if a number) or non-null (if a string).
(See <a class="xref" href="#Expression-Patterns">Expressions as Patterns</a>.)
</p>
</dd>
<dt><code class="code"><var class="var">begpat</var>, <var class="var">endpat</var></code></dt>
<dd><p>A pair of patterns separated by a comma, specifying a <em class="dfn">range</em> of records.
The range includes both the initial record that matches <var class="var">begpat</var> and
the final record that matches <var class="var">endpat</var>.
(See <a class="xref" href="#Ranges">Specifying Record Ranges with Patterns</a>.)
</p>
</dd>
<dt><code class="code">BEGIN</code></dt>
<dt><code class="code">END</code></dt>
<dd><p>Special patterns for you to supply startup or cleanup actions for your
<code class="command">awk</code> program.
(See <a class="xref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>.)
</p>
</dd>
<dt><code class="code">BEGINFILE</code></dt>
<dt><code class="code">ENDFILE</code></dt>
<dd><p>Special patterns for you to supply startup or cleanup actions to be
done on a per-file basis.
(See <a class="xref" href="#BEGINFILE_002fENDFILE">The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a>.)
</p>
</dd>
<dt><code class="code"><var class="var">empty</var></code></dt>
<dd><p>The empty pattern matches every input record.
(See <a class="xref" href="#Empty">The Empty Pattern</a>.)
</p></dd>
</dl>

<ul class="mini-toc">
<li><a href="#Regexp-Patterns" accesskey="1">Regular Expressions as Patterns</a></li>
<li><a href="#Expression-Patterns" accesskey="2">Expressions as Patterns</a></li>
<li><a href="#Ranges" accesskey="3">Specifying Record Ranges with Patterns</a></li>
<li><a href="#BEGIN_002fEND" accesskey="4">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a></li>
<li><a href="#BEGINFILE_002fENDFILE" accesskey="5">The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a></li>
<li><a href="#Empty" accesskey="6">The Empty Pattern</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Regexp-Patterns">
<div class="nav-panel">
<p>
Next: <a href="#Expression-Patterns" accesskey="n" rel="next">Expressions as Patterns</a>, Up: <a href="#Pattern-Overview" accesskey="u" rel="up">Pattern Elements</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Regular-Expressions-as-Patterns"><span>7.1.1 Regular Expressions as Patterns<a class="copiable-link" href="#Regular-Expressions-as-Patterns"> &para;</a></span></h4>
<a class="index-entry-id" id="index-patterns-regexp-constants-as-1"></a>
<a class="index-entry-id" id="index-regular-expressions-as-patterns-1"></a>

<p>Regular expressions are one of the first kinds of patterns presented
in this book.
This kind of pattern is simply a regexp constant in the pattern part of
a rule.  Its  meaning is &lsquo;<samp class="samp">$0 ~ /<var class="var">pattern</var>/</samp>&rsquo;.
The pattern matches when the input record matches the regexp.
For example:
</p>
<div class="example">
<pre class="example-preformatted">/foo|bar|baz/  { buzzwords++ }
END            { print buzzwords, &quot;buzzwords seen&quot; }
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Expression-Patterns">
<div class="nav-panel">
<p>
Next: <a href="#Ranges" accesskey="n" rel="next">Specifying Record Ranges with Patterns</a>, Previous: <a href="#Regexp-Patterns" accesskey="p" rel="prev">Regular Expressions as Patterns</a>, Up: <a href="#Pattern-Overview" accesskey="u" rel="up">Pattern Elements</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Expressions-as-Patterns"><span>7.1.2 Expressions as Patterns<a class="copiable-link" href="#Expressions-as-Patterns"> &para;</a></span></h4>
<a class="index-entry-id" id="index-expressions-as-patterns"></a>
<a class="index-entry-id" id="index-patterns-expressions-as"></a>

<p>Any <code class="command">awk</code> expression is valid as an <code class="command">awk</code> pattern.
The pattern matches if the expression&rsquo;s value is nonzero (if a
number) or non-null (if a string).
The expression is reevaluated each time the rule is tested against a new
input record.  If the expression uses fields such as <code class="code">$1</code>, the
value depends directly on the new input record&rsquo;s text; otherwise, it
depends on only what has happened so far in the execution of the
<code class="command">awk</code> program.
</p>
<a class="index-entry-id" id="index-comparison-expressions-as-patterns"></a>
<a class="index-entry-id" id="index-patterns-comparison-expressions-as"></a>
<p>Comparison expressions, using the comparison operators described in
<a class="ref" href="#Typing-and-Comparison">Variable Typing and Comparison Expressions</a>,
are a very common kind of pattern.
Regexp matching and nonmatching are also very common expressions.
The left operand of the &lsquo;<samp class="samp">~</samp>&rsquo; and &lsquo;<samp class="samp">!~</samp>&rsquo; operators is a string.
The right operand is either a constant regular expression enclosed in
slashes (<code class="code">/<var class="var">regexp</var>/</code>), or any expression whose string value
is used as a dynamic regular expression
(see <a class="pxref" href="#Computed-Regexps">Using Dynamic Regexps</a>).
The following example prints the second field of each input record
whose first field is precisely &lsquo;<samp class="samp">li</samp>&rsquo;:
</p>
<a class="index-entry-id" id="index-_002f-_0028forward-slash_0029-patterns-and"></a>
<a class="index-entry-id" id="index-forward-slash-_0028_002f_0029-patterns-and"></a>
<a class="index-entry-id" id="index-_007e-_0028tilde_0029_002c-_007e-operator-7"></a>
<a class="index-entry-id" id="index-tilde-_0028_007e_0029_002c-_007e-operator-7"></a>
<a class="index-entry-id" id="index-_0021-_0028exclamation-point_0029-_0021_007e-operator-7"></a>
<a class="index-entry-id" id="index-exclamation-point-_0028_0021_0029-_0021_007e-operator-7"></a>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '$1 == &quot;li&quot; { print $2 }' mail-list</kbd>
</pre></div>

<p>(There is no output, because there is no person with the exact name &lsquo;<samp class="samp">li</samp>&rsquo;.)
Contrast this with the following regular expression match, which
accepts any record with a first field that contains &lsquo;<samp class="samp">li</samp>&rsquo;:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '$1 ~ /li/ { print $2 }' mail-list</kbd>
-| 555-5553
-| 555-6699
</pre></div>

<a class="index-entry-id" id="index-regexp-constants-as-patterns"></a>
<a class="index-entry-id" id="index-patterns-regexp-constants-as-2"></a>
<p>A regexp constant as a pattern is also a special case of an expression
pattern.  The expression <code class="code">/li/</code> has the value one if &lsquo;<samp class="samp">li</samp>&rsquo;
appears in the current input record. Thus, as a pattern, <code class="code">/li/</code>
matches any record containing &lsquo;<samp class="samp">li</samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-Boolean-expressions-as-patterns"></a>
<a class="index-entry-id" id="index-patterns-Boolean-expressions-as"></a>
<p>Boolean expressions are also commonly used as patterns.
Whether the pattern
matches an input record depends on whether its subexpressions match.
For example, the following command prints all the records in
<samp class="file">mail-list</samp> that contain both &lsquo;<samp class="samp">edu</samp>&rsquo; and &lsquo;<samp class="samp">li</samp>&rsquo;:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '/edu/ &amp;&amp; /li/' mail-list</kbd>
-| Samuel       555-3430     samuel.lanceolis@shu.edu        A
</pre></div>

<p>The following command prints all records in
<samp class="file">mail-list</samp> that contain <em class="emph">either</em> &lsquo;<samp class="samp">edu</samp>&rsquo; or &lsquo;<samp class="samp">li</samp>&rsquo;
(or both, of course):
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '/edu/ || /li/' mail-list</kbd>
-| Amelia       555-5553     amelia.zodiacusque@gmail.com    F
-| Broderick    555-0542     broderick.aliquotiens@yahoo.com R
-| Fabius       555-1234     fabius.undevicesimus@ucb.edu    F
-| Julie        555-6699     julie.perscrutabor@skeeve.com   F
-| Samuel       555-3430     samuel.lanceolis@shu.edu        A
-| Jean-Paul    555-2127     jeanpaul.campanorum@nyu.edu     R
</pre></div>

<p>The following command prints all records in
<samp class="file">mail-list</samp> that do <em class="emph">not</em> contain the string &lsquo;<samp class="samp">li</samp>&rsquo;:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '! /li/' mail-list</kbd>
-| Anthony      555-3412     anthony.asserturo@hotmail.com   A
-| Becky        555-7685     becky.algebrarum@gmail.com      A
-| Bill         555-1675     bill.drowning@hotmail.com       A
-| Camilla      555-2912     camilla.infusarum@skynet.be     R
-| Fabius       555-1234     fabius.undevicesimus@ucb.edu    F
</pre><div class="group"><pre class="example-preformatted">-| Martin       555-6480     martin.codicibus@hotmail.com    A
-| Jean-Paul    555-2127     jeanpaul.campanorum@nyu.edu     R
</pre></div></div>

<a class="index-entry-id" id="index-BEGIN-pattern-Boolean-patterns-and"></a>
<a class="index-entry-id" id="index-END-pattern-Boolean-patterns-and"></a>
<a class="index-entry-id" id="index-BEGINFILE-pattern-Boolean-patterns-and"></a>
<a class="index-entry-id" id="index-ENDFILE-pattern-Boolean-patterns-and"></a>
<p>The subexpressions of a Boolean operator in a pattern can be constant regular
expressions, comparisons, or any other <code class="command">awk</code> expressions.  Range
patterns are not expressions, so they cannot appear inside Boolean
patterns.  Likewise, the special patterns <code class="code">BEGIN</code>, <code class="code">END</code>,
<code class="code">BEGINFILE</code>, and <code class="code">ENDFILE</code>,
which never match any input record, are not expressions and cannot
appear inside Boolean patterns.
</p>
<p>The precedence of the different operators that can appear in
patterns is described in <a class="ref" href="#Precedence">Operator Precedence (How Operators Nest)</a>.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Ranges">
<div class="nav-panel">
<p>
Next: <a href="#BEGIN_002fEND" accesskey="n" rel="next">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>, Previous: <a href="#Expression-Patterns" accesskey="p" rel="prev">Expressions as Patterns</a>, Up: <a href="#Pattern-Overview" accesskey="u" rel="up">Pattern Elements</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Specifying-Record-Ranges-with-Patterns"><span>7.1.3 Specifying Record Ranges with Patterns<a class="copiable-link" href="#Specifying-Record-Ranges-with-Patterns"> &para;</a></span></h4>

<a class="index-entry-id" id="index-range-patterns"></a>
<a class="index-entry-id" id="index-patterns-ranges-in"></a>
<a class="index-entry-id" id="index-lines-matching-ranges-of"></a>
<a class="index-entry-id" id="index-_002c-_0028comma_0029_002c-in-range-patterns"></a>
<a class="index-entry-id" id="index-comma-_0028_002c_0029_002c-in-range-patterns"></a>
<p>A <em class="dfn">range pattern</em> is made of two patterns separated by a comma, in
the form &lsquo;<samp class="samp"><var class="var">begpat</var>, <var class="var">endpat</var></samp>&rsquo;.  It is used to match ranges of
consecutive input records.  The first pattern, <var class="var">begpat</var>, controls
where the range begins, while <var class="var">endpat</var> controls where
the pattern ends.  For example, the following:
</p>
<div class="example">
<pre class="example-preformatted">awk '$1 == &quot;on&quot;, $1 == &quot;off&quot;' myfile
</pre></div>

<p>prints every record in <samp class="file">myfile</samp> between &lsquo;<samp class="samp">on</samp>&rsquo;/&lsquo;<samp class="samp">off</samp>&rsquo; pairs, inclusive.
</p>
<p>A range pattern starts out by matching <var class="var">begpat</var> against every
input record.  When a record matches <var class="var">begpat</var>, the range pattern is
<em class="dfn">turned on</em>, and the range pattern matches this record as well.  As long as
the range pattern stays turned on, it automatically matches every input
record read.  The range pattern also matches <var class="var">endpat</var> against every
input record; when this succeeds, the range pattern is <em class="dfn">turned off</em> again
for the following record.  Then the range pattern goes back to checking
<var class="var">begpat</var> against each record.
</p>
<a class="index-entry-id" id="index-if-statement-actions_002c-changing"></a>
<p>The record that turns on the range pattern and the one that turns it
off both match the range pattern.  If you don&rsquo;t want to operate on
these records, you can write <code class="code">if</code> statements in the rule&rsquo;s action
to distinguish them from the records you are interested in.
</p>
<p>It is possible for a pattern to be turned on and off by the same
record. If the record satisfies both conditions, then the action is
executed for just that record.
For example, suppose there is text between two identical markers (e.g.,
the &lsquo;<samp class="samp">%</samp>&rsquo; symbol), each on its own line, that should be ignored.
A first attempt would be to
combine a range pattern that describes the delimited text with the
<code class="code">next</code> statement
(not discussed yet, see <a class="pxref" href="#Next-Statement">The <code class="code">next</code> Statement</a>).
This causes <code class="command">awk</code> to skip any further processing of the current
record and start over again with the next input record. Such a program
looks like this:
</p>
<div class="example">
<pre class="example-preformatted">/^%$/,/^%$/    { next }
               { print }
</pre></div>

<a class="index-entry-id" id="index-lines-skipping-between-markers"></a>
<p>This program fails because the range pattern is both turned on and turned off
by the first line, which just has a &lsquo;<samp class="samp">%</samp>&rsquo; on it.  To accomplish this task,
write the program in the following manner, using a flag:
</p>
<a class="index-entry-id" id="index-_0021-_0028exclamation-point_0029-_0021-operator-2"></a>
<div class="example">
<pre class="example-preformatted">/^%$/     { skip = ! skip; next }
skip == 1 { next } # skip lines with `skip' set
</pre></div>

<p>In a range pattern, the comma (&lsquo;<samp class="samp">,</samp>&rsquo;) has the lowest precedence of
all the operators (i.e., it is evaluated last).  Thus, the following
program attempts to combine a range pattern with another, simpler test:
</p>
<div class="example">
<pre class="example-preformatted">echo Yes | awk '/1/,/2/ || /Yes/'
</pre></div>

<p>The intent of this program is &lsquo;<samp class="samp">(/1/,/2/) || /Yes/</samp>&rsquo;.
However, <code class="command">awk</code> interprets this as &lsquo;<samp class="samp">/1/, (/2/ || /Yes/)</samp>&rsquo;.
This cannot be changed or worked around; range patterns do not combine
with other patterns:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo Yes | gawk '(/1/,/2/) || /Yes/'</kbd>
error&rarr; gawk: cmd. line:1: (/1/,/2/) || /Yes/
error&rarr; gawk: cmd. line:1:           ^ syntax error
</pre></div>

<a class="index-entry-id" id="index-range-patterns-line-continuation-and"></a>
<a class="index-entry-id" id="index-dark-corner-range-patterns_002c-line-continuation-and"></a>
<p>As a minor point of interest, although it is poor style,
POSIX allows you to put a newline after the comma in
a range pattern.  (d.c.)
</p>
<hr>
</div>
<div class="subsection-level-extent" id="BEGIN_002fEND">
<div class="nav-panel">
<p>
Next: <a href="#BEGINFILE_002fENDFILE" accesskey="n" rel="next">The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a>, Previous: <a href="#Ranges" accesskey="p" rel="prev">Specifying Record Ranges with Patterns</a>, Up: <a href="#Pattern-Overview" accesskey="u" rel="up">Pattern Elements</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-BEGIN-and-END-Special-Patterns"><span>7.1.4 The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns<a class="copiable-link" href="#The-BEGIN-and-END-Special-Patterns"> &para;</a></span></h4>

<a class="index-entry-id" id="index-BEGIN-pattern-1"></a>
<a class="index-entry-id" id="index-END-pattern"></a>
<p>All the patterns described so far are for matching input records.
The <code class="code">BEGIN</code> and <code class="code">END</code> special patterns are different.
They supply startup and cleanup actions for <code class="command">awk</code> programs.
<code class="code">BEGIN</code> and <code class="code">END</code> rules must have actions; there is no default
action for these rules because there is no current record when they run.
<code class="code">BEGIN</code> and <code class="code">END</code> rules are often referred to as
&ldquo;<code class="code">BEGIN</code> and <code class="code">END</code> blocks&rdquo; by longtime <code class="command">awk</code>
programmers.
</p>

<ul class="mini-toc">
<li><a href="#Using-BEGIN_002fEND" accesskey="1">Startup and Cleanup Actions</a></li>
<li><a href="#I_002fO-And-BEGIN_002fEND" accesskey="2">Input/Output from <code class="code">BEGIN</code> and <code class="code">END</code> Rules</a></li>
</ul>
<hr>
<div class="subsubsection-level-extent" id="Using-BEGIN_002fEND">
<div class="nav-panel">
<p>
Next: <a href="#I_002fO-And-BEGIN_002fEND" accesskey="n" rel="next">Input/Output from <code class="code">BEGIN</code> and <code class="code">END</code> Rules</a>, Up: <a href="#BEGIN_002fEND" accesskey="u" rel="up">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Startup-and-Cleanup-Actions"><span>7.1.4.1 Startup and Cleanup Actions<a class="copiable-link" href="#Startup-and-Cleanup-Actions"> &para;</a></span></h4>

<a class="index-entry-id" id="index-BEGIN-pattern-2"></a>
<a class="index-entry-id" id="index-END-pattern-1"></a>
<p>A <code class="code">BEGIN</code> rule is executed once only, before the first input record
is read. Likewise, an <code class="code">END</code> rule is executed once only, after all the
input is read.  For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '</kbd>
&gt; <kbd class="kbd">BEGIN { print &quot;Analysis of \&quot;li\&quot;&quot; }</kbd>
&gt; <kbd class="kbd">/li/  { ++n }</kbd>
&gt; <kbd class="kbd">END   { print &quot;\&quot;li\&quot; appears in&quot;, n, &quot;records.&quot; }' mail-list</kbd>
-| Analysis of &quot;li&quot;
-| &quot;li&quot; appears in 4 records.
</pre></div>

<a class="index-entry-id" id="index-BEGIN-pattern-operators-and"></a>
<a class="index-entry-id" id="index-END-pattern-operators-and"></a>
<p>This program finds the number of records in the input file <samp class="file">mail-list</samp>
that contain the string &lsquo;<samp class="samp">li</samp>&rsquo;.  The <code class="code">BEGIN</code> rule prints a title
for the report.  There is no need to use the <code class="code">BEGIN</code> rule to
initialize the counter <code class="code">n</code> to zero, as <code class="command">awk</code> does this
automatically (see <a class="pxref" href="#Variables">Variables</a>).
The second rule increments the variable <code class="code">n</code> every time a
record containing the pattern &lsquo;<samp class="samp">li</samp>&rsquo; is read.  The <code class="code">END</code> rule
prints the value of <code class="code">n</code> at the end of the run.
</p>
<p>The special patterns <code class="code">BEGIN</code> and <code class="code">END</code> cannot be used in ranges
or with Boolean operators (indeed, they cannot be used with any operators).
An <code class="command">awk</code> program may have multiple <code class="code">BEGIN</code> and/or <code class="code">END</code>
rules.  They are executed in the order in which they appear: all the <code class="code">BEGIN</code>
rules at startup and all the <code class="code">END</code> rules at termination.
</p>
<p><code class="code">BEGIN</code> and <code class="code">END</code> rules may be intermixed with other rules.
This feature was added in the 1987 version of <code class="command">awk</code> and is included
in the POSIX standard.
The original (1978) version of <code class="command">awk</code>
required the <code class="code">BEGIN</code> rule to be placed at the beginning of the
program, the <code class="code">END</code> rule to be placed at the end, and only allowed one of
each.
This is no longer required, but it is a good idea to follow this template
in terms of program organization and readability.
</p>
<p>Multiple <code class="code">BEGIN</code> and <code class="code">END</code> rules are useful for writing
library functions, because each library file can have its own <code class="code">BEGIN</code> and/or
<code class="code">END</code> rule to do its own initialization and/or cleanup.
The order in which library functions are named on the command line
controls the order in which their <code class="code">BEGIN</code> and <code class="code">END</code> rules are
executed.  Therefore, you have to be careful when writing such rules in
library files so that the order in which they are executed doesn&rsquo;t matter.
See <a class="xref" href="#Options">Command-Line Options</a> for more information on
using library functions.
See <a class="xref" href="#Library-Functions">A Library of <code class="command">awk</code> Functions</a>,
for a number of useful library functions.
</p>
<p>If an <code class="command">awk</code> program has only <code class="code">BEGIN</code> rules and no
other rules, then the program exits after the <code class="code">BEGIN</code> rules are
run.<a class="footnote" id="DOCF41" href="#FOOT41"><sup>41</sup></a>  However, if an
<code class="code">END</code> rule exists, then the input is read, even if there are
no other rules in the program.  This is necessary in case the <code class="code">END</code>
rule checks the <code class="code">FNR</code> and <code class="code">NR</code> variables, or the fields.
</p>
<hr>
</div>
<div class="subsubsection-level-extent" id="I_002fO-And-BEGIN_002fEND">
<div class="nav-panel">
<p>
Previous: <a href="#Using-BEGIN_002fEND" accesskey="p" rel="prev">Startup and Cleanup Actions</a>, Up: <a href="#BEGIN_002fEND" accesskey="u" rel="up">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Input_002fOutput-from-BEGIN-and-END-Rules"><span>7.1.4.2 Input/Output from <code class="code">BEGIN</code> and <code class="code">END</code> Rules<a class="copiable-link" href="#Input_002fOutput-from-BEGIN-and-END-Rules"> &para;</a></span></h4>

<a class="index-entry-id" id="index-input_002foutput-from-BEGIN-and-END"></a>
<p>There are several (sometimes subtle) points to be aware of when doing I/O
from a <code class="code">BEGIN</code> or <code class="code">END</code> rule.
The first has to do with the value of <code class="code">$0</code> in a <code class="code">BEGIN</code>
rule.  Because <code class="code">BEGIN</code> rules are executed before any input is read,
there simply is no input record, and therefore no fields, when
executing <code class="code">BEGIN</code> rules.  References to <code class="code">$0</code> and the fields
yield a null string or zero, depending upon the context.  One way
to give <code class="code">$0</code> a real value is to execute a <code class="code">getline</code> command
without a variable (see <a class="pxref" href="#Getline">Explicit Input with <code class="code">getline</code></a>).
Another way is simply to assign a value to <code class="code">$0</code>.
</p>
<a class="index-entry-id" id="index-Brian-Kernighan_0027s-awk-7"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-BEGIN_002fEND-patterns"></a>
<a class="index-entry-id" id="index-POSIX-awk-BEGIN_002fEND-patterns"></a>
<a class="index-entry-id" id="index-print-statement-BEGIN_002fEND-patterns-and"></a>
<a class="index-entry-id" id="index-BEGIN-pattern-print-statement-and"></a>
<a class="index-entry-id" id="index-END-pattern-print-statement-and"></a>
<p>The second point is similar to the first, but from the other direction.
Traditionally, due largely to implementation issues, <code class="code">$0</code> and
<code class="code">NF</code> were <em class="emph">undefined</em> inside an <code class="code">END</code> rule.
The POSIX standard specifies that <code class="code">NF</code> is available in an <code class="code">END</code>
rule. It contains the number of fields from the last input record.
Most probably due to an oversight, the standard does not say that <code class="code">$0</code>
is also preserved, although logically one would think that it should be.
In fact, all of BWK <code class="command">awk</code>, <code class="command">mawk</code>, and <code class="command">gawk</code>
preserve the value of <code class="code">$0</code> for use in <code class="code">END</code> rules.  Be aware,
however, that some other implementations and many older versions
of Unix <code class="command">awk</code> do not.
</p>
<p>The third point follows from the first two.  The meaning of &lsquo;<samp class="samp">print</samp>&rsquo;
inside a <code class="code">BEGIN</code> or <code class="code">END</code> rule is the same as always:
&lsquo;<samp class="samp">print $0</samp>&rsquo;.  If <code class="code">$0</code> is the null string, then this prints an
empty record.  Many longtime <code class="command">awk</code> programmers use an unadorned
&lsquo;<samp class="samp">print</samp>&rsquo; in <code class="code">BEGIN</code> and <code class="code">END</code> rules to mean &lsquo;<samp class="samp">print&nbsp;&quot;&quot;<!-- /@w --></samp>&rsquo;,
relying on <code class="code">$0</code> being null.  Although one might generally get away with
this in <code class="code">BEGIN</code> rules, it is a very bad idea in <code class="code">END</code> rules,
at least in <code class="command">gawk</code>.  It is also poor style, because if an empty
line is needed in the output, the program should print one explicitly.
</p>
<a class="index-entry-id" id="index-next-statement-BEGIN_002fEND-patterns-and"></a>
<a class="index-entry-id" id="index-nextfile-statement-BEGIN_002fEND-patterns-and"></a>
<a class="index-entry-id" id="index-BEGIN-pattern-next_002fnextfile-statements-and"></a>
<a class="index-entry-id" id="index-END-pattern-next_002fnextfile-statements-and"></a>
<p>Finally, the <code class="code">next</code> and <code class="code">nextfile</code> statements are not allowed
in a <code class="code">BEGIN</code> rule, because the implicit
read-a-record-and-match-against-the-rules loop has not started yet.  Similarly, those statements
are not valid in an <code class="code">END</code> rule, because all the input has been read.
(See <a class="xref" href="#Next-Statement">The <code class="code">next</code> Statement</a> and
see <a class="pxref" href="#Nextfile-Statement">The <code class="code">nextfile</code> Statement</a>.)
</p>
<hr>
</div>
</div>
<div class="subsection-level-extent" id="BEGINFILE_002fENDFILE">
<div class="nav-panel">
<p>
Next: <a href="#Empty" accesskey="n" rel="next">The Empty Pattern</a>, Previous: <a href="#BEGIN_002fEND" accesskey="p" rel="prev">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>, Up: <a href="#Pattern-Overview" accesskey="u" rel="up">Pattern Elements</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-BEGINFILE-and-ENDFILE-Special-Patterns"><span>7.1.5 The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns<a class="copiable-link" href="#The-BEGINFILE-and-ENDFILE-Special-Patterns"> &para;</a></span></h4>
<a class="index-entry-id" id="index-BEGINFILE-pattern"></a>
<a class="index-entry-id" id="index-ENDFILE-pattern"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-BEGINFILE_002fENDFILE-patterns"></a>

<p>This section describes a <code class="command">gawk</code>-specific feature.
</p>
<p>Two special kinds of rule, <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code>, give
you &ldquo;hooks&rdquo; into <code class="command">gawk</code>&rsquo;s command-line file processing loop.
As with the <code class="code">BEGIN</code> and <code class="code">END</code> rules
(see <a class="pxref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>),
<code class="code">BEGINFILE</code> rules in a program execute in the order they are
read by <code class="command">gawk</code>. Similarly, all <code class="code">ENDFILE</code> rules also execute in
the order they are read.
</p>
<p>The bodies of the <code class="code">BEGINFILE</code> rules execute just before
<code class="command">gawk</code> reads the first record from a file.  <code class="code">FILENAME</code>
is set to the name of the current file, and <code class="code">FNR</code> is set to zero.
</p>
<p>Prior to version 5.1.1 of <code class="command">gawk</code>, as an accident of the
implementation, <code class="code">$0</code> and the fields retained any previous values
they had in <code class="code">BEGINFILE</code> rules.  Starting with version
5.1.1, <code class="code">$0</code> and the fields are cleared, since no record has been
read yet from the file that is about to be processed.
</p>
<p>The <code class="code">BEGINFILE</code> rule provides you the opportunity to accomplish two tasks
that would otherwise be difficult or impossible to perform:
</p>
<ul class="itemize mark-bullet">
<li>You can test if the file is readable.  Normally, it is a fatal error if a
file named on the command line cannot be opened for reading.  However,
you can bypass the fatal error and move on to the next file on the
command line.

<a class="index-entry-id" id="index-gawk-ERRNO-variable-in-2"></a>
<a class="index-entry-id" id="index-ERRNO-variable-with-BEGINFILE-pattern"></a>
<a class="index-entry-id" id="index-nextfile-statement-BEGINFILE_002fENDFILE-patterns-and"></a>
<p>You do this by checking if the <code class="code">ERRNO</code> variable is not the empty
string; if so, then <code class="command">gawk</code> was not able to open the file. In
this case, your program can execute the <code class="code">nextfile</code> statement
(see <a class="pxref" href="#Nextfile-Statement">The <code class="code">nextfile</code> Statement</a>).  This causes <code class="command">gawk</code> to skip
the file entirely.  Otherwise, <code class="command">gawk</code> exits with the usual
fatal error.
</p>
</li><li>If you have written extensions that modify the record handling (by
inserting an &ldquo;input parser&rdquo;; see <a class="pxref" href="#Input-Parsers">Customized Input Parsers</a>), you can invoke
them at this point, before <code class="command">gawk</code> has started processing the file.
(This is a <em class="emph">very</em> advanced feature, currently used only by the
<a class="uref" href="https://sourceforge.net/projects/gawkextlib"><code class="code">gawkextlib</code> project</a>.)
</li></ul>

<p>The <code class="code">ENDFILE</code> rule is called when <code class="command">gawk</code> has finished processing
the last record in an input file.  For the last input file,
it will be called before any <code class="code">END</code> rules.
The <code class="code">ENDFILE</code> rule is executed even for empty input files.
</p>
<p>Normally, when an error occurs when reading input in the normal
input-processing loop, the error is fatal.  However, if a <code class="code">BEGINFILE</code>
rule is present, the error becomes non-fatal, and instead <code class="code">ERRNO</code>
is set.  This makes it possible to catch and process I/O errors at the
level of the <code class="command">awk</code> program.
</p>
<a class="index-entry-id" id="index-next-statement-BEGINFILE_002fENDFILE-patterns-and"></a>
<p>The <code class="code">next</code> statement (see <a class="pxref" href="#Next-Statement">The <code class="code">next</code> Statement</a>) is not allowed inside
either a <code class="code">BEGINFILE</code> or an <code class="code">ENDFILE</code> rule.  The <code class="code">nextfile</code>
statement is allowed only inside a
<code class="code">BEGINFILE</code> rule, not inside an <code class="code">ENDFILE</code> rule.
</p>
<a class="index-entry-id" id="index-getline-command-BEGINFILE_002fENDFILE-patterns-and"></a>
<p>The <code class="code">getline</code> statement (see <a class="pxref" href="#Getline">Explicit Input with <code class="code">getline</code></a>) is restricted inside
both <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code>: only redirected
forms of <code class="code">getline</code> are allowed.
</p>
<p><code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> are <code class="command">gawk</code> extensions.
In most other <code class="command">awk</code> implementations, or if <code class="command">gawk</code> is in
compatibility mode (see <a class="pxref" href="#Options">Command-Line Options</a>), they are not special.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Empty">
<div class="nav-panel">
<p>
Previous: <a href="#BEGINFILE_002fENDFILE" accesskey="p" rel="prev">The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a>, Up: <a href="#Pattern-Overview" accesskey="u" rel="up">Pattern Elements</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-Empty-Pattern"><span>7.1.6 The Empty Pattern<a class="copiable-link" href="#The-Empty-Pattern"> &para;</a></span></h4>

<a class="index-entry-id" id="index-empty-pattern"></a>
<a class="index-entry-id" id="index-patterns-empty"></a>
<p>An empty (i.e., nonexistent) pattern is considered to match <em class="emph">every</em>
input record.  For example, the program:
</p>
<div class="example">
<pre class="example-preformatted">awk '{ print $1 }' mail-list
</pre></div>

<p>prints the first field of every record.
</p>
<hr>
</div>
</div>
<div class="section-level-extent" id="Using-Shell-Variables">
<div class="nav-panel">
<p>
Next: <a href="#Action-Overview" accesskey="n" rel="next">Actions</a>, Previous: <a href="#Pattern-Overview" accesskey="p" rel="prev">Pattern Elements</a>, Up: <a href="#Patterns-and-Actions" accesskey="u" rel="up">Patterns, Actions, and Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Using-Shell-Variables-in-Programs"><span>7.2 Using Shell Variables in Programs<a class="copiable-link" href="#Using-Shell-Variables-in-Programs"> &para;</a></span></h3>
<a class="index-entry-id" id="index-shells-variables"></a>
<a class="index-entry-id" id="index-awk-programs-shell-variables-in"></a>

<p><code class="command">awk</code> programs are often used as components in larger
programs written in shell.
For example, it is very common to use a shell variable to
hold a pattern that the <code class="command">awk</code> program searches for.
There are two ways to get the value of the shell variable
into the body of the <code class="command">awk</code> program.
</p>
<a class="index-entry-id" id="index-shells-quoting"></a>
<p>A common method is to use shell quoting to substitute
the variable&rsquo;s value into the program inside the script.
For example, consider the following program:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">printf &quot;Enter search pattern: &quot;
read pattern
awk &quot;/$pattern/ &quot;'{ nmatches++ }
     END { print nmatches, &quot;found&quot; }' /path/to/data
</pre></div></div>

<p>The <code class="command">awk</code> program consists of two pieces of quoted text
that are concatenated together to form the program.
The first part is double-quoted, which allows substitution of
the <code class="code">pattern</code> shell variable inside the quotes.
The second part is single-quoted.
</p>
<p>Variable substitution via quoting works, but can potentially be
messy.  It requires a good understanding of the shell&rsquo;s quoting rules
(see <a class="pxref" href="#Quoting">Shell Quoting Issues</a>),
and it&rsquo;s often difficult to correctly
match up the quotes when reading the program.
</p>
<p>A better method is to use <code class="command">awk</code>&rsquo;s variable assignment feature
(see <a class="pxref" href="#Assignment-Options">Assigning Variables on the Command Line</a>)
to assign the shell variable&rsquo;s value to an <code class="command">awk</code> variable.
Then use dynamic regexps to match the pattern
(see <a class="pxref" href="#Computed-Regexps">Using Dynamic Regexps</a>).
The following shows how to redo the
previous example using this technique:
</p>
<div class="example">
<pre class="example-preformatted">printf &quot;Enter search pattern: &quot;
read pattern
awk -v pat=&quot;$pattern&quot; '$0 ~ pat { nmatches++ }
       END { print nmatches, &quot;found&quot; }' /path/to/data
</pre></div>

<p>Now, the <code class="command">awk</code> program is just one single-quoted string.
The assignment &lsquo;<samp class="samp">-v pat=&quot;$pattern&quot;</samp>&rsquo; still requires double quotes,
in case there is whitespace in the value of <code class="code">$pattern</code>.
The <code class="command">awk</code> variable <code class="code">pat</code> could be named <code class="code">pattern</code>
too, but that would be more confusing.  Using a variable also
provides more flexibility, as the variable can be used anywhere inside
the program&mdash;for printing, as an array subscript, or for any other
use&mdash;without requiring the quoting tricks at every point in the program.
</p>
<hr>
</div>
<div class="section-level-extent" id="Action-Overview">
<div class="nav-panel">
<p>
Next: <a href="#Statements" accesskey="n" rel="next">Control Statements in Actions</a>, Previous: <a href="#Using-Shell-Variables" accesskey="p" rel="prev">Using Shell Variables in Programs</a>, Up: <a href="#Patterns-and-Actions" accesskey="u" rel="up">Patterns, Actions, and Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Actions"><span>7.3 Actions<a class="copiable-link" href="#Actions"> &para;</a></span></h3>
<a class="index-entry-id" id="index-actions"></a>

<p>An <code class="command">awk</code> program or script consists of a series of
rules and function definitions interspersed.  (Functions are
described later.  See <a class="xref" href="#User_002ddefined">User-Defined Functions</a>.)
A rule contains a pattern and an action, either of which (but not
both) may be omitted.  The purpose of the <em class="dfn">action</em> is to tell
<code class="command">awk</code> what to do once a match for the pattern is found.  Thus,
in outline, an <code class="command">awk</code> program generally looks like this:
</p>
<div class="display">
<pre class="display-preformatted">[<var class="var">pattern</var>]  <code class="code">{ <var class="var">action</var> }</code>
 <var class="var">pattern</var>  [<code class="code">{ <var class="var">action</var> }</code>]
...
<code class="code">function <var class="var">name</var>(<var class="var">args</var>) { ... }</code>
...
</pre></div>

<a class="index-entry-id" id="index-_007b_007d-_0028braces_0029-actions-and"></a>
<a class="index-entry-id" id="index-braces-_0028_007b_007d_0029-actions-and"></a>
<a class="index-entry-id" id="index-separators-for-statements-in-actions"></a>
<a class="index-entry-id" id="index-newlines-separating-statements-in-actions"></a>
<a class="index-entry-id" id="index-_003b-_0028semicolon_0029-separating-statements-in-actions-1"></a>
<a class="index-entry-id" id="index-semicolon-_0028_003b_0029-separating-statements-in-actions-1"></a>
<p>An action consists of one or more <code class="command">awk</code> <em class="dfn">statements</em>, enclosed
in braces (&lsquo;<samp class="samp">{<span class="r">&hellip;</span>}</samp>&rsquo;).  Each statement specifies one
thing to do.  The statements are separated by newlines or semicolons.
The braces around an action must be used even if the action
contains only one statement, or if it contains no statements at
all.  However, if you omit the action entirely, omit the braces as
well.  An omitted action is equivalent to &lsquo;<samp class="samp">{ print $0 }</samp>&rsquo;:
</p>
<div class="example">
<pre class="example-preformatted">/foo/  { }     <i class="i">match <code class="code">foo</code>, do nothing --- empty action</i>
/foo/          <i class="i">match <code class="code">foo</code>, print the record --- omitted action</i>
</pre></div>

<p>The following types of statements are supported in <code class="command">awk</code>:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-side-effects-statements"></a>
</dd>
<dt>Expressions</dt>
<dd><p>Call functions or assign values to variables
(see <a class="pxref" href="#Expressions">Expressions</a>).  Executing
this kind of statement simply computes the value of the expression.
This is useful when the expression has side effects
(see <a class="pxref" href="#Assignment-Ops">Assignment Expressions</a>).
</p>
</dd>
<dt>Control statements</dt>
<dd><p>Specify the control flow of <code class="command">awk</code>
programs.  The <code class="command">awk</code> language gives you C-like constructs
(<code class="code">if</code>, <code class="code">for</code>, <code class="code">while</code>, and <code class="code">do</code>) as well as a few
special ones (see <a class="pxref" href="#Statements">Control Statements in Actions</a>).
</p>
</dd>
<dt>Compound statements</dt>
<dd><p>Enclose one or more statements in braces.  A compound statement
is used in order to put several statements together in the body of an
<code class="code">if</code>, <code class="code">while</code>, <code class="code">do</code>, or <code class="code">for</code> statement.
</p>
</dd>
<dt>Input statements</dt>
<dd><p>Use the <code class="code">getline</code> command
(see <a class="pxref" href="#Getline">Explicit Input with <code class="code">getline</code></a>).
Also supplied in <code class="command">awk</code> are the <code class="code">next</code>
statement (see <a class="pxref" href="#Next-Statement">The <code class="code">next</code> Statement</a>)
and the <code class="code">nextfile</code> statement
(see <a class="pxref" href="#Nextfile-Statement">The <code class="code">nextfile</code> Statement</a>).
</p>
</dd>
<dt>Output statements</dt>
<dd><p>Such as <code class="code">print</code> and <code class="code">printf</code>.
See <a class="xref" href="#Printing">Printing Output</a>.
</p>
</dd>
<dt>Deletion statements</dt>
<dd><p>For deleting array elements.
See <a class="xref" href="#Delete">The <code class="code">delete</code> Statement</a>.
</p></dd>
</dl>

<hr>
</div>
<div class="section-level-extent" id="Statements">
<div class="nav-panel">
<p>
Next: <a href="#Built_002din-Variables" accesskey="n" rel="next">Predefined Variables</a>, Previous: <a href="#Action-Overview" accesskey="p" rel="prev">Actions</a>, Up: <a href="#Patterns-and-Actions" accesskey="u" rel="up">Patterns, Actions, and Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Control-Statements-in-Actions"><span>7.4 Control Statements in Actions<a class="copiable-link" href="#Control-Statements-in-Actions"> &para;</a></span></h3>
<a class="index-entry-id" id="index-control-statements"></a>
<a class="index-entry-id" id="index-statements-control_002c-in-actions"></a>
<a class="index-entry-id" id="index-actions-control-statements-in"></a>

<p><em class="dfn">Control statements</em>, such as <code class="code">if</code>, <code class="code">while</code>, and so on,
control the flow of execution in <code class="command">awk</code> programs.  Most of <code class="command">awk</code>&rsquo;s
control statements are patterned after similar statements in C.
</p>
<a class="index-entry-id" id="index-compound-statements_002c-control-statements-and"></a>
<a class="index-entry-id" id="index-statements-compound_002c-control-statements-and"></a>
<a class="index-entry-id" id="index-body-in-actions"></a>
<a class="index-entry-id" id="index-_007b_007d-_0028braces_0029-statements_002c-grouping"></a>
<a class="index-entry-id" id="index-braces-_0028_007b_007d_0029-statements_002c-grouping"></a>
<a class="index-entry-id" id="index-newlines-separating-statements-in-actions-1"></a>
<a class="index-entry-id" id="index-_003b-_0028semicolon_0029-separating-statements-in-actions-2"></a>
<a class="index-entry-id" id="index-semicolon-_0028_003b_0029-separating-statements-in-actions-2"></a>
<p>All the control statements start with special keywords, such as <code class="code">if</code>
and <code class="code">while</code>, to distinguish them from simple expressions.
Many control statements contain other statements.  For example, the
<code class="code">if</code> statement contains another statement that may or may not be
executed.  The contained statement is called the <em class="dfn">body</em>.
To include more than one statement in the body, group them into a
single <em class="dfn">compound statement</em> with braces, separating them with
newlines or semicolons.
</p>

<ul class="mini-toc">
<li><a href="#If-Statement" accesskey="1">The <code class="code">if</code>-<code class="code">else</code> Statement</a></li>
<li><a href="#While-Statement" accesskey="2">The <code class="code">while</code> Statement</a></li>
<li><a href="#Do-Statement" accesskey="3">The <code class="code">do</code>-<code class="code">while</code> Statement</a></li>
<li><a href="#For-Statement" accesskey="4">The <code class="code">for</code> Statement</a></li>
<li><a href="#Switch-Statement" accesskey="5">The <code class="code">switch</code> Statement</a></li>
<li><a href="#Break-Statement" accesskey="6">The <code class="code">break</code> Statement</a></li>
<li><a href="#Continue-Statement" accesskey="7">The <code class="code">continue</code> Statement</a></li>
<li><a href="#Next-Statement" accesskey="8">The <code class="code">next</code> Statement</a></li>
<li><a href="#Nextfile-Statement" accesskey="9">The <code class="code">nextfile</code> Statement</a></li>
<li><a href="#Exit-Statement">The <code class="code">exit</code> Statement</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="If-Statement">
<div class="nav-panel">
<p>
Next: <a href="#While-Statement" accesskey="n" rel="next">The <code class="code">while</code> Statement</a>, Up: <a href="#Statements" accesskey="u" rel="up">Control Statements in Actions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-if_002delse-Statement"><span>7.4.1 The <code class="code">if</code>-<code class="code">else</code> Statement<a class="copiable-link" href="#The-if_002delse-Statement"> &para;</a></span></h4>

<a class="index-entry-id" id="index-if-statement"></a>
<p>The <code class="code">if</code>-<code class="code">else</code> statement is <code class="command">awk</code>&rsquo;s decision-making
statement.  It looks like this:
</p>
<div class="display">
<pre class="display-preformatted"><code class="code">if (<var class="var">condition</var>) <var class="var">then-body</var></code> [<code class="code">else <var class="var">else-body</var></code>]
</pre></div>

<p>The <var class="var">condition</var> is an expression that controls what the rest of the
statement does.  If the <var class="var">condition</var> is true, <var class="var">then-body</var> is
executed; otherwise, <var class="var">else-body</var> is executed.
The <code class="code">else</code> part of the statement is
optional.  The condition is considered false if its value is zero or
the null string; otherwise, the condition is true.
Refer to the following:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">if (x % 2 == 0)
    print &quot;x is even&quot;
else
    print &quot;x is odd&quot;
</pre></div></div>

<p>In this example, if the expression &lsquo;<samp class="samp">x % 2 == 0</samp>&rsquo; is true (i.e.,
if the value of <code class="code">x</code> is evenly divisible by two), then the first
<code class="code">print</code> statement is executed; otherwise, the second <code class="code">print</code>
statement is executed.
If the <code class="code">else</code> keyword appears on the same line as <var class="var">then-body</var> and
<var class="var">then-body</var> is not a compound statement (i.e., not surrounded by
braces), then a semicolon must separate <var class="var">then-body</var> from
the <code class="code">else</code>.
To illustrate this, the previous example can be rewritten as:
</p>
<div class="example">
<pre class="example-preformatted">if (x % 2 == 0) print &quot;x is even&quot;; else
        print &quot;x is odd&quot;
</pre></div>

<p>If the &lsquo;<samp class="samp">;</samp>&rsquo; is left out, <code class="command">awk</code> can&rsquo;t interpret the statement and
it produces a syntax error.  Don&rsquo;t actually write programs this way,
because a human reader might fail to see the <code class="code">else</code> if it is not
the first thing on its line.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="While-Statement">
<div class="nav-panel">
<p>
Next: <a href="#Do-Statement" accesskey="n" rel="next">The <code class="code">do</code>-<code class="code">while</code> Statement</a>, Previous: <a href="#If-Statement" accesskey="p" rel="prev">The <code class="code">if</code>-<code class="code">else</code> Statement</a>, Up: <a href="#Statements" accesskey="u" rel="up">Control Statements in Actions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-while-Statement"><span>7.4.2 The <code class="code">while</code> Statement<a class="copiable-link" href="#The-while-Statement"> &para;</a></span></h4>
<a class="index-entry-id" id="index-while-statement"></a>
<a class="index-entry-id" id="index-loops"></a>
<a class="index-entry-id" id="index-loops-while"></a>

<p>In programming, a <em class="dfn">loop</em> is a part of a program that can
be executed two or more times in succession.
The <code class="code">while</code> statement is the simplest looping statement in
<code class="command">awk</code>.  It repeatedly executes a statement as long as a condition is
true.  For example:
</p>
<div class="example">
<pre class="example-preformatted">while (<var class="var">condition</var>)
  <var class="var">body</var>
</pre></div>

<a class="index-entry-id" id="index-body-in-loops"></a>
<p><var class="var">body</var> is a statement called the <em class="dfn">body</em> of the loop,
and <var class="var">condition</var> is an expression that controls how long the loop
keeps running.
The first thing the <code class="code">while</code> statement does is test the <var class="var">condition</var>.
If the <var class="var">condition</var> is true, it executes the statement <var class="var">body</var>.
After <var class="var">body</var> has been executed,
<var class="var">condition</var> is tested again, and if it is still true, <var class="var">body</var>
executes again.  This process repeats until the <var class="var">condition</var> is no longer
true.  If the <var class="var">condition</var> is initially false, the body of the loop
never executes and <code class="command">awk</code> continues with the statement following
the loop.
This example prints the first three fields of each record, one per line:
</p>
<div class="example">
<pre class="example-preformatted">awk '
{
    i = 1
    while (i &lt;= 3) {
        print $i
        i++
    }
}' inventory-shipped
</pre></div>

<p>The body of this loop is a compound statement enclosed in braces,
containing two statements.
The loop works in the following manner: first, the value of <code class="code">i</code> is set to one.
Then, the <code class="code">while</code> statement tests whether <code class="code">i</code> is less than or equal to
three.  This is true when <code class="code">i</code> equals one, so the <code class="code">i</code>th
field is printed.  Then the &lsquo;<samp class="samp">i++</samp>&rsquo; increments the value of <code class="code">i</code>
and the loop repeats.  The loop terminates when <code class="code">i</code> reaches four.
</p>
<p>A newline is not required between the condition and the
body; however, using one makes the program clearer unless the body is a
compound statement or else is very simple.  The newline after the open brace
that begins the compound statement is not required either, but the
program is harder to read without it.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Do-Statement">
<div class="nav-panel">
<p>
Next: <a href="#For-Statement" accesskey="n" rel="next">The <code class="code">for</code> Statement</a>, Previous: <a href="#While-Statement" accesskey="p" rel="prev">The <code class="code">while</code> Statement</a>, Up: <a href="#Statements" accesskey="u" rel="up">Control Statements in Actions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-do_002dwhile-Statement"><span>7.4.3 The <code class="code">do</code>-<code class="code">while</code> Statement<a class="copiable-link" href="#The-do_002dwhile-Statement"> &para;</a></span></h4>
<a class="index-entry-id" id="index-do_002dwhile-statement"></a>
<a class="index-entry-id" id="index-loops-do_002dwhile"></a>

<p>The <code class="code">do</code> loop is a variation of the <code class="code">while</code> looping statement.
The <code class="code">do</code> loop executes the <var class="var">body</var> once and then repeats the
<var class="var">body</var> as long as the <var class="var">condition</var> is true.  It looks like this:
</p>
<div class="example">
<pre class="example-preformatted">do
  <var class="var">body</var>
while (<var class="var">condition</var>)
</pre></div>

<p>Even if the <var class="var">condition</var> is false at the start, the <var class="var">body</var>
executes at least once (and only once, unless executing <var class="var">body</var>
makes <var class="var">condition</var> true).  Contrast this with the corresponding
<code class="code">while</code> statement:
</p>
<div class="example">
<pre class="example-preformatted">while (<var class="var">condition</var>)
    <var class="var">body</var>
</pre></div>

<p>This statement does not execute the <var class="var">body</var> even once if the
<var class="var">condition</var> is false to begin with.  The following is an example of
a <code class="code">do</code> statement:
</p>
<div class="example">
<pre class="example-preformatted">{
    i = 1
    do {
        print $0
        i++
    } while (i &lt;= 10)
}
</pre></div>

<p>This program prints each input record 10 times.  However, it isn&rsquo;t a very
realistic example, because in this case an ordinary <code class="code">while</code> would do
just as well.  This situation reflects actual experience; only
occasionally is there a real use for a <code class="code">do</code> statement.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="For-Statement">
<div class="nav-panel">
<p>
Next: <a href="#Switch-Statement" accesskey="n" rel="next">The <code class="code">switch</code> Statement</a>, Previous: <a href="#Do-Statement" accesskey="p" rel="prev">The <code class="code">do</code>-<code class="code">while</code> Statement</a>, Up: <a href="#Statements" accesskey="u" rel="up">Control Statements in Actions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-for-Statement"><span>7.4.4 The <code class="code">for</code> Statement<a class="copiable-link" href="#The-for-Statement"> &para;</a></span></h4>
<a class="index-entry-id" id="index-for-statement"></a>
<a class="index-entry-id" id="index-loops-for-iterative"></a>

<p>The <code class="code">for</code> statement makes it more convenient to count iterations of a
loop.  The general form of the <code class="code">for</code> statement looks like this:
</p>
<div class="example">
<pre class="example-preformatted">for (<var class="var">initialization</var>; <var class="var">condition</var>; <var class="var">increment</var>)
  <var class="var">body</var>
</pre></div>

<p>The <var class="var">initialization</var>, <var class="var">condition</var>, and <var class="var">increment</var> parts are
arbitrary <code class="command">awk</code> expressions, and <var class="var">body</var> stands for any
<code class="command">awk</code> statement.
</p>
<p>The <code class="code">for</code> statement starts by executing <var class="var">initialization</var>.
Then, as long
as the <var class="var">condition</var> is true, it repeatedly executes <var class="var">body</var> and then
<var class="var">increment</var>.  Typically, <var class="var">initialization</var> sets a variable to
either zero or one, <var class="var">increment</var> adds one to it, and <var class="var">condition</var>
compares it against the desired number of iterations.
For example:
</p>
<div class="example">
<pre class="example-preformatted">awk '
{
    for (i = 1; i &lt;= 3; i++)
        print $i
}' inventory-shipped
</pre></div>

<p>This prints the first three fields of each input record, with one
input field per output line.
</p>
<p>C and C++ programmers might expect to be able to use the comma
operator to set more than one variable in the <var class="var">initialization</var>
part of the <code class="code">for</code> loop, or to increment multiple variables in the
<var class="var">increment</var> part of the loop, like so:
</p>
<div class="example">
<pre class="example-preformatted">for (i = 0, j = length(a); i &lt; j; i++, j--) ...   <i class="i">C/C++, not awk!</i>
</pre></div>

<p>You cannot do this; the comma operator is not supported in <code class="command">awk</code>.
There are workarounds, but they are nonobvious and can lead to
code that is difficult to read and understand. It is best, therefore,
to simply write additional initializations as separate statements
preceding the <code class="code">for</code> loop and to place additional increment statements
at the end of the loop&rsquo;s body.
</p>
<p>Most often, <var class="var">increment</var> is an increment expression, as in the earlier
example.  But this is not required; it can be any expression
whatsoever.  For example, the following statement prints all the powers of two
between 1 and 100:
</p>
<div class="example">
<pre class="example-preformatted">for (i = 1; i &lt;= 100; i *= 2)
    print i
</pre></div>

<p>If there is nothing to be done, any of the three expressions in the
parentheses following the <code class="code">for</code> keyword may be omitted.  Thus,
&lsquo;<samp class="samp">for&nbsp;(;&nbsp;x&nbsp;&gt;&nbsp;0;)</samp>&rsquo;<!-- /@w --> is equivalent to &lsquo;<samp class="samp">while&nbsp;(x&nbsp;&gt;&nbsp;0)</samp>&rsquo;<!-- /@w -->.  If the
<var class="var">condition</var> is omitted, it is treated as true, effectively
yielding an <em class="dfn">infinite loop</em> (i.e., a loop that never terminates).
</p>
<p>In most cases, a <code class="code">for</code> loop is an abbreviation for a <code class="code">while</code>
loop, as shown here:
</p>
<div class="example">
<pre class="example-preformatted"><var class="var">initialization</var>
while (<var class="var">condition</var>) {
  <var class="var">body</var>
  <var class="var">increment</var>
}
</pre></div>

<a class="index-entry-id" id="index-loops-continue-statement-and"></a>
<p>The only exception is when the <code class="code">continue</code> statement
(see <a class="pxref" href="#Continue-Statement">The <code class="code">continue</code> Statement</a>) is used
inside the loop. Changing a <code class="code">for</code> statement to a <code class="code">while</code>
statement in this way can change the effect of the <code class="code">continue</code>
statement inside the loop.
</p>
<p>The <code class="command">awk</code> language has a <code class="code">for</code> statement in addition to a
<code class="code">while</code> statement because a <code class="code">for</code> loop is often both less work to
type and more natural to think of.  Counting the number of iterations is
very common in loops.  It can be easier to think of this counting as part
of looping rather than as something to do inside the loop.
</p>
<a class="index-entry-id" id="index-in-operator-2"></a>
<p>There is an alternative version of the <code class="code">for</code> loop, for iterating over
all the indices of an array:
</p>
<div class="example">
<pre class="example-preformatted">for (i in array)
    <var class="var">do something with</var> array[i]
</pre></div>

<p>See <a class="xref" href="#Scanning-an-Array">Scanning All Elements of an Array</a>
for more information on this version of the <code class="code">for</code> loop.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Switch-Statement">
<div class="nav-panel">
<p>
Next: <a href="#Break-Statement" accesskey="n" rel="next">The <code class="code">break</code> Statement</a>, Previous: <a href="#For-Statement" accesskey="p" rel="prev">The <code class="code">for</code> Statement</a>, Up: <a href="#Statements" accesskey="u" rel="up">Control Statements in Actions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-switch-Statement"><span>7.4.5 The <code class="code">switch</code> Statement<a class="copiable-link" href="#The-switch-Statement"> &para;</a></span></h4>
<a class="index-entry-id" id="index-switch-statement"></a>
<a class="index-entry-id" id="index-case-keyword"></a>
<a class="index-entry-id" id="index-default-keyword"></a>

<p>This section describes a <code class="command">gawk</code>-specific feature.
If <code class="command">gawk</code> is in compatibility mode (see <a class="pxref" href="#Options">Command-Line Options</a>),
it is not available.
</p>
<p>The <code class="code">switch</code> statement allows the evaluation of an expression and
the execution of statements based on a <code class="code">case</code> match. Case statements
are checked for a match in the order they are defined.  If no suitable
<code class="code">case</code> is found, the <code class="code">default</code> section is executed, if supplied.
</p>
<p>Each <code class="code">case</code> contains a single constant, be it numeric, string,
or regexp.  The <code class="code">switch</code> expression is evaluated, and then each
<code class="code">case</code>&rsquo;s constant is compared against the result in turn. The
type of constant determines the comparison: numeric or string do the
usual comparisons.  A regexp constant (either regular, <code class="code">/foo/</code>, or
strongly typed, <code class="code">@/foo/</code>) does a regular expression match against
the string value of the original expression.  The general form of the
<code class="code">switch</code> statement looks like this:
</p>
<div class="example">
<pre class="example-preformatted">switch (<var class="var">expression</var>) {
case <var class="var">value or regular expression</var>:
    <var class="var">case-body</var>
default:
    <var class="var">default-body</var>
}
</pre></div>

<p>Control flow in
the <code class="code">switch</code> statement works as it does in C. Once a match to a given
case is made, the case statement bodies execute until a <code class="code">break</code>,
<code class="code">continue</code>, <code class="code">next</code>, <code class="code">nextfile</code>, or <code class="code">exit</code> is encountered,
or the end of the <code class="code">switch</code> statement itself. For example:
</p>
<div class="example">
<pre class="example-preformatted">while ((c = getopt(ARGC, ARGV, &quot;aksx&quot;)) != -1) {
    switch (c) {
    case &quot;a&quot;:
        # report size of all files
        all_files = TRUE;
        break
    case &quot;k&quot;:
        BLOCK_SIZE = 1024       # 1K block size
        break
    case &quot;s&quot;:
        # do sums only
        sum_only = TRUE
        break
    case &quot;x&quot;:
        # don't cross filesystems
        fts_flags = or(fts_flags, FTS_XDEV)
        break
    case &quot;?&quot;:
    default:
        usage()
        break
    }
}
</pre></div>

<p>Note that if none of the statements specified here halt execution
of a matched <code class="code">case</code> statement, execution falls through to the
next <code class="code">case</code> until execution halts. In this example, the
<code class="code">case</code> for <code class="code">&quot;?&quot;</code> falls through to the <code class="code">default</code>
case, which is to call a function named <code class="code">usage()</code>.
(The <code class="code">getopt()</code> function being called here is
described in <a class="ref" href="#Getopt-Function">Processing Command-Line Options</a>.)
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Break-Statement">
<div class="nav-panel">
<p>
Next: <a href="#Continue-Statement" accesskey="n" rel="next">The <code class="code">continue</code> Statement</a>, Previous: <a href="#Switch-Statement" accesskey="p" rel="prev">The <code class="code">switch</code> Statement</a>, Up: <a href="#Statements" accesskey="u" rel="up">Control Statements in Actions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-break-Statement"><span>7.4.6 The <code class="code">break</code> Statement<a class="copiable-link" href="#The-break-Statement"> &para;</a></span></h4>
<a class="index-entry-id" id="index-break-statement"></a>
<a class="index-entry-id" id="index-loops-exiting"></a>
<a class="index-entry-id" id="index-loops-break-statement-and"></a>

<p>The <code class="code">break</code> statement jumps out of the innermost <code class="code">for</code>,
<code class="code">while</code>, or <code class="code">do</code> loop that encloses it.  The following example
finds the smallest divisor of any integer, and also identifies prime
numbers:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted"># find smallest divisor of num
{
    num = $1
    for (divisor = 2; divisor * divisor &lt;= num; divisor++) {
        if (num % divisor == 0)
            break
    }
</pre></div><div class="group"><pre class="example-preformatted">    if (num % divisor == 0)
        printf &quot;Smallest divisor of %d is %d\n&quot;, num, divisor
    else
        printf &quot;%d is prime\n&quot;, num
}
</pre></div></div>

<p>When the remainder is zero in the first <code class="code">if</code> statement, <code class="command">awk</code>
immediately <em class="dfn">breaks out</em> of the containing <code class="code">for</code> loop.  This means
that <code class="command">awk</code> proceeds immediately to the statement following the loop
and continues processing.  (This is very different from the <code class="code">exit</code>
statement, which stops the entire <code class="command">awk</code> program.
See <a class="xref" href="#Exit-Statement">The <code class="code">exit</code> Statement</a>.)
</p>
<p>The following program illustrates how the <var class="var">condition</var> of a <code class="code">for</code>
or <code class="code">while</code> statement could be replaced with a <code class="code">break</code> inside
an <code class="code">if</code>:
</p>
<div class="example">
<pre class="example-preformatted"># find smallest divisor of num
{
    num = $1
    for (divisor = 2; ; divisor++) {
        if (num % divisor == 0) {
            printf &quot;Smallest divisor of %d is %d\n&quot;, num, divisor
            break
        }
        if (divisor * divisor &gt; num) {
            printf &quot;%d is prime\n&quot;, num
            break
        }
    }
}
</pre></div>

<p>The <code class="code">break</code> statement is also used to break out of the
<code class="code">switch</code> statement.
This is discussed in <a class="ref" href="#Switch-Statement">The <code class="code">switch</code> Statement</a>.
</p>
<a class="index-entry-id" id="index-POSIX-awk-break-statement-and"></a>
<a class="index-entry-id" id="index-dark-corner-break-statement"></a>
<a class="index-entry-id" id="index-gawk-break-statement-in"></a>
<a class="index-entry-id" id="index-Brian-Kernighan_0027s-awk-8"></a>
<p>The <code class="code">break</code> statement has no meaning when
used outside the body of a loop or <code class="code">switch</code>.
However, although it was never documented,
historical implementations of <code class="command">awk</code> treated the <code class="code">break</code>
statement outside of a loop as if it were a <code class="code">next</code> statement
(see <a class="pxref" href="#Next-Statement">The <code class="code">next</code> Statement</a>).
(d.c.)
Recent versions of BWK <code class="command">awk</code> no longer allow this usage,
nor does <code class="command">gawk</code>.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Continue-Statement">
<div class="nav-panel">
<p>
Next: <a href="#Next-Statement" accesskey="n" rel="next">The <code class="code">next</code> Statement</a>, Previous: <a href="#Break-Statement" accesskey="p" rel="prev">The <code class="code">break</code> Statement</a>, Up: <a href="#Statements" accesskey="u" rel="up">Control Statements in Actions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-continue-Statement"><span>7.4.7 The <code class="code">continue</code> Statement<a class="copiable-link" href="#The-continue-Statement"> &para;</a></span></h4>

<a class="index-entry-id" id="index-continue-statement"></a>
<p>Similar to <code class="code">break</code>, the <code class="code">continue</code> statement is used only inside
<code class="code">for</code>, <code class="code">while</code>, and <code class="code">do</code> loops.  It skips
over the rest of the loop body, causing the next cycle around the loop
to begin immediately.  Contrast this with <code class="code">break</code>, which jumps out
of the loop altogether.
</p>
<p>The <code class="code">continue</code> statement in a <code class="code">for</code> loop directs <code class="command">awk</code> to
skip the rest of the body of the loop and resume execution with the
increment-expression of the <code class="code">for</code> statement.  The following program
illustrates this fact:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
     for (x = 0; x &lt;= 20; x++) {
         if (x == 5)
             continue
         printf &quot;%d &quot;, x
     }
     print &quot;&quot;
}
</pre></div>

<p>This program prints all the numbers from 0 to 20&mdash;except for 5, for
which the <code class="code">printf</code> is skipped.  Because the increment &lsquo;<samp class="samp">x++</samp>&rsquo;
is not skipped, <code class="code">x</code> does not remain stuck at 5.  Contrast the
<code class="code">for</code> loop from the previous example with the following <code class="code">while</code> loop:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
     x = 0
     while (x &lt;= 20) {
         if (x == 5)
             continue
         printf &quot;%d &quot;, x
         x++
     }
     print &quot;&quot;
}
</pre></div>

<p>This program loops forever once <code class="code">x</code> reaches 5, because
the increment (&lsquo;<samp class="samp">x++</samp>&rsquo;) is never reached.
</p>
<a class="index-entry-id" id="index-POSIX-awk-continue-statement-and"></a>
<a class="index-entry-id" id="index-dark-corner-continue-statement"></a>
<a class="index-entry-id" id="index-gawk-continue-statement-in"></a>
<a class="index-entry-id" id="index-Brian-Kernighan_0027s-awk-9"></a>
<p>The <code class="code">continue</code> statement has no special meaning with respect to the
<code class="code">switch</code> statement, nor does it have any meaning when used outside the
body of a loop.  Historical versions of <code class="command">awk</code> treated a <code class="code">continue</code>
statement outside a loop the same way they treated a <code class="code">break</code>
statement outside a loop: as if it were a <code class="code">next</code>
statement
(see <a class="pxref" href="#Next-Statement">The <code class="code">next</code> Statement</a>).
(d.c.)
Recent versions of BWK <code class="command">awk</code> no longer work this way, nor
does <code class="command">gawk</code>.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Next-Statement">
<div class="nav-panel">
<p>
Next: <a href="#Nextfile-Statement" accesskey="n" rel="next">The <code class="code">nextfile</code> Statement</a>, Previous: <a href="#Continue-Statement" accesskey="p" rel="prev">The <code class="code">continue</code> Statement</a>, Up: <a href="#Statements" accesskey="u" rel="up">Control Statements in Actions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-next-Statement"><span>7.4.8 The <code class="code">next</code> Statement<a class="copiable-link" href="#The-next-Statement"> &para;</a></span></h4>
<a class="index-entry-id" id="index-next-statement-1"></a>

<p>The <code class="code">next</code> statement forces <code class="command">awk</code> to immediately stop processing
the current record and go on to the next record.  This means that no
further rules are executed for the current record, and the rest of the
current rule&rsquo;s action isn&rsquo;t executed.
</p>
<p>Contrast this with the effect of the <code class="code">getline</code> function
(see <a class="pxref" href="#Getline">Explicit Input with <code class="code">getline</code></a>).  That also causes
<code class="command">awk</code> to read the next record immediately, but it does not alter the
flow of control in any way (i.e., the rest of the current action executes
with a new input record).
</p>
<a class="index-entry-id" id="index-awk-programs-execution-of"></a>
<p>At the highest level, <code class="command">awk</code> program execution is a loop that reads
an input record and then tests each rule&rsquo;s pattern against it.  If you
think of this loop as a <code class="code">for</code> statement whose body contains the
rules, then the <code class="code">next</code> statement is analogous to a <code class="code">continue</code>
statement. It skips to the end of the body of this implicit loop and
executes the increment (which reads another record).
</p>
<p>For example, suppose an <code class="command">awk</code> program works only on records
with four fields, and it shouldn&rsquo;t fail when given bad input.  To avoid
complicating the rest of the program, write a &ldquo;weed out&rdquo; rule near
the beginning, in the following manner:
</p>
<div class="example">
<pre class="example-preformatted">NF != 4 {
    printf(&quot;%s:%d: skipped: NF != 4\n&quot;, FILENAME, FNR) &gt; &quot;/dev/stderr&quot;
    next
}
</pre></div>

<p>Because of the <code class="code">next</code> statement,
the program&rsquo;s subsequent rules won&rsquo;t see the bad record.  The error
message is redirected to the standard error output stream, as error
messages should be.
For more detail, see
<a class="ref" href="#Special-Files">Special File names in <code class="command">gawk</code></a>.
</p>
<p>If the <code class="code">next</code> statement causes the end of the input to be reached,
then the code in any <code class="code">END</code> rules is executed.
See <a class="xref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>.
</p>
<p>The <code class="code">next</code> statement is not allowed inside <code class="code">BEGINFILE</code> and
<code class="code">ENDFILE</code> rules. See <a class="xref" href="#BEGINFILE_002fENDFILE">The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a>.
</p>
<a class="index-entry-id" id="index-awk-language_002c-POSIX-version-1"></a>
<a class="index-entry-id" id="index-BEGIN-pattern-next_002fnextfile-statements-and-1"></a>
<a class="index-entry-id" id="index-END-pattern-next_002fnextfile-statements-and-1"></a>
<a class="index-entry-id" id="index-POSIX-awk-next_002fnextfile-statements-and"></a>
<a class="index-entry-id" id="index-next-statement-user_002ddefined-functions-and"></a>
<a class="index-entry-id" id="index-functions-user_002ddefined-next_002fnextfile-statements-and"></a>
<p>According to the POSIX standard, the behavior is undefined if the
<code class="code">next</code> statement is used in a <code class="code">BEGIN</code> or <code class="code">END</code> rule.
<code class="command">gawk</code> treats it as a syntax error.  Although POSIX does not disallow it,
most other <code class="command">awk</code> implementations don&rsquo;t allow the <code class="code">next</code>
statement inside function bodies (see <a class="pxref" href="#User_002ddefined">User-Defined Functions</a>).  Just as with any
other <code class="code">next</code> statement, a <code class="code">next</code> statement inside a function
body reads the next record and starts processing it with the first rule
in the program.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Nextfile-Statement">
<div class="nav-panel">
<p>
Next: <a href="#Exit-Statement" accesskey="n" rel="next">The <code class="code">exit</code> Statement</a>, Previous: <a href="#Next-Statement" accesskey="p" rel="prev">The <code class="code">next</code> Statement</a>, Up: <a href="#Statements" accesskey="u" rel="up">Control Statements in Actions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-nextfile-Statement"><span>7.4.9 The <code class="code">nextfile</code> Statement<a class="copiable-link" href="#The-nextfile-Statement"> &para;</a></span></h4>
<a class="index-entry-id" id="index-nextfile-statement"></a>

<p>The <code class="code">nextfile</code> statement
is similar to the <code class="code">next</code> statement.
However, instead of abandoning processing of the current record, the
<code class="code">nextfile</code> statement instructs <code class="command">awk</code> to stop processing the
current data file.
</p>
<p>Upon execution of the <code class="code">nextfile</code> statement,
<code class="code">FILENAME</code> is
updated to the name of the next data file listed on the command line,
<code class="code">FNR</code> is reset to one,
and processing
starts over with the first rule in the program.
If the <code class="code">nextfile</code> statement causes the end of the input to be reached,
then the code in any <code class="code">END</code> rules is executed. An exception to this is
when <code class="code">nextfile</code> is invoked during execution of any statement in an
<code class="code">END</code> rule; in this case, it causes the program to stop immediately.
See <a class="xref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>.
</p>
<p>The <code class="code">nextfile</code> statement is useful when there are many data files
to process but it isn&rsquo;t necessary to process every record in every file.
Without <code class="code">nextfile</code>,
in order to move on to the next data file, a program
would have to continue scanning the unwanted records.  The <code class="code">nextfile</code>
statement accomplishes this much more efficiently.
</p>
<p>In <code class="command">gawk</code>, execution of <code class="code">nextfile</code> causes additional things
to happen: any <code class="code">ENDFILE</code> rules are executed if <code class="command">gawk</code> is
not currently in an <code class="code">END</code> rule, <code class="code">ARGIND</code> is
incremented, and any <code class="code">BEGINFILE</code> rules are executed.  (<code class="code">ARGIND</code>
hasn&rsquo;t been introduced yet. See <a class="xref" href="#Built_002din-Variables">Predefined Variables</a>.)
</p>
<p>There is an additional, special, use case
with <code class="command">gawk</code>. <code class="code">nextfile</code> is useful inside a <code class="code">BEGINFILE</code>
rule to skip over a file that would otherwise cause <code class="command">gawk</code>
to exit with a fatal error. In this special case, <code class="code">ENDFILE</code> rules are not
executed. See <a class="xref" href="#BEGINFILE_002fENDFILE">The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a>.
</p>
<p>Although it might seem that &lsquo;<samp class="samp">close(FILENAME)</samp>&rsquo; would accomplish
the same as <code class="code">nextfile</code>, this isn&rsquo;t true.  <code class="code">close()</code> is
reserved for closing files, pipes, and coprocesses that are
opened with redirections.  It is not related to the main processing that
<code class="command">awk</code> does with the files listed in <code class="code">ARGV</code>.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> For many years, <code class="code">nextfile</code> was a
common extension. In September 2012, it was accepted for
inclusion into the POSIX standard.
See <a class="uref" href="http://austingroupbugs.net/view.php?id=607">the Austin Group website</a>.
</p></blockquote>

<a class="index-entry-id" id="index-functions-user_002ddefined-next_002fnextfile-statements-and-1"></a>
<a class="index-entry-id" id="index-nextfile-statement-user_002ddefined-functions-and"></a>
<a class="index-entry-id" id="index-Brian-Kernighan_0027s-awk-10"></a>
<a class="index-entry-id" id="index-mawk-utility-3"></a>
<p>The current version of BWK <code class="command">awk</code> and <code class="command">mawk</code>
also support <code class="code">nextfile</code>.  However, they don&rsquo;t allow the
<code class="code">nextfile</code> statement inside function bodies (see <a class="pxref" href="#User_002ddefined">User-Defined Functions</a>).
<code class="command">gawk</code> does; a <code class="code">nextfile</code> inside a function body reads the
first record from the next file and starts processing it with the first
rule in the program, just as any other <code class="code">nextfile</code> statement.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Exit-Statement">
<div class="nav-panel">
<p>
Previous: <a href="#Nextfile-Statement" accesskey="p" rel="prev">The <code class="code">nextfile</code> Statement</a>, Up: <a href="#Statements" accesskey="u" rel="up">Control Statements in Actions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-exit-Statement"><span>7.4.10 The <code class="code">exit</code> Statement<a class="copiable-link" href="#The-exit-Statement"> &para;</a></span></h4>

<a class="index-entry-id" id="index-exit-statement"></a>
<p>The <code class="code">exit</code> statement causes <code class="command">awk</code> to immediately stop
executing the current rule and to stop processing input; any remaining input
is ignored.  The <code class="code">exit</code> statement is written as follows:
</p>
<div class="display">
<pre class="display-preformatted"><code class="code">exit</code> [<var class="var">return code</var>]
</pre></div>

<a class="index-entry-id" id="index-BEGIN-pattern-exit-statement-and"></a>
<a class="index-entry-id" id="index-END-pattern-exit-statement-and"></a>
<p>When an <code class="code">exit</code> statement is executed from a <code class="code">BEGIN</code> rule, the
program stops processing everything immediately.  No input records are
read.  However, if an <code class="code">END</code> rule is present,
as part of executing the <code class="code">exit</code> statement,
the <code class="code">END</code> rule is executed
(see <a class="pxref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>).
If <code class="code">exit</code> is used in the body of an <code class="code">END</code> rule, it causes
the program to stop immediately.
</p>
<p>An <code class="code">exit</code> statement that is not part of a <code class="code">BEGIN</code> or <code class="code">END</code>
rule stops the execution of any further automatic rules for the current
record, skips reading any remaining input records, and executes the
<code class="code">END</code> rule if there is one.  <code class="command">gawk</code> also skips
any <code class="code">ENDFILE</code> rules; they do not execute.
</p>
<p>In such a case,
if you don&rsquo;t want the <code class="code">END</code> rule to do its job, set a variable
to a nonzero value before the <code class="code">exit</code> statement and check that variable in
the <code class="code">END</code> rule.
See <a class="xref" href="#Assert-Function">Assertions</a>
for an example that does this.
</p>
<a class="index-entry-id" id="index-dark-corner-exit-statement"></a>
<p>If an argument is supplied to <code class="code">exit</code>, its value is used as the exit
status code for the <code class="command">awk</code> process.  If no argument is supplied,
<code class="code">exit</code> causes <code class="command">awk</code> to return a &ldquo;success&rdquo; status.
In the case where an argument
is supplied to a first <code class="code">exit</code> statement, and then <code class="code">exit</code> is
called a second time from an <code class="code">END</code> rule with no argument,
<code class="command">awk</code> uses the previously supplied exit value.  (d.c.)
See <a class="xref" href="#Exit-Status"><code class="command">gawk</code>&rsquo;s Exit Status</a> for more information.
</p>
<a class="index-entry-id" id="index-programming-conventions-exit-statement"></a>
<p>For example, suppose an error condition occurs that is difficult or
impossible to handle.  Conventionally, programs report this by
exiting with a nonzero status.  An <code class="command">awk</code> program can do this
using an <code class="code">exit</code> statement with a nonzero argument, as shown
in the following example:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">BEGIN {
    if ((&quot;date&quot; | getline date_now) &lt;= 0) {
        print &quot;Can't get system date&quot; &gt; &quot;/dev/stderr&quot;
        exit 1
    }
</pre></div><div class="group"><pre class="example-preformatted">    print &quot;current date is&quot;, date_now
    close(&quot;date&quot;)
}
</pre></div></div>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> For full portability, exit values should be between zero and 126, inclusive.
Negative values, and values of 127 or greater, may not produce consistent
results across different operating systems.
</p></blockquote>


<hr>
</div>
</div>
<div class="section-level-extent" id="Built_002din-Variables">
<div class="nav-panel">
<p>
Next: <a href="#Pattern-Action-Summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Statements" accesskey="p" rel="prev">Control Statements in Actions</a>, Up: <a href="#Patterns-and-Actions" accesskey="u" rel="up">Patterns, Actions, and Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Predefined-Variables"><span>7.5 Predefined Variables<a class="copiable-link" href="#Predefined-Variables"> &para;</a></span></h3>
<a class="index-entry-id" id="index-predefined-variables"></a>
<a class="index-entry-id" id="index-variables-predefined"></a>

<p>Most <code class="command">awk</code> variables are available to use for your own
purposes; they never change unless your program assigns values to
them, and they never affect anything unless your program examines them.
However, a few variables in <code class="command">awk</code> have special built-in meanings.
<code class="command">awk</code> examines some of these automatically, so that they enable you
to tell <code class="command">awk</code> how to do certain things.  Others are set
automatically by <code class="command">awk</code>, so that they carry information from the
internal workings of <code class="command">awk</code> to your program.
</p>
<a class="index-entry-id" id="index-gawk-predefined-variables-and"></a>
<p>This section documents all of <code class="command">gawk</code>&rsquo;s predefined variables,
most of which are also documented in the chapters describing
their areas of activity.
</p>

<ul class="mini-toc">
<li><a href="#User_002dmodified" accesskey="1">Built-in Variables That Control <code class="command">awk</code></a></li>
<li><a href="#Auto_002dset" accesskey="2">Built-in Variables That Convey Information</a></li>
<li><a href="#ARGC-and-ARGV" accesskey="3">Using <code class="code">ARGC</code> and <code class="code">ARGV</code></a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="User_002dmodified">
<div class="nav-panel">
<p>
Next: <a href="#Auto_002dset" accesskey="n" rel="next">Built-in Variables That Convey Information</a>, Up: <a href="#Built_002din-Variables" accesskey="u" rel="up">Predefined Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Built_002din-Variables-That-Control-awk"><span>7.5.1 Built-in Variables That Control <code class="command">awk</code><a class="copiable-link" href="#Built_002din-Variables-That-Control-awk"> &para;</a></span></h4>
<a class="index-entry-id" id="index-predefined-variables-user_002dmodifiable"></a>
<a class="index-entry-id" id="index-user_002dmodifiable-variables"></a>

<p>The following is an alphabetical list of variables that you can change to
control how <code class="command">awk</code> does certain things.
</p>
<p>The variables that are specific to <code class="command">gawk</code> are marked with a pound
sign (&lsquo;<samp class="samp">#</samp>&rsquo;).  These variables are <code class="command">gawk</code> extensions.  In other
<code class="command">awk</code> implementations or if <code class="command">gawk</code> is in compatibility
mode (see <a class="pxref" href="#Options">Command-Line Options</a>), they are not special.  (Any exceptions are noted
in the description of each variable.)
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-BINMODE-variable"></a>
<a class="index-entry-id" id="index-binary-input_002foutput"></a>
<a class="index-entry-id" id="index-input_002foutput-binary"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-BINMODE-variable"></a>
</dd>
<dt><code class="code">BINMODE #</code></dt>
<dd><p>On non-POSIX systems, this variable specifies use of binary mode
for all I/O.  Numeric values of one, two, or three specify that input
files, output files, or all files, respectively, should use binary I/O.
A numeric value less than zero is treated as zero, and a numeric value
greater than three is treated as three.  Alternatively, string values
of <code class="code">&quot;r&quot;</code> or <code class="code">&quot;w&quot;</code> specify that input files and output files,
respectively, should use binary I/O.  A string value of <code class="code">&quot;rw&quot;</code> or
<code class="code">&quot;wr&quot;</code> indicates that all files should use binary I/O.  Any other
string value is treated the same as <code class="code">&quot;rw&quot;</code>, but causes <code class="command">gawk</code>
to generate a warning message.  <code class="code">BINMODE</code> is described in more
detail in <a class="ref" href="#PC-Using">Using <code class="command">gawk</code> on PC Operating Systems</a>.  <code class="command">mawk</code> (see <a class="pxref" href="#Other-Versions">Other Freely Available <code class="command">awk</code> Implementations</a>)
also supports this variable, but only using numeric values.
</p>
<a class="index-entry-id" id="index-CONVFMT-variable-1"></a>
<a class="index-entry-id" id="index-POSIX-awk-CONVFMT-variable-and"></a>
<a class="index-entry-id" id="index-numbers-converting-to-strings"></a>
<a class="index-entry-id" id="index-strings-converting-numbers-to"></a>
</dd>
<dt><code class="code"><code class="code">CONVFMT</code></code></dt>
<dd><p>A string that controls the conversion of numbers to
strings (see <a class="pxref" href="#Conversion">Conversion of Strings and Numbers</a>).
It works by being passed, in effect, as the first argument to the
<code class="code">sprintf()</code> function
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
Its default value is <code class="code">&quot;%.6g&quot;</code>.
<code class="code">CONVFMT</code> was introduced by the POSIX standard.
</p>
<a class="index-entry-id" id="index-gawk-FIELDWIDTHS-variable-in-1"></a>
<a class="index-entry-id" id="index-FIELDWIDTHS-variable-1"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-FIELDWIDTHS-variable"></a>
<a class="index-entry-id" id="index-field-separator-FIELDWIDTHS-variable-and"></a>
<a class="index-entry-id" id="index-separators-field-FIELDWIDTHS-variable-and"></a>
</dd>
<dt><code class="code">FIELDWIDTHS #</code></dt>
<dd><p>A space-separated list of columns that tells <code class="command">gawk</code>
how to split input with fixed columnar boundaries.
Starting in version 4.2, each field width may optionally be
preceded by a colon-separated value specifying the number of characters to skip
before the field starts.
Assigning a value to <code class="code">FIELDWIDTHS</code>
overrides the use of <code class="code">FS</code> and <code class="code">FPAT</code> for field splitting.
See <a class="xref" href="#Constant-Size">Reading Fixed-Width Data</a> for more information.
</p>
<a class="index-entry-id" id="index-gawk-FPAT-variable-in-1"></a>
<a class="index-entry-id" id="index-FPAT-variable-1"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-FPAT-variable"></a>
<a class="index-entry-id" id="index-field-separator-FPAT-variable-and"></a>
<a class="index-entry-id" id="index-separators-field-FPAT-variable-and"></a>
</dd>
<dt><code class="code">FPAT #</code></dt>
<dd><p>A regular expression (as a string) that tells <code class="command">gawk</code>
to create the fields based on text that matches the regular expression.
Assigning a value to <code class="code">FPAT</code>
overrides the use of <code class="code">FS</code> and <code class="code">FIELDWIDTHS</code> for field splitting.
See <a class="xref" href="#Splitting-By-Content">Defining Fields by Content</a> for more information.
</p>
<a class="index-entry-id" id="index-FS-variable-1"></a>
<a class="index-entry-id" id="index-separators-field"></a>
</dd>
<dt><a id="index-field-separator-1"></a><span><code class="code">FS</code><a class="copiable-link" href="#index-field-separator-1"> &para;</a></span></dt>
<dd><p>The input field separator (see <a class="pxref" href="#Field-Separators">Specifying How Fields Are Separated</a>).
The value is a single-character string or a multicharacter regular
expression that matches the separations between fields in an input
record.  If the value is the null string (<code class="code">&quot;&quot;</code>), then each
character in the record becomes a separate field.
(This behavior is a <code class="command">gawk</code> extension. POSIX <code class="command">awk</code> does not
specify the behavior when <code class="code">FS</code> is the null string.
Nonetheless, some other versions of <code class="command">awk</code> also treat
<code class="code">&quot;&quot;</code> specially.)
</p>
<p>The default value is <code class="code">&quot;&nbsp;&quot;</code><!-- /@w -->, a string consisting of a single
space.  As a special exception, this value means that any sequence of
spaces, TABs, and/or newlines is a single separator.  It also causes
spaces, TABs, and newlines at the beginning and end of a record to
be ignored.
</p>
<p>You can set the value of <code class="code">FS</code> on the command line using the
<samp class="option">-F</samp> option:
</p>
<div class="example">
<pre class="example-preformatted">awk -F, '<var class="var">program</var>' <var class="var">input-files</var>
</pre></div>

<a class="index-entry-id" id="index-gawk-field-separators-and"></a>
<p>If <code class="command">gawk</code> is using <code class="code">FIELDWIDTHS</code> or <code class="code">FPAT</code>
for field splitting,
assigning a value to <code class="code">FS</code> causes <code class="command">gawk</code> to return to
the normal, <code class="code">FS</code>-based field splitting. An easy way to do this
is to simply say &lsquo;<samp class="samp">FS = FS</samp>&rsquo;, perhaps with an explanatory comment.
</p>
<a class="index-entry-id" id="index-gawk-IGNORECASE-variable-in-1"></a>
<a class="index-entry-id" id="index-IGNORECASE-variable"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-IGNORECASE-variable"></a>
<a class="index-entry-id" id="index-case-sensitivity-string-comparisons-and"></a>
<a class="index-entry-id" id="index-case-sensitivity-regexps-and-1"></a>
<a class="index-entry-id" id="index-regular-expressions-case-sensitivity-1"></a>
</dd>
<dt><code class="code">IGNORECASE #</code></dt>
<dd><p>If <code class="code">IGNORECASE</code> is nonzero or non-null, then all string comparisons
and all regular expression matching are case-independent.
This applies to
regexp matching with &lsquo;<samp class="samp">~</samp>&rsquo; and &lsquo;<samp class="samp">!~</samp>&rsquo;,
the <code class="code">gensub()</code>, <code class="code">gsub()</code>, <code class="code">index()</code>, <code class="code">match()</code>,
<code class="code">patsplit()</code>, <code class="code">split()</code>, and <code class="code">sub()</code> functions,
record termination with <code class="code">RS</code>, and field splitting with
<code class="code">FS</code> and <code class="code">FPAT</code>.
However, the value of <code class="code">IGNORECASE</code> does <em class="emph">not</em> affect array subscripting
and it does not affect field splitting when using a single-character
field separator.
See <a class="xref" href="#Case_002dsensitivity">Case Sensitivity in Matching</a>.
</p>
<a class="index-entry-id" id="index-gawk-LINT-variable-in"></a>
<a class="index-entry-id" id="index-LINT-variable"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-LINT-variable"></a>
</dd>
<dt><a id="index-lint-checking"></a><span><code class="code">LINT #</code><a class="copiable-link" href="#index-lint-checking"> &para;</a></span></dt>
<dd><p>When this variable is true (nonzero or non-null), <code class="command">gawk</code>
behaves as if the <samp class="option">--lint</samp> command-line option is in effect
(see <a class="pxref" href="#Options">Command-Line Options</a>).
With a value of <code class="code">&quot;fatal&quot;</code>, lint warnings become fatal errors.
With a value of <code class="code">&quot;invalid&quot;</code>, only warnings about things that are
actually invalid are issued. (This is not fully implemented yet.)
Any other true value prints nonfatal warnings.
Assigning a false value to <code class="code">LINT</code> turns off the lint warnings.
</p>
<p>This variable is a <code class="command">gawk</code> extension.  It is not special
in other <code class="command">awk</code> implementations.  Unlike with the other special variables,
changing <code class="code">LINT</code> does affect the production of lint warnings,
even if <code class="command">gawk</code> is in compatibility mode.  Much as
the <samp class="option">--lint</samp> and <samp class="option">--traditional</samp> options independently
control different aspects of <code class="command">gawk</code>&rsquo;s behavior, the control
of lint warnings during program execution is independent of the flavor
of <code class="command">awk</code> being executed.
</p>
<a class="index-entry-id" id="index-OFMT-variable-2"></a>
<a class="index-entry-id" id="index-numbers-converting-to-strings-1"></a>
<a class="index-entry-id" id="index-strings-converting-numbers-to-1"></a>
</dd>
<dt><code class="code">OFMT</code></dt>
<dd><p>A string that controls conversion of numbers to
strings (see <a class="pxref" href="#Conversion">Conversion of Strings and Numbers</a>) for
printing with the <code class="code">print</code> statement.  It works by being passed
as the first argument to the <code class="code">sprintf()</code> function
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
Its default value is <code class="code">&quot;%.6g&quot;</code>.  Earlier versions of <code class="command">awk</code>
used <code class="code">OFMT</code> to specify the format for converting numbers to
strings in general expressions; this is now done by <code class="code">CONVFMT</code>.
</p>
<a class="index-entry-id" id="index-print-statement-OFMT-variable-and"></a>
<a class="index-entry-id" id="index-OFS-variable-2"></a>
<a class="index-entry-id" id="index-separators-field-1"></a>
</dd>
<dt><a id="index-field-separator-2"></a><span><code class="code">OFS</code><a class="copiable-link" href="#index-field-separator-2"> &para;</a></span></dt>
<dd><p>The output field separator (see <a class="pxref" href="#Output-Separators">Output Separators</a>).  It is
output between the fields printed by a <code class="code">print</code> statement.  Its
default value is <code class="code">&quot;&nbsp;&quot;</code><!-- /@w -->, a string consisting of a single space.
</p>
</dd>
<dt><a id="index-ORS-variable-1"></a><span><code class="code">ORS</code><a class="copiable-link" href="#index-ORS-variable-1"> &para;</a></span></dt>
<dd><p>The output record separator.  It is output at the end of every
<code class="code">print</code> statement.  Its default value is <code class="code">&quot;\n&quot;</code>, the newline
character.  (See <a class="xref" href="#Output-Separators">Output Separators</a>.)
</p>
</dd>
<dt><a id="index-PREC-variable"></a><span><code class="code">PREC #</code><a class="copiable-link" href="#index-PREC-variable"> &para;</a></span></dt>
<dd><p>The working precision of arbitrary-precision floating-point numbers,
53 bits by default (see <a class="pxref" href="#Setting-precision">Setting the Precision</a>).
</p>
</dd>
<dt><a id="index-ROUNDMODE-variable"></a><span><code class="code">ROUNDMODE #</code><a class="copiable-link" href="#index-ROUNDMODE-variable"> &para;</a></span></dt>
<dd><p>The rounding mode to use for arbitrary-precision arithmetic on
numbers, by default <code class="code">&quot;N&quot;</code> (<code class="code">roundTiesToEven</code> in
the IEEE 754 standard; see <a class="pxref" href="#Setting-the-rounding-mode">Setting the Rounding Mode</a>).
</p>
<a class="index-entry-id" id="index-RS-variable-1"></a>
<a class="index-entry-id" id="index-separators-for-records-2"></a>
</dd>
<dt><a id="index-record-separators-1"></a><span><code class="code"><code class="code">RS</code></code><a class="copiable-link" href="#index-record-separators-1"> &para;</a></span></dt>
<dd><p>The input record separator.  Its default value is a string
containing a single newline character, which means that an input record
consists of a single line of text.
It can also be the null string, in which case records are separated by
runs of blank lines.
If it is a regexp, records are separated by
matches of the regexp in the input text.
(See <a class="xref" href="#Records">How Input Is Split into Records</a>.)
</p>
<p>The ability for <code class="code">RS</code> to be a regular expression
is a <code class="command">gawk</code> extension.
In most other <code class="command">awk</code> implementations,
or if <code class="command">gawk</code> is in compatibility mode
(see <a class="pxref" href="#Options">Command-Line Options</a>),
just the first character of <code class="code">RS</code>&rsquo;s value is used.
</p>
<a class="index-entry-id" id="index-SUBSEP-variable"></a>
<a class="index-entry-id" id="index-separators-subscript"></a>
</dd>
<dt><a id="index-subscript-separators"></a><span><code class="code"><code class="code">SUBSEP</code></code><a class="copiable-link" href="#index-subscript-separators"> &para;</a></span></dt>
<dd><p>The subscript separator.  It has the default value of
<code class="code">&quot;\034&quot;</code> and is used to separate the parts of the indices of a
multidimensional array.  Thus, the expression &lsquo;<samp class="samp">foo[&quot;A&quot;,&nbsp;&quot;B&quot;]<!-- /@w --></samp>&rsquo;
really accesses <code class="code">foo[&quot;A\034B&quot;]</code>
(see <a class="pxref" href="#Multidimensional">Multidimensional Arrays</a>).
</p>
<a class="index-entry-id" id="index-gawk-TEXTDOMAIN-variable-in"></a>
<a class="index-entry-id" id="index-TEXTDOMAIN-variable"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-TEXTDOMAIN-variable"></a>
<a class="index-entry-id" id="index-internationalization-localization"></a>
</dd>
<dt><code class="code">TEXTDOMAIN #</code></dt>
<dd><p>Used for internationalization of programs at the
<code class="command">awk</code> level.  It sets the default text domain for specially
marked string constants in the source text, as well as for the
<code class="code">dcgettext()</code>, <code class="code">dcngettext()</code>, and <code class="code">bindtextdomain()</code> functions
(see <a class="pxref" href="#Internationalization">Internationalization with <code class="command">gawk</code></a>).
The default value of <code class="code">TEXTDOMAIN</code> is <code class="code">&quot;messages&quot;</code>.
</p></dd>
</dl>

<hr>
</div>
<div class="subsection-level-extent" id="Auto_002dset">
<div class="nav-panel">
<p>
Next: <a href="#ARGC-and-ARGV" accesskey="n" rel="next">Using <code class="code">ARGC</code> and <code class="code">ARGV</code></a>, Previous: <a href="#User_002dmodified" accesskey="p" rel="prev">Built-in Variables That Control <code class="command">awk</code></a>, Up: <a href="#Built_002din-Variables" accesskey="u" rel="up">Predefined Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Built_002din-Variables-That-Convey-Information"><span>7.5.2 Built-in Variables That Convey Information<a class="copiable-link" href="#Built_002din-Variables-That-Convey-Information"> &para;</a></span></h4>

<a class="index-entry-id" id="index-predefined-variables-conveying-information"></a>
<a class="index-entry-id" id="index-variables-predefined-conveying-information"></a>
<p>The following is an alphabetical list of variables that <code class="command">awk</code>
sets automatically on certain occasions in order to provide
information to your program.
</p>
<p>The variables that are specific to <code class="command">gawk</code> are marked with a pound
sign (&lsquo;<samp class="samp">#</samp>&rsquo;).  These variables are <code class="command">gawk</code> extensions.  In other
<code class="command">awk</code> implementations or if <code class="command">gawk</code> is in compatibility
mode (see <a class="pxref" href="#Options">Command-Line Options</a>), they are not special:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-ARGC_002fARGV-variables"></a>
<a class="index-entry-id" id="index-arguments-command_002dline-1"></a>
<a class="index-entry-id" id="index-command-line-arguments-1"></a>
</dd>
<dt><code class="code">ARGC</code>, <code class="code">ARGV</code></dt>
<dd><p>The command-line arguments available to <code class="command">awk</code> programs are stored in
an array called <code class="code">ARGV</code>.  <code class="code">ARGC</code> is the number of command-line
arguments present.  See <a class="xref" href="#Other-Arguments">Other Command-Line Arguments</a>.
Unlike most <code class="command">awk</code> arrays,
<code class="code">ARGV</code> is indexed from 0 to <code class="code">ARGC</code> &minus; 1.
In the following example:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN {</kbd>
&gt;         <kbd class="kbd">for (i = 0; i &lt; ARGC; i++)</kbd>
&gt;             <kbd class="kbd">print ARGV[i]</kbd>
&gt;      <kbd class="kbd">}' inventory-shipped mail-list</kbd>
-| awk
-| inventory-shipped
-| mail-list
</pre></div></div>

<p><code class="code">ARGV[0]</code> contains &lsquo;<samp class="samp">awk</samp>&rsquo;, <code class="code">ARGV[1]</code>
contains &lsquo;<samp class="samp">inventory-shipped</samp>&rsquo;, and <code class="code">ARGV[2]</code> contains
&lsquo;<samp class="samp">mail-list</samp>&rsquo;.  The value of <code class="code">ARGC</code> is three, one more than the
index of the last element in <code class="code">ARGV</code>, because the elements are numbered
from zero.
</p>
<a class="index-entry-id" id="index-programming-conventions-ARGC_002fARGV-variables"></a>
<p>The names <code class="code">ARGC</code> and <code class="code">ARGV</code>, as well as the convention of indexing
the array from 0 to <code class="code">ARGC</code> &minus; 1, are derived from the C language&rsquo;s
method of accessing command-line arguments.
</p>
<a class="index-entry-id" id="index-dark-corner-value-of-ARGV_005b0_005d"></a>
<p>The value of <code class="code">ARGV[0]</code> can vary from system to system.
Also, you should note that the program text is <em class="emph">not</em> included in
<code class="code">ARGV</code>, nor are any of <code class="command">awk</code>&rsquo;s command-line options.
See <a class="xref" href="#ARGC-and-ARGV">Using <code class="code">ARGC</code> and <code class="code">ARGV</code></a> for information
about how <code class="command">awk</code> uses these variables.
(d.c.)
</p>
<a class="index-entry-id" id="index-ARGIND-variable"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-ARGIND-variable"></a>
</dd>
<dt><code class="code">ARGIND #</code></dt>
<dd><p>The index in <code class="code">ARGV</code> of the current file being processed.
Every time <code class="command">gawk</code> opens a new data file for processing, it sets
<code class="code">ARGIND</code> to the index in <code class="code">ARGV</code> of the file name.
When <code class="command">gawk</code> is processing the input files,
&lsquo;<samp class="samp">FILENAME == ARGV[ARGIND]</samp>&rsquo; is always true.
</p>
<a class="index-entry-id" id="index-files-processing_002c-ARGIND-variable-and"></a>
<p>This variable is useful in file processing; it allows you to tell how far
along you are in the list of data files as well as to distinguish between
successive instances of the same file name on the command line.
</p>
<a class="index-entry-id" id="index-file-names-distinguishing"></a>
<p>While you can change the value of <code class="code">ARGIND</code> within your <code class="command">awk</code>
program, <code class="command">gawk</code> automatically sets it to a new value when it
opens the next file.
</p>
<a class="index-entry-id" id="index-ENVIRON-array"></a>
<a class="index-entry-id" id="index-environment-variables-in-ENVIRON-array"></a>
</dd>
<dt><code class="code">ENVIRON</code></dt>
<dd><p>An associative array containing the values of the environment.  The array
indices are the environment variable names; the elements are the values of
the particular environment variables.  For example,
<code class="code">ENVIRON[&quot;HOME&quot;]</code> might be <code class="code">/home/arnold</code>.
</p>
<p>For POSIX <code class="command">awk</code>, changing this array does not affect the
environment passed on to any programs that <code class="command">awk</code> may spawn via
redirection or the <code class="code">system()</code> function.
</p>
<p>However, beginning with version 4.2, if not in POSIX
compatibility mode, <code class="command">gawk</code> does update its own environment when
<code class="code">ENVIRON</code> is changed, thus changing the environment seen by programs
that it creates.  You should therefore be especially careful if you
modify <code class="code">ENVIRON[&quot;PATH&quot;]</code>, which is the search path for finding
executable programs.
</p>
<a class="index-entry-id" id="index-TZ-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-TZ"></a>
<p>This can also affect the running <code class="command">gawk</code> program, since some of the
built-in functions may pay attention to certain environment variables.
The most notable instance of this is <code class="code">mktime()</code> (see <a class="pxref" href="#Time-Functions">Time Functions</a>), which pays attention the value of the <code class="env">TZ</code> environment
variable on many systems.
</p>
<p>Some operating systems may not have environment variables.
On such systems, the <code class="code">ENVIRON</code> array is empty (except for
<code class="code">ENVIRON[&quot;AWKPATH&quot;]</code><!-- /@w --> and
<code class="code">ENVIRON[&quot;AWKLIBPATH&quot;]</code><!-- /@w -->;
see <a class="pxref" href="#AWKPATH-Variable">The <code class="env">AWKPATH</code> Environment Variable</a> and
see <a class="pxref" href="#AWKLIBPATH-Variable">The <code class="env">AWKLIBPATH</code> Environment Variable</a>).
</p>
<a class="index-entry-id" id="index-gawk-ERRNO-variable-in-3"></a>
<a class="index-entry-id" id="index-ERRNO-variable"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-ERRNO-variable"></a>
<a class="index-entry-id" id="index-error-handling-ERRNO-variable-and"></a>
</dd>
<dt><code class="code">ERRNO #</code></dt>
<dd><p>If a system error occurs during a redirection for <code class="code">getline</code>, during
a read for <code class="code">getline</code>, or during a <code class="code">close()</code> operation, then
<code class="code">ERRNO</code> contains a string describing the error.
</p>
<p>In addition, <code class="command">gawk</code> clears <code class="code">ERRNO</code> before opening each
command-line input file. This enables checking if the file is readable
inside a <code class="code">BEGINFILE</code> pattern (see <a class="pxref" href="#BEGINFILE_002fENDFILE">The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a>).
</p>
<p>Otherwise, <code class="code">ERRNO</code> works similarly to the C variable <code class="code">errno</code>.
Except for the case just mentioned, <code class="command">gawk</code> <em class="emph">never</em> clears
it (sets it to zero or <code class="code">&quot;&quot;</code>).  Thus, you should only expect its
value to be meaningful when an I/O operation returns a failure value,
such as <code class="code">getline</code> returning &minus;1.  You are, of course, free
to clear it yourself before doing an I/O operation.
</p>
<p>If the value of <code class="code">ERRNO</code> corresponds to a system error in the C
<code class="code">errno</code> variable, then <code class="code">PROCINFO[&quot;errno&quot;]</code> will be set to the value
of <code class="code">errno</code>.  For non-system errors, <code class="code">PROCINFO[&quot;errno&quot;]</code> will
be zero.
</p>
<a class="index-entry-id" id="index-FILENAME-variable-1"></a>
<a class="index-entry-id" id="index-dark-corner-FILENAME-variable-1"></a>
</dd>
<dt><code class="code">FILENAME</code></dt>
<dd><p>The name of the current input file.  When no data files are listed
on the command line, <code class="command">awk</code> reads from the standard input and
<code class="code">FILENAME</code> is set to <code class="code">&quot;-&quot;</code>.  <code class="code">FILENAME</code> changes each
time a new file is read (see <a class="pxref" href="#Reading-Files">Reading Input Files</a>).  Inside a <code class="code">BEGIN</code>
rule, the value of <code class="code">FILENAME</code> is <code class="code">&quot;&quot;</code>, because there are no input
files being processed yet.<a class="footnote" id="DOCF42" href="#FOOT42"><sup>42</sup></a> (d.c.) Note, though,
that using <code class="code">getline</code> (see <a class="pxref" href="#Getline">Explicit Input with <code class="code">getline</code></a>) inside a <code class="code">BEGIN</code> rule
can give <code class="code">FILENAME</code> a value.
</p>
</dd>
<dt><a id="index-FNR-variable-1"></a><span><code class="code">FNR</code><a class="copiable-link" href="#index-FNR-variable-1"> &para;</a></span></dt>
<dd><p>The current record number in the current file.  <code class="command">awk</code> increments
<code class="code">FNR</code> each time it reads a new record (see <a class="pxref" href="#Records">How Input Is Split into Records</a>).
<code class="command">awk</code> resets <code class="code">FNR</code> to zero each time it starts a new
input file.
</p>
</dd>
<dt><a id="index-NF-variable-1"></a><span><code class="code">NF</code><a class="copiable-link" href="#index-NF-variable-1"> &para;</a></span></dt>
<dd><p>The number of fields in the current input record.
<code class="code">NF</code> is set each time a new record is read, when a new field is
created, or when <code class="code">$0</code> changes (see <a class="pxref" href="#Fields">Examining Fields</a>).
</p>
<p>Unlike most of the variables described in this subsection,
assigning a value to <code class="code">NF</code> has the potential to affect
<code class="command">awk</code>&rsquo;s internal workings.  In particular, assignments
to <code class="code">NF</code> can be used to create fields in or remove fields from the
current record. See <a class="xref" href="#Changing-Fields">Changing the Contents of a Field</a>.
</p>
<a class="index-entry-id" id="index-FUNCTAB-array"></a>
<a class="index-entry-id" id="index-gawk-FUNCTAB-array-in"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-FUNCTAB-variable"></a>
</dd>
<dt><code class="code">FUNCTAB #</code></dt>
<dd><p>An array whose indices and corresponding values are the names of all
the built-in, user-defined, and extension functions in the program.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> Attempting to use the <code class="code">delete</code> statement with the <code class="code">FUNCTAB</code>
array causes a fatal error.  Any attempt to assign to an element of
<code class="code">FUNCTAB</code> also causes a fatal error.
</p></blockquote>

</dd>
<dt><a id="index-NR-variable-1"></a><span><code class="code">NR</code><a class="copiable-link" href="#index-NR-variable-1"> &para;</a></span></dt>
<dd><p>The number of input records <code class="command">awk</code> has processed since
the beginning of the program&rsquo;s execution
(see <a class="pxref" href="#Records">How Input Is Split into Records</a>).
<code class="command">awk</code> increments <code class="code">NR</code> each time it reads a new record.
</p>
<a class="index-entry-id" id="index-gawk-PROCINFO-array-in-1"></a>
<a class="index-entry-id" id="index-PROCINFO-array"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-PROCINFO-array"></a>
</dd>
<dt><code class="code">PROCINFO #</code></dt>
<dd><p>The elements of this array provide access to information about the
running <code class="command">awk</code> program.
The following elements (listed alphabetically)
are guaranteed to be available:
</p>
<dl class="table">
<dt><a id="index-command-line-arguments-2"></a><span><code class="code">PROCINFO[&quot;argv&quot;]</code><a class="copiable-link" href="#index-command-line-arguments-2"> &para;</a></span></dt>
<dd><p>The <code class="code">PROCINFO[&quot;argv&quot;]</code> array contains all of the command-line arguments
(after glob expansion and redirection processing on platforms where that must
be done manually by the program) with subscripts ranging from 0 through
<code class="code">argc</code> &minus; 1.  For example, <code class="code">PROCINFO[&quot;argv&quot;][0]</code> will contain
the name by which <code class="command">gawk</code> was invoked.  Here is an example of how this
feature may be used:
</p>
<div class="example">
<pre class="example-preformatted">gawk '
BEGIN {
        for (i = 0; i &lt; length(PROCINFO[&quot;argv&quot;]); i++)
                print i, PROCINFO[&quot;argv&quot;][i]
}'
</pre></div>

<p>Please note that this differs from the standard <code class="code">ARGV</code> array which does
not include command-line arguments that have already been processed by
<code class="command">gawk</code> (see <a class="pxref" href="#ARGC-and-ARGV">Using <code class="code">ARGC</code> and <code class="code">ARGV</code></a>).
</p>
</dd>
<dt><a id="index-effective-group-ID-of-gawk-user"></a><span><code class="code">PROCINFO[&quot;egid&quot;]</code><a class="copiable-link" href="#index-effective-group-ID-of-gawk-user"> &para;</a></span></dt>
<dd><p>The value of the <code class="code">getegid()</code> system call.
</p>
</dd>
<dt><code class="code">PROCINFO[&quot;errno&quot;]</code></dt>
<dd><p>The value of the C <code class="code">errno</code> variable when <code class="code">ERRNO</code> is set to
the associated error message.
</p>
</dd>
<dt><a id="index-effective-user-ID-of-gawk-user"></a><span><code class="code">PROCINFO[&quot;euid&quot;]</code><a class="copiable-link" href="#index-effective-user-ID-of-gawk-user"> &para;</a></span></dt>
<dd><p>The value of the <code class="code">geteuid()</code> system call.
</p>
</dd>
<dt><code class="code">PROCINFO[&quot;FS&quot;]</code></dt>
<dd><p>This is
<code class="code">&quot;FS&quot;</code> if field splitting with <code class="code">FS</code> is in effect,
<code class="code">&quot;FIELDWIDTHS&quot;</code> if field splitting with <code class="code">FIELDWIDTHS</code> is in effect,
<code class="code">&quot;FPAT&quot;</code> if field matching with <code class="code">FPAT</code> is in effect,
or <code class="code">&quot;API&quot;</code> if field splitting is controlled by an API input parser.
</p>
</dd>
<dt><a id="index-group-ID-of-gawk-user"></a><span><code class="code">PROCINFO[&quot;gid&quot;]</code><a class="copiable-link" href="#index-group-ID-of-gawk-user"> &para;</a></span></dt>
<dd><p>The value of the <code class="code">getgid()</code> system call.
</p>
</dd>
<dt><a id="index-program-identifiers"></a><span><code class="code">PROCINFO[&quot;identifiers&quot;]</code><a class="copiable-link" href="#index-program-identifiers"> &para;</a></span></dt>
<dd><p>A subarray, indexed by the names of all identifiers used in the text of
the <code class="command">awk</code> program.  An <em class="dfn">identifier</em> is simply the name of a variable
(be it scalar or array), built-in function, user-defined function, or
extension function.  For each identifier, the value of the element is
one of the following:
</p>
<dl class="table">
<dt><code class="code">&quot;array&quot;</code></dt>
<dd><p>The identifier is an array.
</p>
</dd>
<dt><code class="code">&quot;builtin&quot;</code></dt>
<dd><p>The identifier is a built-in function.
</p>
</dd>
<dt><code class="code">&quot;extension&quot;</code></dt>
<dd><p>The identifier is an extension function loaded via
<code class="code">@load</code> or <samp class="option">-l</samp>.
</p>
</dd>
<dt><code class="code">&quot;scalar&quot;</code></dt>
<dd><p>The identifier is a scalar.
</p>
</dd>
<dt><code class="code">&quot;untyped&quot;</code></dt>
<dd><p>The identifier is untyped (could be used as a scalar or an array;
<code class="command">gawk</code> doesn&rsquo;t know yet).
</p>
</dd>
<dt><code class="code">&quot;user&quot;</code></dt>
<dd><p>The identifier is a user-defined function.
</p></dd>
</dl>

<p>The values indicate what <code class="command">gawk</code> knows about the identifiers
after it has finished parsing the program; they are <em class="emph">not</em> updated
while the program runs.
</p>
</dd>
<dt><a class="index-entry-id" id="index-PROCINFO-array-platform-running-on"></a>
<a id="index-platform-running-on"></a><span><code class="code">PROCINFO[&quot;platform&quot;]</code><a class="copiable-link" href="#index-platform-running-on"> &para;</a></span></dt>
<dd><p>This element gives a string indicating the platform for which
<code class="command">gawk</code> was compiled. The value will be one of the following:
</p>
<dl class="table">
<dt><code class="code">&quot;mingw&quot;</code></dt>
<dd><p>Microsoft Windows, using MinGW.
</p>
</dd>
<dt><code class="code">&quot;os390&quot;</code></dt>
<dd><p>OS/390 (also known as z/OS).
</p>
</dd>
<dt><code class="code">&quot;posix&quot;</code></dt>
<dd><p>GNU/Linux, Cygwin, macOS, and legacy Unix systems.
</p>
</dd>
<dt><code class="code">&quot;vms&quot;</code></dt>
<dd><p>OpenVMS.
</p></dd>
</dl>

</dd>
<dt><a id="index-process-group-ID-of-gawk-process"></a><span><code class="code">PROCINFO[&quot;pgrpid&quot;]</code><a class="copiable-link" href="#index-process-group-ID-of-gawk-process"> &para;</a></span></dt>
<dd><p>The process group ID of the current process.
</p>
</dd>
<dt><a id="index-process-ID-of-gawk-process"></a><span><code class="code">PROCINFO[&quot;pid&quot;]</code><a class="copiable-link" href="#index-process-ID-of-gawk-process"> &para;</a></span></dt>
<dd><p>The process ID of the current process.
</p>
</dd>
<dt><a id="index-persistent-memory-compiled-into-gawk"></a><span><code class="code">PROCINFO[&quot;pma&quot;]</code><a class="copiable-link" href="#index-persistent-memory-compiled-into-gawk"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-PMA-memory-allocator"></a>
<p>The version of the PMA memory allocator compiled into <code class="command">gawk</code>.
This element will not be present if the PMA allocator is not available
for use. See <a class="xref" href="#Persistent-Memory">Preserving Data Between Runs</a>.
</p>
</dd>
<dt><a id="index-parent-process-ID-of-gawk-process"></a><span><code class="code">PROCINFO[&quot;ppid&quot;]</code><a class="copiable-link" href="#index-parent-process-ID-of-gawk-process"> &para;</a></span></dt>
<dd><p>The parent process ID of the current process.
</p>
</dd>
<dt><code class="code">PROCINFO[&quot;strftime&quot;]</code></dt>
<dd><p>The default time format string for <code class="code">strftime()</code>.
Assigning a new value to this element changes the default.
See <a class="xref" href="#Time-Functions">Time Functions</a>.
</p>
</dd>
<dt><code class="code">PROCINFO[&quot;uid&quot;]</code></dt>
<dd><p>The value of the <code class="code">getuid()</code> system call.
</p>
</dd>
<dt><a id="index-version-of-gawk"></a><span><code class="code">PROCINFO[&quot;version&quot;]</code><a class="copiable-link" href="#index-version-of-gawk"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-gawk-version-of"></a>
<p>The version of <code class="command">gawk</code>.
</p></dd>
</dl>

<p>The following additional elements in the array
are available to provide information about the MPFR and GMP libraries
if your version of <code class="command">gawk</code> supports arbitrary-precision arithmetic
(see <a class="pxref" href="#Arbitrary-Precision-Arithmetic">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a>):
</p>
<dl class="table">
<dt><a id="index-version-of-GNU-MP-library"></a><span><code class="code">PROCINFO[&quot;gmp_version&quot;]</code><a class="copiable-link" href="#index-version-of-GNU-MP-library"> &para;</a></span></dt>
<dd><p>The version of the GNU MP library.
</p>
<a class="index-entry-id" id="index-version-of-GNU-MPFR-library"></a>
</dd>
<dt><code class="code">PROCINFO[&quot;mpfr_version&quot;]</code></dt>
<dd><p>The version of the GNU MPFR library.
</p>
</dd>
<dt><a id="index-maximum-precision-supported-by-MPFR-library"></a><span><code class="code">PROCINFO[&quot;prec_max&quot;]</code><a class="copiable-link" href="#index-maximum-precision-supported-by-MPFR-library"> &para;</a></span></dt>
<dd><p>The maximum precision supported by MPFR.
</p>
</dd>
<dt><a id="index-minimum-precision-required-by-MPFR-library"></a><span><code class="code">PROCINFO[&quot;prec_min&quot;]</code><a class="copiable-link" href="#index-minimum-precision-required-by-MPFR-library"> &para;</a></span></dt>
<dd><p>The minimum precision required by MPFR.
</p></dd>
</dl>

<p>The following additional elements in the array are available to provide
information about the version of the extension API, if your version
of <code class="command">gawk</code> supports dynamic loading of extension functions
(see <a class="pxref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>):
</p>
<dl class="table">
<dt><a id="index-version-of-gawk-extension-API"></a><span><code class="code">PROCINFO[&quot;api_major&quot;]</code><a class="copiable-link" href="#index-version-of-gawk-extension-API"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-extension-API-version-number"></a>
<p>The major version of the extension API.
</p>
</dd>
<dt><code class="code">PROCINFO[&quot;api_minor&quot;]</code></dt>
<dd><p>The minor version of the extension API.
</p></dd>
</dl>

<a class="index-entry-id" id="index-supplementary-groups-of-gawk-process"></a>
<p>On some systems, there may be elements in the array, <code class="code">&quot;group1&quot;</code>
through <code class="code">&quot;group<var class="var">N</var>&quot;</code> for some <var class="var">N</var>. <var class="var">N</var> is the number of
supplementary groups that the process has.  Use the <code class="code">in</code> operator
to test for these elements
(see <a class="pxref" href="#Reference-to-Elements">Referring to an Array Element</a>).
</p>
<p>The following elements allow you to change <code class="command">gawk</code>&rsquo;s behavior:
</p>
<dl class="table">
<dt><code class="code">PROCINFO[&quot;BUFFERPIPE&quot;]</code></dt>
<dd><p>If this element exists, all output to pipelines becomes buffered.
See <a class="xref" href="#Noflush">Speeding Up Pipe Output</a>.
</p>
</dd>
<dt><code class="code">PROCINFO[&quot;<var class="var">command</var>&quot;, &quot;BUFFERPIPE&quot;]</code></dt>
<dd><p>Make output to <var class="var">command</var> buffered.
See <a class="xref" href="#Noflush">Speeding Up Pipe Output</a>.
</p>
</dd>
<dt><code class="code">PROCINFO[&quot;NONFATAL&quot;]</code></dt>
<dd><p>If this element exists, then I/O errors for all redirections become nonfatal.
See <a class="xref" href="#Nonfatal">Enabling Nonfatal Output</a>.
</p>
</dd>
<dt><code class="code">PROCINFO[&quot;<var class="var">name</var>&quot;, &quot;NONFATAL&quot;]</code></dt>
<dd><p>Make I/O errors for <var class="var">name</var> be nonfatal.
See <a class="xref" href="#Nonfatal">Enabling Nonfatal Output</a>.
</p>
</dd>
<dt><code class="code">PROCINFO[&quot;<var class="var">command</var>&quot;, &quot;pty&quot;]</code></dt>
<dd><p>For two-way communication to <var class="var">command</var>, use a pseudo-tty instead
of setting up a two-way pipe.
See <a class="xref" href="#Two_002dway-I_002fO">Two-Way Communications with Another Process</a> for more information.
</p>
</dd>
<dt><code class="code">PROCINFO[&quot;<var class="var">input_name</var>&quot;, &quot;READ_TIMEOUT&quot;]</code></dt>
<dd><p>Set a timeout for reading from input redirection <var class="var">input_name</var>.
See <a class="xref" href="#Read-Timeout">Reading Input with a Timeout</a> for more information.
</p>
</dd>
<dt><code class="code">PROCINFO[&quot;<var class="var">input_name</var>&quot;, &quot;RETRY&quot;]</code></dt>
<dd><p>If an I/O error that may be retried occurs when reading data from
<var class="var">input_name</var>, and this array entry exists, then <code class="code">getline</code> returns
&minus;2 instead of following the default behavior of returning &minus;1
and configuring <var class="var">input_name</var> to return no further data.  An I/O error
that may be retried is one where <code class="code">errno</code> has the value <code class="code">EAGAIN</code>,
<code class="code">EWOULDBLOCK</code>, <code class="code">EINTR</code>, or <code class="code">ETIMEDOUT</code>.  This may be useful
in conjunction with <code class="code">PROCINFO[&quot;<var class="var">input_name</var>&quot;, &quot;READ_TIMEOUT&quot;]</code>
or situations where a file descriptor has been configured to behave in
a non-blocking fashion.
See <a class="xref" href="#Retrying-Input">Retrying Reads After Certain Input Errors</a> for more information.
</p>
</dd>
<dt><code class="code">PROCINFO[&quot;sorted_in&quot;]</code></dt>
<dd><p>If this element exists in <code class="code">PROCINFO</code>, its value controls the
order in which array indices will be processed by
&lsquo;<samp class="samp">for (<var class="var">indx</var> in <var class="var">array</var>)</samp>&rsquo; loops.
This is an advanced feature, so we defer the
full description until later; see
<a class="ref" href="#Controlling-Scanning">Using Predefined Array Scanning Orders with <code class="command">gawk</code></a>.
</p></dd>
</dl>

</dd>
<dt><a id="index-RLENGTH-variable"></a><span><code class="code">RLENGTH</code><a class="copiable-link" href="#index-RLENGTH-variable"> &para;</a></span></dt>
<dd><p>The length of the substring matched by the
<code class="code">match()</code> function
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
<code class="code">RLENGTH</code> is set by invoking the <code class="code">match()</code> function.  Its value
is the length of the matched string, or &minus;1 if no match is found.
</p>
</dd>
<dt><a id="index-RSTART-variable"></a><span><code class="code">RSTART</code><a class="copiable-link" href="#index-RSTART-variable"> &para;</a></span></dt>
<dd><p>The start index in characters of the substring that is matched by the
<code class="code">match()</code> function
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
<code class="code">RSTART</code> is set by invoking the <code class="code">match()</code> function.  Its value
is the position of the string where the matched substring starts, or zero
if no match was found.
</p>
<a class="index-entry-id" id="index-gawk-RT-variable-in-3"></a>
<a class="index-entry-id" id="index-RT-variable-3"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-RS_002fRT-variables-3"></a>
</dd>
<dt><code class="code">RT #</code></dt>
<dd><p>The input text that matched the text denoted by <code class="code">RS</code>,
the record separator.  It is set every time a record is read.
</p>
<a class="index-entry-id" id="index-gawk-SYMTAB-array-in"></a>
<a class="index-entry-id" id="index-SYMTAB-array"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-SYMTAB-variable"></a>
</dd>
<dt><code class="code">SYMTAB #</code></dt>
<dd><p>An array whose indices are the names of all defined global variables and
arrays in the program.  <code class="code">SYMTAB</code> makes <code class="command">gawk</code>&rsquo;s symbol table
visible to the <code class="command">awk</code> programmer.  It is built as <code class="command">gawk</code>
parses the program and is complete before the program starts to run.
</p>
<p>The array may be used for indirect access to read or write the value of
a variable:
</p>
<div class="example">
<pre class="example-preformatted">foo = 5
SYMTAB[&quot;foo&quot;] = 4
print foo    # prints 4
</pre></div>

<p>The <code class="code">isarray()</code> function (see <a class="pxref" href="#Type-Functions">Getting Type Information</a>) may be used to test
if an element in <code class="code">SYMTAB</code> is an array.
Also, you may not use the <code class="code">delete</code> statement with the
<code class="code">SYMTAB</code> array.
</p>
<p>Prior to version 5.0 of <code class="command">gawk</code>, you could
use an index for <code class="code">SYMTAB</code> that was not a predefined identifier:
</p>
<div class="example">
<pre class="example-preformatted">SYMTAB[&quot;xxx&quot;] = 5
print SYMTAB[&quot;xxx&quot;]
</pre></div>

<p>This no longer works, instead producing a fatal error, as it led
to rampant confusion.
</p>
<a class="index-entry-id" id="index-Schorr_002c-Andrew-1"></a>
<p>The <code class="code">SYMTAB</code> array is more interesting than it looks. Andrew Schorr
points out that it effectively gives <code class="command">awk</code> data pointers. Consider his
example:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted"># Indirect multiply of any variable by amount, return result

function multiply(variable, amount)
{
    return SYMTAB[variable] *= amount
}
</pre></div></div>

<p>You would use it like this:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    answer = 10.5
    multiply(&quot;answer&quot;, 4)
    print &quot;The answer is&quot;, answer
}
</pre></div>

<p>When run, this produces:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f answer.awk</kbd>
-| The answer is 42
</pre></div>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> In order to avoid severe time-travel paradoxes,<a class="footnote" id="DOCF43" href="#FOOT43"><sup>43</sup></a> neither <code class="code">FUNCTAB</code> nor <code class="code">SYMTAB</code>
is available as an element within the <code class="code">SYMTAB</code> array.
</p></blockquote>
</dd>
</dl>

<a class="index-entry-id" id="index-sidebar-Changing-NR-and-FNR"></a>
<table class="cartouche" border="1"><tr><th>
Changing <code class="code">NR</code> and <code class="code">FNR</code></th></tr><tr><td>
<a class="index-entry-id" id="index-NR-variable-changing"></a>
<a class="index-entry-id" id="index-FNR-variable-changing"></a>
<a class="index-entry-id" id="index-dark-corner-FNR_002fNR-variables"></a>
<p><code class="command">awk</code> increments <code class="code">NR</code> and <code class="code">FNR</code>
each time it reads a record, instead of setting them to the absolute
value of the number of records read.  This means that a program can
change these variables and their new values are incremented for
each record.
(d.c.)
The following example shows this:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo '1</kbd>
&gt; <kbd class="kbd">2</kbd>
&gt; <kbd class="kbd">3</kbd>
&gt; <kbd class="kbd">4' | awk 'NR == 2 { NR = 17 }</kbd>
&gt; <kbd class="kbd">{ print NR }'</kbd>
-| 1
-| 17
-| 18
-| 19
</pre></div>

<p>Before <code class="code">FNR</code> was added to the <code class="command">awk</code> language
(see <a class="pxref" href="#V7_002fSVR3_002e1">Major Changes Between V7 and SVR3.1</a>),
many <code class="command">awk</code> programs used this feature to track the number of
records in a file by resetting <code class="code">NR</code> to zero when <code class="code">FILENAME</code>
changed.
</p></td></tr></table>

<hr>
</div>
<div class="subsection-level-extent" id="ARGC-and-ARGV">
<div class="nav-panel">
<p>
Previous: <a href="#Auto_002dset" accesskey="p" rel="prev">Built-in Variables That Convey Information</a>, Up: <a href="#Built_002din-Variables" accesskey="u" rel="up">Predefined Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Using-ARGC-and-ARGV"><span>7.5.3 Using <code class="code">ARGC</code> and <code class="code">ARGV</code><a class="copiable-link" href="#Using-ARGC-and-ARGV"> &para;</a></span></h4>
<a class="index-entry-id" id="index-ARGC_002fARGV-variables-how-to-use"></a>
<a class="index-entry-id" id="index-arguments-command_002dline-2"></a>
<a class="index-entry-id" id="index-command-line-arguments-3"></a>

<p><a class="ref" href="#Auto_002dset">Built-in Variables That Convey Information</a>
presented the following program describing the information contained in <code class="code">ARGC</code>
and <code class="code">ARGV</code>:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN {</kbd>
&gt;        <kbd class="kbd">for (i = 0; i &lt; ARGC; i++)</kbd>
&gt;            <kbd class="kbd">print ARGV[i]</kbd>
&gt;      <kbd class="kbd">}' inventory-shipped mail-list</kbd>
-| awk
-| inventory-shipped
-| mail-list
</pre></div></div>

<p>In this example, <code class="code">ARGV[0]</code> contains &lsquo;<samp class="samp">awk</samp>&rsquo;, <code class="code">ARGV[1]</code>
contains &lsquo;<samp class="samp">inventory-shipped</samp>&rsquo;, and <code class="code">ARGV[2]</code> contains
&lsquo;<samp class="samp">mail-list</samp>&rsquo;.
Notice that the <code class="command">awk</code> program is not entered in <code class="code">ARGV</code>.  The
other command-line options, with their arguments, are also not
entered.  This includes variable assignments done with the <samp class="option">-v</samp>
option (see <a class="pxref" href="#Options">Command-Line Options</a>).
Normal variable assignments on the command line <em class="emph">are</em>
treated as arguments and do show up in the <code class="code">ARGV</code> array.
Given the following program in a file named <samp class="file">showargs.awk</samp>:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    printf &quot;A=%d, B=%d\n&quot;, A, B
    for (i = 0; i &lt; ARGC; i++)
        printf &quot;\tARGV[%d] = %s\n&quot;, i, ARGV[i]
}
END   { printf &quot;A=%d, B=%d\n&quot;, A, B }
</pre></div>

<p>Running it produces the following:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk -v A=1 -f showargs.awk B=2 /dev/null</kbd>
-| A=1, B=0
-|        ARGV[0] = awk
-|        ARGV[1] = B=2
-|        ARGV[2] = /dev/null
-| A=1, B=2
</pre></div>

<p>A program can alter <code class="code">ARGC</code> and the elements of <code class="code">ARGV</code>.
Each time <code class="command">awk</code> reaches the end of an input file, it uses the next
element of <code class="code">ARGV</code> as the name of the next input file.  By storing a
different string there, a program can change which files are read.
Use <code class="code">&quot;-&quot;</code> to represent the standard input.  Storing
additional elements and incrementing <code class="code">ARGC</code> causes
additional files to be read.
</p>
<p>If the value of <code class="code">ARGC</code> is decreased, that eliminates input files
from the end of the list.  By recording the old value of <code class="code">ARGC</code>
elsewhere, a program can treat the eliminated arguments as
something other than file names.
</p>
<p>To eliminate a file from the middle of the list, store the null string
(<code class="code">&quot;&quot;</code>) into <code class="code">ARGV</code> in place of the file&rsquo;s name.  As a
special feature, <code class="command">awk</code> ignores file names that have been
replaced with the null string.
Another option is to
use the <code class="code">delete</code> statement to remove elements from
<code class="code">ARGV</code> (see <a class="pxref" href="#Delete">The <code class="code">delete</code> Statement</a>).
</p>
<p>All of these actions are typically done in the <code class="code">BEGIN</code> rule,
before actual processing of the input begins.
See <a class="xref" href="#Split-Program">Splitting a Large File into Pieces</a> and
see <a class="pxref" href="#Tee-Program">Duplicating Output into Multiple Files</a>
for examples
of each way of removing elements from <code class="code">ARGV</code>.
</p>
<p>To actually get options into an <code class="command">awk</code> program,
end the <code class="command">awk</code> options with <samp class="option">--</samp> and then supply
the <code class="command">awk</code> program&rsquo;s options, in the following manner:
</p>
<div class="example">
<pre class="example-preformatted">awk -f myprog.awk -- -v -q file1 file2 ...
</pre></div>

<p>The following fragment processes <code class="code">ARGV</code> in order to examine, and
then remove, the previously mentioned command-line options:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    for (i = 1; i &lt; ARGC; i++) {
        if (ARGV[i] == &quot;-v&quot;)
            verbose = 1
        else if (ARGV[i] == &quot;-q&quot;)
            debug = 1
        else if (ARGV[i] ~ /^-./) {
            e = sprintf(&quot;%s: unrecognized option -- %c&quot;,
                    ARGV[0], substr(ARGV[i], 2, 1))
            print e &gt; &quot;/dev/stderr&quot;
        } else
            break
        delete ARGV[i]
    }
}
</pre></div>

<a class="index-entry-id" id="index-differences-in-awk-and-gawk-ARGC_002fARGV-variables"></a>
<p>Ending the <code class="command">awk</code> options with <samp class="option">--</samp> isn&rsquo;t
necessary in <code class="command">gawk</code>. Unless <samp class="option">--posix</samp> has
been specified, <code class="command">gawk</code> silently puts any unrecognized options
into <code class="code">ARGV</code> for the <code class="command">awk</code> program to deal with.  As soon
as it sees an unknown option, <code class="command">gawk</code> stops looking for other
options that it might otherwise recognize.  The previous command line with
<code class="command">gawk</code> would be:
</p>
<div class="example">
<pre class="example-preformatted">gawk -f myprog.awk -q -v file1 file2 ...
</pre></div>

<p>Because <samp class="option">-q</samp> is not a valid <code class="command">gawk</code> option, it and the
following <samp class="option">-v</samp> are passed on to the <code class="command">awk</code> program.
(See <a class="xref" href="#Getopt-Function">Processing Command-Line Options</a> for an <code class="command">awk</code> library function that
parses command-line options.)
</p>
<p>When designing your program, you should choose options that don&rsquo;t
conflict with <code class="command">gawk</code>&rsquo;s, because it will process any options
that it accepts before passing the rest of the command line on to
your program.  Using &lsquo;<samp class="samp">#!</samp>&rsquo; with the <samp class="option">-E</samp> option may help
(see <a class="pxref" href="#Executable-Scripts">Executable <code class="command">awk</code> Programs</a>
and
see <a class="pxref" href="#Options">Command-Line Options</a>).
</p>
<hr>
</div>
</div>
<div class="section-level-extent" id="Pattern-Action-Summary">
<div class="nav-panel">
<p>
Previous: <a href="#Built_002din-Variables" accesskey="p" rel="prev">Predefined Variables</a>, Up: <a href="#Patterns-and-Actions" accesskey="u" rel="up">Patterns, Actions, and Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary-6"><span>7.6 Summary<a class="copiable-link" href="#Summary-6"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>Pattern&ndash;action pairs make up the basic elements of an <code class="command">awk</code>
program.  Patterns are either normal expressions, range expressions,
or regexp constants; one of the special keywords <code class="code">BEGIN</code>, <code class="code">END</code>,
<code class="code">BEGINFILE</code>, or <code class="code">ENDFILE</code>; or empty.  The action executes if
the current record matches the pattern.  Empty (missing) patterns match
all records.

</li><li>I/O from <code class="code">BEGIN</code> and <code class="code">END</code> rules has certain constraints.
This is also true, only more so, for <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code>
rules.  The latter two give you &ldquo;hooks&rdquo; into <code class="command">gawk</code>&rsquo;s file
processing, allowing you to recover from a file that otherwise would
cause a fatal error (such as a file that cannot be opened).

</li><li>Shell variables can be used in <code class="command">awk</code> programs by careful
use of shell quoting.  It is easier to pass a shell variable into
<code class="command">awk</code> by using the <samp class="option">-v</samp> option and an <code class="command">awk</code>
variable.

</li><li>Actions consist of statements enclosed in curly braces. Statements
are built up from expressions, control statements, compound statements,
input and output statements, and deletion statements.

</li><li>The control statements in <code class="command">awk</code> are <code class="code">if</code>-<code class="code">else</code>,
<code class="code">while</code>, <code class="code">for</code>, and <code class="code">do</code>-<code class="code">while</code>.  <code class="command">gawk</code>
adds the <code class="code">switch</code> statement.  There are two flavors of <code class="code">for</code>
statement: one for performing general looping, and the other for iterating
through an array.

</li><li><code class="code">break</code> and <code class="code">continue</code> let you exit early or start the next
iteration of a loop (or get out of a <code class="code">switch</code>).

</li><li><code class="code">next</code> and <code class="code">nextfile</code> let you read the next record and start
over at the top of your program or skip to the next input file and
start over, respectively.

</li><li>The <code class="code">exit</code> statement terminates your program. When executed
from an action (or function body), it transfers control to the
<code class="code">END</code> statements. From an <code class="code">END</code> statement body, it exits
immediately.  You may pass an optional numeric value to be used
as <code class="command">awk</code>&rsquo;s exit status.

</li><li>Some predefined variables provide control over <code class="command">awk</code>, mainly for I/O.
Other variables convey information from <code class="command">awk</code> to your program.

</li><li><code class="code">ARGC</code> and <code class="code">ARGV</code> make the command-line arguments available
to your program. Manipulating them from a <code class="code">BEGIN</code> rule lets you
control how <code class="command">awk</code> will process the provided data files.

</li></ul>

<hr>
</div>
</div>
<div class="chapter-level-extent" id="Arrays">
<div class="nav-panel">
<p>
Next: <a href="#Functions" accesskey="n" rel="next">Functions</a>, Previous: <a href="#Patterns-and-Actions" accesskey="p" rel="prev">Patterns, Actions, and Variables</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Arrays-in-awk"><span>8 Arrays in <code class="command">awk</code><a class="copiable-link" href="#Arrays-in-awk"> &para;</a></span></h2>
<a class="index-entry-id" id="index-arrays"></a>

<p>An <em class="dfn">array</em> is a table of values called <em class="dfn">elements</em>.  The
elements of an array are distinguished by their <em class="dfn">indices</em>.  Indices
may be either numbers or strings.
</p>
<p>This chapter describes how arrays work in <code class="command">awk</code>,
how to use array elements, how to scan through every element in an array,
and how to remove array elements.
It also describes how <code class="command">awk</code> simulates multidimensional
arrays, as well as some of the less obvious points about array usage.
The chapter moves on to discuss <code class="command">gawk</code>&rsquo;s facility
for sorting arrays, and ends with a brief description of <code class="command">gawk</code>&rsquo;s
ability to support true arrays of arrays.
</p>

<ul class="mini-toc">
<li><a href="#Array-Basics" accesskey="1">The Basics of Arrays</a></li>
<li><a href="#Numeric-Array-Subscripts" accesskey="2">Using Numbers to Subscript Arrays</a></li>
<li><a href="#Uninitialized-Subscripts" accesskey="3">Using Uninitialized Variables as Subscripts</a></li>
<li><a href="#Delete" accesskey="4">The <code class="code">delete</code> Statement</a></li>
<li><a href="#Multidimensional" accesskey="5">Multidimensional Arrays</a></li>
<li><a href="#Arrays-of-Arrays" accesskey="6">Arrays of Arrays</a></li>
<li><a href="#Arrays-Summary" accesskey="7">Summary</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Array-Basics">
<div class="nav-panel">
<p>
Next: <a href="#Numeric-Array-Subscripts" accesskey="n" rel="next">Using Numbers to Subscript Arrays</a>, Up: <a href="#Arrays" accesskey="u" rel="up">Arrays in <code class="command">awk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="The-Basics-of-Arrays"><span>8.1 The Basics of Arrays<a class="copiable-link" href="#The-Basics-of-Arrays"> &para;</a></span></h3>

<p>This section presents the basics: working with elements
in arrays one at a time, and traversing all of the elements in
an array.
</p>

<ul class="mini-toc">
<li><a href="#Array-Intro" accesskey="1">Introduction to Arrays</a></li>
<li><a href="#Reference-to-Elements" accesskey="2">Referring to an Array Element</a></li>
<li><a href="#Assigning-Elements" accesskey="3">Assigning Array Elements</a></li>
<li><a href="#Array-Example" accesskey="4">Basic Array Example</a></li>
<li><a href="#Scanning-an-Array" accesskey="5">Scanning All Elements of an Array</a></li>
<li><a href="#Controlling-Scanning" accesskey="6">Using Predefined Array Scanning Orders with <code class="command">gawk</code></a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Array-Intro">
<div class="nav-panel">
<p>
Next: <a href="#Reference-to-Elements" accesskey="n" rel="next">Referring to an Array Element</a>, Up: <a href="#Array-Basics" accesskey="u" rel="up">The Basics of Arrays</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Introduction-to-Arrays"><span>8.1.1 Introduction to Arrays<a class="copiable-link" href="#Introduction-to-Arrays"> &para;</a></span></h4>

<a class="index-entry-id" id="index-Wall_002c-Larry"></a>
<blockquote class="quotation">
<p><i class="i">Doing linear scans over an associative array is like trying to club someone
to death with a loaded Uzi.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Larry Wall</em>
</div>
<p>The <code class="command">awk</code> language provides one-dimensional arrays
for storing groups of related strings or numbers.
Every <code class="command">awk</code> array must have a name.  Array names have the same
syntax as variable names; any valid variable name would also be a valid
array name.  But one name cannot be used in both ways (as an array and
as a variable) in the same <code class="command">awk</code> program.
</p>
<p>Arrays in <code class="command">awk</code> superficially resemble arrays in other programming
languages, but there are fundamental differences.  In <code class="command">awk</code>, it
isn&rsquo;t necessary to specify the size of an array before starting to use it.
Additionally, any number or string, not just consecutive integers,
may be used as an array index.
</p>
<p>In most other languages, arrays must be <em class="dfn">declared</em> before use,
including a specification of
how many elements or components they contain.  In such languages, the
declaration causes a contiguous block of memory to be allocated for that
many elements.  Usually, an index in the array must be a nonnegative integer.
For example, the index zero specifies the first element in the array, which is
actually stored at the beginning of the block of memory.  Index one
specifies the second element, which is stored in memory right after the
first element, and so on.  It is impossible to add more elements to the
array, because it has room only for as many elements as given in
the declaration.
(Some languages allow arbitrary starting and ending
indices&mdash;e.g., &lsquo;<samp class="samp">15 .. 27</samp>&rsquo;&mdash;but the size of the array is still fixed when
the array is declared.)
</p>
<p>A contiguous array of four elements might look like
<a class="ref" href="#figure_002darray_002delements">Figure 8.1</a>,
conceptually, if the element values are eight, <code class="code">&quot;foo&quot;</code>,
<code class="code">&quot;&quot;</code>, and 30.
</p>
<div class="float" id="figure_002darray_002delements">
<div class="center"><img class="image" src="gawk_array-elements.png" alt="A Contiguous Array">
</div><div class="caption"><p><strong class="strong">Figure 8.1: </strong>A contiguous array</p></div></div>

<p>Only the values are stored; the indices are implicit from the order of
the values. Here, eight is the value at index zero, because eight appears in the
position with zero elements before it.
</p>
<a class="index-entry-id" id="index-arrays-indexing"></a>
<a class="index-entry-id" id="index-indexing-arrays"></a>
<a class="index-entry-id" id="index-associative-arrays"></a>
<a class="index-entry-id" id="index-arrays-associative"></a>
<p>Arrays in <code class="command">awk</code> are different&mdash;they are <em class="dfn">associative</em>.  This means
that each array is a collection of pairs&mdash;an index and its corresponding
array element value:
</p>
<table class="multitable">
<thead><tr><th width="10%"></th><th width="10%">Index</th><th width="10%">Value</th></tr></thead>
<tbody><tr><td width="10%"></td><td width="10%"><code class="code">3</code></td><td width="10%"><code class="code">30</code></td></tr>
<tr><td width="10%"></td><td width="10%"><code class="code">1</code></td><td width="10%"><code class="code">&quot;foo&quot;</code></td></tr>
<tr><td width="10%"></td><td width="10%"><code class="code">0</code></td><td width="10%"><code class="code">8</code></td></tr>
<tr><td width="10%"></td><td width="10%"><code class="code">2</code></td><td width="10%"><code class="code">&quot;&quot;</code></td></tr>
</tbody>
</table>


<p>The pairs are shown in jumbled order because their order is
irrelevant.<a class="footnote" id="DOCF44" href="#FOOT44"><sup>44</sup></a>
</p>
<p>One advantage of associative arrays is that new pairs can be added
at any time.  For example, suppose a tenth element is added to the array
whose value is <code class="code">&quot;number&nbsp;ten&quot;</code><!-- /@w -->.  The result is:
</p>
<table class="multitable">
<thead><tr><th width="10%"></th><th width="10%">Index</th><th width="20%">Value</th></tr></thead>
<tbody><tr><td width="10%"></td><td width="10%"><code class="code">10</code></td><td width="20%"><code class="code">&quot;number ten&quot;</code></td></tr>
<tr><td width="10%"></td><td width="10%"><code class="code">3</code></td><td width="20%"><code class="code">30</code></td></tr>
<tr><td width="10%"></td><td width="10%"><code class="code">1</code></td><td width="20%"><code class="code">&quot;foo&quot;</code></td></tr>
<tr><td width="10%"></td><td width="10%"><code class="code">0</code></td><td width="20%"><code class="code">8</code></td></tr>
<tr><td width="10%"></td><td width="10%"><code class="code">2</code></td><td width="20%"><code class="code">&quot;&quot;</code></td></tr>
</tbody>
</table>


<a class="index-entry-id" id="index-sparse-arrays"></a>
<a class="index-entry-id" id="index-arrays-sparse"></a>
<p>Now the array is <em class="dfn">sparse</em>, which just means some indices are missing.
It has elements 0&ndash;3 and 10, but doesn&rsquo;t have elements 4, 5, 6, 7, 8, or 9.
</p>
<p>Another consequence of associative arrays is that the indices don&rsquo;t
have to be nonnegative integers.  Any number, or even a string, can be
an index.  For example, the following is an array that translates words from
English to French:
</p>
<table class="multitable">
<thead><tr><th width="10%"></th><th width="10%">Index</th><th width="10%">Value</th></tr></thead>
<tbody><tr><td width="10%"></td><td width="10%"><code class="code">&quot;dog&quot;</code></td><td width="10%"><code class="code">&quot;chien&quot;</code></td></tr>
<tr><td width="10%"></td><td width="10%"><code class="code">&quot;cat&quot;</code></td><td width="10%"><code class="code">&quot;chat&quot;</code></td></tr>
<tr><td width="10%"></td><td width="10%"><code class="code">&quot;one&quot;</code></td><td width="10%"><code class="code">&quot;un&quot;</code></td></tr>
<tr><td width="10%"></td><td width="10%"><code class="code">1</code></td><td width="10%"><code class="code">&quot;un&quot;</code></td></tr>
</tbody>
</table>


<p>Here we decided to translate the number one in both spelled-out and
numeric form&mdash;thus illustrating that a single array can have both
numbers and strings as indices.
(In fact, array subscripts are always strings.
There are some subtleties to how numbers work when used as
array subscripts; this is discussed in more detail in
<a class="ref" href="#Numeric-Array-Subscripts">Using Numbers to Subscript Arrays</a>.)
Here, the number <code class="code">1</code> isn&rsquo;t double-quoted, because <code class="command">awk</code>
automatically converts it to a string.
</p>
<a class="index-entry-id" id="index-gawk-IGNORECASE-variable-in-2"></a>
<a class="index-entry-id" id="index-case-sensitivity-array-indices-and"></a>
<a class="index-entry-id" id="index-arrays-IGNORECASE-variable-and"></a>
<a class="index-entry-id" id="index-IGNORECASE-variable-array-indices-and"></a>
<p>The value of <code class="code">IGNORECASE</code> has no effect upon array subscripting.
The identical string value used to store an array element must be used
to retrieve it.
When <code class="command">awk</code> creates an array (e.g., with the <code class="code">split()</code>
built-in function),
that array&rsquo;s indices are consecutive integers starting at one.
(See <a class="xref" href="#String-Functions">String-Manipulation Functions</a>.)
</p>
<p><code class="command">awk</code>&rsquo;s arrays are efficient&mdash;the time to access an element
is independent of the number of elements in the array.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Reference-to-Elements">
<div class="nav-panel">
<p>
Next: <a href="#Assigning-Elements" accesskey="n" rel="next">Assigning Array Elements</a>, Previous: <a href="#Array-Intro" accesskey="p" rel="prev">Introduction to Arrays</a>, Up: <a href="#Array-Basics" accesskey="u" rel="up">The Basics of Arrays</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Referring-to-an-Array-Element"><span>8.1.2 Referring to an Array Element<a class="copiable-link" href="#Referring-to-an-Array-Element"> &para;</a></span></h4>
<a class="index-entry-id" id="index-arrays-referencing-elements"></a>
<a class="index-entry-id" id="index-array-members"></a>
<a class="index-entry-id" id="index-elements-in-arrays"></a>

<p>The principal way to use an array is to refer to one of its elements.
An <em class="dfn">array reference</em> is an expression as follows:
</p>
<div class="example">
<pre class="example-preformatted"><var class="var">array</var>[<var class="var">index-expression</var>]
</pre></div>

<p>Here, <var class="var">array</var> is the name of an array.  The expression <var class="var">index-expression</var> is
the index of the desired element of the array.
</p>
<p>The value of the array reference is the current value of that array
element.  For example, <code class="code">foo[4.3]</code> is an expression referencing the element
of array <code class="code">foo</code> at index &lsquo;<samp class="samp">4.3</samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-arrays-unassigned-elements"></a>
<a class="index-entry-id" id="index-unassigned-array-elements"></a>
<a class="index-entry-id" id="index-empty-array-elements"></a>
<p>A reference to an array element that has no recorded value yields a value of
<code class="code">&quot;&quot;</code>, the null string.  This includes elements
that have not been assigned any value as well as elements that have been
deleted (see <a class="pxref" href="#Delete">The <code class="code">delete</code> Statement</a>).
</p>
<a class="index-entry-id" id="index-non_002dexistent-array-elements"></a>
<a class="index-entry-id" id="index-arrays-elements-that-don_0027t-exist"></a>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> A reference to an element that does not exist <em class="emph">automatically</em> creates
that array element, with the null string as its value.  (In some cases,
this is unfortunate, because it might waste memory inside <code class="command">awk</code>.)
</p>
<p>Novice <code class="command">awk</code> programmers often make the mistake of checking if
an element exists by checking if the value is empty:
</p>
<div class="example">
<pre class="example-preformatted"># Check if &quot;foo&quot; exists in a:         <i class="i">Incorrect!</i>
if (a[&quot;foo&quot;] != &quot;&quot;) ...
</pre></div>

<p>This is incorrect for two reasons. First, it <em class="emph">creates</em> <code class="code">a[&quot;foo&quot;]</code>
if it didn&rsquo;t exist before! Second, it is valid (if a bit unusual) to set
an array element equal to the empty string.
</p></blockquote>

<a class="index-entry-id" id="index-in-operator-testing-if-array-element-exists"></a>
<p>To determine whether an element exists in an array at a certain index, use
the following expression:
</p>
<div class="example">
<pre class="example-preformatted"><var class="var">indx</var> in <var class="var">array</var>
</pre></div>

<a class="index-entry-id" id="index-side-effects-array-indexing"></a>
<p>This expression tests whether the particular index <var class="var">indx</var> exists,
without the side effect of creating that element if it is not present.
The expression has the value one (true) if <code class="code"><var class="var">array</var>[<var class="var">indx</var>]</code>
exists and zero (false) if it does not exist.
(We use <var class="var">indx</var> here, because &lsquo;<samp class="samp">index</samp>&rsquo; is the name of a built-in
function.)
For example, this statement tests whether the array <code class="code">frequencies</code>
contains the index &lsquo;<samp class="samp">2</samp>&rsquo;:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">if (2 in frequencies)
    print &quot;Subscript 2 is present.&quot;
</pre></div></div>

<p>Note that this is <em class="emph">not</em> a test of whether the array
<code class="code">frequencies</code> contains an element whose <em class="emph">value</em> is two.
There is no way to do that except to scan all the elements.  Also, this
<em class="emph">does not</em> create <code class="code">frequencies[2]</code>, while the following
(incorrect) alternative does:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">if (frequencies[2] != &quot;&quot;)
    print &quot;Subscript 2 is present.&quot;
</pre></div></div>

<hr>
</div>
<div class="subsection-level-extent" id="Assigning-Elements">
<div class="nav-panel">
<p>
Next: <a href="#Array-Example" accesskey="n" rel="next">Basic Array Example</a>, Previous: <a href="#Reference-to-Elements" accesskey="p" rel="prev">Referring to an Array Element</a>, Up: <a href="#Array-Basics" accesskey="u" rel="up">The Basics of Arrays</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Assigning-Array-Elements"><span>8.1.3 Assigning Array Elements<a class="copiable-link" href="#Assigning-Array-Elements"> &para;</a></span></h4>
<a class="index-entry-id" id="index-arrays-elements-assigning-values"></a>
<a class="index-entry-id" id="index-elements-in-arrays-assigning-values"></a>

<p>Array elements can be assigned values just like
<code class="command">awk</code> variables:
</p>
<div class="example">
<pre class="example-preformatted"><var class="var">array</var>[<var class="var">index-expression</var>] = <var class="var">value</var>
</pre></div>

<p><var class="var">array</var> is the name of an array.  The expression
<var class="var">index-expression</var> is the index of the element of the array that is
assigned a value.  The expression <var class="var">value</var> is the value to
assign to that element of the array.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Array-Example">
<div class="nav-panel">
<p>
Next: <a href="#Scanning-an-Array" accesskey="n" rel="next">Scanning All Elements of an Array</a>, Previous: <a href="#Assigning-Elements" accesskey="p" rel="prev">Assigning Array Elements</a>, Up: <a href="#Array-Basics" accesskey="u" rel="up">The Basics of Arrays</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Basic-Array-Example"><span>8.1.4 Basic Array Example<a class="copiable-link" href="#Basic-Array-Example"> &para;</a></span></h4>
<a class="index-entry-id" id="index-arrays-example-of-using"></a>

<p>The following program takes a list of lines, each beginning with a line
number, and prints them out in order of line number.  The line numbers
are not in order when they are first read&mdash;instead, they
are scrambled.  This program sorts the lines by making an array using
the line numbers as subscripts.  The program then prints out the lines
in sorted order of their numbers.  It is a very simple program and gets
confused upon encountering repeated numbers, gaps, or lines that don&rsquo;t
begin with a number:
</p>
<div class="example">
<pre class="example-preformatted">{
    if ($1 &gt; max)
        max = $1
    arr[$1] = $0
}

END {
    for (x = 1; x &lt;= max; x++)
        print arr[x]
}
</pre></div>

<p>The first rule keeps track of the largest line number seen so far;
it also stores each line into the array <code class="code">arr</code>, at an index that
is the line&rsquo;s number.
The second rule runs after all the input has been read, to print out
all the lines.
When this program is run with the following input:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">5  I am the Five man
2  Who are you?  The new number two!
4  . . . And four on the floor
1  Who is number one?
3  I three you.
</pre></div></div>

<p>Its output is:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">1  Who is number one?
2  Who are you?  The new number two!
3  I three you.
4  . . . And four on the floor
5  I am the Five man
</pre></div></div>

<p>If a line number is repeated, the last line with a given number overrides
the others.
Gaps in the line numbers can be handled with an easy improvement to the
program&rsquo;s <code class="code">END</code> rule, as follows:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">END {
    for (x = 1; x &lt;= max; x++)
        if (x in arr)
            print arr[x]
}
</pre></div></div>

<p>As mentioned, the program is simplistic. It can be easily
confused; for example, by using negative or nonalphabetic line numbers.
The point here is merely to demonstrate basic array usage.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Scanning-an-Array">
<div class="nav-panel">
<p>
Next: <a href="#Controlling-Scanning" accesskey="n" rel="next">Using Predefined Array Scanning Orders with <code class="command">gawk</code></a>, Previous: <a href="#Array-Example" accesskey="p" rel="prev">Basic Array Example</a>, Up: <a href="#Array-Basics" accesskey="u" rel="up">The Basics of Arrays</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Scanning-All-Elements-of-an-Array"><span>8.1.5 Scanning All Elements of an Array<a class="copiable-link" href="#Scanning-All-Elements-of-an-Array"> &para;</a></span></h4>
<a class="index-entry-id" id="index-elements-in-arrays-scanning"></a>
<a class="index-entry-id" id="index-scanning-arrays"></a>
<a class="index-entry-id" id="index-arrays-scanning"></a>
<a class="index-entry-id" id="index-loops-for-array-scanning"></a>

<p>In programs that use arrays, it is often necessary to use a loop that
executes once for each element of an array.  In other languages, where
arrays are contiguous and indices are limited to nonnegative integers,
this is easy: all the valid indices can be found by counting from
the lowest index up to the highest.  This technique won&rsquo;t do the job
in <code class="command">awk</code>, because any number or string can be an array index.
So <code class="command">awk</code> has a special kind of <code class="code">for</code> statement for scanning
an array:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">for (<var class="var">var</var> in <var class="var">array</var>)
    <var class="var">body</var>
</pre></div></div>

<a class="index-entry-id" id="index-in-operator-use-in-loops"></a>
<p>This loop executes <var class="var">body</var> once for each index in <var class="var">array</var> that the
program has previously used, with the variable <var class="var">var</var> set to that index.
</p>
<a class="index-entry-id" id="index-arrays-for-statement-and"></a>
<a class="index-entry-id" id="index-for-statement-looping-over-arrays"></a>
<p>The following program uses this form of the <code class="code">for</code> statement.  The
first rule scans the input records and notes which words appear (at
least once) in the input, by storing a one into the array <code class="code">used</code> with
the word as the index.  The second rule scans the elements of <code class="code">used</code> to
find all the distinct words that appear in the input.  It prints each
word that is more than 10 characters long and also prints the number of
such words.
See <a class="xref" href="#String-Functions">String-Manipulation Functions</a>
for more information on the built-in function <code class="code">length()</code>.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted"># Record a 1 for each word that is used at least once
{
    for (i = 1; i &lt;= NF; i++)
        used[$i] = 1
}
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted"># Find number of distinct words more than 10 characters long
END {
    for (x in used) {
        if (length(x) &gt; 10) {
            ++num_long_words
            print x
        }
    }
    print num_long_words, &quot;words longer than 10 characters&quot;
}
</pre></div></div>

<p>See <a class="xref" href="#Word-Sorting">Generating Word-Usage Counts</a>
for a more detailed example of this type.
</p>
<a class="index-entry-id" id="index-arrays-elements-order-of-access-by-in-operator"></a>
<a class="index-entry-id" id="index-elements-in-arrays-order-of-access-by-in-operator"></a>
<a class="index-entry-id" id="index-in-operator-order-of-array-access"></a>
<p>The order in which elements of the array are accessed by this statement
is determined by the internal arrangement of the array elements within
<code class="command">awk</code> and in standard <code class="command">awk</code> cannot be controlled
or changed.  This can lead to problems if new elements are added to
<var class="var">array</var> by statements in the loop body; it is not predictable whether
the <code class="code">for</code> loop will reach them.  Similarly, changing <var class="var">var</var> inside
the loop may produce strange results.  It is best to avoid such things.
</p>
<p>As a point of information, <code class="command">gawk</code> sets up the list of elements
to be iterated over before the loop starts, and does not change it.
But not all <code class="command">awk</code> versions do so. Consider this program, named
<samp class="file">loopcheck.awk</samp>:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    a[&quot;here&quot;] = &quot;here&quot;
    a[&quot;is&quot;] = &quot;is&quot;
    a[&quot;a&quot;] = &quot;a&quot;
    a[&quot;loop&quot;] = &quot;loop&quot;
    for (i in a) {
        j++
        a[j] = j
        print i
    }
}
</pre></div>

<p>Here is what happens when run with <code class="command">gawk</code> (and <code class="command">mawk</code>):
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f loopcheck.awk</kbd>
-| here
-| loop
-| a
-| is
</pre></div>

<p>Contrast this to BWK <code class="command">awk</code>:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">nawk -f loopcheck.awk</kbd>
-| loop
-| here
-| is
-| a
-| 1
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Controlling-Scanning">
<div class="nav-panel">
<p>
Previous: <a href="#Scanning-an-Array" accesskey="p" rel="prev">Scanning All Elements of an Array</a>, Up: <a href="#Array-Basics" accesskey="u" rel="up">The Basics of Arrays</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Using-Predefined-Array-Scanning-Orders-with-gawk"><span>8.1.6 Using Predefined Array Scanning Orders with <code class="command">gawk</code><a class="copiable-link" href="#Using-Predefined-Array-Scanning-Orders-with-gawk"> &para;</a></span></h4>

<p>This subsection describes a feature that is specific to <code class="command">gawk</code>.
</p>
<p>By default, when a <code class="code">for</code> loop traverses an array, the order
is undefined, meaning that the <code class="command">awk</code> implementation
determines the order in which the array is traversed.
This order is usually based on the internal implementation of arrays
and will vary from one version of <code class="command">awk</code> to the next.
</p>
<a class="index-entry-id" id="index-array-scanning-order_002c-controlling"></a>
<a class="index-entry-id" id="index-controlling-array-scanning-order"></a>
<p>Often, though, you may wish to do something simple, such as
&ldquo;traverse the array by comparing the indices in ascending order,&rdquo;
or &ldquo;traverse the array by comparing the values in descending order.&rdquo;
<code class="command">gawk</code> provides two mechanisms that give you this control:
</p>
<ul class="itemize mark-bullet">
<li>Set <code class="code">PROCINFO[&quot;sorted_in&quot;]</code> to one of a set of predefined values.
We describe this now.

</li><li>Set <code class="code">PROCINFO[&quot;sorted_in&quot;]</code> to the name of a user-defined function
to use for comparison of array elements. This advanced feature
is described later in <a class="ref" href="#Array-Sorting">Controlling Array Traversal and Array Sorting</a>.
</li></ul>

<a class="index-entry-id" id="index-PROCINFO-array-values-of-sorted_005fin"></a>
<p>The following special values for <code class="code">PROCINFO[&quot;sorted_in&quot;]</code> are available:
</p>
<dl class="table">
<dt><code class="code">&quot;@unsorted&quot;</code></dt>
<dd><p>Array elements are processed in arbitrary order, which is the default
<code class="command">awk</code> behavior.
</p>
</dd>
<dt><code class="code">&quot;@ind_str_asc&quot;</code></dt>
<dd><p>Order by indices in ascending order compared as strings; this is the most basic sort.
(Internally, array indices are always strings, so with &lsquo;<samp class="samp">a[2*5] = 1</samp>&rsquo;
the index is <code class="code">&quot;10&quot;</code> rather than numeric 10.)
</p>
</dd>
<dt><code class="code">&quot;@ind_num_asc&quot;</code></dt>
<dd><p>Order by indices in ascending order but force them to be treated as numbers in the process.
Any index with a non-numeric value will end up positioned as if it were zero.
</p>
</dd>
<dt><code class="code">&quot;@val_type_asc&quot;</code></dt>
<dd><p>Order by element values in ascending order (rather than by indices).
Ordering is by the type assigned to the element
(see <a class="pxref" href="#Typing-and-Comparison">Variable Typing and Comparison Expressions</a>).
All numeric values come before all string values,
which in turn come before all subarrays.
(Subarrays have not been described yet;
see <a class="pxref" href="#Arrays-of-Arrays">Arrays of Arrays</a>.)
</p>
<p>If you choose to use this feature in traversing <code class="code">FUNCTAB</code>
(see <a class="pxref" href="#Auto_002dset">Built-in Variables That Convey Information</a>), then the order is built-in functions first
(see <a class="pxref" href="#Built_002din">Built-in Functions</a>), then user-defined functions (see <a class="pxref" href="#User_002ddefined">User-Defined Functions</a>)
next, and finally functions loaded from an extension
(see <a class="pxref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>).
</p>
</dd>
<dt><code class="code">&quot;@val_str_asc&quot;</code></dt>
<dd><p>Order by element values in ascending order (rather than by indices).  Scalar values are
compared as strings.
If the string values are identical,
the index string values are compared instead.
When comparing non-scalar values,
<code class="code">&quot;@val_type_asc&quot;</code> sort ordering is used, so subarrays, if present,
come out last.
</p>
</dd>
<dt><code class="code">&quot;@val_num_asc&quot;</code></dt>
<dd><p>Order by element values in ascending order (rather than by indices).  Scalar values are
compared as numbers.
Non-scalar values are compared using <code class="code">&quot;@val_type_asc&quot;</code> sort ordering,
so subarrays, if present, come out last.
When numeric values are equal, the string values are used to provide
an ordering: this guarantees consistent results across different
versions of the C <code class="code">qsort()</code> function,<a class="footnote" id="DOCF45" href="#FOOT45"><sup>45</sup></a> which <code class="command">gawk</code> uses internally
to perform the sorting.
If the string values are also identical,
the index string values are compared instead.
</p>

</dd>
<dt><code class="code">&quot;@ind_str_desc&quot;</code></dt>
<dd><p>Like <code class="code">&quot;@ind_str_asc&quot;</code>, but the
string indices are ordered from high to low.
</p>
</dd>
<dt><code class="code">&quot;@ind_num_desc&quot;</code></dt>
<dd><p>Like <code class="code">&quot;@ind_num_asc&quot;</code>, but the
numeric indices are ordered from high to low.
</p>
</dd>
<dt><code class="code">&quot;@val_type_desc&quot;</code></dt>
<dd><p>Like <code class="code">&quot;@val_type_asc&quot;</code>, but the
element values, based on type, are ordered from high to low.
Subarrays, if present, come out first.
</p>
</dd>
<dt><code class="code">&quot;@val_str_desc&quot;</code></dt>
<dd><p>Like <code class="code">&quot;@val_str_asc&quot;</code>, but the
element values, treated as strings, are ordered from high to low.
If the string values are identical,
the index string values are compared instead.
When comparing non-scalar values,
<code class="code">&quot;@val_type_desc&quot;</code> sort ordering is used, so subarrays, if present,
come out first.
</p>
</dd>
<dt><code class="code">&quot;@val_num_desc&quot;</code></dt>
<dd><p>Like <code class="code">&quot;@val_num_asc&quot;</code>, but the
element values, treated as numbers, are ordered from high to low.
If the numeric values are equal, the string values are compared instead.
If they are also identical, the index string values are compared instead.
Non-scalar values are compared using <code class="code">&quot;@val_type_desc&quot;</code> sort ordering,
so subarrays, if present, come out first.
</p></dd>
</dl>

<p>The array traversal order is determined before the <code class="code">for</code> loop
starts to run. Changing <code class="code">PROCINFO[&quot;sorted_in&quot;]</code> in the loop body
does not affect the loop.
For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk '</kbd>
&gt; <kbd class="kbd">BEGIN {</kbd>
&gt; <kbd class="kbd">   a[4] = 4</kbd>
&gt; <kbd class="kbd">   a[3] = 3</kbd>
&gt; <kbd class="kbd">   for (i in a)</kbd>
&gt; <kbd class="kbd">       print i, a[i]</kbd>
&gt; <kbd class="kbd">}'</kbd>
-| 4 4
-| 3 3
$ <kbd class="kbd">gawk '</kbd>
&gt; <kbd class="kbd">BEGIN {</kbd>
&gt; <kbd class="kbd">   PROCINFO[&quot;sorted_in&quot;] = &quot;@ind_str_asc&quot;</kbd>
&gt; <kbd class="kbd">   a[4] = 4</kbd>
&gt; <kbd class="kbd">   a[3] = 3</kbd>
&gt; <kbd class="kbd">   for (i in a)</kbd>
&gt; <kbd class="kbd">       print i, a[i]</kbd>
&gt; <kbd class="kbd">}'</kbd>
-| 3 3
-| 4 4
</pre></div>

<p>When sorting an array by element values, if a value happens to be
a subarray then it is considered to be greater than any string or
numeric value, regardless of what the subarray itself contains,
and all subarrays are treated as being equal to each other.  Their
order relative to each other is determined by their index strings.
</p>
<p>Here are some additional things to bear in mind about sorted
array traversal:
</p>
<ul class="itemize mark-bullet">
<li>The value of <code class="code">PROCINFO[&quot;sorted_in&quot;]</code> is global. That is, it affects
all array traversal <code class="code">for</code> loops.  If you need to change it within your
own code, you should see if it&rsquo;s defined and save and restore the value:

<div class="example">
<pre class="example-preformatted">...
if (&quot;sorted_in&quot; in PROCINFO)
    save_sorted = PROCINFO[&quot;sorted_in&quot;]

PROCINFO[&quot;sorted_in&quot;] = &quot;@val_str_desc&quot; # or whatever
...
if (save_sorted)
    PROCINFO[&quot;sorted_in&quot;] = save_sorted
</pre></div>

</li><li>As already mentioned, the default array traversal order is represented by
<code class="code">&quot;@unsorted&quot;</code>.  You can also get the default behavior by assigning
the null string to <code class="code">PROCINFO[&quot;sorted_in&quot;]</code> or by just deleting the
<code class="code">&quot;sorted_in&quot;</code> element from the <code class="code">PROCINFO</code> array with
the <code class="code">delete</code> statement.
(The <code class="code">delete</code> statement hasn&rsquo;t been described yet; see <a class="pxref" href="#Delete">The <code class="code">delete</code> Statement</a>.)
</li></ul>

<p>In addition, <code class="command">gawk</code> provides built-in functions for
sorting arrays; see <a class="ref" href="#Array-Sorting-Functions">Sorting Array Values and Indices with <code class="command">gawk</code></a>.
</p>
<hr>
</div>
</div>
<div class="section-level-extent" id="Numeric-Array-Subscripts">
<div class="nav-panel">
<p>
Next: <a href="#Uninitialized-Subscripts" accesskey="n" rel="next">Using Uninitialized Variables as Subscripts</a>, Previous: <a href="#Array-Basics" accesskey="p" rel="prev">The Basics of Arrays</a>, Up: <a href="#Arrays" accesskey="u" rel="up">Arrays in <code class="command">awk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Using-Numbers-to-Subscript-Arrays"><span>8.2 Using Numbers to Subscript Arrays<a class="copiable-link" href="#Using-Numbers-to-Subscript-Arrays"> &para;</a></span></h3>

<a class="index-entry-id" id="index-numbers-as-array-subscripts"></a>
<a class="index-entry-id" id="index-array-subscripts-numbers-as"></a>
<a class="index-entry-id" id="index-arrays-numeric-subscripts"></a>
<a class="index-entry-id" id="index-subscripts-in-arrays-numbers-as"></a>
<a class="index-entry-id" id="index-CONVFMT-variable-array-subscripts-and"></a>
<p>An important aspect to remember about arrays is that <em class="emph">array subscripts
are always strings</em>.  When a numeric value is used as a subscript,
it is converted to a string value before being used for subscripting
(see <a class="pxref" href="#Conversion">Conversion of Strings and Numbers</a>).
This means that the value of the predefined variable <code class="code">CONVFMT</code> can
affect how your program accesses elements of an array.  For example:
</p>
<div class="example">
<pre class="example-preformatted">xyz = 12.153
data[xyz] = 1
CONVFMT = &quot;%2.2f&quot;
if (xyz in data)
    printf &quot;%s is in data\n&quot;, xyz
else
    printf &quot;%s is not in data\n&quot;, xyz
</pre></div>

<p>This prints &lsquo;<samp class="samp">12.15 is not in data</samp>&rsquo;.  The first statement gives
<code class="code">xyz</code> a numeric value.  Assigning to
<code class="code">data[xyz]</code> subscripts <code class="code">data</code> with the string value <code class="code">&quot;12.153&quot;</code>
(using the default conversion value of <code class="code">CONVFMT</code>, <code class="code">&quot;%.6g&quot;</code>).
Thus, the array element <code class="code">data[&quot;12.153&quot;]</code> is assigned the value one.
The program then changes
the value of <code class="code">CONVFMT</code>.  The test &lsquo;<samp class="samp">(xyz in data)</samp>&rsquo; generates a new
string value from <code class="code">xyz</code>&mdash;this time <code class="code">&quot;12.15&quot;</code>&mdash;because the value of
<code class="code">CONVFMT</code> only allows two significant digits.  This test fails,
because <code class="code">&quot;12.15&quot;</code> is different from <code class="code">&quot;12.153&quot;</code>.
</p>
<a class="index-entry-id" id="index-converting-integer-array-subscripts-to-strings"></a>
<a class="index-entry-id" id="index-integer-array-indices"></a>
<p>According to the rules for conversions
(see <a class="pxref" href="#Conversion">Conversion of Strings and Numbers</a>), integer
values always convert to strings as integers, no matter what the
value of <code class="code">CONVFMT</code> may happen to be.  So the usual case of
the following works:
</p>
<div class="example">
<pre class="example-preformatted">for (i = 1; i &lt;= maxsub; i++)
    <i class="i">do something with</i> array[i]
</pre></div>

<p>The &ldquo;integer values always convert to strings as integers&rdquo; rule
has an additional consequence for array indexing.
Octal and hexadecimal constants
(see <a class="pxref" href="#Nondecimal_002dnumbers">Octal and Hexadecimal Numbers</a>)
are converted internally into numbers, and their original form
is forgotten.  This means, for example, that <code class="code">array[17]</code>,
<code class="code">array[021]</code>, and <code class="code">array[0x11]</code> all refer to the same element!
</p>
<p>As with many things in <code class="command">awk</code>, the majority of the time
things work as you would expect them to.  But it is useful to have a precise
knowledge of the actual rules, as they can sometimes have a subtle
effect on your programs.
</p>
<hr>
</div>
<div class="section-level-extent" id="Uninitialized-Subscripts">
<div class="nav-panel">
<p>
Next: <a href="#Delete" accesskey="n" rel="next">The <code class="code">delete</code> Statement</a>, Previous: <a href="#Numeric-Array-Subscripts" accesskey="p" rel="prev">Using Numbers to Subscript Arrays</a>, Up: <a href="#Arrays" accesskey="u" rel="up">Arrays in <code class="command">awk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Using-Uninitialized-Variables-as-Subscripts"><span>8.3 Using Uninitialized Variables as Subscripts<a class="copiable-link" href="#Using-Uninitialized-Variables-as-Subscripts"> &para;</a></span></h3>

<a class="index-entry-id" id="index-variables-uninitialized_002c-as-array-subscripts"></a>
<a class="index-entry-id" id="index-uninitialized-variables_002c-as-array-subscripts"></a>
<a class="index-entry-id" id="index-subscripts-in-arrays-uninitialized-variables-as"></a>
<a class="index-entry-id" id="index-arrays-subscripts_002c-uninitialized-variables-as"></a>
<p>Suppose it&rsquo;s necessary to write a program
to print the input data in reverse order.
A reasonable attempt to do so (with some test
data) might look like this:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo 'line 1</kbd>
&gt; <kbd class="kbd">line 2</kbd>
&gt; <kbd class="kbd">line 3' | awk '{ l[lines] = $0; ++lines }</kbd>
&gt; <kbd class="kbd">END {</kbd>
&gt;     <kbd class="kbd">for (i = lines - 1; i &gt;= 0; i--)</kbd>
&gt;        <kbd class="kbd">print l[i]</kbd>
&gt; <kbd class="kbd">}'</kbd>
-| line 3
-| line 2
</pre></div>

<p>Unfortunately, the very first line of input data did not appear in the
output!
</p>
<p>Upon first glance, we would think that this program should have worked.
The variable <code class="code">lines</code>
is uninitialized, and uninitialized variables have the numeric value zero.
So, <code class="command">awk</code> should have printed the value of <code class="code">l[0]</code>.
</p>
<p>The issue here is that subscripts for <code class="command">awk</code> arrays are <em class="emph">always</em>
strings. Uninitialized variables, when used as strings, have the
value <code class="code">&quot;&quot;</code>, not zero.  Thus, &lsquo;<samp class="samp">line 1</samp>&rsquo; ends up stored in
<code class="code">l[&quot;&quot;]</code>.
The following version of the program works correctly:
</p>
<div class="example">
<pre class="example-preformatted">{ l[lines++] = $0 }
END {
    for (i = lines - 1; i &gt;= 0; i--)
       print l[i]
}
</pre></div>

<p>Here, the &lsquo;<samp class="samp">++</samp>&rsquo; forces <code class="code">lines</code> to be numeric, thus making
the &ldquo;old value&rdquo; numeric zero. This is then converted to <code class="code">&quot;0&quot;</code>
as the array subscript.
</p>
<a class="index-entry-id" id="index-array-subscripts-null-string-as"></a>
<a class="index-entry-id" id="index-null-strings-as-array-subscripts"></a>
<a class="index-entry-id" id="index-dark-corner-array-subscripts"></a>
<a class="index-entry-id" id="index-lint-checking-array-subscripts"></a>
<p>Even though it is somewhat unusual, the null string
(<code class="code">&quot;&quot;</code>) is a valid array subscript.
(d.c.)
<code class="command">gawk</code> warns about the use of the null string as a subscript
if <samp class="option">--lint</samp> is provided
on the command line (see <a class="pxref" href="#Options">Command-Line Options</a>).
</p>
<hr>
</div>
<div class="section-level-extent" id="Delete">
<div class="nav-panel">
<p>
Next: <a href="#Multidimensional" accesskey="n" rel="next">Multidimensional Arrays</a>, Previous: <a href="#Uninitialized-Subscripts" accesskey="p" rel="prev">Using Uninitialized Variables as Subscripts</a>, Up: <a href="#Arrays" accesskey="u" rel="up">Arrays in <code class="command">awk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="The-delete-Statement"><span>8.4 The <code class="code">delete</code> Statement<a class="copiable-link" href="#The-delete-Statement"> &para;</a></span></h3>
<a class="index-entry-id" id="index-delete-statement"></a>
<a class="index-entry-id" id="index-deleting-elements-in-arrays"></a>
<a class="index-entry-id" id="index-arrays-elements-deleting"></a>
<a class="index-entry-id" id="index-elements-in-arrays-deleting"></a>

<p>To remove an individual element of an array, use the <code class="code">delete</code>
statement:
</p>
<div class="example">
<pre class="example-preformatted">delete <var class="var">array</var>[<var class="var">index-expression</var>]
</pre></div>

<p>Once an array element has been deleted, any value the element once
had is no longer available. It is as if the element had never
been referred to or been given a value.
The following is an example of deleting elements in an array:
</p>
<div class="example">
<pre class="example-preformatted">for (i in frequencies)
    delete frequencies[i]
</pre></div>

<p>This example removes all the elements from the array <code class="code">frequencies</code>.
Once an element is deleted, a subsequent <code class="code">for</code> statement to scan the array
does not report that element and using the <code class="code">in</code> operator to check for
the presence of that element returns zero (i.e., false):
</p>
<div class="example">
<pre class="example-preformatted">delete foo[4]
if (4 in foo)
    print &quot;This will never be printed&quot;
</pre></div>

<a class="index-entry-id" id="index-null-strings-deleting-array-elements-and"></a>
<p>It is important to note that deleting an element is <em class="emph">not</em> the
same as assigning it a null value (the empty string, <code class="code">&quot;&quot;</code>).
For example:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">foo[4] = &quot;&quot;
if (4 in foo)
  print &quot;This is printed, even though foo[4] is empty&quot;
</pre></div></div>

<a class="index-entry-id" id="index-lint-checking-array-subscripts-1"></a>
<p>It is not an error to delete an element that does not exist.
However, if <samp class="option">--lint</samp> is provided on the command line
(see <a class="pxref" href="#Options">Command-Line Options</a>),
<code class="command">gawk</code> issues a warning message when an element that
is not in the array is deleted.
</p>
<a class="index-entry-id" id="index-common-extensions-delete-to-delete-entire-arrays"></a>
<a class="index-entry-id" id="index-extensions-common-delete-to-delete-entire-arrays"></a>
<a class="index-entry-id" id="index-arrays-deleting-entire-contents"></a>
<a class="index-entry-id" id="index-deleting-entire-arrays"></a>
<a class="index-entry-id" id="index-delete-array"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-array-elements_002c-deleting"></a>
<p>All the elements of an array may be deleted with a single statement
by leaving off the subscript in the <code class="code">delete</code> statement,
as follows:
</p>

<div class="example">
<pre class="example-preformatted">delete <var class="var">array</var>
</pre></div>

<p>Using this version of the <code class="code">delete</code> statement is about three times
more efficient than the equivalent loop that deletes each element one
at a time.
</p>
<p>This form of the <code class="code">delete</code> statement is also supported
by BWK <code class="command">awk</code> and <code class="command">mawk</code>, as well as
by a number of other implementations.
</p>
<a class="index-entry-id" id="index-Brian-Kernighan_0027s-awk-11"></a>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> For many years, using <code class="code">delete</code> without a subscript was a common
extension.  In September 2012, it was accepted for inclusion into the
POSIX standard.  See <a class="uref" href="http://austingroupbugs.net/view.php?id=544">the Austin Group website</a>.
</p></blockquote>

<a class="index-entry-id" id="index-portability-deleting-array-elements"></a>
<a class="index-entry-id" id="index-Brennan_002c-Michael-3"></a>
<p>The following statement provides a portable but nonobvious way to clear
out an array:<a class="footnote" id="DOCF46" href="#FOOT46"><sup>46</sup></a>
</p>
<div class="example">
<pre class="example-preformatted">split(&quot;&quot;, array)
</pre></div>

<a class="index-entry-id" id="index-split_0028_0029-function-array-elements_002c-deleting"></a>
<p>The <code class="code">split()</code> function
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>)
clears out the target array first. This call asks it to split
apart the null string. Because there is no data to split out, the
function simply clears the array and then returns.
</p>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> Deleting all the elements from an array does not change its type; you cannot
clear an array and then use the array&rsquo;s name as a scalar
(i.e., a regular variable). For example, the following does not work:
</p>
<div class="example">
<pre class="example-preformatted">a[1] = 3
delete a
a = 3
</pre></div>
</blockquote>

<hr>
</div>
<div class="section-level-extent" id="Multidimensional">
<div class="nav-panel">
<p>
Next: <a href="#Arrays-of-Arrays" accesskey="n" rel="next">Arrays of Arrays</a>, Previous: <a href="#Delete" accesskey="p" rel="prev">The <code class="code">delete</code> Statement</a>, Up: <a href="#Arrays" accesskey="u" rel="up">Arrays in <code class="command">awk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Multidimensional-Arrays"><span>8.5 Multidimensional Arrays<a class="copiable-link" href="#Multidimensional-Arrays"> &para;</a></span></h3>


<a class="index-entry-id" id="index-subscripts-in-arrays-multidimensional"></a>
<a class="index-entry-id" id="index-arrays-multidimensional"></a>
<p>A <em class="dfn">multidimensional array</em> is an array in which an element is identified
by a sequence of indices instead of a single index.  For example, a
two-dimensional array requires two indices.  The usual way (in many
languages, including <code class="command">awk</code>) to refer to an element of a
two-dimensional array named <code class="code">grid</code> is with
<code class="code">grid[<var class="var">x</var>,<var class="var">y</var>]</code>.
</p>
<a class="index-entry-id" id="index-SUBSEP-variable-multidimensional-arrays-and"></a>
<p>Multidimensional arrays are supported in <code class="command">awk</code> through
concatenation of indices into one string.
<code class="command">awk</code> converts the indices into strings
(see <a class="pxref" href="#Conversion">Conversion of Strings and Numbers</a>) and
concatenates them together, with a separator between them.  This creates
a single string that describes the values of the separate indices.  The
combined string is used as a single index into an ordinary,
one-dimensional array.  The separator used is the value of the built-in
variable <code class="code">SUBSEP</code>.
</p>
<p>For example, suppose we evaluate the expression &lsquo;<samp class="samp">foo[5,12] = &quot;value&quot;</samp>&rsquo;
when the value of <code class="code">SUBSEP</code> is <code class="code">&quot;@&quot;</code>.  The numbers 5 and 12 are
converted to strings and
concatenated with an &lsquo;<samp class="samp">@</samp>&rsquo; between them, yielding <code class="code">&quot;5@12&quot;</code>; thus,
the array element <code class="code">foo[&quot;5@12&quot;]</code> is set to <code class="code">&quot;value&quot;</code>.
</p>
<p>Once the element&rsquo;s value is stored, <code class="command">awk</code> has no record of whether
it was stored with a single index or a sequence of indices.  The two
expressions &lsquo;<samp class="samp">foo[5,12]</samp>&rsquo; and &lsquo;<samp class="samp">foo[5&nbsp;SUBSEP&nbsp;12]</samp>&rsquo;<!-- /@w --> are always
equivalent.
</p>
<p>The default value of <code class="code">SUBSEP</code> is the string <code class="code">&quot;\034&quot;</code>,
which contains a nonprinting character that is unlikely to appear in an
<code class="command">awk</code> program or in most input data.
The usefulness of choosing an unlikely character comes from the fact
that index values that contain a string matching <code class="code">SUBSEP</code> can lead to
combined strings that are ambiguous.  Suppose that <code class="code">SUBSEP</code> is
<code class="code">&quot;@&quot;</code>; then &lsquo;<samp class="samp">foo[&quot;a@b&quot;,&nbsp;&quot;c&quot;]</samp>&rsquo;<!-- /@w --> and &lsquo;<samp class="samp">foo[&quot;a&quot;,&nbsp;&quot;b@c&quot;]</samp>&rsquo;<!-- /@w --> are indistinguishable because both are actually
stored as &lsquo;<samp class="samp">foo[&quot;a@b@c&quot;]</samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-in-operator-index-existence-in-multidimensional-arrays"></a>
<p>To test whether a particular index sequence exists in a
multidimensional array, use the same operator (<code class="code">in</code>) that is
used for single-dimensional arrays.  Write the whole sequence of indices
in parentheses, separated by commas, as the left operand:
</p>
<div class="example">
<pre class="example-preformatted">if ((<var class="var">subscript1</var>, <var class="var">subscript2</var>, ...) in <var class="var">array</var>)
    ...
</pre></div>

<p>Here is an example that treats its input as a two-dimensional array of
fields; it rotates this array 90 degrees clockwise and prints the
result.  It assumes that all lines have the same number of
elements:
</p>
<div class="example">
<pre class="example-preformatted">{
     if (max_nf &lt; NF)
          max_nf = NF
     max_nr = NR
     for (x = 1; x &lt;= NF; x++)
          vector[x, NR] = $x
}

END {
     for (x = 1; x &lt;= max_nf; x++) {
          for (y = max_nr; y &gt;= 1; --y)
               printf(&quot;%s &quot;, vector[x, y])
          printf(&quot;\n&quot;)
     }
}
</pre></div>

<p>When given the input:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">1 2 3 4 5 6
2 3 4 5 6 1
3 4 5 6 1 2
4 5 6 1 2 3
</pre></div></div>

<p>the program produces the following output:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">4 3 2 1
5 4 3 2
6 5 4 3
1 6 5 4
2 1 6 5
3 2 1 6
</pre></div></div>

<ul class="mini-toc">
<li><a href="#Multiscanning" accesskey="1">Scanning Multidimensional Arrays</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Multiscanning">
<div class="nav-panel">
<p>
Up: <a href="#Multidimensional" accesskey="u" rel="up">Multidimensional Arrays</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Scanning-Multidimensional-Arrays"><span>8.5.1 Scanning Multidimensional Arrays<a class="copiable-link" href="#Scanning-Multidimensional-Arrays"> &para;</a></span></h4>

<p>There is no special <code class="code">for</code> statement for scanning a
&ldquo;multidimensional&rdquo; array. There cannot be one, because, in truth,
<code class="command">awk</code> does not have
multidimensional arrays or elements&mdash;there is only a
multidimensional <em class="emph">way of accessing</em> an array.
</p>
<a class="index-entry-id" id="index-subscripts-in-arrays-multidimensional-scanning"></a>
<a class="index-entry-id" id="index-arrays-multidimensional-scanning"></a>
<a class="index-entry-id" id="index-scanning-multidimensional-arrays"></a>
<p>However, if your program has an array that is always accessed as
multidimensional, you can get the effect of scanning it by combining
the scanning <code class="code">for</code> statement
(see <a class="pxref" href="#Scanning-an-Array">Scanning All Elements of an Array</a>) with the
built-in <code class="code">split()</code> function
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
It works in the following manner:
</p>
<div class="example">
<pre class="example-preformatted">for (combined in array) {
    split(combined, separate, SUBSEP)
    ...
}
</pre></div>

<p>This sets the variable <code class="code">combined</code> to
each concatenated combined index in the array, and splits it
into the individual indices by breaking it apart where the value of
<code class="code">SUBSEP</code> appears.  The individual indices then become the elements of
the array <code class="code">separate</code>.
</p>
<p>Thus, if a value is previously stored in <code class="code">array[1, &quot;foo&quot;]</code>, then
an element with index <code class="code">&quot;1\034foo&quot;</code> exists in <code class="code">array</code>.  (Recall
that the default value of <code class="code">SUBSEP</code> is the character with code 034.)
Sooner or later, the <code class="code">for</code> statement finds that index and does an
iteration with the variable <code class="code">combined</code> set to <code class="code">&quot;1\034foo&quot;</code>.
Then the <code class="code">split()</code> function is called as follows:
</p>
<div class="example">
<pre class="example-preformatted">split(&quot;1\034foo&quot;, separate, &quot;\034&quot;)
</pre></div>

<p>The result is to set <code class="code">separate[1]</code> to <code class="code">&quot;1&quot;</code> and
<code class="code">separate[2]</code> to <code class="code">&quot;foo&quot;</code>.  Presto! The original sequence of
separate indices is recovered.
</p>

<hr>
</div>
</div>
<div class="section-level-extent" id="Arrays-of-Arrays">
<div class="nav-panel">
<p>
Next: <a href="#Arrays-Summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Multidimensional" accesskey="p" rel="prev">Multidimensional Arrays</a>, Up: <a href="#Arrays" accesskey="u" rel="up">Arrays in <code class="command">awk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Arrays-of-Arrays-1"><span>8.6 Arrays of Arrays<a class="copiable-link" href="#Arrays-of-Arrays-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-arrays-arrays-of-arrays"></a>

<p><code class="command">gawk</code> goes beyond standard <code class="command">awk</code>&rsquo;s multidimensional
array access and provides true arrays of
arrays. Elements of a subarray are referred to by their own indices
enclosed in square brackets, just like the elements of the main array.
For example, the following creates a two-element subarray at index <code class="code">1</code>
of the main array <code class="code">a</code>:
</p>
<div class="example">
<pre class="example-preformatted">a[1][1] = 1
a[1][2] = 2
</pre></div>

<p>This simulates a true two-dimensional array. Each subarray element can
contain another subarray as a value, which in turn can hold other arrays
as well. In this way, you can create arrays of three or more dimensions.
The indices can be any <code class="command">awk</code> expressions, including scalars
separated by commas (i.e., a regular <code class="command">awk</code> simulated
multidimensional subscript). So the following is valid in
<code class="command">gawk</code>:
</p>
<div class="example">
<pre class="example-preformatted">a[1][3][1, &quot;name&quot;] = &quot;barney&quot;
</pre></div>

<p>Each subarray and the main array can be of different length. In fact, the
elements of an array or its subarray do not all have to have the same
type. This means that the main array and any of its subarrays can be
nonrectangular, or jagged in structure. You can assign a scalar value to
the index <code class="code">4</code> of the main array <code class="code">a</code>, even though <code class="code">a[1]</code>
is itself an array and not a scalar:
</p>
<div class="example">
<pre class="example-preformatted">a[4] = &quot;An element in a jagged array&quot;
</pre></div>

<p>The terms <em class="dfn">dimension</em>, <em class="dfn">row</em>, and <em class="dfn">column</em> are
meaningless when applied
to such an array, but we will use &ldquo;dimension&rdquo; henceforth to imply the
maximum number of indices needed to refer to an existing element. The
type of any element that has already been assigned cannot be changed
by assigning a value of a different type. You have to first delete the
current element, which effectively makes <code class="command">gawk</code> forget about
the element at that index:
</p>
<div class="example">
<pre class="example-preformatted">delete a[4]
a[4][5][6][7] = &quot;An element in a four-dimensional array&quot;
</pre></div>

<p>This removes the scalar value from index <code class="code">4</code> and then inserts a
three-level nested subarray
containing a scalar. You can also
delete an entire subarray or subarray of subarrays:
</p>
<div class="example">
<pre class="example-preformatted">delete a[4][5]
a[4][5] = &quot;An element in subarray a[4]&quot;
</pre></div>

<p>But recall that you can not delete the main array <code class="code">a</code> and then use it
as a scalar.
</p>
<p>The built-in functions that take array arguments can also be used
with subarrays. For example, the following code fragment uses <code class="code">length()</code>
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>)
to determine the number of elements in the main array <code class="code">a</code> and
its subarrays:
</p>
<div class="example">
<pre class="example-preformatted">print length(a), length(a[1]), length(a[1][3])
</pre></div>

<p>This results in the following output for our main array <code class="code">a</code>:
</p>
<div class="example">
<pre class="example-preformatted">2, 3, 1
</pre></div>

<p>The &lsquo;<samp class="samp"><var class="var">subscript</var> in <var class="var">array</var></samp>&rsquo; expression
(see <a class="pxref" href="#Reference-to-Elements">Referring to an Array Element</a>) works similarly for both
regular <code class="command">awk</code>-style
arrays and arrays of arrays. For example, the tests &lsquo;<samp class="samp">1 in a</samp>&rsquo;,
&lsquo;<samp class="samp">3 in a[1]</samp>&rsquo;, and &lsquo;<samp class="samp">(1, &quot;name&quot;) in a[1][3]</samp>&rsquo; all evaluate to
one (true) for our array <code class="code">a</code>.
</p>
<p>The &lsquo;<samp class="samp">for (item in array)</samp>&rsquo; statement (see <a class="pxref" href="#Scanning-an-Array">Scanning All Elements of an Array</a>)
can be nested to scan all the
elements of an array of arrays if it is rectangular in structure. In order
to print the contents (scalar values) of a two-dimensional array of arrays
(i.e., in which each first-level element is itself an
array, not necessarily of the same length),
you could use the following code:
</p>
<div class="example">
<pre class="example-preformatted">for (i in array)
    for (j in array[i])
        print array[i][j]
</pre></div>

<p>The <code class="code">isarray()</code> function (see <a class="pxref" href="#Type-Functions">Getting Type Information</a>)
lets you test if an array element is itself an array:
</p>
<div class="example">
<pre class="example-preformatted">for (i in array) {
    if (isarray(array[i])) {
        for (j in array[i]) {
            print array[i][j]
        }
    }
    else
        print array[i]
}
</pre></div>

<p>If the structure of a jagged array of arrays is known in advance,
you can often devise workarounds using control statements. For example,
the following code prints the elements of our main array <code class="code">a</code>:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">for (i in a) {
    for (j in a[i]) {
        if (j == 3) {
            for (k in a[i][j])
                print a[i][j][k]
</pre></div><div class="group"><pre class="example-preformatted">        } else
            print a[i][j]
    }
}
</pre></div></div>

<p>See <a class="xref" href="#Walking-Arrays">Traversing Arrays of Arrays</a> for a user-defined function that &ldquo;walks&rdquo; an
arbitrarily dimensioned array of arrays.
</p>
<hr>
</div>
<div class="section-level-extent" id="Arrays-Summary">
<div class="nav-panel">
<p>
Previous: <a href="#Arrays-of-Arrays" accesskey="p" rel="prev">Arrays of Arrays</a>, Up: <a href="#Arrays" accesskey="u" rel="up">Arrays in <code class="command">awk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary-7"><span>8.7 Summary<a class="copiable-link" href="#Summary-7"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>Standard <code class="command">awk</code> provides one-dimensional associative arrays
(arrays indexed by string values).  All arrays are associative; numeric
indices are converted automatically to strings.

</li><li>Array elements are referenced as <code class="code"><var class="var">array</var>[<var class="var">indx</var>]</code>.
Referencing an element creates it if it did not exist previously.

</li><li>The proper way to see if an array has an element with a given index
is to use the <code class="code">in</code> operator: &lsquo;<samp class="samp"><var class="var">indx</var> in <var class="var">array</var></samp>&rsquo;.

</li><li>Use &lsquo;<samp class="samp">for (<var class="var">indx</var> in <var class="var">array</var>) &hellip;</samp>&rsquo; to scan through all the
individual elements of an array. In the body of the loop, <var class="var">indx</var> takes
on the value of each element&rsquo;s index in turn.

</li><li>The order in which a &lsquo;<samp class="samp">for (<var class="var">indx</var> in <var class="var">array</var>)</samp>&rsquo; loop
traverses an array is undefined in POSIX <code class="command">awk</code> and varies among
implementations.  <code class="command">gawk</code> lets you control the order by assigning
special predefined values to <code class="code">PROCINFO[&quot;sorted_in&quot;]</code>.

</li><li>Use &lsquo;<samp class="samp">delete <var class="var">array</var>[<var class="var">indx</var>]</samp>&rsquo; to delete an individual element.
To delete all of the elements in an array,
use &lsquo;<samp class="samp">delete <var class="var">array</var></samp>&rsquo;.
This latter feature has been a common extension for many
years and is now standard, but may not be supported by all commercial
versions of <code class="command">awk</code>.

</li><li>Standard <code class="command">awk</code> simulates multidimensional arrays by separating
subscript values with commas.  The values are concatenated into a
single string, separated by the value of <code class="code">SUBSEP</code>.  The fact
that such a subscript was created in this way is not retained; thus,
changing <code class="code">SUBSEP</code> may have unexpected consequences.  You can use
&lsquo;<samp class="samp">(<var class="var">sub1</var>, <var class="var">sub2</var>, &hellip;) in <var class="var">array</var></samp>&rsquo; to see if such
a multidimensional subscript exists in <var class="var">array</var>.

</li><li><code class="command">gawk</code> provides true arrays of arrays. You use a separate
set of square brackets for each dimension in such an array:
<code class="code">data[row][col]</code>, for example. Array elements may thus be either
scalar values (number or string) or other arrays.

</li><li>Use the <code class="code">isarray()</code> built-in function to determine if an array
element is itself a subarray.

</li></ul>


<hr>
</div>
</div>
<div class="chapter-level-extent" id="Functions">
<div class="nav-panel">
<p>
Next: <a href="#Library-Functions" accesskey="n" rel="next">A Library of <code class="command">awk</code> Functions</a>, Previous: <a href="#Arrays" accesskey="p" rel="prev">Arrays in <code class="command">awk</code></a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Functions-1"><span>9 Functions<a class="copiable-link" href="#Functions-1"> &para;</a></span></h2>

<a class="index-entry-id" id="index-functions-built_002din-1"></a>
<a class="index-entry-id" id="index-built_002din-functions"></a>
<p>This chapter describes <code class="command">awk</code>&rsquo;s built-in functions,
which fall into three categories: numeric, string, and I/O.
<code class="command">gawk</code> provides additional groups of functions
to work with values that represent time, do
bit manipulation, sort arrays,
provide type information, and internationalize and localize programs.
</p>
<p>Besides the built-in functions, <code class="command">awk</code> has provisions for
writing new functions that the rest of a program can use.
The second half of this chapter describes these
<em class="dfn">user-defined</em> functions.
Finally, we explore indirect function calls, a <code class="command">gawk</code>-specific
extension that lets you determine at runtime what function is to
be called.
</p>

<ul class="mini-toc">
<li><a href="#Built_002din" accesskey="1">Built-in Functions</a></li>
<li><a href="#User_002ddefined" accesskey="2">User-Defined Functions</a></li>
<li><a href="#Indirect-Calls" accesskey="3">Indirect Function Calls</a></li>
<li><a href="#Functions-Summary" accesskey="4">Summary</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Built_002din">
<div class="nav-panel">
<p>
Next: <a href="#User_002ddefined" accesskey="n" rel="next">User-Defined Functions</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Built_002din-Functions"><span>9.1 Built-in Functions<a class="copiable-link" href="#Built_002din-Functions"> &para;</a></span></h3>

<p><em class="dfn">Built-in</em> functions are always available for your <code class="command">awk</code>
program to call.  This section defines all the built-in functions
in <code class="command">awk</code>; some of these are mentioned in other sections
but are summarized here for your convenience.
</p>

<ul class="mini-toc">
<li><a href="#Calling-Built_002din" accesskey="1">Calling Built-in Functions</a></li>
<li><a href="#Boolean-Functions" accesskey="2">Generating Boolean Values</a></li>
<li><a href="#Numeric-Functions" accesskey="3">Numeric Functions</a></li>
<li><a href="#String-Functions" accesskey="4">String-Manipulation Functions</a></li>
<li><a href="#I_002fO-Functions" accesskey="5">Input/Output Functions</a></li>
<li><a href="#Time-Functions" accesskey="6">Time Functions</a></li>
<li><a href="#Bitwise-Functions" accesskey="7">Bit-Manipulation Functions</a></li>
<li><a href="#Type-Functions" accesskey="8">Getting Type Information</a></li>
<li><a href="#I18N-Functions" accesskey="9">String-Translation Functions</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Calling-Built_002din">
<div class="nav-panel">
<p>
Next: <a href="#Boolean-Functions" accesskey="n" rel="next">Generating Boolean Values</a>, Up: <a href="#Built_002din" accesskey="u" rel="up">Built-in Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Calling-Built_002din-Functions"><span>9.1.1 Calling Built-in Functions<a class="copiable-link" href="#Calling-Built_002din-Functions"> &para;</a></span></h4>

<p>To call one of <code class="command">awk</code>&rsquo;s built-in functions, write the name of
the function followed
by arguments in parentheses.  For example, &lsquo;<samp class="samp">atan2(y + z, 1)</samp>&rsquo;
is a call to the function <code class="code">atan2()</code> and has two arguments.
</p>
<a class="index-entry-id" id="index-programming-conventions-functions-calling"></a>
<a class="index-entry-id" id="index-whitespace-functions_002c-calling"></a>
<p>Whitespace is ignored between the built-in function name and the
opening parenthesis, but nonetheless it is good practice to avoid using whitespace
there.  User-defined functions do not permit whitespace in this way, and
it is easier to avoid mistakes by following a simple
convention that always works&mdash;no whitespace after a function name.
</p>
<a class="index-entry-id" id="index-troubleshooting-gawk-fatal-errors_002c-function-arguments"></a>
<a class="index-entry-id" id="index-gawk-function-arguments-and"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-function-arguments"></a>
<p>Each built-in function accepts a certain number of arguments.
In some cases, arguments can be omitted. The defaults for omitted
arguments vary from function to function and are described under the
individual functions.  In some <code class="command">awk</code> implementations, extra
arguments given to built-in functions are ignored.  However, in <code class="command">gawk</code>,
it is a fatal error to give extra arguments to a built-in function.
</p>
<p>When a function is called, expressions that create the function&rsquo;s actual
parameters are evaluated completely before the call is performed.
For example, in the following code fragment:
</p>
<div class="example">
<pre class="example-preformatted">i = 4
j = sqrt(i++)
</pre></div>

<a class="index-entry-id" id="index-evaluation-order-functions"></a>
<a class="index-entry-id" id="index-functions-built_002din-evaluation-order"></a>
<a class="index-entry-id" id="index-built_002din-functions-evaluation-order"></a>
<p>the variable <code class="code">i</code> is incremented to the value five before <code class="code">sqrt()</code>
is called with a value of four for its actual parameter.
The order of evaluation of the expressions used for the function&rsquo;s
parameters is undefined.  Thus, avoid writing programs that
assume that parameters are evaluated from left to right or from
right to left.  For example:
</p>
<div class="example">
<pre class="example-preformatted">i = 5
j = atan2(++i, i *= 2)
</pre></div>

<p>If the order of evaluation is left to right, then <code class="code">i</code> first becomes
six, and then 12, and <code class="code">atan2()</code> is called with the two arguments six
and 12.  But if the order of evaluation is right to left, <code class="code">i</code>
first becomes 10, then 11, and <code class="code">atan2()</code> is called with the
two arguments 11 and 10.
</p>

<hr>
</div>
<div class="subsection-level-extent" id="Boolean-Functions">
<div class="nav-panel">
<p>
Next: <a href="#Numeric-Functions" accesskey="n" rel="next">Numeric Functions</a>, Previous: <a href="#Calling-Built_002din" accesskey="p" rel="prev">Calling Built-in Functions</a>, Up: <a href="#Built_002din" accesskey="u" rel="up">Built-in Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Generating-Boolean-Values"><span>9.1.2 Generating Boolean Values<a class="copiable-link" href="#Generating-Boolean-Values"> &para;</a></span></h4>
<a class="index-entry-id" id="index-boolean-function"></a>

<p>This function is specific to <code class="command">gawk</code>. It is not
available in compatibility mode (see <a class="pxref" href="#Options">Command-Line Options</a>):
</p>
<dl class="table">
<dt><a id="index-mkbool_0028_0029-function-_0028gawk_0029"></a><span><code class="code">mkbool(<var class="var">expression</var>)</code><a class="copiable-link" href="#index-mkbool_0028_0029-function-_0028gawk_0029"> &para;</a></span></dt>
<dd><p>Return a Boolean-typed value based on the regular Boolean value
of <var class="var">expression</var>.  Boolean &ldquo;true&rdquo; values have numeric value one.
Boolean &ldquo;false&rdquo; values have numeric
zero.  This is discussed in more
detail in <a class="ref" href="#Boolean-Typed-Values">Boolean Typed Values</a>.
</p></dd>
</dl>

<hr>
</div>
<div class="subsection-level-extent" id="Numeric-Functions">
<div class="nav-panel">
<p>
Next: <a href="#String-Functions" accesskey="n" rel="next">String-Manipulation Functions</a>, Previous: <a href="#Boolean-Functions" accesskey="p" rel="prev">Generating Boolean Values</a>, Up: <a href="#Built_002din" accesskey="u" rel="up">Built-in Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Numeric-Functions-1"><span>9.1.3 Numeric Functions<a class="copiable-link" href="#Numeric-Functions-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-numeric-functions"></a>

<p>The following list describes all of
the built-in functions that work with numbers.
Optional parameters are enclosed in square brackets&nbsp;([&nbsp;]):<!-- /@w -->
</p>
<dl class="table">
<dt><a class="index-entry-id" id="index-arctangent"></a>
<a id="index-atan2_0028_0029-function"></a><span><code class="code">atan2(<var class="var">y</var>, <var class="var">x</var>)</code><a class="copiable-link" href="#index-atan2_0028_0029-function"> &para;</a></span></dt>
<dd><p>Return the arctangent of <code class="code"><var class="var">y</var> / <var class="var">x</var></code> in radians.
You can use &lsquo;<samp class="samp">pi = atan2(0, -1)</samp>&rsquo; to retrieve the value of
<i class="i">pi</i>.
</p>
</dd>
<dt><a class="index-entry-id" id="index-cosine"></a>
<a id="index-cos_0028_0029-function"></a><span><code class="code">cos(<var class="var">x</var>)</code><a class="copiable-link" href="#index-cos_0028_0029-function"> &para;</a></span></dt>
<dd><p>Return the cosine of <var class="var">x</var>, with <var class="var">x</var> in radians.
</p>
</dd>
<dt><a class="index-entry-id" id="index-exponent"></a>
<a id="index-exp_0028_0029-function"></a><span><code class="code">exp(<var class="var">x</var>)</code><a class="copiable-link" href="#index-exp_0028_0029-function"> &para;</a></span></dt>
<dd><p>Return the exponential of <var class="var">x</var> (<code class="code">e ^ <var class="var">x</var></code>) or report
an error if <var class="var">x</var> is out of range.  The range of values <var class="var">x</var> can have
depends on your machine&rsquo;s floating-point representation.
</p>
</dd>
<dt><a class="index-entry-id" id="index-round-to-nearest-integer"></a>
<a id="index-int_0028_0029-function"></a><span><code class="code">int(<var class="var">x</var>)</code><a class="copiable-link" href="#index-int_0028_0029-function"> &para;</a></span></dt>
<dd><p>Return the nearest integer to <var class="var">x</var>, located between <var class="var">x</var> and zero and
truncated toward zero.
For example, <code class="code">int(3)</code> is 3, <code class="code">int(3.9)</code> is 3, <code class="code">int(-3.9)</code>
is &minus;3, and <code class="code">int(-3)</code> is &minus;3 as well.
</p>

</dd>
<dt><a class="index-entry-id" id="index-logarithm"></a>
<a id="index-log_0028_0029-function"></a><span><code class="code">log(<var class="var">x</var>)</code><a class="copiable-link" href="#index-log_0028_0029-function"> &para;</a></span></dt>
<dd><p>Return the natural logarithm of <var class="var">x</var>, if <var class="var">x</var> is positive;
otherwise, return NaN (&ldquo;not a number&rdquo;) on IEEE 754 systems.
Additionally, <code class="command">gawk</code> prints a warning message when <code class="code">x</code>
is negative.
</p>
</dd>
<dt><a class="index-entry-id" id="index-random-numbers-rand_0028_0029_002fsrand_0028_0029-functions"></a>
<a class="index-entry-id" id="index-Beebe_002c-Nelson-H_002eF_002e-1"></a>
<a id="index-rand_0028_0029-function"></a><span><code class="code">rand()</code><a class="copiable-link" href="#index-rand_0028_0029-function"> &para;</a></span></dt>
<dd><p>Return a random number.  The values of <code class="code">rand()</code> are
uniformly distributed between zero and one.
The value could be zero but is never one.<a class="footnote" id="DOCF47" href="#FOOT47"><sup>47</sup></a>
</p>
<p>Often random integers are needed instead.  Following is a user-defined function
that can be used to obtain a random nonnegative integer less than <var class="var">n</var>:
</p>
<div class="example">
<pre class="example-preformatted">function randint(n)
{
    return int(n * rand())
}
</pre></div>

<p>The multiplication produces a random number greater than or equal to
zero and less than <code class="code">n</code>.  Using <code class="code">int()</code>, this result is made into
an integer between zero and <code class="code">n</code> &minus; 1, inclusive.
</p>
<p>The following example uses a similar function to produce random integers
between one and <var class="var">n</var>.  This program prints a new random number for
each input record:
</p>
<div class="example">
<pre class="example-preformatted"># Function to roll a simulated die.
function roll(n) { return 1 + int(rand() * n) }

# Roll 3 six-sided dice and
# print total number of points.
{
    printf(&quot;%d points\n&quot;, roll(6) + roll(6) + roll(6))
}
</pre></div>

<a class="index-entry-id" id="index-seeding-random-number-generator"></a>
<a class="index-entry-id" id="index-random-numbers-seed-of"></a>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> In most <code class="command">awk</code> implementations, including <code class="command">gawk</code>,
<code class="code">rand()</code> starts generating numbers from the same
starting number, or <em class="dfn">seed</em>, each time you run <code class="command">awk</code>.<a class="footnote" id="DOCF48" href="#FOOT48"><sup>48</sup></a>  Thus,
a program generates the same results each time you run it.
The numbers are random within one <code class="command">awk</code> run but predictable
from run to run.  This is convenient for debugging, but if you want
a program to do different things each time it is used, you must change
the seed to a value that is different in each run.  To do this,
use <code class="code">srand()</code>.
</p></blockquote>

</dd>
<dt><a class="index-entry-id" id="index-sine"></a>
<a id="index-sin_0028_0029-function"></a><span><code class="code">sin(<var class="var">x</var>)</code><a class="copiable-link" href="#index-sin_0028_0029-function"> &para;</a></span></dt>
<dd><p>Return the sine of <var class="var">x</var>, with <var class="var">x</var> in radians.
</p>
</dd>
<dt><a class="index-entry-id" id="index-square-root"></a>
<a id="index-sqrt_0028_0029-function"></a><span><code class="code">sqrt(<var class="var">x</var>)</code><a class="copiable-link" href="#index-sqrt_0028_0029-function"> &para;</a></span></dt>
<dd><p>Return the positive square root of <var class="var">x</var>.
<code class="command">gawk</code> prints a warning message
if <var class="var">x</var> is negative.  Thus, <code class="code">sqrt(4)</code> is 2.
</p>
</dd>
<dt><a id="index-srand_0028_0029-function"></a><span><code class="code">srand(</code>[<var class="var">x</var>]<code class="code">)</code><a class="copiable-link" href="#index-srand_0028_0029-function"> &para;</a></span></dt>
<dd><p>Set the starting point, or seed,
for generating random numbers to the value <var class="var">x</var>.
</p>
<p>Each seed value leads to a particular sequence of random
numbers.<a class="footnote" id="DOCF49" href="#FOOT49"><sup>49</sup></a>
Thus, if the seed is set to the same value a second time,
the same sequence of random numbers is produced again.
</p>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> Different <code class="command">awk</code> implementations use different random-number
generators internally.  Don&rsquo;t expect the same <code class="command">awk</code> program
to produce the same series of random numbers when executed by
different versions of <code class="command">awk</code>.
</p></blockquote>

<p>If the argument <var class="var">x</var> is omitted, as in &lsquo;<samp class="samp">srand()</samp>&rsquo;, then the current
date and time of day are used for a seed.  This is the way to get random
numbers that are truly unpredictable.
</p>
<p>The return value of <code class="code">srand()</code> is the previous seed.  This makes it
easy to keep track of the seeds in case you need to consistently reproduce
sequences of random numbers.
</p>
<p>POSIX does not specify the initial seed; it differs among <code class="command">awk</code>
implementations.
</p></dd>
</dl>

<hr>
</div>
<div class="subsection-level-extent" id="String-Functions">
<div class="nav-panel">
<p>
Next: <a href="#I_002fO-Functions" accesskey="n" rel="next">Input/Output Functions</a>, Previous: <a href="#Numeric-Functions" accesskey="p" rel="prev">Numeric Functions</a>, Up: <a href="#Built_002din" accesskey="u" rel="up">Built-in Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="String_002dManipulation-Functions"><span>9.1.4 String-Manipulation Functions<a class="copiable-link" href="#String_002dManipulation-Functions"> &para;</a></span></h4>
<a class="index-entry-id" id="index-string_002dmanipulation-functions"></a>

<p>The functions in this section look at or change the text of one
or more strings.
</p>
<p><code class="command">gawk</code> understands locales (see <a class="pxref" href="#Locales">Where You Are Makes a Difference</a>) and does all
string processing in terms of <em class="emph">characters</em>, not <em class="emph">bytes</em>.
This distinction is particularly important to understand for locales
where one character may be represented by multiple bytes.  Thus, for
example, <code class="code">length()</code> returns the number of characters in a string,
and not the number of bytes used to represent those characters. Similarly,
<code class="code">index()</code> works with character indices, and not byte indices.
</p>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> A number of functions deal with indices into strings.  For these
functions, the first character of a string is at position (index) one.
This is different from C and the languages descended from it, where the
first character is at position zero.  You need to remember this when
doing index calculations, particularly if you are used to C.
</p></blockquote>

<p>In the following list, optional parameters are enclosed in square brackets&nbsp;([&nbsp;]).<!-- /@w -->
Several functions perform string substitution; the full discussion is
provided in the description of the <code class="code">sub()</code> function, which comes
toward the end, because the list is presented alphabetically.
</p>
<p>Those functions that are specific to <code class="command">gawk</code> are marked with a
pound sign (&lsquo;<samp class="samp">#</samp>&rsquo;).  They are not available in compatibility mode
(see <a class="pxref" href="#Options">Command-Line Options</a>):
</p>


<dl class="table">
<dt><a class="index-entry-id" id="index-sort-array"></a>
<a class="index-entry-id" id="index-arrays-elements-retrieving-number-of"></a>
<a id="index-asorti_0028_0029-function-_0028gawk_0029"></a><span><code class="code">asort(</code><var class="var">source</var> [<code class="code">,</code> <var class="var">dest</var> [<code class="code">,</code> <var class="var">how</var> ] ]<code class="code">) #</code><a class="copiable-link" href="#index-asorti_0028_0029-function-_0028gawk_0029"> &para;</a></span></dt>
<dt><code class="code">asorti(</code><var class="var">source</var> [<code class="code">,</code> <var class="var">dest</var> [<code class="code">,</code> <var class="var">how</var> ] ]<code class="code">) #</code></dt>
<dd><a class="index-entry-id" id="index-asort_0028_0029-function-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-sort-array-indices"></a>
<p>These two functions are similar in behavior, so they are described
together.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> The following description ignores the third argument, <var class="var">how</var>, as it
requires understanding features that we have not discussed yet.  Thus,
the discussion here is a deliberate simplification.  (We do provide all
the details later on; see <a class="ref" href="#Array-Sorting-Functions">Sorting Array Values and Indices with <code class="command">gawk</code></a> for the full story.)
</p></blockquote>

<p>Both functions return the number of elements in the array <var class="var">source</var>.
For <code class="command">asort()</code>, <code class="command">gawk</code> sorts the values of <var class="var">source</var>
and replaces the indices of the sorted values of <var class="var">source</var> with
sequential integers starting with one.  If the optional array <var class="var">dest</var>
is specified, then <var class="var">source</var> is duplicated into <var class="var">dest</var>.  <var class="var">dest</var>
is then sorted, leaving the indices of <var class="var">source</var> unchanged.
</p>
<a class="index-entry-id" id="index-gawk-IGNORECASE-variable-in-3"></a>
<p>When comparing strings, <code class="code">IGNORECASE</code> affects the sorting
(see <a class="pxref" href="#Array-Sorting-Functions">Sorting Array Values and Indices with <code class="command">gawk</code></a>).  If the
<var class="var">source</var> array contains subarrays as values (see <a class="pxref" href="#Arrays-of-Arrays">Arrays of Arrays</a>), they will come last, after all scalar values.
Subarrays are <em class="emph">not</em> recursively sorted.
</p>
<p>For example, if the contents of <code class="code">a</code> are as follows:
</p>
<div class="example">
<pre class="example-preformatted">a[&quot;last&quot;] = &quot;de&quot;
a[&quot;first&quot;] = &quot;sac&quot;
a[&quot;middle&quot;] = &quot;cul&quot;
</pre></div>

<p>A call to <code class="code">asort()</code>:
</p>
<div class="example">
<pre class="example-preformatted">asort(a)
</pre></div>

<p>results in the following contents of <code class="code">a</code>:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">a[1] = &quot;cul&quot;
a[2] = &quot;de&quot;
a[3] = &quot;sac&quot;
</pre></div></div>

<p>The <code class="code">asorti()</code> function works similarly to <code class="code">asort()</code>; however,
the <em class="emph">indices</em> are sorted, instead of the values. Thus, in the
previous example, starting with the same initial set of indices and
values in <code class="code">a</code>, calling &lsquo;<samp class="samp">asorti(a)</samp>&rsquo; would yield:
</p>
<div class="example">
<pre class="example-preformatted">a[1] = &quot;first&quot;
a[2] = &quot;last&quot;
a[3] = &quot;middle&quot;
</pre></div>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> You may not use either <code class="code">SYMTAB</code> or <code class="code">FUNCTAB</code> as the second
argument to these functions.  Attempting to do so produces a fatal error.
You may use them as the first argument, but only if providing a second
array to use for the actual sorting.
</p></blockquote>

<p>You are allowed to use the same array for both the <var class="var">source</var> and <var class="var">dest</var>
arguments, but doing so only makes sense if you&rsquo;re also supplying the third argument.
</p>
</dd>
<dt><a class="index-entry-id" id="index-search-and-replace-in-strings"></a>
<a class="index-entry-id" id="index-substitute-in-string"></a>
<a id="index-gensub_0028_0029-function-_0028gawk_0029-1"></a><span><code class="code">gensub(<var class="var">regexp</var>, <var class="var">replacement</var>, <var class="var">how</var></code> [<code class="code">, <var class="var">target</var></code>]<code class="code">) #</code><a class="copiable-link" href="#index-gensub_0028_0029-function-_0028gawk_0029-1"> &para;</a></span></dt>
<dd><p>Search the target string <var class="var">target</var> for matches of the regular
expression <var class="var">regexp</var>.  If <var class="var">how</var> is a string beginning with
&lsquo;<samp class="samp">g</samp>&rsquo; or &lsquo;<samp class="samp">G</samp>&rsquo; (short for &ldquo;global&rdquo;), then replace all matches
of <var class="var">regexp</var> with <var class="var">replacement</var>.  Otherwise, treat <var class="var">how</var>
as a number indicating which match of <var class="var">regexp</var> to replace.  Treat
numeric values less than one as if they were one.  If no <var class="var">target</var>
is supplied, use <code class="code">$0</code>.  Return the modified string as the result
of the function. The original target string is <em class="emph">not</em> changed.
</p>
<p>The returned value is <em class="emph">always</em> a string, even if the original
<var class="var">target</var> was a number or a regexp value.
</p>
<p><code class="code">gensub()</code> is a general substitution function.  Its purpose is
to provide more features than the standard <code class="code">sub()</code> and <code class="code">gsub()</code>
functions.
</p>
<p><code class="code">gensub()</code> provides an additional feature that is not available
in <code class="code">sub()</code> or <code class="code">gsub()</code>: the ability to specify components of a
regexp in the replacement text.  This is done by using parentheses in
the regexp to mark the components and then specifying &lsquo;<samp class="samp">\<var class="var">N</var></samp>&rsquo;
in the replacement text, where <var class="var">N</var> is a digit from 1 to 9.
For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk '</kbd>
&gt; <kbd class="kbd">BEGIN {</kbd>
&gt;      <kbd class="kbd">a = &quot;abc def&quot;</kbd>
&gt;      <kbd class="kbd">b = gensub(/(.+) (.+)/, &quot;\\2 \\1&quot;, &quot;g&quot;, a)</kbd>
&gt;      <kbd class="kbd">print b</kbd>
&gt; <kbd class="kbd">}'</kbd>
-| def abc
</pre></div>

<p>As with <code class="code">sub()</code>, you must type two backslashes in order
to get one into the string.
In the replacement text, the sequence &lsquo;<samp class="samp">\0</samp>&rsquo; represents the entire
matched text, as does the character &lsquo;<samp class="samp">&amp;</samp>&rsquo;.
</p>
<p>The following example shows how you can use the third argument to control
which match of the regexp should be changed:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo a b c a b c |</kbd>
&gt; <kbd class="kbd">gawk '{ print gensub(/a/, &quot;AA&quot;, 2) }'</kbd>
-| a b c AA b c
</pre></div>

<p>In this case, <code class="code">$0</code> is the default target string.
<code class="code">gensub()</code> returns the new string as its result, which is
passed directly to <code class="code">print</code> for printing.
</p>
<p>If the <var class="var">how</var> argument is a string that does not begin with &lsquo;<samp class="samp">g</samp>&rsquo; or
&lsquo;<samp class="samp">G</samp>&rsquo;, or if it is a number that is less than or equal to zero, only one
substitution is performed.  If <var class="var">how</var> is zero, <code class="command">gawk</code> issues
a warning message.
</p>
<p>If <var class="var">regexp</var> does not match <var class="var">target</var>, <code class="code">gensub()</code>&rsquo;s return value
is the original unchanged value of <var class="var">target</var>.  Note that, as mentioned
above, the returned value is a string, even if <var class="var">target</var> was not.
</p>
<p>In the replacement string, a backslash before a non-digit character
is simply elided. For example, &lsquo;<samp class="samp">\q</samp>&rsquo; becomes &lsquo;<samp class="samp">q</samp>&rsquo; in the result.
If the final character in the replacement string is a backslash,
it is left alone.
</p>
</dd>
<dt><a id="index-gsub_0028_0029-function-1"></a><span><code class="code">gsub(<var class="var">regexp</var>, <var class="var">replacement</var></code> [<code class="code">, <var class="var">target</var></code>]<code class="code">)</code><a class="copiable-link" href="#index-gsub_0028_0029-function-1"> &para;</a></span></dt>
<dd><p>Search <var class="var">target</var> for
<em class="emph">all</em> of the longest, leftmost, <em class="emph">nonoverlapping</em> matching
substrings it can find and replace them with <var class="var">replacement</var>.
The &lsquo;<samp class="samp">g</samp>&rsquo; in <code class="code">gsub()</code> stands for
&ldquo;global,&rdquo; which means replace everywhere.  For example:
</p>
<div class="example">
<pre class="example-preformatted">{ gsub(/Britain/, &quot;United Kingdom&quot;); print }
</pre></div>

<p>replaces all occurrences of the string &lsquo;<samp class="samp">Britain</samp>&rsquo; with &lsquo;<samp class="samp">United
Kingdom</samp>&rsquo; for all input records.
</p>
<p>The <code class="code">gsub()</code> function returns the number of substitutions made.  If
the variable to search and alter (<var class="var">target</var>) is
omitted, then the entire input record (<code class="code">$0</code>) is used.
As in <code class="code">sub()</code>, the characters &lsquo;<samp class="samp">&amp;</samp>&rsquo; and &lsquo;<samp class="samp">\</samp>&rsquo; are special,
and the third argument must be assignable.
</p>
</dd>
<dt><a class="index-entry-id" id="index-search-for-substring"></a>
<a class="index-entry-id" id="index-find-substring-in-string"></a>
<a id="index-index_0028_0029-function"></a><span><code class="code">index(<var class="var">in</var>, <var class="var">find</var>)</code><a class="copiable-link" href="#index-index_0028_0029-function"> &para;</a></span></dt>
<dd><p>Search the string <var class="var">in</var> for the first occurrence of the string
<var class="var">find</var>, and return the position in characters where that occurrence
begins in the string <var class="var">in</var>.  Consider the following example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN { print index(&quot;peanut&quot;, &quot;an&quot;) }'</kbd>
-| 3
</pre></div>

<p>If <var class="var">find</var> is not found, <code class="code">index()</code> returns zero.
</p>
<a class="index-entry-id" id="index-dark-corner-regexp-as-second-argument-to-index_0028_0029"></a>
<p>With BWK <code class="command">awk</code> and <code class="command">gawk</code>,
it is a fatal error to use a regexp constant for <var class="var">find</var>.
Other implementations allow it, simply treating the regexp
constant as an expression meaning &lsquo;<samp class="samp">$0 ~ /regexp/</samp>&rsquo;. (d.c.)
</p>
</dd>
<dt><a class="index-entry-id" id="index-string-length"></a>
<a id="index-length_0028_0029-function"></a><span><code class="code">length(</code>[<var class="var">string</var>]<code class="code">)</code><a class="copiable-link" href="#index-length_0028_0029-function"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-length-of-string"></a>
<p>Return the number of characters in <var class="var">string</var>.  If
<var class="var">string</var> is a number, the length of the digit string representing
that number is returned.  For example, <code class="code">length(&quot;abcde&quot;)</code> is five.  By
contrast, <code class="code">length(15 * 35)</code> works out to three. In this example,
15 * 35 = 525,
and 525 is then converted to the string <code class="code">&quot;525&quot;</code>, which has
three characters.
</p>
<a class="index-entry-id" id="index-length-of-input-record"></a>
<a class="index-entry-id" id="index-input-record_002c-length-of"></a>
<p>If no argument is supplied, <code class="code">length()</code> returns the length of <code class="code">$0</code>.
</p>
<a class="index-entry-id" id="index-portability-length_0028_0029-function"></a>
<a class="index-entry-id" id="index-POSIX-awk-functions-and-length_0028_0029"></a>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> In older versions of <code class="command">awk</code>, the <code class="code">length()</code> function could
be called
without any parentheses.  Doing so is considered poor practice,
although the 2008 POSIX standard explicitly allows it, to
support historical practice.  For programs to be maximally portable,
always supply the parentheses.
</p></blockquote>

<a class="index-entry-id" id="index-dark-corner-length_0028_0029-function"></a>
<p>If <code class="code">length()</code> is called with a variable that has not been used,
<code class="command">gawk</code> forces the variable to be a scalar.  Other
implementations of <code class="command">awk</code> leave the variable without a type.
(d.c.)
Consider:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { print length(x) ; x[1] = 1 }'</kbd>
-| 0
error&rarr; gawk: fatal: attempt to use scalar `x' as array

$ <kbd class="kbd">nawk 'BEGIN { print length(x) ; x[1] = 1 }'</kbd>
-| 0
</pre></div>

<p>If <samp class="option">--lint</samp> has
been specified on the command line, <code class="command">gawk</code> issues a
warning about this.
</p>
<a class="index-entry-id" id="index-common-extensions-length_0028_0029-applied-to-an-array"></a>
<a class="index-entry-id" id="index-extensions-common-length_0028_0029-applied-to-an-array"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-length_0028_0029-function"></a>
<a class="index-entry-id" id="index-number-of-array-elements"></a>
<a class="index-entry-id" id="index-arrays-number-of-elements"></a>
<p>With <code class="command">gawk</code> and several other <code class="command">awk</code> implementations, when given an
array argument, the <code class="code">length()</code> function returns the number of elements
in the array. (c.e.)
This is less useful than it might seem at first, as the
array is not guaranteed to be indexed from one to the number of elements
in it.
If <samp class="option">--lint</samp> is provided on the command line
(see <a class="pxref" href="#Options">Command-Line Options</a>),
<code class="command">gawk</code> warns that passing an array argument is not portable.
If <samp class="option">--posix</samp> is supplied, using an array argument is a fatal error
(see <a class="pxref" href="#Arrays">Arrays in <code class="command">awk</code></a>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-string-regular-expression-match-of"></a>
<a id="index-match_0028_0029-function"></a><span><code class="code">match(<var class="var">string</var>, <var class="var">regexp</var></code> [<code class="code">, <var class="var">array</var></code>]<code class="code">)</code><a class="copiable-link" href="#index-match_0028_0029-function"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-match-regexp-in-string"></a>
<p>Search <var class="var">string</var> for the
longest, leftmost substring matched by the regular expression
<var class="var">regexp</var> and return the character position (index)
at which that substring begins (one, if it starts at the beginning of
<var class="var">string</var>).  If no match is found, return zero.
</p>
<p>The <var class="var">regexp</var> argument may be either a regexp constant
(<code class="code">/</code>&hellip;<code class="code">/</code>) or a string constant (<code class="code">&quot;</code>&hellip;<code class="code">&quot;</code>).
In the latter case, the string is treated as a regexp to be matched.
See <a class="xref" href="#Computed-Regexps">Using Dynamic Regexps</a> for a
discussion of the difference between the two forms, and the
implications for writing your program correctly.
</p>
<p>The order of the first two arguments is the opposite of most other string
functions that work with regular expressions, such as
<code class="code">sub()</code> and <code class="code">gsub()</code>.  It might help to remember that
for <code class="code">match()</code>, the order is the same as for the &lsquo;<samp class="samp">~</samp>&rsquo; operator:
&lsquo;<samp class="samp"><var class="var">string</var> ~ <var class="var">regexp</var></samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-RSTART-variable-match_0028_0029-function-and"></a>
<a class="index-entry-id" id="index-RLENGTH-variable-match_0028_0029-function-and"></a>
<a class="index-entry-id" id="index-match_0028_0029-function-RSTART_002fRLENGTH-variables"></a>
<a class="index-entry-id" id="index-match_0028_0029-function-side-effects"></a>
<a class="index-entry-id" id="index-side-effects-match_0028_0029-function"></a>
<p>The <code class="code">match()</code> function sets the predefined variable <code class="code">RSTART</code> to
the index.  It also sets the predefined variable <code class="code">RLENGTH</code> to the
length in characters of the matched substring.  If no match is found,
<code class="code">RSTART</code> is set to zero, and <code class="code">RLENGTH</code> to &minus;1.
</p>
<p>For example:
</p>
<div class="example">
<pre class="example-preformatted">{
    if ($1 == &quot;FIND&quot;)
        regex = $2
    else {
        where = match($0, regex)
        if (where != 0)
            print &quot;Match of&quot;, regex, &quot;found at&quot;, where, &quot;in&quot;, $0
       }
}
</pre></div>

<p>This program looks for lines that match the regular expression stored in
the variable <code class="code">regex</code>.  This regular expression can be changed.  If the
first word on a line is &lsquo;<samp class="samp">FIND</samp>&rsquo;, <code class="code">regex</code> is changed to be the
second word on that line.  Therefore, if given:
</p>
<div class="example">
<pre class="example-preformatted">FIND ru+n
My program runs
but not very quickly
FIND Melvin
JF+KM
This line is property of Reality Engineering Co.
Melvin was here.
</pre></div>

<p><code class="command">awk</code> prints:
</p>
<div class="example">
<pre class="example-preformatted">Match of ru+n found at 12 in My program runs
Match of Melvin found at 1 in Melvin was here.
</pre></div>

<a class="index-entry-id" id="index-differences-in-awk-and-gawk-match_0028_0029-function"></a>
<p>If <var class="var">array</var> is present, it is cleared, and then the zeroth element
of <var class="var">array</var> is set to the entire portion of <var class="var">string</var>
matched by <var class="var">regexp</var>.  If <var class="var">regexp</var> contains parentheses,
the integer-indexed elements of <var class="var">array</var> are set to contain the
portion of <var class="var">string</var> matching the corresponding parenthesized
subexpression.
For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo foooobazbarrrrr |</kbd>
&gt; <kbd class="kbd">gawk '{ match($0, /(fo+).+(bar*)/, arr)</kbd>
&gt;         <kbd class="kbd">print arr[1], arr[2] }'</kbd>
-| foooo barrrrr
</pre></div>

<p>In addition,
multidimensional subscripts are available providing
the start index and length of each matched subexpression:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo foooobazbarrrrr |</kbd>
&gt; <kbd class="kbd">gawk '{ match($0, /(fo+).+(bar*)/, arr)</kbd>
&gt;           <kbd class="kbd">print arr[1], arr[2]</kbd>
&gt;           <kbd class="kbd">print arr[1, &quot;start&quot;], arr[1, &quot;length&quot;]</kbd>
&gt;           <kbd class="kbd">print arr[2, &quot;start&quot;], arr[2, &quot;length&quot;]</kbd>
&gt; <kbd class="kbd">}'</kbd>
-| foooo barrrrr
-| 1 5
-| 9 7
</pre></div>

<p>There may not be subscripts for the start and index for every parenthesized
subexpression, because they may not all have matched text; thus, they
should be tested for with the <code class="code">in</code> operator
(see <a class="pxref" href="#Reference-to-Elements">Referring to an Array Element</a>).
</p>
<a class="index-entry-id" id="index-troubleshooting-match_0028_0029-function"></a>
<p>The <var class="var">array</var> argument to <code class="code">match()</code> is a
<code class="command">gawk</code> extension.  In compatibility mode
(see <a class="pxref" href="#Options">Command-Line Options</a>),
using a third argument is a fatal error.
</p>
</dd>
<dt><a class="index-entry-id" id="index-split-string-into-array"></a>
<a id="index-patsplit_0028_0029-function-_0028gawk_0029"></a><span><code class="code">patsplit(<var class="var">string</var>, <var class="var">array</var></code> [<code class="code">, <var class="var">fieldpat</var></code> [<code class="code">, <var class="var">seps</var></code> ] ]<code class="code">) #</code><a class="copiable-link" href="#index-patsplit_0028_0029-function-_0028gawk_0029"> &para;</a></span></dt>
<dd><p>Divide
<var class="var">string</var> into pieces (or &ldquo;fields&rdquo;) defined by <var class="var">fieldpat</var>
and store the pieces in <var class="var">array</var> and the separator strings in the
<var class="var">seps</var> array.  The first piece is stored in
<code class="code"><var class="var">array</var>[1]</code>, the second piece in <code class="code"><var class="var">array</var>[2]</code>, and so
forth.  The third argument, <var class="var">fieldpat</var>, is
a regexp describing the fields in <var class="var">string</var> (just as <code class="code">FPAT</code> is
a regexp describing the fields in input records).
It may be either a regexp constant or a string.
If <var class="var">fieldpat</var> is omitted, the value of <code class="code">FPAT</code> is used.
<code class="code">patsplit()</code> returns the number of elements created.
<code class="code"><var class="var">seps</var>[<var class="var">i</var>]</code> is
the possibly null separator string
after <code class="code"><var class="var">array</var>[<var class="var">i</var>]</code>.
The possibly null leading separator will be in <code class="code"><var class="var">seps</var>[0]</code>.
So a non-null <var class="var">string</var> with <var class="var">n</var> fields will have <var class="var">n+1</var> separators.
A null <var class="var">string</var> has no fields or separators.
</p>
<p>The <code class="code">patsplit()</code> function splits strings into pieces in a
manner similar to the way input lines are split into fields using <code class="code">FPAT</code>
(see <a class="pxref" href="#Splitting-By-Content">Defining Fields by Content</a>).
</p>
<p>Before splitting the string, <code class="code">patsplit()</code> deletes any previously existing
elements in the arrays <var class="var">array</var> and <var class="var">seps</var>.
</p>
</dd>
<dt><a id="index-split_0028_0029-function"></a><span><code class="code">split(<var class="var">string</var>, <var class="var">array</var></code> [<code class="code">, <var class="var">fieldsep</var></code> [<code class="code">, <var class="var">seps</var></code> ] ]<code class="code">)</code><a class="copiable-link" href="#index-split_0028_0029-function"> &para;</a></span></dt>
<dd><p>Divide <var class="var">string</var> into pieces separated by <var class="var">fieldsep</var>
and store the pieces in <var class="var">array</var> and the separator strings in the
<var class="var">seps</var> array.  The first piece is stored in
<code class="code"><var class="var">array</var>[1]</code>, the second piece in <code class="code"><var class="var">array</var>[2]</code>, and so
forth.  The string value of the third argument, <var class="var">fieldsep</var>, is
a regexp describing where to split <var class="var">string</var> (much as <code class="code">FS</code> can
be a regexp describing where to split input records).
If <var class="var">fieldsep</var> is omitted, the value of <code class="code">FS</code> is used.
<code class="code">split()</code> returns the number of elements created.
<var class="var">seps</var> is a <code class="command">gawk</code> extension, with <code class="code"><var class="var">seps</var>[<var class="var">i</var>]</code>
being the separator string
between <code class="code"><var class="var">array</var>[<var class="var">i</var>]</code> and <code class="code"><var class="var">array</var>[<var class="var">i</var>+1]</code>.
If <var class="var">fieldsep</var> is a single
space, then any leading whitespace goes into <code class="code"><var class="var">seps</var>[0]</code> and
any trailing
whitespace goes into <code class="code"><var class="var">seps</var>[<var class="var">n</var>]</code>, where <var class="var">n</var> is the
return value of
<code class="code">split()</code> (i.e., the number of elements in <var class="var">array</var>).
</p>
<p>The <code class="code">split()</code> function splits strings into pieces in the same way
that input lines are split into fields.  For example:
</p>
<div class="example">
<pre class="example-preformatted">split(&quot;cul-de-sac&quot;, a, &quot;-&quot;, seps)
</pre></div>

<a class="index-entry-id" id="index-strings-splitting_002c-example"></a>
<p>splits the string <code class="code">&quot;cul-de-sac&quot;</code> into three fields using &lsquo;<samp class="samp">-</samp>&rsquo; as the
separator.  It sets the contents of the array <code class="code">a</code> as follows:
</p>
<div class="example">
<pre class="example-preformatted">a[1] = &quot;cul&quot;
a[2] = &quot;de&quot;
a[3] = &quot;sac&quot;
</pre></div>

<p>and sets the contents of the array <code class="code">seps</code> as follows:
</p>
<div class="example">
<pre class="example-preformatted">seps[1] = &quot;-&quot;
seps[2] = &quot;-&quot;
</pre></div>

<p>The value returned by this call to <code class="code">split()</code> is three.
</p>
<p>If <code class="command">gawk</code> is invoked with <samp class="option">--csv</samp>, then a two-argument
call to <code class="code">split()</code> splits the string using the CSV parsing rules as
described in <a class="ref" href="#Comma-Separated-Fields">Working With Comma Separated Value Files</a>.  With three and four arguments,
<code class="code">split()</code> works as just described.  The four-argument call makes
no sense, since each element of <var class="var">seps</var> would simply consist of a
string containing a comma.
</p>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-split_0028_0029-function"></a>
<p>As with input field-splitting, when the value of <var class="var">fieldsep</var> is
<code class="code">&quot;&nbsp;&quot;</code><!-- /@w -->, leading and trailing whitespace is ignored in values assigned to
the elements of
<var class="var">array</var> but not in <var class="var">seps</var>, and the elements
are separated by runs of whitespace.
Also, as with input field splitting, if <var class="var">fieldsep</var> is the null string, each
individual character in the string is split into its own array element.
(c.e.)
Additionally, if <var class="var">fieldsep</var> is a single-character string, that string acts
as the separator, even if its value is a regular expression metacharacter.
</p>
<p>Note, however, that <code class="code">RS</code> has no effect on the way <code class="code">split()</code>
works. Even though &lsquo;<samp class="samp">RS = &quot;&quot;</samp>&rsquo; causes the newline character to also be an input
field separator, this does not affect how <code class="code">split()</code> splits strings.
</p>
<a class="index-entry-id" id="index-dark-corner-split_0028_0029-function"></a>
<p>Modern implementations of <code class="command">awk</code>, including <code class="command">gawk</code>, allow
the third argument to be a regexp constant (<code class="code">/</code>&hellip;<code class="code">/</code><!-- /@w -->)
as well as a string.  (d.c.)
The POSIX standard allows this as well.
See <a class="xref" href="#Computed-Regexps">Using Dynamic Regexps</a> for a
discussion of the difference between using a string constant or a regexp constant,
and the implications for writing your program correctly.
</p>
<p>Before splitting the string, <code class="code">split()</code> deletes any previously existing
elements in the arrays <var class="var">array</var> and <var class="var">seps</var>.
</p>
<p>If <var class="var">string</var> is null, the array has no elements. (So this is a portable
way to delete an entire array with one statement.
See <a class="xref" href="#Delete">The <code class="code">delete</code> Statement</a>.)
</p>
<p>If <var class="var">string</var> does not match <var class="var">fieldsep</var> at all (but is not null),
<var class="var">array</var> has one element only. The value of that element is the original
<var class="var">string</var>.
</p>
<a class="index-entry-id" id="index-POSIX-mode-10"></a>
<p>In POSIX mode (see <a class="pxref" href="#Options">Command-Line Options</a>), the fourth argument is not allowed.
</p>
</dd>
<dt><a class="index-entry-id" id="index-formatting-strings"></a>
<a id="index-sprintf_0028_0029-function-1"></a><span><code class="code">sprintf(<var class="var">format</var>, <var class="var">expression1</var>, &hellip;)</code><a class="copiable-link" href="#index-sprintf_0028_0029-function-1"> &para;</a></span></dt>
<dd><p>Return (without printing) the string that <code class="code">printf</code> would
have printed out with the same arguments
(see <a class="pxref" href="#Printf">Using <code class="code">printf</code> Statements for Fancier Printing</a>).
For example:
</p>
<div class="example">
<pre class="example-preformatted">pival = sprintf(&quot;pi = %.2f (approx.)&quot;, 22/7)
</pre></div>

<p>assigns the string &lsquo;<samp class="samp">pi&nbsp;=&nbsp;3.14&nbsp;(approx.)</samp>&rsquo;<!-- /@w --> to the variable <code class="code">pival</code>.
</p>
<a class="index-entry-id" id="index-strtonum_0028_0029-function-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-converting-string-to-numbers-1"></a>
</dd>
<dt><code class="code">strtonum(<var class="var">str</var>) #</code></dt>
<dd><p>Examine <var class="var">str</var> and return its numeric value.  If <var class="var">str</var>
begins with a leading &lsquo;<samp class="samp">0</samp>&rsquo;, <code class="code">strtonum()</code> assumes that <var class="var">str</var>
is an octal number.  If <var class="var">str</var> begins with a leading &lsquo;<samp class="samp">0x</samp>&rsquo; or
&lsquo;<samp class="samp">0X</samp>&rsquo;, <code class="code">strtonum()</code> assumes that <var class="var">str</var> is a hexadecimal number.
For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo 0x11 |</kbd>
&gt; <kbd class="kbd">gawk '{ printf &quot;%d\n&quot;, strtonum($1) }'</kbd>
-| 17
</pre></div>

<p>Using the <code class="code">strtonum()</code> function is <em class="emph">not</em> the same as adding zero
to a string value; the automatic coercion of strings to numbers
works only for decimal data, not for octal or hexadecimal.<a class="footnote" id="DOCF50" href="#FOOT50"><sup>50</sup></a>
</p>
<p>Note also that <code class="code">strtonum()</code> uses the current locale&rsquo;s decimal point
for recognizing numbers (see <a class="pxref" href="#Locales">Where You Are Makes a Difference</a>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-replace-in-string"></a>
<a id="index-sub_0028_0029-function-1"></a><span><code class="code">sub(<var class="var">regexp</var>, <var class="var">replacement</var></code> [<code class="code">, <var class="var">target</var></code>]<code class="code">)</code><a class="copiable-link" href="#index-sub_0028_0029-function-1"> &para;</a></span></dt>
<dd><p>Search <var class="var">target</var>, which is treated as a string, for the
leftmost, longest substring matched by the regular expression <var class="var">regexp</var>.
Modify the entire string
by replacing the matched text with <var class="var">replacement</var>.
The modified string becomes the new value of <var class="var">target</var>.
Return the number of substitutions made (zero or one).
</p>
<p>The <var class="var">regexp</var> argument may be either a regexp constant
(<code class="code">/</code>&hellip;<code class="code">/</code>) or a string constant (<code class="code">&quot;</code>&hellip;<code class="code">&quot;</code>).
In the latter case, the string is treated as a regexp to be matched.
See <a class="xref" href="#Computed-Regexps">Using Dynamic Regexps</a> for a
discussion of the difference between the two forms, and the
implications for writing your program correctly.
</p>
<p>This function is peculiar because <var class="var">target</var> is not simply
used to compute a value, and not just any expression will do&mdash;it
must be a variable, field, or array element so that <code class="code">sub()</code> can
store a modified value there.  If this argument is omitted, then the
default is to use and alter <code class="code">$0</code>.<a class="footnote" id="DOCF51" href="#FOOT51"><sup>51</sup></a>
For example:
</p>
<div class="example">
<pre class="example-preformatted">str = &quot;water, water, everywhere&quot;
sub(/at/, &quot;ith&quot;, str)
</pre></div>

<p>sets <code class="code">str</code> to &lsquo;<samp class="samp">wither,&nbsp;water,&nbsp;everywhere</samp>&rsquo;<!-- /@w -->, by replacing the
leftmost longest occurrence of &lsquo;<samp class="samp">at</samp>&rsquo; with &lsquo;<samp class="samp">ith</samp>&rsquo;.
</p>
<p>If the special character &lsquo;<samp class="samp">&amp;</samp>&rsquo; appears in <var class="var">replacement</var>, it
stands for the precise substring that was matched by <var class="var">regexp</var>.  (If
the regexp can match more than one string, then this precise substring
may vary.)  For example:
</p>
<div class="example">
<pre class="example-preformatted">{ sub(/candidate/, &quot;&amp; and his wife&quot;); print }
</pre></div>

<p>changes the first occurrence of &lsquo;<samp class="samp">candidate</samp>&rsquo; to &lsquo;<samp class="samp">candidate
and his wife</samp>&rsquo; on each input line.
Here is another example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk 'BEGIN {</kbd>
&gt;         <kbd class="kbd">str = &quot;daabaaa&quot;</kbd>
&gt;         <kbd class="kbd">sub(/a+/, &quot;C&amp;C&quot;, str)</kbd>
&gt;         <kbd class="kbd">print str</kbd>
&gt; <kbd class="kbd">}'</kbd>
-| dCaaCbaaa
</pre></div>

<p>This shows how &lsquo;<samp class="samp">&amp;</samp>&rsquo; can represent a nonconstant string and also
illustrates the &ldquo;leftmost, longest&rdquo; rule in regexp matching
(see <a class="pxref" href="#Leftmost-Longest">How Much Text Matches?</a>).
</p>
<p>The effect of this special character (&lsquo;<samp class="samp">&amp;</samp>&rsquo;) can be turned off by putting a
backslash before it in the string.  As usual, to insert one backslash in
the string, you must write two backslashes.  Therefore, write &lsquo;<samp class="samp">\\&amp;</samp>&rsquo;
in a string constant to include a literal &lsquo;<samp class="samp">&amp;</samp>&rsquo; in the replacement.
For example, the following shows how to replace the first &lsquo;<samp class="samp">|</samp>&rsquo; on each line with
an &lsquo;<samp class="samp">&amp;</samp>&rsquo;:
</p>
<div class="example">
<pre class="example-preformatted">{ sub(/\|/, &quot;\\&amp;&quot;); print }
</pre></div>

<a class="index-entry-id" id="index-sub_0028_0029-function-arguments-of"></a>
<a class="index-entry-id" id="index-gsub_0028_0029-function-arguments-of"></a>
<a class="index-entry-id" id="index-side-effects-sub_0028_0029-function"></a>
<a class="index-entry-id" id="index-side-effects-gsub_0028_0029-function"></a>
<p>As mentioned, the third argument to <code class="code">sub()</code> must
be a variable, field, or array element.
Some versions of <code class="command">awk</code> allow the third argument to
be an expression that is not an lvalue.  In such a case, <code class="code">sub()</code>
still searches for the pattern and returns zero or one, but the result of
the substitution (if any) is thrown away because there is no place
to put it.  Such versions of <code class="command">awk</code> accept expressions
like the following:
</p>
<div class="example">
<pre class="example-preformatted">sub(/USA/, &quot;United States&quot;, &quot;the USA and Canada&quot;)
</pre></div>

<a class="index-entry-id" id="index-troubleshooting-gsub_0028_0029_002fsub_0028_0029-functions"></a>
<p>For historical compatibility, <code class="command">gawk</code> accepts such erroneous code.
However, using any other nonchangeable
object as the third parameter causes a fatal error and your program
will not run.
</p>
<p>Finally, if the <var class="var">regexp</var> is not a regexp constant, it is converted into a
string, and then the value of that string is treated as the regexp to match.
</p>
</dd>
<dt><a class="index-entry-id" id="index-substring"></a>
<a id="index-substr_0028_0029-function"></a><span><code class="code">substr(<var class="var">string</var>, <var class="var">start</var></code> [<code class="code">, <var class="var">length</var></code> ]<code class="code">)</code><a class="copiable-link" href="#index-substr_0028_0029-function"> &para;</a></span></dt>
<dd><p>Return a <var class="var">length</var>-character-long substring of <var class="var">string</var>,
starting at character number <var class="var">start</var>.  The first character of a
string is character number one.<a class="footnote" id="DOCF52" href="#FOOT52"><sup>52</sup></a>
For example, <code class="code">substr(&quot;washington&quot;, 5, 3)</code> returns <code class="code">&quot;ing&quot;</code>.
</p>
<p>If <var class="var">length</var> is not present, <code class="code">substr()</code> returns the whole suffix of
<var class="var">string</var> that begins at character number <var class="var">start</var>.  For example,
<code class="code">substr(&quot;washington&quot;, 5)</code> returns <code class="code">&quot;ington&quot;</code>.  The whole
suffix is also returned
if <var class="var">length</var> is greater than the number of characters remaining
in the string, counting from character <var class="var">start</var>.
</p>
<a class="index-entry-id" id="index-Brian-Kernighan_0027s-awk-12"></a>
<p>If <var class="var">start</var> is less than one, <code class="code">substr()</code> treats it as
if it was one. (POSIX doesn&rsquo;t specify what to do in this case:
BWK <code class="command">awk</code> acts this way, and therefore <code class="command">gawk</code>
does too.)
If <var class="var">start</var> is greater than the number of characters
in the string, <code class="code">substr()</code> returns the null string.
Similarly, if <var class="var">length</var> is present but less than or equal to zero,
the null string is returned.
</p>
<a class="index-entry-id" id="index-troubleshooting-substr_0028_0029-function"></a>
<p>The string returned by <code class="code">substr()</code> <em class="emph">cannot</em> be
assigned.  Thus, it is a mistake to attempt to change a portion of
a string, as shown in the following example:
</p>
<div class="example">
<pre class="example-preformatted">string = &quot;abcdef&quot;
# try to get &quot;abCDEf&quot;, won't work
substr(string, 3, 3) = &quot;CDE&quot;
</pre></div>

<p>It is also a mistake to use <code class="code">substr()</code> as the third argument
of <code class="code">sub()</code> or <code class="code">gsub()</code>:
</p>
<div class="example">
<pre class="example-preformatted">gsub(/xyz/, &quot;pdq&quot;, substr($0, 5, 20))  # WRONG
</pre></div>

<a class="index-entry-id" id="index-portability-substr_0028_0029-function"></a>
<p>(Some commercial versions of <code class="command">awk</code> treat
<code class="code">substr()</code> as assignable, but doing so is not portable.)
</p>
<p>If you need to replace bits and pieces of a string, combine <code class="code">substr()</code>
with string concatenation, in the following manner:
</p>
<div class="example">
<pre class="example-preformatted">string = &quot;abcdef&quot;
...
string = substr(string, 1, 2) &quot;CDE&quot; substr(string, 6)
</pre></div>

<a class="index-entry-id" id="index-case-sensitivity-converting-case"></a>
<a class="index-entry-id" id="index-strings-converting-letter-case"></a>
</dd>
<dt><a class="index-entry-id" id="index-converting-string-to-lower-case"></a>
<a id="index-tolower_0028_0029-function"></a><span><code class="code">tolower(<var class="var">string</var>)</code><a class="copiable-link" href="#index-tolower_0028_0029-function"> &para;</a></span></dt>
<dd><p>Return a copy of <var class="var">string</var>, with each uppercase character
in the string replaced with its corresponding lowercase character.
Nonalphabetic characters are left unchanged.  For example,
<code class="code">tolower(&quot;MiXeD cAsE 123&quot;)</code> returns <code class="code">&quot;mixed case 123&quot;</code>.
</p>
</dd>
<dt><a class="index-entry-id" id="index-converting-string-to-upper-case"></a>
<a id="index-toupper_0028_0029-function"></a><span><code class="code">toupper(<var class="var">string</var>)</code><a class="copiable-link" href="#index-toupper_0028_0029-function"> &para;</a></span></dt>
<dd><p>Return a copy of <var class="var">string</var>, with each lowercase character
in the string replaced with its corresponding uppercase character.
Nonalphabetic characters are left unchanged.  For example,
<code class="code">toupper(&quot;MiXeD cAsE 123&quot;)</code> returns <code class="code">&quot;MIXED CASE 123&quot;</code>.
</p></dd>
</dl>

<p>At first glance, the <code class="code">split()</code> and <code class="code">patsplit()</code> functions appear to be
mirror images of each other. But there are differences:
</p>
<ul class="itemize mark-bullet">
<li><code class="code">split()</code> treats its third argument like <code class="code">FS</code>, with all the
special rules involved for <code class="code">FS</code>.

</li><li>Matching of null strings differs. This is discussed in <a class="ref" href="#FS-versus-FPAT"><code class="code">FS</code> Versus <code class="code">FPAT</code>: A Subtle Difference</a>.
</li></ul>

<a class="index-entry-id" id="index-sidebar-Matching-the-Null-String"></a>
<table class="cartouche" border="1"><tr><th>
Matching the Null String</th></tr><tr><td>
<a class="index-entry-id" id="index-matching-null-strings"></a>
<a class="index-entry-id" id="index-null-strings-matching"></a>
<a class="index-entry-id" id="index-_002a-_0028asterisk_0029-_002a-operator-null-strings_002c-matching"></a>
<a class="index-entry-id" id="index-asterisk-_0028_002a_0029-_002a-operator-null-strings_002c-matching"></a>

<p>In <code class="command">awk</code>, the &lsquo;<samp class="samp">*</samp>&rsquo; operator can match the null string.
This is particularly important for the <code class="code">sub()</code>, <code class="code">gsub()</code>,
and <code class="code">gensub()</code> functions.  For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo abc | awk '{ gsub(/m*/, &quot;X&quot;); print }'</kbd>
-| XaXbXcX
</pre></div>

<p>Although this makes a certain amount of sense, it can be surprising.
</p></td></tr></table>


<ul class="mini-toc">
<li><a href="#Gory-Details" accesskey="1">More about &lsquo;<samp class="samp">\</samp>&rsquo; and &lsquo;<samp class="samp">&amp;</samp>&rsquo; with <code class="code">sub()</code>, <code class="code">gsub()</code>, and <code class="code">gensub()</code></a></li>
</ul>
<hr>
<div class="subsubsection-level-extent" id="Gory-Details">
<div class="nav-panel">
<p>
Up: <a href="#String-Functions" accesskey="u" rel="up">String-Manipulation Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="More-about-_005c-and-_0026-with-sub_0028_0029_002c-gsub_0028_0029_002c-and-gensub_0028_0029"><span>9.1.4.1 More about &lsquo;<samp class="samp">\</samp>&rsquo; and &lsquo;<samp class="samp">&amp;</samp>&rsquo; with <code class="code">sub()</code>, <code class="code">gsub()</code>, and <code class="code">gensub()</code><a class="copiable-link" href="#More-about-_005c-and-_0026-with-sub_0028_0029_002c-gsub_0028_0029_002c-and-gensub_0028_0029"> &para;</a></span></h4>

<a class="index-entry-id" id="index-escape-processing-gsub_0028_0029_002fgensub_0028_0029_002fsub_0028_0029-functions"></a>
<a class="index-entry-id" id="index-sub_0028_0029-function-escape-processing"></a>
<a class="index-entry-id" id="index-gsub_0028_0029-function-escape-processing"></a>
<a class="index-entry-id" id="index-gensub_0028_0029-function-_0028gawk_0029-escape-processing"></a>
<a class="index-entry-id" id="index-_005c-_0028backslash_0029-gsub_0028_0029_002fgensub_0028_0029_002fsub_0028_0029-functions-and"></a>
<a class="index-entry-id" id="index-backslash-_0028_005c_0029-gsub_0028_0029_002fgensub_0028_0029_002fsub_0028_0029-functions-and"></a>
<a class="index-entry-id" id="index-_0026-_0028ampersand_0029-gsub_0028_0029_002fgensub_0028_0029_002fsub_0028_0029-functions-and"></a>
<a class="index-entry-id" id="index-ampersand-_0028_0026_0029-gsub_0028_0029_002fgensub_0028_0029_002fsub_0028_0029-functions-and"></a>
<a class="index-entry-id" id="index-Spengler_002c-Egon"></a>
<a class="index-entry-id" id="index-Ghostbusters"></a>
<blockquote class="quotation">
<p><i class="i">I collect spores, molds, and fungus.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Dr. Egon Spengler (&ldquo;Ghostbusters,&rdquo; 1984)</em>
</div>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> This subsubsection has been reported to cause headaches.
You might want to skip it upon first reading.
</p></blockquote>

<p>When using <code class="code">sub()</code>, <code class="code">gsub()</code>, or <code class="code">gensub()</code>, and trying to get literal
backslashes and ampersands into the replacement text, you need to remember
that there are several levels of <em class="dfn">escape processing</em> going on.
</p>
<p>First, there is the <em class="dfn">lexical</em> level, which is when <code class="command">awk</code> reads
your program
and builds an internal copy of it to execute.
Then there is the runtime level, which is when <code class="command">awk</code> actually scans the
replacement string to determine what to generate.
</p>
<a class="index-entry-id" id="index-Brian-Kernighan_0027s-awk-13"></a>
<p>At both levels, <code class="command">awk</code> looks for a defined set of characters that
can come after a backslash.  At the lexical level, it looks for the
escape sequences listed in <a class="ref" href="#Escape-Sequences">Escape Sequences</a>.
Thus, for every &lsquo;<samp class="samp">\</samp>&rsquo; that <code class="command">awk</code> processes at the runtime
level, you must type two backslashes at the lexical level.
When a character that is not valid for an escape sequence follows the
&lsquo;<samp class="samp">\</samp>&rsquo;, BWK <code class="command">awk</code> and <code class="command">gawk</code> both simply remove the initial
&lsquo;<samp class="samp">\</samp>&rsquo; and put the next character into the string. Thus, for
example, <code class="code">&quot;a\qb&quot;</code> is treated as <code class="code">&quot;aqb&quot;</code>.
</p>
<p>At the runtime level, the various functions handle sequences of
&lsquo;<samp class="samp">\</samp>&rsquo; and &lsquo;<samp class="samp">&amp;</samp>&rsquo; differently.  The situation is (sadly) somewhat complex.
Historically, the <code class="code">sub()</code> and <code class="code">gsub()</code> functions treated the
two-character sequence &lsquo;<samp class="samp">\&amp;</samp>&rsquo; specially; this sequence was replaced in
the generated text with a single &lsquo;<samp class="samp">&amp;</samp>&rsquo;.  Any other &lsquo;<samp class="samp">\</samp>&rsquo; within
the <var class="var">replacement</var> string that did not precede an &lsquo;<samp class="samp">&amp;</samp>&rsquo; was passed
through unchanged.  This is illustrated in <a class="ref" href="#table_002dsub_002descapes">Table 9.1</a>.
</p>
<div class="float" id="table_002dsub_002descapes">
<div class="display">
<pre class="display-preformatted"> You type         <code class="code">sub()</code> sees          <code class="code">sub()</code> generates
 &mdash;&mdash;&ndash;         &mdash;&mdash;&mdash;-          &mdash;&mdash;&mdash;&mdash;&mdash;
     <code class="code">\&amp;</code>              <code class="code">&amp;</code>            The matched text
    <code class="code">\\&amp;</code>             <code class="code">\&amp;</code>            A literal &lsquo;<samp class="samp">&amp;</samp>&rsquo;
   <code class="code">\\\&amp;</code>             <code class="code">\&amp;</code>            A literal &lsquo;<samp class="samp">&amp;</samp>&rsquo;
  <code class="code">\\\\&amp;</code>            <code class="code">\\&amp;</code>            A literal &lsquo;<samp class="samp">\&amp;</samp>&rsquo;
 <code class="code">\\\\\&amp;</code>            <code class="code">\\&amp;</code>            A literal &lsquo;<samp class="samp">\&amp;</samp>&rsquo;
<code class="code">\\\\\\&amp;</code>           <code class="code">\\\&amp;</code>            A literal &lsquo;<samp class="samp">\\&amp;</samp>&rsquo;
    <code class="code">\\q</code>             <code class="code">\q</code>            A literal &lsquo;<samp class="samp">\q</samp>&rsquo;
</pre></div>
<div class="caption"><p><strong class="strong">Table 9.1: </strong>Historical escape sequence processing for <code class="code">sub()</code> and <code class="code">gsub()</code></p></div></div>
<p>This table shows the lexical-level processing, where
an odd number of backslashes becomes an even number at the runtime level,
as well as the runtime processing done by <code class="code">sub()</code>.
(For the sake of simplicity, the rest of the following tables only show the
case of even numbers of backslashes entered at the lexical level.)
</p>
<p>The problem with the historical approach is that there is no way to get
a literal &lsquo;<samp class="samp">\</samp>&rsquo; followed by the matched text.
</p>
<p>Several editions of the POSIX standard attempted to fix this problem
but weren&rsquo;t successful. The details are irrelevant at this point in time.
</p>
<p>At one point, the <code class="command">gawk</code> maintainer submitted
proposed text for a revised standard that
reverts to rules that correspond more closely to the original existing
practice. The proposed rules have special cases that make it possible
to produce a &lsquo;<samp class="samp">\</samp>&rsquo; preceding the matched text.
This is shown in
<a class="ref" href="#table_002dsub_002dproposed">Table 9.2</a>.
</p>
<div class="float" id="table_002dsub_002dproposed">
<div class="display">
<pre class="display-preformatted"> You type         <code class="code">sub()</code> sees         <code class="code">sub()</code> generates
 &mdash;&mdash;&ndash;         &mdash;&mdash;&mdash;-         &mdash;&mdash;&mdash;&mdash;&mdash;
<code class="code">\\\\\\&amp;</code>           <code class="code">\\\&amp;</code>            A literal &lsquo;<samp class="samp">\&amp;</samp>&rsquo;
  <code class="code">\\\\&amp;</code>            <code class="code">\\&amp;</code>            A literal &lsquo;<samp class="samp">\</samp>&rsquo;, followed by the matched text
    <code class="code">\\&amp;</code>             <code class="code">\&amp;</code>            A literal &lsquo;<samp class="samp">&amp;</samp>&rsquo;
    <code class="code">\\q</code>             <code class="code">\q</code>            A literal &lsquo;<samp class="samp">\q</samp>&rsquo;
   <code class="code">\\\\</code>             <code class="code">\\</code>            <code class="code">\\</code>
</pre></div>
<div class="caption"><p><strong class="strong">Table 9.2: </strong><code class="command">gawk</code> rules for <code class="code">sub()</code> and backslash</p></div></div>
<p>In a nutshell, at the runtime level, there are now three special sequences
of characters (&lsquo;<samp class="samp">\\\&amp;</samp>&rsquo;, &lsquo;<samp class="samp">\\&amp;</samp>&rsquo;, and &lsquo;<samp class="samp">\&amp;</samp>&rsquo;) whereas historically
there was only one.  However, as in the historical case, any &lsquo;<samp class="samp">\</samp>&rsquo; that
is not part of one of these three sequences is not special and appears
in the output literally.
</p>
<p><code class="command">gawk</code> 3.0 and 3.1 follow these rules for <code class="code">sub()</code> and
<code class="code">gsub()</code>.  The POSIX standard took much longer to be revised than
was expected.  In addition, the <code class="command">gawk</code> maintainer&rsquo;s proposal was
lost during the standardization process.  The final rules are
somewhat simpler.  The results are similar except for one case.
</p>
<a class="index-entry-id" id="index-POSIX-awk-functions-and-gsub_0028_0029_002fsub_0028_0029"></a>
<p>The POSIX rules state that &lsquo;<samp class="samp">\&amp;</samp>&rsquo; in the replacement string produces
a literal &lsquo;<samp class="samp">&amp;</samp>&rsquo;, &lsquo;<samp class="samp">\\</samp>&rsquo; produces a literal &lsquo;<samp class="samp">\</samp>&rsquo;, and &lsquo;<samp class="samp">\</samp>&rsquo; followed
by anything else is not special; the &lsquo;<samp class="samp">\</samp>&rsquo; is placed straight into the output.
These rules are presented in <a class="ref" href="#table_002dposix_002dsub">Table 9.3</a>.
</p>
<div class="float" id="table_002dposix_002dsub">
<div class="display">
<pre class="display-preformatted"> You type         <code class="code">sub()</code> sees         <code class="code">sub()</code> generates
 &mdash;&mdash;&ndash;         &mdash;&mdash;&mdash;-         &mdash;&mdash;&mdash;&mdash;&mdash;
<code class="code">\\\\\\&amp;</code>           <code class="code">\\\&amp;</code>            A literal &lsquo;<samp class="samp">\&amp;</samp>&rsquo;
  <code class="code">\\\\&amp;</code>            <code class="code">\\&amp;</code>            A literal &lsquo;<samp class="samp">\</samp>&rsquo;, followed by the matched text
    <code class="code">\\&amp;</code>             <code class="code">\&amp;</code>            A literal &lsquo;<samp class="samp">&amp;</samp>&rsquo;
    <code class="code">\\q</code>             <code class="code">\q</code>            A literal &lsquo;<samp class="samp">\q</samp>&rsquo;
   <code class="code">\\\\</code>             <code class="code">\\</code>            <code class="code">\</code>
</pre></div>
<div class="caption"><p><strong class="strong">Table 9.3: </strong>POSIX rules for <code class="code">sub()</code> and <code class="code">gsub()</code></p></div></div>
<p>The only case where the difference is noticeable is the last one: &lsquo;<samp class="samp">\\\\</samp>&rsquo;
is seen as &lsquo;<samp class="samp">\\</samp>&rsquo; and produces &lsquo;<samp class="samp">\</samp>&rsquo; instead of &lsquo;<samp class="samp">\\</samp>&rsquo;.
</p>
<p>Starting with version 3.1.4, <code class="command">gawk</code> followed the POSIX rules
when <samp class="option">--posix</samp> was specified (see <a class="pxref" href="#Options">Command-Line Options</a>). Otherwise,
it continued to follow the proposed rules, as
that had been its behavior for many years.
</p>
<p>When version 4.0.0 was released, the <code class="command">gawk</code> maintainer
made the POSIX rules the default, breaking well over a decade&rsquo;s worth
of backward compatibility.<a class="footnote" id="DOCF53" href="#FOOT53"><sup>53</sup></a> Needless to say, this was a bad idea,
and as of version 4.0.1, <code class="command">gawk</code> resumed its historical
behavior, and only follows the POSIX rules when <samp class="option">--posix</samp> is given.
</p>
<p>The rules for <code class="code">gensub()</code> are considerably simpler. At the runtime
level, whenever <code class="command">gawk</code> sees a &lsquo;<samp class="samp">\</samp>&rsquo;, if the following character
is a digit, then the text that matched the corresponding parenthesized
subexpression is placed in the generated output.  Otherwise,
no matter what character follows the &lsquo;<samp class="samp">\</samp>&rsquo;, it
appears in the generated text and the &lsquo;<samp class="samp">\</samp>&rsquo; does not,
as shown in <a class="ref" href="#table_002dgensub_002descapes">Table 9.4</a>.
</p>
<div class="float" id="table_002dgensub_002descapes">
<div class="display">
<pre class="display-preformatted">  You type          <code class="code">gensub()</code> sees         <code class="code">gensub()</code> generates
  &mdash;&mdash;&ndash;          &mdash;&mdash;&mdash;&mdash;-         &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;
      <code class="code">&amp;</code>                    <code class="code">&amp;</code>            The matched text
    <code class="code">\\&amp;</code>                   <code class="code">\&amp;</code>            A literal &lsquo;<samp class="samp">&amp;</samp>&rsquo;
   <code class="code">\\\\</code>                   <code class="code">\\</code>            A literal &lsquo;<samp class="samp">\</samp>&rsquo;
  <code class="code">\\\\&amp;</code>                  <code class="code">\\&amp;</code>            A literal &lsquo;<samp class="samp">\</samp>&rsquo;, then the matched text
<code class="code">\\\\\\&amp;</code>                 <code class="code">\\\&amp;</code>            A literal &lsquo;<samp class="samp">\&amp;</samp>&rsquo;
    <code class="code">\\q</code>                   <code class="code">\q</code>            A literal &lsquo;<samp class="samp">q</samp>&rsquo;
</pre></div>
<div class="caption"><p><strong class="strong">Table 9.4: </strong>Escape sequence processing for <code class="code">gensub()</code></p></div></div>
<p>Because of the complexity of the lexical- and runtime-level processing
and the special cases for <code class="code">sub()</code> and <code class="code">gsub()</code>,
we recommend the use of <code class="command">gawk</code> and <code class="code">gensub()</code> when you have
to do substitutions.
</p>
<hr>
</div>
</div>
<div class="subsection-level-extent" id="I_002fO-Functions">
<div class="nav-panel">
<p>
Next: <a href="#Time-Functions" accesskey="n" rel="next">Time Functions</a>, Previous: <a href="#String-Functions" accesskey="p" rel="prev">String-Manipulation Functions</a>, Up: <a href="#Built_002din" accesskey="u" rel="up">Built-in Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Input_002fOutput-Functions"><span>9.1.5 Input/Output Functions<a class="copiable-link" href="#Input_002fOutput-Functions"> &para;</a></span></h4>
<a class="index-entry-id" id="index-input_002foutput-functions"></a>

<p>The following functions relate to input/output (I/O).
Optional parameters are enclosed in square brackets ([ ]):
</p>
<dl class="table">
<dt><a class="index-entry-id" id="index-files-closing"></a>
<a id="index-close_0028_0029-function-1"></a><span><code class="code">close(</code><var class="var">filename</var> [<code class="code">,</code> <var class="var">how</var>]<code class="code">)</code><a class="copiable-link" href="#index-close_0028_0029-function-1"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-close-file-or-coprocess"></a>
<p>Close the file <var class="var">filename</var> for input or output. Alternatively, the
argument may be a shell command that was used for creating a coprocess, or
for redirecting to or from a pipe; then the coprocess or pipe is closed.
See <a class="xref" href="#Close-Files-And-Pipes">Closing Input and Output Redirections</a>
for more information.
</p>
<p>When closing a coprocess, it is occasionally useful to first close
one end of the two-way pipe and then to close the other.  This is done
by providing a second argument to <code class="code">close()</code>.  This second argument
(<var class="var">how</var>)
should be one of the two string values <code class="code">&quot;to&quot;</code> or <code class="code">&quot;from&quot;</code>,
indicating which end of the pipe to close.  Case in the string does
not matter.
See <a class="xref" href="#Two_002dway-I_002fO">Two-Way Communications with Another Process</a>,
which discusses this feature in more detail and gives an example.
</p>
<p>Note that the second argument to <code class="code">close()</code> is a <code class="command">gawk</code>
extension; it is not available in compatibility mode (see <a class="pxref" href="#Options">Command-Line Options</a>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-flush-buffered-output"></a>
<a id="index-fflush_0028_0029-function"></a><span><code class="code">fflush(</code>[<var class="var">filename</var>]<code class="code">)</code><a class="copiable-link" href="#index-fflush_0028_0029-function"> &para;</a></span></dt>
<dd><p>Flush any buffered output associated with <var class="var">filename</var>, which is either a
file opened for writing or a shell command for redirecting output to
a pipe or coprocess.
</p>
<a class="index-entry-id" id="index-buffers-flushing"></a>
<a class="index-entry-id" id="index-output-buffering"></a>
<p>Many utility programs <em class="dfn">buffer</em> their output (i.e., they save information
to write to a disk file or the screen in memory until there is enough
for it to be worthwhile to send the data to the output device).
This is often more efficient than writing
every little bit of information as soon as it is ready.  However, sometimes
it is necessary to force a program to <em class="dfn">flush</em> its buffers (i.e.,
write the information to its destination, even if a buffer is not full).
This is the purpose of the <code class="code">fflush()</code> function&mdash;<code class="command">gawk</code> also
buffers its output, and the <code class="code">fflush()</code> function forces
<code class="command">gawk</code> to flush its buffers.
</p>
<a class="index-entry-id" id="index-extensions-common-fflush_0028_0029-function"></a>
<a class="index-entry-id" id="index-Brian-Kernighan_0027s-awk-14"></a>
<p>Brian Kernighan added <code class="code">fflush()</code> to his <code class="command">awk</code> in April
1992.  For two decades, it was a common extension.  In December
2012, it was accepted for inclusion into the POSIX standard.
See <a class="uref" href="http://austingroupbugs.net/view.php?id=634">the Austin Group website</a>.
</p>
<p>POSIX standardizes <code class="code">fflush()</code> as follows: if there
is no argument, or if the argument is the null string (<code class="code">&quot;&quot;</code><!-- /@w -->),
then <code class="command">awk</code> flushes the buffers for <em class="emph">all</em> open output files
and pipes.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> Prior to version 4.0.2, <code class="command">gawk</code>
would flush only the standard output if there was no argument,
and flush all output files and pipes if the argument was the null
string. This was changed in order to be compatible with BWK
<code class="command">awk</code>, in the hope that standardizing this
feature in POSIX would then be easier (which indeed proved to be the case).
</p>
<p>With <code class="command">gawk</code>,
you can use &lsquo;<samp class="samp">fflush(&quot;/dev/stdout&quot;)</samp>&rsquo; if you wish to flush
only the standard output.
</p></blockquote>

<a class="index-entry-id" id="index-troubleshooting-fflush_0028_0029-function"></a>
<p><code class="code">fflush()</code> returns zero if the buffer is successfully flushed;
otherwise, it returns a nonzero value. (<code class="command">gawk</code> returns &minus;1.)
In the case where all buffers are flushed, the return value is zero
only if all buffers were flushed successfully.  Otherwise, it is
&minus;1, and <code class="command">gawk</code> warns about the problem <var class="var">filename</var>.
</p>
<p><code class="command">gawk</code> also issues a warning message if you attempt to flush
a file or pipe that was opened for reading (such as with <code class="code">getline</code>),
or if <var class="var">filename</var> is not an open file, pipe, or coprocess.
In such a case, <code class="code">fflush()</code> returns &minus;1, as well.
</p>
</dd>
</dl>

<a class="index-entry-id" id="index-sidebar-Interactive-Versus-Noninteractive-Buffering"></a>
<table class="cartouche" border="1"><tr><th>
Interactive Versus Noninteractive Buffering</th></tr><tr><td>
<a class="index-entry-id" id="index-buffering-interactive-vs_002e-noninteractive"></a>

<p>As a side point, buffering issues can be even more confusing if
your program is <em class="dfn">interactive</em> (i.e., communicating
with a user sitting at a keyboard).<a class="footnote" id="DOCF54" href="#FOOT54"><sup>54</sup></a>
</p>
<p>Interactive programs generally <em class="dfn">line buffer</em> their output (i.e., they
write out every line).  Noninteractive programs wait until they have
a full buffer, which may be many lines of output.
Here is an example of the difference:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '{ print $1 + $2 }'</kbd>
<kbd class="kbd">1 1</kbd>
-| 2
<kbd class="kbd">2 3</kbd>
-| 5
<kbd class="kbd">Ctrl-d</kbd>
</pre></div>

<p>Each line of output is printed immediately. Compare that behavior
with this example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk '{ print $1 + $2 }' | cat</kbd>
<kbd class="kbd">1 1</kbd>
<kbd class="kbd">2 3</kbd>
<kbd class="kbd">Ctrl-d</kbd>
-| 2
-| 5
</pre></div>

<p>Here, no output is printed until after the <kbd class="kbd">Ctrl-d</kbd> is typed, because
it is all buffered and sent down the pipe to <code class="command">cat</code> in one shot.
</p></td></tr></table>

<dl class="table">
<dt><a class="index-entry-id" id="index-invoke-shell-command"></a>
<a class="index-entry-id" id="index-interacting-with-other-programs"></a>
<a id="index-system_0028_0029-function"></a><span><code class="code">system(<var class="var">command</var>)</code><a class="copiable-link" href="#index-system_0028_0029-function"> &para;</a></span></dt>
<dd><p>Execute the operating system
command <var class="var">command</var> and then return to the <code class="command">awk</code> program.
Return <var class="var">command</var>&rsquo;s exit status (see further on).
</p>
<p>For example, if the following fragment of code is put in your <code class="command">awk</code>
program:
</p>
<div class="example">
<pre class="example-preformatted">END {
     system(&quot;date | mail -s 'awk run done' root&quot;)
}
</pre></div>

<p>the system administrator is sent mail when the <code class="command">awk</code> program
finishes processing input and begins its end-of-input processing.
</p>
<p>Note that redirecting <code class="code">print</code> or <code class="code">printf</code> into a pipe is often
enough to accomplish your task.  If you need to run many commands, it
is more efficient to simply print them down a pipeline to the shell:
</p>
<div class="example">
<pre class="example-preformatted">while (<var class="var">more stuff to do</var>)
    print <var class="var">command</var> | &quot;/bin/sh&quot;
close(&quot;/bin/sh&quot;)
</pre></div>

<a class="index-entry-id" id="index-troubleshooting-system_0028_0029-function"></a>
<a class="index-entry-id" id="index-_002d_002dsandbox-option-disabling-system_0028_0029-function"></a>
<p>However, if your <code class="command">awk</code>
program is interactive, <code class="code">system()</code> is useful for running large
self-contained programs, such as a shell or an editor.
Some operating systems cannot implement the <code class="code">system()</code> function.
<code class="code">system()</code> causes a fatal error if it is not supported.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> When <samp class="option">--sandbox</samp> is specified, the <code class="code">system()</code> function is disabled
(see <a class="pxref" href="#Options">Command-Line Options</a>).
</p></blockquote>

<p>On POSIX systems, a command&rsquo;s exit status is a 16-bit number. The exit
value passed to the C <code class="code">exit()</code> function is held in the high-order
eight bits. The low-order bits indicate if the process was killed by a
signal (bit 7) and if so, the guilty signal number (bits 0&ndash;6).
</p>
<p>Traditionally, <code class="command">awk</code>&rsquo;s <code class="code">system()</code> function has simply
returned the exit status value divided by 256. In the normal case this
gives the exit status but in the case of death-by-signal it yields
a fractional floating-point value.<a class="footnote" id="DOCF55" href="#FOOT55"><sup>55</sup></a> POSIX states that <code class="command">awk</code>&rsquo;s
<code class="code">system()</code> should return the full 16-bit value.
</p>
<p><code class="command">gawk</code> steers a middle ground.
The return values are summarized in <a class="ref" href="#table_002dsystem_002dreturn_002dvalues">Table 9.5</a>.
</p>
<div class="float" id="table_002dsystem_002dreturn_002dvalues">
<table class="multitable">
<thead><tr><th width="40%">Situation</th><th width="60%">Return value from <code class="code">system()</code></th></tr></thead>
<tbody><tr><td width="40%"><samp class="option">--traditional</samp></td><td width="60%">C <code class="code">system()</code>&rsquo;s value divided by 256</td></tr>
<tr><td width="40%"><samp class="option">--posix</samp></td><td width="60%">C <code class="code">system()</code>&rsquo;s value</td></tr>
<tr><td width="40%">Normal exit of command</td><td width="60%">Command&rsquo;s exit status</td></tr>
<tr><td width="40%">Death by signal of command</td><td width="60%">256 + number of murderous signal</td></tr>
<tr><td width="40%">Death by signal of command with core dump</td><td width="60%">512 + number of murderous signal</td></tr>
<tr><td width="40%">Some kind of error</td><td width="60%">&minus;1</td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 9.5: </strong>Return values from <code class="code">system()</code></p></div></div></dd>
</dl>

<p>As of August, 2018, BWK <code class="command">awk</code> now follows <code class="command">gawk</code>&rsquo;s behavior
for the return value of <code class="code">system()</code>.
</p>
<a class="index-entry-id" id="index-sidebar-Controlling-Output-Buffering-with-system_0028_0029"></a>
<table class="cartouche" border="1"><tr><th>
Controlling Output Buffering with <code class="code">system()</code></th></tr><tr><td>
<a class="index-entry-id" id="index-buffers-flushing-1"></a>
<a class="index-entry-id" id="index-buffering-input_002foutput"></a>
<a class="index-entry-id" id="index-output-buffering-1"></a>

<p>The <code class="code">fflush()</code> function provides explicit control over output buffering for
individual files and pipes.  However, its use is not portable to many older
<code class="command">awk</code> implementations.  An alternative method to flush output
buffers is to call <code class="code">system()</code> with a null string as its argument:
</p>
<div class="example">
<pre class="example-preformatted">system(&quot;&quot;)   # flush output
</pre></div>

<p><code class="command">gawk</code> treats this use of the <code class="code">system()</code> function as a special
case and is smart enough not to run a shell (or other command
interpreter) with the empty command.  Therefore, with <code class="command">gawk</code>, this
idiom is not only useful, it is also efficient.  Although this method should work
with other <code class="command">awk</code> implementations, it does not necessarily avoid
starting an unnecessary shell.  (Other implementations may only
flush the buffer associated with the standard output and not necessarily
all buffered output.)
</p>
<p>If you think about what a programmer expects, it makes sense that
<code class="code">system()</code> should flush any pending output.  The following program:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
     print &quot;first print&quot;
     system(&quot;echo system echo&quot;)
     print &quot;second print&quot;
}
</pre></div>

<p>must print:
</p>
<div class="example">
<pre class="example-preformatted">first print
system echo
second print
</pre></div>

<p>and not:
</p>
<div class="example">
<pre class="example-preformatted">system echo
first print
second print
</pre></div>

<p>If <code class="command">awk</code> did not flush its buffers before calling <code class="code">system()</code>,
you would see the latter (undesirable) output.
</p></td></tr></table>

<hr>
</div>
<div class="subsection-level-extent" id="Time-Functions">
<div class="nav-panel">
<p>
Next: <a href="#Bitwise-Functions" accesskey="n" rel="next">Bit-Manipulation Functions</a>, Previous: <a href="#I_002fO-Functions" accesskey="p" rel="prev">Input/Output Functions</a>, Up: <a href="#Built_002din" accesskey="u" rel="up">Built-in Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Time-Functions-1"><span>9.1.6 Time Functions<a class="copiable-link" href="#Time-Functions-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-time-functions"></a>

<a class="index-entry-id" id="index-timestamps"></a>
<a class="index-entry-id" id="index-log-files_002c-timestamps-in"></a>
<a class="index-entry-id" id="index-files-log_002c-timestamps-in"></a>
<a class="index-entry-id" id="index-gawk-timestamps"></a>
<a class="index-entry-id" id="index-POSIX-awk-timestamps-and"></a>
<p><code class="command">awk</code> programs are commonly used to process log files
containing timestamp information, indicating when a
particular log record was written.  Many programs log their timestamps
in the form returned by the <code class="code">time()</code> system call, which is the
number of seconds since a particular epoch.  On POSIX-compliant systems,
it is the number of seconds since
1970-01-01 00:00:00 UTC, not counting leap
seconds.<a class="footnote" id="DOCF56" href="#FOOT56"><sup>56</sup></a>
All known POSIX-compliant systems support timestamps from 0 through
2<sup class="sup">31</sup> &minus; 1,
which is sufficient to represent times through
2038-01-19 03:14:07 UTC.  Many systems support a wider range of timestamps,
including negative timestamps that represent times before the
epoch.
</p>
<a class="index-entry-id" id="index-date-utility-GNU"></a>
<a class="index-entry-id" id="index-time-retrieving"></a>
<p>In order to make it easier to process such log files and to produce
useful reports, <code class="command">gawk</code> provides the following functions for
working with timestamps.  They are <code class="command">gawk</code> extensions; they are
not specified in the POSIX standard.<a class="footnote" id="DOCF57" href="#FOOT57"><sup>57</sup></a>
However, recent versions
of <code class="command">mawk</code> (see <a class="pxref" href="#Other-Versions">Other Freely Available <code class="command">awk</code> Implementations</a>) also support these functions.
Optional parameters are enclosed in square brackets ([ ]):
</p>
<dl class="table">
<dt><a class="index-entry-id" id="index-generate-time-values"></a>
<a id="index-mktime_0028_0029-function-_0028gawk_0029"></a><span><code class="code">mktime(<var class="var">datespec</var></code> [<code class="code">, <var class="var">utc-flag</var></code> ]<code class="code">)</code><a class="copiable-link" href="#index-mktime_0028_0029-function-_0028gawk_0029"> &para;</a></span></dt>
<dd><p>Turn <var class="var">datespec</var> into a timestamp in the same form
as is returned by <code class="code">systime()</code>.  It is similar to the function of the
same name in ISO C.  The argument, <var class="var">datespec</var>, is a string of the form
<code class="code">&quot;<var class="var">YYYY</var>&nbsp;<var class="var">MM</var>&nbsp;<var class="var">DD</var>&nbsp;<var class="var">HH</var>&nbsp;<var class="var">MM</var>&nbsp;<var class="var">SS</var>&nbsp;[<var class="var">DST</var>]&quot;</code><!-- /@w -->.
The string consists of six or seven numbers representing, respectively,
the full year including century, the month from 1 to 12, the day of the month
from 1 to 31, the hour of the day from 0 to 23, the minute from 0 to
59, the second from 0 to 60,<a class="footnote" id="DOCF58" href="#FOOT58"><sup>58</sup></a>
and an optional daylight-savings flag.
</p>
<p>The values of these numbers need not be within the ranges specified;
for example, an hour of &minus;1 means 1 hour before midnight.
The origin-zero Gregorian calendar is assumed, with year 0 preceding
year 1 and year &minus;1 preceding year 0.
If <var class="var">utc-flag</var> is present and is either nonzero or non-null, the time
is assumed to be in the UTC time zone; otherwise, the
time is assumed to be in the local time zone.
If the <var class="var">DST</var> daylight-savings flag is positive, the time is assumed to be
daylight savings time; if zero, the time is assumed to be standard
time; and if negative (the default), <code class="code">mktime()</code> attempts to determine
whether daylight savings time is in effect for the specified time.
</p>
<p>If <var class="var">datespec</var> does not contain enough elements or if the resulting time
is out of range, <code class="code">mktime()</code> returns &minus;1.
</p>
<a class="index-entry-id" id="index-gawk-PROCINFO-array-in-2"></a>
</dd>
<dt><a class="index-entry-id" id="index-format-time-string"></a>
<a class="index-entry-id" id="index-PROCINFO-array-1"></a>
<a id="index-strftime_0028_0029-function-_0028gawk_0029"></a><span><code class="code">strftime(</code>[<var class="var">format</var> [<code class="code">,</code> <var class="var">timestamp</var> [<code class="code">,</code> <var class="var">utc-flag</var>] ] ]<code class="code">)</code><a class="copiable-link" href="#index-strftime_0028_0029-function-_0028gawk_0029"> &para;</a></span></dt>
<dd><p>Format the time specified by <var class="var">timestamp</var>
based on the contents of the <var class="var">format</var> string and return the result.
It is similar to the function of the same name in ISO C.
If <var class="var">utc-flag</var> is present and is either nonzero or non-null, the value
is formatted as UTC (Coordinated Universal Time, formerly GMT or Greenwich
Mean Time). Otherwise, the value is formatted for the local time zone.
The <var class="var">timestamp</var> is in the same format as the value returned by the
<code class="code">systime()</code> function.  If no <var class="var">timestamp</var> argument is supplied,
<code class="command">gawk</code> uses the current time of day as the timestamp.
Without a <var class="var">format</var> argument, <code class="code">strftime()</code> uses
the value of <code class="code">PROCINFO[&quot;strftime&quot;]</code> as the format string
(see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>).
The default string value is
<code class="code">&quot;%a&nbsp;%b&nbsp;%e&nbsp;%H:%M:%S&nbsp;%Z&nbsp;%Y&quot;<!-- /@w --></code>.  This format string produces
output that is equivalent to that of the <code class="command">date</code> utility.
You can assign a new value to <code class="code">PROCINFO[&quot;strftime&quot;]</code> to
change the default format; see the following list for the various format directives.
</p>
</dd>
<dt><a class="index-entry-id" id="index-timestamps-1"></a>
<a class="index-entry-id" id="index-current-system-time"></a>
<a id="index-systime_0028_0029-function-_0028gawk_0029"></a><span><code class="code">systime()</code><a class="copiable-link" href="#index-systime_0028_0029-function-_0028gawk_0029"> &para;</a></span></dt>
<dd><p>Return the current time as the number of seconds since
the system epoch.  On POSIX systems, this is the number of seconds
since 1970-01-01 00:00:00 UTC, not counting leap seconds.
It may be a different number on other systems.
</p></dd>
</dl>

<p>The <code class="code">systime()</code> function allows you to compare a timestamp from a
log file with the current time of day.  In particular, it is easy to
determine how long ago a particular record was logged.  It also allows
you to produce log records using the &ldquo;seconds since the epoch&rdquo; format.
</p>
<a class="index-entry-id" id="index-converting-dates-to-timestamps"></a>
<a class="index-entry-id" id="index-dates-converting-to-timestamps"></a>
<a class="index-entry-id" id="index-timestamps-converting-dates-to"></a>
<p>The <code class="code">mktime()</code> function allows you to convert a textual representation
of a date and time into a timestamp.   This makes it easy to do before/after
comparisons of dates and times, particularly when dealing with date and
time data coming from an external source, such as a log file.
</p>
<p>The <code class="code">strftime()</code> function allows you to easily turn a timestamp
into human-readable information.  It is similar in nature to the <code class="code">sprintf()</code>
function
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>),
in that it copies nonformat specification characters verbatim to the
returned string, while substituting date and time values for format
specifications in the <var class="var">format</var> string.
</p>
<a class="index-entry-id" id="index-format-specifiers-strftime_0028_0029-function-_0028gawk_0029"></a>
<p><code class="code">strftime()</code> is guaranteed by the 1999 ISO C
standard<a class="footnote" id="DOCF59" href="#FOOT59"><sup>59</sup></a>
to support the following date format specifications:
</p>
<dl class="table">
<dt><code class="code">%a</code></dt>
<dd><p>The locale&rsquo;s abbreviated weekday name.
</p>
</dd>
<dt><code class="code">%A</code></dt>
<dd><p>The locale&rsquo;s full weekday name.
</p>
</dd>
<dt><code class="code">%b</code></dt>
<dd><p>The locale&rsquo;s abbreviated month name.
</p>
</dd>
<dt><code class="code">%B</code></dt>
<dd><p>The locale&rsquo;s full month name.
</p>
</dd>
<dt><code class="code">%c</code></dt>
<dd><p>The locale&rsquo;s &ldquo;appropriate&rdquo; date and time representation.
(This is &lsquo;<samp class="samp">%A %B %d %T %Y</samp>&rsquo; in the <code class="code">&quot;C&quot;</code> locale.)
</p>
</dd>
<dt><code class="code">%C</code></dt>
<dd><p>The century part of the current year.
This is the year divided by 100 and truncated to the next
lower integer.
</p>
</dd>
<dt><code class="code">%d</code></dt>
<dd><p>The day of the month as a decimal number (01&ndash;31).
</p>
</dd>
<dt><code class="code">%D</code></dt>
<dd><p>Equivalent to specifying &lsquo;<samp class="samp">%m/%d/%y</samp>&rsquo;.
</p>
</dd>
<dt><code class="code">%e</code></dt>
<dd><p>The day of the month, padded with a space if it is only one digit.
</p>
</dd>
<dt><code class="code">%F</code></dt>
<dd><p>Equivalent to specifying &lsquo;<samp class="samp">%Y-%m-%d</samp>&rsquo;.
This is the ISO 8601 date format.
</p>
</dd>
<dt><code class="code">%g</code></dt>
<dd><p>The year modulo 100 of the ISO 8601 week number, as a decimal number (00&ndash;99).
For example, January 1, 2012, is in week 53 of 2011. Thus, the year
of its ISO 8601 week number is 2011, even though its year is 2012.
Similarly, December 31, 2012, is in week 1 of 2013. Thus, the year
of its ISO week number is 2013, even though its year is 2012.
</p>
</dd>
<dt><code class="code">%G</code></dt>
<dd><p>The full year of the ISO week number, as a decimal number.
</p>
</dd>
<dt><code class="code">%h</code></dt>
<dd><p>Equivalent to &lsquo;<samp class="samp">%b</samp>&rsquo;.
</p>
</dd>
<dt><code class="code">%H</code></dt>
<dd><p>The hour (24-hour clock) as a decimal number (00&ndash;23).
</p>
</dd>
<dt><code class="code">%I</code></dt>
<dd><p>The hour (12-hour clock) as a decimal number (01&ndash;12).
</p>
</dd>
<dt><code class="code">%j</code></dt>
<dd><p>The day of the year as a decimal number (001&ndash;366).
</p>
</dd>
<dt><code class="code">%m</code></dt>
<dd><p>The month as a decimal number (01&ndash;12).
</p>
</dd>
<dt><code class="code">%M</code></dt>
<dd><p>The minute as a decimal number (00&ndash;59).
</p>
</dd>
<dt><code class="code">%n</code></dt>
<dd><p>A newline character (ASCII LF).
</p>
</dd>
<dt><code class="code">%p</code></dt>
<dd><p>The locale&rsquo;s equivalent of the AM/PM designations associated
with a 12-hour clock.
</p>
</dd>
<dt><code class="code">%r</code></dt>
<dd><p>The locale&rsquo;s 12-hour clock time.
(This is &lsquo;<samp class="samp">%I:%M:%S %p</samp>&rsquo; in the <code class="code">&quot;C&quot;</code> locale.)
</p>
</dd>
<dt><code class="code">%R</code></dt>
<dd><p>Equivalent to specifying &lsquo;<samp class="samp">%H:%M</samp>&rsquo;.
</p>
</dd>
<dt><code class="code">%S</code></dt>
<dd><p>The second as a decimal number (00&ndash;60).
</p>
</dd>
<dt><code class="code">%t</code></dt>
<dd><p>A TAB character.
</p>
</dd>
<dt><code class="code">%T</code></dt>
<dd><p>Equivalent to specifying &lsquo;<samp class="samp">%H:%M:%S</samp>&rsquo;.
</p>
</dd>
<dt><code class="code">%u</code></dt>
<dd><p>The weekday as a decimal number (1&ndash;7).  Monday is day one.
</p>
</dd>
<dt><code class="code">%U</code></dt>
<dd><p>The week number of the year (with the first Sunday as the first day of week one)
as a decimal number (00&ndash;53).
</p>
<a class="index-entry-id" id="index-ISO-ISO-8601-date-and-time-standard"></a>
</dd>
<dt><code class="code">%V</code></dt>
<dd><p>The week number of the year (with the first Monday as the first
day of week one) as a decimal number (01&ndash;53).
The method for determining the week number is as specified by ISO 8601.
(To wit: if the week containing January 1 has four or more days in the
new year, then it is week one; otherwise it is the last week
[52 or 53] of the previous year and the next week is week one.)
</p>
</dd>
<dt><code class="code">%w</code></dt>
<dd><p>The weekday as a decimal number (0&ndash;6).  Sunday is day zero.
</p>
</dd>
<dt><code class="code">%W</code></dt>
<dd><p>The week number of the year (with the first Monday as the first day of week one)
as a decimal number (00&ndash;53).
</p>
</dd>
<dt><code class="code">%x</code></dt>
<dd><p>The locale&rsquo;s &ldquo;appropriate&rdquo; date representation.
(This is &lsquo;<samp class="samp">%A %B %d %Y</samp>&rsquo; in the <code class="code">&quot;C&quot;</code> locale.)
</p>
</dd>
<dt><code class="code">%X</code></dt>
<dd><p>The locale&rsquo;s &ldquo;appropriate&rdquo; time representation.
(This is &lsquo;<samp class="samp">%T</samp>&rsquo; in the <code class="code">&quot;C&quot;</code> locale.)
</p>
</dd>
<dt><code class="code">%y</code></dt>
<dd><p>The year modulo 100 as a decimal number (00&ndash;99).
</p>
</dd>
<dt><code class="code">%Y</code></dt>
<dd><p>The full year as a decimal number (e.g., 2015).
</p>
</dd>
<dt><code class="code">%z</code></dt>
<dd><p>The time zone offset in a &lsquo;<samp class="samp">+<var class="var">HHMM</var></samp>&rsquo; format (e.g., the format
necessary to produce RFC 822/RFC 1036 date headers).
</p>
</dd>
<dt><code class="code">%Z</code></dt>
<dd><p>The time zone name or abbreviation; no characters if
no time zone is determinable.
</p>
</dd>
<dt><code class="code">%Ec %EC %Ex %EX %Ey %EY %Od %Oe %OH</code></dt>
<dt><code class="code">%OI %Om %OM %OS %Ou %OU %OV %Ow %OW %Oy</code></dt>
<dd><p>&ldquo;Alternative representations&rdquo; for the specifications
that use only the second letter (&lsquo;<samp class="samp">%c</samp>&rsquo;, &lsquo;<samp class="samp">%C</samp>&rsquo;,
and so on).<a class="footnote" id="DOCF60" href="#FOOT60"><sup>60</sup></a>
(These facilitate compliance with the POSIX <code class="command">date</code> utility.)
</p>
</dd>
<dt><code class="code">%%</code></dt>
<dd><p>A literal &lsquo;<samp class="samp">%</samp>&rsquo;.
</p></dd>
</dl>

<p>If a conversion specifier is not one of those just listed, the behavior is
undefined.<a class="footnote" id="DOCF61" href="#FOOT61"><sup>61</sup></a>
</p>
<p>For systems that are not yet fully standards-compliant,
<code class="command">gawk</code> supplies a copy of
<code class="code">strftime()</code> from the GNU C Library.
It supports all of the just-listed format specifications.
If that version is
used to compile <code class="command">gawk</code> (see <a class="pxref" href="#Installation">Installing <code class="command">gawk</code></a>),
then the following additional format specifications are available:
</p>
<dl class="table">
<dt><code class="code">%k</code></dt>
<dd><p>The hour (24-hour clock) as a decimal number (0&ndash;23).
Single-digit numbers are padded with a space.
</p>
</dd>
<dt><code class="code">%l</code></dt>
<dd><p>The hour (12-hour clock) as a decimal number (1&ndash;12).
Single-digit numbers are padded with a space.
</p>

</dd>
<dt><code class="code">%s</code></dt>
<dd><p>The time as a decimal timestamp in seconds since the epoch.
</p>
</dd>
</dl>

<p>Additionally, the alternative representations are recognized but their
normal representations are used.
</p>
<a class="index-entry-id" id="index-date-utility-POSIX"></a>
<a class="index-entry-id" id="index-POSIX-awk-date-utility-and"></a>
<p>The following example is an <code class="command">awk</code> implementation of the POSIX
<code class="command">date</code> utility.  Normally, the <code class="command">date</code> utility prints the
current date and time of day in a well-known format.  However, if you
provide an argument to it that begins with a &lsquo;<samp class="samp">+</samp>&rsquo;, <code class="command">date</code>
copies nonformat specifier characters to the standard output and
interprets the current time according to the format specifiers in
the string.  For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">date '+Today is %A, %B %d, %Y.'</kbd>
-| Today is Monday, September 22, 2014.
</pre></div>

<p>Here is the <code class="command">gawk</code> version of the <code class="command">date</code> utility.
It has a shell &ldquo;wrapper&rdquo; to handle the <samp class="option">-u</samp> option,
which requires that <code class="command">date</code> run as if the time zone
is set to UTC:
</p>
<div class="example">
<pre class="example-preformatted">#! /bin/sh
#
# date --- approximate the POSIX 'date' command

case $1 in
-u)  TZ=UTC0     # use UTC
     export TZ
     shift ;;
esac

gawk 'BEGIN  {
    format = PROCINFO[&quot;strftime&quot;]
    exitval = 0

    if (ARGC &gt; 2)
        exitval = 1
    else if (ARGC == 2) {
        format = ARGV[1]
        if (format ~ /^\+/)
            format = substr(format, 2)   # remove leading +
    }
    print strftime(format)
    exit exitval
}' &quot;$@&quot;
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Bitwise-Functions">
<div class="nav-panel">
<p>
Next: <a href="#Type-Functions" accesskey="n" rel="next">Getting Type Information</a>, Previous: <a href="#Time-Functions" accesskey="p" rel="prev">Time Functions</a>, Up: <a href="#Built_002din" accesskey="u" rel="up">Built-in Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Bit_002dManipulation-Functions"><span>9.1.7 Bit-Manipulation Functions<a class="copiable-link" href="#Bit_002dManipulation-Functions"> &para;</a></span></h4>
<a class="index-entry-id" id="index-bit_002dmanipulation-functions"></a>
<a class="index-entry-id" id="index-bitwise-operations"></a>
<a class="index-entry-id" id="index-AND-bitwise-operation"></a>
<a class="index-entry-id" id="index-OR-bitwise-operation"></a>
<a class="index-entry-id" id="index-XOR-bitwise-operation"></a>
<a class="index-entry-id" id="index-operations_002c-bitwise"></a>
<blockquote class="quotation">
<p><i class="i">I can explain it for you, but I can&rsquo;t understand it for you.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Anonymous</em>
</div>
<p>Many languages provide the ability to perform <em class="dfn">bitwise</em> operations
on two integer numbers.  In other words, the operation is performed on
each successive pair of bits in the operands.
Three common operations are bitwise AND, OR, and XOR.
The operations are described in <a class="ref" href="#table_002dbitwise_002dops">Table 9.6</a>.
</p>
<div class="float" id="table_002dbitwise_002dops">
<pre class="verbatim">                Bit operator
          |  AND  |   OR  |  XOR
          |---+---+---+---+---+---
Operands  | 0 | 1 | 0 | 1 | 0 | 1
----------+---+---+---+---+---+---
    0     | 0   0 | 0   1 | 0   1
    1     | 0   1 | 1   1 | 1   0
</pre>
<div class="caption"><p><strong class="strong">Table 9.6: </strong>Bitwise operations</p></div></div>
<a class="index-entry-id" id="index-bitwise-complement"></a>
<a class="index-entry-id" id="index-complement_002c-bitwise"></a>
<p>As you can see, the result of an AND operation is 1 only when <em class="emph">both</em>
bits are 1.
The result of an OR operation is 1 if <em class="emph">either</em> bit is 1.
The result of an XOR operation is 1 if either bit is 1,
but not both.
The next operation is the <em class="dfn">complement</em>; the complement of 1 is 0 and
the complement of 0 is 1. Thus, this operation &ldquo;flips&rdquo; all the bits
of a given value.
</p>
<a class="index-entry-id" id="index-bitwise-shift"></a>
<a class="index-entry-id" id="index-left-shift_002c-bitwise"></a>
<a class="index-entry-id" id="index-right-shift_002c-bitwise"></a>
<a class="index-entry-id" id="index-shift_002c-bitwise"></a>
<p>Finally, two other common operations are to shift the bits left or right.
For example, if you have a bit string &lsquo;<samp class="samp">10111001</samp>&rsquo; and you shift it
right by three bits, you end up with &lsquo;<samp class="samp">00010111</samp>&rsquo;.<a class="footnote" id="DOCF62" href="#FOOT62"><sup>62</sup></a>
If you start over again with &lsquo;<samp class="samp">10111001</samp>&rsquo; and shift it left by three
bits, you end up with &lsquo;<samp class="samp">11001000</samp>&rsquo;.  The following list describes
<code class="command">gawk</code>&rsquo;s built-in functions that implement the bitwise operations.
Optional parameters are enclosed in square brackets ([ ]):
</p>
<a class="index-entry-id" id="index-gawk-bitwise-operations-in"></a>
<dl class="table">
<dd><a class="index-entry-id" id="index-and_0028_0029-function-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-bitwise-AND"></a>
</dd>
<dt><code class="code">and(</code><var class="var">v1</var><code class="code">,</code> <var class="var">v2</var> [<code class="code">,</code> &hellip;]<code class="code">)</code></dt>
<dd><p>Return the bitwise AND of the arguments. There must be at least two.
</p>
<a class="index-entry-id" id="index-compl_0028_0029-function-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-bitwise-complement-1"></a>
</dd>
<dt><code class="code">compl(<var class="var">val</var>)</code></dt>
<dd><p>Return the bitwise complement of <var class="var">val</var>.
</p>
</dd>
<dt><a id="index-lshift_0028_0029-function-_0028gawk_0029"></a><span><code class="code">lshift(<var class="var">val</var>, <var class="var">count</var>)</code><a class="copiable-link" href="#index-lshift_0028_0029-function-_0028gawk_0029"> &para;</a></span></dt>
<dd><p>Return the value of <var class="var">val</var>, shifted left by <var class="var">count</var> bits.
</p>
<a class="index-entry-id" id="index-or_0028_0029-function-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-bitwise-OR"></a>
</dd>
<dt><code class="code">or(</code><var class="var">v1</var><code class="code">,</code> <var class="var">v2</var> [<code class="code">,</code> &hellip;]<code class="code">)</code></dt>
<dd><p>Return the bitwise OR of the arguments. There must be at least two.
</p>
</dd>
<dt><a id="index-rshift_0028_0029-function-_0028gawk_0029"></a><span><code class="code">rshift(<var class="var">val</var>, <var class="var">count</var>)</code><a class="copiable-link" href="#index-rshift_0028_0029-function-_0028gawk_0029"> &para;</a></span></dt>
<dd><p>Return the value of <var class="var">val</var>, shifted right by <var class="var">count</var> bits.
</p>
<a class="index-entry-id" id="index-xor_0028_0029-function-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-bitwise-XOR"></a>
</dd>
<dt><code class="code">xor(</code><var class="var">v1</var><code class="code">,</code> <var class="var">v2</var> [<code class="code">,</code> &hellip;]<code class="code">)</code></dt>
<dd><p>Return the bitwise XOR of the arguments. There must be at least two.
</p></dd>
</dl>

<blockquote class="quotation">
<p><b class="b">CAUTION:</b> Beginning with <code class="command">gawk</code> version 4.2, negative
operands are not allowed for any of these functions. A negative
operand produces a fatal error.  See the sidebar
&ldquo;Beware The Smoke and Mirrors!&rdquo; for more information as to why.
</p></blockquote>

<p>Here is a user-defined function (see <a class="pxref" href="#User_002ddefined">User-Defined Functions</a>)
that illustrates the use of these functions:
</p>
<a class="index-entry-id" id="index-bits2str_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-bits2str_0028_0029"></a>
<a class="index-entry-id" id="index-testbits_002eawk-program"></a>
<div class="example">
<div class="group"><pre class="example-preformatted"># bits2str --- turn an integer into readable ones and zeros

function bits2str(bits,        data, mask)
{
    if (bits == 0)
        return &quot;0&quot;

    mask = 1
    for (; bits != 0; bits = rshift(bits, 1))
        data = (and(bits, mask) ? &quot;1&quot; : &quot;0&quot;) data

    while ((length(data) % 8) != 0)
        data = &quot;0&quot; data

    return data
}
</pre></div><pre class="example-preformatted">

BEGIN {
    printf &quot;123 = %s\n&quot;, bits2str(123)
    printf &quot;0123 = %s\n&quot;, bits2str(0123)
    printf &quot;0x99 = %s\n&quot;, bits2str(0x99)
    comp = compl(0x99)
    printf &quot;compl(0x99) = %#x = %s\n&quot;, comp, bits2str(comp)
    shift = lshift(0x99, 2)
    printf &quot;lshift(0x99, 2) = %#x = %s\n&quot;, shift, bits2str(shift)
    shift = rshift(0x99, 2)
    printf &quot;rshift(0x99, 2) = %#x = %s\n&quot;, shift, bits2str(shift)
}
</pre></div>

<p>This program produces the following output when run:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f testbits.awk</kbd>
-| 123 = 01111011
-| 0123 = 01010011
-| 0x99 = 10011001
-| compl(0x99) = 0x3fffffffffff66 =
-| 00111111111111111111111111111111111111111111111101100110
-| lshift(0x99, 2) = 0x264 = 0000001001100100
-| rshift(0x99, 2) = 0x26 = 00100110
</pre></div>

<a class="index-entry-id" id="index-converting-string-to-numbers-2"></a>
<a class="index-entry-id" id="index-strings-converting-1"></a>
<a class="index-entry-id" id="index-numbers-converting-1"></a>
<a class="index-entry-id" id="index-converting-numbers-to-strings-1"></a>
<a class="index-entry-id" id="index-numbers-as-string-of-bits"></a>
<p>The <code class="code">bits2str()</code> function turns a binary number into a string.
Initializing <code class="code">mask</code> to one creates
a binary value where the rightmost bit
is set to one.  Using this mask,
the function repeatedly checks the rightmost bit.
ANDing the mask with the value indicates whether the
rightmost bit is one or not. If so, a <code class="code">&quot;1&quot;</code> is concatenated onto the front
of the string.
Otherwise, a <code class="code">&quot;0&quot;</code> is added.
The value is then shifted right by one bit and the loop continues
until there are no more one bits.
</p>
<p>If the initial value is zero, it returns a simple <code class="code">&quot;0&quot;</code>.
Otherwise, at the end, it pads the value with zeros to represent multiples
of 8-bit quantities. This is typical in modern computers.
</p>
<p>The main code in the <code class="code">BEGIN</code> rule shows the difference between the
decimal and octal values for the same numbers
(see <a class="pxref" href="#Nondecimal_002dnumbers">Octal and Hexadecimal Numbers</a>),
and then demonstrates the
results of the <code class="code">compl()</code>, <code class="code">lshift()</code>, and <code class="code">rshift()</code> functions.
</p>
<a class="index-entry-id" id="index-sidebar-Beware-The-Smoke-and-Mirrors_0021"></a>
<table class="cartouche" border="1"><tr><th>
Beware The Smoke and Mirrors!</th></tr><tr><td>

<p>It other languages, bitwise operations are performed on integer values,
not floating-point values.  As a general statement, such operations work
best when performed on unsigned integers.
</p>
<p><code class="command">gawk</code> attempts to treat the arguments to the bitwise functions
as unsigned integers.  For this reason, negative arguments produce a
fatal error.
</p>
<p>In normal operation, for all of these functions, first the
double-precision floating-point value is converted to the widest C
unsigned integer type, then the bitwise operation is performed.  If the
result cannot be represented exactly as a C <code class="code">double</code>, leading
nonzero bits are removed one by one until it can be represented exactly.
The result is then converted back into a C <code class="code">double</code>.<a class="footnote" id="DOCF63" href="#FOOT63"><sup>63</sup></a>
</p>
<p>However, when using arbitrary precision arithmetic with the <samp class="option">-M</samp>
option (see <a class="pxref" href="#Arbitrary-Precision-Arithmetic">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a>), the results may differ.
This is particularly noticeable with the <code class="code">compl()</code> function:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { print compl(42) }'</kbd>
-| 9007199254740949
$ <kbd class="kbd">gawk -M 'BEGIN { print compl(42) }'</kbd>
-| -43
</pre></div>

<p>What&rsquo;s going on becomes clear when printing the results
in hexadecimal:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { printf &quot;%#x\n&quot;, compl(42) }'</kbd>
-| 0x1fffffffffffd5
$ <kbd class="kbd">gawk -M 'BEGIN { printf &quot;%#x\n&quot;, compl(42) }'</kbd>
-| 0xffffffffffffffd5
</pre></div>

<p>When using the <samp class="option">-M</samp> option, under the hood, <code class="command">gawk</code> uses
GNU MP arbitrary precision integers which have at least 64 bits of precision.
When not using <samp class="option">-M</samp>, <code class="command">gawk</code> stores integral values in
regular double-precision floating point, which only maintain 53 bits of
precision.  Furthermore, the GNU MP library treats (or at least seems to treat)
the leading bit as a sign bit; thus the result with <samp class="option">-M</samp> in this case is
a negative number.
</p>
<p>In short, using <code class="command">gawk</code> for any but the simplest kind of bitwise
operations is probably a bad idea; caveat emptor!
</p>
</td></tr></table>

<hr>
</div>
<div class="subsection-level-extent" id="Type-Functions">
<div class="nav-panel">
<p>
Next: <a href="#I18N-Functions" accesskey="n" rel="next">String-Translation Functions</a>, Previous: <a href="#Bitwise-Functions" accesskey="p" rel="prev">Bit-Manipulation Functions</a>, Up: <a href="#Built_002din" accesskey="u" rel="up">Built-in Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Getting-Type-Information"><span>9.1.8 Getting Type Information<a class="copiable-link" href="#Getting-Type-Information"> &para;</a></span></h4>

<p><code class="command">gawk</code> provides two functions that let you distinguish
the type of a variable.
This is necessary for writing code
that traverses every element of an array of arrays
(see <a class="pxref" href="#Arrays-of-Arrays">Arrays of Arrays</a>), and in other contexts.
</p>
<dl class="table">
<dt><a class="index-entry-id" id="index-scalar-or-array"></a>
<a id="index-isarray_0028_0029-function-_0028gawk_0029"></a><span><code class="code">isarray(<var class="var">x</var>)</code><a class="copiable-link" href="#index-isarray_0028_0029-function-_0028gawk_0029"> &para;</a></span></dt>
<dd><p>Return a true value if <var class="var">x</var> is an array. Otherwise, return false.
</p>
<a class="index-entry-id" id="index-typeof_0028_0029-function-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-variable-type_002c-typeof_0028_0029-function-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-type-of-variable_002c-typeof_0028_0029-function-_0028gawk_0029"></a>
</dd>
<dt><code class="code">typeof(<var class="var">x</var>)</code></dt>
<dd><p>Return one of the following strings, depending upon the type of <var class="var">x</var>:
</p>
<dl class="table">
<dt><code class="code">&quot;array&quot;</code></dt>
<dd><p><var class="var">x</var> is an array.
</p>
</dd>
<dt><code class="code">&quot;regexp&quot;</code></dt>
<dd><p><var class="var">x</var> is a strongly typed regexp (see <a class="pxref" href="#Strong-Regexp-Constants">Strongly Typed Regexp Constants</a>).
</p>
</dd>
<dt><code class="code">&quot;number&quot;</code></dt>
<dd><p><var class="var">x</var> is a number.
</p>
</dd>
<dt><code class="code">&quot;number|bool&quot;</code></dt>
<dd><p><var class="var">x</var> is a Boolean typed value (see <a class="pxref" href="#Boolean-Typed-Values">Boolean Typed Values</a>).
</p>
</dd>
<dt><code class="code">&quot;string&quot;</code></dt>
<dd><p><var class="var">x</var> is a string.
</p>
</dd>
<dt><code class="code">&quot;strnum&quot;</code></dt>
<dd><p><var class="var">x</var> is a number that started life as user input, such as a field or
the result of calling <code class="code">split()</code>. (I.e., <var class="var">x</var> has the strnum
attribute; see <a class="pxref" href="#Variable-Typing">String Type versus Numeric Type</a>.)
</p>
</dd>
<dt><code class="code">&quot;unassigned&quot;</code></dt>
<dd><p><var class="var">x</var> is a scalar variable that has not been assigned a value yet.
For example:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    # creates a[1] but it has no assigned value
    a[1]
    print typeof(a[1])  # unassigned
}
</pre></div>

</dd>
<dt><code class="code">&quot;untyped&quot;</code></dt>
<dd><p><var class="var">x</var> has not yet been used yet at all; it can become a scalar or an
array.  The typing could even conceivably differ from run to run of
the same program! For example:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    print &quot;initially, typeof(v) = &quot;, typeof(v)

    if (&quot;FOO&quot; in ENVIRON)
        make_scalar(v)
    else
        make_array(v)

    print &quot;typeof(v) =&quot;, typeof(v)
}

function make_scalar(p,    l) { l = p }

function make_array(p) { p[1] = 1 }
</pre></div>

</dd>
</dl>
</dd>
</dl>

<p><code class="code">isarray()</code> is meant for use in two circumstances. The first is when
traversing a multidimensional array: you can test if an element is itself
an array or not.  The second is inside the body of a user-defined function
(not discussed yet; see <a class="pxref" href="#User_002ddefined">User-Defined Functions</a>), to test if a parameter is an
array or not.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> While you can use <code class="code">isarray()</code> at the global level to test variables,
doing so makes no sense. Because <em class="emph">you</em> are the one writing the
program, <em class="emph">you</em> are supposed to know if your variables are arrays
or not.
</p></blockquote>

<p>The <code class="code">typeof()</code> function is general; it allows you to determine
if a variable or function parameter is a scalar (number, string,
or strongly typed regexp) or an array.
</p>
<p>Normally, passing a variable that has never been used to a built-in
function causes it to become a scalar variable (unassigned).
However, <code class="code">isarray()</code> and <code class="code">typeof()</code> are different; they do
not change their arguments from untyped to unassigned.
</p>
<p>This applies to both variables denoted by simple identifiers
and array elements that come into existence simply by referencing them.
Consider:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { print typeof(x) }'</kbd>
-| untyped
$ <kbd class="kbd">gawk 'BEGIN { print typeof(x[&quot;foo&quot;]) }'</kbd>
-| untyped
</pre></div>

<p>Note that prior to version 5.2, array elements
that come into existence simply by referencing them
were different, they were automatically forced to be scalars:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk-5.1.1 'BEGIN { print typeof(x) }'</kbd>
-| untyped
$ <kbd class="kbd">gawk-5.1.1 'BEGIN { print typeof(x[&quot;foo&quot;]) }'</kbd>
-| unassigned
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="I18N-Functions">
<div class="nav-panel">
<p>
Previous: <a href="#Type-Functions" accesskey="p" rel="prev">Getting Type Information</a>, Up: <a href="#Built_002din" accesskey="u" rel="up">Built-in Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="String_002dTranslation-Functions"><span>9.1.9 String-Translation Functions<a class="copiable-link" href="#String_002dTranslation-Functions"> &para;</a></span></h4>
<a class="index-entry-id" id="index-gawk-string_002dtranslation-functions"></a>
<a class="index-entry-id" id="index-functions-string_002dtranslation"></a>
<a class="index-entry-id" id="index-string_002dtranslation-functions"></a>
<a class="index-entry-id" id="index-internationalization"></a>
<a class="index-entry-id" id="index-awk-programs-internationalizing"></a>

<p><code class="command">gawk</code> provides facilities for internationalizing <code class="command">awk</code> programs.
These include the functions described in the following list.
The descriptions here are purposely brief.
See <a class="xref" href="#Internationalization">Internationalization with <code class="command">gawk</code></a>,
for the full story.
Optional parameters are enclosed in square brackets ([ ]):
</p>
<dl class="table">
<dt><a class="index-entry-id" id="index-set-directory-of-message-catalogs"></a>
<a id="index-bindtextdomain_0028_0029-function-_0028gawk_0029"></a><span><code class="code">bindtextdomain(<var class="var">directory</var></code> [<code class="code">,</code> <var class="var">domain</var>]<code class="code">)</code><a class="copiable-link" href="#index-bindtextdomain_0028_0029-function-_0028gawk_0029"> &para;</a></span></dt>
<dd><p>Set the directory in which
<code class="command">gawk</code> will look for message translation files, in case they
will not or cannot be placed in the &ldquo;standard&rdquo; locations
(e.g., during testing).
It returns the directory in which <var class="var">domain</var> is &ldquo;bound.&rdquo;
</p>
<p>The default <var class="var">domain</var> is the value of <code class="code">TEXTDOMAIN</code>.
If <var class="var">directory</var> is the null string (<code class="code">&quot;&quot;</code>), then
<code class="code">bindtextdomain()</code> returns the current binding for the
given <var class="var">domain</var>.
</p>
</dd>
<dt><a class="index-entry-id" id="index-translate-string"></a>
<a id="index-dcgettext_0028_0029-function-_0028gawk_0029"></a><span><code class="code">dcgettext(<var class="var">string</var></code> [<code class="code">,</code> <var class="var">domain</var> [<code class="code">,</code> <var class="var">category</var>] ]<code class="code">)</code><a class="copiable-link" href="#index-dcgettext_0028_0029-function-_0028gawk_0029"> &para;</a></span></dt>
<dd><p>Return the translation of <var class="var">string</var> in
text domain <var class="var">domain</var> for locale category <var class="var">category</var>.
The default value for <var class="var">domain</var> is the current value of <code class="code">TEXTDOMAIN</code>.
The default value for <var class="var">category</var> is <code class="code">&quot;LC_MESSAGES&quot;</code>.
</p>
</dd>
<dt><a id="index-dcngettext_0028_0029-function-_0028gawk_0029"></a><span><code class="code">dcngettext(<var class="var">string1</var>, <var class="var">string2</var>, <var class="var">number</var></code> [<code class="code">,</code> <var class="var">domain</var> [<code class="code">,</code> <var class="var">category</var>] ]<code class="code">)</code><a class="copiable-link" href="#index-dcngettext_0028_0029-function-_0028gawk_0029"> &para;</a></span></dt>
<dd><p>Return the plural form used for <var class="var">number</var> of the
translation of <var class="var">string1</var> and <var class="var">string2</var> in text domain
<var class="var">domain</var> for locale category <var class="var">category</var>. <var class="var">string1</var> is the
English singular variant of a message, and <var class="var">string2</var> is the English plural
variant of the same message.
The default value for <var class="var">domain</var> is the current value of <code class="code">TEXTDOMAIN</code>.
The default value for <var class="var">category</var> is <code class="code">&quot;LC_MESSAGES&quot;</code>.
</p></dd>
</dl>

<hr>
</div>
</div>
<div class="section-level-extent" id="User_002ddefined">
<div class="nav-panel">
<p>
Next: <a href="#Indirect-Calls" accesskey="n" rel="next">Indirect Function Calls</a>, Previous: <a href="#Built_002din" accesskey="p" rel="prev">Built-in Functions</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="User_002dDefined-Functions"><span>9.2 User-Defined Functions<a class="copiable-link" href="#User_002dDefined-Functions"> &para;</a></span></h3>

<a class="index-entry-id" id="index-user_002ddefined-functions"></a>
<a class="index-entry-id" id="index-functions-user_002ddefined"></a>
<p>Complicated <code class="command">awk</code> programs can often be simplified by defining
your own functions.  User-defined functions can be called just like
built-in ones (see <a class="pxref" href="#Function-Calls">Function Calls</a>), but it is up to you to define
them (i.e., to tell <code class="command">awk</code> what they should do).
</p>

<ul class="mini-toc">
<li><a href="#Definition-Syntax" accesskey="1">Function Definition Syntax</a></li>
<li><a href="#Function-Example" accesskey="2">Function Definition Examples</a></li>
<li><a href="#Function-Calling" accesskey="3">Calling User-Defined Functions</a></li>
<li><a href="#Return-Statement" accesskey="4">The <code class="code">return</code> Statement</a></li>
<li><a href="#Dynamic-Typing" accesskey="5">Functions and Their Effects on Variable Typing</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Definition-Syntax">
<div class="nav-panel">
<p>
Next: <a href="#Function-Example" accesskey="n" rel="next">Function Definition Examples</a>, Up: <a href="#User_002ddefined" accesskey="u" rel="up">User-Defined Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Function-Definition-Syntax"><span>9.2.1 Function Definition Syntax<a class="copiable-link" href="#Function-Definition-Syntax"> &para;</a></span></h4>

<blockquote class="quotation">
<p><i class="i">It&rsquo;s entirely fair to say that the awk syntax for local
variable definitions is appallingly awful.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Brian Kernighan</em>
</div>
<a class="index-entry-id" id="index-functions-defining"></a>
<p>Definitions of functions can appear anywhere between the rules of an
<code class="command">awk</code> program.  Thus, the general form of an <code class="command">awk</code> program is
extended to include sequences of rules <em class="emph">and</em> user-defined function
definitions.
There is no need to put the definition of a function
before all uses of the function.  This is because <code class="command">awk</code> reads the
entire program before starting to execute any of it.
</p>
<p>The definition of a function named <var class="var">name</var> looks like this:
</p>
<div class="display">
<div class="group"><pre class="display-preformatted"><code class="code">function</code> <var class="var">name</var><code class="code">(</code>[<var class="var">parameter-list</var>]<code class="code">)</code>
<code class="code">{</code>
     <var class="var">body-of-function</var>
<code class="code">}</code>
</pre></div></div>

<a class="index-entry-id" id="index-names-functions"></a>
<a class="index-entry-id" id="index-functions-names-of"></a>
<a class="index-entry-id" id="index-naming-issues-functions"></a>
<p>Here, <var class="var">name</var> is the name of the function to define.  A valid function
name is like a valid variable name: a sequence of letters, digits, and
underscores that doesn&rsquo;t start with a digit.
Here too, only the 52 upper- and lowercase English letters may
be used in a function name.
Within a single <code class="command">awk</code> program, any particular name can only be
used as a variable, array, or function.
</p>
<p><var class="var">parameter-list</var> is an optional list of the function&rsquo;s arguments and local
variable names, separated by commas.  When the function is called,
the argument names are used to hold the argument values given in
the call.
</p>
<p>A function cannot have two parameters with the same name, nor may it
have a parameter with the same name as the function itself.
</p>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> According to the POSIX standard, function parameters
cannot have the same name as one of the special predefined variables
(see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>), nor may a function parameter have the
same name as another function.
</p>
<a class="index-entry-id" id="index-dark-corner-parameter-name-restrictions"></a>
<p>Not all versions of <code class="command">awk</code> enforce
these restrictions.  (d.c.)
<code class="command">gawk</code> always enforces the first restriction.
With <samp class="option">--posix</samp> (see <a class="pxref" href="#Options">Command-Line Options</a>),
it also enforces the second restriction.
</p></blockquote>

<p>Local variables act like the empty string if referenced where a string
value is required, and like zero if referenced where a numeric value
is required. This is the same as the behavior of regular variables that have never been
assigned a value.  (There is more to understand about local variables;
see <a class="pxref" href="#Dynamic-Typing">Functions and Their Effects on Variable Typing</a>.)
</p>
<p>The <var class="var">body-of-function</var> consists of <code class="command">awk</code> statements.  It is the
most important part of the definition, because it says what the function
should actually <em class="emph">do</em>.  The argument names exist to give the body a
way to talk about the arguments; local variables exist to give the body
places to keep temporary values.
</p>
<p>Argument names are not distinguished syntactically from local variable
names. Instead, the number of arguments supplied when the function is
called determines how many argument variables there are.  Thus, if three
argument values are given, the first three names in <var class="var">parameter-list</var>
are arguments and the rest are local variables.
</p>
<p>It follows that if the number of arguments is not the same in all calls
to the function, some of the names in <var class="var">parameter-list</var> may be
arguments on some occasions and local variables on others.  Another
way to think of this is that omitted arguments default to the
null string.
</p>
<a class="index-entry-id" id="index-programming-conventions-functions-writing"></a>
<p>Usually when you write a function, you know how many names you intend to
use for arguments and how many you intend to use as local variables.  It is
conventional to place some extra space between the arguments and
the local variables, in order to document how your function is supposed to be used.
</p>
<a class="index-entry-id" id="index-variables-shadowing"></a>
<a class="index-entry-id" id="index-shadowing-of-variable-values"></a>
<p>During execution of the function body, the arguments and local variable
values hide, or <em class="dfn">shadow</em>, any variables of the same names used in the
rest of the program.  The shadowed variables are not accessible in the
function definition, because there is no way to name them while their
names have been taken away for the arguments and local variables.  All other variables
used in the <code class="command">awk</code> program can be referenced or set normally in the
function&rsquo;s body.
</p>
<p>The arguments and local variables last only as long as the function body
is executing.  Once the body finishes, you can once again access the
variables that were shadowed while the function was running.
</p>
<a class="index-entry-id" id="index-recursive-functions"></a>
<a class="index-entry-id" id="index-functions-recursive"></a>
<p>The function body can contain expressions that call functions.  They
can even call this function, either directly or by way of another
function.  When this happens, we say the function is <em class="dfn">recursive</em>.
The act of a function calling itself is called <em class="dfn">recursion</em>.
</p>
<p>All the built-in functions return a value to their caller.
User-defined functions can do so also, using the <code class="code">return</code> statement,
which is described in detail in <a class="ref" href="#Return-Statement">The <code class="code">return</code> Statement</a>.
Many of the subsequent examples in this section use
the <code class="code">return</code> statement.
</p>
<a class="index-entry-id" id="index-common-extensions-func-keyword"></a>
<a class="index-entry-id" id="index-extensions-common-func-keyword"></a>
<a class="index-entry-id" id="index-awk-language_002c-POSIX-version-2"></a>
<a class="index-entry-id" id="index-POSIX-awk-function-keyword-in"></a>
<p>In many <code class="command">awk</code> implementations, including <code class="command">gawk</code>,
the keyword <code class="code">function</code> may be
abbreviated <code class="code">func</code>. (c.e.)
However, POSIX only specifies the use of
the keyword <code class="code">function</code>.  This actually has some practical implications.
If <code class="command">gawk</code> is in POSIX-compatibility mode
(see <a class="pxref" href="#Options">Command-Line Options</a>), then the following
statement does <em class="emph">not</em> define a function:
</p>
<div class="example">
<pre class="example-preformatted">func foo() { a = sqrt($1) ; print a }
</pre></div>

<p>Instead, it defines a rule that, for each record, concatenates the value
of the variable &lsquo;<samp class="samp">func</samp>&rsquo; with the return value of the function &lsquo;<samp class="samp">foo</samp>&rsquo;.
If the resulting string is non-null, the action is executed.
This is probably not what is desired.  (<code class="command">awk</code> accepts this input as
syntactically valid, because functions may be used before they are defined
in <code class="command">awk</code> programs.<a class="footnote" id="DOCF64" href="#FOOT64"><sup>64</sup></a>)
</p>
<a class="index-entry-id" id="index-portability-functions_002c-defining"></a>
<p>To ensure that your <code class="command">awk</code> programs are portable, always use the
keyword <code class="code">function</code> when defining a function.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Function-Example">
<div class="nav-panel">
<p>
Next: <a href="#Function-Calling" accesskey="n" rel="next">Calling User-Defined Functions</a>, Previous: <a href="#Definition-Syntax" accesskey="p" rel="prev">Function Definition Syntax</a>, Up: <a href="#User_002ddefined" accesskey="u" rel="up">User-Defined Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Function-Definition-Examples"><span>9.2.2 Function Definition Examples<a class="copiable-link" href="#Function-Definition-Examples"> &para;</a></span></h4>
<a class="index-entry-id" id="index-function-definition-example"></a>

<p>Here is an example of a user-defined function, called <code class="code">myprint()</code>, that
takes a number and prints it in a specific format:
</p>
<div class="example">
<pre class="example-preformatted">function myprint(num)
{
     printf &quot;%6.3g\n&quot;, num
}
</pre></div>

<p>To illustrate, here is an <code class="command">awk</code> rule that uses our <code class="code">myprint()</code>
function:
</p>
<div class="example">
<pre class="example-preformatted">$3 &gt; 0     { myprint($3) }
</pre></div>

<p>This program prints, in our special format, all the third fields that
contain a positive number in our input.  Therefore, when given the following input:
</p>
<div class="example">
<pre class="example-preformatted"> 1.2   3.4    5.6   7.8
 9.10 11.12 -13.14 15.16
17.18 19.20  21.22 23.24
</pre></div>

<p>this program, using our function to format the results, prints:
</p>
<div class="example">
<pre class="example-preformatted">   5.6
  21.2
</pre></div>

<p>This function deletes all the elements in an array (recall that the
extra whitespace signifies the start of the local variable list):
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">function delarray(a,    i)
{
    for (i in a)
        delete a[i]
}
</pre></div></div>

<p>When working with arrays, it is often necessary to delete all the elements
in an array and start over with a new list of elements
(see <a class="pxref" href="#Delete">The <code class="code">delete</code> Statement</a>).
Instead of having
to repeat this loop everywhere that you need to clear out
an array, your program can just call <code class="code">delarray()</code>.
(This guarantees portability.  The use of &lsquo;<samp class="samp">delete <var class="var">array</var></samp>&rsquo; to delete
the contents of an entire array is a relatively recent<a class="footnote" id="DOCF65" href="#FOOT65"><sup>65</sup></a>
addition to the POSIX standard.)
</p>
<p>The following is an example of a recursive function.  It takes a string
as an input parameter and returns the string in reverse order.
Recursive functions must always have a test that stops the recursion.
In this case, the recursion terminates when the input string is
already empty:
</p>
<a class="index-entry-id" id="index-rev_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-rev_0028_0029"></a>
<div class="example">
<pre class="example-preformatted">function rev(str)
{
    if (str == &quot;&quot;)
        return &quot;&quot;

    return (rev(substr(str, 2)) substr(str, 1, 1))
}
</pre></div>

<p>If this function is in a file named <samp class="file">rev.awk</samp>, it can be tested
this way:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo &quot;Don't Panic!&quot; |</kbd>
&gt; <kbd class="kbd">gawk -e '{ print rev($0) }' -f rev.awk</kbd>
-| !cinaP t'noD
</pre></div>

<p>The C <code class="code">ctime()</code> function takes a timestamp and returns it as a string,
formatted in a well-known fashion.
The following example uses the built-in <code class="code">strftime()</code> function
(see <a class="pxref" href="#Time-Functions">Time Functions</a>)
to create an <code class="command">awk</code> version of <code class="code">ctime()</code>:
</p>
<a class="index-entry-id" id="index-ctime_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-ctime_0028_0029"></a>
<div class="example">
<pre class="example-preformatted"># ctime.awk
#
# awk version of C ctime(3) function

function ctime(ts,    format)
{
    format = &quot;%a %b %e %H:%M:%S %Z %Y&quot;

    if (ts == 0)
        ts = systime()       # use current time as default
    return strftime(format, ts)
}
</pre></div>

<p>You might think that <code class="code">ctime()</code> could use <code class="code">PROCINFO[&quot;strftime&quot;]</code>
for its format string. That would be a mistake, because <code class="code">ctime()</code> is
supposed to return the time formatted in a standard fashion, and user-level
code could have changed <code class="code">PROCINFO[&quot;strftime&quot;]</code>.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Function-Calling">
<div class="nav-panel">
<p>
Next: <a href="#Return-Statement" accesskey="n" rel="next">The <code class="code">return</code> Statement</a>, Previous: <a href="#Function-Example" accesskey="p" rel="prev">Function Definition Examples</a>, Up: <a href="#User_002ddefined" accesskey="u" rel="up">User-Defined Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Calling-User_002dDefined-Functions"><span>9.2.3 Calling User-Defined Functions<a class="copiable-link" href="#Calling-User_002dDefined-Functions"> &para;</a></span></h4>

<a class="index-entry-id" id="index-functions-user_002ddefined-calling"></a>
<p><em class="dfn">Calling a function</em> means causing the function to run and do its job.
A function call is an expression and its value is the value returned by
the function.
</p>

<ul class="mini-toc">
<li><a href="#Calling-A-Function" accesskey="1">Writing a Function Call</a></li>
<li><a href="#Variable-Scope" accesskey="2">Controlling Variable Scope</a></li>
<li><a href="#Pass-By-Value_002fReference" accesskey="3">Passing Function Arguments by Value Or by Reference</a></li>
<li><a href="#Function-Caveats" accesskey="4">Other Points About Calling Functions</a></li>
</ul>
<hr>
<div class="subsubsection-level-extent" id="Calling-A-Function">
<div class="nav-panel">
<p>
Next: <a href="#Variable-Scope" accesskey="n" rel="next">Controlling Variable Scope</a>, Up: <a href="#Function-Calling" accesskey="u" rel="up">Calling User-Defined Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Writing-a-Function-Call"><span>9.2.3.1 Writing a Function Call<a class="copiable-link" href="#Writing-a-Function-Call"> &para;</a></span></h4>

<p>A function call consists of the function name followed by the arguments
in parentheses.  <code class="command">awk</code> expressions are what you write in the
call for the arguments.  Each time the call is executed, these
expressions are evaluated, and the values become the actual arguments.  For
example, here is a call to <code class="code">foo()</code> with three arguments (the first
being a string concatenation):
</p>
<div class="example">
<pre class="example-preformatted">foo(x y, &quot;lose&quot;, 4 * z)
</pre></div>

<blockquote class="quotation">
<p><b class="b">CAUTION:</b> Whitespace characters (spaces and TABs) are not allowed
between the function name and the opening parenthesis of the argument list.
If you write whitespace by mistake, <code class="command">awk</code> might think that you mean
to concatenate a variable with an expression in parentheses.  However, it
notices that you used a function name and not a variable name, and reports
an error.
</p></blockquote>

<hr>
</div>
<div class="subsubsection-level-extent" id="Variable-Scope">
<div class="nav-panel">
<p>
Next: <a href="#Pass-By-Value_002fReference" accesskey="n" rel="next">Passing Function Arguments by Value Or by Reference</a>, Previous: <a href="#Calling-A-Function" accesskey="p" rel="prev">Writing a Function Call</a>, Up: <a href="#Function-Calling" accesskey="u" rel="up">Calling User-Defined Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Controlling-Variable-Scope"><span>9.2.3.2 Controlling Variable Scope<a class="copiable-link" href="#Controlling-Variable-Scope"> &para;</a></span></h4>

<a class="index-entry-id" id="index-local-variables-in-a-function"></a>
<a class="index-entry-id" id="index-variables-local-to-a-function"></a>
<p>Unlike in many languages,
there is no way to make a variable local to a <code class="code">{</code> &hellip; <code class="code">}</code> block in
<code class="command">awk</code>, but you can make a variable local to a function. It is
good practice to do so whenever a variable is needed only in that
function.
</p>
<p>To make a variable local to a function, simply declare the variable as
an argument after the actual function arguments
(see <a class="pxref" href="#Definition-Syntax">Function Definition Syntax</a>).
Look at the following example, where variable
<code class="code">i</code> is a global variable used by both functions <code class="code">foo()</code> and
<code class="code">bar()</code>:
</p>
<div class="example">
<pre class="example-preformatted">function bar()
{
    for (i = 0; i &lt; 3; i++)
        print &quot;bar's i=&quot; i
}

function foo(j)
{
    i = j + 1
    print &quot;foo's i=&quot; i
    bar()
    print &quot;foo's i=&quot; i
}

BEGIN {
      i = 10
      print &quot;top's i=&quot; i
      foo(0)
      print &quot;top's i=&quot; i
}
</pre></div>

<p>Running this script produces the following, because the <code class="code">i</code> in
functions <code class="code">foo()</code> and <code class="code">bar()</code> and at the top level refer to the same
variable instance:
</p>
<div class="example">
<pre class="example-preformatted">top's i=10
foo's i=1
bar's i=0
bar's i=1
bar's i=2
foo's i=3
top's i=3
</pre></div>

<p>If you want <code class="code">i</code> to be local to both <code class="code">foo()</code> and <code class="code">bar()</code>, do as
follows (the extra space before <code class="code">i</code> is a coding convention to
indicate that <code class="code">i</code> is a local variable, not an argument):
</p>
<div class="example">
<pre class="example-preformatted">function bar(    i)
{
    for (i = 0; i &lt; 3; i++)
        print &quot;bar's i=&quot; i
}

function foo(j,    i)
{
    i = j + 1
    print &quot;foo's i=&quot; i
    bar()
    print &quot;foo's i=&quot; i
}

BEGIN {
      i = 10
      print &quot;top's i=&quot; i
      foo(0)
      print &quot;top's i=&quot; i
}
</pre></div>

<p>Running the corrected script produces the following:
</p>
<div class="example">
<pre class="example-preformatted">top's i=10
foo's i=1
bar's i=0
bar's i=1
bar's i=2
foo's i=1
top's i=10
</pre></div>

<p>Besides scalar values (strings and numbers), you may also have
local arrays.  By using a parameter name as an array, <code class="command">awk</code>
treats it as an array, and it is local to the function.
In addition, recursive calls create new arrays.
Consider this example:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">function some_func(p1,      a)
{
    if (p1++ &gt; 3)
        return
</pre></div><pre class="example-preformatted">

    a[p1] = p1

    some_func(p1)

    printf(&quot;At level %d, index %d %s found in a\n&quot;,
         p1, (p1 - 1), (p1 - 1) in a ? &quot;is&quot; : &quot;is not&quot;)
    printf(&quot;At level %d, index %d %s found in a\n&quot;,
         p1, p1, p1 in a ? &quot;is&quot; : &quot;is not&quot;)
    print &quot;&quot;
}

BEGIN {
    some_func(1)
}
</pre></div>

<p>When run, this program produces the following output:
</p>
<div class="example">
<pre class="example-preformatted">At level 4, index 3 is not found in a
At level 4, index 4 is found in a

At level 3, index 2 is not found in a
At level 3, index 3 is found in a

At level 2, index 1 is not found in a
At level 2, index 2 is found in a
</pre></div>

<hr>
</div>
<div class="subsubsection-level-extent" id="Pass-By-Value_002fReference">
<div class="nav-panel">
<p>
Next: <a href="#Function-Caveats" accesskey="n" rel="next">Other Points About Calling Functions</a>, Previous: <a href="#Variable-Scope" accesskey="p" rel="prev">Controlling Variable Scope</a>, Up: <a href="#Function-Calling" accesskey="u" rel="up">Calling User-Defined Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Passing-Function-Arguments-by-Value-Or-by-Reference"><span>9.2.3.3 Passing Function Arguments by Value Or by Reference<a class="copiable-link" href="#Passing-Function-Arguments-by-Value-Or-by-Reference"> &para;</a></span></h4>

<p>In <code class="command">awk</code>, when you declare a function, there is no way to
declare explicitly whether the arguments are passed <em class="dfn">by value</em> or
<em class="dfn">by reference</em>.
</p>
<p>Instead, the passing convention is determined at runtime when
the function is called, according to the following rule:
if the argument is an array variable, then it is passed by reference.
Otherwise, the argument is passed by value.
</p>
<a class="index-entry-id" id="index-call-by-value"></a>
<p>Passing an argument by value means that when a function is called, it
is given a <em class="emph">copy</em> of the value of this argument.
The caller may use a variable as the expression for the argument, but
the called function does not know this&mdash;it only knows what value the
argument had.  For example, if you write the following code:
</p>
<div class="example">
<pre class="example-preformatted">foo = &quot;bar&quot;
z = myfunc(foo)
</pre></div>

<p>then you should not think of the argument to <code class="code">myfunc()</code> as being
&ldquo;the variable <code class="code">foo</code>.&rdquo;  Instead, think of the argument as the
string value <code class="code">&quot;bar&quot;</code>.
If the function <code class="code">myfunc()</code> alters the values of its local variables,
this has no effect on any other variables.  Thus, if <code class="code">myfunc()</code>
does this:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">function myfunc(str)
{
   print str
   str = &quot;zzz&quot;
   print str
}
</pre></div></div>

<p>to change its first argument variable <code class="code">str</code>, it does <em class="emph">not</em>
change the value of <code class="code">foo</code> in the caller.  The role of <code class="code">foo</code> in
calling <code class="code">myfunc()</code> ended when its value (<code class="code">&quot;bar&quot;</code>) was computed.
If <code class="code">str</code> also exists outside of <code class="code">myfunc()</code>, the function body
cannot alter this outer value, because it is shadowed during the
execution of <code class="code">myfunc()</code> and cannot be seen or changed from there.
</p>
<a class="index-entry-id" id="index-call-by-reference"></a>
<a class="index-entry-id" id="index-arrays-as-parameters-to-functions"></a>
<a class="index-entry-id" id="index-functions-arrays-as-parameters-to"></a>
<p>However, when arrays are the parameters to functions, they are <em class="emph">not</em>
copied.  Instead, the array itself is made available for direct manipulation
by the function.  This is usually termed <em class="dfn">call by reference</em>.
Changes made to an array parameter inside the body of a function <em class="emph">are</em>
visible outside that function.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> Changing an array parameter inside a function
can be very dangerous if you do not watch what you are doing.
For example:
</p>
<div class="example">
<pre class="example-preformatted">function changeit(array, ind, nvalue)
{
     array[ind] = nvalue
}

BEGIN {
    a[1] = 1; a[2] = 2; a[3] = 3
    changeit(a, 2, &quot;two&quot;)
    printf &quot;a[1] = %s, a[2] = %s, a[3] = %s\n&quot;,
            a[1], a[2], a[3]
}
</pre></div>

<p>prints &lsquo;<samp class="samp">a[1] = 1, a[2] = two, a[3] = 3</samp>&rsquo;, because
<code class="code">changeit()</code> stores <code class="code">&quot;two&quot;</code> in the second element of <code class="code">a</code>.
</p></blockquote>

<hr>
</div>
<div class="subsubsection-level-extent" id="Function-Caveats">
<div class="nav-panel">
<p>
Previous: <a href="#Pass-By-Value_002fReference" accesskey="p" rel="prev">Passing Function Arguments by Value Or by Reference</a>, Up: <a href="#Function-Calling" accesskey="u" rel="up">Calling User-Defined Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Other-Points-About-Calling-Functions"><span>9.2.3.4 Other Points About Calling Functions<a class="copiable-link" href="#Other-Points-About-Calling-Functions"> &para;</a></span></h4>

<a class="index-entry-id" id="index-undefined-functions"></a>
<a class="index-entry-id" id="index-functions-undefined"></a>
<p>Some <code class="command">awk</code> implementations allow you to call a function that
has not been defined. They only report a problem at runtime, when the
program actually tries to call the function. For example:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    if (0)
        foo()
    else
        bar()
}
function bar() { ... }
# note that `foo' is not defined
</pre></div>

<p>Because the &lsquo;<samp class="samp">if</samp>&rsquo; statement will never be true, it is not really a
problem that <code class="code">foo()</code> has not been defined.  Usually, though, it is a
problem if a program calls an undefined function.
</p>
<a class="index-entry-id" id="index-lint-checking-undefined-functions"></a>
<p>If <samp class="option">--lint</samp> is specified
(see <a class="pxref" href="#Options">Command-Line Options</a>),
<code class="command">gawk</code> reports calls to undefined functions.
</p>
<a class="index-entry-id" id="index-portability-next-statement-in-user_002ddefined-functions"></a>
<p>Some <code class="command">awk</code> implementations generate a runtime
error if you use either the <code class="code">next</code> statement
or the <code class="code">nextfile</code> statement
(see <a class="pxref" href="#Next-Statement">The <code class="code">next</code> Statement</a>, and
see <a class="pxref" href="#Nextfile-Statement">The <code class="code">nextfile</code> Statement</a>)
inside a user-defined function.
<code class="command">gawk</code> does not have this limitation.
</p>
<p>You can call a function and pass it more parameters than it was declared
with, like so:
</p>
<div class="example">
<pre class="example-preformatted">function foo(p1, p2)
{
    ...
}

BEGIN {
    foo(1, 2, 3, 4)
}
</pre></div>

<p>Doing so is bad practice, however.  The called function cannot do
anything with the additional values being passed to it, so <code class="command">awk</code>
evaluates the expressions but then just throws them away.
</p>
<p>More importantly, such a call is confusing for whoever will next read your
program.<a class="footnote" id="DOCF66" href="#FOOT66"><sup>66</sup></a> Function
parameters generally are input items that influence the computation
performed by the function.  Calling a function with more parameters than
it accepts gives the false impression that those values are important
to the function, when in fact they are not.
</p>
<p>Because this is such a bad practice, <code class="command">gawk</code> <em class="emph">unconditionally</em>
issues a warning whenever it executes such a function call.  (If you
don&rsquo;t like the warning, fix your code!  It&rsquo;s incorrect, after all.)
</p>
<hr>
</div>
</div>
<div class="subsection-level-extent" id="Return-Statement">
<div class="nav-panel">
<p>
Next: <a href="#Dynamic-Typing" accesskey="n" rel="next">Functions and Their Effects on Variable Typing</a>, Previous: <a href="#Function-Calling" accesskey="p" rel="prev">Calling User-Defined Functions</a>, Up: <a href="#User_002ddefined" accesskey="u" rel="up">User-Defined Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-return-Statement"><span>9.2.4 The <code class="code">return</code> Statement<a class="copiable-link" href="#The-return-Statement"> &para;</a></span></h4>
<a class="index-entry-id" id="index-return-statement_002c-user_002ddefined-functions"></a>

<p>As seen in several earlier examples,
the body of a user-defined function can contain a <code class="code">return</code> statement.
This statement returns control to the calling part of the <code class="command">awk</code> program.  It
can also be used to return a value for use in the rest of the <code class="command">awk</code>
program.  It looks like this:
</p>
<div class="display">
<pre class="display-preformatted"><code class="code">return</code> [<var class="var">expression</var>]
</pre></div>

<p>The <var class="var">expression</var> part is optional.
Due most likely to an oversight, POSIX does not define what the return
value is if you omit the <var class="var">expression</var>.  Technically speaking, this
makes the returned value undefined, and therefore, unpredictable.
In practice, though, all versions of <code class="command">awk</code> simply return the
null string, which acts like zero if used in a numeric context.
</p>
<p>A <code class="code">return</code> statement without an <var class="var">expression</var> is assumed at the end of
every function definition.  So, if control reaches the end of the function
body, then technically the function returns an unpredictable value.
In practice, it returns the empty string.  <code class="command">awk</code>
does <em class="emph">not</em> warn you if you use the return value of such a function.
</p>
<p>Sometimes, you want to write a function for what it does, not for
what it returns.  Such a function corresponds to a <code class="code">void</code> function
in C, C++, or Java, or to a <code class="code">procedure</code> in Ada.  Thus, it may be appropriate to not
return any value; simply bear in mind that you should not be using the
return value of such a function.
</p>
<p>The following is an example of a user-defined function that returns a value
for the largest number among the elements of an array:
</p>
<div class="example">
<pre class="example-preformatted">function maxelt(vec,   i, ret)
{
     for (i in vec) {
          if (ret == &quot;&quot; || vec[i] &gt; ret)
               ret = vec[i]
     }
     return ret
}
</pre></div>

<a class="index-entry-id" id="index-programming-conventions-function-parameters"></a>
<p>You call <code class="code">maxelt()</code> with one argument, which is an array name.  The local
variables <code class="code">i</code> and <code class="code">ret</code> are not intended to be arguments;
there is nothing to stop you from passing more than one argument
to <code class="code">maxelt()</code> but the results would be strange.  The extra space before
<code class="code">i</code> in the function parameter list indicates that <code class="code">i</code> and
<code class="code">ret</code> are local variables.
You should follow this convention when defining functions.
</p>
<p>The following program uses the <code class="code">maxelt()</code> function.  It loads an
array, calls <code class="code">maxelt()</code>, and then reports the maximum number in that
array:
</p>
<div class="example">
<pre class="example-preformatted">function maxelt(vec,   i, ret)
{
     for (i in vec) {
          if (ret == &quot;&quot; || vec[i] &gt; ret)
               ret = vec[i]
     }
     return ret
}

</pre><div class="group"><pre class="example-preformatted"># Load all fields of each record into nums.
{
     for(i = 1; i &lt;= NF; i++)
          nums[NR, i] = $i
}
</pre></div><pre class="example-preformatted">

END {
     print maxelt(nums)
}
</pre></div>

<p>Given the following input:
</p>
<div class="example">
<pre class="example-preformatted"> 1 5 23 8 16
44 3 5 2 8 26
256 291 1396 2962 100
-6 467 998 1101
99385 11 0 225
</pre></div>

<p>the program reports (predictably) that 99,385 is the largest value
in the array.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Dynamic-Typing">
<div class="nav-panel">
<p>
Previous: <a href="#Return-Statement" accesskey="p" rel="prev">The <code class="code">return</code> Statement</a>, Up: <a href="#User_002ddefined" accesskey="u" rel="up">User-Defined Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Functions-and-Their-Effects-on-Variable-Typing"><span>9.2.5 Functions and Their Effects on Variable Typing<a class="copiable-link" href="#Functions-and-Their-Effects-on-Variable-Typing"> &para;</a></span></h4>

<a class="index-entry-id" id="index-Saturday-Night-Live"></a>
<blockquote class="quotation">
<p><i class="i">It&rsquo;s a desert topping! <br>
It&rsquo;s a floor wax!</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Saturday Night Live (back when it used to be funny)</em>
</div>
<p><code class="command">awk</code> is a very fluid language.
It is possible that <code class="command">awk</code> can&rsquo;t tell if an identifier
represents a scalar variable or an array until runtime.
Here is an annotated sample program:
</p>
<div class="example">
<pre class="example-preformatted">function foo(a)
{
    a[1] = 1   # parameter is an array
}

BEGIN {
    b = 1
    foo(b)  # invalid: fatal type mismatch

    foo(x)  # x uninitialized, becomes an array dynamically
    x = 1   # now not allowed, runtime error
}
</pre></div>

<p>In this example, the first call to <code class="code">foo()</code> generates
a fatal error, so <code class="command">awk</code> will not report the second
error. If you comment out that call, though, then <code class="command">awk</code>
does report the second error.
</p>
<p>Here is a more extreme example:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    funky(a)
    if (A == 0)
        print &quot;&lt;&quot; a &quot;&gt;&quot;
    else
        print a[1]
}

function funky(arr)
{
    if (A == 0)
        arr = 1
    else
        arr[1] = 1
}
</pre></div>

<p>Here, the function uses its parameter differently depending upon the
value of the global variable <code class="code">A</code>. If <code class="code">A</code> is zero, the
parameter <code class="code">arr</code> is treated as a scalar.  Otherwise it&rsquo;s treated
as an array.
</p>
<p>There are two ways this program might behave. <code class="command">awk</code> could notice
that in the main program, <code class="code">a</code> is subscripted, and so mark it as
an array before the program even begins to run.  BWK <code class="code">awk</code>, <code class="code">mawk</code>,
and possibly others do this:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">nawk -v A=0 -f funky.awk</kbd>
error&rarr; nawk: can't assign to a; it's an array name.
error&rarr;  source line number 11
$ <kbd class="kbd">nawk -v A=1 -f funky.awk</kbd>
-| 1
</pre></div>

<p>Or <code class="command">awk</code> could wait until runtime to set the type of <code class="code">a</code>.
In this case, since <code class="code">a</code> was never used before being
passed to the function, how the function uses it forces the type to
be resolved to either scalar or array.  <code class="command">gawk</code>
and the MKS <code class="command">awk</code> do this:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -v A=0 -f funky.awk</kbd>
-| &lt;&gt;
$ <kbd class="kbd">gawk -v A=1 -f funky.awk </kbd>
-| 1
</pre></div>

<p>POSIX does not specify the correct behavior, so be aware that different
implementations work differently.
</p>
<hr>
</div>
</div>
<div class="section-level-extent" id="Indirect-Calls">
<div class="nav-panel">
<p>
Next: <a href="#Functions-Summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#User_002ddefined" accesskey="p" rel="prev">User-Defined Functions</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Indirect-Function-Calls"><span>9.3 Indirect Function Calls<a class="copiable-link" href="#Indirect-Function-Calls"> &para;</a></span></h3>

<a class="index-entry-id" id="index-indirect-function-calls"></a>
<a class="index-entry-id" id="index-function-calls-indirect"></a>
<a class="index-entry-id" id="index-function-pointers"></a>
<a class="index-entry-id" id="index-pointers-to-functions"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-indirect-function-calls"></a>

<p>This section describes an advanced, <code class="command">gawk</code>-specific extension.
</p>
<p>Often, you may wish to defer the choice of function to call until runtime.
For example, you may have different kinds of records, each of which
should be processed differently.
</p>
<p>Normally, you would have to use a series of <code class="code">if</code>-<code class="code">else</code>
statements to decide which function to call.  By using <em class="dfn">indirect</em>
function calls, you can specify the name of the function to call as a
string variable, and then call the function.  Let&rsquo;s look at an example.
</p>
<p>Suppose you have a file with your test scores for the classes you
are taking, and
you wish to get the sum and the average of
your test scores.
The first field is the class name. The following fields
are the functions to call to process the data, up to a &ldquo;marker&rdquo;
field &lsquo;<samp class="samp">data:</samp>&rsquo;.  Following the marker, to the end of the record,
are the various numeric test scores.
</p>
<p>Here is the initial file:
</p>
<div class="example">
<pre class="example-preformatted">Biology_101 sum average data: 87.0 92.4 78.5 94.9
Chemistry_305 sum average data: 75.2 98.3 94.7 88.2
English_401 sum average data: 100.0 95.6 87.1 93.4
</pre></div>

<p>To process the data, you might write initially:
</p>
<div class="example">
<pre class="example-preformatted">{
    class = $1
    for (i = 2; $i != &quot;data:&quot;; i++) {
        if ($i == &quot;sum&quot;)
            sum()   # processes the whole record
        else if ($i == &quot;average&quot;)
            average()
        ...           # and so on
    }
}
</pre></div>

<p>This style of programming works, but can be awkward.  With <em class="dfn">indirect</em>
function calls, you tell <code class="command">gawk</code> to use the <em class="emph">value</em> of a
variable as the <em class="emph">name</em> of the function to call.
</p>
<a class="index-entry-id" id="index-_0040-_0028at_002dsign_0029-_0040_002dnotation-for-indirect-function-calls"></a>
<a class="index-entry-id" id="index-at_002dsign-_0028_0040_0029-_0040_002dnotation-for-indirect-function-calls"></a>
<a class="index-entry-id" id="index-indirect-function-calls-_0040_002dnotation"></a>
<a class="index-entry-id" id="index-function-calls-indirect-_0040_002dnotation-for"></a>
<p>The syntax is similar to that of a regular function call: an identifier
immediately followed by an opening parenthesis, any arguments, and then
a closing parenthesis, with the addition of a leading &lsquo;<samp class="samp">@</samp>&rsquo;
character:
</p>
<div class="example">
<pre class="example-preformatted">the_function = &quot;sum&quot;
result = @the_function()   # calls the sum() function
</pre></div>

<p>Here is a full program that processes the previously shown data,
using indirect function calls:
</p>
<div class="example">
<pre class="example-preformatted"># indirectcall.awk --- Demonstrate indirect function calls

# average --- return the average of the values in fields $first - $last

function average(first, last,   sum, i)
{
    sum = 0;
    for (i = first; i &lt;= last; i++)
        sum += $i

    return sum / (last - first + 1)
}

# sum --- return the sum of the values in fields $first - $last

function sum(first, last,   ret, i)
{
    ret = 0;
    for (i = first; i &lt;= last; i++)
        ret += $i

    return ret
}
</pre></div>

<p>These two functions expect to work on fields; thus, the parameters
<code class="code">first</code> and <code class="code">last</code> indicate where in the fields to start and end.
Otherwise, they perform the expected computations and are not unusual:
</p>
<div class="example">
<pre class="example-preformatted"># For each record, print the class name and the requested statistics
{
    class_name = $1
    gsub(/_/, &quot; &quot;, class_name)  # Replace _ with spaces

    # find start
    for (i = 1; i &lt;= NF; i++) {
        if ($i == &quot;data:&quot;) {
            start = i + 1
            break
        }
    }

    printf(&quot;%s:\n&quot;, class_name)
    for (i = 2; $i != &quot;data:&quot;; i++) {
        the_function = $i
        printf(&quot;\t%s: &lt;%s&gt;\n&quot;, $i, @the_function(start, NF) &quot;&quot;)
    }
    print &quot;&quot;
}
</pre></div>

<p>This is the main processing for each record. It prints the class name (with
underscores replaced with spaces). It then finds the start of the actual data,
saving it in <code class="code">start</code>.
The last part of the code loops through each function name (from <code class="code">$2</code> up to
the marker, &lsquo;<samp class="samp">data:</samp>&rsquo;), calling the function named by the field. The indirect
function call itself occurs as a parameter in the call to <code class="code">printf</code>.
(The <code class="code">printf</code> format string uses &lsquo;<samp class="samp">%s</samp>&rsquo; as the format specifier so that we
can use functions that return strings, as well as numbers. Note that the result
from the indirect call is concatenated with the empty string, in order to force
it to be a string value.)
</p>
<p>Here is the result of running the program:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f indirectcall.awk class_data1</kbd>
-| Biology 101:
-|     sum: &lt;352.8&gt;
-|     average: &lt;88.2&gt;
-|
-| Chemistry 305:
-|     sum: &lt;356.4&gt;
-|     average: &lt;89.1&gt;
-|
-| English 401:
-|     sum: &lt;376.1&gt;
-|     average: &lt;94.025&gt;
</pre></div>

<p>The ability to use indirect function calls is more powerful than you may
think at first.  The C and C++ languages provide &ldquo;function pointers,&rdquo; which
are a mechanism for calling a function chosen at runtime.  One of the most
well-known uses of this ability is the C <code class="code">qsort()</code> function, which sorts
an array using the famous &ldquo;quicksort&rdquo; algorithm
(see <a class="uref" href="https://en.wikipedia.org/wiki/Quicksort">the Wikipedia article</a>
for more information).  To use this function, you supply a pointer to a comparison
function.  This mechanism allows you to sort arbitrary data in an arbitrary
fashion.
</p>
<p>We can do something similar using <code class="command">gawk</code>, like this:
</p>
<div class="example">
<pre class="example-preformatted"># quicksort.awk --- Quicksort algorithm, with user-supplied
#                   comparison function

# quicksort --- C.A.R. Hoare's quicksort algorithm. See Wikipedia
#               or almost any algorithms or computer science text.

function quicksort(data, left, right, less_than,    i, last)
{
    if (left &gt;= right)  # do nothing if array contains fewer
        return          # than two elements

    quicksort_swap(data, left, int((left + right) / 2))
    last = left
    for (i = left + 1; i &lt;= right; i++)
        if (@less_than(data[i], data[left]))
            quicksort_swap(data, ++last, i)
    quicksort_swap(data, left, last)
    quicksort(data, left, last - 1, less_than)
    quicksort(data, last + 1, right, less_than)
}

# quicksort_swap --- helper function for quicksort, should really be inline

function quicksort_swap(data, i, j,      temp)
{
    temp = data[i]
    data[i] = data[j]
    data[j] = temp
}
</pre></div>

<p>The <code class="code">quicksort()</code> function receives the <code class="code">data</code> array, the starting and ending
indices to sort (<code class="code">left</code> and <code class="code">right</code>), and the name of a function that
performs a &ldquo;less than&rdquo; comparison.  It then implements the quicksort algorithm.
</p>
<p>To make use of the sorting function, we return to our previous example. The
first thing to do is write some comparison functions:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted"># num_lt --- do a numeric less than comparison

function num_lt(left, right)
{
    return ((left + 0) &lt; (right + 0))
}
</pre></div><pre class="example-preformatted">

# num_ge --- do a numeric greater than or equal to comparison

function num_ge(left, right)
{
    return ((left + 0) &gt;= (right + 0))
}
</pre></div>

<p>The <code class="code">num_ge()</code> function is needed to perform a descending sort; when used
to perform a &ldquo;less than&rdquo; test, it actually does the opposite (greater than
or equal to), which yields data sorted in descending order.
</p>
<p>Next comes a sorting function.  It is parameterized with the starting and
ending field numbers and the comparison function. It builds an array with
the data and calls <code class="code">quicksort()</code> appropriately, and then formats the
results as a single string:
</p>
<div class="example">
<pre class="example-preformatted"># do_sort --- sort the data according to `compare'
#             and return it as a string

function do_sort(first, last, compare,      data, i, retval)
{
    delete data
    for (i = 1; first &lt;= last; first++) {
        data[i] = $first
        i++
    }

    quicksort(data, 1, i-1, compare)

    retval = data[1]
    for (i = 2; i in data; i++)
        retval = retval &quot; &quot; data[i]

    return retval
}
</pre></div>

<p>Finally, the two sorting functions call <code class="code">do_sort()</code>, passing in the
names of the two comparison functions:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted"># sort --- sort the data in ascending order and return it as a string

function sort(first, last)
{
    return do_sort(first, last, &quot;num_lt&quot;)
}
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted"># rsort --- sort the data in descending order and return it as a string

function rsort(first, last)
{
    return do_sort(first, last, &quot;num_ge&quot;)
}
</pre></div></div>

<p>Here is an extended version of the data file:
</p>
<div class="example">
<pre class="example-preformatted">Biology_101 sum average sort rsort data: 87.0 92.4 78.5 94.9
Chemistry_305 sum average sort rsort data: 75.2 98.3 94.7 88.2
English_401 sum average sort rsort data: 100.0 95.6 87.1 93.4
</pre></div>

<p>Finally, here are the results when the enhanced program is run:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f quicksort.awk -f indirectcall.awk class_data2</kbd>
-| Biology 101:
-|     sum: &lt;352.8&gt;
-|     average: &lt;88.2&gt;
-|     sort: &lt;78.5 87.0 92.4 94.9&gt;
-|     rsort: &lt;94.9 92.4 87.0 78.5&gt;
-|
-| Chemistry 305:
-|     sum: &lt;356.4&gt;
-|     average: &lt;89.1&gt;
-|     sort: &lt;75.2 88.2 94.7 98.3&gt;
-|     rsort: &lt;98.3 94.7 88.2 75.2&gt;
-|
-| English 401:
-|     sum: &lt;376.1&gt;
-|     average: &lt;94.025&gt;
-|     sort: &lt;87.1 93.4 95.6 100.0&gt;
-|     rsort: &lt;100.0 95.6 93.4 87.1&gt;
</pre></div>

<p>Another example where indirect functions calls are useful can be found in
processing arrays. This is described in <a class="ref" href="#Walking-Arrays">Traversing Arrays of Arrays</a>.
</p>
<p>Remember that you must supply a leading &lsquo;<samp class="samp">@</samp>&rsquo; in front of an indirect function call.
</p>
<p>Starting with version 4.1.2 of <code class="command">gawk</code>, indirect function
calls may also be used with built-in functions and with extension functions
(see <a class="pxref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>). There are some limitations when calling
built-in functions indirectly, as follows.
</p>
<ul class="itemize mark-bullet">
<li>You cannot pass a regular expression constant to a built-in function
through an indirect function call.  This applies to the <code class="code">sub()</code>,
<code class="code">gsub()</code>, <code class="code">gensub()</code>, <code class="code">match()</code>, <code class="code">split()</code> and
<code class="code">patsplit()</code> functions.  However, you can pass a strongly typed
regexp constant (see <a class="pxref" href="#Strong-Regexp-Constants">Strongly Typed Regexp Constants</a>).

</li><li>If calling <code class="code">sub()</code> or <code class="code">gsub()</code>, you may only pass two arguments,
since those functions are unusual in that they update their third argument.
This means that <code class="code">$0</code> will be updated.

</li><li>You cannot indirectly call built-in functions that can take <code class="code">$0</code> as
a default parameter; you must supply an argument instead.  For example,
you must pass an argument to <code class="code">length()</code> if calling it indirectly.

</li><li>Calling a built-in function indirectly with the wrong number of arguments
for that function causes a fatal error. For example, calling
<code class="code">length()</code> with two arguments.  These errors are found at runtime
instead of when <code class="command">gawk</code> parses your program, since <code class="command">gawk</code>
doesn&rsquo;t know until runtime if you have passed the correct number of
arguments or not.
</li></ul>

<p><code class="command">gawk</code> does its best to make indirect function calls efficient.
For example, in the following case:
</p>
<div class="example">
<pre class="example-preformatted">for (i = 1; i &lt;= n; i++)
    @the_function()
</pre></div>

<p><code class="command">gawk</code> looks up the actual function to call only once.
</p>
<hr>
</div>
<div class="section-level-extent" id="Functions-Summary">
<div class="nav-panel">
<p>
Previous: <a href="#Indirect-Calls" accesskey="p" rel="prev">Indirect Function Calls</a>, Up: <a href="#Functions" accesskey="u" rel="up">Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary-8"><span>9.4 Summary<a class="copiable-link" href="#Summary-8"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li><code class="command">awk</code> provides built-in functions and lets you define your own
functions.

</li><li>POSIX <code class="command">awk</code> provides three kinds of built-in functions: numeric,
string, and I/O.  <code class="command">gawk</code> provides functions that sort arrays, work
with values representing time, do bit manipulation, determine variable
type (array versus scalar), and internationalize and localize programs.
<code class="command">gawk</code> also provides several extensions to some of standard
functions, typically in the form of additional arguments.

</li><li>Functions accept zero or more arguments and return a value.  The
expressions that provide the argument values are completely evaluated
before the function is called. Order of evaluation is not defined.
The return value can be ignored.

</li><li>The handling of backslash in <code class="code">sub()</code> and <code class="code">gsub()</code> is not simple.
It is more straightforward in <code class="command">gawk</code>&rsquo;s <code class="code">gensub()</code> function,
but that function still requires care in its use.

</li><li>User-defined functions provide important capabilities but come with
some syntactic inelegancies. In a function call, there cannot be any
space between the function name and the opening left parenthesis of the
argument list.  Also, there is no provision for local variables, so the
convention is to add extra parameters, and to separate them visually
from the real parameters by extra whitespace.

</li><li>User-defined functions may call other user-defined (and built-in)
functions and may call themselves recursively. Function parameters
&ldquo;hide&rdquo; any global variables of the same names.
You cannot use the name of a reserved variable (such as <code class="code">ARGC</code>)
as the name of a parameter in user-defined functions.

</li><li>Scalar values are passed to user-defined functions by value. Array
parameters are passed by reference; any changes made by the function to
array parameters are thus visible after the function has returned.

</li><li>Use the <code class="code">return</code> statement to return from a user-defined function.
An optional expression becomes the function&rsquo;s return value.  Only scalar
values may be returned by a function.

</li><li>If a variable that has never been used is passed to a user-defined
function, how that function treats the variable can set its nature:
either scalar or array.

</li><li><code class="command">gawk</code> provides indirect function calls using a special syntax.
By setting a variable to the name of a function, you can
determine at runtime what function will be called at that point in the
program. This is equivalent to function pointers in C and C++.

</li></ul>


<hr>
</div>
</div>
</div>
<div class="part-level-extent" id="Part-II_003a-Problem-Solving-with-awk">
<div class="nav-panel">
<p>
Next: <a href="#Sample-Programs" accesskey="n" rel="next">Practical <code class="command">awk</code> Programs</a>, Previous: <a href="#Functions" accesskey="p" rel="prev">Functions</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h1 class="part"><span>Part II:<br>Problem Solving with <code class="command">awk</code><a class="copiable-link" href="#Part-II_003a-Problem-Solving-with-awk"> &para;</a></span></h1>
<hr>


<ul class="mini-toc">
<li><a href="#Library-Functions" accesskey="1">A Library of <code class="command">awk</code> Functions</a></li>
<li><a href="#Sample-Programs" accesskey="2">Practical <code class="command">awk</code> Programs</a></li>
</ul>
<div class="chapter-level-extent" id="Library-Functions">
<h2 class="chapter" id="A-Library-of-awk-Functions"><span>10 A Library of <code class="command">awk</code> Functions<a class="copiable-link" href="#A-Library-of-awk-Functions"> &para;</a></span></h2>
<a class="index-entry-id" id="index-libraries-of-awk-functions"></a>
<a class="index-entry-id" id="index-functions-library"></a>
<a class="index-entry-id" id="index-functions-user_002ddefined-library-of"></a>

<p><a class="ref" href="#User_002ddefined">User-Defined Functions</a> describes how to write
your own <code class="command">awk</code> functions.  Writing functions is important, because
it allows you to encapsulate algorithms and program tasks in a single
place.  It simplifies programming, making program development more
manageable and making programs more readable.
</p>
<a class="index-entry-id" id="index-Kernighan_002c-Brian-quotes-4"></a>
<a class="index-entry-id" id="index-Plauger_002c-P_002eJ_002e"></a>
<p>In their seminal 1976 book, <cite class="cite">Software Tools</cite>,<a class="footnote" id="DOCF67" href="#FOOT67"><sup>67</sup></a> Brian Kernighan
and P.J. Plauger wrote:
</p>
<blockquote class="quotation">
<p>Good Programming is not learned from generalities, but by seeing how
significant programs can be made clean, easy to read, easy to maintain and
modify, human-engineered, efficient and reliable, by the application of
common sense and good programming practices.  Careful study and imitation
of good programs leads to better writing.
</p></blockquote>

<p>In fact, they felt this idea was so important that they placed this
statement on the cover of their book.  Because we believe strongly
that their statement is correct, this chapter and <a class="ref" href="#Sample-Programs">Practical <code class="command">awk</code> Programs</a>, provide a good-sized body of code for you to read and, we hope,
to learn from.
</p>
<p>This chapter presents a library of useful <code class="command">awk</code> functions.
Many of the sample programs presented later in this Web page
use these functions.
The functions are presented here in a progression from simple to complex.
</p>
<a class="index-entry-id" id="index-Texinfo-1"></a>
<p><a class="ref" href="#Extract-Program">Extracting Programs from Texinfo Source Files</a>
presents a program that you can use to extract the source code for
these example library functions and programs from the Texinfo source
for this Web page.
(This has already been done as part of the <code class="command">gawk</code> distribution.)
</p>
<p>If you have written one or more useful, general-purpose <code class="command">awk</code> functions
and would like to contribute them to the <code class="command">awk</code> user community, see
<a class="ref" href="#How-To-Contribute">How to Contribute</a>, for more information.
</p>
<a class="index-entry-id" id="index-portability-example-programs"></a>
<p>The programs in this chapter and in
<a class="ref" href="#Sample-Programs">Practical <code class="command">awk</code> Programs</a>,
freely use <code class="command">gawk</code>-specific features.
Rewriting these programs for different implementations of <code class="command">awk</code>
is pretty straightforward:
</p>
<ul class="itemize mark-bullet">
<li>Diagnostic error messages are sent to <samp class="file">/dev/stderr</samp>.
Use &lsquo;<samp class="samp">| &quot;cat 1&gt;&amp;2&quot;</samp>&rsquo; instead of &lsquo;<samp class="samp">&gt; &quot;/dev/stderr&quot;</samp>&rsquo; if your system
does not have a <samp class="file">/dev/stderr</samp>, or if you cannot use <code class="command">gawk</code>.

</li><li><a class="index-entry-id" id="index-case-sensitivity-example-programs"></a>
<a class="index-entry-id" id="index-IGNORECASE-variable-in-example-programs"></a>
Finally, some of the programs choose to ignore upper- and lowercase
distinctions in their input. They do so by assigning one to <code class="code">IGNORECASE</code>.
You can achieve almost the same effect<a class="footnote" id="DOCF68" href="#FOOT68"><sup>68</sup></a> by adding the following rule to the
beginning of the program:

<div class="example">
<pre class="example-preformatted"># ignore case
{ $0 = tolower($0) }
</pre></div>

<p>Also, verify that all regexp and string constants used in
comparisons use only lowercase letters.
</p></li></ul>


<ul class="mini-toc">
<li><a href="#Library-Names" accesskey="1">Naming Library Function Global Variables</a></li>
<li><a href="#General-Functions" accesskey="2">General Programming</a></li>
<li><a href="#Data-File-Management" accesskey="3">Data file Management</a></li>
<li><a href="#Getopt-Function" accesskey="4">Processing Command-Line Options</a></li>
<li><a href="#Passwd-Functions" accesskey="5">Reading the User Database</a></li>
<li><a href="#Group-Functions" accesskey="6">Reading the Group Database</a></li>
<li><a href="#Walking-Arrays" accesskey="7">Traversing Arrays of Arrays</a></li>
<li><a href="#Library-Functions-Summary" accesskey="8">Summary</a></li>
<li><a href="#Library-Exercises" accesskey="9">Exercises</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Library-Names">
<div class="nav-panel">
<p>
Next: <a href="#General-Functions" accesskey="n" rel="next">General Programming</a>, Up: <a href="#Library-Functions" accesskey="u" rel="up">A Library of <code class="command">awk</code> Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Naming-Library-Function-Global-Variables"><span>10.1 Naming Library Function Global Variables<a class="copiable-link" href="#Naming-Library-Function-Global-Variables"> &para;</a></span></h3>

<a class="index-entry-id" id="index-names-arrays_002fvariables"></a>
<a class="index-entry-id" id="index-names-functions-1"></a>
<a class="index-entry-id" id="index-naming-issues"></a>
<a class="index-entry-id" id="index-awk-programs-documenting-1"></a>
<a class="index-entry-id" id="index-documentation-of-awk-programs"></a>
<p>Due to the way the <code class="command">awk</code> language evolved, variables are either
<em class="dfn">global</em> (usable by the entire program) or <em class="dfn">local</em> (usable just by
a specific function).  There is no intermediate state analogous to
<code class="code">static</code> variables in C.
</p>
<a class="index-entry-id" id="index-variables-global-for-library-functions"></a>
<a class="index-entry-id" id="index-private-variables"></a>
<a class="index-entry-id" id="index-variables-private"></a>
<p>Library functions often need to have global variables that they can use to
preserve state information between calls to the function&mdash;for example,
<code class="code">getopt()</code>&rsquo;s variable <code class="code">_opti</code>
(see <a class="pxref" href="#Getopt-Function">Processing Command-Line Options</a>).
Such variables are called <em class="dfn">private</em>, as the only functions that need to
use them are the ones in the library.
</p>
<p>When writing a library function, you should try to choose names for your
private variables that will not conflict with any variables used by
either another library function or a user&rsquo;s main program.  For example, a
name like <code class="code">i</code> or <code class="code">j</code> is not a good choice, because user programs
often use variable names like these for their own purposes.
</p>
<a class="index-entry-id" id="index-programming-conventions-private-variable-names"></a>
<p>The example programs shown in this chapter all start the names of their
private variables with an underscore (&lsquo;<samp class="samp">_</samp>&rsquo;).  Users generally don&rsquo;t use
leading underscores in their variable names, so this convention immediately
decreases the chances that the variable names will be accidentally shared
with the user&rsquo;s program.
</p>
<a class="index-entry-id" id="index-_005f-_0028underscore_0029-in-names-of-private-variables"></a>
<a class="index-entry-id" id="index-underscore-_0028_005f_0029-in-names-of-private-variables"></a>
<p>In addition, several of the library functions use a prefix that helps
indicate what function or set of functions use the variables&mdash;for example,
<code class="code">_pw_byname()</code> in the user database routines
(see <a class="pxref" href="#Passwd-Functions">Reading the User Database</a>).
This convention is recommended, as it even further decreases the
chance of inadvertent conflict among variable names.  Note that this
convention is used equally well for variable names and for private
function names.<a class="footnote" id="DOCF69" href="#FOOT69"><sup>69</sup></a>
</p>
<p>As a final note on variable naming, if a function makes global variables
available for use by a main program, it is a good convention to start those
variables&rsquo; names with a capital letter&mdash;for
example, <code class="code">getopt()</code>&rsquo;s <code class="code">Opterr</code> and <code class="code">Optind</code> variables
(see <a class="pxref" href="#Getopt-Function">Processing Command-Line Options</a>).
The leading capital letter indicates that it is global, while the fact that
the variable name is not all capital letters indicates that the variable is
not one of <code class="command">awk</code>&rsquo;s predefined variables, such as <code class="code">FS</code>.
</p>
<a class="index-entry-id" id="index-_002d_002ddump_002dvariables-option-using-for-library-functions"></a>
<p>It is also important that <em class="emph">all</em> variables in library
functions that do not need to save state are, in fact, declared
local.<a class="footnote" id="DOCF70" href="#FOOT70"><sup>70</sup></a> If this is not done, the variables
could accidentally be used in the user&rsquo;s program, leading to bugs that
are very difficult to track down:
</p>
<div class="example">
<pre class="example-preformatted">function lib_func(x, y,    l1, l2)
{
    ...
    # some_var should be local but by oversight is not
    <var class="var">use variable</var> some_var
    ...
}
</pre></div>

<a class="index-entry-id" id="index-arrays-associative-library-functions-and"></a>
<a class="index-entry-id" id="index-libraries-of-awk-functions-associative-arrays-and"></a>
<a class="index-entry-id" id="index-functions-library-associative-arrays-and"></a>
<a class="index-entry-id" id="index-Tcl"></a>
<p>A different convention, common in the Tcl community, is to use a single
associative array to hold the values needed by the library function(s), or
&ldquo;package.&rdquo;  This significantly decreases the number of actual global names
in use.  For example, the functions described in
<a class="ref" href="#Passwd-Functions">Reading the User Database</a>
might have used array elements <code class="code">PW_data[&quot;inited&quot;]<!-- /@w --></code>, <code class="code">PW_data[&quot;total&quot;]<!-- /@w --></code>,
<code class="code">PW_data[&quot;count&quot;]<!-- /@w --></code>, and <code class="code">PW_data[&quot;awklib&quot;]<!-- /@w --></code>, instead of
<code class="code">_pw_inited<!-- /@w --></code>, <code class="code">_pw_awklib<!-- /@w --></code>, <code class="code">_pw_total<!-- /@w --></code>,
and <code class="code">_pw_count<!-- /@w --></code>.
</p>
<p>The conventions presented in this section are exactly
that: conventions. You are not required to write your programs this
way&mdash;we merely recommend that you do so.
</p>
<p>Beginning with version 5.0, <code class="command">gawk</code> provides
a powerful mechanism for solving the problems described in this
section: <em class="dfn">namespaces</em>.  Namespaces and their use are described
in detail in <a class="ref" href="#Namespaces">Namespaces in <code class="command">gawk</code></a>.
</p>
<hr>
</div>
<div class="section-level-extent" id="General-Functions">
<div class="nav-panel">
<p>
Next: <a href="#Data-File-Management" accesskey="n" rel="next">Data file Management</a>, Previous: <a href="#Library-Names" accesskey="p" rel="prev">Naming Library Function Global Variables</a>, Up: <a href="#Library-Functions" accesskey="u" rel="up">A Library of <code class="command">awk</code> Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="General-Programming"><span>10.2 General Programming<a class="copiable-link" href="#General-Programming"> &para;</a></span></h3>

<p>This section presents a number of functions that are of general
programming use.
</p>

<ul class="mini-toc">
<li><a href="#Strtonum-Function" accesskey="1">Converting Strings to Numbers</a></li>
<li><a href="#Assert-Function" accesskey="2">Assertions</a></li>
<li><a href="#Round-Function" accesskey="3">Rounding Numbers</a></li>
<li><a href="#Cliff-Random-Function" accesskey="4">The Cliff Random Number Generator</a></li>
<li><a href="#Ordinal-Functions" accesskey="5">Translating Between Characters and Numbers</a></li>
<li><a href="#Join-Function" accesskey="6">Merging an Array into a String</a></li>
<li><a href="#Getlocaltime-Function" accesskey="7">Managing the Time of Day</a></li>
<li><a href="#Readfile-Function" accesskey="8">Reading a Whole File at Once</a></li>
<li><a href="#Shell-Quoting" accesskey="9">Quoting Strings to Pass to the Shell</a></li>
<li><a href="#Isnumeric-Function">Checking Whether A Value Is Numeric</a></li>
<li><a href="#To-CSV-Function">Producing CSV Data</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Strtonum-Function">
<div class="nav-panel">
<p>
Next: <a href="#Assert-Function" accesskey="n" rel="next">Assertions</a>, Up: <a href="#General-Functions" accesskey="u" rel="up">General Programming</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Converting-Strings-to-Numbers"><span>10.2.1 Converting Strings to Numbers<a class="copiable-link" href="#Converting-Strings-to-Numbers"> &para;</a></span></h4>

<p>The <code class="code">strtonum()</code> function (see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>)
is a <code class="command">gawk</code> extension.  The following function
provides an implementation for other versions of <code class="command">awk</code>:
</p>
<div class="example">
<pre class="example-preformatted"># mystrtonum --- convert string to number

function mystrtonum(str,        ret, n, i, k, c)
{
    if (str ~ /^0[0-7]*$/) {
        # octal
        n = length(str)
        ret = 0
        for (i = 1; i &lt;= n; i++) {
            c = substr(str, i, 1)
            # index() returns 0 if c not in string,
            # includes c == &quot;0&quot;
            k = index(&quot;1234567&quot;, c)

            ret = ret * 8 + k
        }
    } else if (str ~ /^0[xX][[:xdigit:]]+$/) {
        # hexadecimal
        str = substr(str, 3)    # lop off leading 0x
        n = length(str)
        ret = 0
        for (i = 1; i &lt;= n; i++) {
            c = substr(str, i, 1)
            c = tolower(c)
            # index() returns 0 if c not in string,
            # includes c == &quot;0&quot;
            k = index(&quot;123456789abcdef&quot;, c)

            ret = ret * 16 + k
        }
    } else if (str ~ \
  /^[-+]?([0-9]+([.][0-9]*([Ee][0-9]+)?)?|([.][0-9]+([Ee][-+]?[0-9]+)?))$/) {
        # decimal number, possibly floating point
        ret = str + 0
    } else
        ret = &quot;NOT-A-NUMBER&quot;

    return ret
}

# BEGIN {     # gawk test harness
#     a[1] = &quot;25&quot;
#     a[2] = &quot;.31&quot;
#     a[3] = &quot;0123&quot;
#     a[4] = &quot;0xdeadBEEF&quot;
#     a[5] = &quot;123.45&quot;
#     a[6] = &quot;1.e3&quot;
#     a[7] = &quot;1.32&quot;
#     a[8] = &quot;1.32E2&quot;
#
#     for (i = 1; i in a; i++)
#         print a[i], strtonum(a[i]), mystrtonum(a[i])
# }
</pre></div>

<p>The function first looks for C-style octal numbers (base 8).
If the input string matches a regular expression describing octal
numbers, then <code class="code">mystrtonum()</code> loops through each character in the
string.  It sets <code class="code">k</code> to the index in <code class="code">&quot;1234567&quot;</code> of the current
octal digit.
The return value will either be the same number as the digit, or zero
if the character is not there, which will be true for a &lsquo;<samp class="samp">0</samp>&rsquo;.
This is safe, because the regexp test in the <code class="code">if</code> ensures that
only octal values are converted.
</p>
<p>Similar logic applies to the code that checks for and converts a
hexadecimal value, which starts with &lsquo;<samp class="samp">0x</samp>&rsquo; or &lsquo;<samp class="samp">0X</samp>&rsquo;.
The use of <code class="code">tolower()</code> simplifies the computation for finding
the correct numeric value for each hexadecimal digit.
</p>
<p>Finally, if the string matches the (rather complicated) regexp for a
regular decimal integer or floating-point number, the computation
&lsquo;<samp class="samp">ret = str + 0</samp>&rsquo; lets <code class="command">awk</code> convert the value to a
number.
</p>
<p>A commented-out test program is included, so that the function can
be tested with <code class="command">gawk</code> and the results compared to the built-in
<code class="code">strtonum()</code> function.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Assert-Function">
<div class="nav-panel">
<p>
Next: <a href="#Round-Function" accesskey="n" rel="next">Rounding Numbers</a>, Previous: <a href="#Strtonum-Function" accesskey="p" rel="prev">Converting Strings to Numbers</a>, Up: <a href="#General-Functions" accesskey="u" rel="up">General Programming</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Assertions"><span>10.2.2 Assertions<a class="copiable-link" href="#Assertions"> &para;</a></span></h4>

<a class="index-entry-id" id="index-assertions"></a>
<a class="index-entry-id" id="index-assert_0028_0029-function-_0028C-library_0029"></a>
<a class="index-entry-id" id="index-C-library-functions-assert_0028_0029"></a>
<a class="index-entry-id" id="index-libraries-of-awk-functions-assertions"></a>
<a class="index-entry-id" id="index-functions-library-assertions"></a>
<a class="index-entry-id" id="index-awk-programs-lengthy-assertions"></a>
<p>When writing large programs, it is often useful to know
that a condition or set of conditions is true.  Before proceeding with a
particular computation, you make a statement about what you believe to be
the case.  Such a statement is known as an
<em class="dfn">assertion</em>.  The C language provides an <code class="code">&lt;assert.h&gt;</code> header file
and corresponding <code class="code">assert()</code> macro that a programmer can use to make
assertions.  If an assertion fails, the <code class="code">assert()</code> macro arranges to
print a diagnostic message describing the condition that should have
been true but was not, and then it kills the program.  In C, using
<code class="code">assert()</code> looks this:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">#include &lt;assert.h&gt;

int myfunc(int a, double b)
{
     assert(a &lt;= 5 &amp;&amp; b &gt;= 17.1);
     ...
}
</pre></div></div>

<p>If the assertion fails, the program prints a message similar to this:
</p>
<div class="example">
<pre class="example-preformatted">prog.c:5: assertion failed: a &lt;= 5 &amp;&amp; b &gt;= 17.1
</pre></div>

<a class="index-entry-id" id="index-assert_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-assert_0028_0029"></a>
<p>The C language makes it possible to turn the condition into a string for use
in printing the diagnostic message.  This is not possible in <code class="command">awk</code>, so
this <code class="code">assert()</code> function also requires a string version of the condition
that is being tested.
Following is the function:
</p>
<div class="example">
<pre class="example-preformatted"># assert --- assert that a condition is true. Otherwise, exit.

function assert(condition, string)
{
    if (! condition) {
        printf(&quot;%s:%d: assertion failed: %s\n&quot;,
            FILENAME, FNR, string) &gt; &quot;/dev/stderr&quot;
        _assert_exit = 1
        exit 1
    }
}

</pre><div class="group"><pre class="example-preformatted">END {
    if (_assert_exit)
        exit 1
}
</pre></div></div>

<p>The <code class="code">assert()</code> function tests the <code class="code">condition</code> parameter. If it
is false, it prints a message to standard error, using the <code class="code">string</code>
parameter to describe the failed condition.  It then sets the variable
<code class="code">_assert_exit</code> to one and executes the <code class="code">exit</code> statement.
The <code class="code">exit</code> statement jumps to the <code class="code">END</code> rule. If the <code class="code">END</code>
rule finds <code class="code">_assert_exit</code> to be true, it exits immediately.
</p>
<p>The purpose of the test in the <code class="code">END</code> rule is to
keep any other <code class="code">END</code> rules from running.  When an assertion fails, the
program should exit immediately.
If no assertions fail, then <code class="code">_assert_exit</code> is still
false when the <code class="code">END</code> rule is run normally, and the rest of the
program&rsquo;s <code class="code">END</code> rules execute.
For all of this to work correctly, <samp class="file">assert.awk</samp> must be the
first source file read by <code class="command">awk</code>.
The function can be used in a program in the following way:
</p>
<div class="example">
<pre class="example-preformatted">function myfunc(a, b)
{
     assert(a &lt;= 5 &amp;&amp; b &gt;= 17.1, &quot;a &lt;= 5 &amp;&amp; b &gt;= 17.1&quot;)
     ...
}
</pre></div>

<p>If the assertion fails, you see a message similar to the following:
</p>
<div class="example">
<pre class="example-preformatted">mydata:1357: assertion failed: a &lt;= 5 &amp;&amp; b &gt;= 17.1
</pre></div>

<a class="index-entry-id" id="index-END-pattern-assert_0028_0029-user_002ddefined-function-and"></a>
<p>There is a small problem with this version of <code class="code">assert()</code>.
An <code class="code">END</code> rule is automatically added
to the program calling <code class="code">assert()</code>.  Normally, if a program consists
of just a <code class="code">BEGIN</code> rule, the input files and/or standard input are
not read. However, now that the program has an <code class="code">END</code> rule, <code class="command">awk</code>
attempts to read the input data files or standard input
(see <a class="pxref" href="#Using-BEGIN_002fEND">Startup and Cleanup Actions</a>),
most likely causing the program to hang as it waits for input.
</p>
<a class="index-entry-id" id="index-BEGIN-pattern-assert_0028_0029-user_002ddefined-function-and"></a>
<p>There is a simple workaround to this:
make sure that such a <code class="code">BEGIN</code> rule always ends
with an <code class="code">exit</code> statement.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Round-Function">
<div class="nav-panel">
<p>
Next: <a href="#Cliff-Random-Function" accesskey="n" rel="next">The Cliff Random Number Generator</a>, Previous: <a href="#Assert-Function" accesskey="p" rel="prev">Assertions</a>, Up: <a href="#General-Functions" accesskey="u" rel="up">General Programming</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Rounding-Numbers"><span>10.2.3 Rounding Numbers<a class="copiable-link" href="#Rounding-Numbers"> &para;</a></span></h4>

<a class="index-entry-id" id="index-rounding-numbers"></a>
<a class="index-entry-id" id="index-numbers-rounding"></a>
<a class="index-entry-id" id="index-libraries-of-awk-functions-rounding-numbers"></a>
<a class="index-entry-id" id="index-functions-library-rounding-numbers"></a>
<a class="index-entry-id" id="index-print-statement-sprintf_0028_0029-function-and"></a>
<a class="index-entry-id" id="index-printf-statement-sprintf_0028_0029-function-and"></a>
<a class="index-entry-id" id="index-sprintf_0028_0029-function-print_002fprintf-statements-and"></a>
<p>The way <code class="code">printf</code> and <code class="code">sprintf()</code>
(see <a class="pxref" href="#Printf">Using <code class="code">printf</code> Statements for Fancier Printing</a>)
perform rounding often depends upon the system&rsquo;s C <code class="code">sprintf()</code>
subroutine.  On many machines, <code class="code">sprintf()</code> rounding is <em class="dfn">unbiased</em>,
which means it doesn&rsquo;t always round a trailing .5 up, contrary
to naive expectations.  In unbiased rounding, .5 rounds to even,
rather than always up, so 1.5 rounds to 2 but 4.5 rounds to 4.  This means
that if you are using a format that does rounding (e.g., <code class="code">&quot;%.0f&quot;</code>),
you should check what your system does.  The following function does
traditional rounding; it might be useful if your <code class="command">awk</code>&rsquo;s <code class="code">printf</code>
does unbiased rounding:
</p>
<a class="index-entry-id" id="index-round_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-round_0028_0029"></a>
<div class="example">
<pre class="example-preformatted"># round.awk --- do normal rounding

function round(x,   ival, aval, fraction)
{
   ival = int(x)    # integer part, int() truncates

   # see if fractional part
   if (ival == x)   # no fraction
      return ival   # ensure no decimals

   if (x &lt; 0) {
      aval = -x     # absolute value
      ival = int(aval)
      fraction = aval - ival
      if (fraction &gt;= .5)
         return int(x) - 1   # -2.5 --&gt; -3
      else
         return int(x)       # -2.3 --&gt; -2
   } else {
      fraction = x - ival
      if (fraction &gt;= .5)
         return ival + 1
      else
         return ival
   }
}
</pre><div class="group"><pre class="example-preformatted"># test harness
# { print $0, round($0) }
</pre></div></div>

<hr>
</div>
<div class="subsection-level-extent" id="Cliff-Random-Function">
<div class="nav-panel">
<p>
Next: <a href="#Ordinal-Functions" accesskey="n" rel="next">Translating Between Characters and Numbers</a>, Previous: <a href="#Round-Function" accesskey="p" rel="prev">Rounding Numbers</a>, Up: <a href="#General-Functions" accesskey="u" rel="up">General Programming</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="The-Cliff-Random-Number-Generator"><span>10.2.4 The Cliff Random Number Generator<a class="copiable-link" href="#The-Cliff-Random-Number-Generator"> &para;</a></span></h4>
<a class="index-entry-id" id="index-random-numbers-Cliff"></a>
<a class="index-entry-id" id="index-Cliff-random-numbers"></a>
<a class="index-entry-id" id="index-numbers-Cliff-random"></a>
<a class="index-entry-id" id="index-functions-library-Cliff-random-numbers"></a>

<p>The
<a class="uref" href="http://mathworld.wolfram.com/CliffRandomNumberGenerator.html">Cliff random number generator</a>
is a very simple random number generator that &ldquo;passes the noise sphere test
for randomness by showing no structure.&rdquo;
It is easily programmed, in less than 10 lines of <code class="command">awk</code> code:
</p>
<a class="index-entry-id" id="index-cliff_005frand_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-cliff_005frand_0028_0029"></a>
<div class="example">
<pre class="example-preformatted"># cliff_rand.awk --- generate Cliff random numbers

BEGIN { _cliff_seed = 0.1 }

function cliff_rand()
{
    _cliff_seed = (100 * log(_cliff_seed)) % 1
    if (_cliff_seed &lt; 0)
        _cliff_seed = - _cliff_seed
    return _cliff_seed
}
</pre></div>

<p>This algorithm requires an initial &ldquo;seed&rdquo; of 0.1.  Each new value
uses the current seed as input for the calculation.
If the built-in <code class="code">rand()</code> function
(see <a class="pxref" href="#Numeric-Functions">Numeric Functions</a>)
isn&rsquo;t random enough, you might try using this function instead.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Ordinal-Functions">
<div class="nav-panel">
<p>
Next: <a href="#Join-Function" accesskey="n" rel="next">Merging an Array into a String</a>, Previous: <a href="#Cliff-Random-Function" accesskey="p" rel="prev">The Cliff Random Number Generator</a>, Up: <a href="#General-Functions" accesskey="u" rel="up">General Programming</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Translating-Between-Characters-and-Numbers"><span>10.2.5 Translating Between Characters and Numbers<a class="copiable-link" href="#Translating-Between-Characters-and-Numbers"> &para;</a></span></h4>

<a class="index-entry-id" id="index-libraries-of-awk-functions-character-values-as-numbers"></a>
<a class="index-entry-id" id="index-functions-library-character-values-as-numbers"></a>
<a class="index-entry-id" id="index-characters-values-of-as-numbers"></a>
<a class="index-entry-id" id="index-numbers-as-values-of-characters"></a>
<p>One commercial implementation of <code class="command">awk</code> supplies a built-in function,
<code class="code">ord()</code>, which takes a character and returns the numeric value for that
character in the machine&rsquo;s character set.  If the string passed to
<code class="code">ord()</code> has more than one character, only the first one is used.
</p>
<p>The inverse of this function is <code class="code">chr()</code> (from the function of the same
name in Pascal), which takes a number and returns the corresponding character.
Both functions are written very nicely in <code class="command">awk</code>; there is no real
reason to build them into the <code class="command">awk</code> interpreter:
</p>
<a class="index-entry-id" id="index-ord_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-ord_0028_0029"></a>
<a class="index-entry-id" id="index-chr_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-chr_0028_0029"></a>
<a class="index-entry-id" id="index-_005ford_005finit_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-_005ford_005finit_0028_0029"></a>
<div class="example">
<pre class="example-preformatted"># ord.awk --- do ord and chr

# Global identifiers:
#    _ord_:        numerical values indexed by characters
#    _ord_init:    function to initialize _ord_

BEGIN    { _ord_init() }

function _ord_init(    low, high, i, t)
{
    low = sprintf(&quot;%c&quot;, 7) # BEL is ascii 7
    if (low == &quot;\a&quot;) {    # regular ascii
        low = 0
        high = 127
    } else if (sprintf(&quot;%c&quot;, 128 + 7) == &quot;\a&quot;) {
        # ascii, mark parity
        low = 128
        high = 255
    } else {        # ebcdic(!)
        low = 0
        high = 255
    }

    for (i = low; i &lt;= high; i++) {
        t = sprintf(&quot;%c&quot;, i)
        _ord_[t] = i
    }
}
</pre></div>

<a class="index-entry-id" id="index-character-sets-_0028machine-character-encodings_0029"></a>
<a class="index-entry-id" id="index-ASCII-3"></a>
<a class="index-entry-id" id="index-EBCDIC"></a>
<a class="index-entry-id" id="index-Unicode"></a>
<a class="index-entry-id" id="index-mark-parity"></a>
<p>Some explanation of the numbers used by <code class="code">_ord_init()</code> is worthwhile.
The most prominent character set in use today is ASCII.<a class="footnote" id="DOCF71" href="#FOOT71"><sup>71</sup></a>
Although an
8-bit byte can hold 256 distinct values (from 0 to 255), ASCII only
defines characters that use the values from 0 to 127.<a class="footnote" id="DOCF72" href="#FOOT72"><sup>72</sup></a>
In the now distant past,
at least one minicomputer manufacturer
used ASCII, but with mark parity, meaning that the leftmost bit in the byte
is always 1.  This means that on those systems, characters
have numeric values from 128 to 255.
Finally, large mainframe systems use the EBCDIC character set, which
uses all 256 values.
There are other character sets in use on some older systems, but
they are not really worth worrying about:
</p>
<div class="example">
<pre class="example-preformatted">function ord(str,    c)
{
    # only first character is of interest
    c = substr(str, 1, 1)
    return _ord_[c]
}

function chr(c)
{
    # force c to be numeric by adding 0
    return sprintf(&quot;%c&quot;, c + 0)
}

#### test code ####
# BEGIN {
#    for (;;) {
#        printf(&quot;enter a character: &quot;)
#        if (getline var &lt;= 0)
#            break
#        printf(&quot;ord(%s) = %d\n&quot;, var, ord(var))
#    }
# }
</pre></div>

<p>An obvious improvement to these functions is to move the code for the
<code class="code">_ord_init<!-- /@w --></code> function into the body of the <code class="code">BEGIN</code> rule.  It was
written this way initially for ease of development.
There is a &ldquo;test program&rdquo; in a <code class="code">BEGIN</code> rule, to test the
function.  It is commented out for production use.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Join-Function">
<div class="nav-panel">
<p>
Next: <a href="#Getlocaltime-Function" accesskey="n" rel="next">Managing the Time of Day</a>, Previous: <a href="#Ordinal-Functions" accesskey="p" rel="prev">Translating Between Characters and Numbers</a>, Up: <a href="#General-Functions" accesskey="u" rel="up">General Programming</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Merging-an-Array-into-a-String"><span>10.2.6 Merging an Array into a String<a class="copiable-link" href="#Merging-an-Array-into-a-String"> &para;</a></span></h4>

<a class="index-entry-id" id="index-libraries-of-awk-functions-merging-arrays-into-strings"></a>
<a class="index-entry-id" id="index-functions-library-merging-arrays-into-strings"></a>
<a class="index-entry-id" id="index-strings-merging-arrays-into"></a>
<a class="index-entry-id" id="index-arrays-merging-into-strings"></a>
<p>When doing string processing, it is often useful to be able to join
all the strings in an array into one long string.  The following function,
<code class="code">join()</code>, accomplishes this task.  It is used later in several of
the application programs
(see <a class="pxref" href="#Sample-Programs">Practical <code class="command">awk</code> Programs</a>).
</p>
<p>Good function design is important; this function needs to be general, but it
should also have a reasonable default behavior.  It is called with an array
as well as the beginning and ending indices of the elements in the array to be
merged.  This assumes that the array indices are numeric&mdash;a reasonable
assumption, as the array was likely created with <code class="code">split()</code>
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>):
</p>
<a class="index-entry-id" id="index-join_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-join_0028_0029"></a>
<div class="example">
<pre class="example-preformatted"># join.awk --- join an array into a string

function join(array, start, end, sep,    result, i)
{
    if (sep == &quot;&quot;)
       sep = &quot; &quot;
    else if (sep == SUBSEP) # magic value
       sep = &quot;&quot;
    result = array[start]
    for (i = start + 1; i &lt;= end; i++)
        result = result sep array[i]
    return result
}
</pre></div>

<p>An optional additional argument is the separator to use when joining the
strings back together.  If the caller supplies a nonempty value,
<code class="code">join()</code> uses it; if it is not supplied, it has a null
value.  In this case, <code class="code">join()</code> uses a single space as a default
separator for the strings.  If the value is equal to <code class="code">SUBSEP</code>,
then <code class="code">join()</code> joins the strings with no separator between them.
<code class="code">SUBSEP</code> serves as a &ldquo;magic&rdquo; value to indicate that there should
be no separation between the component strings.<a class="footnote" id="DOCF73" href="#FOOT73"><sup>73</sup></a>
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Getlocaltime-Function">
<div class="nav-panel">
<p>
Next: <a href="#Readfile-Function" accesskey="n" rel="next">Reading a Whole File at Once</a>, Previous: <a href="#Join-Function" accesskey="p" rel="prev">Merging an Array into a String</a>, Up: <a href="#General-Functions" accesskey="u" rel="up">General Programming</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Managing-the-Time-of-Day"><span>10.2.7 Managing the Time of Day<a class="copiable-link" href="#Managing-the-Time-of-Day"> &para;</a></span></h4>

<a class="index-entry-id" id="index-libraries-of-awk-functions-managing-time"></a>
<a class="index-entry-id" id="index-functions-library-managing-time"></a>
<a class="index-entry-id" id="index-timestamps-formatted"></a>
<a class="index-entry-id" id="index-time-managing"></a>
<p>The <code class="code">systime()</code> and <code class="code">strftime()</code> functions described in
<a class="ref" href="#Time-Functions">Time Functions</a>
provide the minimum functionality necessary for dealing with the time of day
in human-readable form.  Although <code class="code">strftime()</code> is extensive, the control
formats are not necessarily easy to remember or intuitively obvious when
reading a program.
</p>
<p>The following function, <code class="code">getlocaltime()</code>, populates a user-supplied array
with preformatted time information.  It returns a string with the current
time formatted in the same way as the <code class="command">date</code> utility:
</p>
<a class="index-entry-id" id="index-getlocaltime_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-getlocaltime_0028_0029"></a>
<div class="example">
<pre class="example-preformatted"># getlocaltime.awk --- get the time of day in a usable format

# Returns a string in the format of output of date(1)
# Populates the array argument time with individual values:
#    time[&quot;second&quot;]       -- seconds (0 - 59)
#    time[&quot;minute&quot;]       -- minutes (0 - 59)
#    time[&quot;hour&quot;]         -- hours (0 - 23)
#    time[&quot;althour&quot;]      -- hours (0 - 12)
#    time[&quot;monthday&quot;]     -- day of month (1 - 31)
#    time[&quot;month&quot;]        -- month of year (1 - 12)
#    time[&quot;monthname&quot;]    -- name of the month
#    time[&quot;shortmonth&quot;]   -- short name of the month
#    time[&quot;year&quot;]         -- year modulo 100 (0 - 99)
#    time[&quot;fullyear&quot;]     -- full year
#    time[&quot;weekday&quot;]      -- day of week (Sunday = 0)
#    time[&quot;altweekday&quot;]   -- day of week (Monday = 0)
#    time[&quot;dayname&quot;]      -- name of weekday
#    time[&quot;shortdayname&quot;] -- short name of weekday
#    time[&quot;yearday&quot;]      -- day of year (0 - 365)
#    time[&quot;timezone&quot;]     -- abbreviation of timezone name
#    time[&quot;ampm&quot;]         -- AM or PM designation
#    time[&quot;weeknum&quot;]      -- week number, Sunday first day
#    time[&quot;altweeknum&quot;]   -- week number, Monday first day

function getlocaltime(time,    ret, now, i)
{
    # get time once, avoids unnecessary system calls
    now = systime()

    # return date(1)-style output
    ret = strftime(&quot;%a %b %e %H:%M:%S %Z %Y&quot;, now)

    # clear out target array
    delete time

    # fill in values, force numeric values to be
    # numeric by adding 0
    time[&quot;second&quot;]       = strftime(&quot;%S&quot;, now) + 0
    time[&quot;minute&quot;]       = strftime(&quot;%M&quot;, now) + 0
    time[&quot;hour&quot;]         = strftime(&quot;%H&quot;, now) + 0
    time[&quot;althour&quot;]      = strftime(&quot;%I&quot;, now) + 0
    time[&quot;monthday&quot;]     = strftime(&quot;%d&quot;, now) + 0
    time[&quot;month&quot;]        = strftime(&quot;%m&quot;, now) + 0
    time[&quot;monthname&quot;]    = strftime(&quot;%B&quot;, now)
    time[&quot;shortmonth&quot;]   = strftime(&quot;%b&quot;, now)
    time[&quot;year&quot;]         = strftime(&quot;%y&quot;, now) + 0
    time[&quot;fullyear&quot;]     = strftime(&quot;%Y&quot;, now) + 0
    time[&quot;weekday&quot;]      = strftime(&quot;%w&quot;, now) + 0
    time[&quot;altweekday&quot;]   = strftime(&quot;%u&quot;, now) + 0
    time[&quot;dayname&quot;]      = strftime(&quot;%A&quot;, now)
    time[&quot;shortdayname&quot;] = strftime(&quot;%a&quot;, now)
    time[&quot;yearday&quot;]      = strftime(&quot;%j&quot;, now) + 0
    time[&quot;timezone&quot;]     = strftime(&quot;%Z&quot;, now)
    time[&quot;ampm&quot;]         = strftime(&quot;%p&quot;, now)
    time[&quot;weeknum&quot;]      = strftime(&quot;%U&quot;, now) + 0
    time[&quot;altweeknum&quot;]   = strftime(&quot;%W&quot;, now) + 0

    return ret
}
</pre></div>

<p>The string indices are easier to use and read than the various formats
required by <code class="code">strftime()</code>.  The <code class="code">alarm</code> program presented in
<a class="ref" href="#Alarm-Program">An Alarm Clock Program</a>
uses this function.
A more general design for the <code class="code">getlocaltime()</code> function would have
allowed the user to supply an optional timestamp value to use instead
of the current time.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Readfile-Function">
<div class="nav-panel">
<p>
Next: <a href="#Shell-Quoting" accesskey="n" rel="next">Quoting Strings to Pass to the Shell</a>, Previous: <a href="#Getlocaltime-Function" accesskey="p" rel="prev">Managing the Time of Day</a>, Up: <a href="#General-Functions" accesskey="u" rel="up">General Programming</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Reading-a-Whole-File-at-Once"><span>10.2.8 Reading a Whole File at Once<a class="copiable-link" href="#Reading-a-Whole-File-at-Once"> &para;</a></span></h4>

<p>Often, it is convenient to have the entire contents of a file available
in memory as a single string. A straightforward but naive way to
do that might be as follows:
</p>
<div class="example">
<pre class="example-preformatted">function readfile1(file,    tmp, contents)
{
    if ((getline tmp &lt; file) &lt; 0)
        return

    contents = tmp RT
    while ((getline tmp &lt; file) &gt; 0)
        contents = contents tmp RT

    close(file)
    return contents
}
</pre></div>

<p>This function reads from <code class="code">file</code> one record at a time, building
up the full contents of the file in the local variable <code class="code">contents</code>.
It works, but is not necessarily efficient.
</p>
<p>The following function, based on a suggestion by Denis Shirokov,
reads the entire contents of the named file in one shot:
</p>
<a class="index-entry-id" id="index-readfile_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-readfile_0028_0029"></a>
<div class="example">
<pre class="example-preformatted"># readfile.awk --- read an entire file at once

function readfile(file,     tmp, save_rs)
{
    save_rs = RS
    RS = &quot;^$&quot;
    getline tmp &lt; file
    close(file)
    RS = save_rs

    return tmp
}
</pre></div>

<p>It works by setting <code class="code">RS</code> to &lsquo;<samp class="samp">^$</samp>&rsquo;, a regular expression that
will never match if the file has contents.  <code class="command">gawk</code> reads data from
the file into <code class="code">tmp</code>, attempting to match <code class="code">RS</code>.  The match fails
after each read, but fails quickly, such that <code class="command">gawk</code> fills
<code class="code">tmp</code> with the entire contents of the file.
(See <a class="xref" href="#Records">How Input Is Split into Records</a> for information on <code class="code">RT</code> and <code class="code">RS</code>.)
</p>
<p>In the case that <code class="code">file</code> is empty, the return value is the null
string.  Thus, calling code may use something like:
</p>
<div class="example">
<pre class="example-preformatted">contents = readfile(&quot;/some/path&quot;)
if (length(contents) == 0)
    # file was empty ...
</pre></div>

<p>This tests the result to see if it is empty or not. An equivalent
test would be &lsquo;<samp class="samp">contents&nbsp;==&nbsp;&quot;&quot;<!-- /@w --></samp>&rsquo;.
</p>
<p>See <a class="xref" href="#Extension-Sample-Readfile">Reading an Entire File</a> for an extension function that
also reads an entire file into memory.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Shell-Quoting">
<div class="nav-panel">
<p>
Next: <a href="#Isnumeric-Function" accesskey="n" rel="next">Checking Whether A Value Is Numeric</a>, Previous: <a href="#Readfile-Function" accesskey="p" rel="prev">Reading a Whole File at Once</a>, Up: <a href="#General-Functions" accesskey="u" rel="up">General Programming</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Quoting-Strings-to-Pass-to-the-Shell"><span>10.2.9 Quoting Strings to Pass to the Shell<a class="copiable-link" href="#Quoting-Strings-to-Pass-to-the-Shell"> &para;</a></span></h4>


<p>Michael Brennan offers the following programming pattern,
which he uses frequently:
</p>
<div class="example">
<pre class="example-preformatted">#! /bin/sh

awkp='
   ...
   '

<var class="var">input_program</var> | awk &quot;$awkp&quot; | /bin/sh
</pre></div>

<p>For example, a program of his named <code class="command">flac-edit</code> has this form:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">flac-edit -song=&quot;Whoope! That's Great&quot; file.flac</kbd>
</pre></div>

<p>It generates the following output, which is to be piped to
the shell (<samp class="file">/bin/sh</samp>):
</p>
<div class="example">
<pre class="example-preformatted">chmod +w file.flac
metaflac --remove-tag=TITLE file.flac
LANG=en_US.88591 metaflac --set-tag=TITLE='Whoope! That'&quot;'&quot;'s Great' file.flac
chmod -w file.flac
</pre></div>

<p>Note the need for shell quoting.  The function <code class="code">shell_quote()</code>
does it.  <code class="code">SINGLE</code> is the one-character string <code class="code">&quot;'&quot;</code> and
<code class="code">QSINGLE</code> is the three-character string <code class="code">&quot;\&quot;'\&quot;&quot;</code>:
</p>
<div class="example">
<pre class="example-preformatted"># shell_quote --- quote an argument for passing to the shell

function shell_quote(s,             # parameter
    SINGLE, QSINGLE, i, X, n, ret)  # locals
{
    if (s == &quot;&quot;)
        return &quot;\&quot;\&quot;&quot;

    SINGLE = &quot;\x27&quot;  # single quote
    QSINGLE = &quot;\&quot;\x27\&quot;&quot;
    n = split(s, X, SINGLE)

    ret = SINGLE X[1] SINGLE
    for (i = 2; i &lt;= n; i++)
        ret = ret QSINGLE SINGLE X[i] SINGLE

    return ret
}
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Isnumeric-Function">
<div class="nav-panel">
<p>
Next: <a href="#To-CSV-Function" accesskey="n" rel="next">Producing CSV Data</a>, Previous: <a href="#Shell-Quoting" accesskey="p" rel="prev">Quoting Strings to Pass to the Shell</a>, Up: <a href="#General-Functions" accesskey="u" rel="up">General Programming</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Checking-Whether-A-Value-Is-Numeric"><span>10.2.10 Checking Whether A Value Is Numeric<a class="copiable-link" href="#Checking-Whether-A-Value-Is-Numeric"> &para;</a></span></h4>

<p>A frequent programming question is how to ascertain whether a value is numeric.
This can be solved by using this example function <code class="code">isnumeric()</code>, which
employs the trick of converting a string value to user input by using the
<code class="code">split()</code> function:
</p>
<a class="index-entry-id" id="index-isnumeric_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-isnumeric_0028_0029"></a>
<div class="example">
<pre class="example-preformatted"># isnumeric --- check whether a value is numeric

function isnumeric(x,  f)
{
    switch (typeof(x)) {
    case &quot;strnum&quot;:
    case &quot;number&quot;:
        return 1
    case &quot;string&quot;:
        return (split(x, f, &quot; &quot;) == 1) &amp;&amp; (typeof(f[1]) == &quot;strnum&quot;)
    default:
        return 0
    }
}
</pre></div>

<p>Please note that leading or trailing white space is disregarded in deciding
whether a value is numeric or not, so if it matters to you, you may want
to add an additional check for that.
</p>
<p>Traditionally, it has been recommended to check for numeric values using the
test &lsquo;<samp class="samp">x+0 == x</samp>&rsquo;. This function is superior in two ways: it will not
report that unassigned variables contain numeric values; and it recognizes
string values with numeric contents where <code class="code">CONVFMT</code> does not yield
the original string.
On the other hand, it uses the <code class="code">typeof()</code> function
(see <a class="pxref" href="#Type-Functions">Getting Type Information</a>), which is specific to <code class="command">gawk</code>.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="To-CSV-Function">
<div class="nav-panel">
<p>
Previous: <a href="#Isnumeric-Function" accesskey="p" rel="prev">Checking Whether A Value Is Numeric</a>, Up: <a href="#General-Functions" accesskey="u" rel="up">General Programming</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Producing-CSV-Data"><span>10.2.11 Producing CSV Data<a class="copiable-link" href="#Producing-CSV-Data"> &para;</a></span></h4>

<a class="index-entry-id" id="index-comma-separated-values-_0028CSV_0029-data-generating-CSV-data"></a>
<a class="index-entry-id" id="index-CSV-_0028comma-separated-values_0029-data-generating-CSV-data"></a>
<p><code class="command">gawk</code>&rsquo;s <samp class="option">--csv</samp> option causes <code class="command">gawk</code>
to process CSV data (see <a class="pxref" href="#Comma-Separated-Fields">Working With Comma Separated Value Files</a>).
</p>
<p>But what if you have regular data that you want to output
in CSV format?  This section provides functions for
doing that.
</p>
<p>The first function, <code class="code">tocsv()</code>, takes an array of data
fields as input. The array should be indexed starting from one.
The optional second parameter is the separator to use. If none
is supplied, the default is a comma.
</p>
<p>The function takes care to quote fields that contain double
quotes, newlines, or the separator character.  It then builds
up the final CSV record and returns it.
</p>
<a class="index-entry-id" id="index-tocsv_0028_0029-user_002ddefined-function"></a>
<div class="example">
<pre class="example-preformatted"># tocsv.awk --- convert data to CSV format

function tocsv(fields, sep,     i, j, nfields, result)
{
    if (length(fields) == 0)
        return &quot;&quot;

    if (sep == &quot;&quot;)
        sep = &quot;,&quot;
    delete nfields
    for (i = 1; i in fields; i++) {
        nfields[i] = fields[i]
        if (nfields[i] ~ /[&quot;\n]/ || index(nfields[i], sep) != 0) {
            gsub(/&quot;/, &quot;\&quot;\&quot;&quot;, nfields[i])       # double up quotes
            nfields[i] = &quot;\&quot;&quot; nfields[i] &quot;\&quot;&quot;   # wrap in quotes
        }
    }

    result = nfields[1]
    j = length(nfields)
    for (i = 2; i &lt;= j; i++)
        result = result sep nfields[i]

    return result
}
</pre></div>

<p>The next function, <code class="code">tocsv_rec()</code> is a wrapper around
<code class="code">tocsv()</code>. Its intended use is for when you want to convert the
current input record to CSV format.  The function itself simply copies
the fields into an array to pass to <code class="code">tocsv()</code> which does the work.
It accepts an optional separator character as its first parameter,
which it simply passes on to <code class="code">tocsv()</code>.
</p>
<a class="index-entry-id" id="index-tocsv_005frec_0028_0029-user_002ddefined-function"></a>
<div class="example">
<pre class="example-preformatted">function tocsv_rec(sep,     i, fields)
{
    delete fields
    for (i = 1; i &lt;= NF; i++)
        fields[i] = $i

    return tocsv(fields, sep)
}
</pre></div>

<hr>
</div>
</div>
<div class="section-level-extent" id="Data-File-Management">
<div class="nav-panel">
<p>
Next: <a href="#Getopt-Function" accesskey="n" rel="next">Processing Command-Line Options</a>, Previous: <a href="#General-Functions" accesskey="p" rel="prev">General Programming</a>, Up: <a href="#Library-Functions" accesskey="u" rel="up">A Library of <code class="command">awk</code> Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Data-file-Management"><span>10.3 Data file Management<a class="copiable-link" href="#Data-file-Management"> &para;</a></span></h3>

<a class="index-entry-id" id="index-files-managing"></a>
<a class="index-entry-id" id="index-libraries-of-awk-functions-managing-data-files"></a>
<a class="index-entry-id" id="index-functions-library-managing-data-files"></a>
<p>This section presents functions that are useful for managing
command-line data files.
</p>

<ul class="mini-toc">
<li><a href="#Filetrans-Function" accesskey="1">Noting Data file Boundaries</a></li>
<li><a href="#Rewind-Function" accesskey="2">Rereading the Current File</a></li>
<li><a href="#File-Checking" accesskey="3">Checking for Readable Data files</a></li>
<li><a href="#Empty-Files" accesskey="4">Checking for Zero-Length Files</a></li>
<li><a href="#Ignoring-Assigns" accesskey="5">Treating Assignments as File names</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Filetrans-Function">
<div class="nav-panel">
<p>
Next: <a href="#Rewind-Function" accesskey="n" rel="next">Rereading the Current File</a>, Up: <a href="#Data-File-Management" accesskey="u" rel="up">Data file Management</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Noting-Data-file-Boundaries"><span>10.3.1 Noting Data file Boundaries<a class="copiable-link" href="#Noting-Data-file-Boundaries"> &para;</a></span></h4>

<a class="index-entry-id" id="index-files-managing-data-file-boundaries"></a>
<a class="index-entry-id" id="index-files-initialization-and-cleanup"></a>
<p>The <code class="code">BEGIN</code> and <code class="code">END</code> rules are each executed exactly once, at
the beginning and end of your <code class="command">awk</code> program, respectively
(see <a class="pxref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>).
We (the <code class="command">gawk</code> authors) once had a user who mistakenly thought that the
<code class="code">BEGIN</code> rules were executed at the beginning of each data file and the
<code class="code">END</code> rules were executed at the end of each data file.
</p>
<p>When informed
that this was not the case, the user requested that we add new special
patterns to <code class="command">gawk</code>, named <code class="code">BEGIN_FILE</code> and <code class="code">END_FILE</code>, that
would have the desired behavior.  He even supplied us the code to do so.
</p>
<p>Adding these special patterns to <code class="command">gawk</code> wasn&rsquo;t necessary;
the job can be done cleanly in <code class="command">awk</code> itself, as illustrated
by the following library program.
It arranges to call two user-supplied functions, <code class="code">beginfile()</code> and
<code class="code">endfile()</code>, at the beginning and end of each data file.
Besides solving the problem in only nine(!) lines of code, it does so
<em class="emph">portably</em>; this works with any implementation of <code class="command">awk</code>:
</p>
<div class="example">
<pre class="example-preformatted"># transfile.awk
#
# Give the user a hook for filename transitions
#
# The user must supply functions beginfile() and endfile()
# that each take the name of the file being started or
# finished, respectively.

FILENAME != _oldfilename {
    if (_oldfilename != &quot;&quot;)
        endfile(_oldfilename)
    _oldfilename = FILENAME
    beginfile(FILENAME)
}

END { endfile(FILENAME) }
</pre></div>

<p>This file must be loaded before the user&rsquo;s &ldquo;main&rdquo; program, so that the
rule it supplies is executed first.
</p>
<p>This rule relies on <code class="command">awk</code>&rsquo;s <code class="code">FILENAME</code> variable, which
automatically changes for each new data file.  The current file name is
saved in a private variable, <code class="code">_oldfilename</code>.  If <code class="code">FILENAME</code> does
not equal <code class="code">_oldfilename</code>, then a new data file is being processed and
it is necessary to call <code class="code">endfile()</code> for the old file.  Because
<code class="code">endfile()</code> should only be called if a file has been processed, the
program first checks to make sure that <code class="code">_oldfilename</code> is not the null
string.  The program then assigns the current file name to
<code class="code">_oldfilename</code> and calls <code class="code">beginfile()</code> for the file.
Because, like all <code class="command">awk</code> variables, <code class="code">_oldfilename</code> is
initialized to the null string, this rule executes correctly even for the
first data file.
</p>
<p>The program also supplies an <code class="code">END</code> rule to do the final processing for
the last file.  Because this <code class="code">END</code> rule comes before any <code class="code">END</code> rules
supplied in the &ldquo;main&rdquo; program, <code class="code">endfile()</code> is called first.  Once
again, the value of multiple <code class="code">BEGIN</code> and <code class="code">END</code> rules should be clear.
</p>
<a class="index-entry-id" id="index-beginfile_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-beginfile_0028_0029"></a>
<a class="index-entry-id" id="index-endfile_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-endfile_0028_0029"></a>
<p>If the same data file occurs twice in a row on the command line, then
<code class="code">endfile()</code> and <code class="code">beginfile()</code> are not executed at the end of the
first pass and at the beginning of the second pass.
The following version solves the problem:
</p>
<div class="example">
<pre class="example-preformatted"># ftrans.awk --- handle datafile transitions
#
# user supplies beginfile() and endfile() functions

FNR == 1 {
    if (_filename_ != &quot;&quot;)
        endfile(_filename_)
    _filename_ = FILENAME
    beginfile(FILENAME)
}

END { endfile(_filename_) }
</pre></div>

<p><a class="ref" href="#Wc-Program">Counting Things</a>
shows how this library function can be used and
how it simplifies writing the main program.
</p>
<a class="index-entry-id" id="index-sidebar-So-Why-Does-gawk-Have-BEGINFILE-and-ENDFILE_003f"></a>
<table class="cartouche" border="1"><tr><th>
So Why Does <code class="command">gawk</code> Have <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code>?</th></tr><tr><td>

<p>You are probably wondering, if <code class="code">beginfile()</code> and <code class="code">endfile()</code>
functions can do the job, why does <code class="command">gawk</code> have
<code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> patterns?
</p>
<p>Good question.  Normally, if <code class="command">awk</code> cannot open a file, this
causes an immediate fatal error.  In this case, there is no way for a
user-defined function to deal with the problem, as the mechanism for
calling it relies on the file being open and at the first record.  Thus,
the main reason for <code class="code">BEGINFILE</code> is to give you a &ldquo;hook&rdquo; to catch
files that cannot be processed.  <code class="code">ENDFILE</code> exists for symmetry,
and because it provides an easy way to do per-file cleanup processing.
For more information, refer to <a class="ref" href="#BEGINFILE_002fENDFILE">The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a>.
</p></td></tr></table>

<hr>
</div>
<div class="subsection-level-extent" id="Rewind-Function">
<div class="nav-panel">
<p>
Next: <a href="#File-Checking" accesskey="n" rel="next">Checking for Readable Data files</a>, Previous: <a href="#Filetrans-Function" accesskey="p" rel="prev">Noting Data file Boundaries</a>, Up: <a href="#Data-File-Management" accesskey="u" rel="up">Data file Management</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Rereading-the-Current-File"><span>10.3.2 Rereading the Current File<a class="copiable-link" href="#Rereading-the-Current-File"> &para;</a></span></h4>

<a class="index-entry-id" id="index-files-reading"></a>
<p>Another request for a new built-in function was for a
function that would make it possible to reread the current file.
The requesting user didn&rsquo;t want to have to use <code class="code">getline</code>
(see <a class="pxref" href="#Getline">Explicit Input with <code class="code">getline</code></a>)
inside a loop.
</p>
<p>However, as long as you are not in the <code class="code">END</code> rule, it is
quite easy to arrange to immediately close the current input file
and then start over with it from the top.
For lack of a better name, we&rsquo;ll call the function <code class="code">rewind()</code>:
</p>
<a class="index-entry-id" id="index-rewind_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-rewind_0028_0029"></a>
<div class="example">
<pre class="example-preformatted"># rewind.awk --- rewind the current file and start over

function rewind(    i)
{
    # shift remaining arguments up
    for (i = ARGC; i &gt; ARGIND; i--)
        ARGV[i] = ARGV[i-1]

    # make sure gawk knows to keep going
    ARGC++

    # make current file next to get done
    ARGV[ARGIND+1] = FILENAME

    # do it
    nextfile
}
</pre></div>

<p>The <code class="code">rewind()</code> function relies on the <code class="code">ARGIND</code> variable
(see <a class="pxref" href="#Auto_002dset">Built-in Variables That Convey Information</a>), which is specific to <code class="command">gawk</code>.  It also
relies on the <code class="code">nextfile</code> keyword (see <a class="pxref" href="#Nextfile-Statement">The <code class="code">nextfile</code> Statement</a>).
Because of this, you should not call it from an <code class="code">ENDFILE</code> rule.
(This isn&rsquo;t necessary anyway, because <code class="command">gawk</code> goes to the next
file as soon as an <code class="code">ENDFILE</code> rule finishes!)
</p>
<p>You need to be careful calling <code class="code">rewind()</code>.  You can end up
causing infinite recursion if you don&rsquo;t pay attention. Here is an
example use:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">cat data</kbd>
-| a
-| b
-| c
-| d
-| e

$ cat <kbd class="kbd">test.awk</kbd>
-| FNR == 3 &amp;&amp; ! rewound {
-|    rewound = 1
-|    rewind()
-| }
-|
-| { print FILENAME, FNR, $0 }

$ <kbd class="kbd">gawk -f rewind.awk -f test.awk data </kbd>
-| data 1 a
-| data 2 b
-| data 1 a
-| data 2 b
-| data 3 c
</pre><div class="group"><pre class="example-preformatted">-| data 4 d
-| data 5 e
</pre></div></div>

<hr>
</div>
<div class="subsection-level-extent" id="File-Checking">
<div class="nav-panel">
<p>
Next: <a href="#Empty-Files" accesskey="n" rel="next">Checking for Zero-Length Files</a>, Previous: <a href="#Rewind-Function" accesskey="p" rel="prev">Rereading the Current File</a>, Up: <a href="#Data-File-Management" accesskey="u" rel="up">Data file Management</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Checking-for-Readable-Data-files"><span>10.3.3 Checking for Readable Data files<a class="copiable-link" href="#Checking-for-Readable-Data-files"> &para;</a></span></h4>

<a class="index-entry-id" id="index-troubleshooting-readable-data-files"></a>
<a class="index-entry-id" id="index-readable-data-files_002c-checking"></a>
<a class="index-entry-id" id="index-files-skipping"></a>
<p>Normally, if you give <code class="command">awk</code> a data file that isn&rsquo;t readable,
it stops with a fatal error.  There are times when you might want to
just ignore such files and keep going.<a class="footnote" id="DOCF74" href="#FOOT74"><sup>74</sup></a> You can do this by prepending
the following program to your <code class="command">awk</code> program:
</p>
<a class="index-entry-id" id="index-readable_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># readable.awk --- library file to skip over unreadable files

BEGIN {
    for (i = 1; i &lt; ARGC; i++) {
        if (ARGV[i] ~ /^[a-zA-Z_][a-zA-Z0-9_]*=.*/ \
            || ARGV[i] == &quot;-&quot; || ARGV[i] == &quot;/dev/stdin&quot;)
            continue    # assignment or standard input
        else if ((getline junk &lt; ARGV[i]) &lt; 0) # unreadable
            delete ARGV[i]
        else
            close(ARGV[i])
    }
}
</pre></div>

<a class="index-entry-id" id="index-troubleshooting-getline-command"></a>
<p>This works, because the <code class="code">getline</code> won&rsquo;t be fatal.
Removing the element from <code class="code">ARGV</code> with <code class="code">delete</code>
skips the file (because it&rsquo;s no longer in the list).
See also <a class="ref" href="#ARGC-and-ARGV">Using <code class="code">ARGC</code> and <code class="code">ARGV</code></a>.
</p>
<p>Because <code class="command">awk</code> variable names only allow the English letters,
the regular expression check purposely does not use character classes
such as &lsquo;<samp class="samp">[:alpha:]</samp>&rsquo; and &lsquo;<samp class="samp">[:alnum:]</samp>&rsquo;
(see <a class="pxref" href="#Bracket-Expressions">Using Bracket Expressions</a>).
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Empty-Files">
<div class="nav-panel">
<p>
Next: <a href="#Ignoring-Assigns" accesskey="n" rel="next">Treating Assignments as File names</a>, Previous: <a href="#File-Checking" accesskey="p" rel="prev">Checking for Readable Data files</a>, Up: <a href="#Data-File-Management" accesskey="u" rel="up">Data file Management</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Checking-for-Zero_002dLength-Files"><span>10.3.4 Checking for Zero-Length Files<a class="copiable-link" href="#Checking-for-Zero_002dLength-Files"> &para;</a></span></h4>

<p>All known <code class="command">awk</code> implementations silently skip over zero-length files.
This is a by-product of <code class="command">awk</code>&rsquo;s implicit
read-a-record-and-match-against-the-rules loop: when <code class="command">awk</code>
tries to read a record from an empty file, it immediately receives an
end-of-file indication, closes the file, and proceeds on to the next
command-line data file, <em class="emph">without</em> executing any user-level
<code class="command">awk</code> program code.
</p>
<p>Using <code class="command">gawk</code>&rsquo;s <code class="code">ARGIND</code> variable
(see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>), it is possible to detect when an empty
data file has been skipped.  Similar to the library file presented
in <a class="ref" href="#Filetrans-Function">Noting Data file Boundaries</a>, the following library file calls a function named
<code class="code">zerofile()</code> that the user must provide.  The arguments passed are
the file name and the position in <code class="code">ARGV</code> where it was found:
</p>
<a class="index-entry-id" id="index-zerofile_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># zerofile.awk --- library file to process empty input files

BEGIN { Argind = 0 }

ARGIND &gt; Argind + 1 {
    for (Argind++; Argind &lt; ARGIND; Argind++)
        zerofile(ARGV[Argind], Argind)
}

ARGIND != Argind { Argind = ARGIND }

END {
    if (ARGIND &gt; Argind)
        for (Argind++; Argind &lt;= ARGIND; Argind++)
            zerofile(ARGV[Argind], Argind)
}
</pre></div>

<p>The user-level variable <code class="code">Argind</code> allows the <code class="command">awk</code> program
to track its progress through <code class="code">ARGV</code>.  Whenever the program detects
that <code class="code">ARGIND</code> is greater than &lsquo;<samp class="samp">Argind + 1</samp>&rsquo;, it means that one or
more empty files were skipped.  The action then calls <code class="code">zerofile()</code> for
each such file, incrementing <code class="code">Argind</code> along the way.
</p>
<p>The &lsquo;<samp class="samp">Argind != ARGIND</samp>&rsquo; rule simply keeps <code class="code">Argind</code> up to date
in the normal case.
</p>
<p>Finally, the <code class="code">END</code> rule catches the case of any empty files at
the end of the command-line arguments.  Note that the test in the
condition of the <code class="code">for</code> loop uses the &lsquo;<samp class="samp">&lt;=</samp>&rsquo; operator,
not &lsquo;<samp class="samp">&lt;</samp>&rsquo;.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Ignoring-Assigns">
<div class="nav-panel">
<p>
Previous: <a href="#Empty-Files" accesskey="p" rel="prev">Checking for Zero-Length Files</a>, Up: <a href="#Data-File-Management" accesskey="u" rel="up">Data file Management</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Treating-Assignments-as-File-names"><span>10.3.5 Treating Assignments as File names<a class="copiable-link" href="#Treating-Assignments-as-File-names"> &para;</a></span></h4>

<a class="index-entry-id" id="index-assignments-as-file-names"></a>
<a class="index-entry-id" id="index-file-names-assignments-as"></a>
<p>Occasionally, you might not want <code class="command">awk</code> to process command-line
variable assignments
(see <a class="pxref" href="#Assignment-Options">Assigning Variables on the Command Line</a>).
In particular, if you have a file name that contains an &lsquo;<samp class="samp">=</samp>&rsquo; character,
<code class="command">awk</code> treats the file name as an assignment and does not process it.
</p>
<p>Some users have suggested an additional command-line option for <code class="command">gawk</code>
to disable command-line assignments.  However, some simple programming with
a library file does the trick:
</p>
<a class="index-entry-id" id="index-noassign_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># noassign.awk --- library file to avoid the need for a
# special option that disables command-line assignments

function disable_assigns(argc, argv,    i)
{
    for (i = 1; i &lt; argc; i++)
        if (argv[i] ~ /^[a-zA-Z_][a-zA-Z0-9_]*=.*/)
            argv[i] = (&quot;./&quot; argv[i])
}

BEGIN {
    if (No_command_assign)
        disable_assigns(ARGC, ARGV)
}
</pre></div>

<p>You then run your program this way:
</p>
<div class="example">
<pre class="example-preformatted">awk -v No_command_assign=1 -f noassign.awk -f yourprog.awk *
</pre></div>

<p>The function works by looping through the arguments.
It prepends &lsquo;<samp class="samp">./</samp>&rsquo; to
any argument that matches the form
of a variable assignment, turning that argument into a file name.
</p>
<p>The use of <code class="code">No_command_assign</code> allows you to disable command-line
assignments at invocation time, by giving the variable a true value.
When not set, it is initially zero (i.e., false), so the command-line arguments
are left alone.
</p>
<hr>
</div>
</div>
<div class="section-level-extent" id="Getopt-Function">
<div class="nav-panel">
<p>
Next: <a href="#Passwd-Functions" accesskey="n" rel="next">Reading the User Database</a>, Previous: <a href="#Data-File-Management" accesskey="p" rel="prev">Data file Management</a>, Up: <a href="#Library-Functions" accesskey="u" rel="up">A Library of <code class="command">awk</code> Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Processing-Command_002dLine-Options"><span>10.4 Processing Command-Line Options<a class="copiable-link" href="#Processing-Command_002dLine-Options"> &para;</a></span></h3>

<a class="index-entry-id" id="index-libraries-of-awk-functions-command_002dline-options"></a>
<a class="index-entry-id" id="index-functions-library-command_002dline-options"></a>
<a class="index-entry-id" id="index-command-line-options-processing"></a>
<a class="index-entry-id" id="index-options-command_002dline-processing"></a>
<a class="index-entry-id" id="index-functions-library-C-library"></a>
<a class="index-entry-id" id="index-arguments-processing"></a>
<p>Most utilities on POSIX-compatible systems take options on
the command line that can be used to change the way a program behaves.
<code class="command">awk</code> is an example of such a program
(see <a class="pxref" href="#Options">Command-Line Options</a>).
Often, options take <em class="dfn">arguments</em> (i.e., data that the program needs to
correctly obey the command-line option).  For example, <code class="command">awk</code>&rsquo;s
<samp class="option">-F</samp> option requires a string to use as the field separator.
The first occurrence on the command line of either <samp class="option">--</samp> or a
string that does not begin with &lsquo;<samp class="samp">-</samp>&rsquo; ends the options.
</p>
<a class="index-entry-id" id="index-getopt_0028_0029-function-_0028C-library_0029"></a>
<a class="index-entry-id" id="index-C-library-functions-getopt_0028_0029"></a>
<p>Modern Unix systems provide a C function named <code class="code">getopt()</code> for processing
command-line arguments.  The programmer provides a string describing the
one-letter options. If an option requires an argument, it is followed in the
string with a colon.  <code class="code">getopt()</code> is also passed the
count and values of the command-line arguments and is called in a loop.
<code class="code">getopt()</code> processes the command-line arguments for option letters.
Each time around the loop, it returns a single character representing the
next option letter that it finds, or &lsquo;<samp class="samp">?</samp>&rsquo; if it finds an invalid option.
When it returns &minus;1, there are no options left on the command line.
</p>
<p>When using <code class="code">getopt()</code>, options that do not take arguments can be
grouped together.  Furthermore, options that take arguments require that the
argument be present.  The argument can immediately follow the option letter,
or it can be a separate command-line argument.
</p>
<p>Given a hypothetical program that takes
three command-line options, <samp class="option">-a</samp>, <samp class="option">-b</samp>, and <samp class="option">-c</samp>, where
<samp class="option">-b</samp> requires an argument, all of the following are valid ways of
invoking the program:
</p>
<div class="example">
<pre class="example-preformatted">prog -a -b foo -c data1 data2 data3
prog -ac -bfoo -- data1 data2 data3
prog -acbfoo data1 data2 data3
</pre></div>

<p>Notice that when the argument is grouped with its option, the rest of
the argument is considered to be the option&rsquo;s argument.
In this example, <samp class="option">-acbfoo</samp> indicates that all of the
<samp class="option">-a</samp>, <samp class="option">-b</samp>, and <samp class="option">-c</samp> options were supplied,
and that &lsquo;<samp class="samp">foo</samp>&rsquo; is the argument to the <samp class="option">-b</samp> option.
</p>
<p><code class="code">getopt()</code> provides four external variables that the programmer can use:
</p>
<dl class="table">
<dt><code class="code">optind</code></dt>
<dd><p>The index in the argument value array (<code class="code">argv</code>) where the first
nonoption command-line argument can be found.
</p>
</dd>
<dt><code class="code">optarg</code></dt>
<dd><p>The string value of the argument to an option.
</p>
</dd>
<dt><code class="code">opterr</code></dt>
<dd><p>Usually <code class="code">getopt()</code> prints an error message when it finds an invalid
option.  Setting <code class="code">opterr</code> to zero disables this feature.  (An
application might want to print its own error message.)
</p>
</dd>
<dt><code class="code">optopt</code></dt>
<dd><p>The letter representing the command-line option.
</p></dd>
</dl>

<p>The following C fragment shows how <code class="code">getopt()</code> might process command-line
arguments for <code class="command">awk</code>:
</p>
<div class="example">
<pre class="example-preformatted">int
main(int argc, char *argv[])
{
    ...
    /* print our own message */
    opterr = 0;
    while ((c = getopt(argc, argv, &quot;v:f:F:W:&quot;)) != -1) {
        switch (c) {
        case 'f':    /* file */
            ...
            break;
        case 'F':    /* field separator */
            ...
            break;
        case 'v':    /* variable assignment */
            ...
            break;
        case 'W':    /* extension */
            ...
            break;
        case '?':
        default:
            usage();
            break;
        }
    }
    ...
}
</pre></div>

<p>The GNU project&rsquo;s version of the original Unix utilities popularized
the use of long command line options.  For example, <samp class="option">--help</samp>
in addition to <samp class="option">-h</samp>. Arguments to long options are either provided
as separate command line arguments (&lsquo;<samp class="samp">--source '<var class="var">program-text</var>'</samp>&rsquo;)
or separated from the option with an &lsquo;<samp class="samp">=</samp>&rsquo; sign
(&lsquo;<samp class="samp">--source='<var class="var">program-text</var>'</samp>&rsquo;).
</p>
<p>As a side point, <code class="command">gawk</code> actually uses the GNU <code class="code">getopt_long()</code>
function to process both normal and GNU-style long options
(see <a class="pxref" href="#Options">Command-Line Options</a>).
</p>
<a class="index-entry-id" id="index-Minshall_002c-Greg"></a>
<p>The abstraction provided by <code class="code">getopt()</code> is very useful and is quite
handy in <code class="command">awk</code> programs as well.  Following is an <code class="command">awk</code>
version of <code class="code">getopt()</code> that accepts both short and long options.
(Support for long options was supplied by Greg Minshall. We thank him.)
</p>
<p>This function highlights one of the
greatest weaknesses in <code class="command">awk</code>, which is that it is very poor at
manipulating single characters.  The function needs repeated calls to
<code class="code">substr()</code> in order to access individual characters
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).<a class="footnote" id="DOCF75" href="#FOOT75"><sup>75</sup></a>
</p>
<p>The discussion that follows walks through the code a bit at a time:
</p>
<a class="index-entry-id" id="index-getopt_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-getopt_0028_0029"></a>
<div class="example">
<pre class="example-preformatted"># getopt.awk --- Do C library getopt(3) function in awk
#                Also supports long options.

# External variables:
#    Optind -- index in ARGV of first nonoption argument
#    Optarg -- string value of argument to current option
#    Opterr -- if nonzero, print our own diagnostic
#    Optopt -- current option letter

# Returns:
#    -1     at end of options
#    &quot;?&quot;    for unrecognized option
#    &lt;s&gt;    a string representing the current option

# Private Data:
#    _opti  -- index in multiflag option, e.g., -abc
</pre></div>

<p>The function starts out with comments presenting
a list of the global variables it uses,
what the return values are, what they mean, and any global variables that
are &ldquo;private&rdquo; to this library function.  Such documentation is essential
for any program, and particularly for library functions.
</p>
<p>The <code class="code">getopt()</code> function first checks that it was indeed called with
a string of options (the <code class="code">options</code> parameter).  If both
<code class="code">options</code> and <code class="code">longoptions</code> have a zero length,
<code class="code">getopt()</code> immediately returns &minus;1:
</p>
<a class="index-entry-id" id="index-getopt_0028_0029-user_002ddefined-function-1"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-getopt_0028_0029-1"></a>
<div class="example">
<pre class="example-preformatted">function getopt(argc, argv, options, longopts,    thisopt, i, j)
{
    if (length(options) == 0 &amp;&amp; length(longopts) == 0)
        return -1                # no options given

</pre><div class="group"><pre class="example-preformatted">    if (argv[Optind] == &quot;--&quot;) {  # all done
        Optind++
        _opti = 0
        return -1
</pre></div><pre class="example-preformatted">    } else if (argv[Optind] !~ /^-[^:[:space:]]/) {
        _opti = 0
        return -1
    }
</pre></div>

<p>The next thing to check for is the end of the options.  A <samp class="option">--</samp>
ends the command-line options, as does any command-line argument that
does not begin with a &lsquo;<samp class="samp">-</samp>&rsquo; (unless it is an argument to a preceding
option).  <code class="code">Optind</code> steps through
the array of command-line arguments; it retains its value across calls
to <code class="code">getopt()</code>, because it is a global variable.
</p>
<p>The regular expression <code class="code">/^-[^:[:space:]/<!-- /@w --></code>
checks for a &lsquo;<samp class="samp">-</samp>&rsquo; followed by anything
that is not whitespace and not a colon.
If the current command-line argument does not match this pattern,
it is not an option, and it ends option processing.
Now, we
check to see if we are processing a short (single letter) option, or a
long option (indicated by two dashes, e.g., &lsquo;<samp class="samp">--filename</samp>&rsquo;).  If it
is a short option, we continue on:
</p>
<div class="example">
<pre class="example-preformatted">    if (argv[Optind] !~ /^--/) {        # if this is a short option
        if (_opti == 0)
            _opti = 2
        thisopt = substr(argv[Optind], _opti, 1)
        Optopt = thisopt
        i = index(options, thisopt)
        if (i == 0) {
            if (Opterr)
                printf(&quot;%c -- invalid option\n&quot;, thisopt) &gt; &quot;/dev/stderr&quot;
            if (_opti &gt;= length(argv[Optind])) {
                Optind++
                _opti = 0
            } else
                _opti++
            return &quot;?&quot;
        }
</pre></div>

<p>The <code class="code">_opti</code> variable tracks the position in the current command-line
argument (<code class="code">argv[Optind]</code>).  If multiple options are
grouped together with one &lsquo;<samp class="samp">-</samp>&rsquo; (e.g., <samp class="option">-abx</samp>), it is necessary
to return them to the user one at a time.
</p>
<p>If <code class="code">_opti</code> is equal to zero, it is set to two, which is the index in
the string of the next character to look at (we skip the &lsquo;<samp class="samp">-</samp>&rsquo;, which
is at position one).  The variable <code class="code">thisopt</code> holds the character,
obtained with <code class="code">substr()</code>.  It is saved in <code class="code">Optopt</code> for the main
program to use.
</p>
<p>If <code class="code">thisopt</code> is not in the <code class="code">options</code> string, then it is an
invalid option.  If <code class="code">Opterr</code> is nonzero, <code class="code">getopt()</code> prints an error
message on the standard error that is similar to the message from the C
version of <code class="code">getopt()</code>.
</p>
<p>Because the option is invalid, it is necessary to skip it and move on to the
next option character.  If <code class="code">_opti</code> is greater than or equal to the
length of the current command-line argument, it is necessary to move on
to the next argument, so <code class="code">Optind</code> is incremented and <code class="code">_opti</code> is reset
to zero. Otherwise, <code class="code">Optind</code> is left alone and <code class="code">_opti</code> is merely
incremented.
</p>
<p>In any case, because the option is invalid, <code class="code">getopt()</code> returns <code class="code">&quot;?&quot;</code>.
The main program can examine <code class="code">Optopt</code> if it needs to know what the
invalid option letter actually is. Continuing on:
</p>
<div class="example">
<pre class="example-preformatted">        if (substr(options, i + 1, 1) == &quot;:&quot;) {
            # get option argument
            if (length(substr(argv[Optind], _opti + 1)) &gt; 0)
                Optarg = substr(argv[Optind], _opti + 1)
            else
                Optarg = argv[++Optind]
            _opti = 0
        } else
            Optarg = &quot;&quot;
</pre></div>

<p>If the option requires an argument, the option letter is followed by a colon
in the <code class="code">options</code> string.  If there are remaining characters in the
current command-line argument (<code class="code">argv[Optind]</code>), then the rest of that
string is assigned to <code class="code">Optarg</code>.  Otherwise, the next command-line
argument is used (&lsquo;<samp class="samp">-xFOO</samp>&rsquo; versus &lsquo;<samp class="samp">-x&nbsp;FOO<!-- /@w --></samp>&rsquo;). In either case,
<code class="code">_opti</code> is reset to zero, because there are no more characters left to
examine in the current command-line argument. Continuing:
</p>
<div class="example">
<pre class="example-preformatted">        if (_opti == 0 || _opti &gt;= length(argv[Optind])) {
            Optind++
            _opti = 0
        } else
            _opti++
        return thisopt
</pre></div>

<p>Finally, for a short option, if <code class="code">_opti</code> is either zero or greater
than the length of the current command-line argument, it means this
element in <code class="code">argv</code> is through being processed, so <code class="code">Optind</code> is
incremented to point to the next element in <code class="code">argv</code>.  If neither
condition is true, then only <code class="code">_opti</code> is incremented, so that the
next option letter can be processed on the next call to <code class="code">getopt()</code>.
</p>
<p>On the other hand, if the earlier test found that this was a long
option, we take a different branch:
</p>
<div class="example">
<pre class="example-preformatted">    } else {
        j = index(argv[Optind], &quot;=&quot;)
        if (j &gt; 0)
            thisopt = substr(argv[Optind], 3, j - 3)
        else
            thisopt = substr(argv[Optind], 3)
        Optopt = thisopt
</pre></div>

<p>First, we search this option for a possible embedded equal sign, as the
specification of long options allows an argument to an option
&lsquo;<samp class="samp">--someopt</samp>&rsquo; to be specified as &lsquo;<samp class="samp">--someopt=answer</samp>&rsquo; as well as
&lsquo;<samp class="samp">--someopt&nbsp;answer<!-- /@w --></samp>&rsquo;.
</p>
<div class="example">
<pre class="example-preformatted">        i = match(longopts, &quot;(^|,)&quot; thisopt &quot;($|[,:])&quot;)
        if (i == 0) {
            if (Opterr)
                 printf(&quot;%s -- invalid option\n&quot;, thisopt) &gt; &quot;/dev/stderr&quot;
            Optind++
            return &quot;?&quot;
        }
</pre></div>

<p>Next, we try to find the current option in <code class="code">longopts</code>.  The regular
expression given to <code class="code">match()</code>, <code class="code">&quot;(^|,)&quot;&nbsp;thisopt&nbsp;&quot;($|[,:])&quot;<!-- /@w --></code>,
matches this option at the beginning of <code class="code">longopts</code>, or at the
beginning of a subsequent long option (the previous long option would
have been terminated by a comma), and, in any case, either at the end of
the <code class="code">longopts</code> string (&lsquo;<samp class="samp">$</samp>&rsquo;), or followed by a comma
(separating this option from a subsequent option) or a colon (indicating
this long option takes an argument (&lsquo;<samp class="samp">[,:]<!-- /@w --></samp>&rsquo;).
</p>
<p>Using this regular expression, we check to see if the current option
might possibly be in <code class="code">longopts</code> (if <code class="code">longopts</code> is not
specified, this test will also fail).  In case of an error, we possibly
print an error message and then return <code class="code">&quot;?&quot;</code>. Continuing on:
</p>
<div class="example">
<pre class="example-preformatted">        if (substr(longopts, i-1+RLENGTH, 1) == &quot;:&quot;) {
            if (j &gt; 0)
                Optarg = substr(argv[Optind], j + 1)
            else
                Optarg = argv[++Optind]
        } else
            Optarg = &quot;&quot;
</pre></div>

<p>We now check to see if this option takes an argument and, if so, we set
<code class="code">Optarg</code> to the value of that argument (either a value after an
equal sign specified on the command line, immediately adjoining the long
option string, or as the next argument on the command line).
</p>
<div class="example">
<pre class="example-preformatted">        Optind++
        return thisopt
    }
}
</pre></div>

<p>We increase <code class="code">Optind</code> (which we already increased once if a required
argument was separated from its option by an equal sign), and return the
long option (minus its leading dashes).
</p>
<p>The <code class="code">BEGIN</code> rule initializes both <code class="code">Opterr</code> and <code class="code">Optind</code> to one.
<code class="code">Opterr</code> is set to one, because the default behavior is for <code class="code">getopt()</code>
to print a diagnostic message upon seeing an invalid option.  <code class="code">Optind</code>
is set to one, because there&rsquo;s no reason to look at the program name, which is
in <code class="code">ARGV[0]</code>:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    Opterr = 1    # default is to diagnose
    Optind = 1    # skip ARGV[0]

    # test program
    if (_getopt_test) {
        _myshortopts = &quot;ab:cd&quot;
        _mylongopts = &quot;longa,longb:,otherc,otherd&quot;

        while ((_go_c = getopt(ARGC, ARGV, _myshortopts, _mylongopts)) != -1)
            printf(&quot;c = &lt;%s&gt;, Optarg = &lt;%s&gt;\n&quot;, _go_c, Optarg)
        printf(&quot;non-option arguments:\n&quot;)
        for (; Optind &lt; ARGC; Optind++)
            printf(&quot;\tARGV[%d] = &lt;%s&gt;\n&quot;, Optind, ARGV[Optind])
    }
}
</pre></div>

<p>The rest of the <code class="code">BEGIN</code> rule is a simple test program.  Here are the
results of some sample runs of the test program:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">awk -f getopt.awk -v _getopt_test=1 -- -a -cbARG bax -x</kbd>
-| c = &lt;a&gt;, Optarg = &lt;&gt;
-| c = &lt;c&gt;, Optarg = &lt;&gt;
-| c = &lt;b&gt;, Optarg = &lt;ARG&gt;
-| non-option arguments:
-|         ARGV[3] = &lt;bax&gt;
-|         ARGV[4] = &lt;-x&gt;

$ <kbd class="kbd">awk -f getopt.awk -v _getopt_test=1 -- -a -x -- xyz abc</kbd>
-| c = &lt;a&gt;, Optarg = &lt;&gt;
error&rarr; x -- invalid option
-| c = &lt;?&gt;, Optarg = &lt;&gt;
-| non-option arguments:
-|         ARGV[4] = &lt;xyz&gt;
-|         ARGV[5] = &lt;abc&gt;

$ <kbd class="kbd">awk -f getopt.awk -v _getopt_test=1 -- -a \</kbd>
&gt; <kbd class="kbd">--longa -b xx --longb=foo=bar --otherd --otherc arg1 arg2</kbd>
-| c = &lt;a&gt;, Optarg = &lt;&gt;
-| c = &lt;longa&gt;, Optarg = &lt;&gt;
-| c = &lt;b&gt;, Optarg = &lt;xx&gt;
-| c = &lt;longb&gt;, Optarg = &lt;foo=bar&gt;
-| c = &lt;otherd&gt;, Optarg = &lt;&gt;
-| c = &lt;otherc&gt;, Optarg = &lt;&gt;
-| non-option arguments:
-|        ARGV[8] = &lt;arg1&gt;
-|        ARGV[9] = &lt;arg2&gt;
</pre></div>

<p>In all the runs, the first <samp class="option">--</samp> terminates the arguments to
<code class="command">awk</code>, so that it does not try to interpret the <samp class="option">-a</samp>,
etc., as its own options.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> After <code class="code">getopt()</code> is through,
user-level code must clear out all the elements of <code class="code">ARGV</code> from 1
to <code class="code">Optind</code>, so that <code class="command">awk</code> does not try to process the
command-line options as file names.
</p></blockquote>

<p>Using &lsquo;<samp class="samp">#!</samp>&rsquo; with the <samp class="option">-E</samp> option may help avoid
conflicts between your program&rsquo;s options and <code class="command">gawk</code>&rsquo;s options,
as <samp class="option">-E</samp> causes <code class="command">gawk</code> to abandon processing of
further options
(see <a class="pxref" href="#Executable-Scripts">Executable <code class="command">awk</code> Programs</a> and
see <a class="pxref" href="#Options">Command-Line Options</a>).
</p>
<p>Several of the sample programs presented in
<a class="ref" href="#Sample-Programs">Practical <code class="command">awk</code> Programs</a>,
use <code class="code">getopt()</code> to process their arguments.
</p>
<hr>
</div>
<div class="section-level-extent" id="Passwd-Functions">
<div class="nav-panel">
<p>
Next: <a href="#Group-Functions" accesskey="n" rel="next">Reading the Group Database</a>, Previous: <a href="#Getopt-Function" accesskey="p" rel="prev">Processing Command-Line Options</a>, Up: <a href="#Library-Functions" accesskey="u" rel="up">A Library of <code class="command">awk</code> Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Reading-the-User-Database"><span>10.5 Reading the User Database<a class="copiable-link" href="#Reading-the-User-Database"> &para;</a></span></h3>

<a class="index-entry-id" id="index-libraries-of-awk-functions-user-database_002c-reading"></a>
<a class="index-entry-id" id="index-functions-library-user-database_002c-reading"></a>
<a class="index-entry-id" id="index-user-database_002c-reading"></a>
<a class="index-entry-id" id="index-database-users_002c-reading"></a>
<a class="index-entry-id" id="index-PROCINFO-array-2"></a>
<p>The <code class="code">PROCINFO</code> array
(see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>)
provides access to the current user&rsquo;s real and effective user and group ID
numbers, and, if available, the user&rsquo;s supplementary group set.
However, because these are numbers, they do not provide very useful
information to the average user.  There needs to be some way to find the
user information associated with the user and group ID numbers.  This
section presents a suite of functions for retrieving information from the
user database.  See <a class="xref" href="#Group-Functions">Reading the Group Database</a>
for a similar suite that retrieves information from the group database.
</p>
<a class="index-entry-id" id="index-getpwent_0028_0029-function-_0028C-library_0029"></a>
<a class="index-entry-id" id="index-C-library-functions-getpwent_0028_0029"></a>
<a class="index-entry-id" id="index-getpwent_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-getpwent_0028_0029"></a>
<a class="index-entry-id" id="index-users_002c-information-about-retrieving"></a>
<a class="index-entry-id" id="index-login-information"></a>
<a class="index-entry-id" id="index-account-information"></a>
<a class="index-entry-id" id="index-password-file"></a>
<a class="index-entry-id" id="index-files-password"></a>
<p>The POSIX standard does not define the file where user information is
kept.  Instead, it provides the <code class="code">&lt;pwd.h&gt;</code> header file
and several C language subroutines for obtaining user information.
The primary function is <code class="code">getpwent()</code>, for &ldquo;get password entry.&rdquo;
The &ldquo;password&rdquo; comes from the original user database file,
<samp class="file">/etc/passwd</samp>, which stores user information along with the
encrypted passwords (hence the name).
</p>
<a class="index-entry-id" id="index-pwcat-program"></a>
<p>Although an <code class="command">awk</code> program could simply read <samp class="file">/etc/passwd</samp>
directly, this file may not contain complete information about the
system&rsquo;s set of users.<a class="footnote" id="DOCF76" href="#FOOT76"><sup>76</sup></a> To be sure you are able to
produce a readable and complete version of the user database, it is necessary
to write a small C program that calls <code class="code">getpwent()</code>.  <code class="code">getpwent()</code>
is defined as returning a pointer to a <code class="code">struct passwd</code>.  Each time it
is called, it returns the next entry in the database.  When there are
no more entries, it returns <code class="code">NULL</code>, the null pointer.  When this
happens, the C program should call <code class="code">endpwent()</code> to close the database.
Following is <code class="command">pwcat</code>, a C program that &ldquo;cats&rdquo; the password database:
</p>
<div class="example">
<pre class="example-preformatted">/*
 * pwcat.c
 *
 * Generate a printable version of the password database.
 */
#include &lt;stdio.h&gt;
#include &lt;pwd.h&gt;

int
main(int argc, char **argv)
{
    struct passwd *p;

    while ((p = getpwent()) != NULL)
        printf(&quot;%s:%s:%ld:%ld:%s:%s:%s\n&quot;,
            p-&gt;pw_name, p-&gt;pw_passwd, (long) p-&gt;pw_uid,
            (long) p-&gt;pw_gid, p-&gt;pw_gecos, p-&gt;pw_dir, p-&gt;pw_shell);

    endpwent();
    return 0;
}
</pre></div>

<p>If you don&rsquo;t understand C, don&rsquo;t worry about it.
The output from <code class="command">pwcat</code> is the user database, in the traditional
<samp class="file">/etc/passwd</samp> format of colon-separated fields.  The fields are:
</p>
<dl class="table">
<dt>Login name</dt>
<dd><p>The user&rsquo;s login name.
</p>
</dd>
<dt>Encrypted password</dt>
<dd><p>The user&rsquo;s encrypted password.  This may not be available on some systems.
</p>
</dd>
<dt>User-ID</dt>
<dd><p>The user&rsquo;s numeric user ID number.
(On some systems, it&rsquo;s a C <code class="code">long</code>, and not an <code class="code">int</code>.  Thus,
we cast it to <code class="code">long</code> for all cases.)
</p>
</dd>
<dt>Group-ID</dt>
<dd><p>The user&rsquo;s numeric group ID number.
(Similar comments about <code class="code">long</code> versus <code class="code">int</code> apply here.)
</p>
</dd>
<dt>Full name</dt>
<dd><p>The user&rsquo;s full name, and perhaps other information associated with the
user.
</p>
</dd>
<dt>Home directory</dt>
<dd><p>The user&rsquo;s login (or &ldquo;home&rdquo;) directory (familiar to shell programmers as
<code class="code">$HOME</code>).
</p>
</dd>
<dt>Login shell</dt>
<dd><p>The program that is run when the user logs in.  This is usually a
shell, such as Bash.
</p></dd>
</dl>

<p>A few lines representative of <code class="command">pwcat</code>&rsquo;s output are as follows:
</p>
<a class="index-entry-id" id="index-Jacobs_002c-Andrew"></a>
<a class="index-entry-id" id="index-Robbins-Arnold-2"></a>
<a class="index-entry-id" id="index-Robbins-Miriam-2"></a>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">pwcat</kbd>
-| root:x:0:1:Operator:/:/bin/sh
-| nobody:*:65534:65534::/:
-| daemon:*:1:1::/:
-| sys:*:2:2::/:/bin/csh
-| bin:*:3:3::/bin:
-| arnold:xyzzy:2076:10:Arnold Robbins:/home/arnold:/bin/sh
-| miriam:yxaay:112:10:Miriam Robbins:/home/miriam:/bin/sh
-| andy:abcca2:113:10:Andy Jacobs:/home/andy:/bin/sh
...
</pre></div>

<p>With that introduction, following is a group of functions for getting user
information.  There are several functions here, corresponding to the C
functions of the same names:
</p>
<a class="index-entry-id" id="index-_005fpw_005finit_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-_005fpw_005finit_0028_0029"></a>
<div class="example">
<pre class="example-preformatted"># passwd.awk --- access password file information

BEGIN {
    # tailor this to suit your system
    _pw_awklib = &quot;/usr/local/libexec/awk/&quot;
}

function _pw_init(    oldfs, oldrs, olddol0, pwcat, using_fw, using_fpat)
{
    if (_pw_inited)
        return

    oldfs = FS
    oldrs = RS
    olddol0 = $0
    using_fw = (PROCINFO[&quot;FS&quot;] == &quot;FIELDWIDTHS&quot;)
    using_fpat = (PROCINFO[&quot;FS&quot;] == &quot;FPAT&quot;)
    FS = &quot;:&quot;
    RS = &quot;\n&quot;

    pwcat = _pw_awklib &quot;pwcat&quot;
    while ((pwcat | getline) &gt; 0) {
        _pw_byname[$1] = $0
        _pw_byuid[$3] = $0
        _pw_bycount[++_pw_total] = $0
    }
    close(pwcat)
    _pw_count = 0
    _pw_inited = 1
    FS = oldfs
    if (using_fw)
        FIELDWIDTHS = FIELDWIDTHS
    else if (using_fpat)
        FPAT = FPAT
    RS = oldrs
    $0 = olddol0
}
</pre></div>

<a class="index-entry-id" id="index-BEGIN-pattern-pwcat-program"></a>
<p>The <code class="code">BEGIN</code> rule sets a private variable to the directory where
<code class="command">pwcat</code> is stored.  Because it is used to help out an <code class="command">awk</code> library
routine, we have chosen to put it in <samp class="file">/usr/local/libexec/awk</samp>;
however, you might want it to be in a different directory on your system.
</p>
<p>The function <code class="code">_pw_init()</code> fills three copies of the user information
into three associative arrays.  The arrays are indexed by username
(<code class="code">_pw_byname</code>), by user ID number (<code class="code">_pw_byuid</code>), and by order of
occurrence (<code class="code">_pw_bycount</code>).
The variable <code class="code">_pw_inited</code> is used for efficiency, as <code class="code">_pw_init()</code>
needs to be called only once.
</p>
<a class="index-entry-id" id="index-PROCINFO-array-testing-the-field-splitting"></a>
<a class="index-entry-id" id="index-getline-command-_005fpw_005finit_0028_0029-function"></a>
<p>Because this function uses <code class="code">getline</code> to read information from
<code class="command">pwcat</code>, it first saves the values of <code class="code">FS</code>, <code class="code">RS</code>, and <code class="code">$0</code>.
It notes in the variable <code class="code">using_fw</code> whether field splitting
with <code class="code">FIELDWIDTHS</code> is in effect or not.
Doing so is necessary, as these functions could be called
from anywhere within a user&rsquo;s program, and the user may have his
or her own way of splitting records and fields.
This makes it possible to restore the correct
field-splitting mechanism later.  The test can only be true for
<code class="command">gawk</code>.  It is false if using <code class="code">FS</code> or <code class="code">FPAT</code>,
or on some other <code class="command">awk</code> implementation.
</p>
<p>The code that checks for using <code class="code">FPAT</code>, using <code class="code">using_fpat</code>
and <code class="code">PROCINFO[&quot;FS&quot;]</code>, is similar.
</p>
<p>The main part of the function uses a loop to read database lines, split
the lines into fields, and then store the lines into each array as necessary.
When the loop is done, <code class="code">_pw_init()<!-- /@w --></code> cleans up by closing the pipeline,
setting <code class="code">_pw_inited<!-- /@w --></code> to one, and restoring <code class="code">FS</code>
(and <code class="code">FIELDWIDTHS</code> or <code class="code">FPAT</code>
if necessary), <code class="code">RS</code>, and <code class="code">$0</code>.
The use of <code class="code">_pw_count<!-- /@w --></code> is explained shortly.
</p>
<a class="index-entry-id" id="index-getpwnam_0028_0029-function-_0028C-library_0029"></a>
<a class="index-entry-id" id="index-C-library-functions-getpwnam_0028_0029"></a>
<p>The <code class="code">getpwnam()</code> function takes a username as a string argument. If that
user is in the database, it returns the appropriate line. Otherwise, it
relies on the array reference to a nonexistent
element to create the element with the null string as its value:
</p>
<a class="index-entry-id" id="index-getpwnam_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-getpwnam_0028_0029"></a>
<div class="example">
<div class="group"><pre class="example-preformatted">function getpwnam(name)
{
    _pw_init()
    return _pw_byname[name]
}
</pre></div></div>

<a class="index-entry-id" id="index-getpwuid_0028_0029-function-_0028C-library_0029"></a>
<a class="index-entry-id" id="index-C-library-functions-getpwuid_0028_0029"></a>
<p>Similarly, the <code class="code">getpwuid()</code> function takes a user ID number
argument. If that user number is in the database, it returns the
appropriate line. Otherwise, it returns the null string:
</p>
<a class="index-entry-id" id="index-getpwuid_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-getpwuid_0028_0029"></a>
<div class="example">
<pre class="example-preformatted">function getpwuid(uid)
{
    _pw_init()
    return _pw_byuid[uid]
}
</pre></div>

<a class="index-entry-id" id="index-getpwent_0028_0029-function-_0028C-library_0029-1"></a>
<a class="index-entry-id" id="index-C-library-functions-getpwent_0028_0029-1"></a>
<p>The <code class="code">getpwent()</code> function simply steps through the database, one entry at
a time.  It uses <code class="code">_pw_count</code> to track its current position in the
<code class="code">_pw_bycount</code> array:
</p>
<a class="index-entry-id" id="index-getpwent_0028_0029-user_002ddefined-function-1"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-getpwent_0028_0029-1"></a>
<div class="example">
<pre class="example-preformatted">function getpwent()
{
    _pw_init()
    if (_pw_count &lt; _pw_total)
        return _pw_bycount[++_pw_count]
    return &quot;&quot;
}
</pre></div>

<a class="index-entry-id" id="index-endpwent_0028_0029-function-_0028C-library_0029"></a>
<a class="index-entry-id" id="index-C-library-functions-endpwent_0028_0029"></a>
<p>The <code class="code">endpwent()<!-- /@w --></code> function resets <code class="code">_pw_count<!-- /@w --></code> to zero, so that
subsequent calls to <code class="code">getpwent()</code> start over again:
</p>
<a class="index-entry-id" id="index-endpwent_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-endpwent_0028_0029"></a>
<div class="example">
<pre class="example-preformatted">function endpwent()
{
    _pw_count = 0
}
</pre></div>

<p>A conscious design decision in this suite is that each subroutine calls
<code class="code">_pw_init()<!-- /@w --></code> to initialize the database arrays.
The overhead of running
a separate process to generate the user database, and the I/O to scan it,
are only incurred if the user&rsquo;s main program actually calls one of these
functions.  If this library file is loaded along with a user&rsquo;s program, but
none of the routines are ever called, then there is no extra runtime overhead.
(The alternative is move the body of <code class="code">_pw_init()<!-- /@w --></code> into a
<code class="code">BEGIN</code> rule, which always runs <code class="command">pwcat</code>.  This simplifies the
code but runs an extra process that may never be needed.)
</p>
<p>In turn, calling <code class="code">_pw_init()</code> is not too expensive, because the
<code class="code">_pw_inited</code> variable keeps the program from reading the data more than
once.  If you are worried about squeezing every last cycle out of your
<code class="command">awk</code> program, the check of <code class="code">_pw_inited</code> could be moved out of
<code class="code">_pw_init()</code> and duplicated in all the other functions.  In practice,
this is not necessary, as most <code class="command">awk</code> programs are I/O-bound,
and such a change would clutter up the code.
</p>
<p>The <code class="command">id</code> program in <a class="ref" href="#Id-Program">Printing Out User Information</a>
uses these functions.
</p>
<hr>
</div>
<div class="section-level-extent" id="Group-Functions">
<div class="nav-panel">
<p>
Next: <a href="#Walking-Arrays" accesskey="n" rel="next">Traversing Arrays of Arrays</a>, Previous: <a href="#Passwd-Functions" accesskey="p" rel="prev">Reading the User Database</a>, Up: <a href="#Library-Functions" accesskey="u" rel="up">A Library of <code class="command">awk</code> Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Reading-the-Group-Database"><span>10.6 Reading the Group Database<a class="copiable-link" href="#Reading-the-Group-Database"> &para;</a></span></h3>

<a class="index-entry-id" id="index-libraries-of-awk-functions-group-database_002c-reading"></a>
<a class="index-entry-id" id="index-functions-library-group-database_002c-reading"></a>
<a class="index-entry-id" id="index-group-database_002c-reading"></a>
<a class="index-entry-id" id="index-database-group_002c-reading"></a>
<a class="index-entry-id" id="index-PROCINFO-array-group-membership-and"></a>
<a class="index-entry-id" id="index-getgrent_0028_0029-function-_0028C-library_0029"></a>
<a class="index-entry-id" id="index-C-library-functions-getgrent_0028_0029"></a>
<a class="index-entry-id" id="index-getgrent_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-getgrent_0028_0029"></a>
<a class="index-entry-id" id="index-groups_002c-information-about"></a>
<a class="index-entry-id" id="index-account-information-1"></a>
<a class="index-entry-id" id="index-group-file"></a>
<a class="index-entry-id" id="index-files-group"></a>
<p>Much of the discussion presented in
<a class="ref" href="#Passwd-Functions">Reading the User Database</a>
applies to the group database as well.  Although there has traditionally
been a well-known file (<samp class="file">/etc/group</samp>) in a well-known format, the POSIX
standard only provides a set of C library routines
(<code class="code">&lt;grp.h&gt;</code> and <code class="code">getgrent()</code>)
for accessing the information.
Even though this file may exist, it may not have
complete information.  Therefore, as with the user database, it is necessary
to have a small C program that generates the group database as its output.
<code class="command">grcat</code>, a C program that &ldquo;cats&rdquo; the group database,
is as follows:
</p>
<a class="index-entry-id" id="index-grcat-program"></a>
<div class="example">
<pre class="example-preformatted">/*
 * grcat.c
 *
 * Generate a printable version of the group database.
 */
#include &lt;stdio.h&gt;
#include &lt;grp.h&gt;

int
main(int argc, char **argv)
{
    struct group *g;
    int i;

    while ((g = getgrent()) != NULL) {
        printf(&quot;%s:%s:%ld:&quot;, g-&gt;gr_name, g-&gt;gr_passwd,
                                     (long) g-&gt;gr_gid);
        for (i = 0; g-&gt;gr_mem[i] != NULL; i++) {
            printf(&quot;%s&quot;, g-&gt;gr_mem[i]);
</pre><div class="group"><pre class="example-preformatted">            if (g-&gt;gr_mem[i+1] != NULL)
                putchar(',');
        }
</pre></div><pre class="example-preformatted">        putchar('\n');
    }
    endgrent();
    return 0;
}
</pre></div>

<p>Each line in the group database represents one group.  The fields are
separated with colons and represent the following information:
</p>
<dl class="table">
<dt>Group Name</dt>
<dd><p>The group&rsquo;s name.
</p>
</dd>
<dt>Group Password</dt>
<dd><p>The group&rsquo;s encrypted password. In practice, this field is never used;
it is usually empty or set to &lsquo;<samp class="samp">*</samp>&rsquo;.
</p>
</dd>
<dt>Group ID Number</dt>
<dd><p>The group&rsquo;s numeric group ID number;
the association of name to number must be unique within the file.
(On some systems it&rsquo;s a C <code class="code">long</code>, and not an <code class="code">int</code>.  Thus,
we cast it to <code class="code">long</code> for all cases.)
</p>
</dd>
<dt>Group Member List</dt>
<dd><p>A comma-separated list of usernames.  These users are members of the group.
Modern Unix systems allow users to be members of several groups
simultaneously.  If your system does, then there are elements
<code class="code">&quot;group1&quot;</code> through <code class="code">&quot;group<var class="var">N</var>&quot;</code> in <code class="code">PROCINFO</code>
for those group ID numbers.
(Note that <code class="code">PROCINFO</code> is a <code class="command">gawk</code> extension;
see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>.)
</p></dd>
</dl>

<p>Here is what running <code class="command">grcat</code> might produce:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">grcat</kbd>
-| wheel:*:0:arnold
-| nogroup:*:65534:
-| daemon:*:1:
-| kmem:*:2:
-| staff:*:10:arnold,miriam,andy
-| other:*:20:
...
</pre></div>

<p>Here are the functions for obtaining information from the group database.
There are several, modeled after the C library functions of the same names:
</p>
<a class="index-entry-id" id="index-getline-command-_005fgr_005finit_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-_005fgr_005finit_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-_005fgr_005finit_0028_0029"></a>
<div class="example">
<pre class="example-preformatted"># group.awk --- functions for dealing with the group file

BEGIN {
    # Change to suit your system
    _gr_awklib = &quot;/usr/local/libexec/awk/&quot;
}

function _gr_init(    oldfs, oldrs, olddol0, grcat,
                             using_fw, using_fpat, n, a, i)
{
    if (_gr_inited)
        return

    oldfs = FS
    oldrs = RS
    olddol0 = $0
    using_fw = (PROCINFO[&quot;FS&quot;] == &quot;FIELDWIDTHS&quot;)
    using_fpat = (PROCINFO[&quot;FS&quot;] == &quot;FPAT&quot;)
    FS = &quot;:&quot;
    RS = &quot;\n&quot;

    grcat = _gr_awklib &quot;grcat&quot;
    while ((grcat | getline) &gt; 0) {
        if ($1 in _gr_byname)
            _gr_byname[$1] = _gr_byname[$1] &quot;,&quot; $4
        else
            _gr_byname[$1] = $0
        if ($3 in _gr_bygid)
            _gr_bygid[$3] = _gr_bygid[$3] &quot;,&quot; $4
        else
            _gr_bygid[$3] = $0

        n = split($4, a, &quot;[ \t]*,[ \t]*&quot;)
        for (i = 1; i &lt;= n; i++)
            if (a[i] in _gr_groupsbyuser)
                _gr_groupsbyuser[a[i]] = _gr_groupsbyuser[a[i]] &quot; &quot; $1
            else
                _gr_groupsbyuser[a[i]] = $1

        _gr_bycount[++_gr_count] = $0
    }
    close(grcat)
    _gr_count = 0
    _gr_inited++
    FS = oldfs
    if (using_fw)
        FIELDWIDTHS = FIELDWIDTHS
    else if (using_fpat)
        FPAT = FPAT
    RS = oldrs
    $0 = olddol0
}
</pre></div>

<p>The <code class="code">BEGIN</code> rule sets a private variable to the directory where
<code class="command">grcat</code> is stored.  Because it is used to help out an <code class="command">awk</code> library
routine, we have chosen to put it in <samp class="file">/usr/local/libexec/awk</samp>.  You might
want it to be in a different directory on your system.
</p>
<p>These routines follow the same general outline as the user database routines
(see <a class="pxref" href="#Passwd-Functions">Reading the User Database</a>).
The <code class="code">_gr_inited<!-- /@w --></code> variable is used to
ensure that the database is scanned no more than once.
The <code class="code">_gr_init()<!-- /@w --></code> function first saves <code class="code">FS</code>,
<code class="code">RS</code>, and
<code class="code">$0</code>, and then sets <code class="code">FS</code> and <code class="code">RS</code> to the correct values for
scanning the group information.
It also takes care to note whether <code class="code">FIELDWIDTHS</code> or <code class="code">FPAT</code>
is being used, and to restore the appropriate field-splitting mechanism.
</p>
<p>The group information is stored in several associative arrays.
The arrays are indexed by group name (<code class="code">_gr_byname<!-- /@w --></code>), by group ID number
(<code class="code">_gr_bygid<!-- /@w --></code>), and by position in the database (<code class="code">_gr_bycount<!-- /@w --></code>).
There is an additional array indexed by username (<code class="code">_gr_groupsbyuser<!-- /@w --></code>),
which is a space-separated list of groups to which each user belongs.
</p>
<p>Unlike in the user database, it is possible to have multiple records in the
database for the same group.  This is common when a group has a large number
of members.  A pair of such entries might look like the following:
</p>
<div class="example">
<pre class="example-preformatted">tvpeople:*:101:johnny,jay,arsenio
tvpeople:*:101:david,conan,tom,joan
</pre></div>

<p>For this reason, <code class="code">_gr_init()</code> looks to see if a group name or
group ID number is already seen.  If so, the usernames are
simply concatenated onto the previous list of users.<a class="footnote" id="DOCF77" href="#FOOT77"><sup>77</sup></a>
</p>
<p>Finally, <code class="code">_gr_init()</code> closes the pipeline to <code class="command">grcat</code>, restores
<code class="code">FS</code> (and <code class="code">FIELDWIDTHS</code> or <code class="code">FPAT</code>, if necessary), <code class="code">RS</code>, and <code class="code">$0</code>,
initializes <code class="code">_gr_count</code> to zero
(it is used later), and makes <code class="code">_gr_inited</code> nonzero.
</p>
<a class="index-entry-id" id="index-getgrnam_0028_0029-function-_0028C-library_0029"></a>
<a class="index-entry-id" id="index-C-library-functions-getgrnam_0028_0029"></a>
<p>The <code class="code">getgrnam()</code> function takes a group name as its argument, and if that
group exists, it is returned.
Otherwise, it
relies on the array reference to a nonexistent
element to create the element with the null string as its value:
</p>
<a class="index-entry-id" id="index-getgrnam_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-getgrnam_0028_0029"></a>
<div class="example">
<pre class="example-preformatted">function getgrnam(group)
{
    _gr_init()
    return _gr_byname[group]
}
</pre></div>

<a class="index-entry-id" id="index-getgrgid_0028_0029-function-_0028C-library_0029"></a>
<a class="index-entry-id" id="index-C-library-functions-getgrgid_0028_0029"></a>
<p>The <code class="code">getgrgid()</code> function is similar; it takes a numeric group ID and
looks up the information associated with that group ID:
</p>
<a class="index-entry-id" id="index-getgrgid_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-getgrgid_0028_0029"></a>
<div class="example">
<pre class="example-preformatted">function getgrgid(gid)
{
    _gr_init()
    return _gr_bygid[gid]
}
</pre></div>

<a class="index-entry-id" id="index-getgruser_0028_0029-function-_0028C-library_0029"></a>
<a class="index-entry-id" id="index-C-library-functions-getgruser_0028_0029"></a>
<p>The <code class="code">getgruser()</code> function does not have a C counterpart. It takes a
username and returns the list of groups that have the user as a member:
</p>
<a class="index-entry-id" id="index-getgruser_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-getgruser_0028_0029"></a>
<div class="example">
<pre class="example-preformatted">function getgruser(user)
{
    _gr_init()
    return _gr_groupsbyuser[user]
}
</pre></div>

<a class="index-entry-id" id="index-getgrent_0028_0029-function-_0028C-library_0029-1"></a>
<a class="index-entry-id" id="index-C-library-functions-getgrent_0028_0029-1"></a>
<p>The <code class="code">getgrent()</code> function steps through the database one entry at a time.
It uses <code class="code">_gr_count</code> to track its position in the list:
</p>
<a class="index-entry-id" id="index-getgrent_0028_0029-user_002ddefined-function-1"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-getgrent_0028_0029-1"></a>
<div class="example">
<pre class="example-preformatted">function getgrent()
{
    _gr_init()
    if (++_gr_count in _gr_bycount)
        return _gr_bycount[_gr_count]
</pre><div class="group"><pre class="example-preformatted">    return &quot;&quot;
}
</pre></div></div>

<a class="index-entry-id" id="index-endgrent_0028_0029-function-_0028C-library_0029"></a>
<a class="index-entry-id" id="index-C-library-functions-endgrent_0028_0029"></a>
<p>The <code class="code">endgrent()</code> function resets <code class="code">_gr_count</code> to zero so that <code class="code">getgrent()</code> can
start over again:
</p>
<a class="index-entry-id" id="index-endgrent_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-endgrent_0028_0029"></a>
<div class="example">
<pre class="example-preformatted">function endgrent()
{
    _gr_count = 0
}
</pre></div>

<p>As with the user database routines, each function calls <code class="code">_gr_init()</code> to
initialize the arrays.  Doing so only incurs the extra overhead of running
<code class="command">grcat</code> if these functions are used (as opposed to moving the body of
<code class="code">_gr_init()</code> into a <code class="code">BEGIN</code> rule).
</p>
<p>Most of the work is in scanning the database and building the various
associative arrays.  The functions that the user calls are themselves very
simple, relying on <code class="command">awk</code>&rsquo;s associative arrays to do work.
</p>
<p>The <code class="command">id</code> program in <a class="ref" href="#Id-Program">Printing Out User Information</a>
uses these functions.
</p>
<hr>
</div>
<div class="section-level-extent" id="Walking-Arrays">
<div class="nav-panel">
<p>
Next: <a href="#Library-Functions-Summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Group-Functions" accesskey="p" rel="prev">Reading the Group Database</a>, Up: <a href="#Library-Functions" accesskey="u" rel="up">A Library of <code class="command">awk</code> Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Traversing-Arrays-of-Arrays"><span>10.7 Traversing Arrays of Arrays<a class="copiable-link" href="#Traversing-Arrays-of-Arrays"> &para;</a></span></h3>

<p><a class="ref" href="#Arrays-of-Arrays">Arrays of Arrays</a> described how <code class="command">gawk</code>
provides arrays of arrays.  In particular, any element of
an array may be either a scalar or another array. The
<code class="code">isarray()</code> function (see <a class="pxref" href="#Type-Functions">Getting Type Information</a>)
lets you distinguish an array
from a scalar.
The following function, <code class="code">walk_array()</code>, recursively traverses
an array, printing the element indices and values.
You call it with the array and a string representing the name
of the array:
</p>
<a class="index-entry-id" id="index-walk_005farray_0028_0029-user_002ddefined-function"></a>
<a class="index-entry-id" id="index-user_002ddefined-function-walk_005farray_0028_0029"></a>
<div class="example">
<pre class="example-preformatted">function walk_array(arr, name,      i)
{
    for (i in arr) {
        if (isarray(arr[i]))
            walk_array(arr[i], (name &quot;[&quot; i &quot;]&quot;))
        else
            printf(&quot;%s[%s] = %s\n&quot;, name, i, arr[i])
    }
}
</pre></div>

<p>It works by looping over each element of the array. If any given
element is itself an array, the function calls itself recursively,
passing the subarray and a new string representing the current index.
Otherwise, the function simply prints the element&rsquo;s name, index, and value.
Here is a main program to demonstrate:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    a[1] = 1
    a[2][1] = 21
    a[2][2] = 22
    a[3] = 3
    a[4][1][1] = 411
    a[4][2] = 42

    walk_array(a, &quot;a&quot;)
}
</pre></div>

<p>When run, the program produces the following output:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f walk_array.awk</kbd>
-| a[1] = 1
-| a[2][1] = 21
-| a[2][2] = 22
-| a[3] = 3
-| a[4][1][1] = 411
-| a[4][2] = 42
</pre></div>

<p>The function just presented simply prints the
name and value of each scalar array element. However, it is easy to
generalize it, by passing in the name of a function to call
when walking an array. The modified function looks like this:
</p>
<div class="example">
<pre class="example-preformatted">function process_array(arr, name, process, do_arrays,   i, new_name)
{
    for (i in arr) {
        new_name = (name &quot;[&quot; i &quot;]&quot;)
        if (isarray(arr[i])) {
            if (do_arrays)
                @process(new_name, arr[i])
            process_array(arr[i], new_name, process, do_arrays)
        } else
            @process(new_name, arr[i])
    }
}
</pre></div>

<p>The arguments are as follows:
</p>
<dl class="table">
<dt><code class="code">arr</code></dt>
<dd><p>The array.
</p>
</dd>
<dt><code class="code">name</code></dt>
<dd><p>The name of the array (a string).
</p>
</dd>
<dt><code class="code">process</code></dt>
<dd><p>The name of the function to call.
</p>
</dd>
<dt><code class="code">do_arrays</code></dt>
<dd><p>If this is true, the function can handle elements that are subarrays.
</p></dd>
</dl>

<p>If subarrays are to be processed, that is done before walking them further.
</p>
<p>When run with the following scaffolding, the function produces the same
results as does the earlier version of <code class="code">walk_array()</code>:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    a[1] = 1
    a[2][1] = 21
    a[2][2] = 22
    a[3] = 3
    a[4][1][1] = 411
    a[4][2] = 42

    process_array(a, &quot;a&quot;, &quot;do_print&quot;, 0)
}

function do_print(name, element)
{
    printf &quot;%s = %s\n&quot;, name, element
}
</pre></div>

<hr>
</div>
<div class="section-level-extent" id="Library-Functions-Summary">
<div class="nav-panel">
<p>
Next: <a href="#Library-Exercises" accesskey="n" rel="next">Exercises</a>, Previous: <a href="#Walking-Arrays" accesskey="p" rel="prev">Traversing Arrays of Arrays</a>, Up: <a href="#Library-Functions" accesskey="u" rel="up">A Library of <code class="command">awk</code> Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary-9"><span>10.8 Summary<a class="copiable-link" href="#Summary-9"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>Reading programs is an excellent way to learn Good Programming.
The functions and programs provided in this chapter and the next
are intended to serve that purpose.

</li><li>When writing general-purpose library functions, put some thought into how
to name any global variables so that they won&rsquo;t conflict with variables
from a user&rsquo;s program.

</li><li>The functions presented here fit into the following categories:

<dl class="table">
<dt>General problems</dt>
<dd><p>Number-to-string conversion, testing assertions, rounding, random number
generation, converting characters to numbers, joining strings, getting
easily usable time-of-day information, and reading a whole file in
one shot
</p>
</dd>
<dt>Managing data files</dt>
<dd><p>Noting data file boundaries, rereading the current file, checking for
readable files, checking for zero-length files, and treating assignments
as file names
</p>
</dd>
<dt>Processing command-line options</dt>
<dd><p>An <code class="command">awk</code> version of the standard C <code class="code">getopt()</code> function
</p>
</dd>
<dt>Reading the user and group databases</dt>
<dd><p>Two sets of routines that parallel the C library versions
</p>
</dd>
<dt>Traversing arrays of arrays</dt>
<dd><p>Two functions that traverse an array of arrays to any depth
</p></dd>
</dl>

</li></ul>

<hr>
</div>
<div class="section-level-extent" id="Library-Exercises">
<div class="nav-panel">
<p>
Previous: <a href="#Library-Functions-Summary" accesskey="p" rel="prev">Summary</a>, Up: <a href="#Library-Functions" accesskey="u" rel="up">A Library of <code class="command">awk</code> Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Exercises-2"><span>10.9 Exercises<a class="copiable-link" href="#Exercises-2"> &para;</a></span></h3>

<ol class="enumerate">
<li> In <a class="ref" href="#Empty-Files">Checking for Zero-Length Files</a>, we presented the <samp class="file">zerofile.awk</samp> program,
which made use of <code class="command">gawk</code>&rsquo;s <code class="code">ARGIND</code> variable.  Can this
problem be solved without relying on <code class="code">ARGIND</code>?  If so, how?


</li><li> As a related challenge, revise that code to handle the case where
an intervening value in <code class="code">ARGV</code> is a variable assignment.


</li></ol>


<hr>
</div>
</div>
<div class="chapter-level-extent" id="Sample-Programs">
<div class="nav-panel">
<p>
Next: <a href="#Advanced-Features" accesskey="n" rel="next">Advanced Features of <code class="command">gawk</code></a>, Previous: <a href="#Library-Functions" accesskey="p" rel="prev">A Library of <code class="command">awk</code> Functions</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Practical-awk-Programs"><span>11 Practical <code class="command">awk</code> Programs<a class="copiable-link" href="#Practical-awk-Programs"> &para;</a></span></h2>
<a class="index-entry-id" id="index-awk-programs-examples-of"></a>

<p><a class="ref" href="#Library-Functions">A Library of <code class="command">awk</code> Functions</a>,
presents the idea that reading programs in a language contributes to
learning that language.  This chapter continues that theme,
presenting a potpourri of <code class="command">awk</code> programs for your reading
enjoyment.
There are three sections.
The first describes how to run the programs presented
in this chapter.
</p>
<p>The second presents <code class="command">awk</code>
versions of several common POSIX utilities.
These are programs that you are hopefully already familiar with,
and therefore whose problems are understood.
By reimplementing these programs in <code class="command">awk</code>,
you can focus on the <code class="command">awk</code>-related aspects of solving
the programming problems.
</p>
<p>The third is a grab bag of interesting programs.
These solve a number of different data-manipulation and management
problems.  Many of the programs are short, which emphasizes <code class="command">awk</code>&rsquo;s
ability to do a lot in just a few lines of code.
</p>
<p>Many of these programs use library functions presented in
<a class="ref" href="#Library-Functions">A Library of <code class="command">awk</code> Functions</a>.
</p>

<ul class="mini-toc">
<li><a href="#Running-Examples" accesskey="1">Running the Example Programs</a></li>
<li><a href="#Clones" accesskey="2">Reinventing Wheels for Fun and Profit</a></li>
<li><a href="#Miscellaneous-Programs" accesskey="3">A Grab Bag of <code class="command">awk</code> Programs</a></li>
<li><a href="#Programs-Summary" accesskey="4">Summary</a></li>
<li><a href="#Programs-Exercises" accesskey="5">Exercises</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Running-Examples">
<div class="nav-panel">
<p>
Next: <a href="#Clones" accesskey="n" rel="next">Reinventing Wheels for Fun and Profit</a>, Up: <a href="#Sample-Programs" accesskey="u" rel="up">Practical <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Running-the-Example-Programs"><span>11.1 Running the Example Programs<a class="copiable-link" href="#Running-the-Example-Programs"> &para;</a></span></h3>

<p>To run a given program, you would typically do something like this:
</p>
<div class="example">
<pre class="example-preformatted">awk -f <var class="var">program</var> -- <var class="var">options</var> <var class="var">files</var>
</pre></div>

<p>Here, <var class="var">program</var> is the name of the <code class="command">awk</code> program (such as
<samp class="file">cut.awk</samp>), <var class="var">options</var> are any command-line options for the
program that start with a &lsquo;<samp class="samp">-</samp>&rsquo;, and <var class="var">files</var> are the actual data files.
</p>
<p>If your system supports the &lsquo;<samp class="samp">#!</samp>&rsquo; executable interpreter mechanism
(see <a class="pxref" href="#Executable-Scripts">Executable <code class="command">awk</code> Programs</a>),
you can instead run your program directly:
</p>
<div class="example">
<pre class="example-preformatted">cut.awk -c1-8 myfiles &gt; results
</pre></div>

<p>If your <code class="command">awk</code> is not <code class="command">gawk</code>, you may instead need to use this:
</p>
<div class="example">
<pre class="example-preformatted">cut.awk -- -c1-8 myfiles &gt; results
</pre></div>

<hr>
</div>
<div class="section-level-extent" id="Clones">
<div class="nav-panel">
<p>
Next: <a href="#Miscellaneous-Programs" accesskey="n" rel="next">A Grab Bag of <code class="command">awk</code> Programs</a>, Previous: <a href="#Running-Examples" accesskey="p" rel="prev">Running the Example Programs</a>, Up: <a href="#Sample-Programs" accesskey="u" rel="up">Practical <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Reinventing-Wheels-for-Fun-and-Profit"><span>11.2 Reinventing Wheels for Fun and Profit<a class="copiable-link" href="#Reinventing-Wheels-for-Fun-and-Profit"> &para;</a></span></h3>
<a class="index-entry-id" id="index-POSIX-programs_002c-implementing-in-awk"></a>

<p>This section presents a number of POSIX utilities implemented in
<code class="command">awk</code>.  Reinventing these programs in <code class="command">awk</code> is often enjoyable,
because the algorithms can be very clearly expressed, and the code is usually
very concise and simple.  This is true because <code class="command">awk</code> does so much for you.
</p>
<p>It should be noted that these programs are not necessarily intended to
replace the installed versions on your system.
Nor may all of these programs be fully compliant with the most recent
POSIX standard.  This is not a problem; their
purpose is to illustrate <code class="command">awk</code> language programming for &ldquo;real-world&rdquo;
tasks.
</p>
<p>The programs are presented in alphabetical order.
</p>

<ul class="mini-toc">
<li><a href="#Cut-Program" accesskey="1">Cutting Out Fields and Columns</a></li>
<li><a href="#Egrep-Program" accesskey="2">Searching for Regular Expressions in Files</a></li>
<li><a href="#Id-Program" accesskey="3">Printing Out User Information</a></li>
<li><a href="#Split-Program" accesskey="4">Splitting a Large File into Pieces</a></li>
<li><a href="#Tee-Program" accesskey="5">Duplicating Output into Multiple Files</a></li>
<li><a href="#Uniq-Program" accesskey="6">Printing Nonduplicated Lines of Text</a></li>
<li><a href="#Wc-Program" accesskey="7">Counting Things</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Cut-Program">
<div class="nav-panel">
<p>
Next: <a href="#Egrep-Program" accesskey="n" rel="next">Searching for Regular Expressions in Files</a>, Up: <a href="#Clones" accesskey="u" rel="up">Reinventing Wheels for Fun and Profit</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Cutting-Out-Fields-and-Columns"><span>11.2.1 Cutting Out Fields and Columns<a class="copiable-link" href="#Cutting-Out-Fields-and-Columns"> &para;</a></span></h4>

<a class="index-entry-id" id="index-cut-utility"></a>
<a class="index-entry-id" id="index-cut-utility-1"></a>
<a class="index-entry-id" id="index-fields-cutting"></a>
<a class="index-entry-id" id="index-columns-cutting"></a>
<p>The <code class="command">cut</code> utility selects, or &ldquo;cuts,&rdquo; characters or fields
from its standard input and sends them to its standard output.
Fields are separated by TABs by default,
but you may supply a command-line option to change the field
<em class="dfn">delimiter</em> (i.e., the field-separator character). <code class="command">cut</code>&rsquo;s
definition of fields is less general than <code class="command">awk</code>&rsquo;s.
</p>
<p>A common use of <code class="command">cut</code> might be to pull out just the login names of
logged-on users from the output of <code class="command">who</code>.  For example, the following
pipeline generates a sorted, unique list of the logged-on users:
</p>
<div class="example">
<pre class="example-preformatted">who | cut -c1-8 | sort | uniq
</pre></div>

<p>The options for <code class="command">cut</code> are:
</p>
<dl class="table">
<dt><code class="code">-c <var class="var">list</var></code></dt>
<dd><p>Use <var class="var">list</var> as the list of characters to cut out.  Items within the list
may be separated by commas, and ranges of characters can be separated with
dashes.  The list &lsquo;<samp class="samp">1-8,15,22-35</samp>&rsquo; specifies characters 1 through
8, 15, and 22 through 35.
</p>
</dd>
<dt><code class="code">-d <var class="var">delim</var></code></dt>
<dd><p>Use <var class="var">delim</var> as the field-separator character instead of the TAB
character.
</p>
</dd>
<dt><code class="code">-f <var class="var">list</var></code></dt>
<dd><p>Use <var class="var">list</var> as the list of fields to cut out.
</p>
</dd>
<dt><code class="code">-s</code></dt>
<dd><p>Suppress printing of lines that do not contain the field delimiter.
</p></dd>
</dl>

<p>The <code class="command">awk</code> implementation of <code class="command">cut</code> uses the <code class="code">getopt()</code> library
function (see <a class="pxref" href="#Getopt-Function">Processing Command-Line Options</a>)
and the <code class="code">join()</code> library function
(see <a class="pxref" href="#Join-Function">Merging an Array into a String</a>).
</p>
<p>The current POSIX version of <code class="command">cut</code> has options to cut fields based on
both bytes and characters. This version does not attempt to implement those options,
as <code class="command">awk</code> works exclusively in terms of characters.
</p>
<p>The program begins with a comment describing the options, the library
functions needed, and a <code class="code">usage()</code> function that prints out a usage
message and exits.  <code class="code">usage()</code> is called if invalid arguments are
supplied:
</p>
<a class="index-entry-id" id="index-cut_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># cut.awk --- implement cut in awk

# Options:
#    -c list     Cut characters
#    -f list     Cut fields
#    -d c        Field delimiter character
#
#    -s          Suppress lines without the delimiter
#
# Requires getopt() and join() library functions

</pre><div class="group"><pre class="example-preformatted">function usage()
{
    print(&quot;usage: cut [-f list] [-d c] [-s] [files...]&quot;) &gt; &quot;/dev/stderr&quot;
    print(&quot;       cut [-c list] [files...]&quot;) &gt; &quot;/dev/stderr&quot;
    exit 1
}
</pre></div></div>

<a class="index-entry-id" id="index-BEGIN-pattern-running-awk-programs-and"></a>
<a class="index-entry-id" id="index-FS-variable-running-awk-programs-and"></a>
<p>Next comes a <code class="code">BEGIN</code> rule that parses the command-line options.
It sets <code class="code">FS</code> to a single TAB character, because that is <code class="command">cut</code>&rsquo;s
default field separator. The rule then sets the output field separator to be the
same as the input field separator.  A loop using <code class="code">getopt()</code> steps
through the command-line options.  Exactly one of the variables
<code class="code">by_fields</code> or <code class="code">by_chars</code> is set to true, to indicate that
processing should be done by fields or by characters, respectively.
When cutting by characters, the output field separator is set to the null
string:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    FS = &quot;\t&quot;    # default
    OFS = FS
    while ((c = getopt(ARGC, ARGV, &quot;sf:c:d:&quot;)) != -1) {
        if (c == &quot;f&quot;) {
            by_fields = 1
            fieldlist = Optarg
        } else if (c == &quot;c&quot;) {
            by_chars = 1
            fieldlist = Optarg
            OFS = &quot;&quot;
        } else if (c == &quot;d&quot;) {
            if (length(Optarg) &gt; 1) {
                printf(&quot;cut: using first character of %s&quot; \
                       &quot; for delimiter\n&quot;, Optarg) &gt; &quot;/dev/stderr&quot;
                Optarg = substr(Optarg, 1, 1)
            }
            fs = FS = Optarg
            OFS = FS
            if (FS == &quot; &quot;)    # defeat awk semantics
                FS = &quot;[ ]&quot;
        } else if (c == &quot;s&quot;)
            suppress = 1
        else
            usage()
    }

    # Clear out options
    for (i = 1; i &lt; Optind; i++)
        ARGV[i] = &quot;&quot;
</pre></div>

<a class="index-entry-id" id="index-field-separator-spaces-as"></a>
<p>The code must take
special care when the field delimiter is a space.  Using
a single space (<code class="code">&quot;&nbsp;&quot;<!-- /@w --></code>) for the value of <code class="code">FS</code> is
incorrect&mdash;<code class="command">awk</code> would separate fields with runs of spaces,
TABs, and/or newlines, and we want them to be separated with individual
spaces.
To this end, we save the original space character in the variable
<code class="code">fs</code> for later use; after setting <code class="code">FS</code> to <code class="code">&quot;[&nbsp;]&quot;<!-- /@w --></code> we can&rsquo;t
use it directly to see if the field delimiter character is in the string.
</p>
<p>Also remember that after <code class="code">getopt()</code> is through
(as described in <a class="ref" href="#Getopt-Function">Processing Command-Line Options</a>),
we have to
clear out all the elements of <code class="code">ARGV</code> from 1 to <code class="code">Optind</code>,
so that <code class="command">awk</code> does not try to process the command-line options
as file names.
</p>
<p>After dealing with the command-line options, the program verifies that the
options make sense.  Only one or the other of <samp class="option">-c</samp> and <samp class="option">-f</samp>
should be used, and both require a field list.  Then the program calls
either <code class="code">set_fieldlist()</code> or <code class="code">set_charlist()</code> to pull apart the
list of fields or characters:
</p>
<div class="example">
<pre class="example-preformatted">    if (by_fields &amp;&amp; by_chars)
        usage()

    if (by_fields == 0 &amp;&amp; by_chars == 0)
        by_fields = 1    # default

</pre><div class="group"><pre class="example-preformatted">    if (fieldlist == &quot;&quot;) {
        print &quot;cut: needs list for -c or -f&quot; &gt; &quot;/dev/stderr&quot;
        exit 1
    }
</pre></div><pre class="example-preformatted">

    if (by_fields)
        set_fieldlist()
    else
        set_charlist()
}
</pre></div>

<p><code class="code">set_fieldlist()</code> splits the field list apart at the commas
into an array.  Then, for each element of the array, it looks to
see if the element is actually a range, and if so, splits it apart.
The function checks the range
to make sure that the first number is smaller than the second.
Each number in the list is added to the <code class="code">flist</code> array, which
simply lists the fields that will be printed.  Normal field splitting
is used.  The program lets <code class="command">awk</code> handle the job of doing the
field splitting:
</p>
<div class="example">
<pre class="example-preformatted">function set_fieldlist(        n, m, i, j, k, f, g)
{
    n = split(fieldlist, f, &quot;,&quot;)
    j = 1    # index in flist
    for (i = 1; i &lt;= n; i++) {
        if (index(f[i], &quot;-&quot;) != 0) { # a range
            m = split(f[i], g, &quot;-&quot;)
</pre><div class="group"><pre class="example-preformatted">            if (m != 2 || g[1] &gt;= g[2]) {
                printf(&quot;cut: bad field list: %s\n&quot;,
                                  f[i]) &gt; &quot;/dev/stderr&quot;
                exit 1
            }
</pre></div><pre class="example-preformatted">            for (k = g[1]; k &lt;= g[2]; k++)
                flist[j++] = k
        } else
            flist[j++] = f[i]
    }
    nfields = j - 1
}
</pre></div>

<p>The <code class="code">set_charlist()</code> function is more complicated than
<code class="code">set_fieldlist()</code>.
The idea here is to use <code class="command">gawk</code>&rsquo;s <code class="code">FIELDWIDTHS</code> variable
(see <a class="pxref" href="#Constant-Size">Reading Fixed-Width Data</a>),
which describes constant-width input.  When using a character list, that is
exactly what we have.
</p>
<p>Setting up <code class="code">FIELDWIDTHS</code> is more complicated than simply listing the
fields that need to be printed.  We have to keep track of the fields to
print and also the intervening characters that have to be skipped.
For example, suppose you wanted characters 1 through 8, 15, and
22 through 35.  You would use &lsquo;<samp class="samp">-c 1-8,15,22-35</samp>&rsquo;.  The necessary value
for <code class="code">FIELDWIDTHS</code> is <code class="code">&quot;8&nbsp;6&nbsp;1&nbsp;6&nbsp;14&quot;<!-- /@w --></code>.  This yields five
fields, and the fields to print
are <code class="code">$1</code>, <code class="code">$3</code>, and <code class="code">$5</code>.
The intermediate fields are <em class="dfn">filler</em>,
which is stuff in between the desired data.
<code class="code">flist</code> lists the fields to print, and <code class="code">t</code> tracks the
complete field list, including filler fields:
</p>
<div class="example">
<pre class="example-preformatted">function set_charlist(    field, i, j, f, g, n, m, t,
                          filler, last, len)
{
    field = 1   # count total fields
    n = split(fieldlist, f, &quot;,&quot;)
    j = 1       # index in flist
    for (i = 1; i &lt;= n; i++) {
        if (index(f[i], &quot;-&quot;) != 0) { # range
            m = split(f[i], g, &quot;-&quot;)
            if (m != 2 || g[1] &gt;= g[2]) {
                printf(&quot;cut: bad character list: %s\n&quot;,
                               f[i]) &gt; &quot;/dev/stderr&quot;
                exit 1
            }
            len = g[2] - g[1] + 1
            if (g[1] &gt; 1)  # compute length of filler
                filler = g[1] - last - 1
            else
                filler = 0
</pre><div class="group"><pre class="example-preformatted">            if (filler)
                t[field++] = filler
</pre></div><pre class="example-preformatted">            t[field++] = len  # length of field
            last = g[2]
            flist[j++] = field - 1
        } else {
            if (f[i] &gt; 1)
                filler = f[i] - last - 1
            else
                filler = 0
            if (filler)
                t[field++] = filler
            t[field++] = 1
            last = f[i]
            flist[j++] = field - 1
        }
    }
    FIELDWIDTHS = join(t, 1, field - 1)
    nfields = j - 1
}
</pre></div>

<p>Next is the rule that processes the data.  If the <samp class="option">-s</samp> option
is given, then <code class="code">suppress</code> is true.  The first <code class="code">if</code> statement
makes sure that the input record does have the field separator.  If
<code class="command">cut</code> is processing fields, <code class="code">suppress</code> is true, and the field
separator character is not in the record, then the record is skipped.
</p>
<p>If the record is valid, then <code class="command">gawk</code> has split the data
into fields, either using the character in <code class="code">FS</code> or using fixed-length
fields and <code class="code">FIELDWIDTHS</code>.  The loop goes through the list of fields
that should be printed.  The corresponding field is printed if it contains data.
If the next field also has data, then the separator character is
written out between the fields:
</p>
<div class="example">
<pre class="example-preformatted">{
    if (by_fields &amp;&amp; suppress &amp;&amp; index($0, fs) == 0)
        next

    for (i = 1; i &lt;= nfields; i++) {
        if ($flist[i] != &quot;&quot;) {
            printf &quot;%s&quot;, $flist[i]
            if (i &lt; nfields &amp;&amp; $flist[i+1] != &quot;&quot;)
                printf &quot;%s&quot;, OFS
        }
    }
    print &quot;&quot;
}
</pre></div>

<p>This version of <code class="command">cut</code> relies on <code class="command">gawk</code>&rsquo;s <code class="code">FIELDWIDTHS</code>
variable to do the character-based cutting.  It is possible in
other <code class="command">awk</code> implementations to use <code class="code">substr()</code>
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>), but
it is also extremely painful.
The <code class="code">FIELDWIDTHS</code> variable supplies an elegant solution to the problem
of picking the input line apart by characters.
</p>

<hr>
</div>
<div class="subsection-level-extent" id="Egrep-Program">
<div class="nav-panel">
<p>
Next: <a href="#Id-Program" accesskey="n" rel="next">Printing Out User Information</a>, Previous: <a href="#Cut-Program" accesskey="p" rel="prev">Cutting Out Fields and Columns</a>, Up: <a href="#Clones" accesskey="u" rel="up">Reinventing Wheels for Fun and Profit</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Searching-for-Regular-Expressions-in-Files"><span>11.2.2 Searching for Regular Expressions in Files<a class="copiable-link" href="#Searching-for-Regular-Expressions-in-Files"> &para;</a></span></h4>

<a class="index-entry-id" id="index-regular-expressions-searching-for"></a>
<a class="index-entry-id" id="index-searching-files-for-regular-expressions"></a>
<a class="index-entry-id" id="index-files-searching-for-regular-expressions"></a>
<a class="index-entry-id" id="index-egrep-utility-1"></a>
<p>The <code class="command">grep</code> family of programs searches files for patterns.
These programs have an unusual history.
Initially there was <code class="command">grep</code> (Global Regular Expression Print),
which used what are now called Basic Regular Expressions (BREs).
Later there was <code class="command">egrep</code> (Extended <code class="command">grep</code>) which used
what are now called Extended Regular Expressions (EREs). (These are almost
identical to those available in <code class="command">awk</code>; see <a class="pxref" href="#Regexp">Regular Expressions</a>).
There was also <code class="command">fgrep</code> (Fast <code class="command">grep</code>), which searched
for matches of one more fixed strings.
</p>
<p>POSIX chose to combine these three programs into one, simply named
<code class="command">grep</code>.  On a POSIX system, <code class="command">grep</code>&rsquo;s default behavior
is to search using BREs. You use <code class="command">-E</code> to specify the use
of EREs, and <samp class="option">-F</samp> to specify searching for fixed strings.
</p>
<p>In practice, systems continue to come with separate <code class="command">egrep</code>
and <code class="command">fgrep</code> utilities, for backwards compatibility. This
section provides an <code class="command">awk</code> implementation of <code class="command">egrep</code>,
which supports all of the POSIX-mandated options.
You invoke it as follows:
</p>
<div class="display">
<pre class="display-preformatted"><code class="command">egrep</code> [<var class="var">options</var>] <code class="code">'<var class="var">pattern</var>'</code> <var class="var">files</var> ...
</pre></div>

<p>The <var class="var">pattern</var> is a regular expression.  In typical usage, the regular
expression is quoted to prevent the shell from expanding any of the
special characters as file name wildcards.  Normally, <code class="command">egrep</code>
prints the lines that matched.  If multiple file names are provided on
the command line, each output line is preceded by the name of the file
and a colon.
</p>
<p>The options to <code class="command">egrep</code> are as follows:
</p>
<dl class="table">
<dt><code class="code">-c</code></dt>
<dd><p>Print a count of the lines that matched the pattern, instead of the
lines themselves.
</p>
</dd>
<dt><code class="code">-e <var class="var">pattern</var></code></dt>
<dd><p>Use <var class="var">pattern</var> as the regexp to match.  The purpose of the <samp class="option">-e</samp>
option is to allow patterns that start with a &lsquo;<samp class="samp">-</samp>&rsquo;.
</p>
</dd>
<dt><code class="code">-i</code></dt>
<dd><p>Ignore case distinctions in both the pattern and the input data.
</p>
</dd>
<dt><code class="code">-l</code></dt>
<dd><p>Only print (list) the names of the files that matched, not the lines that matched.
</p>
</dd>
<dt><code class="code">-q</code></dt>
<dd><p>Be quiet.  No output is produced and the exit value indicates whether
the pattern was matched.
</p>
</dd>
<dt><code class="code">-s</code></dt>
<dd><p>Be silent. Do not print error messages for files that could
not be opened.
</p>
</dd>
<dt><code class="code">-v</code></dt>
<dd><p>Invert the sense of the test. <code class="command">egrep</code> prints the lines that do
<em class="emph">not</em> match the pattern and exits successfully if the pattern is not
matched.
</p>
</dd>
<dt><code class="code">-x</code></dt>
<dd><p>Match the entire input line in order to consider the match as having
succeeded.
</p></dd>
</dl>

<p>This version uses the <code class="code">getopt()</code> library function
(see <a class="pxref" href="#Getopt-Function">Processing Command-Line Options</a>) and <code class="command">gawk</code>&rsquo;s
<code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> special patterns
(see <a class="pxref" href="#BEGINFILE_002fENDFILE">The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a>).
</p>
<p>The program begins with descriptive comments and then a <code class="code">BEGIN</code> rule
that processes the command-line arguments with <code class="code">getopt()</code>.  The <samp class="option">-i</samp>
(ignore case) option is particularly easy with <code class="command">gawk</code>; we just use the
<code class="code">IGNORECASE</code> predefined variable
(see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>):
</p>
<a class="index-entry-id" id="index-egrep_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># egrep.awk --- simulate egrep in awk
#
# Options:
#    -c    count of lines
#    -e    argument is pattern
#    -i    ignore case
#    -l    print filenames only
#    -n    add line number to output
#    -q    quiet - use exit value
#    -s    silent - don't print errors
#    -v    invert test, success if no match
#    -x    the entire line must match
#
# Requires getopt library function
# Uses IGNORECASE, BEGINFILE and ENDFILE
# Invoke using gawk -f egrep.awk -- options ...

BEGIN {
    while ((c = getopt(ARGC, ARGV, &quot;ce:ilnqsvx&quot;)) != -1) {
        if (c == &quot;c&quot;)
            count_only++
        else if (c == &quot;e&quot;)
            pattern = Optarg
        else if (c == &quot;i&quot;)
            IGNORECASE = 1
        else if (c == &quot;l&quot;)
            filenames_only++
        else if (c == &quot;n&quot;)
            line_numbers++
        else if (c == &quot;q&quot;)
            no_print++
        else if (c == &quot;s&quot;)
            no_errors++
        else if (c == &quot;v&quot;)
            invert++
        else if (c == &quot;x&quot;)
            full_line++
        else
            usage()
    }
</pre></div>

<p>Note the comment about invocation: Because several of the options overlap
with <code class="command">gawk</code>&rsquo;s, a <samp class="option">--</samp> is needed to tell <code class="command">gawk</code>
to stop looking for options.
</p>
<p>Next comes the code that handles the <code class="command">egrep</code>-specific behavior.
<code class="command">egrep</code> uses the first nonoption on the command line
if no pattern is supplied with <samp class="option">-e</samp>.
If the pattern is empty, that means no pattern was supplied, so it&rsquo;s
necessary to print an error message and exit.
The <code class="command">awk</code> command-line arguments up to <code class="code">ARGV[Optind]</code>
are cleared, so that <code class="command">awk</code> won&rsquo;t try to process them as files.  If no
files are specified, the standard input is used, and if multiple files are
specified, we make sure to note this so that the file names can precede the
matched lines in the output:
</p>
<div class="example">
<pre class="example-preformatted">    if (pattern == &quot;&quot;)
        pattern = ARGV[Optind++]

    if (pattern == &quot;&quot;)
      usage()

    for (i = 1; i &lt; Optind; i++)
        ARGV[i] = &quot;&quot;

    if (Optind &gt;= ARGC) {
        ARGV[1] = &quot;-&quot;
        ARGC = 2
    } else if (ARGC - Optind &gt; 1)
        do_filenames++
}
</pre></div>

<p>The <code class="code">BEGINFILE</code> rule executes
when each new file is processed.  In this case, it is fairly simple; it
initializes a variable <code class="code">fcount</code> to zero. <code class="code">fcount</code> tracks
how many lines in the current file matched the pattern.
</p>
<p>Here also is where we implement the <samp class="option">-s</samp> option. We check
if <code class="code">ERRNO</code> has been set, and if <samp class="option">-s</samp> was supplied.
In that case, it&rsquo;s necessary to move on to the next file. Otherwise
<code class="command">gawk</code> would exit with an error:
</p>
<div class="example">
<pre class="example-preformatted">BEGINFILE {
    fcount = 0
    if (ERRNO &amp;&amp; no_errors)
        nextfile
}
</pre></div>

<p>The <code class="code">ENDFILE</code> rule executes after each file has been processed.
It affects the output only when the user wants a count of the number of lines that
matched.  <code class="code">no_print</code> is true only if the exit status is desired.
<code class="code">count_only</code> is true if line counts are desired.  <code class="command">egrep</code>
therefore only prints line counts if printing and counting are enabled.
The output format must be adjusted depending upon the number of files to
process.  Finally, <code class="code">fcount</code> is added to <code class="code">total</code>, so that we
know the total number of lines that matched the pattern:
</p>
<div class="example">
<pre class="example-preformatted">ENDFILE {
    if (! no_print &amp;&amp; count_only) {
        if (do_filenames)
            print file &quot;:&quot; fcount
        else
            print fcount
    }

</pre><div class="group"><pre class="example-preformatted">    total += fcount
}
</pre></div></div>

<p>The following rule does most of the work of matching lines. The variable
<code class="code">matches</code> is true (non-zero) if the line matched the pattern.
If the user specified that the entire line must match (with <samp class="option">-x</samp>),
the code checks this condition by looking at the values of
<code class="code">RSTART</code> and <code class="code">RLENGTH</code>.  If those indicate that the match
is not over the full line, <code class="code">matches</code> is set to zero (false).
</p>
<p>If the user
wants lines that did not match, we invert the sense of <code class="code">matches</code>
using the &lsquo;<samp class="samp">!</samp>&rsquo; operator. We then increment <code class="code">fcount</code> with the value of
<code class="code">matches</code>, which is either one or zero, depending upon a
successful or unsuccessful match.  If the line does not match, the
<code class="code">next</code> statement just moves on to the next input line.
</p>
<p>We make a number of additional tests, but only if we
are not counting lines.  First, if the user only wants the exit status
(<code class="code">no_print</code> is true), then it is enough to know that <em class="emph">one</em>
line in this file matched, and we can skip on to the next file with
<code class="code">nextfile</code>.  Similarly, if we are only printing file names, we can
print the file name, and then skip to the next file with <code class="code">nextfile</code>.
Finally, each line is printed, with a leading file name,
optional colon and line number, and the final colon
if necessary:
</p>
<a class="index-entry-id" id="index-_0021-_0028exclamation-point_0029-_0021-operator-3"></a>
<a class="index-entry-id" id="index-exclamation-point-_0028_0021_0029-_0021-operator-2"></a>
<div class="example">
<pre class="example-preformatted">{
    matches = match($0, pattern)
    if (matches &amp;&amp; full_line &amp;&amp; (RSTART != 1 || RLENGTH != length()))
         matches = 0

    if (invert)
        matches = ! matches

    fcount += matches    # 1 or 0

    if (! matches)
        next

    if (! count_only) {
        if (no_print)
            nextfile

        if (filenames_only) {
            print FILENAME
            nextfile
        }

        if (do_filenames)
            if (line_numbers)
               print FILENAME &quot;:&quot; FNR &quot;:&quot; $0
            else
               print FILENAME &quot;:&quot; $0
        else
            print
    }
}
</pre></div>

<p>The <code class="code">END</code> rule takes care of producing the correct exit status. If
there are no matches, the exit status is one; otherwise, it is zero:
</p>
<div class="example">
<pre class="example-preformatted">END {
    exit (total == 0)
}
</pre></div>

<p>The <code class="code">usage()</code> function prints a usage message in case of invalid options,
and then exits:
</p>
<div class="example">
<pre class="example-preformatted">function usage()
{
    print(&quot;Usage:\tegrep [-cilnqsvx] [-e pat] [files ...]&quot;) &gt; &quot;/dev/stderr&quot;
    print(&quot;\tegrep [-cilnqsvx] pat [files ...]&quot;) &gt; &quot;/dev/stderr&quot;
    exit 1
}
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Id-Program">
<div class="nav-panel">
<p>
Next: <a href="#Split-Program" accesskey="n" rel="next">Splitting a Large File into Pieces</a>, Previous: <a href="#Egrep-Program" accesskey="p" rel="prev">Searching for Regular Expressions in Files</a>, Up: <a href="#Clones" accesskey="u" rel="up">Reinventing Wheels for Fun and Profit</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Printing-Out-User-Information"><span>11.2.3 Printing Out User Information<a class="copiable-link" href="#Printing-Out-User-Information"> &para;</a></span></h4>

<a class="index-entry-id" id="index-printing-user-information"></a>
<a class="index-entry-id" id="index-users_002c-information-about-printing"></a>
<a class="index-entry-id" id="index-id-utility"></a>
<p>The <code class="command">id</code> utility lists a user&rsquo;s real and effective user ID numbers,
real and effective group ID numbers, and the user&rsquo;s group set, if any.
<code class="command">id</code> only prints the effective user ID and group ID if they are
different from the real ones.  If possible, <code class="command">id</code> also supplies the
corresponding user and group names.  The output might look like this:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">id</kbd>
-| uid=1000(arnold) gid=1000(arnold) groups=1000(arnold),4(adm),7(lp),27(sudo)
</pre></div>

<a class="index-entry-id" id="index-PROCINFO-array-user-and-group-ID-numbers-and"></a>
<p>This information is part of what is provided by <code class="command">gawk</code>&rsquo;s
<code class="code">PROCINFO</code> array (see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>).
However, the <code class="command">id</code> utility provides a more palatable output than just
individual numbers.
</p>
<p>The POSIX version of <code class="command">id</code> takes several options that give you
control over the output&rsquo;s format, such as printing only real ids, or printing
only numbers or only names.  Additionally, you can print the information
for a specific user, instead of that of the current user.
</p>
<p>Here is a version of POSIX <code class="command">id</code> written in <code class="command">awk</code>.
It uses the <code class="code">getopt()</code> library function
(see <a class="pxref" href="#Getopt-Function">Processing Command-Line Options</a>),
the user database library functions
(see <a class="pxref" href="#Passwd-Functions">Reading the User Database</a>),
and the group database library functions
(see <a class="pxref" href="#Group-Functions">Reading the Group Database</a>)
from <a class="ref" href="#Library-Functions">A Library of <code class="command">awk</code> Functions</a>.
</p>
<p>The program is moderately straightforward.  All the work is done in the
<code class="code">BEGIN</code> rule.
It starts with explanatory comments, a list of options,
and then a <code class="code">usage()</code> function:
</p>
<a class="index-entry-id" id="index-id_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># id.awk --- implement id in awk
#
# Requires user and group library functions and getopt
# output is:
# uid=12(foo) euid=34(bar) gid=3(baz) \
#             egid=5(blat) groups=9(nine),2(two),1(one)

# Options:
#   -G Output all group ids as space separated numbers (ruid, euid, groups)
#   -g Output only the euid as a number
#   -n Output name instead of the numeric value (with -g/-G/-u)
#   -r Output ruid/rguid instead of effective id
#   -u Output only effective user id, as a number

</pre><div class="group"><pre class="example-preformatted">function usage()
{
    printf(&quot;Usage:\n&quot; \
           &quot;\tid [user]\n&quot; \
           &quot;\tid -G [-n] [user]\n&quot; \
           &quot;\tid -g [-nr] [user]\n&quot; \
           &quot;\tid -u [-nr] [user]\n&quot;) &gt; &quot;/dev/stderr&quot;

    exit 1
}
</pre></div></div>

<p>The first step is to parse the options using <code class="code">getopt()</code>,
and to set various flag variables according to the options given:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    # parse args
    while ((c = getopt(ARGC, ARGV, &quot;Ggnru&quot;)) != -1) {
        if (c == &quot;G&quot;)
            groupset_only++
        else if (c == &quot;g&quot;)
            egid_only++
        else if (c == &quot;n&quot;)
            names_not_groups++
        else if (c == &quot;r&quot;)
            real_ids_only++
        else if (c == &quot;u&quot;)
            euid_only++
        else
            usage()
    }
</pre></div>

<p>The next step is to check that no conflicting options were
provided. <samp class="option">-G</samp> and <samp class="option">-r</samp> are mutually exclusive.
It is also not allowed to provide more than one user name
on the command line:
</p>
<div class="example">
<pre class="example-preformatted">    if (groupset_only &amp;&amp; real_ids_only)
        usage()
    else if (ARGC - Optind &gt; 1)
        usage()
</pre></div>

<p>The user and group ID numbers are obtained from
<code class="code">PROCINFO</code> for the current user, or from the
user and password databases for a user supplied on
the command line. In the latter case, <code class="code">real_ids_only</code>
is set, since it&rsquo;s not possible to print information about
the effective user and group IDs:
</p>
<div class="example">
<pre class="example-preformatted">    if (ARGC - Optind == 0) {
        # gather info for current user
        uid = PROCINFO[&quot;uid&quot;]
        euid = PROCINFO[&quot;euid&quot;]
        gid = PROCINFO[&quot;gid&quot;]
        egid = PROCINFO[&quot;egid&quot;]
        for (i = 1; (&quot;group&quot; i) in PROCINFO; i++)
            groupset[i] = PROCINFO[&quot;group&quot; i]
    } else {
        fill_info_for_user(ARGV[ARGC-1])
        real_ids_only++
    }
</pre></div>

<p>The test in the <code class="code">for</code> loop is worth noting.
Any supplementary groups in the <code class="code">PROCINFO</code> array have the
indices <code class="code">&quot;group1&quot;</code> through <code class="code">&quot;group<var class="var">N</var>&quot;</code> for some
<var class="var">N</var> (i.e., the total number of supplementary groups).
However, we don&rsquo;t know in advance how many of these groups
there are.
</p>
<p>This loop works by starting at one, concatenating the value with
<code class="code">&quot;group&quot;</code>, and then using <code class="code">in</code> to see if that value is
in the array (see <a class="pxref" href="#Reference-to-Elements">Referring to an Array Element</a>).  Eventually, <code class="code">i</code> increments past
the last group in the array and the loop exits.
</p>
<p>The loop is also correct if there are <em class="emph">no</em> supplementary
groups; then the condition is false the first time it&rsquo;s
tested, and the loop body never executes.
</p>

<p>Now, based on the options, we decide what information to print.
For <samp class="option">-G</samp> (print just the group set), we then select
whether to print names or numbers. In either case, when done
we exit:
</p>
<div class="example">
<pre class="example-preformatted">    if (groupset_only) {
        if (names_not_groups) {
            for (i = 1; i in groupset; i++) {
                entry = getgrgid(groupset[i])
                name = get_first_field(entry)
                printf(&quot;%s&quot;, name)
                if ((i + 1) in groupset)
                    printf(&quot; &quot;)
            }
        } else {
            for (i = 1; i in groupset; i++) {
                printf(&quot;%u&quot;, groupset[i])
                if ((i + 1) in groupset)
                    printf(&quot; &quot;)
            }
        }

        print &quot;&quot;    # final newline
        exit 0
    }
</pre></div>

<p>Otherwise, for <samp class="option">-g</samp> (effective group ID only), we
check if <samp class="option">-r</samp> was also provided, in which case we
use the real group ID. Then based on <samp class="option">-n</samp>, we decide
whether to print names or numbers. Here too, when done,
we exit:
</p>
<div class="example">
<pre class="example-preformatted">    else if (egid_only) {
        id = real_ids_only ? gid : egid
        if (names_not_groups) {
            entry = getgrgid(id)
            name = get_first_field(entry)
            printf(&quot;%s\n&quot;, name)
        } else {
            printf(&quot;%u\n&quot;, id)
        }

        exit 0
    }
</pre></div>

<p>The <code class="code">get_first_field()</code> function extracts the group name from
the group database entry for the given group ID.
</p>
<p>Similar processing logic applies to <samp class="option">-u</samp> (effective user ID only),
combined with <samp class="option">-r</samp> and <samp class="option">-n</samp>:
</p>
<div class="example">
<pre class="example-preformatted">    else if (euid_only) {
        id = real_ids_only ? uid : euid
        if (names_not_groups) {
            entry = getpwuid(id)
            name = get_first_field(entry)
            printf(&quot;%s\n&quot;, name)
        } else {
            printf(&quot;%u\n&quot;, id)
        }

        exit 0
    }
</pre></div>

<p>At this point, we haven&rsquo;t exited yet, so we print
the regular, default output, based either on the current
user&rsquo;s information, or that of the user whose name was
provided on the command line. We start with the real user ID:
</p>
<div class="example">
<pre class="example-preformatted">    printf(&quot;uid=%d&quot;, uid)
    pw = getpwuid(uid)
    print_first_field(pw)
</pre></div>

<p>The <code class="code">print_first_field()</code> function prints the user&rsquo;s
login name from the password file entry, surrounded by
parentheses. It is shown soon.
Printing the effective user ID is next:
</p>
<div class="example">
<pre class="example-preformatted">    if (euid != uid &amp;&amp; ! real_ids_only) {
        printf(&quot; euid=%d&quot;, euid)
        pw = getpwuid(euid)
        print_first_field(pw)
    }
</pre></div>

<p>Similar logic applies to the real and effective group IDs:
</p>
<div class="example">
<pre class="example-preformatted">    printf(&quot; gid=%d&quot;, gid)
    pw = getgrgid(gid)
    print_first_field(pw)

    if (egid != gid &amp;&amp; ! real_ids_only) {
        printf(&quot; egid=%d&quot;, egid)
        pw = getgrgid(egid)
        print_first_field(pw)
    }
</pre></div>

<p>Finally, we print the group set and the terminating newline:
</p>
<div class="example">
<pre class="example-preformatted">    for (i = 1; i in groupset; i++) {
        if (i == 1)
            printf(&quot; groups=&quot;)
        group = groupset[i]
        printf(&quot;%d&quot;, group)
        pw = getgrgid(group)
        print_first_field(pw)
        if ((i + 1) in groupset)
            printf(&quot;,&quot;)
    }

    print &quot;&quot;
}
</pre></div>

<p>The <code class="code">get_first_field()</code> function extracts the first field
from a password or group file entry for use as a user or group
name. Fields are separated by &lsquo;<samp class="samp">:</samp>&rsquo; characters:
</p>
<div class="example">
<pre class="example-preformatted">function get_first_field(str,  a)
{
    if (str != &quot;&quot;) {
        split(str, a, &quot;:&quot;)
        return a[1]
    }
}
</pre></div>

<p>This function is then used by <code class="code">print_first_field()</code> to
output the given name surrounded by parentheses:
</p>
<div class="example">
<pre class="example-preformatted">function print_first_field(str)
{
    first = get_first_field(str)
    printf(&quot;(%s)&quot;, first)
}
</pre></div>

<p>These two functions simply isolate out some code that is used repeatedly,
making the whole program shorter and cleaner. In particular, moving the
check for the empty string into <code class="code">get_first_field()</code> saves several
lines of code.
</p>
<p>Finally, <code class="code">fill_info_for_user()</code> fetches user, group, and group
set information for the user named on the command.  The code is fairly
straightforward, merely requiring that we exit if the given user doesn&rsquo;t
exist:
</p>
<div class="example">
<pre class="example-preformatted">function fill_info_for_user(user,
                            pwent, fields, groupnames, grent, groups, i)
{
    pwent = getpwnam(user)
    if (pwent == &quot;&quot;) {
        printf(&quot;id: '%s': no such user\n&quot;, user) &gt; &quot;/dev/stderr&quot;
        exit 1
    }

    split(pwent, fields, &quot;:&quot;)
    uid = fields[3] + 0
    gid = fields[4] + 0
</pre></div>

<p>Getting the group set is a little awkward. The library routine
<code class="code">getgruser()</code> returns a list of group <em class="emph">names</em>. These
have to be gone through and turned back into group numbers,
so that the rest of the code will work as expected:
</p>
<div class="example">
<pre class="example-preformatted">    groupnames = getgruser(user)
    split(groupnames, groups, &quot; &quot;)
    for (i = 1; i in groups; i++) {
        grent = getgrnam(groups[i])
        split(grent, fields, &quot;:&quot;)
        groupset[i] = fields[3] + 0
    }
}
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Split-Program">
<div class="nav-panel">
<p>
Next: <a href="#Tee-Program" accesskey="n" rel="next">Duplicating Output into Multiple Files</a>, Previous: <a href="#Id-Program" accesskey="p" rel="prev">Printing Out User Information</a>, Up: <a href="#Clones" accesskey="u" rel="up">Reinventing Wheels for Fun and Profit</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Splitting-a-Large-File-into-Pieces"><span>11.2.4 Splitting a Large File into Pieces<a class="copiable-link" href="#Splitting-a-Large-File-into-Pieces"> &para;</a></span></h4>

<a class="index-entry-id" id="index-files-splitting"></a>
<a class="index-entry-id" id="index-split-utility"></a>
<p>The <code class="command">split</code> utility splits large text files into smaller pieces.
The usage follows the POSIX standard for <code class="command">split</code> and is as follows:
</p>
<div class="display">
<pre class="display-preformatted"><code class="command">split</code> [<samp class="option">-l</samp> <var class="var">count</var>] [<samp class="option">-a</samp> <var class="var">suffix-len</var>] [<var class="var">file</var> [<var class="var">outname</var>]]
<code class="command">split</code> <samp class="option">-b</samp> <var class="var">N</var>[<code class="code">k</code>|<code class="code">m</code>]] [<samp class="option">-a</samp> <var class="var">suffix-len</var>] [<var class="var">file</var> [<var class="var">outname</var>]]
</pre></div>

<p>By default, the output files are named <samp class="file">xaa</samp>, <samp class="file">xab</samp>, and so
on. Each file has 1,000 lines in it, with the likely exception of the
last file.
</p>
<p>The <code class="command">split</code> program has evolved over time, and the current POSIX
version is more complicated than the original Unix version.  The options
and what they do are as follows:
</p>
<dl class="table">
<dt><samp class="option">-a</samp> <var class="var">suffix-len</var></dt>
<dd><p>Use <var class="var">suffix-len</var> characters for the suffix. For example, if <var class="var">suffix-len</var>
is four, the output files would range from <samp class="file">xaaaa</samp> to <samp class="file">xzzzz</samp>.
</p>
</dd>
<dt><samp class="option">-b</samp> <var class="var">N</var>[<code class="code">k</code>|<code class="code">m</code>]]</dt>
<dd><p>Instead of each file containing a specified number of lines, each file
should have (at most) <var class="var">N</var> bytes.  Supplying a trailing &lsquo;<samp class="samp">k</samp>&rsquo;
multiplies <var class="var">N</var> by 1,024, yielding kilobytes.  Supplying a trailing
&lsquo;<samp class="samp">m</samp>&rsquo; multiplies <var class="var">N</var> by 1,048,576 (<em class="math">1,024 * 1,024</em>)
yielding megabytes.  (This option is mutually exclusive with <samp class="option">-l</samp>).
</p>
</dd>
<dt><samp class="option">-l</samp> <var class="var">count</var></dt>
<dd><p>Each file should have at most <var class="var">count</var> lines, instead of the default
1,000.  (This option is mutually exclusive with <samp class="option">-b</samp>).
</p></dd>
</dl>

<p>If supplied, <var class="var">file</var> is the input file to read. Otherwise standard
input is processed.  If supplied, <var class="var">outname</var> is the leading prefix
to use for file names, instead of &lsquo;<samp class="samp">x</samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-LC_005fALL-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-LC_005fALL"></a>
<p>In order to use the <samp class="option">-b</samp> option, <code class="command">gawk</code> should be invoked
with its <samp class="option">-b</samp> option (see <a class="pxref" href="#Options">Command-Line Options</a>), or with the environment
variable <code class="env">LC_ALL</code> set to &lsquo;<samp class="samp">C</samp>&rsquo;, so that each input byte is treated
as a separate character.<a class="footnote" id="DOCF78" href="#FOOT78"><sup>78</sup></a>
</p>
<p>Here is an implementation of <code class="command">split</code> in <code class="command">awk</code>. It uses the
<code class="code">getopt()</code> function presented in <a class="ref" href="#Getopt-Function">Processing Command-Line Options</a>.
</p>
<p>The program begins with a standard descriptive comment and then
a <code class="code">usage()</code> function describing the options. The variable
<code class="code">common</code> keeps the function&rsquo;s lines short so that they
look nice on the page:
</p>
<a class="index-entry-id" id="index-split_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># split.awk --- do split in awk
#
# Requires getopt() library function.

function usage(     common)
{
    common = &quot;[-a suffix-len] [file [outname]]&quot;
    printf(&quot;usage: split [-l count]  %s\n&quot;, common) &gt; &quot;/dev/stderr&quot;
    printf(&quot;       split [-b N[k|m]] %s\n&quot;, common) &gt; &quot;/dev/stderr&quot;
    exit 1
}
</pre></div>

<p>Next, in a <code class="code">BEGIN</code> rule we set the default values and parse the arguments.
After that we initialize the data structures used to cycle the suffix
from &lsquo;<samp class="samp">aa&hellip;</samp>&rsquo; to &lsquo;<samp class="samp">zz&hellip;</samp>&rsquo;. Finally we set the name of
the first output file:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    # Set defaults:
    Suffix_length = 2
    Line_count = 1000
    Byte_count = 0
    Outfile = &quot;x&quot;

    parse_arguments()

    init_suffix_data()

    Output = (Outfile compute_suffix())
}
</pre></div>

<p>Parsing the arguments is straightforward.  The program follows our
convention (see <a class="pxref" href="#Library-Names">Naming Library Function Global Variables</a>) of having important global variables
start with an uppercase letter:
</p>
<div class="example">
<pre class="example-preformatted">function parse_arguments(   i, c, l, modifier)
{
    while ((c = getopt(ARGC, ARGV, &quot;a:b:l:&quot;)) != -1) {
        if (c == &quot;a&quot;)
            Suffix_length = Optarg + 0
        else if (c == &quot;b&quot;) {
            Byte_count = Optarg + 0
            Line_count = 0

            l = length(Optarg)
            modifier = substr(Optarg, l, 1)
            if (modifier == &quot;k&quot;)
                Byte_count *= 1024
            else if (modifier == &quot;m&quot;)
                Byte_count *= 1024 * 1024
        } else if (c == &quot;l&quot;) {
            Line_count = Optarg + 0
            Byte_count = 0
        } else
            usage()
    }

    # Clear out options
    for (i = 1; i &lt; Optind; i++)
        ARGV[i] = &quot;&quot;

    # Check for filename
    if (ARGV[Optind]) {
        Optind++

        # Check for different prefix
        if (ARGV[Optind]) {
            Outfile = ARGV[Optind]
            ARGV[Optind] = &quot;&quot;

            if (++Optind &lt; ARGC)
                usage()
        }
    }
}
</pre></div>

<p>Managing the file name suffix is interesting.
Given a suffix of length three, say, the values go from
&lsquo;<samp class="samp">aaa</samp>&rsquo;, &lsquo;<samp class="samp">aab</samp>&rsquo;, &lsquo;<samp class="samp">aac</samp>&rsquo; and so on, all the way to
&lsquo;<samp class="samp">zzx</samp>&rsquo;, &lsquo;<samp class="samp">zzy</samp>&rsquo;, and finally &lsquo;<samp class="samp">zzz</samp>&rsquo;.
There are two important aspects to this:
</p>
<ul class="itemize mark-bullet">
<li>We have to be
able to easily generate these suffixes, and in particular
easily handle &ldquo;rolling over&rdquo;; for example, going from
&lsquo;<samp class="samp">abz</samp>&rsquo; to &lsquo;<samp class="samp">aca</samp>&rsquo;.

</li><li>We have to tell when we&rsquo;ve finished with the last file,
so that if we still have more input data we can print an
error message and exit. The trick is to handle this <em class="emph">after</em>
using the last suffix, and not when the final suffix is created.
</li></ul>

<p>The computation is handled by <code class="code">compute_suffix()</code>.
This function is called every time a new file is opened.
</p>
<p>The flow here is messy, because we want to generate &lsquo;<samp class="samp">zzzz</samp>&rsquo; (say),
and use it, and only produce an error after all the file name
suffixes have been used up. The logical steps are as follows:
</p>
<ol class="enumerate">
<li> Generate the suffix, saving the value in <code class="code">result</code> to return.
To do this, the supplementary array <code class="code">Suffix_ind</code> contains one
element for each letter in the suffix.  Each element ranges from 1 to
26, acting as the index into a string containing all the lowercase
letters of the English alphabet.
It is initialized by <code class="code">init_suffix_data()</code>.
<code class="code">result</code> is built up one letter at a time, using each <code class="code">substr()</code>.

</li><li> Prepare the data structures for the next time <code class="code">compute_suffix()</code>
is called. To do this, we loop over <code class="code">Suffix_ind</code>, <em class="emph">backwards</em>.
If the current element is less than 26, it&rsquo;s incremented and the loop
breaks (&lsquo;<samp class="samp">abq</samp>&rsquo; goes to &lsquo;<samp class="samp">abr</samp>&rsquo;). Otherwise, the element is
reset to one and we move down the list (&lsquo;<samp class="samp">abz</samp>&rsquo; to &lsquo;<samp class="samp">aca</samp>&rsquo;).
Thus, the <code class="code">Suffix_ind</code> array is always &ldquo;one step ahead&rdquo; of the actual
file name suffix to be returned.

</li><li> Check if we&rsquo;ve gone past the limit of possible file names.
If <code class="code">Reached_last</code> is true, print a message and exit. Otherwise,
check if <code class="code">Suffix_ind</code> describes a suffix where all the letters are
&lsquo;<samp class="samp">z</samp>&rsquo;. If that&rsquo;s the case we&rsquo;re about to return the final suffix. If
so, we set <code class="code">Reached_last</code> to true so that the <em class="emph">next</em> call to
<code class="code">compute_suffix()</code> will cause a failure.
</li></ol>

<p>Physically, the steps in the function occur in the order 3, 1, 2:
</p>
<div class="example">
<pre class="example-preformatted">function compute_suffix(    i, result, letters)
{
    # Logical step 3
    if (Reached_last) {
        printf(&quot;split: too many files!\n&quot;) &gt; &quot;/dev/stderr&quot;
        exit 1
    } else if (on_last_file())
        Reached_last = 1    # fail when wrapping after 'zzz'

    # Logical step 1
    result = &quot;&quot;
    letters = &quot;abcdefghijklmnopqrstuvwxyz&quot;
    for (i = 1; i &lt;= Suffix_length; i++)
        result = result substr(letters, Suffix_ind[i], 1)

    # Logical step 2
    for (i = Suffix_length; i &gt;= 1; i--) {
        if (++Suffix_ind[i] &gt; 26) {
            Suffix_ind[i] = 1
        } else
            break
    }

    return result
}
</pre></div>

<p>The <code class="code">Suffix_ind</code> array and <code class="code">Reached_last</code> are initialized
by <code class="code">init_suffix_data()</code>:
</p>
<div class="example">
<pre class="example-preformatted">function init_suffix_data(  i)
{
    for (i = 1; i &lt;= Suffix_length; i++)
        Suffix_ind[i] = 1

    Reached_last = 0
}
</pre></div>

<p>The function <code class="code">on_last_file()</code> returns true if <code class="code">Suffix_ind</code> describes
a suffix where all the letters are &lsquo;<samp class="samp">z</samp>&rsquo; by checking that all the elements
in the array are equal to 26:
</p>
<div class="example">
<pre class="example-preformatted">function on_last_file(  i, on_last)
{
    on_last = 1
    for (i = 1; i &lt;= Suffix_length; i++) {
        on_last = on_last &amp;&amp; (Suffix_ind[i] == 26)
    }

    return on_last
}
</pre></div>

<p>The actual work of splitting the input file is done by the next two rules.
Since splitting by line count and splitting by byte count are mutually
exclusive, we simply use two separate rules, one for when <code class="code">Line_count</code>
is greater than zero, and another for when <code class="code">Byte_count</code> is greater than zero.
</p>
<p>The variable <code class="code">tcount</code> counts how many lines have been processed so far.
When it exceeds <code class="code">Line_count</code>, it&rsquo;s time to close the previous file and
switch to a new one:
</p>
<div class="example">
<pre class="example-preformatted">Line_count &gt; 0 {
    if (++tcount &gt; Line_count) {
        close(Output)
        Output = (Outfile compute_suffix())
        tcount = 1
    }
    print &gt; Output
}
</pre></div>

<p>The rule for handling bytes is more complicated.  Since lines most likely
vary in length, the <code class="code">Byte_count</code> boundary may be hit in the middle of
an input record.  In that case, <code class="command">split</code> has to write enough of the
first bytes of the input record to finish up <code class="code">Byte_count</code> bytes, close
the file, open a new file, and write the rest of the record to the new file.
The logic here does all that:
</p>
<div class="example">
<pre class="example-preformatted">Byte_count &gt; 0 {
    # `+ 1' is for the final newline
    if (tcount + length($0) + 1 &gt; Byte_count) { # would overflow
        # compute leading bytes
        leading_bytes = Byte_count - tcount

        # write leading bytes
        printf(&quot;%s&quot;, substr($0, 1, leading_bytes)) &gt; Output

        # close old file, open new file
        close(Output)
        Output = (Outfile compute_suffix())

        # set up first bytes for new file
        $0 = substr($0, leading_bytes + 1)  # trailing bytes
        tcount = 0
    }

    # write full record or trailing bytes
    tcount += length($0) + 1
    print &gt; Output
}
</pre></div>

<p>Finally, the <code class="code">END</code> rule cleans up by closing the last output file:
</p>
<div class="example">
<pre class="example-preformatted">END {
    close(Output)
}
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Tee-Program">
<div class="nav-panel">
<p>
Next: <a href="#Uniq-Program" accesskey="n" rel="next">Printing Nonduplicated Lines of Text</a>, Previous: <a href="#Split-Program" accesskey="p" rel="prev">Splitting a Large File into Pieces</a>, Up: <a href="#Clones" accesskey="u" rel="up">Reinventing Wheels for Fun and Profit</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Duplicating-Output-into-Multiple-Files"><span>11.2.5 Duplicating Output into Multiple Files<a class="copiable-link" href="#Duplicating-Output-into-Multiple-Files"> &para;</a></span></h4>

<a class="index-entry-id" id="index-files-multiple_002c-duplicating-output-into"></a>
<a class="index-entry-id" id="index-output-duplicating-into-files"></a>
<a class="index-entry-id" id="index-tee-utility"></a>
<p>The <code class="code">tee</code> program is known as a &ldquo;pipe fitting.&rdquo;  <code class="code">tee</code> copies
its standard input to its standard output and also duplicates it to the
files named on the command line.  Its usage is as follows:
</p>
<div class="display">
<pre class="display-preformatted"><code class="command">tee</code> [<samp class="option">-a</samp>] <var class="var">file</var> ...
</pre></div>

<p>The <samp class="option">-a</samp> option tells <code class="code">tee</code> to append to the named files, instead of
truncating them and starting over.
</p>
<p>The <code class="code">BEGIN</code> rule first makes a copy of all the command-line arguments
into an array named <code class="code">copy</code>.
<code class="code">ARGV[0]</code> is not needed, so it is not copied.
<code class="code">tee</code> cannot use <code class="code">ARGV</code> directly, because <code class="command">awk</code> attempts to
process each file name in <code class="code">ARGV</code> as input data.
</p>
<a class="index-entry-id" id="index-flag-variables-1"></a>
<p>If the first argument is <samp class="option">-a</samp>, then the flag variable
<code class="code">append</code> is set to true, and both <code class="code">ARGV[1]</code> and
<code class="code">copy[1]</code> are deleted. If <code class="code">ARGC</code> is less than two, then no
file names were supplied and <code class="code">tee</code> prints a usage message and exits.
Finally, <code class="command">awk</code> is forced to read the standard input by setting
<code class="code">ARGV[1]</code> to <code class="code">&quot;-&quot;</code> and <code class="code">ARGC</code> to two:
</p>
<a class="index-entry-id" id="index-tee_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># tee.awk --- tee in awk
#
# Copy standard input to all named output files.
# Append content if -a option is supplied.
#
BEGIN {
    for (i = 1; i &lt; ARGC; i++)
        copy[i] = ARGV[i]

    if (ARGV[1] == &quot;-a&quot;) {
        append = 1
        delete ARGV[1]
        delete copy[1]
        ARGC--
    }
    if (ARGC &lt; 2) {
        print &quot;usage: tee [-a] file ...&quot; &gt; &quot;/dev/stderr&quot;
        exit 1
    }
    ARGV[1] = &quot;-&quot;
    ARGC = 2
}
</pre></div>

<p>The following single rule does all the work.  Because there is no pattern, it is
executed for each line of input.  The body of the rule simply prints the
line into each file on the command line, and then to the standard output:
</p>
<div class="example">
<pre class="example-preformatted">{
    # moving the if outside the loop makes it run faster
    if (append)
        for (i in copy)
            print &gt;&gt; copy[i]
    else
        for (i in copy)
            print &gt; copy[i]
    print
}
</pre></div>

<p>It is also possible to write the loop this way:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">for (i in copy)
    if (append)
        print &gt;&gt; copy[i]
</pre></div><div class="group"><pre class="example-preformatted">    else
        print &gt; copy[i]
</pre></div></div>

<p>This is more concise, but it is also less efficient.  The &lsquo;<samp class="samp">if</samp>&rsquo; is
tested for each record and for each output file.  By duplicating the loop
body, the &lsquo;<samp class="samp">if</samp>&rsquo; is only tested once for each input record.  If there are
<var class="var">N</var> input records and <var class="var">M</var> output files, the first method only
executes <var class="var">N</var> &lsquo;<samp class="samp">if</samp>&rsquo; statements, while the second executes
<var class="var">N</var><code class="code">*</code><var class="var">M</var> &lsquo;<samp class="samp">if</samp>&rsquo; statements.
</p>
<p>Finally, the <code class="code">END</code> rule cleans up by closing all the output files:
</p>
<div class="example">
<pre class="example-preformatted">END {
    for (i in copy)
        close(copy[i])
}
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Uniq-Program">
<div class="nav-panel">
<p>
Next: <a href="#Wc-Program" accesskey="n" rel="next">Counting Things</a>, Previous: <a href="#Tee-Program" accesskey="p" rel="prev">Duplicating Output into Multiple Files</a>, Up: <a href="#Clones" accesskey="u" rel="up">Reinventing Wheels for Fun and Profit</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Printing-Nonduplicated-Lines-of-Text"><span>11.2.6 Printing Nonduplicated Lines of Text<a class="copiable-link" href="#Printing-Nonduplicated-Lines-of-Text"> &para;</a></span></h4>

<a class="index-entry-id" id="index-printing-unduplicated-lines-of-text"></a>
<a class="index-entry-id" id="index-text_002c-printing-unduplicated-lines-of"></a>
<a class="index-entry-id" id="index-uniq-utility"></a>
<p>The <code class="command">uniq</code> utility reads sorted lines of data on its standard
input, and by default removes duplicate lines.  In other words, it only
prints unique lines&mdash;hence the name.  <code class="command">uniq</code> has a number of
options. The usage is as follows:
</p>
<div class="display">
<pre class="display-preformatted"><code class="command">uniq</code> [<samp class="option">-udc</samp> [<code class="code">-f <var class="var">n</var></code>] [<code class="code">-s <var class="var">n</var></code>]] [<var class="var">inputfile</var> [<var class="var">outputfile</var>]]
</pre></div>

<p>The options for <code class="command">uniq</code> are:
</p>
<dl class="table">
<dt><code class="code">-d</code></dt>
<dd><p>Print only repeated (duplicated) lines.
</p>
</dd>
<dt><code class="code">-u</code></dt>
<dd><p>Print only nonrepeated (unique) lines.
</p>
</dd>
<dt><code class="code">-c</code></dt>
<dd><p>Count lines. This option overrides <samp class="option">-d</samp> and <samp class="option">-u</samp>.  Both repeated
and nonrepeated lines are counted.
</p>
</dd>
<dt><code class="code">-f <var class="var">n</var></code></dt>
<dd><p>Skip <var class="var">n</var> fields before comparing lines.  The definition of fields
is similar to <code class="command">awk</code>&rsquo;s default: nonwhitespace characters separated
by runs of spaces and/or TABs.
</p>
</dd>
<dt><code class="code">-s <var class="var">n</var></code></dt>
<dd><p>Skip <var class="var">n</var> characters before comparing lines.  Any fields specified with
<samp class="option">-f</samp> are skipped first.
</p>
</dd>
<dt><code class="code"><var class="var">inputfile</var></code></dt>
<dd><p>Data is read from the input file named on the command line, instead of from
the standard input.
</p>
</dd>
<dt><code class="code"><var class="var">outputfile</var></code></dt>
<dd><p>The generated output is sent to the named output file, instead of to the
standard output.
</p></dd>
</dl>

<p>Normally <code class="command">uniq</code> behaves as if both the <samp class="option">-d</samp> and
<samp class="option">-u</samp> options are provided.
</p>
<p><code class="command">uniq</code> uses the
<code class="code">getopt()</code> library function
(see <a class="pxref" href="#Getopt-Function">Processing Command-Line Options</a>)
and the <code class="code">join()</code> library function
(see <a class="pxref" href="#Join-Function">Merging an Array into a String</a>).
</p>
<p>The program begins with a <code class="code">usage()</code> function and then a brief outline of
the options and their meanings in comments:
</p>
<a class="index-entry-id" id="index-uniq_002eawk-program"></a>
<div class="example">
<div class="group"><pre class="example-preformatted"># uniq.awk --- do uniq in awk
#
# Requires getopt() and join() library functions
</pre></div><pre class="example-preformatted">

function usage()
{
    print(&quot;Usage: uniq [-udc [-f fields] [-s chars]] &quot; \
          &quot;[ in [ out ]]&quot;) &gt; &quot;/dev/stderr&quot;
    exit 1
}

# -c    count lines. overrides -d and -u
# -d    only repeated lines
# -u    only nonrepeated lines
# -f n  skip n fields
# -s n  skip n characters, skip fields first
</pre></div>

<p>The POSIX standard for <code class="command">uniq</code> allows options to start with
&lsquo;<samp class="samp">+</samp>&rsquo; as well as with &lsquo;<samp class="samp">-</samp>&rsquo;.  An initial <code class="code">BEGIN</code> rule
traverses the arguments changing any leading &lsquo;<samp class="samp">+</samp>&rsquo; to &lsquo;<samp class="samp">-</samp>&rsquo;
so that the <code class="code">getopt()</code> function can parse the options:
</p>
<div class="example">
<pre class="example-preformatted"># As of 2020, '+' can be used as the option character in addition to '-'
# Previously allowed use of -N to skip fields and +N to skip
# characters is no longer allowed, and not supported by this version.

BEGIN {
    # Convert + to - so getopt can handle things
    for (i = 1; i &lt; ARGC; i++) {
        first = substr(ARGV[i], 1, 1)
        if (ARGV[i] == &quot;--&quot; || (first != &quot;-&quot; &amp;&amp; first != &quot;+&quot;))
            break
        else if (first == &quot;+&quot;)
            # Replace &quot;+&quot; with &quot;-&quot;
            ARGV[i] = &quot;-&quot; substr(ARGV[i], 2)
    }
}
</pre></div>

<p>The next <code class="code">BEGIN</code> rule deals with the command-line arguments and options.
If no options are supplied, then the default is taken, to print both
repeated and nonrepeated lines.  The output file, if provided, is assigned
to <code class="code">outputfile</code>.  Early on, <code class="code">outputfile</code> is initialized to the
standard output, <samp class="file">/dev/stdout</samp>:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    count = 1
    outputfile = &quot;/dev/stdout&quot;
    opts = &quot;udcf:s:&quot;
    while ((c = getopt(ARGC, ARGV, opts)) != -1) {
        if (c == &quot;u&quot;)
            non_repeated_only++
        else if (c == &quot;d&quot;)
            repeated_only++
        else if (c == &quot;c&quot;)
            do_count++
        else if (c == &quot;f&quot;)
            fcount = Optarg + 0
        else if (c == &quot;s&quot;)
            charcount = Optarg + 0
        else
            usage()
    }

    for (i = 1; i &lt; Optind; i++)
        ARGV[i] = &quot;&quot;

    if (repeated_only == 0 &amp;&amp; non_repeated_only == 0)
        repeated_only = non_repeated_only = 1

    if (ARGC - Optind == 2) {
        outputfile = ARGV[ARGC - 1]
        ARGV[ARGC - 1] = &quot;&quot;
    }
}
</pre></div>

<p>The following function, <code class="code">are_equal()</code>, compares the current line,
<code class="code">$0</code>, to the previous line, <code class="code">last</code>.  It handles skipping fields
and characters.  If no field count and no character count are specified,
<code class="code">are_equal()</code> returns one or zero depending upon the result of a
simple string comparison of <code class="code">last</code> and <code class="code">$0</code>.
</p>
<p>Otherwise, things get more complicated.  If fields have to be skipped,
each line is broken into an array using <code class="code">split()</code> (see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>); the desired fields are then joined back into a line
using <code class="code">join()</code>.  The joined lines are stored in <code class="code">clast</code> and
<code class="code">cline</code>.  If no fields are skipped, <code class="code">clast</code> and <code class="code">cline</code>
are set to <code class="code">last</code> and <code class="code">$0</code>, respectively.  Finally, if
characters are skipped, <code class="code">substr()</code> is used to strip off the leading
<code class="code">charcount</code> characters in <code class="code">clast</code> and <code class="code">cline</code>.  The two
strings are then compared and <code class="code">are_equal()</code> returns the result:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">function are_equal(    n, m, clast, cline, alast, aline)
{
    if (fcount == 0 &amp;&amp; charcount == 0)
        return (last == $0)
</pre></div><pre class="example-preformatted">

    if (fcount &gt; 0) {
        n = split(last, alast)
        m = split($0, aline)
        clast = join(alast, fcount+1, n)
        cline = join(aline, fcount+1, m)
    } else {
        clast = last
        cline = $0
    }
    if (charcount) {
        clast = substr(clast, charcount + 1)
        cline = substr(cline, charcount + 1)
    }
</pre><div class="group"><pre class="example-preformatted">

    return (clast == cline)
}
</pre></div></div>

<p>The following two rules are the body of the program.  The first one is
executed only for the very first line of data.  It sets <code class="code">last</code> equal to
<code class="code">$0</code>, so that subsequent lines of text have something to be compared to.
</p>
<p>The second rule does the work. The variable <code class="code">equal</code> is one or zero,
depending upon the results of <code class="code">are_equal()</code>&rsquo;s comparison. If <code class="command">uniq</code>
is counting repeated lines, and the lines are equal, then it increments the <code class="code">count</code> variable.
Otherwise, it prints the line and resets <code class="code">count</code>,
because the two lines are not equal.
</p>
<p>If <code class="command">uniq</code> is not counting, and if the lines are equal, <code class="code">count</code> is incremented.
Nothing is printed, as the point is to remove duplicates.
Otherwise, if <code class="command">uniq</code> is counting repeated lines and more than
one line is seen, or if <code class="command">uniq</code> is counting nonrepeated lines
and only one line is seen, then the line is printed, and <code class="code">count</code>
is reset.
</p>
<p>Finally, similar logic is used in the <code class="code">END</code> rule to print the final
line of input data:
</p>
<div class="example">
<pre class="example-preformatted">NR == 1 {
    last = $0
    next
}

{
    equal = are_equal()

    if (do_count) {    # overrides -d and -u
        if (equal)
            count++
        else {
            printf(&quot;%4d %s\n&quot;, count, last) &gt; outputfile
            last = $0
            count = 1    # reset
        }
        next
    }

    if (equal)
        count++
    else {
        if ((repeated_only &amp;&amp; count &gt; 1) ||
            (non_repeated_only &amp;&amp; count == 1))
                print last &gt; outputfile
        last = $0
        count = 1
    }
}

END {
    if (do_count)
        printf(&quot;%4d %s\n&quot;, count, last) &gt; outputfile
</pre><div class="group"><pre class="example-preformatted">    else if ((repeated_only &amp;&amp; count &gt; 1) ||
            (non_repeated_only &amp;&amp; count == 1))
        print last &gt; outputfile
    close(outputfile)
}
</pre></div></div>

<p>As a side note, this program does not follow our recommended convention of naming
global variables with a leading capital letter.  Doing that would
make the program a little easier to follow.
</p>


<hr>
</div>
<div class="subsection-level-extent" id="Wc-Program">
<div class="nav-panel">
<p>
Previous: <a href="#Uniq-Program" accesskey="p" rel="prev">Printing Nonduplicated Lines of Text</a>, Up: <a href="#Clones" accesskey="u" rel="up">Reinventing Wheels for Fun and Profit</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Counting-Things"><span>11.2.7 Counting Things<a class="copiable-link" href="#Counting-Things"> &para;</a></span></h4>

<a class="index-entry-id" id="index-counting-words_002c-lines_002c-characters_002c-and-bytes"></a>
<a class="index-entry-id" id="index-input-files-counting-elements-in"></a>
<a class="index-entry-id" id="index-words-counting"></a>
<a class="index-entry-id" id="index-characters-counting"></a>
<a class="index-entry-id" id="index-lines-counting"></a>
<a class="index-entry-id" id="index-bytes-counting"></a>
<a class="index-entry-id" id="index-wc-utility"></a>
<p>The <code class="command">wc</code> (word count) utility counts lines, words, characters
and bytes in one or more input files.
</p>

<ul class="mini-toc">
<li><a href="#Bytes-vs_002e-Characters" accesskey="1">Modern Character Sets</a></li>
<li><a href="#Using-extensions" accesskey="2">A Brief Introduction To Extensions</a></li>
<li><a href="#wc-program" accesskey="3">Code for <samp class="file">wc.awk</samp></a></li>
</ul>
<hr>
<div class="subsubsection-level-extent" id="Bytes-vs_002e-Characters">
<div class="nav-panel">
<p>
Next: <a href="#Using-extensions" accesskey="n" rel="next">A Brief Introduction To Extensions</a>, Up: <a href="#Wc-Program" accesskey="u" rel="up">Counting Things</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Modern-Character-Sets"><span>11.2.7.1 Modern Character Sets<a class="copiable-link" href="#Modern-Character-Sets"> &para;</a></span></h4>

<p>In the early days of computing, single bytes were used for storing
characters.  The most common character sets were ASCII and EBCDIC,
which each provided all the English upper- and lowercase letters, the 10
Hindu-Arabic numerals from 0 through 9, and a number of other standard
punctuation and control characters.
</p>
<p>Today, the most popular character set in use is Unicode (of which ASCII
is a pure subset). Unicode provides tens of thousands of unique characters
(called <em class="dfn">code points</em>) to cover most existing human languages (living
and dead) and a number of  nonhuman ones as well (such as Klingon and
J.R.R. Tolkien&rsquo;s elvish languages).
</p>
<p>To save space in files, Unicode code points are <em class="dfn">encoded</em>, where each
character takes from one to four bytes in the file.  UTF-8 is possibly
the most popular of such <em class="dfn">multibyte encodings</em>.
</p>
<p>The POSIX standard requires that <code class="command">awk</code> function in terms
of characters, not bytes.  Thus in <code class="command">gawk</code>, <code class="code">length()</code>,
<code class="code">substr()</code>, <code class="code">split()</code>, <code class="code">match()</code> and the other string
functions (see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>) all work in terms of characters in
the local character set, and not in terms of bytes. (Not all <code class="command">awk</code>
implementations do so, though).
</p>
<p>There is no standard, built-in way to distinguish characters from bytes
in an <code class="command">awk</code> program.  For an <code class="command">awk</code> implementation of
<code class="command">wc</code>, which needs to make such a distinction, we will have to
use an external extension.
</p>
<hr>
</div>
<div class="subsubsection-level-extent" id="Using-extensions">
<div class="nav-panel">
<p>
Next: <a href="#wc-program" accesskey="n" rel="next">Code for <samp class="file">wc.awk</samp></a>, Previous: <a href="#Bytes-vs_002e-Characters" accesskey="p" rel="prev">Modern Character Sets</a>, Up: <a href="#Wc-Program" accesskey="u" rel="up">Counting Things</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="A-Brief-Introduction-To-Extensions"><span>11.2.7.2 A Brief Introduction To Extensions<a class="copiable-link" href="#A-Brief-Introduction-To-Extensions"> &para;</a></span></h4>

<p>Loadable extensions are presented in full detail in <a class="ref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>.
They provide a way to add functions to <code class="command">gawk</code> which can call
out to other facilities written in C or C++.
</p>
<p>For the purposes of
<samp class="file">wc.awk</samp>, it&rsquo;s enough to know that the extension is loaded
with the <code class="code">@load</code> directive, and the additional function we
will use is called <code class="code">mbs_length()</code>.  This function returns the
number of bytes in a string, not the number of characters.
</p>
<p>The <code class="code">&quot;mbs&quot;</code> extension comes from the <code class="code">gawkextlib</code>
project. See <a class="xref" href="#gawkextlib">The <code class="code">gawkextlib</code> Project</a> for more information.
</p>
<hr>
</div>
<div class="subsubsection-level-extent" id="wc-program">
<div class="nav-panel">
<p>
Previous: <a href="#Using-extensions" accesskey="p" rel="prev">A Brief Introduction To Extensions</a>, Up: <a href="#Wc-Program" accesskey="u" rel="up">Counting Things</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Code-for-wc_002eawk"><span>11.2.7.3 Code for <samp class="file">wc.awk</samp><a class="copiable-link" href="#Code-for-wc_002eawk"> &para;</a></span></h4>

<p>The usage for <code class="command">wc</code> is as follows:
</p>
<div class="display">
<pre class="display-preformatted"><code class="command">wc</code> [<samp class="option">-lwcm</samp>] [<var class="var">files</var> ...]
</pre></div>

<p>If no files are specified on the command line, <code class="command">wc</code> reads its standard
input. If there are multiple files, it also prints total counts for all
the files.  The options and their meanings are as follows:
</p>
<dl class="table">
<dt><code class="code">-c</code></dt>
<dd><p>Count only bytes.
Once upon a time, the &lsquo;<samp class="samp">c</samp>&rsquo; in this option stood for &ldquo;characters.&rdquo;
But, as explained earlier, bytes and character are no longer synonymous
with each other.
</p>
</dd>
<dt><code class="code">-l</code></dt>
<dd><p>Count only lines.
</p>
</dd>
<dt><code class="code">-m</code></dt>
<dd><p>Count only characters.
</p>
</dd>
<dt><code class="code">-w</code></dt>
<dd><p>Count only words.
A &ldquo;word&rdquo; is a contiguous sequence of nonwhitespace characters, separated
by spaces and/or TABs.  Luckily, this is the normal way <code class="command">awk</code> separates
fields in its input data.
</p></dd>
</dl>

<p>Implementing <code class="command">wc</code> in <code class="command">awk</code> is particularly elegant,
because <code class="command">awk</code> does a lot of the work for us; it splits lines into
words (i.e., fields) and counts them, it counts lines (i.e., records),
and it can easily tell us how long a line is in characters.
</p>
<p>This program uses the <code class="code">getopt()</code> library function
(see <a class="pxref" href="#Getopt-Function">Processing Command-Line Options</a>)
and the file-transition functions
(see <a class="pxref" href="#Filetrans-Function">Noting Data file Boundaries</a>).
</p>
<p>This version has one notable difference from older versions of
<code class="command">wc</code>: it always prints the counts in the order lines, words,
characters and bytes.  Older versions note the order of the <samp class="option">-l</samp>,
<samp class="option">-w</samp>, and <samp class="option">-c</samp> options on the command line, and print the
counts in that order.  POSIX does not mandate this behavior, though.
</p>
<p>The <code class="code">BEGIN</code> rule does the argument processing.  The variable
<code class="code">print_total</code> is true if more than one file is named on the
command line:
</p>
<a class="index-entry-id" id="index-wc_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># wc.awk --- count lines, words, characters, bytes

# Options:
#    -l    only count lines
#    -w    only count words
#    -c    only count bytes
#    -m    only count characters
#
# Default is to count lines, words, bytes
#
# Requires getopt() and file transition library functions
# Requires mbs extension from gawkextlib

@load &quot;mbs&quot;

BEGIN {
    # let getopt() print a message about
    # invalid options. we ignore them
    while ((c = getopt(ARGC, ARGV, &quot;lwcm&quot;)) != -1) {
        if (c == &quot;l&quot;)
            do_lines = 1
        else if (c == &quot;w&quot;)
            do_words = 1
        else if (c == &quot;c&quot;)
            do_bytes = 1
        else if (c == &quot;m&quot;)
            do_chars = 1
    }
    for (i = 1; i &lt; Optind; i++)
        ARGV[i] = &quot;&quot;

    # if no options, do lines, words, bytes
    if (! do_lines &amp;&amp; ! do_words &amp;&amp; ! do_chars &amp;&amp; ! do_bytes)
        do_lines = do_words = do_bytes = 1

    print_total = (ARGC - i &gt; 1)
}
</pre></div>

<p>The <code class="code">beginfile()</code> function is simple; it just resets the counts of lines,
words, characters and bytes to zero, and saves the current file name in
<code class="code">fname</code>:
</p>
<div class="example">
<pre class="example-preformatted">function beginfile(file)
{
    lines = words = chars = bytes = 0
    fname = FILENAME
}
</pre></div>

<p>The <code class="code">endfile()</code> function adds the current file&rsquo;s numbers to the
running totals of lines, words, and characters.  It then prints out those
numbers for the file that was just read. It relies on <code class="code">beginfile()</code>
to reset the numbers for the following data file:
</p>
<div class="example">
<pre class="example-preformatted">function endfile(file)
{
    tlines += lines
    twords += words
    tchars += chars
    tbytes += bytes
    if (do_lines)
        printf &quot;\t%d&quot;, lines
</pre><div class="group"><pre class="example-preformatted">    if (do_words)
        printf &quot;\t%d&quot;, words
</pre></div><pre class="example-preformatted">    if (do_chars)
        printf &quot;\t%d&quot;, chars
    if (do_bytes)
        printf &quot;\t%d&quot;, bytes
    printf &quot;\t%s\n&quot;, fname
}
</pre></div>

<p>There is one rule that is executed for each line. It adds the length of
the record, plus one, to <code class="code">chars</code>.  Adding one plus the record length
is needed because the newline character separating records (the value
of <code class="code">RS</code>) is not part of the record itself, and thus not included
in its length.  Similarly, it adds the length of the record in bytes,
plus one, to <code class="code">bytes</code>.  Next, <code class="code">lines</code> is incremented for each
line read, and <code class="code">words</code> is incremented by the value of <code class="code">NF</code>,
which is the number of &ldquo;words&rdquo; on this line:
</p>
<div class="example">
<pre class="example-preformatted"># do per line
{
    chars += length($0) + 1    # get newline
    bytes += mbs_length($0) + 1
    lines++
    words += NF
}
</pre></div>

<p>Finally, the <code class="code">END</code> rule simply prints the totals for all the files:
</p>
<div class="example">
<pre class="example-preformatted">END {
    if (print_total) {
        if (do_lines)
            printf &quot;\t%d&quot;, tlines
        if (do_words)
            printf &quot;\t%d&quot;, twords
        if (do_chars)
            printf &quot;\t%d&quot;, tchars
        if (do_bytes)
            printf &quot;\t%d&quot;, tbytes
        print &quot;\ttotal&quot;
    }
}
</pre></div>

<hr>
</div>
</div>
</div>
<div class="section-level-extent" id="Miscellaneous-Programs">
<div class="nav-panel">
<p>
Next: <a href="#Programs-Summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Clones" accesskey="p" rel="prev">Reinventing Wheels for Fun and Profit</a>, Up: <a href="#Sample-Programs" accesskey="u" rel="up">Practical <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="A-Grab-Bag-of-awk-Programs"><span>11.3 A Grab Bag of <code class="command">awk</code> Programs<a class="copiable-link" href="#A-Grab-Bag-of-awk-Programs"> &para;</a></span></h3>

<p>This section is a large &ldquo;grab bag&rdquo; of miscellaneous programs.
We hope you find them both interesting and enjoyable.
</p>

<ul class="mini-toc">
<li><a href="#Dupword-Program" accesskey="1">Finding Duplicated Words in a Document</a></li>
<li><a href="#Alarm-Program" accesskey="2">An Alarm Clock Program</a></li>
<li><a href="#Translate-Program" accesskey="3">Transliterating Characters</a></li>
<li><a href="#Labels-Program" accesskey="4">Printing Mailing Labels</a></li>
<li><a href="#Word-Sorting" accesskey="5">Generating Word-Usage Counts</a></li>
<li><a href="#History-Sorting" accesskey="6">Removing Duplicates from Unsorted Text</a></li>
<li><a href="#Extract-Program" accesskey="7">Extracting Programs from Texinfo Source Files</a></li>
<li><a href="#Simple-Sed" accesskey="8">A Simple Stream Editor</a></li>
<li><a href="#Igawk-Program" accesskey="9">An Easy Way to Use Library Functions</a></li>
<li><a href="#Anagram-Program">Finding Anagrams from a Dictionary</a></li>
<li><a href="#Signature-Program">And Now for Something Completely Different</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Dupword-Program">
<div class="nav-panel">
<p>
Next: <a href="#Alarm-Program" accesskey="n" rel="next">An Alarm Clock Program</a>, Up: <a href="#Miscellaneous-Programs" accesskey="u" rel="up">A Grab Bag of <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Finding-Duplicated-Words-in-a-Document"><span>11.3.1 Finding Duplicated Words in a Document<a class="copiable-link" href="#Finding-Duplicated-Words-in-a-Document"> &para;</a></span></h4>

<a class="index-entry-id" id="index-words-duplicate_002c-searching-for"></a>
<a class="index-entry-id" id="index-searching-for-words"></a>
<a class="index-entry-id" id="index-documents_002c-searching"></a>
<p>A common error when writing large amounts of prose is to accidentally
duplicate words.  Typically you will see this in text as something like &ldquo;the
the program does the following&hellip;&rdquo;  When the text is online, often
the duplicated words occur at the end of one line and at the
beginning of
another, making them very difficult to spot.
</p>
<p>This program, <samp class="file">dupword.awk</samp>, scans through a file one line at a time
and looks for adjacent occurrences of the same word.  It also saves the last
word on a line (in the variable <code class="code">prev</code>) for comparison with the first
word on the next line.
</p>
<a class="index-entry-id" id="index-Texinfo-2"></a>
<p>The first two statements make sure that the line is all lowercase,
so that, for example, &ldquo;The&rdquo; and &ldquo;the&rdquo; compare equal to each other.
The next statement replaces nonalphanumeric and nonwhitespace characters
with spaces, so that punctuation does not affect the comparison either.
The characters are replaced with spaces so that formatting controls
don&rsquo;t create nonsense words (e.g., the Texinfo &lsquo;<samp class="samp">@code{NF}</samp>&rsquo;
becomes &lsquo;<samp class="samp">codeNF</samp>&rsquo; if punctuation is simply deleted).  The record is
then resplit into fields, yielding just the actual words on the line,
and ensuring that there are no empty fields.
</p>
<p>If there are no fields left after removing all the punctuation, the
current record is skipped.  Otherwise, the program loops through each
word, comparing it to the previous one:
</p>
<a class="index-entry-id" id="index-dupword_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># dupword.awk --- find duplicate words in text
{
    $0 = tolower($0)
    gsub(/[^[:alnum:][:blank:]]/, &quot; &quot;);
    $0 = $0         # re-split
    if (NF == 0)
        next
    if ($1 == prev)
        printf(&quot;%s:%d: duplicate %s\n&quot;,
            FILENAME, FNR, $1)
    for (i = 2; i &lt;= NF; i++)
        if ($i == $(i-1))
            printf(&quot;%s:%d: duplicate %s\n&quot;,
                FILENAME, FNR, $i)
    prev = $NF
}
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Alarm-Program">
<div class="nav-panel">
<p>
Next: <a href="#Translate-Program" accesskey="n" rel="next">Transliterating Characters</a>, Previous: <a href="#Dupword-Program" accesskey="p" rel="prev">Finding Duplicated Words in a Document</a>, Up: <a href="#Miscellaneous-Programs" accesskey="u" rel="up">A Grab Bag of <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="An-Alarm-Clock-Program"><span>11.3.2 An Alarm Clock Program<a class="copiable-link" href="#An-Alarm-Clock-Program"> &para;</a></span></h4>
<a class="index-entry-id" id="index-insomnia_002c-cure-for"></a>
<a class="index-entry-id" id="index-Robbins-Arnold-3"></a>
<blockquote class="quotation">
<p><i class="i">Nothing cures insomnia like a ringing alarm clock.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Arnold Robbins</em>
</div><a class="index-entry-id" id="index-Quanstrom_002c-Erik"></a>
<blockquote class="quotation">
<p><i class="i">Sleep is for web developers.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Erik Quanstrom</em>
</div>
<a class="index-entry-id" id="index-time-alarm-clock-example-program"></a>
<a class="index-entry-id" id="index-alarm-clock-example-program"></a>
<p>The following program is a simple &ldquo;alarm clock&rdquo; program.
You give it a time of day and an optional message.  At the specified time,
it prints the message on the standard output. In addition, you can give it
the number of times to repeat the message as well as a delay between
repetitions.
</p>
<p>This program uses the <code class="code">getlocaltime()</code> function from
<a class="ref" href="#Getlocaltime-Function">Managing the Time of Day</a>.
</p>
<a class="index-entry-id" id="index-ASCII-4"></a>
<p>All the work is done in the <code class="code">BEGIN</code> rule.  The first part is argument
checking and setting of defaults: the delay, the count, and the message to
print.  If the user supplied a message without the ASCII BEL
character (known as the &ldquo;alert&rdquo; character, <code class="code">&quot;\a&quot;</code>), then it is added to
the message.  (On many systems, printing the ASCII BEL generates an
audible alert. Thus, when the alarm goes off, the system calls attention
to itself in case the user is not looking at the computer.)
Just for a change, this program uses a <code class="code">switch</code> statement
(see <a class="pxref" href="#Switch-Statement">The <code class="code">switch</code> Statement</a>), but the processing could be done with a series of
<code class="code">if</code>-<code class="code">else</code> statements instead.
Here is the program:
</p>
<a class="index-entry-id" id="index-alarm_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># alarm.awk --- set an alarm
#
# Requires getlocaltime() library function
# usage: alarm time [ &quot;message&quot; [ count [ delay ] ] ]

BEGIN {
    # Initial argument sanity checking
    usage1 = &quot;usage: alarm time ['message' [count [delay]]]&quot;
    usage2 = sprintf(&quot;\t(%s) time ::= hh:mm&quot;, ARGV[1])

    if (ARGC &lt; 2) {
        print usage1 &gt; &quot;/dev/stderr&quot;
        print usage2 &gt; &quot;/dev/stderr&quot;
        exit 1
    }
    switch (ARGC) {
    case 5:
        delay = ARGV[4] + 0
        # fall through
    case 4:
        count = ARGV[3] + 0
        # fall through
    case 3:
        message = ARGV[2]
        break
    default:
        if (ARGV[1] !~ /[[:digit:]]?[[:digit:]]:[[:digit:]]{2}/) {
            print usage1 &gt; &quot;/dev/stderr&quot;
            print usage2 &gt; &quot;/dev/stderr&quot;
            exit 1
        }
        break
    }

    # set defaults for once we reach the desired time
    if (delay == 0)
        delay = 180    # 3 minutes
</pre><div class="group"><pre class="example-preformatted">    if (count == 0)
        count = 5
</pre></div><pre class="example-preformatted">    if (message == &quot;&quot;)
        message = sprintf(&quot;\aIt is now %s!\a&quot;, ARGV[1])
    else if (index(message, &quot;\a&quot;) == 0)
        message = &quot;\a&quot; message &quot;\a&quot;
</pre></div>

<p>The next section of code turns the alarm time into hours and minutes,
converts it (if necessary) to a 24-hour clock, and then turns that
time into a count of the seconds since midnight.  Next it turns the current
time into a count of seconds since midnight.  The difference between the two
is how long to wait before setting off the alarm:
</p>
<div class="example">
<pre class="example-preformatted">    # split up alarm time
    split(ARGV[1], atime, &quot;:&quot;)
    hour = atime[1] + 0    # force numeric
    minute = atime[2] + 0  # force numeric

    # get current broken down time
    getlocaltime(now)

    # if time given is 12-hour hours and it's after that
    # hour, e.g., `alarm 5:30' at 9 a.m. means 5:30 p.m.,
    # then add 12 to real hour
    if (hour &lt; 12 &amp;&amp; now[&quot;hour&quot;] &gt; hour)
        hour += 12

    # set target time in seconds since midnight
    target = (hour * 60 * 60) + (minute * 60)

    # get current time in seconds since midnight
    current = (now[&quot;hour&quot;] * 60 * 60) + \
               (now[&quot;minute&quot;] * 60) + now[&quot;second&quot;]

    # how long to sleep for
    naptime = target - current
    if (naptime &lt;= 0) {
        print &quot;alarm: time is in the past!&quot; &gt; &quot;/dev/stderr&quot;
        exit 1
    }
</pre></div>

<a class="index-entry-id" id="index-sleep-utility"></a>
<p>Finally, the program uses the <code class="code">system()</code> function
(see <a class="pxref" href="#I_002fO-Functions">Input/Output Functions</a>)
to call the <code class="command">sleep</code> utility.  The <code class="command">sleep</code> utility simply pauses
for the given number of seconds.  If the exit status is not zero,
the program assumes that <code class="command">sleep</code> was interrupted and exits. If
<code class="command">sleep</code> exited with an OK status (zero), then the program prints the
message in a loop, again using <code class="command">sleep</code> to delay for however many
seconds are necessary:
</p>
<div class="example">
<pre class="example-preformatted">    # zzzzzz..... go away if interrupted
    if (system(sprintf(&quot;sleep %d&quot;, naptime)) != 0)
        exit 1

    # time to notify!
    command = sprintf(&quot;sleep %d&quot;, delay)
    for (i = 1; i &lt;= count; i++) {
        print message
        # if sleep command interrupted, go away
        if (system(command) != 0)
            break
    }

    exit 0
}
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Translate-Program">
<div class="nav-panel">
<p>
Next: <a href="#Labels-Program" accesskey="n" rel="next">Printing Mailing Labels</a>, Previous: <a href="#Alarm-Program" accesskey="p" rel="prev">An Alarm Clock Program</a>, Up: <a href="#Miscellaneous-Programs" accesskey="u" rel="up">A Grab Bag of <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Transliterating-Characters"><span>11.3.3 Transliterating Characters<a class="copiable-link" href="#Transliterating-Characters"> &para;</a></span></h4>

<a class="index-entry-id" id="index-characters-transliterating"></a>
<a class="index-entry-id" id="index-tr-utility"></a>
<p>The system <code class="command">tr</code> utility transliterates characters.  For example, it is
often used to map uppercase letters into lowercase for further processing:
</p>
<div class="example">
<pre class="example-preformatted"><var class="var">generate data</var> | tr 'A-Z' 'a-z' | <var class="var">process data</var> ...
</pre></div>

<p><code class="command">tr</code> requires two lists of characters.<a class="footnote" id="DOCF79" href="#FOOT79"><sup>79</sup></a>  When processing the input, the
first character in the first list is replaced with the first character
in the second list, the second character in the first list is replaced
with the second character in the second list, and so on.  If there are
more characters in the &ldquo;from&rdquo; list than in the &ldquo;to&rdquo; list, the last
character of the &ldquo;to&rdquo; list is used for the remaining characters in the
&ldquo;from&rdquo; list.
</p>
<p>Once upon a time,
a user proposed adding a transliteration function
to <code class="command">gawk</code>.
The following program was written to
prove that character transliteration could be done with a user-level
function.  This program is not as complete as the system <code class="command">tr</code> utility,
but it does most of the job.
</p>
<p>The <code class="command">translate</code> program was written long before <code class="command">gawk</code>
acquired the ability to split each character in a string into separate
array elements.  Thus, it makes repeated use of the <code class="code">substr()</code>,
<code class="code">index()</code>, and <code class="code">gsub()</code> built-in functions (see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).  There are two functions.  The first, <code class="code">stranslate()</code>,
takes three arguments:
</p>
<dl class="table">
<dt><code class="code">from</code></dt>
<dd><p>A list of characters from which to translate
</p>
</dd>
<dt><code class="code">to</code></dt>
<dd><p>A list of characters to which to translate
</p>
</dd>
<dt><code class="code">target</code></dt>
<dd><p>The string on which to do the translation
</p></dd>
</dl>

<p>Associative arrays make the translation part fairly easy. <code class="code">t_ar</code> holds
the &ldquo;to&rdquo; characters, indexed by the &ldquo;from&rdquo; characters.  Then a simple
loop goes through <code class="code">from</code>, one character at a time.  For each character
in <code class="code">from</code>, if the character appears in <code class="code">target</code>,
it is replaced with the corresponding <code class="code">to</code> character.
</p>
<p>The <code class="code">translate()</code> function calls <code class="code">stranslate()</code>, using <code class="code">$0</code>
as the target.  The main program sets two global variables, <code class="code">FROM</code> and
<code class="code">TO</code>, from the command line, and then changes <code class="code">ARGV</code> so that
<code class="command">awk</code> reads from the standard input.
</p>
<p>Finally, the processing rule simply calls <code class="code">translate()</code> for each record:
</p>
<a class="index-entry-id" id="index-translate_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># translate.awk --- do tr-like stuff
# Bugs: does not handle things like tr A-Z a-z; it has
# to be spelled out. However, if `to' is shorter than `from',
# the last character in `to' is used for the rest of `from'.

function stranslate(from, to, target,     lf, lt, ltarget, t_ar, i, c,
                                                               result)
{
    lf = length(from)
    lt = length(to)
    ltarget = length(target)
    for (i = 1; i &lt;= lt; i++)
        t_ar[substr(from, i, 1)] = substr(to, i, 1)
    if (lt &lt; lf)
        for (; i &lt;= lf; i++)
            t_ar[substr(from, i, 1)] = substr(to, lt, 1)
    for (i = 1; i &lt;= ltarget; i++) {
        c = substr(target, i, 1)
        if (c in t_ar)
            c = t_ar[c]
        result = result c
    }
    return result
}

function translate(from, to)
{
    return $0 = stranslate(from, to, $0)
}

# main program
BEGIN {
</pre><div class="group"><pre class="example-preformatted">    if (ARGC &lt; 3) {
        print &quot;usage: translate from to&quot; &gt; &quot;/dev/stderr&quot;
        exit
    }
</pre></div><pre class="example-preformatted">    FROM = ARGV[1]
    TO = ARGV[2]
    ARGC = 2
    ARGV[1] = &quot;-&quot;
}

{
    translate(FROM, TO)
    print
}
</pre></div>

<p>It is possible to do character transliteration in a user-level
function, but it is not necessarily efficient, and we (the <code class="command">gawk</code>
developers) started to consider adding a built-in function.  However,
shortly after writing this program, we learned that Brian Kernighan
had added the <code class="code">toupper()</code> and <code class="code">tolower()</code> functions to his
<code class="command">awk</code> (see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).  These functions handle the
vast majority of the cases where character transliteration is necessary,
and so we chose to simply add those functions to <code class="command">gawk</code> as well
and then leave well enough alone.
</p>
<p>An obvious improvement to this program would be to set up the
<code class="code">t_ar</code> array only once, in a <code class="code">BEGIN</code> rule. However, this
assumes that the &ldquo;from&rdquo; and &ldquo;to&rdquo; lists
will never change throughout the lifetime of the program.
</p>
<p>Another obvious improvement is to enable the use of ranges,
such as &lsquo;<samp class="samp">a-z</samp>&rsquo;, as allowed by the <code class="command">tr</code> utility.
Look at the code for <samp class="file">cut.awk</samp> (see <a class="pxref" href="#Cut-Program">Cutting Out Fields and Columns</a>)
for inspiration.
</p>

<hr>
</div>
<div class="subsection-level-extent" id="Labels-Program">
<div class="nav-panel">
<p>
Next: <a href="#Word-Sorting" accesskey="n" rel="next">Generating Word-Usage Counts</a>, Previous: <a href="#Translate-Program" accesskey="p" rel="prev">Transliterating Characters</a>, Up: <a href="#Miscellaneous-Programs" accesskey="u" rel="up">A Grab Bag of <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Printing-Mailing-Labels"><span>11.3.4 Printing Mailing Labels<a class="copiable-link" href="#Printing-Mailing-Labels"> &para;</a></span></h4>

<a class="index-entry-id" id="index-printing-mailing-labels"></a>
<a class="index-entry-id" id="index-mailing-labels_002c-printing"></a>
<p>Here is a &ldquo;real-world&rdquo;<a class="footnote" id="DOCF80" href="#FOOT80"><sup>80</sup></a>
program.  This
script reads lists of names and
addresses and generates mailing labels.  Each page of labels has 20 labels
on it, two across and 10 down.  The addresses are guaranteed to be no more
than five lines of data.  Each address is separated from the next by a blank
line.
</p>
<p>The basic idea is to read 20 labels&rsquo; worth of data.  Each line of each label
is stored in the <code class="code">line</code> array.  The single rule takes care of filling
the <code class="code">line</code> array and printing the page when 20 labels have been read.
</p>
<p>The <code class="code">BEGIN</code> rule simply sets <code class="code">RS</code> to the empty string, so that
<code class="command">awk</code> splits records at blank lines
(see <a class="pxref" href="#Records">How Input Is Split into Records</a>).
It sets <code class="code">MAXLINES</code> to 100, because 100 is the maximum number
of lines on the page
(20 * 5 = 100).
</p>
<p>Most of the work is done in the <code class="code">printpage()</code> function.
The label lines are stored sequentially in the <code class="code">line</code> array.  But they
have to print horizontally: <code class="code">line[1]</code> next to <code class="code">line[6]</code>,
<code class="code">line[2]</code> next to <code class="code">line[7]</code>, and so on.  Two loops
accomplish this.  The outer loop, controlled by <code class="code">i</code>, steps through
every 10 lines of data; this is each row of labels.  The inner loop,
controlled by <code class="code">j</code>, goes through the lines within the row.
As <code class="code">j</code> goes from 0 to 4, &lsquo;<samp class="samp">i+j</samp>&rsquo; is the <code class="code">j</code>th line in
the row, and &lsquo;<samp class="samp">i+j+5</samp>&rsquo; is the entry next to it.  The output ends up
looking something like this:
</p>
<div class="example">
<pre class="example-preformatted">line 1          line 6
line 2          line 7
line 3          line 8
line 4          line 9
line 5          line 10
...
</pre></div>

<p>The <code class="code">printf</code> format string &lsquo;<samp class="samp">%-41s</samp>&rsquo; left-aligns
the data and prints it within a fixed-width field.
</p>
<p>As a final note, an extra blank line is printed at lines 21 and 61, to keep
the output lined up on the labels.  This is dependent on the particular
brand of labels in use when the program was written.  You will also note
that there are two blank lines at the top and two blank lines at the bottom.
</p>
<p>The <code class="code">END</code> rule arranges to flush the final page of labels; there may
not have been an even multiple of 20 labels in the data:
</p>
<a class="index-entry-id" id="index-labels_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># labels.awk --- print mailing labels

# Each label is 5 lines of data that may have blank lines.
# The label sheets have 2 blank lines at the top and 2 at
# the bottom.

BEGIN    { RS = &quot;&quot; ; MAXLINES = 100 }

function printpage(    i, j)
{
    if (Nlines &lt;= 0)
        return

    printf &quot;\n\n&quot;        # header

    for (i = 1; i &lt;= Nlines; i += 10) {
        if (i == 21 || i == 61)
            print &quot;&quot;
        for (j = 0; j &lt; 5; j++) {
            if (i + j &gt; MAXLINES)
                break
            printf &quot;   %-41s %s\n&quot;, line[i+j], line[i+j+5]
        }
        print &quot;&quot;
    }

    printf &quot;\n\n&quot;        # footer

    delete line
}

# main rule
{
    if (Count &gt;= 20) {
        printpage()
        Count = 0
        Nlines = 0
    }
    n = split($0, a, &quot;\n&quot;)
    for (i = 1; i &lt;= n; i++)
        line[++Nlines] = a[i]
    for (; i &lt;= 5; i++)
        line[++Nlines] = &quot;&quot;
    Count++
}

END {
    printpage()
}
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Word-Sorting">
<div class="nav-panel">
<p>
Next: <a href="#History-Sorting" accesskey="n" rel="next">Removing Duplicates from Unsorted Text</a>, Previous: <a href="#Labels-Program" accesskey="p" rel="prev">Printing Mailing Labels</a>, Up: <a href="#Miscellaneous-Programs" accesskey="u" rel="up">A Grab Bag of <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Generating-Word_002dUsage-Counts"><span>11.3.5 Generating Word-Usage Counts<a class="copiable-link" href="#Generating-Word_002dUsage-Counts"> &para;</a></span></h4>

<a class="index-entry-id" id="index-words-usage-counts_002c-generating"></a>

<p>When working with large amounts of text, it can be interesting to know
how often different words appear.  For example, an author may overuse
certain words, in which case he or she might wish to find synonyms to substitute
for words that appear too often. This subsection develops a
program for counting words and presenting the frequency information
in a useful format.
</p>
<p>At first glance, a program like this would seem to do the job:
</p>
<div class="example">
<pre class="example-preformatted"># wordfreq-first-try.awk --- print list of word frequencies

{
    for (i = 1; i &lt;= NF; i++)
        freq[$i]++
}

</pre><div class="group"><pre class="example-preformatted">END {
    for (word in freq)
        printf &quot;%s\t%d\n&quot;, word, freq[word]
}
</pre></div></div>

<p>The program relies on <code class="command">awk</code>&rsquo;s default field-splitting
mechanism to break each line up into &ldquo;words&rdquo; and uses an
associative array named <code class="code">freq</code>, indexed by each word, to count
the number of times the word occurs. In the <code class="code">END</code> rule,
it prints the counts.
</p>
<p>This program has several problems that prevent it from being
useful on real text files:
</p>
<ul class="itemize mark-bullet">
<li>The <code class="command">awk</code> language considers upper- and lowercase characters to be
distinct.  Therefore, &ldquo;bartender&rdquo; and &ldquo;Bartender&rdquo; are not treated
as the same word.  This is undesirable, because words are capitalized
if they begin sentences in normal text, and a frequency analyzer should
not be sensitive to capitalization.

</li><li>Words are detected using the <code class="command">awk</code> convention that fields are
separated just by whitespace.  Other characters in the input (except
newlines) don&rsquo;t have any special meaning to <code class="command">awk</code>.  This means that
punctuation characters count as part of words.

</li><li>The output does not come out in any useful order.  You&rsquo;re more likely to be
interested in which words occur most frequently or in having an alphabetized
table of how frequently each word occurs.
</li></ul>

<a class="index-entry-id" id="index-sort-utility"></a>
<p>The first problem can be solved by using <code class="code">tolower()</code> to remove case
distinctions.  The second problem can be solved by using <code class="code">gsub()</code>
to remove punctuation characters.  Finally, we solve the third problem
by using the system <code class="command">sort</code> utility to process the output of the
<code class="command">awk</code> script.  Here is the new version of the program:
</p>
<a class="index-entry-id" id="index-wordfreq_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># wordfreq.awk --- print list of word frequencies

{
    $0 = tolower($0)    # remove case distinctions
    # remove punctuation
    gsub(/[^[:alnum:]_[:blank:]]/, &quot;&quot;, $0)
    for (i = 1; i &lt;= NF; i++)
        freq[$i]++
}

END {
    for (word in freq)
        printf &quot;%s\t%d\n&quot;, word, freq[word]
}
</pre></div>

<p>The regexp <code class="code">/[^[:alnum:]_[:blank:]]/</code> might have been written
<code class="code">/[[:punct:]]/</code>, but then underscores would also be removed,
and we want to keep them.
</p>
<p>Assuming we have saved this program in a file named <samp class="file">wordfreq.awk</samp>,
and that the data is in <samp class="file">file1</samp>, the following pipeline:
</p>
<div class="example">
<pre class="example-preformatted">awk -f wordfreq.awk file1 | sort -k 2nr
</pre></div>

<p>produces a table of the words appearing in <samp class="file">file1</samp> in order of
decreasing frequency.
</p>
<p>The <code class="command">awk</code> program suitably massages the
data and produces a word frequency table, which is not ordered.
The <code class="command">awk</code> script&rsquo;s output is then sorted by the <code class="command">sort</code>
utility and printed on the screen.
</p>
<p>The options given to <code class="command">sort</code>
specify a sort that uses the second field of each input line (skipping
one field), that the sort keys should be treated as numeric quantities
(otherwise &lsquo;<samp class="samp">15</samp>&rsquo; would come before &lsquo;<samp class="samp">5</samp>&rsquo;), and that the sorting
should be done in descending (reverse) order.
</p>
<p>The <code class="command">sort</code> could even be done from within the program, by changing
the <code class="code">END</code> action to:
</p>
<div class="example">
<pre class="example-preformatted">END {
    sort = &quot;sort -k 2nr&quot;
    for (word in freq)
        printf &quot;%s\t%d\n&quot;, word, freq[word] | sort
    close(sort)
}
</pre></div>

<p>This way of sorting must be used on systems that do not
have true pipes at the command-line (or batch-file) level.
See the general operating system documentation for more information on how
to use the <code class="command">sort</code> program.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="History-Sorting">
<div class="nav-panel">
<p>
Next: <a href="#Extract-Program" accesskey="n" rel="next">Extracting Programs from Texinfo Source Files</a>, Previous: <a href="#Word-Sorting" accesskey="p" rel="prev">Generating Word-Usage Counts</a>, Up: <a href="#Miscellaneous-Programs" accesskey="u" rel="up">A Grab Bag of <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Removing-Duplicates-from-Unsorted-Text"><span>11.3.6 Removing Duplicates from Unsorted Text<a class="copiable-link" href="#Removing-Duplicates-from-Unsorted-Text"> &para;</a></span></h4>

<a class="index-entry-id" id="index-lines-duplicate_002c-removing"></a>
<p>The <code class="command">uniq</code> program
(see <a class="pxref" href="#Uniq-Program">Printing Nonduplicated Lines of Text</a>)
removes duplicate lines from <em class="emph">sorted</em> data.
</p>
<p>Suppose, however, you need to remove duplicate lines from a data file but
that you want to preserve the order the lines are in.  A good example of
this might be a shell history file.  The history file keeps a copy of all
the commands you have entered, and it is not unusual to repeat a command
several times in a row.  Occasionally you might want to compact the history
by removing duplicate entries.  Yet it is desirable to maintain the order
of the original commands.
</p>
<p>This simple program does the job.  It uses two arrays.  The <code class="code">data</code>
array is indexed by the text of each line.
For each line, <code class="code">data[$0]</code> is incremented.
If a particular line has not
been seen before, then <code class="code">data[$0]</code> is zero.
In this case, the text of the line is stored in <code class="code">lines[count]</code>.
Each element of <code class="code">lines</code> is a unique command, and the indices of
<code class="code">lines</code> indicate the order in which those lines are encountered.
The <code class="code">END</code> rule simply prints out the lines, in order:
</p>
<a class="index-entry-id" id="index-Rakitzis_002c-Byron"></a>
<a class="index-entry-id" id="index-histsort_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># histsort.awk --- compact a shell history file
# Thanks to Byron Rakitzis for the general idea

</pre><div class="group"><pre class="example-preformatted">{
    if (data[$0]++ == 0)
        lines[++count] = $0
}
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">END {
    for (i = 1; i &lt;= count; i++)
        print lines[i]
}
</pre></div></div>

<p>This program also provides a foundation for generating other useful
information.  For example, using the following <code class="code">print</code> statement in the
<code class="code">END</code> rule indicates how often a particular command is used:
</p>
<div class="example">
<pre class="example-preformatted">print data[lines[i]], lines[i]
</pre></div>

<p>This works because <code class="code">data[$0]</code> is incremented each time a line is
seen.
</p>
<p>Rick van Rein offers the following one-liner to do the same job of
removing duplicates from unsorted text:
</p>
<div class="example">
<pre class="example-preformatted">awk '{ if (! seen[$0]++) print }'
</pre></div>

<p>This can be simplified even further, at the risk of becoming
almost too obscure:
</p>
<div class="example">
<pre class="example-preformatted">awk '! seen[$0]++'
</pre></div>

<p>This version uses the expression as a pattern, relying on
<code class="command">awk</code>&rsquo;s default action of printing the line when
the pattern is true.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Extract-Program">
<div class="nav-panel">
<p>
Next: <a href="#Simple-Sed" accesskey="n" rel="next">A Simple Stream Editor</a>, Previous: <a href="#History-Sorting" accesskey="p" rel="prev">Removing Duplicates from Unsorted Text</a>, Up: <a href="#Miscellaneous-Programs" accesskey="u" rel="up">A Grab Bag of <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Extracting-Programs-from-Texinfo-Source-Files"><span>11.3.7 Extracting Programs from Texinfo Source Files<a class="copiable-link" href="#Extracting-Programs-from-Texinfo-Source-Files"> &para;</a></span></h4>

<a class="index-entry-id" id="index-Texinfo-extracting-programs-from-source-files"></a>
<a class="index-entry-id" id="index-files-Texinfo_002c-extracting-programs-from"></a>
<p>Both this chapter and the previous chapter
(<a class="ref" href="#Library-Functions">A Library of <code class="command">awk</code> Functions</a>)
present a large number of <code class="command">awk</code> programs.
If you want to experiment with these programs, it is tedious to type
them in by hand.  Here we present a program that can extract parts of a
Texinfo input file into separate files.
</p>
<a class="index-entry-id" id="index-Texinfo-3"></a>
<p>This Web page is written in <a class="uref" href="https://www.gnu.org/software/texinfo/">Texinfo</a>,
the GNU Project&rsquo;s document formatting language.
A single Texinfo source file can be used to produce both
printed documentation, with TeX, and online documentation.
(Texinfo is fully documented in the book
<cite class="cite">Texinfo&mdash;The GNU Documentation Format</cite>,
available from the Free Software Foundation,
and also available <a class="uref" href="https://www.gnu.org/software/texinfo/manual/texinfo/">online</a>.)
</p>
<p>For our purposes, it is enough to know three things about Texinfo input
files:
</p>
<ul class="itemize mark-bullet">
<li>The &ldquo;at&rdquo; symbol (&lsquo;<samp class="samp">@</samp>&rsquo;) is special in Texinfo, much as
the backslash (&lsquo;<samp class="samp">\</samp>&rsquo;) is in C
or <code class="command">awk</code>.  Literal &lsquo;<samp class="samp">@</samp>&rsquo; symbols are represented in Texinfo source
files as &lsquo;<samp class="samp">@@</samp>&rsquo;.

</li><li>Comments start with either &lsquo;<samp class="samp">@c</samp>&rsquo; or &lsquo;<samp class="samp">@comment</samp>&rsquo;.
The file-extraction program works by using special comments that start
at the beginning of a line.

</li><li>Lines containing &lsquo;<samp class="samp">@group</samp>&rsquo; and &lsquo;<samp class="samp">@end group</samp>&rsquo; commands bracket
example text that should not be split across a page boundary.
(Unfortunately, TeX isn&rsquo;t always smart enough to do things exactly right,
so we have to give it some help.)
</li></ul>

<p>The following program, <samp class="file">extract.awk</samp>, reads through a Texinfo source
file and does two things, based on the special comments.
Upon seeing &lsquo;<samp class="samp">@c&nbsp;system&nbsp;&hellip;<!-- /@w --></samp>&rsquo;,
it runs a command, by extracting the command text from the
control line and passing it on to the <code class="code">system()</code> function
(see <a class="pxref" href="#I_002fO-Functions">Input/Output Functions</a>).
Upon seeing &lsquo;<samp class="samp">@c file <var class="var">filename</var></samp>&rsquo;, each subsequent line is sent to
the file <var class="var">filename</var>, until &lsquo;<samp class="samp">@c endfile</samp>&rsquo; is encountered.
The rules in <samp class="file">extract.awk</samp> match either &lsquo;<samp class="samp">@c</samp>&rsquo; or
&lsquo;<samp class="samp">@comment</samp>&rsquo; by letting the &lsquo;<samp class="samp">omment</samp>&rsquo; part be optional.
Lines containing &lsquo;<samp class="samp">@group</samp>&rsquo; and &lsquo;<samp class="samp">@end group</samp>&rsquo; are simply removed.
<samp class="file">extract.awk</samp> uses the <code class="code">join()</code> library function
(see <a class="pxref" href="#Join-Function">Merging an Array into a String</a>).
</p>
<p>The example programs in the online Texinfo source for <cite class="cite">GAWK: Effective AWK Programming</cite>
(<samp class="file">gawktexi.in</samp>) have all been bracketed inside &lsquo;<samp class="samp">file</samp>&rsquo; and
&lsquo;<samp class="samp">endfile</samp>&rsquo; lines.  The <code class="command">gawk</code> distribution uses a copy of
<samp class="file">extract.awk</samp> to extract the sample programs and install many
of them in a standard directory where <code class="command">gawk</code> can find them.
The Texinfo file looks something like this:
</p>
<div class="example">
<pre class="example-preformatted">...
This program has a @code{BEGIN} rule
that prints a nice message:

@example
@c file examples/messages.awk
BEGIN @{ print &quot;Don't panic!&quot; @}
@c endfile
@end example

It also prints some final advice:

@example
@c file examples/messages.awk
END @{ print &quot;Always avoid bored archaeologists!&quot; @}
@c endfile
@end example
...
</pre></div>

<p><samp class="file">extract.awk</samp> begins by setting <code class="code">IGNORECASE</code> to one, so that
mixed upper- and lowercase letters in the directives won&rsquo;t matter.
</p>
<p>The first rule handles calling <code class="code">system()</code>, checking that a command is
given (<code class="code">NF</code> is at least three) and also checking that the command
exits with a zero exit status, signifying OK:
</p>
<a class="index-entry-id" id="index-extract_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># extract.awk --- extract files and run programs from Texinfo files

BEGIN    { IGNORECASE = 1 }

/^@c(omment)?[ \t]+system/ {
    if (NF &lt; 3) {
        e = (&quot;extract: &quot; FILENAME &quot;:&quot; FNR)
        e = (e  &quot;: badly formed `system' line&quot;)
        print e &gt; &quot;/dev/stderr&quot;
        next
    }
    $1 = &quot;&quot;
    $2 = &quot;&quot;
    stat = system($0)
    if (stat != 0) {
        e = (&quot;extract: &quot; FILENAME &quot;:&quot; FNR)
        e = (e &quot;: warning: system returned &quot; stat)
        print e &gt; &quot;/dev/stderr&quot;
    }
}
</pre></div>

<p>The variable <code class="code">e</code> is used so that the rule
fits nicely on the screen.
</p>
<p>The second rule handles moving data into files.  It verifies that a
file name is given in the directive.  If the file named is not the
current file, then the current file is closed.  Keeping the current file
open until a new file is encountered allows the use of the &lsquo;<samp class="samp">&gt;</samp>&rsquo;
redirection for printing the contents, keeping open-file management
simple.
</p>
<p>The <code class="code">for</code> loop does the work.  It reads lines using <code class="code">getline</code>
(see <a class="pxref" href="#Getline">Explicit Input with <code class="code">getline</code></a>).
For an unexpected end-of-file, it calls the <code class="code">unexpected_eof()<!-- /@w --></code>
function.  If the line is an &ldquo;endfile&rdquo; line, then it breaks out of
the loop.
If the line is an &lsquo;<samp class="samp">@group</samp>&rsquo; or &lsquo;<samp class="samp">@end group</samp>&rsquo; line, then it
ignores it and goes on to the next line.
Similarly, comments within examples are also ignored.
</p>
<p>Most of the work is in the following few lines.  If the line has no &lsquo;<samp class="samp">@</samp>&rsquo;
symbols, the program can print it directly.
Otherwise, each leading &lsquo;<samp class="samp">@</samp>&rsquo; must be stripped off.
To remove the &lsquo;<samp class="samp">@</samp>&rsquo; symbols, the line is split into separate elements of
the array <code class="code">a</code>, using the <code class="code">split()</code> function
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
The &lsquo;<samp class="samp">@</samp>&rsquo; symbol is used as the separator character.
Each element of <code class="code">a</code> that is empty indicates two successive &lsquo;<samp class="samp">@</samp>&rsquo;
symbols in the original line.  For each two empty elements (&lsquo;<samp class="samp">@@</samp>&rsquo; in
the original file), we have to add a single &lsquo;<samp class="samp">@</samp>&rsquo; symbol back in.
</p>
<p>When the processing of the array is finished, <code class="code">join()</code> is called with the
value of <code class="code">SUBSEP</code> (see <a class="pxref" href="#Multidimensional">Multidimensional Arrays</a>),
to rejoin the pieces back into a single
line.  That line is then printed to the output file:
</p>
<div class="example">
<pre class="example-preformatted">/^@c(omment)?[ \t]+file/ {
    if (NF != 3) {
        e = (&quot;extract: &quot; FILENAME &quot;:&quot; FNR &quot;: badly formed `file' line&quot;)
        print e &gt; &quot;/dev/stderr&quot;
        next
    }
    if ($3 != curfile) {
        if (curfile != &quot;&quot;)
            filelist[curfile] = 1   # save to close later
        curfile = $3
    }

    for (;;) {
        if ((getline line) &lt;= 0)
            unexpected_eof()
        if (line ~ /^@c(omment)?[ \t]+endfile/)
            break
        else if (line ~ /^@(end[ \t]+)?group/)
            continue
        else if (line ~ /^@c(omment+)?[ \t]+/)
            continue
        if (index(line, &quot;@&quot;) == 0) {
            print line &gt; curfile
            continue
        }
        n = split(line, a, &quot;@&quot;)
        # if a[1] == &quot;&quot;, means leading @,
        # don't add one back in.
        for (i = 2; i &lt;= n; i++) {
            if (a[i] == &quot;&quot;) { # was an @@
                a[i] = &quot;@&quot;
                if (a[i+1] == &quot;&quot;)
                    i++
            }
        }
</pre><div class="group"><pre class="example-preformatted">        print join(a, 1, n, SUBSEP) &gt; curfile
    }
}
</pre></div></div>

<p>An important thing to note is the use of the &lsquo;<samp class="samp">&gt;</samp>&rsquo; redirection.
Output done with &lsquo;<samp class="samp">&gt;</samp>&rsquo; only opens the file once; it stays open and
subsequent output is appended to the file
(see <a class="pxref" href="#Redirection">Redirecting Output of <code class="code">print</code> and <code class="code">printf</code></a>).
This makes it easy to mix program text and explanatory prose for the same
sample source file (as has been done here!) without any hassle.  The file is
only closed when a new data file name is encountered or at the end of the
input file.
</p>
<p>When a new file name is encountered, instead of closing the file,
the program saves the name of the current file in <code class="code">filelist</code>.
This makes it possible to interleave the code for more than one file in
the Texinfo input file.  (Previous versions of this program <em class="emph">did</em>
close the file. But because of the &lsquo;<samp class="samp">&gt;</samp>&rsquo; redirection, a file whose
parts were not all one after the other ended up getting clobbered.)
An <code class="code">END</code> rule then closes all the open files when processing
is finished:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">END {
    close(curfile)          # close the last one
    for (f in filelist)     # close all the rest
        close(f)
}
</pre></div></div>

<p>Finally, the function <code class="code">unexpected_eof()<!-- /@w --></code> prints an appropriate
error message and then exits:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">function unexpected_eof()
{
    printf(&quot;extract: %s:%d: unexpected EOF or error\n&quot;,
                     FILENAME, FNR) &gt; &quot;/dev/stderr&quot;
    exit 1
}
</pre></div></div>

<hr>
</div>
<div class="subsection-level-extent" id="Simple-Sed">
<div class="nav-panel">
<p>
Next: <a href="#Igawk-Program" accesskey="n" rel="next">An Easy Way to Use Library Functions</a>, Previous: <a href="#Extract-Program" accesskey="p" rel="prev">Extracting Programs from Texinfo Source Files</a>, Up: <a href="#Miscellaneous-Programs" accesskey="u" rel="up">A Grab Bag of <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="A-Simple-Stream-Editor"><span>11.3.8 A Simple Stream Editor<a class="copiable-link" href="#A-Simple-Stream-Editor"> &para;</a></span></h4>

<a class="index-entry-id" id="index-sed-utility-1"></a>
<a class="index-entry-id" id="index-stream-editors-1"></a>
<p>The <code class="command">sed</code> utility is a <em class="dfn">stream editor</em>, a program that reads a
stream of data, makes changes to it, and passes it on.
It is often used to make global changes to a large file or to a stream
of data generated by a pipeline of commands.
Although <code class="command">sed</code> is a complicated program in its own right, its most common
use is to perform global substitutions in the middle of a pipeline:
</p>
<div class="example">
<pre class="example-preformatted"><var class="var">command1</var> &lt; orig.data | sed 's/old/new/g' | <var class="var">command2</var> &gt; result
</pre></div>

<p>Here, &lsquo;<samp class="samp">s/old/new/g</samp>&rsquo; tells <code class="command">sed</code> to look for the regexp
&lsquo;<samp class="samp">old</samp>&rsquo; on each input line and globally replace it with the text
&lsquo;<samp class="samp">new</samp>&rsquo; (i.e., all the occurrences on a line).  This is similar to
<code class="command">awk</code>&rsquo;s <code class="code">gsub()</code> function
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
</p>
<p>The following program, <samp class="file">awksed.awk</samp>, accepts at least two command-line
arguments: the pattern to look for and the text to replace it with. Any
additional arguments are treated as data file names to process. If none
are provided, the standard input is used:
</p>
<a class="index-entry-id" id="index-Brennan_002c-Michael-4"></a>
<a class="index-entry-id" id="index-awksed_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># awksed.awk --- do s/foo/bar/g using just print
#    Thanks to Michael Brennan for the idea

function usage()
{
    print &quot;usage: awksed pat repl [files...]&quot; &gt; &quot;/dev/stderr&quot;
    exit 1
}

</pre><div class="group"><pre class="example-preformatted">BEGIN {
    # validate arguments
    if (ARGC &lt; 3)
        usage()
</pre></div><pre class="example-preformatted">

    RS = ARGV[1]
    ORS = ARGV[2]

    # don't use arguments as files
    ARGV[1] = ARGV[2] = &quot;&quot;
}

</pre><div class="group"><pre class="example-preformatted"># look ma, no hands!
{
    if (RT == &quot;&quot;)
        printf &quot;%s&quot;, $0
    else
        print
}
</pre></div></div>

<p>The program relies on <code class="command">gawk</code>&rsquo;s ability to have <code class="code">RS</code> be a regexp,
as well as on the setting of <code class="code">RT</code> to the actual text that terminates the
record (see <a class="pxref" href="#Records">How Input Is Split into Records</a>).
</p>
<p>The idea is to have <code class="code">RS</code> be the pattern to look for. <code class="command">gawk</code>
automatically sets <code class="code">$0</code> to the text between matches of the pattern.
This is text that we want to keep, unmodified.  Then, by setting <code class="code">ORS</code>
to the replacement text, a simple <code class="code">print</code> statement outputs the
text we want to keep, followed by the replacement text.
</p>
<p>There is one wrinkle to this scheme, which is what to do if the last record
doesn&rsquo;t end with text that matches <code class="code">RS</code>.  Using a <code class="code">print</code>
statement unconditionally prints the replacement text, which is not correct.
However, if the file did not end in text that matches <code class="code">RS</code>, <code class="code">RT</code>
is set to the null string.  In this case, we can print <code class="code">$0</code> using
<code class="code">printf</code>
(see <a class="pxref" href="#Printf">Using <code class="code">printf</code> Statements for Fancier Printing</a>).
</p>
<p>The <code class="code">BEGIN</code> rule handles the setup, checking for the right number
of arguments and calling <code class="code">usage()</code> if there is a problem. Then it sets
<code class="code">RS</code> and <code class="code">ORS</code> from the command-line arguments and sets
<code class="code">ARGV[1]</code> and <code class="code">ARGV[2]</code> to the null string, so that they are
not treated as file names
(see <a class="pxref" href="#ARGC-and-ARGV">Using <code class="code">ARGC</code> and <code class="code">ARGV</code></a>).
</p>
<p>The <code class="code">usage()</code> function prints an error message and exits.
Finally, the single rule handles the printing scheme outlined earlier,
using <code class="code">print</code> or <code class="code">printf</code> as appropriate, depending upon the
value of <code class="code">RT</code>.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Igawk-Program">
<div class="nav-panel">
<p>
Next: <a href="#Anagram-Program" accesskey="n" rel="next">Finding Anagrams from a Dictionary</a>, Previous: <a href="#Simple-Sed" accesskey="p" rel="prev">A Simple Stream Editor</a>, Up: <a href="#Miscellaneous-Programs" accesskey="u" rel="up">A Grab Bag of <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="An-Easy-Way-to-Use-Library-Functions"><span>11.3.9 An Easy Way to Use Library Functions<a class="copiable-link" href="#An-Easy-Way-to-Use-Library-Functions"> &para;</a></span></h4>

<a class="index-entry-id" id="index-libraries-of-awk-functions-example-program-for-using"></a>
<a class="index-entry-id" id="index-functions-library-example-program-for-using"></a>
<p>In <a class="ref" href="#Include-Files">Including Other Files into Your Program</a>, we saw how <code class="command">gawk</code> provides a built-in
file-inclusion capability.  However, this is a <code class="command">gawk</code> extension.
This section provides the motivation for making file inclusion
available for standard <code class="command">awk</code>, and shows how to do it using a
combination of shell and <code class="command">awk</code> programming.
</p>
<a class="index-entry-id" id="index-AWKPATH-environment-variable-3"></a>
<a class="index-entry-id" id="index-environment-variables-AWKPATH-3"></a>
<p>Using library functions in <code class="command">awk</code> can be very beneficial. It
encourages code reuse and the writing of general functions. Programs are
smaller and therefore clearer.
However, using library functions is only easy when writing <code class="command">awk</code>
programs; it is painful when running them, requiring multiple <samp class="option">-f</samp>
options.  If <code class="command">gawk</code> is unavailable, then so too is the <code class="env">AWKPATH</code>
environment variable and the ability to put <code class="command">awk</code> functions into a
library directory (see <a class="pxref" href="#Options">Command-Line Options</a>).
It would be nice to be able to write programs in the following manner:
</p>
<div class="example">
<pre class="example-preformatted"># library functions
@include getopt.awk
@include join.awk
...

# main program
BEGIN {
    while ((c = getopt(ARGC, ARGV, &quot;a:b:cde&quot;)) != -1)
        ...
    ...
}
</pre></div>

<p>The following program, <samp class="file">igawk.sh</samp>, provides this service.
It simulates <code class="command">gawk</code>&rsquo;s searching of the <code class="env">AWKPATH</code> variable
and also allows <em class="dfn">nested</em> includes (i.e., a file that is included
with <code class="code">@include</code> can contain further <code class="code">@include</code> statements).
<code class="command">igawk</code> makes an effort to only include files once, so that nested
includes don&rsquo;t accidentally include a library function twice.
</p>
<p><code class="command">igawk</code> should behave just like <code class="command">gawk</code> externally.  This
means it should accept all of <code class="command">gawk</code>&rsquo;s command-line arguments,
including the ability to have multiple source files specified via
<samp class="option">-f</samp> and the ability to mix command-line and library source files.
</p>
<p>The program is written using the POSIX Shell (<code class="command">sh</code>) command
language.<a class="footnote" id="DOCF81" href="#FOOT81"><sup>81</sup></a> It works as follows:
</p>
<ol class="enumerate">
<li> Loop through the arguments, saving anything that doesn&rsquo;t represent
<code class="command">awk</code> source code for later, when the expanded program is run.

</li><li> For any arguments that do represent <code class="command">awk</code> text, put the arguments into
a shell variable that will be expanded.  There are two cases:

<ol class="enumerate" type="a" start="1">
<li> Literal text, provided with <samp class="option">-e</samp> or <samp class="option">--source</samp>.  This
text is just appended directly.

</li><li> Source file names, provided with <samp class="option">-f</samp>.  We use a neat trick and
append &lsquo;<samp class="samp">@include <var class="var">filename</var></samp>&rsquo; to the shell variable&rsquo;s contents.
Because the file-inclusion program works the way <code class="command">gawk</code> does, this
gets the text of the file included in the program at the correct point.
</li></ol>

</li><li> Run an <code class="command">awk</code> program (naturally) over the shell variable&rsquo;s contents to expand
<code class="code">@include</code> statements.  The expanded program is placed in a second
shell variable.

</li><li> Run the expanded program with <code class="command">gawk</code> and any other original command-line
arguments that the user supplied (such as the data file names).
</li></ol>

<p>This program uses shell variables extensively: for storing command-line arguments and
the text of the <code class="command">awk</code> program that will expand the user&rsquo;s program, for the
user&rsquo;s original program, and for the expanded program.  Doing so removes some
potential problems that might arise were we to use temporary files instead,
at the cost of making the script somewhat more complicated.
</p>
<p>The initial part of the program turns on shell tracing if the first
argument is &lsquo;<samp class="samp">debug</samp>&rsquo;.
</p>
<p>The next part loops through all the command-line arguments.
There are several cases of interest:
</p>
<dl class="table">
<dt><samp class="option">--</samp></dt>
<dd><p>This ends the arguments to <code class="command">igawk</code>.  Anything else should be passed on
to the user&rsquo;s <code class="command">awk</code> program without being evaluated.
</p>
</dd>
<dt><samp class="option">-W</samp></dt>
<dd><p>This indicates that the next option is specific to <code class="command">gawk</code>.  To make
argument processing easier, the <samp class="option">-W</samp> is appended to the front of the
remaining arguments and the loop continues.  (This is an <code class="command">sh</code>
programming trick.  Don&rsquo;t worry about it if you are not familiar with
<code class="command">sh</code>.)
</p>
</dd>
<dt><samp class="option">-v</samp>, <samp class="option">-F</samp></dt>
<dd><p>These are saved and passed on to <code class="command">gawk</code>.
</p>
</dd>
<dt><samp class="option">-f</samp>, <samp class="option">--file</samp>, <samp class="option">--file=</samp>, <samp class="option">-Wfile=</samp></dt>
<dd><p>The file name is appended to the shell variable <code class="code">program</code> with an
<code class="code">@include</code> statement.
The <code class="command">expr</code> utility is used to remove the leading option part of the
argument (e.g., &lsquo;<samp class="samp">--file=</samp>&rsquo;).
(Typical <code class="command">sh</code> usage would be to use the <code class="command">echo</code> and <code class="command">sed</code>
utilities to do this work.  Unfortunately, some versions of <code class="command">echo</code> evaluate
escape sequences in their arguments, possibly mangling the program text.
Using <code class="command">expr</code> avoids this problem.)
</p>
</dd>
<dt><samp class="option">--source</samp>, <samp class="option">--source=</samp>, <samp class="option">-Wsource=</samp></dt>
<dd><p>The source text is appended to <code class="code">program</code>.
</p>
</dd>
<dt><samp class="option">--version</samp>, <samp class="option">-Wversion</samp></dt>
<dd><p><code class="command">igawk</code> prints its version number, runs &lsquo;<samp class="samp">gawk --version</samp>&rsquo;
to get the <code class="command">gawk</code> version information, and then exits.
</p></dd>
</dl>

<p>If none of the <samp class="option">-f</samp>, <samp class="option">--file</samp>, <samp class="option">-Wfile</samp>, <samp class="option">--source</samp>,
or <samp class="option">-Wsource</samp> arguments are supplied, then the first nonoption argument
should be the <code class="command">awk</code> program.  If there are no command-line
arguments left, <code class="command">igawk</code> prints an error message and exits.
Otherwise, the first argument is appended to <code class="code">program</code>.
In any case, after the arguments have been processed,
the shell variable
<code class="code">program</code> contains the complete text of the original <code class="command">awk</code>
program.
</p>
<p>The program is as follows:
</p>
<a class="index-entry-id" id="index-igawk_002esh-program"></a>
<div class="example">
<pre class="example-preformatted">#! /bin/sh
# igawk --- like gawk but do @include processing

if [ &quot;$1&quot; = debug ]
then
    set -x
    shift
fi

# A literal newline, so that program text is formatted correctly
n='
'

# Initialize variables to empty
program=
opts=

while [ $# -ne 0 ] # loop over arguments
do
    case $1 in
    --)     shift
            break ;;

    -W)     shift
            # The ${x?'message here'} construct prints a
            # diagnostic if $x is the null string
            set -- -W&quot;${@?'missing operand'}&quot;
            continue ;;

    -[vF])  opts=&quot;$opts $1 '${2?'missing operand'}'&quot;
            shift ;;

    -[vF]*) opts=&quot;$opts '$1'&quot; ;;

    -f)     program=&quot;$program$n@include ${2?'missing operand'}&quot;
            shift ;;

    -f*)    f=$(expr &quot;$1&quot; : '-f\(.*\)')
            program=&quot;$program$n@include $f&quot; ;;

    -[W-]file=*)
            f=$(expr &quot;$1&quot; : '-.file=\(.*\)')
            program=&quot;$program$n@include $f&quot; ;;

    -[W-]file)
            program=&quot;$program$n@include ${2?'missing operand'}&quot;
            shift ;;

    -[W-]source=*)
            t=$(expr &quot;$1&quot; : '-.source=\(.*\)')
            program=&quot;$program$n$t&quot; ;;

    -[W-]source)
            program=&quot;$program$n${2?'missing operand'}&quot;
            shift ;;

    -[W-]version)
            echo igawk: version 3.0 1&gt;&amp;2
            gawk --version
            exit 0 ;;

    -[W-]*) opts=&quot;$opts '$1'&quot; ;;

    *)      break ;;
    esac
    shift
done

if [ -z &quot;$program&quot; ]
then
     program=${1?'missing program'}
     shift
fi

# At this point, `program' has the program.
</pre></div>

<p>The <code class="command">awk</code> program to process <code class="code">@include</code> directives
is stored in the shell variable <code class="code">expand_prog</code>.  Doing this keeps
the shell script readable.  The <code class="command">awk</code> program
reads through the user&rsquo;s program, one line at a time, using <code class="code">getline</code>
(see <a class="pxref" href="#Getline">Explicit Input with <code class="code">getline</code></a>).  The input
file names and <code class="code">@include</code> statements are managed using a stack.
As each <code class="code">@include</code> is encountered, the current file name is
&ldquo;pushed&rdquo; onto the stack and the file named in the <code class="code">@include</code>
directive becomes the current file name.  As each file is finished,
the stack is &ldquo;popped,&rdquo; and the previous input file becomes the current
input file again.  The process is started by making the original file
the first one on the stack.
</p>
<a class="index-entry-id" id="index-AWKPATH-environment-variable-4"></a>
<a class="index-entry-id" id="index-environment-variables-AWKPATH-4"></a>
<p>The <code class="code">pathto()</code> function does the work of finding the full path to
a file.  It simulates <code class="command">gawk</code>&rsquo;s behavior when searching the
<code class="env">AWKPATH</code> environment variable
(see <a class="pxref" href="#AWKPATH-Variable">The <code class="env">AWKPATH</code> Environment Variable</a>).
If a file name has a &lsquo;<samp class="samp">/</samp>&rsquo; in it, no path search is done.
Similarly, if the file name is <code class="code">&quot;-&quot;</code>, then that string is
used as-is.  Otherwise,
the file name is concatenated with the name of each directory in
the path, and an attempt is made to open the generated file name.
The only way to test if a file can be read in <code class="command">awk</code> is to go
ahead and try to read it with <code class="code">getline</code>; this is what <code class="code">pathto()</code>
does.<a class="footnote" id="DOCF82" href="#FOOT82"><sup>82</sup></a>
If the file can be read, it is closed and the file name
is returned:
</p>

<div class="example">
<pre class="example-preformatted">expand_prog='

function pathto(file,    i, t, junk)
{
    if (index(file, &quot;/&quot;) != 0)
        return file

    if (file == &quot;-&quot;)
        return file

    for (i = 1; i &lt;= ndirs; i++) {
        t = (pathlist[i] &quot;/&quot; file)
</pre><div class="group"><pre class="example-preformatted">        if ((getline junk &lt; t) &gt; 0) {
            # found it
            close(t)
            return t
        }
</pre></div><pre class="example-preformatted">    }
    return &quot;&quot;
}
</pre></div>

<p>The main program is contained inside one <code class="code">BEGIN</code> rule.  The first thing it
does is set up the <code class="code">pathlist</code> array that <code class="code">pathto()</code> uses.  After
splitting the path on &lsquo;<samp class="samp">:</samp>&rsquo;, null elements are replaced with <code class="code">&quot;.&quot;</code>,
which represents the current directory:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    path = ENVIRON[&quot;AWKPATH&quot;]
    ndirs = split(path, pathlist, &quot;:&quot;)
    for (i = 1; i &lt;= ndirs; i++) {
        if (pathlist[i] == &quot;&quot;)
            pathlist[i] = &quot;.&quot;
    }
</pre></div>

<p>The stack is initialized with <code class="code">ARGV[1]</code>, which will be <code class="code">&quot;/dev/stdin&quot;</code>.
The main loop comes next.  Input lines are read in succession. Lines that
do not start with <code class="code">@include</code> are printed verbatim.
If the line does start with <code class="code">@include</code>, the file name is in <code class="code">$2</code>.
<code class="code">pathto()</code> is called to generate the full path.  If it cannot, then the program
prints an error message and continues.
</p>
<p>The next thing to check is if the file is included already.  The
<code class="code">processed</code> array is indexed by the full file name of each included
file and it tracks this information for us.  If the file is
seen again, a warning message is printed. Otherwise, the new file name is
pushed onto the stack and processing continues.
</p>
<p>Finally, when <code class="code">getline</code> encounters the end of the input file, the file
is closed and the stack is popped.  When <code class="code">stackptr</code> is less than zero,
the program is done:
</p>
<div class="example">
<pre class="example-preformatted">    stackptr = 0
    input[stackptr] = ARGV[1] # ARGV[1] is first file

    for (; stackptr &gt;= 0; stackptr--) {
        while ((getline &lt; input[stackptr]) &gt; 0) {
            if (tolower($1) != &quot;@include&quot;) {
                print
                continue
            }
            fpath = pathto($2)
            if (fpath == &quot;&quot;) {
                printf(&quot;igawk: %s:%d: cannot find %s\n&quot;,
                    input[stackptr], FNR, $2) &gt; &quot;/dev/stderr&quot;
                continue
            }
            if (! (fpath in processed)) {
                processed[fpath] = input[stackptr]
                input[++stackptr] = fpath  # push onto stack
            } else
                print $2, &quot;included in&quot;, input[stackptr],
                    &quot;already included in&quot;,
                    processed[fpath] &gt; &quot;/dev/stderr&quot;
        }
        close(input[stackptr])
    }
}'  # close quote ends `expand_prog' variable

processed_program=$(gawk -- &quot;$expand_prog&quot; /dev/stdin &lt;&lt; EOF
$program
EOF
)
</pre></div>

<p>The shell construct &lsquo;<samp class="samp"><var class="var">command</var> &lt;&lt; <var class="var">marker</var></samp>&rsquo; is called
a <em class="dfn">here document</em>.  Everything in the shell script up to the
<var class="var">marker</var> is fed to <var class="var">command</var> as input.  The shell processes
the contents of the here document for variable and command substitution
(and possibly other things as well, depending upon the shell).
</p>
<p>The shell construct &lsquo;<samp class="samp">$(&hellip;)</samp>&rsquo; is called <em class="dfn">command substitution</em>.
The output of the command inside the parentheses is substituted
into the command line.
Because the result is used in a variable assignment,
it is saved as a single string, even if the results contain whitespace.
</p>
<p>The expanded program is saved in the variable <code class="code">processed_program</code>.
It&rsquo;s done in these steps:
</p>
<ol class="enumerate">
<li> Run <code class="command">gawk</code> with the <code class="code">@include</code>-processing program (the
value of the <code class="code">expand_prog</code> shell variable) reading standard input.

</li><li> Standard input is the contents of the user&rsquo;s program,
from the shell variable <code class="code">program</code>.
Feed its contents to <code class="command">gawk</code> via a here document.

</li><li> Save the results of this processing in the shell variable
<code class="code">processed_program</code> by using command substitution.
</li></ol>

<p>The last step is to call <code class="command">gawk</code> with the expanded program,
along with the original
options and command-line arguments that the user supplied:
</p>
<div class="example">
<pre class="example-preformatted">eval gawk $opts -- '&quot;$processed_program&quot;' '&quot;$@&quot;'
</pre></div>

<p>The <code class="command">eval</code> command is a shell construct that reruns the shell&rsquo;s parsing
process.  This keeps things properly quoted.
</p>
<p>This version of <code class="command">igawk</code> represents the fifth version of this program.
There are four key simplifications that make the program work better:
</p>
<ul class="itemize mark-bullet">
<li>Using <code class="code">@include</code> even for the files named with <samp class="option">-f</samp> makes building
the initial collected <code class="command">awk</code> program much simpler; all the
<code class="code">@include</code> processing can be done once.

</li><li>Not trying to save the line read with <code class="code">getline</code>
in the <code class="code">pathto()</code> function when testing for the
file&rsquo;s accessibility for use with the main program simplifies things
considerably.

</li><li>Using a <code class="code">getline</code> loop in the <code class="code">BEGIN</code> rule does it all in one
place.  It is not necessary to call out to a separate loop for processing
nested <code class="code">@include</code> statements.

</li><li>Instead of saving the expanded program in a temporary file, putting it in a shell variable
avoids some potential security problems.
This has the disadvantage that the script relies upon more features
of the <code class="command">sh</code> language, making it harder to follow for those who
aren&rsquo;t familiar with <code class="command">sh</code>.
</li></ul>

<p>Also, this program illustrates that it is often worthwhile to combine
<code class="command">sh</code> and <code class="command">awk</code> programming together.  You can usually
accomplish quite a lot, without having to resort to low-level programming
in C or C++, and it is frequently easier to do certain kinds of string
and argument manipulation using the shell than it is in <code class="command">awk</code>.
</p>
<p>Finally, <code class="command">igawk</code> shows that it is not always necessary to add new
features to a program; they can often be layered on top.<a class="footnote" id="DOCF83" href="#FOOT83"><sup>83</sup></a>
</p>
<p>Before <code class="command">gawk</code> acquired its built-in <code class="code">@include</code> mechanism,
<code class="command">igawk</code> and its manual page were installed as part of the regular
<code class="command">gawk</code> installation (&lsquo;<samp class="samp">make install</samp>&rsquo;).  This is no longer
done, because it&rsquo;s no longer necessary. But we&rsquo;ve kept the program in this
Web page for its educational value.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Anagram-Program">
<div class="nav-panel">
<p>
Next: <a href="#Signature-Program" accesskey="n" rel="next">And Now for Something Completely Different</a>, Previous: <a href="#Igawk-Program" accesskey="p" rel="prev">An Easy Way to Use Library Functions</a>, Up: <a href="#Miscellaneous-Programs" accesskey="u" rel="up">A Grab Bag of <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Finding-Anagrams-from-a-Dictionary"><span>11.3.10 Finding Anagrams from a Dictionary<a class="copiable-link" href="#Finding-Anagrams-from-a-Dictionary"> &para;</a></span></h4>

<a class="index-entry-id" id="index-anagrams_002c-finding"></a>
<p>An interesting programming challenge is to
search for <em class="dfn">anagrams</em> in a
word list (such as
<samp class="file">/usr/share/dict/words</samp> on many GNU/Linux systems).
One word is an anagram of another if both words contain
the same letters
(e.g., &ldquo;babbling&rdquo; and &ldquo;blabbing&rdquo;).
</p>
<p>Column 2, Problem C, of Jon Bentley&rsquo;s <cite class="cite">Programming Pearls</cite>, Second
Edition, presents an elegant algorithm.  The idea is to give words that
are anagrams a common signature, sort all the words together by their
signatures, and then print them.  Dr. Bentley observes that taking the
letters in each word and sorting them produces those common signatures.
</p>
<p>The following program uses arrays of arrays to bring together
words with the same signature and array sorting to print the words
in sorted order:
</p>
<a class="index-entry-id" id="index-anagram_002eawk-program"></a>
<div class="example">
<pre class="example-preformatted"># anagram.awk --- An implementation of the anagram-finding algorithm
#                 from Jon Bentley's &quot;Programming Pearls,&quot; 2nd edition.
#                 Addison Wesley, 2000, ISBN 0-201-65788-0.
#                 Column 2, Problem C, section 2.8, pp 18-20.

/'s$/   { next }        # Skip possessives
</pre></div>

<p>The program starts with a header, and then a rule to skip
possessives in the dictionary file. The next rule builds
up the data structure. The first dimension of the array
is indexed by the signature; the second dimension is the word
itself:
</p>
<div class="example">
<pre class="example-preformatted">{
    key = word2key($1)  # Build signature
    data[key][$1] = $1  # Store word with signature
}
</pre></div>

<p>The <code class="code">word2key()</code> function creates the signature.
It splits the word apart into individual letters,
sorts the letters, and then joins them back together:
</p>
<div class="example">
<pre class="example-preformatted"># word2key --- split word apart into letters, sort, and join back together

function word2key(word,     a, i, n, result)
{
    n = split(word, a, &quot;&quot;)
    asort(a)

    for (i = 1; i &lt;= n; i++)
        result = result a[i]

    return result
}
</pre></div>

<p>Finally, the <code class="code">END</code> rule traverses the array
and prints out the anagram lists.  It sends the output
to the system <code class="command">sort</code> command because otherwise
the anagrams would appear in arbitrary order:
</p>
<div class="example">
<pre class="example-preformatted">END {
    sort = &quot;sort&quot;
    for (key in data) {
        # Sort words with same key
        nwords = asorti(data[key], words)
        if (nwords == 1)
            continue

        # And print. Minor glitch: trailing space at end of each line
        for (j = 1; j &lt;= nwords; j++)
            printf(&quot;%s &quot;, words[j]) | sort
        print &quot;&quot; | sort
    }
    close(sort)
}
</pre></div>

<p>Here is some partial output when the program is run:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f anagram.awk /usr/share/dict/words | grep '^b'</kbd>
...
babbled blabbed
babbler blabber brabble
babblers blabbers brabbles
babbling blabbing
babbly blabby
babel bable
babels beslab
babery yabber
...
</pre></div>


<hr>
</div>
<div class="subsection-level-extent" id="Signature-Program">
<div class="nav-panel">
<p>
Previous: <a href="#Anagram-Program" accesskey="p" rel="prev">Finding Anagrams from a Dictionary</a>, Up: <a href="#Miscellaneous-Programs" accesskey="u" rel="up">A Grab Bag of <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="And-Now-for-Something-Completely-Different"><span>11.3.11 And Now for Something Completely Different<a class="copiable-link" href="#And-Now-for-Something-Completely-Different"> &para;</a></span></h4>

<a class="index-entry-id" id="index-signature-program"></a>
<a class="index-entry-id" id="index-Brini_002c-Davide"></a>
<p>The following program was written by Davide Brini
and is published on <a class="uref" href="http://backreference.org/2011/02/03/obfuscated-awk/">his website</a>.
It serves as his signature in the Usenet group <code class="code">comp.lang.awk</code>.
He supplies the following copyright terms:
</p>
<blockquote class="quotation">
<p>Copyright &copy; 2008 Davide Brini
</p>
<p>Copying and distribution of the code published in this page, with or without
modification, are permitted in any medium without royalty provided the copyright
notice and this notice are preserved.
</p></blockquote>

<p>Here is the program:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">awk 'BEGIN{O=&quot;~&quot;~&quot;~&quot;;o=&quot;==&quot;==&quot;==&quot;;o+=+o;x=O&quot;&quot;O;while(X++&lt;=x+o+o)c=c&quot;%c&quot;;
printf c,(x-O)*(x-O),x*(x-o)-o,x*(x-O)+x-O-o,+x*(x-O)-x+o,X*(o*o+O)+x-O,
X*(X-x)-o*o,(x+X)*o*o+o,x*(X-x)-O-O,x-O+(O+o+X+x)*(o+O),X*X-X*(x-O)-x+O,
O+X*(o*(o+O)+O),+x+O+X*o,x*(x-o),(o+X+x)*o*o-(x-O-O),O+(X-x)*(X+O),x-O}'
</pre></div></div>

<a class="index-entry-id" id="index-Johansen_002c-Chris"></a>
<p>We leave it to you to determine what the program does.  (If you are
truly desperate to understand it, see Chris Johansen&rsquo;s explanation,
which is embedded in the Texinfo source file for this Web page.)
</p>

<hr>
</div>
</div>
<div class="section-level-extent" id="Programs-Summary">
<div class="nav-panel">
<p>
Next: <a href="#Programs-Exercises" accesskey="n" rel="next">Exercises</a>, Previous: <a href="#Miscellaneous-Programs" accesskey="p" rel="prev">A Grab Bag of <code class="command">awk</code> Programs</a>, Up: <a href="#Sample-Programs" accesskey="u" rel="up">Practical <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary-10"><span>11.4 Summary<a class="copiable-link" href="#Summary-10"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>The programs provided in this chapter
continue on the theme that reading programs is an excellent way to learn
Good Programming.

</li><li>Using &lsquo;<samp class="samp">#!</samp>&rsquo; to make <code class="command">awk</code> programs directly runnable makes
them easier to use.  Otherwise, invoke the program using &lsquo;<samp class="samp">awk
-f &hellip;</samp>&rsquo;.

</li><li>Reimplementing standard POSIX programs in <code class="command">awk</code> is a pleasant
exercise; <code class="command">awk</code>&rsquo;s expressive power lets you write such programs
in relatively few lines of code, yet they are functionally complete
and usable.

</li><li>One of standard <code class="command">awk</code>&rsquo;s weaknesses is working with individual
characters.  The ability to use <code class="code">split()</code> with the empty string as
the separator can considerably simplify such tasks.

</li><li>The examples here demonstrate the usefulness of the library
functions from <a class="ref" href="#Library-Functions">A Library of <code class="command">awk</code> Functions</a>
for a number of real (if small) programs.

</li><li>Besides reinventing POSIX wheels, other programs solved a selection of
interesting problems, such as finding duplicate words in text, printing
mailing labels, and finding anagrams.

</li></ul>

<hr>
</div>
<div class="section-level-extent" id="Programs-Exercises">
<div class="nav-panel">
<p>
Previous: <a href="#Programs-Summary" accesskey="p" rel="prev">Summary</a>, Up: <a href="#Sample-Programs" accesskey="u" rel="up">Practical <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Exercises-3"><span>11.5 Exercises<a class="copiable-link" href="#Exercises-3"> &para;</a></span></h3>

<ol class="enumerate">
<li> Rewrite <samp class="file">cut.awk</samp> (see <a class="pxref" href="#Cut-Program">Cutting Out Fields and Columns</a>)
using <code class="code">split()</code> with <code class="code">&quot;&quot;</code> as the separator.

</li><li> In <a class="ref" href="#Egrep-Program">Searching for Regular Expressions in Files</a>, we mentioned that &lsquo;<samp class="samp">egrep -i</samp>&rsquo; could be
simulated in versions of <code class="command">awk</code> without <code class="code">IGNORECASE</code> by
using <code class="code">tolower()</code> on the line and the pattern. In a footnote there,
we also mentioned that this solution has a bug: the translated line is
output, and not the original one.  Fix this problem.

</li><li> The POSIX version of <code class="command">id</code> takes options that control which
information is printed.  Modify the <code class="command">awk</code> version
(see <a class="pxref" href="#Id-Program">Printing Out User Information</a>) to accept the same arguments and perform in the
same way.

</li><li> The <samp class="file">split.awk</samp> program (see <a class="pxref" href="#Split-Program">Splitting a Large File into Pieces</a>) assumes
that letters are contiguous in the character set,
which isn&rsquo;t true for EBCDIC systems.
Fix this problem.
(Hint: Consider a different way to work through the alphabet,
without relying on <code class="code">ord()</code> and <code class="code">chr()</code>.)

</li><li> <a class="index-entry-id" id="index-Kernighan_002c-Brian-quotes-5"></a>
In <samp class="file">uniq.awk</samp> (see <a class="pxref" href="#Uniq-Program">Printing Nonduplicated Lines of Text</a>, the
logic for choosing which lines to print represents a <em class="dfn">state
machine</em>, which is &ldquo;a device which can be in one of a set number of stable
conditions depending on its previous condition and on the present values
of its inputs.&rdquo;<a class="footnote" id="DOCF84" href="#FOOT84"><sup>84</sup></a>
Brian Kernighan suggests that
&ldquo;an alternative approach to state machines is to just read
the input into an array, then use indexing.  It&rsquo;s almost always
easier code, and for most inputs where you would use this, just
as fast.&rdquo;  Rewrite the logic to follow this
suggestion.


</li><li> Why can&rsquo;t the <samp class="file">wc.awk</samp> program (see <a class="pxref" href="#Wc-Program">Counting Things</a>) just
use the value of <code class="code">FNR</code> in <code class="code">endfile()</code>?
Hint: Examine the code in <a class="ref" href="#Filetrans-Function">Noting Data file Boundaries</a>.


</li><li> Manipulation of individual characters in the <code class="command">translate</code> program
(see <a class="pxref" href="#Translate-Program">Transliterating Characters</a>) is painful using standard <code class="command">awk</code>
functions.  Given that <code class="command">gawk</code> can split strings into individual
characters using <code class="code">&quot;&quot;</code> as the separator, how might you use this
feature to simplify the program?

</li><li> The <samp class="file">extract.awk</samp> program (see <a class="pxref" href="#Extract-Program">Extracting Programs from Texinfo Source Files</a>) was written
before <code class="command">gawk</code> had the <code class="code">gensub()</code> function.  Use it
to simplify the code.

</li><li> Compare the performance of the <samp class="file">awksed.awk</samp> program
(see <a class="pxref" href="#Simple-Sed">A Simple Stream Editor</a>) with the more straightforward:

<div class="example">
<pre class="example-preformatted">BEGIN {
    pat = ARGV[1]
    repl = ARGV[2]
    ARGV[1] = ARGV[2] = &quot;&quot;
}

{ gsub(pat, repl); print }
</pre></div>

</li><li> What are the advantages and disadvantages of <samp class="file">awksed.awk</samp> versus
the real <code class="command">sed</code> utility?


</li><li> In <a class="ref" href="#Igawk-Program">An Easy Way to Use Library Functions</a>, we mentioned that not trying to save the line
read with <code class="code">getline</code> in the <code class="code">pathto()</code> function when testing
for the file&rsquo;s accessibility for use with the main program simplifies
things considerably.  What problem does this engender though?

<a class="index-entry-id" id="index-search-paths"></a>
<a class="index-entry-id" id="index-search-paths-for-source-files-1"></a>
<a class="index-entry-id" id="index-source-files_002c-search-path-for"></a>
<a class="index-entry-id" id="index-files-source_002c-search-path-for"></a>
<a class="index-entry-id" id="index-directories-searching-for-source-files-1"></a>
</li><li> As an additional example of the idea that it is not always necessary to
add new features to a program, consider the idea of having two files in
a directory in the search path:

<dl class="table">
<dt><samp class="file">default.awk</samp></dt>
<dd><p>This file contains a set of default library functions, such
as <code class="code">getopt()</code> and <code class="code">assert()</code>.
</p>
</dd>
<dt><samp class="file">site.awk</samp></dt>
<dd><p>This file contains library functions that are specific to a site or
installation; i.e., locally developed functions.
Having a separate file allows <samp class="file">default.awk</samp> to change with
new <code class="command">gawk</code> releases, without requiring the system administrator to
update it each time by adding the local functions.
</p></dd>
</dl>

<p>One user
suggested that <code class="command">gawk</code> be modified to automatically read these files
upon startup.  Instead, it would be very simple to modify <code class="command">igawk</code>
to do this. Since <code class="command">igawk</code> can process nested <code class="code">@include</code>
directives, <samp class="file">default.awk</samp> could simply contain <code class="code">@include</code>
statements for the desired library functions.
Make this change.
</p>
</li><li> Modify <samp class="file">anagram.awk</samp> (see <a class="pxref" href="#Anagram-Program">Finding Anagrams from a Dictionary</a>), to avoid
the use of the external <code class="command">sort</code> utility.

</li></ol>

<hr>
</div>
</div>
</div>
<div class="part-level-extent" id="Part-III_003a-Moving-Beyond-Standard-awk-with-gawk">
<div class="nav-panel">
<p>
Next: <a href="#Internationalization" accesskey="n" rel="next">Internationalization with <code class="command">gawk</code></a>, Previous: <a href="#Sample-Programs" accesskey="p" rel="prev">Practical <code class="command">awk</code> Programs</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h1 class="part"><span>Part III:<br>Moving Beyond Standard <code class="command">awk</code> with <code class="command">gawk</code><a class="copiable-link" href="#Part-III_003a-Moving-Beyond-Standard-awk-with-gawk"> &para;</a></span></h1>
<hr>


<ul class="mini-toc">
<li><a href="#Advanced-Features" accesskey="1">Advanced Features of <code class="command">gawk</code></a></li>
<li><a href="#Internationalization" accesskey="2">Internationalization with <code class="command">gawk</code></a></li>
<li><a href="#Debugger" accesskey="3">Debugging <code class="command">awk</code> Programs</a></li>
<li><a href="#Namespaces" accesskey="4">Namespaces in <code class="command">gawk</code></a></li>
<li><a href="#Arbitrary-Precision-Arithmetic" accesskey="5">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a></li>
<li><a href="#Dynamic-Extensions" accesskey="6">Writing Extensions for <code class="command">gawk</code></a></li>
</ul>
<div class="chapter-level-extent" id="Advanced-Features">
<h2 class="chapter" id="Advanced-Features-of-gawk"><span>12 Advanced Features of <code class="command">gawk</code><a class="copiable-link" href="#Advanced-Features-of-gawk"> &para;</a></span></h2>
<a class="index-entry-id" id="index-gawk-features-advanced"></a>
<a class="index-entry-id" id="index-advanced-features-gawk"></a>
<a class="index-entry-id" id="index-Langston_002c-Peter"></a>
<a class="index-entry-id" id="index-English_002c-Steve"></a>
<blockquote class="quotation">
<p><i class="i">Write documentation as if whoever reads it is
a violent psychopath who knows where you live.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Steve English, as quoted by Peter Langston</em>
</div>
<p>This chapter discusses advanced features in <code class="command">gawk</code>.
It&rsquo;s a bit of a &ldquo;grab bag&rdquo; of items that are otherwise unrelated
to each other.
First, we look at a command-line option that allows <code class="command">gawk</code> to recognize
nondecimal numbers in input data, not just in <code class="command">awk</code>
programs.
Then, <code class="command">gawk</code>&rsquo;s special features for sorting arrays are presented.
Next, two-way I/O, discussed briefly in earlier parts of this
Web page, is described in full detail, along with the basics
of TCP/IP networking.  We then see how <code class="command">gawk</code>
can <em class="dfn">profile</em> an <code class="command">awk</code> program, making it possible to tune
it for performance.
Next, we present an experimental feature that allows you to preserve
the values of <code class="command">awk</code> variables and arrays between runs of <code class="command">gawk</code>.
Finally, we discuss the philosophy behind <code class="command">gawk</code>&rsquo;s extension
mechanism.
</p>
<p>Additional advanced features are discussed in separate chapters of their
own:
</p>
<ul class="itemize mark-bullet">
<li><a class="ref" href="#Internationalization">Internationalization with <code class="command">gawk</code></a>, discusses how to internationalize
your <code class="command">awk</code> programs, so that they can speak multiple
national languages.

</li><li><a class="ref" href="#Debugger">Debugging <code class="command">awk</code> Programs</a>, describes <code class="command">gawk</code>&rsquo;s built-in command-line
debugger for debugging <code class="command">awk</code> programs.

</li><li><a class="ref" href="#Arbitrary-Precision-Arithmetic">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a>, describes how you can use
<code class="command">gawk</code> to perform arbitrary-precision arithmetic.

</li><li><a class="ref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>,
discusses the ability to dynamically add new built-in functions to
<code class="command">gawk</code>.
</li></ul>


<ul class="mini-toc">
<li><a href="#Nondecimal-Data" accesskey="1">Allowing Nondecimal Input Data</a></li>
<li><a href="#Boolean-Typed-Values" accesskey="2">Boolean Typed Values</a></li>
<li><a href="#Array-Sorting" accesskey="3">Controlling Array Traversal and Array Sorting</a></li>
<li><a href="#Two_002dway-I_002fO" accesskey="4">Two-Way Communications with Another Process</a></li>
<li><a href="#TCP_002fIP-Networking" accesskey="5">Using <code class="command">gawk</code> for Network Programming</a></li>
<li><a href="#Profiling" accesskey="6">Profiling Your <code class="command">awk</code> Programs</a></li>
<li><a href="#Persistent-Memory" accesskey="7">Preserving Data Between Runs</a></li>
<li><a href="#Extension-Philosophy" accesskey="8">Builtin Features versus Extensions</a></li>
<li><a href="#Advanced-Features-Summary" accesskey="9">Summary</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Nondecimal-Data">
<div class="nav-panel">
<p>
Next: <a href="#Boolean-Typed-Values" accesskey="n" rel="next">Boolean Typed Values</a>, Up: <a href="#Advanced-Features" accesskey="u" rel="up">Advanced Features of <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Allowing-Nondecimal-Input-Data"><span>12.1 Allowing Nondecimal Input Data<a class="copiable-link" href="#Allowing-Nondecimal-Input-Data"> &para;</a></span></h3>
<a class="index-entry-id" id="index-_002d_002dnon_002ddecimal_002ddata-option-1"></a>
<a class="index-entry-id" id="index-advanced-features-nondecimal-input-data"></a>
<a class="index-entry-id" id="index-input-data_002c-nondecimal"></a>
<a class="index-entry-id" id="index-constants-nondecimal"></a>

<p>If you run <code class="command">gawk</code> with the <samp class="option">--non-decimal-data</samp> option,
you can have nondecimal values in your input data:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo 0123 123 0x123 |</kbd>
&gt; <kbd class="kbd">gawk --non-decimal-data '{ printf &quot;%d, %d, %d\n&quot;, $1, $2, $3 }'</kbd>
-| 83, 123, 291
</pre></div>

<p>For this feature to work, write your program so that
<code class="command">gawk</code> treats your data as numeric:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo 0123 123 0x123 | gawk '{ print $1, $2, $3 }'</kbd>
-| 0123 123 0x123
</pre></div>

<p>The <code class="code">print</code> statement treats its expressions as strings.
Although the fields can act as numbers when necessary,
they are still strings, so <code class="code">print</code> does not try to treat them
numerically.  You need to add zero to a field to force it to
be treated as a number.  For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo 0123 123 0x123 | gawk --non-decimal-data '</kbd>
&gt; <kbd class="kbd">{ print $1, $2, $3</kbd>
&gt;   <kbd class="kbd">print $1 + 0, $2 + 0, $3 + 0 }'</kbd>
-| 0123 123 0x123
-| 83 123 291
</pre></div>

<p>Because it is common to have decimal data with leading zeros, and because
using this facility could lead to surprising results, the default is to leave it
disabled.  If you want it, you must explicitly request it.
</p>
<a class="index-entry-id" id="index-programming-conventions-_002d_002dnon_002ddecimal_002ddata-option"></a>
<a class="index-entry-id" id="index-_002d_002dnon_002ddecimal_002ddata-option-strtonum_0028_0029-function-and"></a>
<a class="index-entry-id" id="index-strtonum_0028_0029-function-_0028gawk_0029-_002d_002dnon_002ddecimal_002ddata-option-and"></a>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> <em class="emph">Use of this option is not recommended.</em>
It can break old programs very badly.
Instead, use the <code class="code">strtonum()</code> function to convert your data
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).
This makes your programs easier to write and easier to read, and
leads to less surprising results.
</p>
<p>This option may disappear in a future version of <code class="command">gawk</code>.
</p></blockquote>

<hr>
</div>
<div class="section-level-extent" id="Boolean-Typed-Values">
<div class="nav-panel">
<p>
Next: <a href="#Array-Sorting" accesskey="n" rel="next">Controlling Array Traversal and Array Sorting</a>, Previous: <a href="#Nondecimal-Data" accesskey="p" rel="prev">Allowing Nondecimal Input Data</a>, Up: <a href="#Advanced-Features" accesskey="u" rel="up">Advanced Features of <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Boolean-Typed-Values-1"><span>12.2 Boolean Typed Values<a class="copiable-link" href="#Boolean-Typed-Values-1"> &para;</a></span></h3>

<p>Scalar values in <code class="command">awk</code> are either numbers or strings.
<code class="command">gawk</code> also supports values of type <code class="code">regexp</code>
(see <a class="pxref" href="#Strong-Regexp-Constants">Strongly Typed Regexp Constants</a>).
</p>
<p>As described in <a class="ref" href="#Truth-Values">True and False in <code class="command">awk</code></a>, Boolean values in <code class="command">awk</code>
don&rsquo;t have a separate type: a value counts as &ldquo;true&rdquo; if it is nonzero
or non-null, and as &ldquo;false&rdquo; otherwise.
</p>
<p>When interchanging data with languages that do have a real Boolean type,
using a standard format such as JSON or XML, the lack of a true Boolean
type in <code class="command">awk</code> is problematic.
(See, for example, the <code class="code">json</code> extension provided by
<a class="uref" href="https://sourceforge.net/projects/gawkextlib">the <code class="code">gawkextlib</code> project</a>.)
</p>
<p>It&rsquo;s easy to import Boolean data into <code class="command">awk</code>, but then the fact
that it was originally Boolean is lost.  Exporting data is even harder;
there&rsquo;s no way to indicate that a value is really Boolean.
</p>
<p>To solve this problem, <code class="command">gawk</code> provides a function named <code class="code">mkbool()</code>.
It takes one argument, which is any <code class="command">awk</code> expression, and it
returns a value of Boolean type.
</p>
<p>The returned values are normal <code class="command">awk</code> numeric values, with
values of either one or zero,
depending upon the truth
value of the original expression passed in the call to <code class="code">mkbool()</code>.
</p>
<p>The <code class="code">typeof()</code> function (see <a class="pxref" href="#Type-Functions">Getting Type Information</a>) returns
<code class="code">&quot;number|bool&quot;</code> for these values.
</p>
<p>Thus Boolean-typed values <em class="emph">are</em> numbers as far as <code class="command">gawk</code>
is concerned, except that extension code can treat them as Booleans
if desired.
</p>
<p>While it would have been possible to add two new built-in variables
of Boolean type named <code class="code">TRUE</code> and <code class="code">FALSE</code>, doing so would
undoubtedly have broken many existing <code class="command">awk</code> programs.  Instead,
having a &ldquo;generator&rdquo; function that creates Boolean values gives
flexibility, without breaking as much existing code.
</p>
<hr>
</div>
<div class="section-level-extent" id="Array-Sorting">
<div class="nav-panel">
<p>
Next: <a href="#Two_002dway-I_002fO" accesskey="n" rel="next">Two-Way Communications with Another Process</a>, Previous: <a href="#Boolean-Typed-Values" accesskey="p" rel="prev">Boolean Typed Values</a>, Up: <a href="#Advanced-Features" accesskey="u" rel="up">Advanced Features of <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Controlling-Array-Traversal-and-Array-Sorting"><span>12.3 Controlling Array Traversal and Array Sorting<a class="copiable-link" href="#Controlling-Array-Traversal-and-Array-Sorting"> &para;</a></span></h3>

<p><code class="command">gawk</code> lets you control the order in which a
&lsquo;<samp class="samp">for (<var class="var">indx</var> in <var class="var">array</var>)</samp>&rsquo;
loop traverses an array.
</p>
<p>In addition, two built-in functions, <code class="code">asort()</code> and <code class="code">asorti()</code>,
let you sort arrays based on the array values and indices, respectively.
These two functions also provide control over the sorting criteria used
to order the elements during sorting.
</p>

<ul class="mini-toc">
<li><a href="#Controlling-Array-Traversal" accesskey="1">Controlling Array Traversal</a></li>
<li><a href="#Array-Sorting-Functions" accesskey="2">Sorting Array Values and Indices with <code class="command">gawk</code></a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Controlling-Array-Traversal">
<div class="nav-panel">
<p>
Next: <a href="#Array-Sorting-Functions" accesskey="n" rel="next">Sorting Array Values and Indices with <code class="command">gawk</code></a>, Up: <a href="#Array-Sorting" accesskey="u" rel="up">Controlling Array Traversal and Array Sorting</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Controlling-Array-Traversal-1"><span>12.3.1 Controlling Array Traversal<a class="copiable-link" href="#Controlling-Array-Traversal-1"> &para;</a></span></h4>

<p>By default, the order in which a &lsquo;<samp class="samp">for (<var class="var">indx</var> in <var class="var">array</var>)</samp>&rsquo; loop
scans an array is not defined; it is generally based upon
the internal implementation of arrays inside <code class="command">awk</code>.
</p>
<p>Often, though, it is desirable to be able to loop over the elements
in a particular order that you, the programmer, choose.  <code class="command">gawk</code>
lets you do this.
</p>
<p><a class="ref" href="#Controlling-Scanning">Using Predefined Array Scanning Orders with <code class="command">gawk</code></a> describes how you can assign special,
predefined values to <code class="code">PROCINFO[&quot;sorted_in&quot;]</code> in order to
control the order in which <code class="command">gawk</code> traverses an array
during a <code class="code">for</code> loop.
</p>
<p>In addition, the value of <code class="code">PROCINFO[&quot;sorted_in&quot;]</code> can be a
function name.<a class="footnote" id="DOCF85" href="#FOOT85"><sup>85</sup></a>
This lets you traverse an array based on any custom criterion.
The array elements are ordered according to the return value of this
function.  The comparison function should be defined with at least
four arguments:
</p>
<div class="example">
<pre class="example-preformatted">function comp_func(i1, v1, i2, v2)
{
    <var class="var">compare elements 1 and 2 in some fashion</var>
    <var class="var">return &lt; 0; 0; or &gt; 0</var>
}
</pre></div>

<p>Here, <code class="code">i1</code> and <code class="code">i2</code> are the indices, and <code class="code">v1</code> and <code class="code">v2</code>
are the corresponding values of the two elements being compared.
Either <code class="code">v1</code> or <code class="code">v2</code>, or both, can be arrays if the array being
traversed contains subarrays as values.
(See <a class="xref" href="#Arrays-of-Arrays">Arrays of Arrays</a> for more information about subarrays.)
The three possible return values are interpreted as follows:
</p>
<dl class="table">
<dt><code class="code">comp_func(i1, v1, i2, v2) &lt; 0</code></dt>
<dd><p>Index <code class="code">i1</code> comes before index <code class="code">i2</code> during loop traversal.
</p>
</dd>
<dt><code class="code">comp_func(i1, v1, i2, v2) == 0</code></dt>
<dd><p>Indices <code class="code">i1</code> and <code class="code">i2</code>
come together, but the relative order with respect to each other is undefined.
</p>
</dd>
<dt><code class="code">comp_func(i1, v1, i2, v2) &gt; 0</code></dt>
<dd><p>Index <code class="code">i1</code> comes after index <code class="code">i2</code> during loop traversal.
</p></dd>
</dl>

<p>Our first comparison function can be used to scan an array in
numerical order of the indices:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">function cmp_num_idx(i1, v1, i2, v2)
{
     # numerical index comparison, ascending order
     return (i1 - i2)
}
</pre></div></div>

<p>Our second function traverses an array based on the string order of
the element values rather than by indices:
</p>
<div class="example">
<pre class="example-preformatted">function cmp_str_val(i1, v1, i2, v2)
{
    # string value comparison, ascending order
    v1 = v1 &quot;&quot;
    v2 = v2 &quot;&quot;
    if (v1 &lt; v2)
        return -1
    return (v1 != v2)
}
</pre></div>

<p>The third
comparison function makes all numbers, and numeric strings without
any leading or trailing spaces, come out first during loop traversal:
</p>
<div class="example">
<pre class="example-preformatted">function cmp_num_str_val(i1, v1, i2, v2,   n1, n2)
{
     # numbers before string value comparison, ascending order
     n1 = v1 + 0
     n2 = v2 + 0
     if (n1 == v1)
         return (n2 == v2) ? (n1 - n2) : -1
     else if (n2 == v2)
         return 1
     return (v1 &lt; v2) ? -1 : (v1 != v2)
}
</pre></div>

<p>Here is a main program to demonstrate how <code class="command">gawk</code>
behaves using each of the previous functions:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    data[&quot;one&quot;] = 10
    data[&quot;two&quot;] = 20
    data[10] = &quot;one&quot;
    data[100] = 100
    data[20] = &quot;two&quot;

    f[1] = &quot;cmp_num_idx&quot;
    f[2] = &quot;cmp_str_val&quot;
    f[3] = &quot;cmp_num_str_val&quot;
    for (i = 1; i &lt;= 3; i++) {
        printf(&quot;Sort function: %s\n&quot;, f[i])
        PROCINFO[&quot;sorted_in&quot;] = f[i]
        for (j in data)
            printf(&quot;\tdata[%s] = %s\n&quot;, j, data[j])
        print &quot;&quot;
    }
}
</pre></div>

<p>Here are the results when the program is run:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f compdemo.awk</kbd>
-| Sort function: cmp_num_idx      <i class="i">Sort by numeric index</i>
-|     data[two] = 20
-|     data[one] = 10              <i class="i">Both strings are numerically zero</i>
-|     data[10] = one
-|     data[20] = two
-|     data[100] = 100
-|
-| Sort function: cmp_str_val      <i class="i">Sort by element values as strings</i>
-|     data[one] = 10
-|     data[100] = 100             <i class="i">String 100 is less than string 20</i>
-|     data[two] = 20
-|     data[10] = one
-|     data[20] = two
-|
-| Sort function: cmp_num_str_val  <i class="i">Sort all numeric values before all strings</i>
-|     data[one] = 10
-|     data[two] = 20
-|     data[100] = 100
-|     data[10] = one
-|     data[20] = two
</pre></div>

<p>Consider sorting the entries of a GNU/Linux system password file
according to login name.  The following program sorts records
by a specific field position and can be used for this purpose:
</p>
<div class="example">
<pre class="example-preformatted"># passwd-sort.awk --- simple program to sort by field position
# field position is specified by the global variable POS

function cmp_field(i1, v1, i2, v2)
{
    # comparison by value, as string, and ascending order
    return v1[POS] &lt; v2[POS] ? -1 : (v1[POS] != v2[POS])
}

{
    for (i = 1; i &lt;= NF; i++)
        a[NR][i] = $i
}

</pre><div class="group"><pre class="example-preformatted">END {
    PROCINFO[&quot;sorted_in&quot;] = &quot;cmp_field&quot;
</pre></div><pre class="example-preformatted">    if (POS &lt; 1 || POS &gt; NF)
        POS = 1

    for (i in a) {
        for (j = 1; j &lt;= NF; j++)
            printf(&quot;%s%c&quot;, a[i][j], j &lt; NF ? &quot;:&quot; : &quot;&quot;)
        print &quot;&quot;
    }
}
</pre></div>

<p>The first field in each entry of the password file is the user&rsquo;s login name,
and the fields are separated by colons.
Each record defines a subarray,
with each field as an element in the subarray.
Running the program produces the
following output:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -v POS=1 -F: -f sort.awk /etc/passwd</kbd>
-| adm:x:3:4:adm:/var/adm:/sbin/nologin
-| apache:x:48:48:Apache:/var/www:/sbin/nologin
-| avahi:x:70:70:Avahi daemon:/:/sbin/nologin
...
</pre></div>

<p>The comparison should normally always return the same value when given a
specific pair of array elements as its arguments.  If inconsistent
results are returned, then the order is undefined.  This behavior can be
exploited to introduce random order into otherwise seemingly
ordered data:
</p>
<div class="example">
<pre class="example-preformatted">function cmp_randomize(i1, v1, i2, v2)
{
    # random order (caution: this may never terminate!)
    return (2 - 4 * rand())
}
</pre></div>

<p>As already mentioned, the order of the indices is arbitrary if two
elements compare equal.  This is usually not a problem, but letting
the tied elements come out in arbitrary order can be an issue, especially
when comparing item values.  The partial ordering of the equal elements
may change the next time the array is traversed, if other elements are added to or
removed from the array.  One way to resolve ties when comparing elements
with otherwise equal values is to include the indices in the comparison
rules.  Note that doing this may make the loop traversal less efficient,
so consider it only if necessary.  The following comparison functions
force a deterministic order, and are based on the fact that the
(string) indices of two elements are never equal:
</p>
<div class="example">
<pre class="example-preformatted">function cmp_numeric(i1, v1, i2, v2)
{
    # numerical value (and index) comparison, descending order
    return (v1 != v2) ? (v2 - v1) : (i2 - i1)
}

</pre><div class="group"><pre class="example-preformatted">function cmp_string(i1, v1, i2, v2)
{
    # string value (and index) comparison, descending order
    v1 = v1 i1
    v2 = v2 i2
    return (v1 &gt; v2) ? -1 : (v1 != v2)
}
</pre></div></div>


<p>A custom comparison function can often simplify ordered loop
traversal, and the sky is really the limit when it comes to
designing such a function.
</p>
<p>When string comparisons are made during a sort, either for element
values where one or both aren&rsquo;t numbers, or for element indices
handled as strings, the value of <code class="code">IGNORECASE</code>
(see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>) controls whether
the comparisons treat corresponding upper- and lowercase letters as
equivalent or distinct.
</p>
<p>Another point to keep in mind is that in the case of subarrays,
the element values can themselves be arrays; a production comparison
function should use the <code class="code">isarray()</code> function
(see <a class="pxref" href="#Type-Functions">Getting Type Information</a>)
to check for this, and choose a defined sorting order for subarrays.
</p>
<a class="index-entry-id" id="index-POSIX-mode-11"></a>
<p>All sorting based on <code class="code">PROCINFO[&quot;sorted_in&quot;]</code>
is disabled in POSIX mode,
because the <code class="code">PROCINFO</code> array is not special in that case.
</p>
<p>As a side note, sorting the array indices before traversing
the array has been reported to add a 15% to 20% overhead to the
execution time of <code class="command">awk</code> programs. For this reason,
sorted array traversal is not the default.
</p>

<hr>
</div>
<div class="subsection-level-extent" id="Array-Sorting-Functions">
<div class="nav-panel">
<p>
Previous: <a href="#Controlling-Array-Traversal" accesskey="p" rel="prev">Controlling Array Traversal</a>, Up: <a href="#Array-Sorting" accesskey="u" rel="up">Controlling Array Traversal and Array Sorting</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Sorting-Array-Values-and-Indices-with-gawk"><span>12.3.2 Sorting Array Values and Indices with <code class="command">gawk</code><a class="copiable-link" href="#Sorting-Array-Values-and-Indices-with-gawk"> &para;</a></span></h4>

<a class="index-entry-id" id="index-arrays-sorting-asort_0028_0029-function-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-arrays-sorting-asorti_0028_0029-function-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-asort_0028_0029-function-_0028gawk_0029-1"></a>
<a class="index-entry-id" id="index-asort_0028_0029-function-_0028gawk_0029-arrays_002c-sorting"></a>
<a class="index-entry-id" id="index-asort_0028_0029-function-_0028gawk_0029-side-effects"></a>
<a class="index-entry-id" id="index-asorti_0028_0029-function-_0028gawk_0029-1"></a>
<a class="index-entry-id" id="index-asorti_0028_0029-function-_0028gawk_0029-arrays_002c-sorting"></a>
<a class="index-entry-id" id="index-asorti_0028_0029-function-_0028gawk_0029-side-effects"></a>
<a class="index-entry-id" id="index-sort-function_002c-arrays_002c-sorting"></a>
<p>In most <code class="command">awk</code> implementations, sorting an array requires writing
a <code class="code">sort()</code> function.  This can be educational for exploring
different sorting algorithms, but usually that&rsquo;s not the point of the program.
<code class="command">gawk</code> provides the built-in <code class="code">asort()</code> and <code class="code">asorti()</code>
functions (see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>) for sorting arrays.  For example:
</p>
<div class="example">
<pre class="example-preformatted"><var class="var">populate the array</var> data
n = asort(data)
for (i = 1; i &lt;= n; i++)
    <var class="var">do something with</var> data[i]
</pre></div>

<p>After the call to <code class="code">asort()</code>, the array <code class="code">data</code> is indexed from 1
to some number <var class="var">n</var>, the total number of elements in <code class="code">data</code>.
(This count is <code class="code">asort()</code>&rsquo;s return value.)
<code class="code">data[1]</code> &lt;= <code class="code">data[2]</code> &lt;= <code class="code">data[3]</code>, and so on.
The default comparison is based on the type of the elements
(see <a class="pxref" href="#Typing-and-Comparison">Variable Typing and Comparison Expressions</a>).
All numeric values come before all string values,
which in turn come before all subarrays.
</p>
<a class="index-entry-id" id="index-side-effects-asort_0028_0029-function"></a>
<a class="index-entry-id" id="index-side-effects-asorti_0028_0029-function"></a>
<p>An important side effect of calling <code class="code">asort()</code> is that
<em class="emph">the array&rsquo;s original indices are irrevocably lost</em>.
As this isn&rsquo;t always desirable, <code class="code">asort()</code> accepts a
second argument:
</p>
<div class="example">
<pre class="example-preformatted"><var class="var">populate the array</var> source
n = asort(source, dest)
for (i = 1; i &lt;= n; i++)
    <var class="var">do something with</var> dest[i]
</pre></div>

<p>In this case, <code class="command">gawk</code> copies the <code class="code">source</code> array into the
<code class="code">dest</code> array and then sorts <code class="code">dest</code>, destroying its indices.
However, the <code class="code">source</code> array is not affected.
</p>
<p>Often, what&rsquo;s needed is to sort on the values of the <em class="emph">indices</em>
instead of the values of the elements.  To do that, use the
<code class="code">asorti()</code> function.  The interface and behavior are identical to
that of <code class="code">asort()</code>, except that the index values are used for sorting
and become the values of the result array:
</p>
<div class="example">
<pre class="example-preformatted">{ source[$0] = some_func($0) }

END {
    n = asorti(source, dest)
    for (i = 1; i &lt;= n; i++) {
        <i class="i">Work with sorted indices directly:</i>
        <var class="var">do something with</var> dest[i]
        ...
        <i class="i">Access original array via sorted indices:</i>
        <var class="var">do something with</var> source[dest[i]]
    }
}
</pre></div>

<p>So far, so good. Now it starts to get interesting.  Both <code class="code">asort()</code>
and <code class="code">asorti()</code> accept a third string argument to control comparison
of array elements.  When we introduced <code class="code">asort()</code> and <code class="code">asorti()</code>
in <a class="ref" href="#String-Functions">String-Manipulation Functions</a>, we ignored this third argument; however,
now is the time to describe how this argument affects these two functions.
</p>
<p>Basically, the third argument specifies how the array is to be sorted.
There are two possibilities.  As with <code class="code">PROCINFO[&quot;sorted_in&quot;]</code>,
this argument may be one of the predefined names that <code class="command">gawk</code>
provides (see <a class="pxref" href="#Controlling-Scanning">Using Predefined Array Scanning Orders with <code class="command">gawk</code></a>), or it may be the name of a
user-defined function (see <a class="pxref" href="#Controlling-Array-Traversal">Controlling Array Traversal</a>).
</p>
<p>In the latter case, <em class="emph">the function can compare elements in any way
it chooses</em>, taking into account just the indices, just the values,
or both.  This is extremely powerful.
</p>
<p>Once the array is sorted, <code class="code">asort()</code> takes the <em class="emph">values</em> in
their final order and uses them to fill in the result array, whereas
<code class="code">asorti()</code> takes the <em class="emph">indices</em> in their final order and uses
them to fill in the result array.
</p>
<a class="index-entry-id" id="index-reference-counting_002c-sorting-arrays"></a>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> Copying array indices and elements isn&rsquo;t expensive in terms of memory.
Internally, <code class="command">gawk</code> maintains <em class="dfn">reference counts</em> to data.
For example, when <code class="code">asort()</code> copies the first array to the second one,
there is only one copy of the original array elements&rsquo; data, even though
both arrays use the values.
</p></blockquote>

<p>You may use the same array for both the first and second arguments to
<code class="code">asort()</code> and <code class="code">asorti()</code>.  Doing so only makes sense if you
are also supplying the third argument, since <code class="command">awk</code> doesn&rsquo;t
provide a way to pass that third argument without also passing the first
and second ones.
</p>
<a class="index-entry-id" id="index-gawk-IGNORECASE-variable-in-4"></a>
<a class="index-entry-id" id="index-arrays-sorting-IGNORECASE-variable-and"></a>
<a class="index-entry-id" id="index-IGNORECASE-variable-array-sorting-functions-and"></a>
<p>Because <code class="code">IGNORECASE</code> affects string comparisons, the value
of <code class="code">IGNORECASE</code> also affects sorting for both <code class="code">asort()</code> and <code class="code">asorti()</code>.
Note also that the locale&rsquo;s sorting order does <em class="emph">not</em>
come into play; comparisons are based on character values only.<a class="footnote" id="DOCF86" href="#FOOT86"><sup>86</sup></a>
</p>
<p>The following example demonstrates the use of a comparison function with
<code class="code">asort()</code>.  The comparison function, <code class="code">case_fold_compare()</code>, maps
both values to lowercase in order to compare them ignoring case.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted"># case_fold_compare --- compare as strings, ignoring case

function case_fold_compare(i1, v1, i2, v2,    l, r)
{
    l = tolower(v1)
</pre></div><pre class="example-preformatted">    r = tolower(v2)

    if (l &lt; r)
        return -1
    else if (l == r)
        return 0
    else
        return 1
}
</pre></div>

<p>And here is the test program for it:
</p>
<div class="example">
<pre class="example-preformatted"># Test program

BEGIN {
    Letters = &quot;abcdefghijklmnopqrstuvwxyz&quot; \
              &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;
    split(Letters, data, &quot;&quot;)

    asort(data, result, &quot;case_fold_compare&quot;)

    j = length(result)
    for (i = 1; i &lt;= j; i++) {
        printf(&quot;%s&quot;, result[i])
        if (i % (j/2) == 0)
            printf(&quot;\n&quot;)
        else
            printf(&quot; &quot;)
    }
}
</pre></div>

<p>When run, we get the following:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f case_fold_compare.awk</kbd>
-| A a B b c C D d e E F f g G H h i I J j k K l L M m
-| n N O o p P Q q r R S s t T u U V v w W X x y Y z Z
</pre></div>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> &ldquo;Under the hood,&rdquo; <code class="command">gawk</code> uses the C library <code class="code">qsort()</code>
function to manage the sorting. <code class="code">qsort()</code> can call itself
recursively.  This means that when you write a comparison function,
you should be careful to avoid the use of global variables and arrays;
use only local variables and arrays that you declare as additional
parameters to the comparison function.  Otherwise, you are likely to
cause unintentional memory corruption in your global arrays and possibly
cause <code class="command">gawk</code> itself to fail.
</p></blockquote>

<hr>
</div>
</div>
<div class="section-level-extent" id="Two_002dway-I_002fO">
<div class="nav-panel">
<p>
Next: <a href="#TCP_002fIP-Networking" accesskey="n" rel="next">Using <code class="command">gawk</code> for Network Programming</a>, Previous: <a href="#Array-Sorting" accesskey="p" rel="prev">Controlling Array Traversal and Array Sorting</a>, Up: <a href="#Advanced-Features" accesskey="u" rel="up">Advanced Features of <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Two_002dWay-Communications-with-Another-Process"><span>12.4 Two-Way Communications with Another Process<a class="copiable-link" href="#Two_002dWay-Communications-with-Another-Process"> &para;</a></span></h3>


<a class="index-entry-id" id="index-advanced-features-processes_002c-communicating-with"></a>
<a class="index-entry-id" id="index-processes_002c-two_002dway-communications-with"></a>
<p>It is often useful to be able to
send data to a separate program for
processing and then read the result.  This can always be
done with temporary files:
</p>
<div class="example">
<pre class="example-preformatted"># Write the data for processing
tempfile = (&quot;mydata.&quot; PROCINFO[&quot;pid&quot;])
while (<var class="var">not done with data</var>)
    print <var class="var">data</var> | (&quot;subprogram &gt; &quot; tempfile)
close(&quot;subprogram &gt; &quot; tempfile)

# Read the results, remove tempfile when done
while ((getline newdata &lt; tempfile) &gt; 0)
    <var class="var">process</var> newdata <var class="var">appropriately</var>
close(tempfile)
system(&quot;rm &quot; tempfile)
</pre></div>

<p>This works, but not elegantly.  Among other things, it requires that
the program be run in a directory that cannot be shared among users;
for example, <samp class="file">/tmp</samp> will not do, as another user might happen
to be using a temporary file with the same name.<a class="footnote" id="DOCF87" href="#FOOT87"><sup>87</sup></a> </p>
<a class="index-entry-id" id="index-coprocesses-1"></a>
<a class="index-entry-id" id="index-input_002foutput-two_002dway"></a>
<a class="index-entry-id" id="index-_007c-_0028vertical-bar_0029-_007c_0026-operator-_0028I_002fO_0029-3"></a>
<a class="index-entry-id" id="index-vertical-bar-_0028_007c_0029-_007c_0026-operator-_0028I_002fO_0029-2"></a>
<a class="index-entry-id" id="index-csh-utility-_007c_0026-operator_002c-comparison-with"></a>
<p>However, with <code class="command">gawk</code>, it is possible to
open a <em class="emph">two-way</em> pipe to another process.  The second process is
termed a <em class="dfn">coprocess</em>, as it runs in parallel with <code class="command">gawk</code>.
The two-way connection is created using the &lsquo;<samp class="samp">|&amp;</samp>&rsquo; operator
(borrowed from the Korn shell, <code class="command">ksh</code>):<a class="footnote" id="DOCF88" href="#FOOT88"><sup>88</sup></a>
</p>
<div class="example">
<pre class="example-preformatted">do {
    print <var class="var">data</var> |&amp; &quot;subprogram&quot;
    &quot;subprogram&quot; |&amp; getline results
} while (<var class="var">data left to process</var>)
close(&quot;subprogram&quot;)
</pre></div>

<p>The first time an I/O operation is executed using the &lsquo;<samp class="samp">|&amp;</samp>&rsquo;
operator, <code class="command">gawk</code> creates a two-way pipeline to a child process
that runs the other program.  Output created with <code class="code">print</code>
or <code class="code">printf</code> is written to the program&rsquo;s standard input, and
output from the program&rsquo;s standard output can be read by the <code class="command">gawk</code>
program using <code class="code">getline</code>.
As is the case with processes started by &lsquo;<samp class="samp">|</samp>&rsquo;, the subprogram
can be any program, or pipeline of programs, that can be started by
the shell.
</p>
<p>There are some cautionary items to be aware of:
</p>
<ul class="itemize mark-bullet">
<li>As the code inside <code class="command">gawk</code> currently stands, the coprocess&rsquo;s
standard error goes to the same place that the parent <code class="command">gawk</code>&rsquo;s
standard error goes. It is not possible to read the child&rsquo;s
standard error separately.

<a class="index-entry-id" id="index-deadlocks"></a>
<a class="index-entry-id" id="index-buffering-input_002foutput-1"></a>
<a class="index-entry-id" id="index-getline-command-deadlock-and"></a>
</li><li>I/O buffering may be a problem.  <code class="command">gawk</code> automatically
flushes all output down the pipe to the coprocess.
However, if the coprocess does not flush its output,
<code class="command">gawk</code> may hang when doing a <code class="code">getline</code> in order to read
the coprocess&rsquo;s results.  This could lead to a situation
known as <em class="dfn">deadlock</em>, where each process is waiting for the
other one to do something.
</li></ul>

<a class="index-entry-id" id="index-close_0028_0029-function-two_002dway-pipes-and"></a>
<p>It is possible to close just one end of the two-way pipe to
a coprocess, by supplying a second argument to the <code class="code">close()</code>
function of either <code class="code">&quot;to&quot;</code> or <code class="code">&quot;from&quot;</code>
(see <a class="pxref" href="#Close-Files-And-Pipes">Closing Input and Output Redirections</a>).
These strings tell <code class="command">gawk</code> to close the end of the pipe
that sends data to the coprocess or the end that reads from it,
respectively.
</p>
<a class="index-entry-id" id="index-sort-utility-coprocesses-and"></a>
<p>This is particularly necessary in order to use
the system <code class="command">sort</code> utility as part of a coprocess;
<code class="command">sort</code> must read <em class="emph">all</em> of its input
data before it can produce any output.
The <code class="command">sort</code> program does not receive an end-of-file indication
until <code class="command">gawk</code> closes the write end of the pipe.
</p>
<p>When you have finished writing data to the <code class="command">sort</code>
utility, you can close the <code class="code">&quot;to&quot;</code> end of the pipe, and
then start reading sorted data via <code class="code">getline</code>.
For example:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    command = &quot;LC_ALL=C sort&quot;
    n = split(&quot;abcdefghijklmnopqrstuvwxyz&quot;, a, &quot;&quot;)

    for (i = n; i &gt; 0; i--)
        print a[i] |&amp; command
    close(command, &quot;to&quot;)

    while ((command |&amp; getline line) &gt; 0)
        print &quot;got&quot;, line
    close(command)
}
</pre></div>

<p>This program writes the letters of the alphabet in reverse order, one
per line, down the two-way pipe to <code class="command">sort</code>.  It then closes the
write end of the pipe, so that <code class="command">sort</code> receives an end-of-file
indication.  This causes <code class="command">sort</code> to sort the data and write the
sorted data back to the <code class="command">gawk</code> program.  Once all of the data
has been read, <code class="command">gawk</code> terminates the coprocess and exits.
</p>
<a class="index-entry-id" id="index-ASCII-5"></a>
<p>As a side note, the assignment &lsquo;<samp class="samp">LC_ALL=C</samp>&rsquo; in the <code class="command">sort</code>
command ensures traditional Unix (ASCII) sorting from <code class="command">sort</code>.
This is not strictly necessary here, but it&rsquo;s good to know how to do this.
</p>
<p>Be careful when closing the <code class="code">&quot;from&quot;</code> end of a two-way pipe; in this
case <code class="command">gawk</code> waits for the child process to exit, which may cause
your program to hang.  (Thus, this particular feature is of much less
use in practice than being able to close the <code class="code">&quot;to&quot;</code> end.)
</p>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> Normally,
it is a fatal error to write to the <code class="code">&quot;to&quot;</code> end of a two-way
pipe which has been closed, and it is also a fatal error to read
from the <code class="code">&quot;from&quot;</code> end of a two-way pipe that has been closed.
</p>
<p>You may set <code class="code">PROCINFO[&quot;<var class="var">command</var>&quot;, &quot;NONFATAL&quot;]</code> to
make such operations become nonfatal. If you do so, you then need
to check <code class="code">ERRNO</code> after each <code class="code">print</code>, <code class="code">printf</code>,
or <code class="code">getline</code>.
See <a class="xref" href="#Nonfatal">Enabling Nonfatal Output</a>, for more information.
</p></blockquote>

<a class="index-entry-id" id="index-gawk-PROCINFO-array-in-3"></a>
<a class="index-entry-id" id="index-PROCINFO-array-communications-via-ptys-and"></a>
<p>You may also use pseudo-ttys (ptys) for
two-way communication instead of pipes, if your system supports them.
This is done on a per-command basis, by setting a special element
in the <code class="code">PROCINFO</code> array
(see <a class="pxref" href="#Auto_002dset">Built-in Variables That Convey Information</a>),
like so:
</p>
<div class="example">
<pre class="example-preformatted">command = &quot;sort -nr&quot;           # command, save in convenience variable
PROCINFO[command, &quot;pty&quot;] = 1   # update PROCINFO
print ... |&amp; command           # start two-way pipe
...
</pre></div>

<p>If your system does not have ptys, or if all the system&rsquo;s ptys are in use,
<code class="command">gawk</code> automatically falls back to using regular pipes.
</p>
<p>Using ptys usually avoids the buffer deadlock issues described earlier,
at some loss in performance. This is because the tty driver buffers
and sends data line-by-line.  On systems with the <code class="command">stdbuf</code>
(part of the <a class="uref" href="https://www.gnu.org/software/coreutils/coreutils.html">GNU Coreutils package</a>), you can use that program instead of ptys.
</p>
<p>Note also that ptys are not fully transparent. Certain binary control
codes, such <kbd class="kbd">Ctrl-d</kbd> for end-of-file, are interpreted by the tty
driver and not passed through.
</p>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> Finally, coprocesses open up the possibility of <em class="dfn">deadlock</em> between
<code class="command">gawk</code> and the program running in the coprocess. This can occur
if you send &ldquo;too much&rdquo; data to the coprocess before reading any back;
each process is blocked writing data with no one available to read what
they&rsquo;ve already written.  There is no workaround for deadlock; careful
programming and knowledge of the behavior of the coprocess are required.
</p></blockquote>

<p>The following example, due to Andrew Schorr, demonstrates how
using ptys can help deal with buffering deadlocks.
</p>
<p>Suppose <code class="command">gawk</code> were unable to add numbers.
You could use a coprocess to do it. Here&rsquo;s an exceedingly
simple program written for that purpose:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">cat add.c</kbd>
#include &lt;stdio.h&gt;

int
main(void)
{
    int x, y;
    while (scanf(&quot;%d %d&quot;, &amp; x, &amp; y) == 2)
        printf(&quot;%d\n&quot;, x + y);
    return 0;
}
$ <kbd class="kbd">cc -O add.c -o add</kbd>      <i class="i">Compile the program</i>
</pre></div>

<p>You could then write an exceedingly simple <code class="command">gawk</code> program
to add numbers by passing them to the coprocess:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo 1 2 |</kbd>
&gt; <kbd class="kbd">gawk -v cmd=./add '{ print |&amp; cmd; cmd |&amp; getline x; print x }'</kbd>
</pre></div>

<p>And it would deadlock, because <samp class="file">add.c</samp> fails to call
&lsquo;<samp class="samp">setlinebuf(stdout)</samp>&rsquo;. The <code class="command">add</code> program freezes.
</p>
<p>Now try instead:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo 1 2 |</kbd>
&gt; <kbd class="kbd">gawk -v cmd=add 'BEGIN { PROCINFO[cmd, &quot;pty&quot;] = 1 }</kbd>
&gt; <kbd class="kbd">                 { print |&amp; cmd; cmd |&amp; getline x; print x }'</kbd>
-| 3
</pre></div>

<p>By using a pty, <code class="command">gawk</code> fools the standard I/O library into
thinking it has an interactive session, so it defaults to line buffering.
And now, magically, it works!
</p>
<hr>
</div>
<div class="section-level-extent" id="TCP_002fIP-Networking">
<div class="nav-panel">
<p>
Next: <a href="#Profiling" accesskey="n" rel="next">Profiling Your <code class="command">awk</code> Programs</a>, Previous: <a href="#Two_002dway-I_002fO" accesskey="p" rel="prev">Two-Way Communications with Another Process</a>, Up: <a href="#Advanced-Features" accesskey="u" rel="up">Advanced Features of <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Using-gawk-for-Network-Programming"><span>12.5 Using <code class="command">gawk</code> for Network Programming<a class="copiable-link" href="#Using-gawk-for-Network-Programming"> &para;</a></span></h3>
<a class="index-entry-id" id="index-advanced-features-network-programming"></a>
<a class="index-entry-id" id="index-networks-programming"></a>
<a class="index-entry-id" id="index-TCP_002fIP"></a>
<a class="index-entry-id" id="index-_002finet_002f_2026-special-files-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-files-_002finet_002f_2026-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-_002finet4_002f_2026-special-files-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-files-_002finet4_002f_2026-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-_002finet6_002f_2026-special-files-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-files-_002finet6_002f_2026-_0028gawk_0029"></a>
<a class="index-entry-id" id="index-EMRED"></a>
<blockquote class="quotation">
<p><code class="code">EMRED</code>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i class="i">A host is a host from coast to coast,<br>
&nbsp;&nbsp;&nbsp;&nbsp;and nobody talks to a host that&rsquo;s close,<br>
&nbsp;&nbsp;&nbsp;&nbsp;unless the host that isn&rsquo;t close<br>
&nbsp;&nbsp;&nbsp;&nbsp;is busy, hung, or dead.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Mike O&rsquo;Brien (aka Mr. Protocol)</em>
</div>

<p>In addition to being able to open a two-way pipeline to a coprocess
on the same system
(see <a class="pxref" href="#Two_002dway-I_002fO">Two-Way Communications with Another Process</a>),
it is possible to make a two-way connection to
another process on another system across an IP network connection.
</p>
<p>You can think of this as just a <em class="emph">very long</em> two-way pipeline to
a coprocess.
The way <code class="command">gawk</code> decides that you want to use TCP/IP networking is
by recognizing special file names that begin with one of &lsquo;<samp class="samp">/inet/</samp>&rsquo;,
&lsquo;<samp class="samp">/inet4/</samp>&rsquo;, or &lsquo;<samp class="samp">/inet6/</samp>&rsquo;.
</p>
<p>The full syntax of the special file name is
<samp class="file">/<var class="var">net-type</var>/<var class="var">protocol</var>/<var class="var">local-port</var>/<var class="var">remote-host</var>/<var class="var">remote-port</var></samp>.
The components are:
</p>
<dl class="table">
<dt><var class="var">net-type</var></dt>
<dd><p>Specifies the kind of Internet connection to make.
Use &lsquo;<samp class="samp">/inet4/</samp>&rsquo; to force IPv4, and
&lsquo;<samp class="samp">/inet6/</samp>&rsquo; to force IPv6.
Plain &lsquo;<samp class="samp">/inet/</samp>&rsquo; (which used to be the only option) uses
the system default, most likely IPv4.
</p>
</dd>
<dt><var class="var">protocol</var></dt>
<dd><p>The protocol to use over IP.  This must be either &lsquo;<samp class="samp">tcp</samp>&rsquo;, or
&lsquo;<samp class="samp">udp</samp>&rsquo;, for a TCP or UDP IP connection,
respectively.  TCP should be used for most applications.
</p>
</dd>
<dt><a class="index-entry-id" id="index-C-library-functions-getaddrinfo_0028_0029"></a>
<a id="index-getaddrinfo_0028_0029-function-_0028C-library_0029"></a><span><var class="var">local-port</var><a class="copiable-link" href="#index-getaddrinfo_0028_0029-function-_0028C-library_0029"> &para;</a></span></dt>
<dd><p>The local TCP or UDP port number to use.  Use a port number of &lsquo;<samp class="samp">0</samp>&rsquo;
when you want the system to pick a port. This is what you should do
when writing a TCP or UDP client.
You may also use a well-known service name, such as &lsquo;<samp class="samp">smtp</samp>&rsquo;
or &lsquo;<samp class="samp">http</samp>&rsquo;, in which case <code class="command">gawk</code> attempts to determine
the predefined port number using the C <code class="code">getaddrinfo()</code> function.
</p>
</dd>
<dt><var class="var">remote-host</var></dt>
<dd><p>The IP address or fully qualified domain name of the Internet
host to which you want to connect.
</p>
</dd>
<dt><var class="var">remote-port</var></dt>
<dd><p>The TCP or UDP port number to use on the given <var class="var">remote-host</var>.
Again, use &lsquo;<samp class="samp">0</samp>&rsquo; if you don&rsquo;t care, or else a well-known
service name.
</p></dd>
</dl>

<a class="index-entry-id" id="index-gawk-ERRNO-variable-in-4"></a>
<a class="index-entry-id" id="index-ERRNO-variable-1"></a>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> Failure in opening a two-way socket will result in a nonfatal error
being returned to the calling code. The value of <code class="code">ERRNO</code> indicates
the error (see <a class="pxref" href="#Auto_002dset">Built-in Variables That Convey Information</a>).
</p></blockquote>

<p>Consider the following very simple example:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    Service = &quot;/inet/tcp/0/localhost/daytime&quot;
    Service |&amp; getline
    print $0
    close(Service)
}
</pre></div>

<p>This program reads the current date and time from the local system&rsquo;s
TCP <code class="code">daytime</code> server.
It then prints the results and closes the connection.
</p>
<p>Because this topic is extensive, the use of <code class="command">gawk</code> for
TCP/IP programming is documented separately.
See
<a class="uref" href="https://www.gnu.org/software/gawk/manual/gawkinet/"><cite class="cite">TCP/IP Internetworking with <code class="command">gawk</code></cite></a>,
which comes as part of the <code class="command">gawk</code> distribution,
for a much more complete introduction and discussion, as well as
extensive examples.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> <code class="command">gawk</code> can only open direct sockets. There is currently
no way to access services available over Secure Socket Layer
(SSL); this includes any web service whose URL starts with &lsquo;<samp class="samp">https://</samp>&rsquo;.
</p></blockquote>


<hr>
</div>
<div class="section-level-extent" id="Profiling">
<div class="nav-panel">
<p>
Next: <a href="#Persistent-Memory" accesskey="n" rel="next">Preserving Data Between Runs</a>, Previous: <a href="#TCP_002fIP-Networking" accesskey="p" rel="prev">Using <code class="command">gawk</code> for Network Programming</a>, Up: <a href="#Advanced-Features" accesskey="u" rel="up">Advanced Features of <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Profiling-Your-awk-Programs"><span>12.6 Profiling Your <code class="command">awk</code> Programs<a class="copiable-link" href="#Profiling-Your-awk-Programs"> &para;</a></span></h3>
<a class="index-entry-id" id="index-awk-programs-profiling"></a>
<a class="index-entry-id" id="index-profiling-awk-programs"></a>
<a class="index-entry-id" id="index-awkprof_002eout-file"></a>
<a class="index-entry-id" id="index-files-awkprof_002eout"></a>

<p>You may produce execution traces of your <code class="command">awk</code> programs.
This is done by passing the option <samp class="option">--profile</samp> to <code class="command">gawk</code>.
When <code class="command">gawk</code> has finished running, it creates a profile of your program in a file
named <samp class="file">awkprof.out</samp>. Because it is profiling, it also executes up to 45% slower than
<code class="command">gawk</code> normally does.
</p>
<a class="index-entry-id" id="index-_002d_002dprofile-option-1"></a>
<p>As shown in the following example,
the <samp class="option">--profile</samp> option can be used to change the name of the file
where <code class="command">gawk</code> will write the profile:
</p>
<div class="example">
<pre class="example-preformatted">gawk --profile=myprog.prof -f myprog.awk data1 data2
</pre></div>

<p>In the preceding example, <code class="command">gawk</code> places the profile in
<samp class="file">myprog.prof</samp> instead of in <samp class="file">awkprof.out</samp>.
</p>
<p>Here is a sample session showing a simple <code class="command">awk</code> program,
its input data, and the results from running <code class="command">gawk</code> with the
<samp class="option">--profile</samp> option.  First, the <code class="command">awk</code> program:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN { print &quot;First BEGIN rule&quot; }

END { print &quot;First END rule&quot; }

/foo/ {
    print &quot;matched /foo/, gosh&quot;
    for (i = 1; i &lt;= 3; i++)
        sing()
}

{
    if (/foo/)
        print &quot;if is true&quot;
    else
        print &quot;else is true&quot;
}

BEGIN { print &quot;Second BEGIN rule&quot; }

END { print &quot;Second END rule&quot; }

function sing(    dummy)
{
    print &quot;I gotta be me!&quot;
}
</pre></div>

<p>Following is the input data:
</p>
<div class="example">
<pre class="example-preformatted">foo
bar
baz
foo
junk
</pre></div>

<p>Here is the <samp class="file">awkprof.out</samp> that results from running the
<code class="command">gawk</code> profiler on this program and data (this example also
illustrates that <code class="command">awk</code> programmers sometimes get up very early
in the morning to work):
</p>
<a class="index-entry-id" id="index-BEGIN-pattern-profiling-and"></a>
<a class="index-entry-id" id="index-END-pattern-profiling-and"></a>
<div class="example">
<pre class="example-preformatted">    # gawk profile, created Mon Sep 29 05:16:21 2014

    # BEGIN rule(s)

    BEGIN {
 1          print &quot;First BEGIN rule&quot;
    }

    BEGIN {
 1          print &quot;Second BEGIN rule&quot;
    }

    # Rule(s)

 5  /foo/ { # 2
 2          print &quot;matched /foo/, gosh&quot;
 6          for (i = 1; i &lt;= 3; i++) {
 6                  sing()
            }
    }

 5  {
 5          if (/foo/) { # 2
 2                  print &quot;if is true&quot;
 3          } else {
 3                  print &quot;else is true&quot;
            }
    }

    # END rule(s)

    END {
 1          print &quot;First END rule&quot;
    }

    END {
 1          print &quot;Second END rule&quot;
    }


    # Functions, listed alphabetically

 6  function sing(dummy)
    {
 6          print &quot;I gotta be me!&quot;
    }
</pre></div>

<p>This example illustrates many of the basic features of profiling output.
They are as follows:
</p>
<ul class="itemize mark-bullet">
<li>The program is printed in the order <code class="code">BEGIN</code> rules,
<code class="code">BEGINFILE</code> rules,
pattern&ndash;action rules,
<code class="code">ENDFILE</code> rules, <code class="code">END</code> rules, and functions, listed
alphabetically.
Multiple <code class="code">BEGIN</code> and <code class="code">END</code> rules retain their
separate identities, as do
multiple <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> rules.

<a class="index-entry-id" id="index-patterns-counts_002c-in-a-profile"></a>
</li><li>Pattern&ndash;action rules have two counts.
The first count, to the left of the rule, shows how many times
the rule&rsquo;s pattern was <em class="emph">tested</em>.
The second count, to the right of the rule&rsquo;s opening left brace
in a comment,
shows how many times the rule&rsquo;s action was <em class="emph">executed</em>.
The difference between the two indicates how many times the rule&rsquo;s
pattern evaluated to false.

</li><li>Similarly,
the count for an <code class="code">if</code>-<code class="code">else</code> statement shows how many times
the condition was tested.
To the right of the opening left brace for the <code class="code">if</code>&rsquo;s body
is a count showing how many times the condition was true.
The count for the <code class="code">else</code>
indicates how many times the test failed.

<a class="index-entry-id" id="index-loops-count-for-header_002c-in-a-profile"></a>
</li><li>The count for a loop header (such as <code class="code">for</code>
or <code class="code">while</code>) shows how many times the loop test was executed.
(Because of this, you can&rsquo;t just look at the count on the first
statement in a rule to determine how many times the rule was executed.
If the first statement is a loop, the count is misleading.)

<a class="index-entry-id" id="index-functions-user_002ddefined-counts_002c-in-a-profile"></a>
<a class="index-entry-id" id="index-user_002ddefined-functions-counts_002c-in-a-profile"></a>
</li><li>For user-defined functions, the count next to the <code class="code">function</code>
keyword indicates how many times the function was called.
The counts next to the statements in the body show how many times
those statements were executed.

</li><li><a class="index-entry-id" id="index-_007b_007d-_0028braces_0029"></a>
<a class="index-entry-id" id="index-braces-_0028_007b_007d_0029"></a>
The layout uses &ldquo;K&amp;R&rdquo; style with TABs.
Braces are used everywhere, even when
the body of an <code class="code">if</code>, <code class="code">else</code>, or loop is only a single statement.

<a class="index-entry-id" id="index-_0028_0029-_0028parentheses_0029-in-a-profile"></a>
<a class="index-entry-id" id="index-parentheses-_0028_0029-in-a-profile"></a>
</li><li>Parentheses are used only where needed, as indicated by the structure
of the program and the precedence rules.
For example, &lsquo;<samp class="samp">(3 + 5) * 4</samp>&rsquo; means add three and five, then multiply
the total by four.  However, &lsquo;<samp class="samp">3 + 5 * 4</samp>&rsquo; has no parentheses, and
means &lsquo;<samp class="samp">3 + (5 * 4)</samp>&rsquo;.
However, explicit parentheses in the source program are retained.


</li><li>Parentheses are used around the arguments to <code class="code">print</code>
and <code class="code">printf</code> only when
the <code class="code">print</code> or <code class="code">printf</code> statement is followed by a redirection.
Similarly, if
the target of a redirection isn&rsquo;t a scalar, it gets parenthesized.

</li><li><code class="command">gawk</code> supplies leading comments in
front of the <code class="code">BEGIN</code> and <code class="code">END</code> rules,
the <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> rules,
the pattern&ndash;action rules, and the functions.

</li><li>Functions are listed alphabetically. All functions in the <code class="code">awk</code>
namespace are listed first, in alphabetical order.  Then come the
functions in namespaces.  The namespaces are listed in alphabetical order,
and the functions within each namespace are listed alphabetically.

</li></ul>

<p>The profiled version of your program may not look exactly like what you
typed when you wrote it.  This is because <code class="command">gawk</code> creates the
profiled version by &ldquo;pretty-printing&rdquo; its internal representation of
the program.  The advantage to this is that <code class="command">gawk</code> can produce
a standard representation.
Also, things such as:
</p>
<div class="example">
<pre class="example-preformatted">/foo/
</pre></div>

<p>come out as:
</p>
<div class="example">
<pre class="example-preformatted">/foo/   {
    print
}
</pre></div>

<p>which is correct, but possibly unexpected.
(If a program uses both &lsquo;<samp class="samp">print $0</samp>&rsquo; and plain
&lsquo;<samp class="samp">print</samp>&rsquo;, that distinction is retained.)
</p>
<a class="index-entry-id" id="index-profiling-awk-programs-dynamically"></a>
<a class="index-entry-id" id="index-gawk-dynamic-profiling"></a>
<a class="index-entry-id" id="index-gawk-profiling-programs"></a>
<a class="index-entry-id" id="index-dynamic-profiling"></a>
<p>Besides creating profiles when a program has completed,
<code class="command">gawk</code> can produce a profile while it is running.
This is useful if your <code class="command">awk</code> program goes into an
infinite loop and you want to see what has been executed.
To use this feature, run <code class="command">gawk</code> with the <samp class="option">--profile</samp>
option in the background:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk --profile -f myprog &amp;</kbd>
[1] 13992
</pre></div>

<a class="index-entry-id" id="index-kill-command_002c-dynamic-profiling"></a>
<a class="index-entry-id" id="index-USR1-signal_002c-for-dynamic-profiling"></a>
<a class="index-entry-id" id="index-SIGUSR1-signal_002c-for-dynamic-profiling"></a>
<a class="index-entry-id" id="index-signals-USR1_002fSIGUSR1_002c-for-profiling"></a>
<p>The shell prints a job number and process ID number; in this case, 13992.
Use the <code class="command">kill</code> command to send the <code class="code">USR1</code> signal
to <code class="command">gawk</code>:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">kill -USR1 13992</kbd>
</pre></div>

<p>As usual, the profiled version of the program is written to
<samp class="file">awkprof.out</samp>, or to a different file if one was specified with
the <samp class="option">--profile</samp> option.
</p>
<p>Along with the regular profile, as shown earlier, the profile file
includes a trace of any active functions:
</p>
<div class="example">
<pre class="example-preformatted"># Function Call Stack:

#   3. baz
#   2. bar
#   1. foo
# -- main --
</pre></div>

<p>You may send <code class="command">gawk</code> the <code class="code">USR1</code> signal as many times as you like.
Each time, the profile and function call trace are appended to the output
profile file.
</p>
<a class="index-entry-id" id="index-HUP-signal_002c-for-dynamic-profiling"></a>
<a class="index-entry-id" id="index-SIGHUP-signal_002c-for-dynamic-profiling"></a>
<a class="index-entry-id" id="index-signals-HUP_002fSIGHUP_002c-for-profiling"></a>
<p>If you use the <code class="code">HUP</code> signal instead of the <code class="code">USR1</code> signal,
<code class="command">gawk</code> produces the profile and the function call trace and then exits.
</p>
<a class="index-entry-id" id="index-INT-signal-_0028MS_002dWindows_0029"></a>
<a class="index-entry-id" id="index-SIGINT-signal-_0028MS_002dWindows_0029"></a>
<a class="index-entry-id" id="index-signals-INT_002fSIGINT-_0028MS_002dWindows_0029"></a>
<a class="index-entry-id" id="index-QUIT-signal-_0028MS_002dWindows_0029"></a>
<a class="index-entry-id" id="index-SIGQUIT-signal-_0028MS_002dWindows_0029"></a>
<a class="index-entry-id" id="index-signals-QUIT_002fSIGQUIT-_0028MS_002dWindows_0029"></a>
<p>When <code class="command">gawk</code> runs on MS-Windows systems, it uses the
<code class="code">INT</code> and <code class="code">QUIT</code> signals for producing the profile, and in
the case of the <code class="code">INT</code> signal, <code class="command">gawk</code> exits.  This is
because these systems don&rsquo;t support the <code class="command">kill</code> command, so the
only signals you can deliver to a program are those generated by the
keyboard.  The <code class="code">INT</code> signal is generated by the
<kbd class="kbd">Ctrl-c</kbd> or <kbd class="kbd">Ctrl-BREAK</kbd> key, while the
<code class="code">QUIT</code> signal is generated by the <kbd class="kbd">Ctrl-\</kbd> key.
</p>
<a class="index-entry-id" id="index-pretty-printing-1"></a>
<p>Finally, <code class="command">gawk</code> also accepts another option, <samp class="option">--pretty-print</samp>.
When called this way, <code class="command">gawk</code> &ldquo;pretty-prints&rdquo; the program into
<samp class="file">awkprof.out</samp>, without any execution counts.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> Once upon a time, the <samp class="option">--pretty-print</samp> option would also run
your program.  This is no longer the case.
</p></blockquote>

<a class="index-entry-id" id="index-profiling_002c-pretty-printing_002c-difference-with"></a>
<a class="index-entry-id" id="index-pretty-printing-profiling_002c-difference-with"></a>
<p>There is a significant difference between the output created when
profiling, and that created when pretty-printing.  Pretty-printed output
preserves the original comments that were in the program, although their
placement may not correspond exactly to their original locations in the
source code. However, no comments should be lost.
Also, <code class="command">gawk</code> does the best it can to preserve
the distinction between comments at the end of a statement and comments
on lines by themselves. This isn&rsquo;t always perfect, though.
</p>
<p>However, as a deliberate design decision, profiling output <em class="emph">omits</em>
the original program&rsquo;s comments. This allows you to focus on the
execution count data and helps you avoid the temptation to use the
profiler for pretty-printing.
</p>
<p>Additionally, pretty-printed output does not have the leading indentation
that the profiling output does. This makes it easy to pretty-print your
code once development is completed, and then use the result as the final
version of your program.
</p>
<p>Because the internal representation of your program is formatted to
recreate an <code class="command">awk</code> program, profiling and pretty-printing
automatically disable <code class="command">gawk</code>&rsquo;s default optimizations.
</p>
<p>Profiling and pretty-printing also preserve the original format of numeric
constants; if you used an octal or hexadecimal value in your source
code, it will appear that way in the output.
</p>
<hr>
</div>
<div class="section-level-extent" id="Persistent-Memory">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Philosophy" accesskey="n" rel="next">Builtin Features versus Extensions</a>, Previous: <a href="#Profiling" accesskey="p" rel="prev">Profiling Your <code class="command">awk</code> Programs</a>, Up: <a href="#Advanced-Features" accesskey="u" rel="up">Advanced Features of <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Preserving-Data-Between-Runs"><span>12.7 Preserving Data Between Runs<a class="copiable-link" href="#Preserving-Data-Between-Runs"> &para;</a></span></h3>

<a class="index-entry-id" id="index-persistent-memory"></a>
<a class="index-entry-id" id="index-PMA-memory-allocator-1"></a>
<p>Starting with version 5.2, <code class="command">gawk</code> supports
<em class="dfn">persistent memory</em>.  This experimental feature stores the values of
all of <code class="command">gawk</code>&rsquo;s variables, arrays and user-defined functions
in a persistent heap, which resides in a file in
the filesystem.  When persistent memory is not in use (the normal case),
<code class="command">gawk</code>&rsquo;s data resides in ephemeral system memory.
</p>
<p>Persistent memory is enabled on certain 64-bit systems supporting the <code class="code">mmap()</code>
and <code class="code">munmap()</code> system calls.  <code class="command">gawk</code> must be compiled as a
non-PIE (Position Independent Executable) binary, since the persistent
store ends up holding pointers to functions held within the <code class="command">gawk</code>
executable.  This also means that to use the persistent memory, you must
use the same <code class="command">gawk</code> executable from run to run.
</p>
<p>You can see if your version of <code class="command">gawk</code> supports persistent
memory like so:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk --version</kbd>
-| GNU Awk 5.2.2, API 3.2, PMA Avon 8-g1, (GNU MPFR 4.1.0, GNU MP 6.2.1)
-| Copyright (C) 1989, 1991-2023 Free Software Foundation.
...
</pre></div>

<p>If you see the &lsquo;<samp class="samp">PMA</samp>&rsquo; with a version indicator, then it&rsquo;s supported.
</p>
<a class="index-entry-id" id="index-REALLY_005fUSE_005fPERSIST_005fMALLOC-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-REALLY_005fUSE_005fPERSIST_005fMALLOC"></a>
<p>As of this writing, persistent memory has only been tested on GNU/Linux,
Cygwin, Solaris 2.11, Intel architecture macOS systems,
FreeBSD 13.1 and OpenBSD 7.1.
On all others, persistent memory is disabled by default. You can force
it to be enabled by exporting the shell variable
<code class="env">REALLY_USE_PERSIST_MALLOC</code> with a nonempty value before
running <code class="command">configure</code> (see <a class="pxref" href="#Quick-Installation">Compiling <code class="command">gawk</code> for Unix-Like Systems</a>).
If you do so and all the tests pass, please let the maintainer know.
</p>
<p>To use persistent memory, follow these steps:
</p>
<ol class="enumerate">
<li> Create a new, empty sparse file of the desired size. For example, four
gigabytes.  On a GNU/Linux system, you can use the <code class="command">truncate</code>
utility:

<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">truncate -s 4G data.pma</kbd>
</pre></div>

</li><li> It is recommended (but not required) to change the permissions on the
file so that only the owner can read and write it:

<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">chmod 0600 data.pma</kbd>
</pre></div>

<a class="index-entry-id" id="index-GAWK_005fPERSIST_005fFILE-environment-variable-1"></a>
<a class="index-entry-id" id="index-environment-variables-GAWK_005fPERSIST_005fFILE-1"></a>
</li><li> Provide the path to the data file in the <code class="env">GAWK_PERSIST_FILE</code>
environment variable.  This is best done by placing the value in the
environment just for the run of <code class="command">gawk</code>, like so:

<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">GAWK_PERSIST_FILE=data.pma gawk 'BEGIN { print ++i }'</kbd>
1
</pre></div>

</li><li> Use the same data file in subsequent runs to use the preserved data values:

<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">GAWK_PERSIST_FILE=data.pma gawk 'BEGIN { print ++i }'</kbd>
2
$ <kbd class="kbd">GAWK_PERSIST_FILE=data.pma gawk 'BEGIN { print ++i }'</kbd>
3
</pre></div>

<p>As shown, in subsequent runs using the same data file, the values of
<code class="command">gawk</code>&rsquo;s variables are preserved.  However, <code class="command">gawk</code>&rsquo;s
special variables, such as <code class="code">NR</code>, are reset upon each run.
Only the variables defined by the program are preserved across runs.
</p>
</li></ol>

<p>Interestingly, the program that you execute need not be the same from
run to run; the persistent store only maintains the values of variables,
arrays, and user-defined functions, not the totality of <code class="command">gawk</code>&rsquo;s
internal state.  This lets you share data between unrelated programs,
eliminating the need for scripts to communicate via text files.
</p>
<a class="index-entry-id" id="index-Kelly_002c-Terence"></a>
<p>Terence Kelly, the author of the persistent memory allocator
<code class="command">gawk</code> uses, provides the following advice about the backing file:
</p>
<blockquote class="quotation">
<p>Regarding backing file size, I recommend making it far larger
than all of the data that will ever reside in it, assuming
that the file system supports sparse files.  The &ldquo;pay only
for what you use&rdquo; aspect of sparse files ensures that the
actual storage resource footprint of the backing file will
meet the application&rsquo;s needs but will be as small as
possible.  If the file system does <em class="emph">not</em> support sparse
files, there&rsquo;s a dilemma:  Making the backing file too large
is wasteful, but making it too small risks memory exhaustion,
i.e., <code class="code">pma_malloc()</code> returns <code class="code">NULL</code>.
But persistent <code class="command">gawk</code> should
still work even without sparse files.
</p></blockquote>

<p>You can disable the use of the persistent memory allocator in
<code class="command">gawk</code> with the <samp class="option">--disable-pma</samp> option to the <code class="command">configure</code>
command at the time that you build <code class="command">gawk</code> (see <a class="pxref" href="#Unix-Installation">Compiling and Installing <code class="command">gawk</code> on Unix-Like Systems</a>).
</p>
<a class="index-entry-id" id="index-PMA_005fVERBOSITY-environment-variable-1"></a>
<a class="index-entry-id" id="index-environment-variables-PMA_005fVERBOSITY-1"></a>
<p>You can set the <code class="env">PMA_VERBOSITY</code> environment variable to a
value between zero and three to control how much debugging
and error information the persistent memory allocator will print.
<code class="command">gawk</code> sets the default to one. See the <samp class="file">support/pma.c</samp>
source code to understand what the different verbosity levels are.
</p>
<p>There are a few constraints on the use of persistent memory:
</p>
<ul class="itemize mark-bullet">
<li>If you use MPFR mode (the <samp class="option">-M</samp> option) on the first run
of a program using persistent memory, you <em class="emph">must</em> continue
to use it on all subsequent runs.  Similarly, if you don&rsquo;t use <samp class="option">-M</samp>
on the first run, do not use it on any subsequent runs.

<p>Mixing and matching MPFR mode and regular mode with the same backing
file is not allowed.  <code class="command">gawk</code> detects such a situation and issues
a fatal error message.
</p>
</li><li>The GNU/Linux CIFS filesystem is known to not
work well with the PMA allocator.
Don&rsquo;t use a backing file on a CIFS filesystem.

</li><li>If <code class="command">gawk</code> is run by the <code class="command">root</code> user, then
persistent memory is not allowed. This is to avoid the possibility
of private data &ldquo;leaking&rdquo; into the backing file and being
recovered later by an attacker.

</li><li>Over time, the backing file will be filled with memory &ldquo;leaked&rdquo;
by <code class="command">gawk</code> as it runs. Most notably this is the memory used
to compile your program into an internal form before running it,
which happens each time, but there are other leakages as well.
(For an extreme example of this, see
<a class="uref" href="https://lists.gnu.org/archive/html/bug-gawk/2023-04/msg00025.html">this thread</a> in the &ldquo;bug-gawk at gnu.org&rdquo;
mailing list archives.) It is up to you to use &lsquo;<samp class="samp">du -sh
<var class="var">pmafile</var></samp>&rsquo; occasionally to monitor how full the file is, and
arrange to dump any data you may need before the backing file becomes
full.
</li></ul>

<p>Terence Kelly has provided a separate <cite class="cite">Persistent-Memory <code class="command">gawk</code> User Manual</cite>
document, which is included in the <code class="command">gawk</code>
distribution.  It is worth reading.
</p>
<p>Here are additional articles and web links that provide more information about
persistent memory and why it&rsquo;s useful in a scripting language like
<code class="command">gawk</code>.
</p>
<a class="index-entry-id" id="index-Kelly_002c-Terence-1"></a>
<dl class="table">
<dt><a class="uref" href="https://web.eecs.umich.edu/~tpkelly/pma/">https://web.eecs.umich.edu/~tpkelly/pma/</a></dt>
<dd><p>This is the canonical source for Terence Kelly&rsquo;s Persistent Memory
Allocator (PMA).  The latest source code and user manual
will always be available at this location.
Kelly may be reached directly at any of the following
email addresses:
&ldquo;tpkelly AT acm.org&rdquo;,
&ldquo;tpkelly AT cs.princeton.edu&rdquo;, or
&ldquo;tpkelly AT eecs.umich.edu&rdquo;.
</p>
</dd>
<dt><cite class="cite">Persistent Memory Allocation</cite></dt>
<dd><p>Terence Kelly, Zi Fan Tan, Jianan Li, and Haris Volos,
ACM <cite class="cite">Queue</cite> magazine, Vol. 20 No. 2 (March/April 2022),
<a class="uref" href="https://dl.acm.org/doi/pdf/10.1145/3534855">PDF</a>,
<a class="uref" href="https://queue.acm.org/detail.cfm?id=3534855">HTML</a>.
This paper explains the design of the PMA
allocator used in persistent <code class="command">gawk</code>.
</p>
</dd>
<dt><cite class="cite">Persistent Scripting</cite></dt>
<dd><p>Zi Fan Tan, Jianan Li, Haris Volos, and Terence Kelly,
Non-Volatile Memory Workshop (NVMW) 2022,
<a class="uref" href="http://nvmw.ucsd.edu/program/">http://nvmw.ucsd.edu/program/</a>.
This paper motivates and describes a research prototype of persistent
<code class="command">gawk</code> and presents performance evaluations on Intel Optane
non-volatile memory; note that the interface differs slightly.
</p>
</dd>
<dt><cite class="cite">Persistent Memory Programming on Conventional Hardware</cite></dt>
<dd><p>Terence Kelly,
ACM <cite class="cite">Queue</cite> magazine Vol. 17 No. 4 (July/Aug 2019),
<a class="uref" href="https://dl.acm.org/doi/pdf/10.1145/3358955.3358957">PDF</a>,
<a class="uref" href="https://queue.acm.org/detail.cfm?id=3358957">HTML</a>.
This paper describes simple techniques for persistent memory for C/C++
code on conventional computers that lack non-volatile memory hardware.
</p>
</dd>
<dt><cite class="cite">Is Persistent Memory Persistent?</cite></dt>
<dd><p>Terence Kelly,
ACM <cite class="cite">Queue</cite> magazine Vol. 18 No. 2 (March/April 2020),
<a class="uref" href="https://dl.acm.org/doi/pdf/10.1145/3400899.3400902">PDF</a>,
<a class="uref" href="https://queue.acm.org/detail.cfm?id=3400902">HTML</a>.
This paper describes a simple and robust testbed for testing software
against real power failures.
</p>
</dd>
<dt><cite class="cite">Crashproofing the Original NoSQL Key/Value Store</cite></dt>
<dd><p>Terence Kelly,
ACM <cite class="cite">Queue</cite> magazine Vol. 19 No. 4 (July/Aug 2021),
<a class="uref" href="https://dl.acm.org/doi/pdf/10.1145/3487019.3487353">PDF</a>,
<a class="uref" href="https://queue.acm.org/detail.cfm?id=3487353">HTML</a>.
This paper describes a crash-tolerance feature added to GNU DBM&rsquo;
(<code class="code">gdbm</code>).
</p></dd>
</dl>

<p>When Terence Kelly published his papers, his collaborators produced
a prototype integration of PMA with <code class="command">gawk</code>.  That version used
a (mandatory!) option <samp class="option">--persist=<var class="var">file</var></samp> to specify the file
for storing the persistent heap. If this option is given to <code class="command">gawk</code>,
it produces a fatal error message instructing the user to use the
<code class="env">GAWK_PERSIST_FILE</code> environment variable instead. Except for this
paragraph, that option is otherwise undocumented.
</p>
<p>The prototype only supported persistent data; it did not
support persistent functions.
</p>
<p>As noted earlier, support for persistent memory is <em class="emph">experimental</em>.
If it becomes burdensome,<a class="footnote" id="DOCF89" href="#FOOT89"><sup>89</sup></a> then the feature will be removed.
</p>
<hr>
</div>
<div class="section-level-extent" id="Extension-Philosophy">
<div class="nav-panel">
<p>
Next: <a href="#Advanced-Features-Summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Persistent-Memory" accesskey="p" rel="prev">Preserving Data Between Runs</a>, Up: <a href="#Advanced-Features" accesskey="u" rel="up">Advanced Features of <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Builtin-Features-versus-Extensions"><span>12.8 Builtin Features versus Extensions<a class="copiable-link" href="#Builtin-Features-versus-Extensions"> &para;</a></span></h3>

<p>As this and subsequent chapters show, <code class="command">gawk</code> has a
large number of extensions over standard <code class="command">awk</code> built-in to
the program.  These have developed over time.  More recently, the
focus has moved to using the extension mechanism (see <a class="pxref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>)
for adding features.  This section discusses the &ldquo;guiding philosophy&rdquo;
behind what should be added to the interpreter as a built-in
feature versus what should be done in extensions.
</p>
<p>There are several goals:
</p>
<ol class="enumerate">
<li> Keep the language <code class="command">awk</code>; it should not become unrecognizable, even
if programs in it will only run on <code class="command">gawk</code>.

</li><li> Keep the core from getting any larger unless absolutely necessary.

</li><li> Add new functionality either in <code class="command">awk</code> scripts (<samp class="option">-f</samp>,
<code class="code">@include</code>) or in loadable extensions written in C or C++
(<samp class="option">-l</samp>, <code class="code">@load</code>).

</li><li> Extend the core interpreter only if some feature is:

<ol class="enumerate" type="A" start="1">
<li> Truly desirable.
</li><li> Cannot be done via library files or loadable extensions.
</li><li> Can be implemented without too much pain in the core.
</li></ol>
</li></ol>
<p>Combining modules with <code class="command">awk</code> files is a powerful technique.
Some of the sample extensions demonstrate this.
</p>
<p>Loading extensions and library files should not be done automatically,
because then there&rsquo;s overhead that most users don&rsquo;t want or need.
</p>
<hr>
</div>
<div class="section-level-extent" id="Advanced-Features-Summary">
<div class="nav-panel">
<p>
Previous: <a href="#Extension-Philosophy" accesskey="p" rel="prev">Builtin Features versus Extensions</a>, Up: <a href="#Advanced-Features" accesskey="u" rel="up">Advanced Features of <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary-11"><span>12.9 Summary<a class="copiable-link" href="#Summary-11"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>The <samp class="option">--non-decimal-data</samp> option causes <code class="command">gawk</code> to treat
octal- and hexadecimal-looking input data as octal and hexadecimal.
This option should be used with caution or not at all; use of <code class="code">strtonum()</code>
is preferable.
Note that this option may disappear in a future version of <code class="command">gawk</code>.

</li><li>You can take over complete control of sorting in &lsquo;<samp class="samp">for (<var class="var">indx</var> in <var class="var">array</var>)</samp>&rsquo;
array traversal by setting <code class="code">PROCINFO[&quot;sorted_in&quot;]</code> to the name of a user-defined
function that does the comparison of array elements based on index and value.

</li><li>Similarly, you can supply the name of a user-defined comparison function as the
third argument to either <code class="code">asort()</code> or <code class="command">asorti()</code> to control how
those functions sort arrays. Or you may provide one of the predefined control
strings that work for <code class="code">PROCINFO[&quot;sorted_in&quot;]</code>.

</li><li>You can use the &lsquo;<samp class="samp">|&amp;</samp>&rsquo; operator to create a two-way pipe to a coprocess.
You read from the coprocess with <code class="code">getline</code> and write to it with <code class="code">print</code>
or <code class="code">printf</code>. Use <code class="code">close()</code> to close off the coprocess completely, or
optionally, close off one side of the two-way communications.

</li><li>By using special file names with the &lsquo;<samp class="samp">|&amp;</samp>&rsquo; operator, you can open a
TCP/IP (or UDP/IP) connection to remote hosts on the Internet. <code class="command">gawk</code>
supports both IPv4 and IPv6.

</li><li>You can generate statement count profiles of your program. This can help you
determine which parts of your program may be taking the most time and let
you tune them more easily.  Sending the <code class="code">USR1</code> signal while profiling causes
<code class="command">gawk</code> to dump the profile and keep going, including a function call stack.

</li><li>You can also just &ldquo;pretty-print&rdquo; the program.

</li><li>Persistent memory allows you to preserve the values of variables and arrays
between runs of <code class="command">gawk</code>.  This feature is currently experimental.

</li><li>New features should be developed using the extension mechanism if possible;
they should be added to the core interpreter only as a last resort.
</li></ul>


<hr>
</div>
</div>
<div class="chapter-level-extent" id="Internationalization">
<div class="nav-panel">
<p>
Next: <a href="#Debugger" accesskey="n" rel="next">Debugging <code class="command">awk</code> Programs</a>, Previous: <a href="#Advanced-Features" accesskey="p" rel="prev">Advanced Features of <code class="command">gawk</code></a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Internationalization-with-gawk"><span>13 Internationalization with <code class="command">gawk</code><a class="copiable-link" href="#Internationalization-with-gawk"> &para;</a></span></h2>

<a class="index-entry-id" id="index-Robbins-Malka"></a>
<a class="index-entry-id" id="index-Moon_002c-Sailor"></a>
<blockquote class="quotation">
<p><i class="i">Moon&hellip; Gorgeous&hellip; MEDITATION!</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Pretty Guardian Sailor Moon Eternal, The Movie</em>
</div>
<blockquote class="quotation">
<p><i class="i">It probably sounded better in Japanese.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Malka Robbins</em>
</div>
<p>Once upon a time, computer makers
wrote software that worked only in English.
Eventually, hardware and software vendors noticed that if their
systems worked in the native languages of non-English-speaking
countries, they were able to sell more systems.
As a result, internationalization and localization
of programs and software systems became a common practice.
</p>
<a class="index-entry-id" id="index-internationalization-localization-1"></a>
<a class="index-entry-id" id="index-gawk-internationalization"></a>
<a class="index-entry-id" id="index-internationalization-localization-gawk-and"></a>
<p>For many years, the ability to provide internationalization
was largely restricted to programs written in C and C++.
This chapter describes the underlying library <code class="command">gawk</code>
uses for internationalization, as well as how
<code class="command">gawk</code> makes internationalization
features available at the <code class="command">awk</code> program level.
Having internationalization available at the <code class="command">awk</code> level
gives software developers additional flexibility&mdash;they are no
longer forced to write in C or C++ when internationalization is
a requirement.
</p>

<ul class="mini-toc">
<li><a href="#I18N-and-L10N" accesskey="1">Internationalization and Localization</a></li>
<li><a href="#Explaining-gettext" accesskey="2">GNU <code class="command">gettext</code></a></li>
<li><a href="#Programmer-i18n" accesskey="3">Internationalizing <code class="command">awk</code> Programs</a></li>
<li><a href="#Translator-i18n" accesskey="4">Translating <code class="command">awk</code> Programs</a></li>
<li><a href="#I18N-Example" accesskey="5">A Simple Internationalization Example</a></li>
<li><a href="#Gawk-I18N" accesskey="6"><code class="command">gawk</code> Can Speak Your Language</a></li>
<li><a href="#I18N-Summary" accesskey="7">Summary</a></li>
</ul>
<hr>
<div class="section-level-extent" id="I18N-and-L10N">
<div class="nav-panel">
<p>
Next: <a href="#Explaining-gettext" accesskey="n" rel="next">GNU <code class="command">gettext</code></a>, Up: <a href="#Internationalization" accesskey="u" rel="up">Internationalization with <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Internationalization-and-Localization"><span>13.1 Internationalization and Localization<a class="copiable-link" href="#Internationalization-and-Localization"> &para;</a></span></h3>

<a class="index-entry-id" id="index-internationalization-1"></a>
<a class="index-entry-id" id="index-internationalization-localization-2"></a>
<p><em class="dfn">Internationalization</em> means writing (or modifying) a program once,
in such a way that it can use multiple languages without requiring
further source code changes.
<em class="dfn">Localization</em> means providing the data necessary for an
internationalized program to work in a particular language.
Most typically, these terms refer to features such as the language
used for printing error messages, the language used to read
responses, and information related to how numerical and
monetary values are printed and read.
</p>
<hr>
</div>
<div class="section-level-extent" id="Explaining-gettext">
<div class="nav-panel">
<p>
Next: <a href="#Programmer-i18n" accesskey="n" rel="next">Internationalizing <code class="command">awk</code> Programs</a>, Previous: <a href="#I18N-and-L10N" accesskey="p" rel="prev">Internationalization and Localization</a>, Up: <a href="#Internationalization" accesskey="u" rel="up">Internationalization with <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="GNU-gettext"><span>13.2 GNU <code class="command">gettext</code><a class="copiable-link" href="#GNU-gettext"> &para;</a></span></h3>

<a class="index-entry-id" id="index-internationalizing-a-program"></a>
<a class="index-entry-id" id="index-gettext-library"></a>
<p><code class="command">gawk</code> uses GNU <code class="command">gettext</code> to provide its internationalization
features.
The facilities in GNU <code class="command">gettext</code> focus on messages: strings printed
by a program, either directly or via formatting with <code class="code">printf</code> or
<code class="code">sprintf()</code>.<a class="footnote" id="DOCF90" href="#FOOT90"><sup>90</sup></a>
</p>
<a class="index-entry-id" id="index-portability-gettext-library-and"></a>
<p>When using GNU <code class="command">gettext</code>, each application has its own
<em class="dfn">text domain</em>.  This is a unique name, such as &lsquo;<samp class="samp">kpilot</samp>&rsquo; or &lsquo;<samp class="samp">gawk</samp>&rsquo;,
that identifies the application.
A complete application may have multiple components&mdash;programs written
in C or C++, as well as scripts written in <code class="command">sh</code> or <code class="command">awk</code>.
All of the components use the same text domain.
</p>
<p>To make the discussion concrete, assume we&rsquo;re writing an application
named <code class="command">guide</code>.  Internationalization consists of the
following steps, in this order:
</p>
<ol class="enumerate">
<li> The programmer reviews the source for all of <code class="command">guide</code>&rsquo;s components
and marks each string that is a candidate for translation.
For example, <code class="code">&quot;`-F': option required&quot;</code> is a good candidate for translation.
A table with strings of option names is not (e.g., <code class="command">gawk</code>&rsquo;s
<samp class="option">--profile</samp> option should remain the same, no matter what the local
language).

<a class="index-entry-id" id="index-textdomain_0028_0029-function-_0028C-library_0029"></a>
<a class="index-entry-id" id="index-C-library-functions-textdomain_0028_0029"></a>
</li><li> The programmer indicates the application&rsquo;s text domain
(<code class="command">&quot;guide&quot;</code>) to the <code class="command">gettext</code> library,
by calling the <code class="code">textdomain()</code> function.

<a class="index-entry-id" id="index-_002epot-files"></a>
<a class="index-entry-id" id="index-files-_002epot"></a>
<a class="index-entry-id" id="index-portable-object-template-files"></a>
<a class="index-entry-id" id="index-files-portable-object-template-file-_0028_002epot_0029"></a>
</li><li> Messages from the application are extracted from the source code and
collected into a portable object template file (<samp class="file">guide.pot</samp>),
which lists the strings and their translations.
The translations are initially empty.
The original (usually English) messages serve as the key for
lookup of the translations.

<a class="index-entry-id" id="index-_002epo-files"></a>
<a class="index-entry-id" id="index-files-_002epo"></a>
<a class="index-entry-id" id="index-portable-object-files"></a>
<a class="index-entry-id" id="index-files-portable-object"></a>
</li><li> For each language with a translator, <samp class="file">guide.pot</samp>
is copied to a portable object file (<code class="code">.po</code>)
and translations are created and shipped with the application.
For example, there might be a <samp class="file">fr.po</samp> for a French translation.

<a class="index-entry-id" id="index-_002egmo-files"></a>
<a class="index-entry-id" id="index-files-_002egmo"></a>
<a class="index-entry-id" id="index-message-object-files"></a>
<a class="index-entry-id" id="index-files-message-object"></a>
</li><li> Each language&rsquo;s <samp class="file">.po</samp> file is converted into a binary
message object (<samp class="file">.gmo</samp>) file.
A message object file contains the original messages and their
translations in a binary format that allows fast lookup of translations
at runtime.

</li><li> When <code class="command">guide</code> is built and installed, the binary translation files
are installed in a standard place.

<a class="index-entry-id" id="index-bindtextdomain_0028_0029-function-_0028C-library_0029"></a>
<a class="index-entry-id" id="index-C-library-functions-bindtextdomain_0028_0029"></a>
</li><li> For testing and development, it is possible to tell <code class="command">gettext</code>
to use <samp class="file">.gmo</samp> files in a different directory than the standard
one by using the <code class="code">bindtextdomain()</code> function.

<a class="index-entry-id" id="index-_002egmo-files-specifying-directory-of"></a>
<a class="index-entry-id" id="index-files-_002egmo-specifying-directory-of"></a>
<a class="index-entry-id" id="index-message-object-files-specifying-directory-of"></a>
<a class="index-entry-id" id="index-files-message-object-specifying-directory-of"></a>
</li><li> At runtime, <code class="command">guide</code> looks up each string via a call
to <code class="code">gettext()</code>.  The returned string is the translated string
if available, or the original string if not.

</li><li> If necessary, it is possible to access messages from a different
text domain than the one belonging to the application, without
having to switch the application&rsquo;s default text domain back
and forth.
</li></ol>

<a class="index-entry-id" id="index-gettext_0028_0029-function-_0028C-library_0029"></a>
<a class="index-entry-id" id="index-C-library-functions-gettext_0028_0029"></a>
<p>In C (or C++), the string marking and dynamic translation lookup
are accomplished by wrapping each string in a call to <code class="code">gettext()</code>:
</p>
<div class="example">
<pre class="example-preformatted">printf(&quot;%s&quot;, gettext(&quot;Don't Panic!\n&quot;));
</pre></div>

<p>The tools that extract messages from source code pull out all
strings enclosed in calls to <code class="code">gettext()</code>.
</p>
<a class="index-entry-id" id="index-_005f-_0028underscore_0029-C-macro"></a>
<a class="index-entry-id" id="index-underscore-_0028_005f_0029-C-macro"></a>
<p>The GNU <code class="command">gettext</code> developers, recognizing that typing
&lsquo;<samp class="samp">gettext(&hellip;)</samp>&rsquo; over and over again is both painful and ugly to look
at, use the macro &lsquo;<samp class="samp">_</samp>&rsquo; (an underscore) to make things easier:
</p>
<div class="example">
<pre class="example-preformatted">/* In the standard header file: */
#define _(str) gettext(str)

/* In the program text: */
printf(&quot;%s&quot;, _(&quot;Don't Panic!\n&quot;));
</pre></div>

<a class="index-entry-id" id="index-internationalization-localization-locale-categories"></a>
<a class="index-entry-id" id="index-gettext-library-locale-categories"></a>
<a class="index-entry-id" id="index-locale-categories"></a>
<p>This reduces the typing overhead to just three extra characters per string
and is considerably easier to read as well.
</p>
<p>There are locale <em class="dfn">categories</em>
for different types of locale-related information.
The defined locale categories that <code class="command">gettext</code> knows about are:
</p>
<dl class="table">
<dt><a id="index-LC_005fMESSAGES-locale-category"></a><span><code class="code">LC_MESSAGES</code><a class="copiable-link" href="#index-LC_005fMESSAGES-locale-category"> &para;</a></span></dt>
<dd><p>Text messages.  This is the default category for <code class="command">gettext</code>
operations, but it is possible to supply a different one explicitly,
if necessary.  (It is almost never necessary to supply a different category.)
</p>
</dd>
<dt><a class="index-entry-id" id="index-LC_005fCOLLATE-locale-category"></a>
<a id="index-sorting-characters-in-different-languages"></a><span><code class="code">LC_COLLATE</code><a class="copiable-link" href="#index-sorting-characters-in-different-languages"> &para;</a></span></dt>
<dd><p>Text-collation information (i.e., how different characters
and/or groups of characters sort in a given language).
</p>
</dd>
<dt><a id="index-LC_005fCTYPE-locale-category"></a><span><code class="code">LC_CTYPE</code><a class="copiable-link" href="#index-LC_005fCTYPE-locale-category"> &para;</a></span></dt>
<dd><p>Character-type information (alphabetic, digit, upper- or lowercase, and
so on) as well as character encoding.
This information is accessed via the
POSIX character classes in regular expressions,
such as <code class="code">/[[:alnum:]]/</code>
(see <a class="pxref" href="#Bracket-Expressions">Using Bracket Expressions</a>).
</p>
<a class="index-entry-id" id="index-monetary-information_002c-localization"></a>
<a class="index-entry-id" id="index-currency-symbols_002c-localization"></a>
<a class="index-entry-id" id="index-internationalization-localization-monetary-information"></a>
<a class="index-entry-id" id="index-internationalization-localization-currency-symbols"></a>
</dd>
<dt><a id="index-LC_005fMONETARY-locale-category"></a><span><code class="code">LC_MONETARY</code><a class="copiable-link" href="#index-LC_005fMONETARY-locale-category"> &para;</a></span></dt>
<dd><p>Monetary information, such as the currency symbol, and whether the
symbol goes before or after a number.
</p>
</dd>
<dt><a id="index-LC_005fNUMERIC-locale-category"></a><span><code class="code">LC_NUMERIC</code><a class="copiable-link" href="#index-LC_005fNUMERIC-locale-category"> &para;</a></span></dt>
<dd><p>Numeric information, such as which characters to use for the decimal
point and the thousands separator.<a class="footnote" id="DOCF91" href="#FOOT91"><sup>91</sup></a>
</p>
<a class="index-entry-id" id="index-time-localization-and"></a>
<a class="index-entry-id" id="index-dates-information-related-to_002c-localization"></a>
</dd>
<dt><a id="index-LC_005fTIME-locale-category"></a><span><code class="code">LC_TIME</code><a class="copiable-link" href="#index-LC_005fTIME-locale-category"> &para;</a></span></dt>
<dd><p>Time- and date-related information, such as 12- or 24-hour clock, month printed
before or after the day in a date, local month abbreviations, and so on.
</p>
</dd>
<dt><a id="index-LC_005fALL-locale-category"></a><span><code class="code">LC_ALL</code><a class="copiable-link" href="#index-LC_005fALL-locale-category"> &para;</a></span></dt>
<dd><p>All of the above.  (Not too useful in the context of <code class="command">gettext</code>.)
</p></dd>
</dl>

<blockquote class="quotation">
<a class="index-entry-id" id="index-LANGUAGE-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-LANGUAGE"></a>
<p><b class="b">NOTE:</b> As described in <a class="ref" href="#Locales">Where You Are Makes a Difference</a>, environment variables with the same
name as the locale categories (<code class="env">LC_CTYPE</code>, <code class="env">LC_ALL</code>, etc.)
influence <code class="command">gawk</code>&rsquo;s behavior (and that of other utilities).
</p>
<p>Normally, these variables also affect how the <code class="code">gettext</code> library
finds translations.  However, the <code class="env">LANGUAGE</code> environment variable
overrides the <code class="env">LC_<var class="var">xxx</var></code> variables. Many GNU/Linux systems
may define this variable without your knowledge, causing <code class="command">gawk</code>
to not find the correct translations.  If this happens to you,
look to see if <code class="env">LANGUAGE</code> is defined, and if so, use the shell&rsquo;s
<code class="command">unset</code> command to remove it.
</p></blockquote>

<a class="index-entry-id" id="index-GAWK_005fLOCALE_005fDIR-environment-variable-1"></a>
<a class="index-entry-id" id="index-environment-variables-GAWK_005fLOCALE_005fDIR-1"></a>
<p>For testing translations of <code class="command">gawk</code> itself, you can set
the <code class="env">GAWK_LOCALE_DIR</code> environment variable. See the documentation
for the C <code class="code">bindtextdomain()</code> function and also see
<a class="ref" href="#Other-Environment-Variables">Other Environment Variables</a>.
</p>
<hr>
</div>
<div class="section-level-extent" id="Programmer-i18n">
<div class="nav-panel">
<p>
Next: <a href="#Translator-i18n" accesskey="n" rel="next">Translating <code class="command">awk</code> Programs</a>, Previous: <a href="#Explaining-gettext" accesskey="p" rel="prev">GNU <code class="command">gettext</code></a>, Up: <a href="#Internationalization" accesskey="u" rel="up">Internationalization with <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Internationalizing-awk-Programs"><span>13.3 Internationalizing <code class="command">awk</code> Programs<a class="copiable-link" href="#Internationalizing-awk-Programs"> &para;</a></span></h3>
<a class="index-entry-id" id="index-awk-programs-internationalizing-1"></a>

<p><code class="command">gawk</code> provides the following variables for
internationalization:
</p>
<dl class="table">
<dt><a id="index-TEXTDOMAIN-variable-1"></a><span><code class="code">TEXTDOMAIN</code><a class="copiable-link" href="#index-TEXTDOMAIN-variable-1"> &para;</a></span></dt>
<dd><p>This variable indicates the application&rsquo;s text domain.
For compatibility with GNU <code class="command">gettext</code>, the default
value is <code class="code">&quot;messages&quot;</code>.
</p>
<a class="index-entry-id" id="index-internationalization-localization-marked-strings"></a>
<a class="index-entry-id" id="index-strings-for-localization"></a>
</dd>
<dt><code class="code">_&quot;your message here&quot;</code></dt>
<dd><p>String constants marked with a leading underscore
are candidates for translation at runtime.
String constants without a leading underscore are not translated.
</p></dd>
</dl>

<p><code class="command">gawk</code> provides the following functions for
internationalization:
</p>
<dl class="table">
<dt><a id="index-dcgettext_0028_0029-function-_0028gawk_0029-1"></a><span><code class="code"><code class="code">dcgettext(<var class="var">string</var></code> [<code class="code">,</code> <var class="var">domain</var> [<code class="code">,</code> <var class="var">category</var>]]<code class="code">)</code></code><a class="copiable-link" href="#index-dcgettext_0028_0029-function-_0028gawk_0029-1"> &para;</a></span></dt>
<dd><p>Return the translation of <var class="var">string</var> in
text domain <var class="var">domain</var> for locale category <var class="var">category</var>.
The default value for <var class="var">domain</var> is the current value of <code class="code">TEXTDOMAIN</code>.
The default value for <var class="var">category</var> is <code class="code">&quot;LC_MESSAGES&quot;</code>.
</p>
<p>If you supply a value for <var class="var">category</var>, it must be a string equal to
one of the known locale categories described in
the previous section.
You must also supply a text domain.  Use <code class="code">TEXTDOMAIN</code> if
you want to use the current domain.
</p>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> The order of arguments to the <code class="command">awk</code> version
of the <code class="code">dcgettext()</code> function is purposely different from the order for
the C version.  The <code class="command">awk</code> version&rsquo;s order was
chosen to be simple and to allow for reasonable <code class="command">awk</code>-style
default arguments.
</p></blockquote>

</dd>
<dt><a id="index-dcngettext_0028_0029-function-_0028gawk_0029-1"></a><span><code class="code"><code class="code">dcngettext(<var class="var">string1</var>, <var class="var">string2</var>, <var class="var">number</var></code> [<code class="code">,</code> <var class="var">domain</var> [<code class="code">,</code> <var class="var">category</var>]]<code class="code">)</code></code><a class="copiable-link" href="#index-dcngettext_0028_0029-function-_0028gawk_0029-1"> &para;</a></span></dt>
<dd><p>Return the plural form used for <var class="var">number</var> of the
translation of <var class="var">string1</var> and <var class="var">string2</var> in text domain
<var class="var">domain</var> for locale category <var class="var">category</var>. <var class="var">string1</var> is the
English singular variant of a message, and <var class="var">string2</var> is the English plural
variant of the same message.
The default value for <var class="var">domain</var> is the current value of <code class="code">TEXTDOMAIN</code>.
The default value for <var class="var">category</var> is <code class="code">&quot;LC_MESSAGES&quot;</code>.
</p>
<p>The same remarks about argument order as for the <code class="code">dcgettext()</code> function apply.
</p>
<a class="index-entry-id" id="index-_002egmo-files-specifying-directory-of-1"></a>
<a class="index-entry-id" id="index-files-_002egmo-specifying-directory-of-1"></a>
<a class="index-entry-id" id="index-message-object-files-specifying-directory-of-1"></a>
<a class="index-entry-id" id="index-files-message-object-specifying-directory-of-1"></a>
</dd>
<dt><a id="index-bindtextdomain_0028_0029-function-_0028gawk_0029-1"></a><span><code class="code"><code class="code">bindtextdomain(<var class="var">directory</var></code> [<code class="code">,</code> <var class="var">domain</var> ]<code class="code">)</code></code><a class="copiable-link" href="#index-bindtextdomain_0028_0029-function-_0028gawk_0029-1"> &para;</a></span></dt>
<dd><p>Change the directory in which
<code class="command">gettext</code> looks for <samp class="file">.gmo</samp> files, in case they
will not or cannot be placed in the standard locations
(e.g., during testing).
Return the directory in which <var class="var">domain</var> is &ldquo;bound.&rdquo;
</p>
<p>The default <var class="var">domain</var> is the value of <code class="code">TEXTDOMAIN</code>.
If <var class="var">directory</var> is the null string (<code class="code">&quot;&quot;</code>), then
<code class="code">bindtextdomain()</code> returns the current binding for the
given <var class="var">domain</var>.
</p></dd>
</dl>

<p>To use these facilities in your <code class="command">awk</code> program, follow these steps:
</p>
<ol class="enumerate">
<li><a class="index-entry-id" id="index-BEGIN-pattern-TEXTDOMAIN-variable-and"></a>
<a class="index-entry-id" id="index-TEXTDOMAIN-variable-BEGIN-pattern-and"></a>
</li><li> Set the variable <code class="code">TEXTDOMAIN</code> to the text domain of
your program.  This is best done in a <code class="code">BEGIN</code> rule
(see <a class="pxref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>),
or it can also be done via the <samp class="option">-v</samp> command-line
option (see <a class="pxref" href="#Options">Command-Line Options</a>):

<div class="example">
<pre class="example-preformatted">BEGIN {
    TEXTDOMAIN = &quot;guide&quot;
    ...
}
</pre></div>

<a class="index-entry-id" id="index-_005f-_0028underscore_0029-translatable-strings"></a>
<a class="index-entry-id" id="index-underscore-_0028_005f_0029-translatable-strings"></a>
</li><li> Mark all translatable strings with a leading underscore (&lsquo;<samp class="samp">_</samp>&rsquo;)
character.  It <em class="emph">must</em> be adjacent to the opening
quote of the string.  For example:

<div class="example">
<pre class="example-preformatted">print _&quot;hello, world&quot;
x = _&quot;you goofed&quot;
printf(_&quot;Number of users is %d\n&quot;, nusers)
</pre></div>

</li><li> If you are creating strings dynamically, you can
still translate them, using the <code class="code">dcgettext()</code>
built-in function:<a class="footnote" id="DOCF92" href="#FOOT92"><sup>92</sup></a>

<div class="example">
<pre class="example-preformatted">if (groggy)
    message = dcgettext(&quot;%d customers disturbing me\n&quot;, &quot;adminprog&quot;)
else
    message = dcgettext(&quot;enjoying %d customers\n&quot;, &quot;adminprog&quot;)
printf(message, ncustomers)
</pre></div>

<p>Here, the call to <code class="code">dcgettext()</code> supplies a different
text domain (<code class="code">&quot;adminprog&quot;</code>) in which to find the
message, but it uses the default <code class="code">&quot;LC_MESSAGES&quot;</code> category.
</p>
<p>The previous example only works if <code class="code">ncustomers</code> is greater than one.
This example would be better done with <code class="code">dcngettext()</code>:
</p>
<div class="example">
<pre class="example-preformatted">if (groggy)
    message = dcngettext(&quot;%d customer disturbing me\n&quot;,
                         &quot;%d customers disturbing me\n&quot;,
                         ncustomers, &quot;adminprog&quot;)
else
    message = dcngettext(&quot;enjoying %d customer\n&quot;,
                         &quot;enjoying %d customers\n&quot;,
                         ncustomers, &quot;adminprog&quot;)
printf(message, ncustomers)
</pre></div>


<a class="index-entry-id" id="index-LC_005fMESSAGES-locale-category-bindtextdomain_0028_0029-function-_0028gawk_0029"></a>
</li><li> During development, you might want to put the <samp class="file">.gmo</samp>
file in a private directory for testing.  This is done
with the <code class="code">bindtextdomain()</code> built-in function:

<div class="example">
<pre class="example-preformatted">BEGIN {
   TEXTDOMAIN = &quot;guide&quot;   # our text domain
   if (Testing) {
       # where to find our files
       bindtextdomain(&quot;testdir&quot;)
       # joe is in charge of adminprog
       bindtextdomain(&quot;../joe/testdir&quot;, &quot;adminprog&quot;)
   }
   ...
}
</pre></div>

</li></ol>

<p>See <a class="xref" href="#I18N-Example">A Simple Internationalization Example</a>
for an example program showing the steps to create
and use translations from <code class="command">awk</code>.
</p>
<hr>
</div>
<div class="section-level-extent" id="Translator-i18n">
<div class="nav-panel">
<p>
Next: <a href="#I18N-Example" accesskey="n" rel="next">A Simple Internationalization Example</a>, Previous: <a href="#Programmer-i18n" accesskey="p" rel="prev">Internationalizing <code class="command">awk</code> Programs</a>, Up: <a href="#Internationalization" accesskey="u" rel="up">Internationalization with <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Translating-awk-Programs"><span>13.4 Translating <code class="command">awk</code> Programs<a class="copiable-link" href="#Translating-awk-Programs"> &para;</a></span></h3>

<a class="index-entry-id" id="index-_002epo-files-1"></a>
<a class="index-entry-id" id="index-files-_002epo-1"></a>
<a class="index-entry-id" id="index-portable-object-files-1"></a>
<a class="index-entry-id" id="index-files-portable-object-1"></a>
<p>Once a program&rsquo;s translatable strings have been marked, they must
be extracted to create the initial <samp class="file">.pot</samp> file.
As part of translation, it is often helpful to rearrange the order
in which arguments to <code class="code">printf</code> are output.
</p>
<p><code class="command">gawk</code>&rsquo;s <samp class="option">--gen-pot</samp> command-line option extracts
the messages and is discussed next.
After that, <code class="code">printf</code>&rsquo;s ability to
rearrange the order for <code class="code">printf</code> arguments at runtime
is covered.
</p>

<ul class="mini-toc">
<li><a href="#String-Extraction" accesskey="1">Extracting Marked Strings</a></li>
<li><a href="#Printf-Ordering" accesskey="2">Rearranging <code class="code">printf</code> Arguments</a></li>
<li><a href="#I18N-Portability" accesskey="3"><code class="command">awk</code> Portability Issues</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="String-Extraction">
<div class="nav-panel">
<p>
Next: <a href="#Printf-Ordering" accesskey="n" rel="next">Rearranging <code class="code">printf</code> Arguments</a>, Up: <a href="#Translator-i18n" accesskey="u" rel="up">Translating <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Extracting-Marked-Strings"><span>13.4.1 Extracting Marked Strings<a class="copiable-link" href="#Extracting-Marked-Strings"> &para;</a></span></h4>
<a class="index-entry-id" id="index-strings-extracting"></a>
<a class="index-entry-id" id="index-_002d_002dgen_002dpot-option-1"></a>
<a class="index-entry-id" id="index-command-line-options-string-extraction"></a>
<a class="index-entry-id" id="index-string-extraction-_0028internationalization_0029"></a>
<a class="index-entry-id" id="index-marked-string-extraction-_0028internationalization_0029"></a>
<a class="index-entry-id" id="index-extraction_002c-of-marked-strings-_0028internationalization_0029"></a>

<a class="index-entry-id" id="index-_002d_002dgen_002dpot-option-2"></a>
<p>Once your <code class="command">awk</code> program is working, and all the strings have
been marked and you&rsquo;ve set (and perhaps bound) the text domain,
it is time to produce translations.
First, use the <samp class="option">--gen-pot</samp> command-line option to create
the initial <samp class="file">.pot</samp> file:
</p>
<div class="example">
<pre class="example-preformatted">gawk --gen-pot -f guide.awk &gt; guide.pot
</pre></div>

<a class="index-entry-id" id="index-xgettext-utility"></a>
<p>When run with <samp class="option">--gen-pot</samp>, <code class="command">gawk</code> does not execute your
program.  Instead, it parses it as usual and prints all marked strings
to standard output in the format of a GNU <code class="command">gettext</code> Portable Object
file.  Also included in the output are any constant strings that
appear as the first argument to <code class="code">dcgettext()</code> or as the first and
second argument to <code class="code">dcngettext()</code>.<a class="footnote" id="DOCF93" href="#FOOT93"><sup>93</sup></a>
You should distribute the generated <samp class="file">.pot</samp> file with
your <code class="command">awk</code> program; translators will eventually use it
to provide you translations that you can also then distribute.
See <a class="xref" href="#I18N-Example">A Simple Internationalization Example</a>
for the full list of steps to go through to create and test
translations for <code class="command">guide</code>.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Printf-Ordering">
<div class="nav-panel">
<p>
Next: <a href="#I18N-Portability" accesskey="n" rel="next"><code class="command">awk</code> Portability Issues</a>, Previous: <a href="#String-Extraction" accesskey="p" rel="prev">Extracting Marked Strings</a>, Up: <a href="#Translator-i18n" accesskey="u" rel="up">Translating <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Rearranging-printf-Arguments"><span>13.4.2 Rearranging <code class="code">printf</code> Arguments<a class="copiable-link" href="#Rearranging-printf-Arguments"> &para;</a></span></h4>

<a class="index-entry-id" id="index-printf-statement-positional-specifiers-1"></a>
<a class="index-entry-id" id="index-positional-specifiers_002c-printf-statement-1"></a>
<p>Format strings for <code class="code">printf</code> and <code class="code">sprintf()</code>
(see <a class="pxref" href="#Printf">Using <code class="code">printf</code> Statements for Fancier Printing</a>)
present a special problem for translation.
Consider the following:<a class="footnote" id="DOCF94" href="#FOOT94"><sup>94</sup></a>
</p>
<div class="example">
<pre class="example-preformatted">printf(_&quot;String `%s' has %d characters\n&quot;,
          string, length(string)))
</pre></div>

<p>A possible German translation for this might be:
</p>
<div class="example">
<pre class="example-preformatted">&quot;%d Zeichen lang ist die Zeichenkette `%s'\n&quot;
</pre></div>

<p>The problem should be obvious: the order of the format
specifications is different from the original!
Even though <code class="code">gettext()</code> can return the translated string
at runtime,
it cannot change the argument order in the call to <code class="code">printf</code>.
</p>
<p>To solve this problem, <code class="code">printf</code> format specifiers may have
an additional optional element, which we call a <em class="dfn">positional specifier</em>.
For example:
</p>
<div class="example">
<pre class="example-preformatted">&quot;%2$d Zeichen lang ist die Zeichenkette `%1$s'\n&quot;
</pre></div>

<p>Here, the positional specifier consists of an integer count, which indicates which
argument to use, and a &lsquo;<samp class="samp">$</samp>&rsquo;. Counts are one-based, and the
format string itself is <em class="emph">not</em> included.  Thus, in the following
example, &lsquo;<samp class="samp">string</samp>&rsquo; is the first argument and &lsquo;<samp class="samp">length(string)</samp>&rsquo; is the second:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN {</kbd>
&gt;     <kbd class="kbd">string = &quot;Don\47t Panic&quot;</kbd>
&gt;     <kbd class="kbd">printf &quot;%2$d characters live in \&quot;%1$s\&quot;\n&quot;,</kbd>
&gt;                         <kbd class="kbd">string, length(string)</kbd>
&gt; <kbd class="kbd">}'</kbd>
-| 11 characters live in &quot;Don't Panic&quot;
</pre></div>

<p>If present, positional specifiers come first in the format specification,
before the flags, the field width, and/or the precision.
</p>
<p>Positional specifiers can be used with the dynamic field width and
precision capability:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN {</kbd>
&gt;    <kbd class="kbd">printf(&quot;%*.*s\n&quot;, 10, 20, &quot;hello&quot;)</kbd>
&gt;    <kbd class="kbd">printf(&quot;%3$*2$.*1$s\n&quot;, 20, 10, &quot;hello&quot;)</kbd>
&gt; <kbd class="kbd">}'</kbd>
-|      hello
-|      hello
</pre></div>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> When using &lsquo;<samp class="samp">*</samp>&rsquo; with a positional specifier, the &lsquo;<samp class="samp">*</samp>&rsquo;
comes first, then the integer position, and then the &lsquo;<samp class="samp">$</samp>&rsquo;.
This is somewhat counterintuitive.
</p></blockquote>

<a class="index-entry-id" id="index-printf-statement-positional-specifiers-mixing-with-regular-formats"></a>
<a class="index-entry-id" id="index-positional-specifiers_002c-printf-statement-mixing-with-regular-formats"></a>
<a class="index-entry-id" id="index-format-specifiers-mixing-regular-with-positional-specifiers"></a>
<p><code class="command">gawk</code> does not allow you to mix regular format specifiers
and those with positional specifiers in the same string:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { printf &quot;%d %3$s\n&quot;, 1, 2, &quot;hi&quot; }'</kbd>
error&rarr; gawk: cmd. line:1: fatal: must use `count$' on all formats or none
</pre></div></div>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> There are some pathological cases that <code class="command">gawk</code> may fail to
diagnose.  In such cases, the output may not be what you expect.
It&rsquo;s still a bad idea to try mixing them, even if <code class="command">gawk</code>
doesn&rsquo;t detect it.
</p></blockquote>

<p>Although positional specifiers can be used directly in <code class="command">awk</code> programs,
their primary purpose is to help in producing correct translations of
format strings into languages different from the one in which the program
is first written.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="I18N-Portability">
<div class="nav-panel">
<p>
Previous: <a href="#Printf-Ordering" accesskey="p" rel="prev">Rearranging <code class="code">printf</code> Arguments</a>, Up: <a href="#Translator-i18n" accesskey="u" rel="up">Translating <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="awk-Portability-Issues"><span>13.4.3 <code class="command">awk</code> Portability Issues<a class="copiable-link" href="#awk-Portability-Issues"> &para;</a></span></h4>

<a class="index-entry-id" id="index-portability-internationalization-and"></a>
<a class="index-entry-id" id="index-internationalization-localization-portability-and"></a>
<p><code class="command">gawk</code>&rsquo;s internationalization features were purposely chosen to
have as little impact as possible on the portability of <code class="command">awk</code>
programs that use them to other versions of <code class="command">awk</code>.
Consider this program:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    TEXTDOMAIN = &quot;guide&quot;
    if (Test_Guide)   # set with -v
        bindtextdomain(&quot;/test/guide/messages&quot;)
    print _&quot;don't panic!&quot;
}
</pre></div>

<p>As written, it won&rsquo;t work on other versions of <code class="command">awk</code>.
However, it is actually almost portable, requiring very little
change:
</p>
<ul class="itemize mark-bullet">
<li><a class="index-entry-id" id="index-TEXTDOMAIN-variable-portability-and"></a>
</li><li>Assignments to <code class="code">TEXTDOMAIN</code> won&rsquo;t have any effect,
because <code class="code">TEXTDOMAIN</code> is not special in other <code class="command">awk</code> implementations.

</li><li>Non-GNU versions of <code class="command">awk</code> treat marked strings
as the concatenation of a variable named <code class="code">_</code> with the string
following it.<a class="footnote" id="DOCF95" href="#FOOT95"><sup>95</sup></a> Typically, the variable <code class="code">_</code> has
the null string (<code class="code">&quot;&quot;</code>) as its value, leaving the original string constant as
the result.

</li><li>By defining &ldquo;dummy&rdquo; functions to replace <code class="code">dcgettext()</code>, <code class="code">dcngettext()</code>,
and <code class="code">bindtextdomain()</code>, the <code class="command">awk</code> program can be made to run, but
all the messages are output in the original language.
For example:

<a class="index-entry-id" id="index-bindtextdomain_0028_0029-function-_0028gawk_0029-portability-and"></a>
<a class="index-entry-id" id="index-dcgettext_0028_0029-function-_0028gawk_0029-portability-and"></a>
<a class="index-entry-id" id="index-dcngettext_0028_0029-function-_0028gawk_0029-portability-and"></a>
<div class="example">
<pre class="example-preformatted">function bindtextdomain(dir, domain)
{
    return dir
}

function dcgettext(string, domain, category)
{
    return string
}

function dcngettext(string1, string2, number, domain, category)
{
    return (number == 1 ? string1 : string2)
}
</pre></div>

</li><li>The use of positional specifications in <code class="code">printf</code> or
<code class="code">sprintf()</code> is <em class="emph">not</em> portable.
To support <code class="code">gettext()</code> at the C level, many systems&rsquo; C versions of
<code class="code">sprintf()</code> do support positional specifiers.  But it works only if
enough arguments are supplied in the function call.  Many versions of
<code class="command">awk</code> pass <code class="code">printf</code> formats and arguments unchanged to the
underlying C library version of <code class="code">sprintf()</code>, but only one format and
argument at a time.  What happens if a positional specification is
used is anybody&rsquo;s guess.
However, because the positional specifications are primarily for use in
<em class="emph">translated</em> format strings, and because non-GNU <code class="command">awk</code>s never
retrieve the translated string, this should not be a problem in practice.
</li></ul>

<hr>
</div>
</div>
<div class="section-level-extent" id="I18N-Example">
<div class="nav-panel">
<p>
Next: <a href="#Gawk-I18N" accesskey="n" rel="next"><code class="command">gawk</code> Can Speak Your Language</a>, Previous: <a href="#Translator-i18n" accesskey="p" rel="prev">Translating <code class="command">awk</code> Programs</a>, Up: <a href="#Internationalization" accesskey="u" rel="up">Internationalization with <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="A-Simple-Internationalization-Example"><span>13.5 A Simple Internationalization Example<a class="copiable-link" href="#A-Simple-Internationalization-Example"> &para;</a></span></h3>

<p>Now let&rsquo;s look at a step-by-step example of how to internationalize and
localize a simple <code class="command">awk</code> program, using <samp class="file">guide.awk</samp> as our
original source:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    TEXTDOMAIN = &quot;guide&quot;
    bindtextdomain(&quot;.&quot;)  # for testing
    print _&quot;Don't Panic&quot;
    print _&quot;The Answer Is&quot;, 42
    print &quot;Pardon me, Zaphod who?&quot;
}
</pre></div>

<p>Run &lsquo;<samp class="samp">gawk --gen-pot</samp>&rsquo; to create the <samp class="file">.pot</samp> file:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk --gen-pot -f guide.awk &gt; guide.pot</kbd>
</pre></div>

<p>This produces:
</p>
<div class="example">
<pre class="example-preformatted">#: guide.awk:4
msgid &quot;Don't Panic&quot;
msgstr &quot;&quot;

#: guide.awk:5
msgid &quot;The Answer Is&quot;
msgstr &quot;&quot;

</pre></div>

<p>This original portable object template file is saved and reused for each language
into which the application is translated.  The <code class="code">msgid</code>
is the original string and the <code class="code">msgstr</code> is the translation.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> Strings not marked with a leading underscore do not
appear in the <samp class="file">guide.pot</samp> file.
</p></blockquote>

<p>Next, the messages must be translated.
Here is a translation to a hypothetical dialect of English,
called &ldquo;Mellow&rdquo;:<a class="footnote" id="DOCF96" href="#FOOT96"><sup>96</sup></a>
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">$ <kbd class="kbd">cp guide.pot guide-mellow.po</kbd>
<var class="var">Add translations to</var> guide-mellow.po ...
</pre></div></div>

<p>Following are the translations:
</p>
<div class="example">
<pre class="example-preformatted">#: guide.awk:4
msgid &quot;Don't Panic&quot;
msgstr &quot;Hey man, relax!&quot;

#: guide.awk:5
msgid &quot;The Answer Is&quot;
msgstr &quot;Like, the scoop is&quot;

</pre></div>

<a class="index-entry-id" id="index-GNU_002fLinux-1"></a>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> The following instructions apply to GNU/Linux with the GNU C Library. Be
aware that the actual steps may change over time, that the following
description may not be accurate for all GNU/Linux distributions, and
that things may work entirely differently on other operating systems.
</p></blockquote>

<p>The next step is to make the directory to hold the binary message object
file and then to create the <samp class="file">guide.mo</samp> file.
The directory has the form <samp class="file"><var class="var">locale</var>/LC_MESSAGES</samp>, where
<var class="var">locale</var> is a locale name known to the C <code class="command">gettext</code> routines.
</p>
<a class="index-entry-id" id="index-LANGUAGE-environment-variable-1"></a>
<a class="index-entry-id" id="index-environment-variables-LANGUAGE-1"></a>
<a class="index-entry-id" id="index-LC_005fALL-environment-variable-1"></a>
<a class="index-entry-id" id="index-environment-variables-LC_005fALL-1"></a>
<a class="index-entry-id" id="index-LANG-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-LANG"></a>
<a class="index-entry-id" id="index-LC_005fMESSAGES-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-LC_005fMESSAGES"></a>
<p>How do we know which locale to use?  It turns out that there are
four different environment variables used by the C <code class="command">gettext</code> routines.
In order, they are <code class="env">$LANGUAGE</code>, <code class="env">$LC_ALL</code>, <code class="env">$LANG</code>, and
<code class="env">$LC_MESSAGES</code>.<a class="footnote" id="DOCF97" href="#FOOT97"><sup>97</sup></a>
Thus, we check the value of <code class="env">$LANGUAGE</code>:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo $LANGUAGE</kbd>
-| en_US.UTF-8
</pre></div>

<p>We next make the directories:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">mkdir en_US.UTF-8 en_US.UTF-8/LC_MESSAGES</kbd>
</pre></div>

<a class="index-entry-id" id="index-_002epo-files-converting-to-_002emo"></a>
<a class="index-entry-id" id="index-files-_002epo-converting-to-_002emo"></a>
<a class="index-entry-id" id="index-_002emo-files_002c-converting-from-_002epo"></a>
<a class="index-entry-id" id="index-files-_002emo_002c-converting-from-_002epo"></a>
<a class="index-entry-id" id="index-portable-object-files-converting-to-message-object-files"></a>
<a class="index-entry-id" id="index-files-portable-object-converting-to-message-object-files"></a>
<a class="index-entry-id" id="index-message-object-files-converting-from-portable-object-files"></a>
<a class="index-entry-id" id="index-files-message-object-converting-from-portable-object-files"></a>
<a class="index-entry-id" id="index-msgfmt-utility"></a>
<p>The <code class="command">msgfmt</code> utility converts the human-readable
<samp class="file">.po</samp> file into a machine-readable <samp class="file">.mo</samp> file.
By default, <code class="command">msgfmt</code> creates a file named <samp class="file">messages</samp>.
This file must be renamed and placed in the proper directory (using
the <samp class="option">-o</samp> option) so that <code class="command">gawk</code> can find it:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">msgfmt guide-mellow.po -o en_US.UTF-8/LC_MESSAGES/guide.mo</kbd>
</pre></div>

<p>Finally, we run the program to test it:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f guide.awk</kbd>
-| Hey man, relax!
-| Like, the scoop is 42
-| Pardon me, Zaphod who?
</pre></div>

<p>If the three replacement functions for <code class="code">dcgettext()</code>, <code class="code">dcngettext()</code>,
and <code class="code">bindtextdomain()</code>
(see <a class="pxref" href="#I18N-Portability"><code class="command">awk</code> Portability Issues</a>)
are in a file named <samp class="file">libintl.awk</samp>,
then we can run <samp class="file">guide.awk</samp> unchanged as follows:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk --posix -f guide.awk -f libintl.awk</kbd>
-| Don't Panic
-| The Answer Is 42
-| Pardon me, Zaphod who?
</pre></div>

<hr>
</div>
<div class="section-level-extent" id="Gawk-I18N">
<div class="nav-panel">
<p>
Next: <a href="#I18N-Summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#I18N-Example" accesskey="p" rel="prev">A Simple Internationalization Example</a>, Up: <a href="#Internationalization" accesskey="u" rel="up">Internationalization with <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="gawk-Can-Speak-Your-Language"><span>13.6 <code class="command">gawk</code> Can Speak Your Language<a class="copiable-link" href="#gawk-Can-Speak-Your-Language"> &para;</a></span></h3>

<p><code class="command">gawk</code> itself has been internationalized
using the GNU <code class="command">gettext</code> package.
(GNU <code class="command">gettext</code> is described in
complete detail in
<a class="uref" href="https://www.gnu.org/software/gettext/manual/"><cite class="cite">GNU <code class="command">gettext</code> utilities</cite></a>.)
As of this writing, the latest version of GNU <code class="command">gettext</code> is
<a class="uref" href="ftp://ftp.gnu.org/gnu/gettext/gettext-0.19.8.1.tar.gz">version 0.19.8.1</a>.
</p>
<p>If a translation of <code class="command">gawk</code>&rsquo;s messages exists,
then <code class="command">gawk</code> produces usage messages, warnings,
and fatal errors in the local language.
</p>
<hr>
</div>
<div class="section-level-extent" id="I18N-Summary">
<div class="nav-panel">
<p>
Previous: <a href="#Gawk-I18N" accesskey="p" rel="prev"><code class="command">gawk</code> Can Speak Your Language</a>, Up: <a href="#Internationalization" accesskey="u" rel="up">Internationalization with <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary-12"><span>13.7 Summary<a class="copiable-link" href="#Summary-12"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>Internationalization means writing a program such that it can use multiple
languages without requiring source code changes.  Localization means
providing the data necessary for an internationalized program to work
in a particular language.

</li><li><code class="command">gawk</code> uses GNU <code class="command">gettext</code> to let you internationalize
and localize <code class="command">awk</code> programs.  A program&rsquo;s text domain identifies
the program for grouping all messages and other data together.

</li><li>You mark a program&rsquo;s strings for translation by preceding them with
an underscore. Once that is done, the strings are extracted into a
<samp class="file">.pot</samp> file.  This file is copied for each language into a <samp class="file">.po</samp>
file, and the <samp class="file">.po</samp> files are compiled into <samp class="file">.gmo</samp> files for
use at runtime.

</li><li>You can use positional specifications with <code class="code">sprintf()</code> and
<code class="code">printf</code> to rearrange the placement of argument values in formatted
strings and output. This is useful for the translation of format
control strings.

</li><li>The internationalization features have been designed so that they
can be easily worked around in a standard <code class="command">awk</code>.

</li><li><code class="command">gawk</code> itself has been internationalized and ships with
a number of translations for its messages.

</li></ul>


<hr>
</div>
</div>
<div class="chapter-level-extent" id="Debugger">
<div class="nav-panel">
<p>
Next: <a href="#Namespaces" accesskey="n" rel="next">Namespaces in <code class="command">gawk</code></a>, Previous: <a href="#Internationalization" accesskey="p" rel="prev">Internationalization with <code class="command">gawk</code></a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Debugging-awk-Programs"><span>14 Debugging <code class="command">awk</code> Programs<a class="copiable-link" href="#Debugging-awk-Programs"> &para;</a></span></h2>
<a class="index-entry-id" id="index-debugging-awk-programs"></a>


<p>It would be nice if computer programs worked perfectly the first time they
were run, but in real life, this rarely happens for programs of
any complexity.  Thus, most programming languages have facilities available
for &ldquo;debugging&rdquo; programs, and <code class="command">awk</code> is no exception.
</p>
<p>The <code class="command">gawk</code> debugger is purposely modeled after
<a class="uref" href="https://www.gnu.org/software/gdb/">the GNU Debugger (GDB)</a>
command-line debugger.  If you are familiar with GDB, learning
how to use <code class="command">gawk</code> for debugging your programs is easy.
</p>

<ul class="mini-toc">
<li><a href="#Debugging" accesskey="1">Introduction to the <code class="command">gawk</code> Debugger</a></li>
<li><a href="#Sample-Debugging-Session" accesskey="2">Sample <code class="command">gawk</code> Debugging Session</a></li>
<li><a href="#List-of-Debugger-Commands" accesskey="3">Main Debugger Commands</a></li>
<li><a href="#Readline-Support" accesskey="4">Readline Support</a></li>
<li><a href="#Limitations" accesskey="5">Limitations</a></li>
<li><a href="#Debugging-Summary" accesskey="6">Summary</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Debugging">
<div class="nav-panel">
<p>
Next: <a href="#Sample-Debugging-Session" accesskey="n" rel="next">Sample <code class="command">gawk</code> Debugging Session</a>, Up: <a href="#Debugger" accesskey="u" rel="up">Debugging <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Introduction-to-the-gawk-Debugger"><span>14.1 Introduction to the <code class="command">gawk</code> Debugger<a class="copiable-link" href="#Introduction-to-the-gawk-Debugger"> &para;</a></span></h3>

<p>This section introduces debugging in general and begins
the discussion of debugging in <code class="command">gawk</code>.
</p>

<ul class="mini-toc">
<li><a href="#Debugging-Concepts" accesskey="1">Debugging in General</a></li>
<li><a href="#Debugging-Terms" accesskey="2">Debugging Concepts</a></li>
<li><a href="#Awk-Debugging" accesskey="3"><code class="command">awk</code> Debugging</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Debugging-Concepts">
<div class="nav-panel">
<p>
Next: <a href="#Debugging-Terms" accesskey="n" rel="next">Debugging Concepts</a>, Up: <a href="#Debugging" accesskey="u" rel="up">Introduction to the <code class="command">gawk</code> Debugger</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Debugging-in-General"><span>14.1.1 Debugging in General<a class="copiable-link" href="#Debugging-in-General"> &para;</a></span></h4>

<p>(If you have used debuggers in other languages, you may want to skip
ahead to <a class="ref" href="#Awk-Debugging"><code class="command">awk</code> Debugging</a>.)
</p>
<p>Of course, a debugging program cannot remove bugs for you, because it has
no way of knowing what you or your users consider a &ldquo;bug&rdquo; versus a
&ldquo;feature.&rdquo;  (Sometimes, we humans have a hard time with this ourselves.)
In that case, what can you expect from such a tool?  The answer to that
depends on the language being debugged, but in general, you can expect at
least the following:
</p>
<a class="index-entry-id" id="index-debugger-capabilities"></a>
<ul class="itemize mark-bullet">
<li>The ability to watch a program execute its instructions one by one,
giving you, the programmer, the opportunity to think about what is happening
on a time scale of seconds, minutes, or hours, rather than the nanosecond
time scale at which the code usually runs.

</li><li>The opportunity to not only passively observe the operation of your
program, but to control it and try different paths of execution, without
having to change your source files.

</li><li>The chance to see the values of data in the program at any point in
execution, and also to change that data on the fly, to see how that
affects what happens afterward.  (This often includes the ability
to look at internal data structures besides the variables you actually
defined in your code.)

</li><li>The ability to obtain additional information about your program&rsquo;s state
or even its internal structure.
</li></ul>

<p>All of these tools provide a great amount of help in using your own
skills and understanding of the goals of your program to find where it
is going wrong (or, for that matter, to better comprehend a perfectly
functional program that you or someone else wrote).
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Debugging-Terms">
<div class="nav-panel">
<p>
Next: <a href="#Awk-Debugging" accesskey="n" rel="next"><code class="command">awk</code> Debugging</a>, Previous: <a href="#Debugging-Concepts" accesskey="p" rel="prev">Debugging in General</a>, Up: <a href="#Debugging" accesskey="u" rel="up">Introduction to the <code class="command">gawk</code> Debugger</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Debugging-Concepts-1"><span>14.1.2 Debugging Concepts<a class="copiable-link" href="#Debugging-Concepts-1"> &para;</a></span></h4>

<a class="index-entry-id" id="index-debugger-concepts"></a>
<p>Before diving in to the details, we need to introduce several
important concepts that apply to just about all debuggers.
The following list defines terms used throughout the rest of
this chapter:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-call-stack-explanation-of"></a>
</dd>
<dt><a id="index-stack-frame-_0028debugger_0029"></a><span><em class="dfn">Stack frame</em><a class="copiable-link" href="#index-stack-frame-_0028debugger_0029"> &para;</a></span></dt>
<dd><p>Programs generally call functions during the course of their execution.
One function can call another, or a function can call itself (recursion).
You can view the chain of called functions (main program calls A, which
calls B, which calls C), as a stack of executing functions: the currently
running function is the topmost one on the stack, and when it finishes
(returns), the next one down then becomes the active function.
Such a stack is termed a <em class="dfn">call stack</em>.
</p>
<p>For each function on the call stack, the system maintains a data area
that contains the function&rsquo;s parameters, local variables, and return value,
as well as any other &ldquo;bookkeeping&rdquo; information needed to manage the
call stack.  This data area is termed a <em class="dfn">stack frame</em>.
</p>
<p><code class="command">gawk</code> also follows this model, and gives you
access to the call stack and to each stack frame. You can see the
call stack, as well as from where each function on the stack was
invoked. Commands that print the call stack print information about
each stack frame (as detailed later on).
</p>
</dd>
<dt><a id="index-breakpoint"></a><span><em class="dfn">Breakpoint</em><a class="copiable-link" href="#index-breakpoint"> &para;</a></span></dt>
<dd><p>During debugging, you often wish to let the program run until it
reaches a certain point, and then continue execution from there one
statement (or instruction) at a time.  The way to do this is to set
a <em class="dfn">breakpoint</em> within the program.  A breakpoint is where the
execution of the program should break off (stop), so that you can
take over control of the program&rsquo;s execution.  You can add and remove
as many breakpoints as you like.
</p>
</dd>
<dt><a id="index-watchpoint-_0028debugger_0029"></a><span><em class="dfn">Watchpoint</em><a class="copiable-link" href="#index-watchpoint-_0028debugger_0029"> &para;</a></span></dt>
<dd><p>A watchpoint is similar to a breakpoint.  The difference is that
breakpoints are oriented around the code: stop when a certain point in the
code is reached.  A watchpoint, however, specifies that program execution
should stop when a <em class="emph">data value</em> is changed.  This is useful, as
sometimes it happens that a variable receives an erroneous value, and it&rsquo;s
hard to track down where this happens just by looking at the code.
By using a watchpoint, you can stop whenever a variable is assigned to,
and usually find the errant code quite quickly.
</p></dd>
</dl>

<hr>
</div>
<div class="subsection-level-extent" id="Awk-Debugging">
<div class="nav-panel">
<p>
Previous: <a href="#Debugging-Terms" accesskey="p" rel="prev">Debugging Concepts</a>, Up: <a href="#Debugging" accesskey="u" rel="up">Introduction to the <code class="command">gawk</code> Debugger</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="awk-Debugging"><span>14.1.3 <code class="command">awk</code> Debugging<a class="copiable-link" href="#awk-Debugging"> &para;</a></span></h4>

<p>Debugging an <code class="command">awk</code> program has some specific aspects that are
not shared with programs written in other languages.
</p>
<p>First of all, the fact that <code class="command">awk</code> programs usually take input
line by line from a file or files and operate on those lines using specific
rules makes it especially useful to organize viewing the execution of
the program in terms of these rules.  As we will see, each <code class="command">awk</code>
rule is treated almost like a function call, with its own specific block
of instructions.
</p>
<p>In addition, because <code class="command">awk</code> is by design a very concise language,
it is easy to lose sight of everything that is going on &ldquo;inside&rdquo;
each line of <code class="command">awk</code> code.  The debugger provides the opportunity
to look at the individual primitive instructions carried out
by the higher-level <code class="command">awk</code> commands.<a class="footnote" id="DOCF98" href="#FOOT98"><sup>98</sup></a>
</p>
<hr>
</div>
</div>
<div class="section-level-extent" id="Sample-Debugging-Session">
<div class="nav-panel">
<p>
Next: <a href="#List-of-Debugger-Commands" accesskey="n" rel="next">Main Debugger Commands</a>, Previous: <a href="#Debugging" accesskey="p" rel="prev">Introduction to the <code class="command">gawk</code> Debugger</a>, Up: <a href="#Debugger" accesskey="u" rel="up">Debugging <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Sample-gawk-Debugging-Session"><span>14.2 Sample <code class="command">gawk</code> Debugging Session<a class="copiable-link" href="#Sample-gawk-Debugging-Session"> &para;</a></span></h3>
<a class="index-entry-id" id="index-sample-debugging-session"></a>
<a class="index-entry-id" id="index-example-debugging-session"></a>
<a class="index-entry-id" id="index-debugging-example-session"></a>

<p>In order to illustrate the use of <code class="command">gawk</code> as a debugger, let&rsquo;s look at a sample
debugging session.  We will use the <code class="command">awk</code> implementation of the
POSIX <code class="command">uniq</code> command presented earlier (see <a class="pxref" href="#Uniq-Program">Printing Nonduplicated Lines of Text</a>)
as our example.
</p>

<ul class="mini-toc">
<li><a href="#Debugger-Invocation" accesskey="1">How to Start the Debugger</a></li>
<li><a href="#Finding-The-Bug" accesskey="2">Finding the Bug</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Debugger-Invocation">
<div class="nav-panel">
<p>
Next: <a href="#Finding-The-Bug" accesskey="n" rel="next">Finding the Bug</a>, Up: <a href="#Sample-Debugging-Session" accesskey="u" rel="up">Sample <code class="command">gawk</code> Debugging Session</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="How-to-Start-the-Debugger"><span>14.2.1 How to Start the Debugger<a class="copiable-link" href="#How-to-Start-the-Debugger"> &para;</a></span></h4>
<a class="index-entry-id" id="index-starting-the-debugger"></a>
<a class="index-entry-id" id="index-debugger-how-to-start"></a>

<p>Starting the debugger is almost exactly like running <code class="command">gawk</code> normally,
except you have to pass an additional option, <samp class="option">--debug</samp>, or the
corresponding short option, <samp class="option">-D</samp>.  The file(s) containing the
program and any supporting code are given on the command line as arguments
to one or more <samp class="option">-f</samp> options. (<code class="command">gawk</code> is not designed
to debug command-line programs, only programs contained in files.)
In our case, we invoke the debugger like this:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -D -f getopt.awk -f join.awk -f uniq.awk -- -1 inputfile</kbd>
</pre></div>

<a class="index-entry-id" id="index-AWKPATH-environment-variable-5"></a>
<a class="index-entry-id" id="index-environment-variables-AWKPATH-5"></a>
<p>where both <samp class="file">getopt.awk</samp> and <samp class="file">uniq.awk</samp> are in <code class="env">$AWKPATH</code>.
(Experienced users of GDB or similar debuggers should note that
this syntax is slightly different from what you are used to.
With the <code class="command">gawk</code> debugger, you give the arguments for running the program
in the command line to the debugger rather than as part of the <code class="code">run</code>
command at the debugger prompt.)
The <samp class="option">--</samp> ends <code class="command">gawk</code>&rsquo;s command line options. It&rsquo;s not
strictly necessary here, but it is needed if an option to the <code class="command">awk</code>
program conflicts with a <code class="command">gawk</code> option.
The <samp class="option">-1</samp> is an option to <samp class="file">uniq.awk</samp>.
</p>
<a class="index-entry-id" id="index-debugger-prompt"></a>
<p>Instead of immediately running the program on <samp class="file">inputfile</samp>, as
<code class="command">gawk</code> would ordinarily do, the debugger merely loads all
the program source files, compiles them internally, and then gives
us a prompt:
</p>
<div class="example">
<pre class="example-preformatted">gawk&gt;
</pre></div>

<p>from which we can issue commands to the debugger.  At this point, no
code has been executed.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Finding-The-Bug">
<div class="nav-panel">
<p>
Previous: <a href="#Debugger-Invocation" accesskey="p" rel="prev">How to Start the Debugger</a>, Up: <a href="#Sample-Debugging-Session" accesskey="u" rel="up">Sample <code class="command">gawk</code> Debugging Session</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Finding-the-Bug"><span>14.2.2 Finding the Bug<a class="copiable-link" href="#Finding-the-Bug"> &para;</a></span></h4>

<p>Let&rsquo;s say that we are having a problem using (a faulty version of)
<samp class="file">uniq.awk</samp> in &ldquo;field-skipping&rdquo; mode, and it doesn&rsquo;t seem to be
catching lines which should be identical when skipping the first field,
such as:
</p>
<div class="example">
<pre class="example-preformatted">awk is a wonderful program!
gawk is a wonderful program!
</pre></div>

<p>This could happen if we were thinking (C-like) of the fields in a record
as being numbered in a zero-based fashion, so instead of the lines:
</p>
<div class="example">
<pre class="example-preformatted">clast = join(alast, fcount+1, n)
cline = join(aline, fcount+1, m)
</pre></div>

<p>we wrote:
</p>
<div class="example">
<pre class="example-preformatted">clast = join(alast, fcount, n)
cline = join(aline, fcount, m)
</pre></div>

<p>The first thing we usually want to do when trying to investigate a
problem like this is to put a breakpoint in the program so that we can
watch it at work and catch what it is doing wrong.  A reasonable spot for
a breakpoint in <samp class="file">uniq.awk</samp> is at the beginning of the function
<code class="code">are_equal()</code>, which compares the current line with the previous one. To set
the breakpoint, use the <code class="code">b</code> (breakpoint) command:
</p>
<a class="index-entry-id" id="index-debugger-setting-a-breakpoint"></a>
<a class="index-entry-id" id="index-debugger-commands-breakpoint"></a>
<a class="index-entry-id" id="index-debugger-commands-break"></a>
<a class="index-entry-id" id="index-debugger-commands-b-_0028break_0029"></a>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">b are_equal</kbd>
-| Breakpoint 1 set at file `awklib/eg/prog/uniq.awk', line 63
</pre></div>

<p>The debugger tells us the file and line number where the breakpoint is.
Now type &lsquo;<samp class="samp">r</samp>&rsquo; or &lsquo;<samp class="samp">run</samp>&rsquo; and the program runs until it hits
the breakpoint for the first time:
</p>
<a class="index-entry-id" id="index-debugger-running-the-program"></a>
<a class="index-entry-id" id="index-debugger-commands-run"></a>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">r</kbd>
-| Starting program:
-| Stopping in Rule ...
-| Breakpoint 1, are_equal(n, m, clast, cline, alast, aline)
         at `awklib/eg/prog/uniq.awk':63
-| 63          if (fcount == 0 &amp;&amp; charcount == 0)
gawk&gt;
</pre></div>

<p>Now we can look at what&rsquo;s going on inside our program.  First of all,
let&rsquo;s see how we got to where we are.  At the prompt, we type &lsquo;<samp class="samp">bt</samp>&rsquo;
(short for &ldquo;backtrace&rdquo;), and the debugger responds with a
listing of the current stack frames:
</p>
<a class="index-entry-id" id="index-debugger-stack-frames_002c-showing"></a>
<a class="index-entry-id" id="index-debugger-commands-bt-_0028backtrace_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-backtrace"></a>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">bt</kbd>
-| #0  are_equal(n, m, clast, cline, alast, aline)
         at `awklib/eg/prog/uniq.awk':68
-| #1  in main() at `awklib/eg/prog/uniq.awk':88
</pre></div>

<p>This tells us that <code class="code">are_equal()</code> was called by the main program at
line 88 of <samp class="file">uniq.awk</samp>.  (This is not a big surprise, because this
is the only call to <code class="code">are_equal()</code> in the program, but in more complex
programs, knowing who called a function and with what parameters can be
the key to finding the source of the problem.)
</p>
<p>Now that we&rsquo;re in <code class="code">are_equal()</code>, we can start looking at the values
of some variables.  Let&rsquo;s say we type &lsquo;<samp class="samp">p n</samp>&rsquo;
(<code class="code">p</code> is short for &ldquo;print&rdquo;).  We would expect to see the value of
<code class="code">n</code>, a parameter to <code class="code">are_equal()</code>.  Actually, the debugger
gives us:
</p>
<a class="index-entry-id" id="index-debugger-commands-print"></a>
<a class="index-entry-id" id="index-debugger-commands-p-_0028print_0029"></a>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">p n</kbd>
-| n = untyped variable
</pre></div>

<p>In this case, <code class="code">n</code> is an uninitialized local variable, because the
function was called without arguments (see <a class="pxref" href="#Function-Calls">Function Calls</a>).
</p>
<p>A more useful variable to display might be the current record:
</p>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">p $0</kbd>
-| $0 = &quot;gawk is a wonderful program!&quot;
</pre></div>

<p>This might be a bit puzzling at first, as this is the second line of
our test input.  Let&rsquo;s look at <code class="code">NR</code>:
</p>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">p NR</kbd>
-| NR = 2
</pre></div>

<p>So we can see that <code class="code">are_equal()</code> was only called for the second record
of the file.  Of course, this is because our program contains a rule for
&lsquo;<samp class="samp">NR == 1</samp>&rsquo;:
</p>
<div class="example">
<pre class="example-preformatted">NR == 1 {
    last = $0
    next
}
</pre></div>

<p>OK, let&rsquo;s just check that that rule worked correctly:
</p>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">p last</kbd>
-| last = &quot;awk is a wonderful program!&quot;
</pre></div>

<p>Everything we have done so far has verified that the program has worked as
planned, up to and including the call to <code class="code">are_equal()</code>, so the problem must
be inside this function.  To investigate further, we must begin
&ldquo;stepping through&rdquo; the lines of <code class="code">are_equal()</code>.  We start by typing
&lsquo;<samp class="samp">n</samp>&rsquo; (for &ldquo;next&rdquo;):
</p>
<a class="index-entry-id" id="index-debugger-commands-n-_0028next_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-next"></a>
<div class="example">
<div class="group"><pre class="example-preformatted">gawk&gt; <kbd class="kbd">n</kbd>
-| 66          if (fcount &gt; 0) {
</pre></div></div>

<p>This tells us that <code class="command">gawk</code> is now ready to execute line 66, which
decides whether to give the lines the special &ldquo;field-skipping&rdquo; treatment
indicated by the <samp class="option">-1</samp> command-line option.  (Notice that we skipped
from where we were before, at line 63, to here, because the condition
in line 63, &lsquo;<samp class="samp">if (fcount == 0 &amp;&amp; charcount == 0)</samp>&rsquo;, was false.)
</p>
<p>Continuing to step, we now get to the splitting of the current and
last records:
</p>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">n</kbd>
-| 67              n = split(last, alast)
gawk&gt; <kbd class="kbd">n</kbd>
-| 68              m = split($0, aline)
</pre></div>

<p>At this point, we should be curious to see what our records were split
into, so we try to look:
</p>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">p n m alast aline</kbd>
-| n = 5
-| m = untyped variable
-| alast = array, 5 elements
-| aline = untyped variable
</pre></div>

<p>(The <code class="code">p</code> command can take more than one argument, similar to
<code class="command">awk</code>&rsquo;s <code class="code">print</code> statement.)
</p>
<p>This is kind of disappointing, though.  All we found out is that there
are five elements in <code class="code">alast</code>; <code class="code">m</code> and <code class="code">aline</code> don&rsquo;t have
values because we are at line 68 but haven&rsquo;t executed it yet.
This information is useful enough (we now know that
none of the words were accidentally left out), but what if we want to see
inside the array?
</p>
<a class="index-entry-id" id="index-debugger-printing-single-array-elements"></a>
<p>The first choice would be to use subscripts:
</p>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">p alast[0]</kbd>
-| &quot;0&quot; not in array `alast'
</pre></div>

<p>Oops!
</p>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">p alast[1]</kbd>
-| alast[&quot;1&quot;] = &quot;awk&quot;
</pre></div>

<p>This would be kind of slow for a 100-member array, though, so
<code class="command">gawk</code> provides a shortcut (reminiscent of another language
not to be mentioned):
</p>
<a class="index-entry-id" id="index-debugger-printing-all-array-elements"></a>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">p @alast</kbd>
-| alast[&quot;1&quot;] = &quot;awk&quot;
-| alast[&quot;2&quot;] = &quot;is&quot;
-| alast[&quot;3&quot;] = &quot;a&quot;
-| alast[&quot;4&quot;] = &quot;wonderful&quot;
-| alast[&quot;5&quot;] = &quot;program!&quot;
</pre></div>

<p>It looks like we got this far OK.  Let&rsquo;s take another step
or two:
</p>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">n</kbd>
-| 69              clast = join(alast, fcount, n)
gawk&gt; <kbd class="kbd">n</kbd>
-| 70              cline = join(aline, fcount, m)
</pre></div>

<p>Well, here we are at our error (sorry to spoil the suspense).  What we
had in mind was to join the fields starting from the second one to make
the virtual record to compare, and if the first field were numbered zero,
this would work.  Let&rsquo;s look at what we&rsquo;ve got:
</p>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">p cline clast</kbd>
-| cline = &quot;gawk is a wonderful program!&quot;
-| clast = &quot;awk is a wonderful program!&quot;
</pre></div>

<p>Hey, those look pretty familiar!  They&rsquo;re just our original, unaltered
input records.  A little thinking (the human brain is still the best
debugging tool), and we realize that we were off by one!
</p>
<p>We get out of the debugger:
</p>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">q</kbd>
-| The program is running. Exit anyway (y/n)? <kbd class="kbd">y</kbd>
</pre></div>

<p>Then we get into an editor:
</p>
<div class="example">
<pre class="example-preformatted">clast = join(alast, fcount+1, n)
cline = join(aline, fcount+1, m)
</pre></div>

<p>and problem solved!
</p>
<hr>
</div>
</div>
<div class="section-level-extent" id="List-of-Debugger-Commands">
<div class="nav-panel">
<p>
Next: <a href="#Readline-Support" accesskey="n" rel="next">Readline Support</a>, Previous: <a href="#Sample-Debugging-Session" accesskey="p" rel="prev">Sample <code class="command">gawk</code> Debugging Session</a>, Up: <a href="#Debugger" accesskey="u" rel="up">Debugging <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Main-Debugger-Commands"><span>14.3 Main Debugger Commands<a class="copiable-link" href="#Main-Debugger-Commands"> &para;</a></span></h3>

<p>The <code class="command">gawk</code> debugger command set can be divided into the
following categories:
</p>
<ul class="itemize mark-bullet">
<li>Breakpoint control

</li><li>Execution control

</li><li>Viewing and changing data

</li><li>Working with the stack

</li><li>Getting information

</li><li>Miscellaneous
</li></ul>

<a class="index-entry-id" id="index-debugger-repeating-commands"></a>
<p>Each of these are discussed in the following subsections.
In the following descriptions, commands that may be abbreviated
show the abbreviation on a second description line.
A debugger command name may also be truncated if that partial
name is unambiguous. The debugger has the built-in capability to
automatically repeat the previous command just by hitting <kbd class="kbd">Enter</kbd>.
This works for the commands <code class="code">list</code>, <code class="code">next</code>, <code class="code">nexti</code>,
<code class="code">step</code>, <code class="code">stepi</code>, and <code class="code">continue</code> executed without any
argument.
</p>

<ul class="mini-toc">
<li><a href="#Breakpoint-Control" accesskey="1">Control of Breakpoints</a></li>
<li><a href="#Debugger-Execution-Control" accesskey="2">Control of Execution</a></li>
<li><a href="#Viewing-And-Changing-Data" accesskey="3">Viewing and Changing Data</a></li>
<li><a href="#Execution-Stack" accesskey="4">Working with the Stack</a></li>
<li><a href="#Debugger-Info" accesskey="5">Obtaining Information About the Program and the Debugger State</a></li>
<li><a href="#Miscellaneous-Debugger-Commands" accesskey="6">Miscellaneous Commands</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Breakpoint-Control">
<div class="nav-panel">
<p>
Next: <a href="#Debugger-Execution-Control" accesskey="n" rel="next">Control of Execution</a>, Up: <a href="#List-of-Debugger-Commands" accesskey="u" rel="up">Main Debugger Commands</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Control-of-Breakpoints"><span>14.3.1 Control of Breakpoints<a class="copiable-link" href="#Control-of-Breakpoints"> &para;</a></span></h4>

<p>As we saw earlier, the first thing you probably want to do in a debugging
session is to get your breakpoints set up, because your program
will otherwise just run as if it was not under the debugger.  The commands for
controlling breakpoints are:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-debugger-commands-b-_0028break_0029-1"></a>
<a class="index-entry-id" id="index-debugger-commands-break-1"></a>
<a class="index-entry-id" id="index-break-debugger-command"></a>
<a class="index-entry-id" id="index-b-debugger-command-_0028alias-for-break_0029"></a>
<a class="index-entry-id" id="index-set-breakpoint"></a>
<a class="index-entry-id" id="index-breakpoint-setting"></a>
</dd>
<dt><code class="code">break</code> [[<var class="var">filename</var><code class="code">:</code>]<var class="var">n</var> | <var class="var">function</var>] [<code class="code">&quot;<var class="var">expression</var>&quot;</code>]</dt>
<dt><code class="code">b</code> [[<var class="var">filename</var><code class="code">:</code>]<var class="var">n</var> | <var class="var">function</var>] [<code class="code">&quot;<var class="var">expression</var>&quot;</code>]</dt>
<dd><p>Without any argument, set a breakpoint at the next instruction
to be executed in the selected stack frame.
Arguments can be one of the following:
</p>
<dl class="table">
<dt><var class="var">n</var></dt>
<dd><p>Set a breakpoint at line number <var class="var">n</var> in the current source file.
</p>
</dd>
<dt><var class="var">filename</var><code class="code">:</code><var class="var">n</var></dt>
<dd><p>Set a breakpoint at line number <var class="var">n</var> in source file <var class="var">filename</var>.
</p>
</dd>
<dt><var class="var">function</var></dt>
<dd><p>Set a breakpoint at entry to (the first instruction of)
function <var class="var">function</var>.
</p></dd>
</dl>

<p>Each breakpoint is assigned a number that can be used to delete it from
the breakpoint list using the <code class="code">delete</code> command.
</p>
<p>With a breakpoint, you may also supply a condition.  This is an
<code class="command">awk</code> expression (enclosed in double quotes) that the debugger
evaluates whenever the breakpoint is reached. If the condition is true,
then the debugger stops execution and prompts for a command. Otherwise,
it continues executing the program.
</p>
<a class="index-entry-id" id="index-debugger-commands-clear"></a>
<a class="index-entry-id" id="index-clear-debugger-command"></a>
<a class="index-entry-id" id="index-delete-breakpoint-at-location"></a>
<a class="index-entry-id" id="index-breakpoint-at-location_002c-how-to-delete"></a>
</dd>
<dt><code class="code">clear</code> [[<var class="var">filename</var><code class="code">:</code>]<var class="var">n</var> | <var class="var">function</var>]</dt>
<dd><p>Without any argument, delete any breakpoint at the next instruction
to be executed in the selected stack frame. If the program stops at
a breakpoint, this deletes that breakpoint so that the program
does not stop at that location again.  Arguments can be one of the following:
</p>
<dl class="table">
<dt><var class="var">n</var></dt>
<dd><p>Delete breakpoint(s) set at line number <var class="var">n</var> in the current source file.
</p>
</dd>
<dt><var class="var">filename</var><code class="code">:</code><var class="var">n</var></dt>
<dd><p>Delete breakpoint(s) set at line number <var class="var">n</var> in source file <var class="var">filename</var>.
</p>
</dd>
<dt><var class="var">function</var></dt>
<dd><p>Delete breakpoint(s) set at entry to function <var class="var">function</var>.
</p></dd>
</dl>

<a class="index-entry-id" id="index-debugger-commands-condition"></a>
<a class="index-entry-id" id="index-condition-debugger-command"></a>
<a class="index-entry-id" id="index-breakpoint-condition"></a>
</dd>
<dt><code class="code">condition</code> <var class="var">n</var> <code class="code">&quot;<var class="var">expression</var>&quot;</code></dt>
<dd><p>Add a condition to existing breakpoint or watchpoint <var class="var">n</var>. The
condition is an <code class="command">awk</code> expression <em class="emph">enclosed in double quotes</em>
that the debugger evaluates
whenever the breakpoint or watchpoint is reached. If the condition is true, then
the debugger stops execution and prompts for a command. Otherwise,
the debugger continues executing the program. If the condition expression is
not specified, any existing condition is removed (i.e., the breakpoint or
watchpoint is made unconditional).
</p>
<a class="index-entry-id" id="index-debugger-commands-d-_0028delete_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-delete"></a>
<a class="index-entry-id" id="index-delete-debugger-command"></a>
<a class="index-entry-id" id="index-d-debugger-command-_0028alias-for-delete_0029"></a>
<a class="index-entry-id" id="index-delete-breakpoint-by-number"></a>
<a class="index-entry-id" id="index-breakpoint-delete-by-number"></a>
</dd>
<dt><code class="code">delete</code> [<var class="var">n1 n2</var> &hellip;] [<var class="var">n</var>&ndash;<var class="var">m</var>]</dt>
<dt><code class="code">d</code> [<var class="var">n1 n2</var> &hellip;] [<var class="var">n</var>&ndash;<var class="var">m</var>]</dt>
<dd><p>Delete specified breakpoints or a range of breakpoints. Delete
all defined breakpoints if no argument is supplied.
</p>
<a class="index-entry-id" id="index-debugger-commands-disable"></a>
<a class="index-entry-id" id="index-disable-debugger-command"></a>
<a class="index-entry-id" id="index-disable-breakpoint"></a>
<a class="index-entry-id" id="index-breakpoint-how-to-disable-or-enable"></a>
</dd>
<dt><code class="code">disable</code> [<var class="var">n1 n2</var> &hellip; | <var class="var">n</var>&ndash;<var class="var">m</var>]</dt>
<dd><p>Disable specified breakpoints or a range of breakpoints. Without
any argument, disable all breakpoints.
</p>
<a class="index-entry-id" id="index-debugger-commands-e-_0028enable_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-enable"></a>
</dd>
<dt><a class="index-entry-id" id="index-e-debugger-command-_0028alias-for-enable_0029"></a>
<a class="index-entry-id" id="index-enable-breakpoint"></a>
<a id="index-enable-debugger-command"></a><span><code class="code">enable</code> [<code class="code">del</code> | <code class="code">once</code>] [<var class="var">n1 n2</var> &hellip;] [<var class="var">n</var>&ndash;<var class="var">m</var>]<a class="copiable-link" href="#index-enable-debugger-command"> &para;</a></span></dt>
<dt><code class="code">e</code> [<code class="code">del</code> | <code class="code">once</code>] [<var class="var">n1 n2</var> &hellip;] [<var class="var">n</var>&ndash;<var class="var">m</var>]</dt>
<dd><p>Enable specified breakpoints or a range of breakpoints. Without
any argument, enable all breakpoints.
Optionally, you can specify how to enable the breakpoints:
</p>
<dl class="table">
<dt><code class="code">del</code></dt>
<dd><p>Enable the breakpoints temporarily, then delete each one when
the program stops at it.
</p>
</dd>
<dt><code class="code">once</code></dt>
<dd><p>Enable the breakpoints temporarily, then disable each one when
the program stops at it.
</p></dd>
</dl>

<a class="index-entry-id" id="index-debugger-commands-ignore"></a>
</dd>
<dt><a class="index-entry-id" id="index-ignore-breakpoint"></a>
<a id="index-ignore-debugger-command"></a><span><code class="code">ignore</code> <var class="var">n</var> <var class="var">count</var><a class="copiable-link" href="#index-ignore-debugger-command"> &para;</a></span></dt>
<dd><p>Ignore breakpoint number <var class="var">n</var> the next <var class="var">count</var> times it is
hit.
</p>
<a class="index-entry-id" id="index-debugger-commands-t-_0028tbreak_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-tbreak"></a>
</dd>
<dt><a class="index-entry-id" id="index-t-debugger-command-_0028alias-for-tbreak_0029"></a>
<a class="index-entry-id" id="index-temporary-breakpoint"></a>
<a id="index-tbreak-debugger-command"></a><span><code class="code">tbreak</code> [[<var class="var">filename</var><code class="code">:</code>]<var class="var">n</var> | <var class="var">function</var>]<a class="copiable-link" href="#index-tbreak-debugger-command"> &para;</a></span></dt>
<dt><code class="code">t</code> [[<var class="var">filename</var><code class="code">:</code>]<var class="var">n</var> | <var class="var">function</var>]</dt>
<dd><p>Set a temporary breakpoint (enabled for only one stop).
The arguments are the same as for <code class="code">break</code>.
</p></dd>
</dl>

<hr>
</div>
<div class="subsection-level-extent" id="Debugger-Execution-Control">
<div class="nav-panel">
<p>
Next: <a href="#Viewing-And-Changing-Data" accesskey="n" rel="next">Viewing and Changing Data</a>, Previous: <a href="#Breakpoint-Control" accesskey="p" rel="prev">Control of Breakpoints</a>, Up: <a href="#List-of-Debugger-Commands" accesskey="u" rel="up">Main Debugger Commands</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Control-of-Execution"><span>14.3.2 Control of Execution<a class="copiable-link" href="#Control-of-Execution"> &para;</a></span></h4>

<p>Now that your breakpoints are ready, you can start running the program
and observing its behavior.  There are more commands for controlling
execution of the program than we saw in our earlier example:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-debugger-commands-commands"></a>
<a class="index-entry-id" id="index-commands-debugger-command"></a>
<a class="index-entry-id" id="index-debugger-commands-silent"></a>
<a class="index-entry-id" id="index-silent-debugger-command"></a>
<a class="index-entry-id" id="index-debugger-commands-end"></a>
<a class="index-entry-id" id="index-end-debugger-command"></a>
<a class="index-entry-id" id="index-breakpoint-commands-to-execute-at"></a>
</dd>
<dt><a id="index-commands-to-execute-at-breakpoint"></a><span><code class="code">commands</code> [<var class="var">n</var>]<a class="copiable-link" href="#index-commands-to-execute-at-breakpoint"> &para;</a></span></dt>
<dt><code class="code">silent</code></dt>
<dt>&hellip;</dt>
<dt><code class="code">end</code></dt>
<dd><p>Set a list of commands to be executed upon stopping at
a breakpoint or watchpoint. <var class="var">n</var> is the breakpoint or watchpoint number.
Without a number, the last one set is used. The actual commands follow,
starting on the next line, and terminated by the <code class="code">end</code> command.
If the command <code class="code">silent</code> is in the list, the usual messages about
stopping at a breakpoint and the source line are not printed. Any command
in the list that resumes execution (e.g., <code class="code">continue</code>) terminates the list
(an implicit <code class="code">end</code>), and subsequent commands are ignored.
For example:
</p>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">commands</kbd>
&gt; <kbd class="kbd">silent</kbd>
&gt; <kbd class="kbd">printf &quot;A silent breakpoint; i = %d\n&quot;, i</kbd>
&gt; <kbd class="kbd">info locals</kbd>
&gt; <kbd class="kbd">set i = 10</kbd>
&gt; <kbd class="kbd">continue</kbd>
&gt; <kbd class="kbd">end</kbd>
gawk&gt;
</pre></div>

<a class="index-entry-id" id="index-debugger-commands-c-_0028continue_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-continue"></a>
</dd>
<dt><a class="index-entry-id" id="index-continue-debugger-command"></a>
<a id="index-continue-program_002c-in-debugger"></a><span><code class="code">continue</code> [<var class="var">count</var>]<a class="copiable-link" href="#index-continue-program_002c-in-debugger"> &para;</a></span></dt>
<dt><code class="code">c</code> [<var class="var">count</var>]</dt>
<dd><p>Resume program execution. If continued from a breakpoint and <var class="var">count</var> is
specified, ignore the breakpoint at that location the next <var class="var">count</var> times
before stopping.
</p>
<a class="index-entry-id" id="index-debugger-commands-finish"></a>
</dd>
<dt><a id="index-finish-debugger-command"></a><span><code class="code">finish</code><a class="copiable-link" href="#index-finish-debugger-command"> &para;</a></span></dt>
<dd><p>Execute until the selected stack frame returns.
Print the returned value.
</p>
<a class="index-entry-id" id="index-debugger-commands-n-_0028next_0029-1"></a>
<a class="index-entry-id" id="index-debugger-commands-next-1"></a>
</dd>
<dt><a class="index-entry-id" id="index-n-debugger-command-_0028alias-for-next_0029"></a>
<a class="index-entry-id" id="index-single_002dstep-execution_002c-in-the-debugger"></a>
<a id="index-next-debugger-command"></a><span><code class="code">next</code> [<var class="var">count</var>]<a class="copiable-link" href="#index-next-debugger-command"> &para;</a></span></dt>
<dt><code class="code">n</code> [<var class="var">count</var>]</dt>
<dd><p>Continue execution to the next source line, stepping over function calls.
The argument <var class="var">count</var> controls how many times to repeat the action, as
in <code class="code">step</code>.
</p>
<a class="index-entry-id" id="index-debugger-commands-ni-_0028nexti_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-nexti"></a>
</dd>
<dt><a class="index-entry-id" id="index-ni-debugger-command-_0028alias-for-nexti_0029"></a>
<a id="index-nexti-debugger-command"></a><span><code class="code">nexti</code> [<var class="var">count</var>]<a class="copiable-link" href="#index-nexti-debugger-command"> &para;</a></span></dt>
<dt><code class="code">ni</code> [<var class="var">count</var>]</dt>
<dd><p>Execute one (or <var class="var">count</var>) instruction(s), stepping over function calls.
</p>
<a class="index-entry-id" id="index-debugger-commands-return"></a>
</dd>
<dt><a id="index-return-debugger-command"></a><span><code class="code">return</code> [<var class="var">value</var>]<a class="copiable-link" href="#index-return-debugger-command"> &para;</a></span></dt>
<dd><p>Cancel execution of a function call. If <var class="var">value</var> (either a string or a
number) is specified, it is used as the function&rsquo;s return value. If used in a
frame other than the innermost one (the currently executing function; i.e.,
frame number 0), discard all inner frames in addition to the selected one,
and the caller of that frame becomes the innermost frame.
</p>
<a class="index-entry-id" id="index-debugger-commands-r-_0028run_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-run-1"></a>
</dd>
<dt><a class="index-entry-id" id="index-r-debugger-command-_0028alias-for-run_0029"></a>
<a id="index-run-debugger-command"></a><span><code class="code">run</code><a class="copiable-link" href="#index-run-debugger-command"> &para;</a></span></dt>
<dt><code class="code">r</code></dt>
<dd><p>Start/restart execution of the program. When restarting, the debugger
retains the current breakpoints, watchpoints, command history,
automatic display variables, and debugger options.
</p>
<a class="index-entry-id" id="index-debugger-commands-s-_0028step_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-step"></a>
</dd>
<dt><a class="index-entry-id" id="index-s-debugger-command-_0028alias-for-step_0029"></a>
<a id="index-step-debugger-command"></a><span><code class="code">step</code> [<var class="var">count</var>]<a class="copiable-link" href="#index-step-debugger-command"> &para;</a></span></dt>
<dt><code class="code">s</code> [<var class="var">count</var>]</dt>
<dd><p>Continue execution until control reaches a different source line in the
current stack frame, stepping inside any function called within
the line.  If the argument <var class="var">count</var> is supplied, steps that many times before
stopping, unless it encounters a breakpoint or watchpoint.
</p>
<a class="index-entry-id" id="index-debugger-commands-si-_0028stepi_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-stepi"></a>
</dd>
<dt><a class="index-entry-id" id="index-si-debugger-command-_0028alias-for-stepi_0029"></a>
<a id="index-stepi-debugger-command"></a><span><code class="code">stepi</code> [<var class="var">count</var>]<a class="copiable-link" href="#index-stepi-debugger-command"> &para;</a></span></dt>
<dt><code class="code">si</code> [<var class="var">count</var>]</dt>
<dd><p>Execute one (or <var class="var">count</var>) instruction(s), stepping inside function calls.
(For illustration of what is meant by an &ldquo;instruction&rdquo; in <code class="command">gawk</code>,
see the output shown under <code class="code">dump</code> in <a class="ref" href="#Miscellaneous-Debugger-Commands">Miscellaneous Commands</a>.)
</p>
<a class="index-entry-id" id="index-debugger-commands-u-_0028until_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-until"></a>
</dd>
<dt><a class="index-entry-id" id="index-u-debugger-command-_0028alias-for-until_0029"></a>
<a id="index-until-debugger-command"></a><span><code class="code">until</code> [[<var class="var">filename</var><code class="code">:</code>]<var class="var">n</var> | <var class="var">function</var>]<a class="copiable-link" href="#index-until-debugger-command"> &para;</a></span></dt>
<dt><code class="code">u</code> [[<var class="var">filename</var><code class="code">:</code>]<var class="var">n</var> | <var class="var">function</var>]</dt>
<dd><p>Without any argument, continue execution until a line past the current
line in the current stack frame is reached. With an argument,
continue execution until the specified location is reached, or the current
stack frame returns.
</p></dd>
</dl>

<hr>
</div>
<div class="subsection-level-extent" id="Viewing-And-Changing-Data">
<div class="nav-panel">
<p>
Next: <a href="#Execution-Stack" accesskey="n" rel="next">Working with the Stack</a>, Previous: <a href="#Debugger-Execution-Control" accesskey="p" rel="prev">Control of Execution</a>, Up: <a href="#List-of-Debugger-Commands" accesskey="u" rel="up">Main Debugger Commands</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Viewing-and-Changing-Data"><span>14.3.3 Viewing and Changing Data<a class="copiable-link" href="#Viewing-and-Changing-Data"> &para;</a></span></h4>

<p>The commands for viewing and changing variables inside of <code class="command">gawk</code> are:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-debugger-commands-display"></a>
</dd>
<dt><a id="index-display-debugger-command"></a><span><code class="code">display</code> [<var class="var">var</var> | <code class="code">$</code><var class="var">n</var>]<a class="copiable-link" href="#index-display-debugger-command"> &para;</a></span></dt>
<dd><p>Add variable <var class="var">var</var> (or field <code class="code">$<var class="var">n</var></code>) to the display list.
The value of the variable or field is displayed each time the program stops.
Each variable added to the list is identified by a unique number:
</p>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">display x</kbd>
-| 10: x = 1
</pre></div>

<p>This displays the assigned item number, the variable name, and its current value.
If the display variable refers to a function parameter, it is silently
deleted from the list as soon as the execution reaches a context where
no such variable of the given name exists.
Without argument, <code class="code">display</code> displays the current values of
items on the list.
</p>
<a class="index-entry-id" id="index-debugger-commands-eval"></a>
</dd>
<dt><a class="index-entry-id" id="index-evaluate-expressions_002c-in-debugger"></a>
<a id="index-eval-debugger-command"></a><span><code class="code">eval &quot;<var class="var">awk statements</var>&quot;</code><a class="copiable-link" href="#index-eval-debugger-command"> &para;</a></span></dt>
<dd><p>Evaluate <var class="var">awk statements</var> in the context of the running program.
You can do anything that an <code class="command">awk</code> program would do: assign
values to variables, call functions, and so on.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> You cannot use <code class="code">eval</code> to execute a statement containing
any of the following:
<code class="code">exit</code>,
<code class="code">getline</code>,
<code class="code">next</code>,
<code class="code">nextfile</code>,
or
<code class="code">return</code>.
</p></blockquote>

</dd>
<dt><code class="code">eval</code> <var class="var">param</var>, &hellip;</dt>
<dt><var class="var">awk statements</var></dt>
<dt><code class="code">end</code></dt>
<dd><p>This form of <code class="code">eval</code> is similar, but it allows you to define
&ldquo;local variables&rdquo; that exist in the context of the
<var class="var">awk statements</var>, instead of using variables or function
parameters defined by the program.
</p>
<a class="index-entry-id" id="index-debugger-commands-p-_0028print_0029-1"></a>
<a class="index-entry-id" id="index-debugger-commands-print-1"></a>
</dd>
<dt><a class="index-entry-id" id="index-p-debugger-command-_0028alias-for-print_0029"></a>
<a class="index-entry-id" id="index-print-variables_002c-in-debugger"></a>
<a id="index-print-debugger-command"></a><span><code class="code">print</code> <var class="var">var1</var>[<code class="code">,</code> <var class="var">var2</var> &hellip;]<a class="copiable-link" href="#index-print-debugger-command"> &para;</a></span></dt>
<dt><code class="code">p</code> <var class="var">var1</var>[<code class="code">,</code> <var class="var">var2</var> &hellip;]</dt>
<dd><p>Print the value of a <code class="command">gawk</code> variable or field.
Fields must be referenced by constants:
</p>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">print $3</kbd>
</pre></div>

<p>This prints the third field in the input record (if the specified field does not
exist, it prints &lsquo;<samp class="samp">Null field</samp>&rsquo;). A variable can be an array element, with
the subscripts being constant string values. To print the contents of an array,
prefix the name of the array with the &lsquo;<samp class="samp">@</samp>&rsquo; symbol:
</p>
<div class="example">
<pre class="example-preformatted">gawk&gt; <kbd class="kbd">print @a</kbd>
</pre></div>

<p>This prints the indices and the corresponding values for all elements in
the array <code class="code">a</code>.
</p>
<a class="index-entry-id" id="index-debugger-commands-printf"></a>
</dd>
<dt><a id="index-printf-debugger-command"></a><span><code class="code">printf</code> <var class="var">format</var> [<code class="code">,</code> <var class="var">arg</var> &hellip;]<a class="copiable-link" href="#index-printf-debugger-command"> &para;</a></span></dt>
<dd><p>Print formatted text. The <var class="var">format</var> may include escape sequences,
such as &lsquo;<samp class="samp">\n</samp>&rsquo;
(see <a class="pxref" href="#Escape-Sequences">Escape Sequences</a>).
No newline is printed unless one is specified.
</p>
<a class="index-entry-id" id="index-debugger-commands-set"></a>
</dd>
<dt><a class="index-entry-id" id="index-assign-values-to-variables_002c-in-debugger"></a>
<a id="index-set-debugger-command"></a><span><code class="code">set</code> <var class="var">var</var><code class="code">=</code><var class="var">value</var><a class="copiable-link" href="#index-set-debugger-command"> &para;</a></span></dt>
<dd><p>Assign a constant (number or string) value to an <code class="command">awk</code> variable
or field.
String values must be enclosed between double quotes (<code class="code">&quot;</code>&hellip;<code class="code">&quot;</code>).
</p>
<p>You can also set special <code class="command">awk</code> variables, such as <code class="code">FS</code>,
<code class="code">NF</code>, <code class="code">NR</code>, and so on.
</p>
<a class="index-entry-id" id="index-debugger-commands-w-_0028watch_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-watch"></a>
</dd>
<dt><a class="index-entry-id" id="index-w-debugger-command-_0028alias-for-watch_0029"></a>
<a class="index-entry-id" id="index-set-watchpoint"></a>
<a id="index-watch-debugger-command"></a><span><code class="code">watch</code> <var class="var">var</var> | <code class="code">$</code><var class="var">n</var> [<code class="code">&quot;<var class="var">expression</var>&quot;</code>]<a class="copiable-link" href="#index-watch-debugger-command"> &para;</a></span></dt>
<dt><code class="code">w</code> <var class="var">var</var> | <code class="code">$</code><var class="var">n</var> [<code class="code">&quot;<var class="var">expression</var>&quot;</code>]</dt>
<dd><p>Add variable <var class="var">var</var> (or field <code class="code">$<var class="var">n</var></code>) to the watch list.
The debugger then stops whenever
the value of the variable or field changes. Each watched item is assigned a
number that can be used to delete it from the watch list using the
<code class="code">unwatch</code> command.
</p>
<p>With a watchpoint, you may also supply a condition.  This is an
<code class="command">awk</code> expression (enclosed in double quotes) that the debugger
evaluates whenever the watchpoint is reached. If the condition is true,
then the debugger stops execution and prompts for a command. Otherwise,
<code class="command">gawk</code> continues executing the program.
</p>
<a class="index-entry-id" id="index-debugger-commands-undisplay"></a>
</dd>
<dt><a class="index-entry-id" id="index-stop-automatic-display_002c-in-debugger"></a>
<a id="index-undisplay-debugger-command"></a><span><code class="code">undisplay</code> [<var class="var">n</var>]<a class="copiable-link" href="#index-undisplay-debugger-command"> &para;</a></span></dt>
<dd><p>Remove item number <var class="var">n</var> (or all items, if no argument) from the
automatic display list.
</p>
<a class="index-entry-id" id="index-debugger-commands-unwatch"></a>
</dd>
<dt><a class="index-entry-id" id="index-delete-watchpoint"></a>
<a id="index-unwatch-debugger-command"></a><span><code class="code">unwatch</code> [<var class="var">n</var>]<a class="copiable-link" href="#index-unwatch-debugger-command"> &para;</a></span></dt>
<dd><p>Remove item number <var class="var">n</var> (or all items, if no argument) from the
watch list.
</p>
</dd>
</dl>

<hr>
</div>
<div class="subsection-level-extent" id="Execution-Stack">
<div class="nav-panel">
<p>
Next: <a href="#Debugger-Info" accesskey="n" rel="next">Obtaining Information About the Program and the Debugger State</a>, Previous: <a href="#Viewing-And-Changing-Data" accesskey="p" rel="prev">Viewing and Changing Data</a>, Up: <a href="#List-of-Debugger-Commands" accesskey="u" rel="up">Main Debugger Commands</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Working-with-the-Stack"><span>14.3.4 Working with the Stack<a class="copiable-link" href="#Working-with-the-Stack"> &para;</a></span></h4>

<p>Whenever you run a program that contains any function calls,
<code class="command">gawk</code> maintains a stack of all of the function calls leading up
to where the program is right now.  You can see how you got to where you are,
and also move around in the stack to see what the state of things was in the
functions that called the one you are in.  The commands for doing this are:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-debugger-commands-bt-_0028backtrace_0029-1"></a>
<a class="index-entry-id" id="index-debugger-commands-backtrace-1"></a>
<a class="index-entry-id" id="index-debugger-commands-where-_0028backtrace_0029"></a>
<a class="index-entry-id" id="index-backtrace-debugger-command"></a>
<a class="index-entry-id" id="index-bt-debugger-command-_0028alias-for-backtrace_0029"></a>
<a class="index-entry-id" id="index-where-debugger-command-_0028alias-for-backtrace_0029"></a>
<a class="index-entry-id" id="index-call-stack-display-in-debugger"></a>
</dd>
<dt><a id="index-traceback_002c-display-in-debugger"></a><span><code class="code">backtrace</code> [<var class="var">count</var>]<a class="copiable-link" href="#index-traceback_002c-display-in-debugger"> &para;</a></span></dt>
<dt><code class="code">bt</code> [<var class="var">count</var>]</dt>
<dt><code class="code">where</code> [<var class="var">count</var>]</dt>
<dd><p>Print a backtrace of all function calls (stack frames), or innermost <var class="var">count</var>
frames if <var class="var">count</var> &gt; 0. Print the outermost <var class="var">count</var> frames if
<var class="var">count</var> &lt; 0.  The backtrace displays the name and arguments to each
function, the source file name, and the line number.
The alias <code class="code">where</code> for <code class="code">backtrace</code> is provided for longtime
GDB users who may be used to that command.
</p>
<a class="index-entry-id" id="index-debugger-commands-down"></a>
</dd>
<dt><a id="index-down-debugger-command"></a><span><code class="code">down</code> [<var class="var">count</var>]<a class="copiable-link" href="#index-down-debugger-command"> &para;</a></span></dt>
<dd><p>Move <var class="var">count</var> (default 1) frames down the stack toward the innermost frame.
Then select and print the frame.
</p>
<a class="index-entry-id" id="index-debugger-commands-f-_0028frame_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-frame"></a>
</dd>
<dt><a class="index-entry-id" id="index-f-debugger-command-_0028alias-for-frame_0029"></a>
<a id="index-frame-debugger-command"></a><span><code class="code">frame</code> [<var class="var">n</var>]<a class="copiable-link" href="#index-frame-debugger-command"> &para;</a></span></dt>
<dt><code class="code">f</code> [<var class="var">n</var>]</dt>
<dd><p>Select and print stack frame <var class="var">n</var>.  Frame 0 is the currently executing,
or <em class="dfn">innermost</em>, frame (function call); frame 1 is the frame that
called the innermost one. The highest-numbered frame is the one for the
main program.  The printed information consists of the frame number,
function and argument names, source file, and the source line.
</p>
<a class="index-entry-id" id="index-debugger-commands-up"></a>
</dd>
<dt><a id="index-up-debugger-command"></a><span><code class="code">up</code> [<var class="var">count</var>]<a class="copiable-link" href="#index-up-debugger-command"> &para;</a></span></dt>
<dd><p>Move <var class="var">count</var> (default 1) frames up the stack toward the outermost frame.
Then select and print the frame.
</p></dd>
</dl>

<hr>
</div>
<div class="subsection-level-extent" id="Debugger-Info">
<div class="nav-panel">
<p>
Next: <a href="#Miscellaneous-Debugger-Commands" accesskey="n" rel="next">Miscellaneous Commands</a>, Previous: <a href="#Execution-Stack" accesskey="p" rel="prev">Working with the Stack</a>, Up: <a href="#List-of-Debugger-Commands" accesskey="u" rel="up">Main Debugger Commands</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Obtaining-Information-About-the-Program-and-the-Debugger-State"><span>14.3.5 Obtaining Information About the Program and the Debugger State<a class="copiable-link" href="#Obtaining-Information-About-the-Program-and-the-Debugger-State"> &para;</a></span></h4>

<p>Besides looking at the values of variables, there is often a need to get
other sorts of information about the state of your program and of the
debugging environment itself.  The <code class="command">gawk</code> debugger has one command that
provides this information, appropriately called <code class="code">info</code>.  <code class="code">info</code>
is used with one of a number of arguments that tell it exactly what
you want to know:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-debugger-commands-i-_0028info_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-info"></a>
</dd>
<dt><a class="index-entry-id" id="index-i-debugger-command-_0028alias-for-info_0029"></a>
<a id="index-info-debugger-command"></a><span><code class="code">info</code> <var class="var">what</var><a class="copiable-link" href="#index-info-debugger-command"> &para;</a></span></dt>
<dt><code class="code">i</code> <var class="var">what</var></dt>
<dd><p>The value for <var class="var">what</var> should be one of the following:
</p>
<dl class="table">
<dt><a id="index-show-in-debugger-function-arguments"></a><span><code class="code">args</code><a class="copiable-link" href="#index-show-in-debugger-function-arguments"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-function-arguments_002c-show-in-debugger"></a>
<p>List arguments of the selected frame.
</p>
</dd>
<dt><a id="index-show-in-debugger-breakpoints"></a><span><code class="code">break</code><a class="copiable-link" href="#index-show-in-debugger-breakpoints"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-breakpoint-show-all-in-debugger"></a>
<p>List all currently set breakpoints.
</p>
</dd>
<dt><a id="index-automatic-displays_002c-in-debugger"></a><span><code class="code">display</code><a class="copiable-link" href="#index-automatic-displays_002c-in-debugger"> &para;</a></span></dt>
<dd><p>List all items in the automatic display list.
</p>
</dd>
<dt><a id="index-describe-call-stack-frame_002c-in-debugger"></a><span><code class="code">frame</code><a class="copiable-link" href="#index-describe-call-stack-frame_002c-in-debugger"> &para;</a></span></dt>
<dd><p>Give a description of the selected stack frame.
</p>
</dd>
<dt><a class="index-entry-id" id="index-function-definitions_002c-list-in-debugger"></a>
<a id="index-list-function-definitions_002c-in-debugger"></a><span><code class="code">functions</code><a class="copiable-link" href="#index-list-function-definitions_002c-in-debugger"> &para;</a></span></dt>
<dd><p>List all function definitions including source file names and
line numbers.
</p>
</dd>
<dt><a id="index-show-in-debugger-local-variables"></a><span><code class="code">locals</code><a class="copiable-link" href="#index-show-in-debugger-local-variables"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-local-variables-show-in-debugger"></a>
<p>List local variables of the selected frame.
</p>
</dd>
<dt><a id="index-show-in-debugger-name-of-current-source-file"></a><span><code class="code">source</code><a class="copiable-link" href="#index-show-in-debugger-name-of-current-source-file"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-current-source-file_002c-show-in-debugger"></a>
<a class="index-entry-id" id="index-source-file_002c-show-in-debugger"></a>
<p>Print the name of the current source file. Each time the program stops, the
current source file is the file containing the current instruction.
When the debugger first starts, the current source file is the first file
included via the <samp class="option">-f</samp> option. The
&lsquo;<samp class="samp">list <var class="var">filename</var>:<var class="var">lineno</var></samp>&rsquo; command can
be used at any time to change the current source.
</p>
</dd>
<dt><a id="index-show-in-debugger-all-source-files"></a><span><code class="code">sources</code><a class="copiable-link" href="#index-show-in-debugger-all-source-files"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-all-source-files_002c-show-in-debugger"></a>
<p>List all program sources.
</p>
</dd>
<dt><a class="index-entry-id" id="index-global-variables_002c-show-in-debugger"></a>
<a id="index-list-all-global-variables_002c-in-debugger"></a><span><code class="code">variables</code><a class="copiable-link" href="#index-list-all-global-variables_002c-in-debugger"> &para;</a></span></dt>
<dd><p>List all global variables.
</p>
</dd>
<dt><a id="index-show-in-debugger-watchpoints"></a><span><code class="code">watch</code><a class="copiable-link" href="#index-show-in-debugger-watchpoints"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-watchpoints_002c-show-in-debugger"></a>
<p>List all items in the watch list.
</p></dd>
</dl>
</dd>
</dl>

<p>Additional commands give you control over the debugger, the ability to
save the debugger&rsquo;s state, and the ability to run debugger commands
from a file.  The commands are:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-debugger-commands-o-_0028option_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-option"></a>
<a class="index-entry-id" id="index-option-debugger-command"></a>
<a class="index-entry-id" id="index-o-debugger-command-_0028alias-for-option_0029"></a>
<a class="index-entry-id" id="index-display-debugger-options"></a>
<a class="index-entry-id" id="index-debugger-options"></a>
</dd>
<dt><code class="code">option</code> [<var class="var">name</var>[<code class="code">=</code><var class="var">value</var>]]</dt>
<dt><code class="code">o</code> [<var class="var">name</var>[<code class="code">=</code><var class="var">value</var>]]</dt>
<dd><p>Without an argument, display the available debugger options
and their current values. &lsquo;<samp class="samp">option <var class="var">name</var></samp>&rsquo; shows the current
value of the named option. &lsquo;<samp class="samp">option <var class="var">name</var>=<var class="var">value</var></samp>&rsquo; assigns
a new value to the named option.
The available options are:
</p>
<dl class="table">
<dt><a id="index-debugger-history-size"></a><span><code class="code">history_size</code><a class="copiable-link" href="#index-debugger-history-size"> &para;</a></span></dt>
<dd><p>Set the maximum number of lines to keep in the history file
<samp class="file">./.gawk_history</samp>.  The default is 100.
</p>
</dd>
<dt><a id="index-debugger-default-list-amount"></a><span><code class="code">listsize</code><a class="copiable-link" href="#index-debugger-default-list-amount"> &para;</a></span></dt>
<dd><p>Specify the number of lines that <code class="code">list</code> prints. The default is 15.
</p>
</dd>
<dt><a id="index-redirect-gawk-output_002c-in-debugger"></a><span><code class="code">outfile</code><a class="copiable-link" href="#index-redirect-gawk-output_002c-in-debugger"> &para;</a></span></dt>
<dd><p>Send <code class="command">gawk</code> output to a file; debugger output still goes
to standard output. An empty string (<code class="code">&quot;&quot;</code>) resets output to
standard output.
</p>
</dd>
<dt><a id="index-debugger-prompt-1"></a><span><code class="code">prompt</code><a class="copiable-link" href="#index-debugger-prompt-1"> &para;</a></span></dt>
<dd><p>Change the debugger prompt. The default is &lsquo;<samp class="samp">gawk&gt;&nbsp;<!-- /@w --></samp>&rsquo;.
</p>
</dd>
<dt><a id="index-debugger-history-file"></a><span><code class="code">save_history</code> [<code class="code">on</code> | <code class="code">off</code>]<a class="copiable-link" href="#index-debugger-history-file"> &para;</a></span></dt>
<dd><p>Save command history to file <samp class="file">./.gawk_history</samp>.
The default is <code class="code">on</code>.
</p>
</dd>
<dt><a id="index-save-debugger-options"></a><span><code class="code">save_options</code> [<code class="code">on</code> | <code class="code">off</code>]<a class="copiable-link" href="#index-save-debugger-options"> &para;</a></span></dt>
<dd><p>Save current options to file <samp class="file">./.gawkrc</samp> upon exit.
The default is <code class="code">on</code>.
Options are read back into the next session upon startup.
</p>
</dd>
<dt><a class="index-entry-id" id="index-debugger-instruction-tracing"></a>
<a id="index-instruction-tracing_002c-in-debugger"></a><span><code class="code">trace</code> [<code class="code">on</code> | <code class="code">off</code>]<a class="copiable-link" href="#index-instruction-tracing_002c-in-debugger"> &para;</a></span></dt>
<dd><p>Turn instruction tracing on or off. The default is <code class="code">off</code>.
</p></dd>
</dl>

<a class="index-entry-id" id="index-debugger-save-commands-to-a-file"></a>
</dd>
<dt><code class="code">save</code> <var class="var">filename</var></dt>
<dd><p>Save the commands from the current session to the given file name,
so that they can be replayed using the <code class="command">source</code> command.
</p>
</dd>
<dt><a id="index-debugger-read-commands-from-a-file"></a><span><code class="code">source</code> <var class="var">filename</var><a class="copiable-link" href="#index-debugger-read-commands-from-a-file"> &para;</a></span></dt>
<dd><p>Run command(s) from a file; an error in any command does not
terminate execution of subsequent commands. Comments (lines starting
with &lsquo;<samp class="samp">#</samp>&rsquo;) are allowed in a command file.
Empty lines are ignored; they do <em class="emph">not</em>
repeat the last command.
You can&rsquo;t restart the program by having more than one <code class="code">run</code>
command in the file. Also, the list of commands may include additional
<code class="code">source</code> commands; however, the <code class="command">gawk</code> debugger will not source the
same file more than once in order to avoid infinite recursion.
</p>
<p>In addition to, or instead of, the <code class="code">source</code> command, you can use
the <samp class="option">-D <var class="var">file</var></samp> or <samp class="option">--debug=<var class="var">file</var></samp> command-line
options to execute commands from a file non-interactively
(see <a class="pxref" href="#Options">Command-Line Options</a>).
</p></dd>
</dl>

<hr>
</div>
<div class="subsection-level-extent" id="Miscellaneous-Debugger-Commands">
<div class="nav-panel">
<p>
Previous: <a href="#Debugger-Info" accesskey="p" rel="prev">Obtaining Information About the Program and the Debugger State</a>, Up: <a href="#List-of-Debugger-Commands" accesskey="u" rel="up">Main Debugger Commands</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Miscellaneous-Commands"><span>14.3.6 Miscellaneous Commands<a class="copiable-link" href="#Miscellaneous-Commands"> &para;</a></span></h4>

<p>There are a few more commands that do not fit into the
previous categories, as follows:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-debugger-commands-dump"></a>
</dd>
<dt><a id="index-dump-debugger-command"></a><span><code class="code">dump</code> [<var class="var">filename</var>]<a class="copiable-link" href="#index-dump-debugger-command"> &para;</a></span></dt>
<dd><p>Dump byte code of the program to standard output or to the file
named in <var class="var">filename</var>.  This prints a representation of the internal
instructions that <code class="command">gawk</code> executes to implement the <code class="command">awk</code>
commands in a program.  This can be very enlightening, as the following
partial dump of Davide Brini&rsquo;s obfuscated code
(see <a class="pxref" href="#Signature-Program">And Now for Something Completely Different</a>) demonstrates:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">gawk&gt; <kbd class="kbd">dump</kbd>
-|        # BEGIN
-|
-| [  1:0xfcd340] Op_rule           : [in_rule = BEGIN] [source_file = brini.awk]
</pre></div><pre class="example-preformatted">-| [  1:0xfcc240] Op_push_i         : &quot;~&quot; [MALLOC|STRING|STRCUR]
-| [  1:0xfcc2a0] Op_push_i         : &quot;~&quot; [MALLOC|STRING|STRCUR]
-| [  1:0xfcc280] Op_match          :
-| [  1:0xfcc1e0] Op_store_var      : O
-| [  1:0xfcc2e0] Op_push_i         : &quot;==&quot; [MALLOC|STRING|STRCUR]
-| [  1:0xfcc340] Op_push_i         : &quot;==&quot; [MALLOC|STRING|STRCUR]
-| [  1:0xfcc320] Op_equal          :
-| [  1:0xfcc200] Op_store_var      : o
-| [  1:0xfcc380] Op_push           : o
-| [  1:0xfcc360] Op_plus_i         : 0 [MALLOC|NUMCUR|NUMBER]
-| [  1:0xfcc220] Op_push_lhs       : o [do_reference = true]
-| [  1:0xfcc300] Op_assign_plus    :
-| [   :0xfcc2c0] Op_pop            :
-| [  1:0xfcc400] Op_push           : O
-| [  1:0xfcc420] Op_push_i         : &quot;&quot; [MALLOC|STRING|STRCUR]
-| [   :0xfcc4a0] Op_no_op          :
-| [  1:0xfcc480] Op_push           : O
-| [   :0xfcc4c0] Op_concat         : [expr_count = 3] [concat_flag = 0]
-| [  1:0xfcc3c0] Op_store_var      : x
-| [  1:0xfcc440] Op_push_lhs       : X [do_reference = true]
-| [  1:0xfcc3a0] Op_postincrement  :
-| [  1:0xfcc4e0] Op_push           : x
-| [  1:0xfcc540] Op_push           : o
-| [  1:0xfcc500] Op_plus           :
-| [  1:0xfcc580] Op_push           : o
-| [  1:0xfcc560] Op_plus           :
-| [  1:0xfcc460] Op_leq            :
-| [   :0xfcc5c0] Op_jmp_false      : [target_jmp = 0xfcc5e0]
-| [  1:0xfcc600] Op_push_i         : &quot;%c&quot; [MALLOC|STRING|STRCUR]
-| [   :0xfcc660] Op_no_op          :
-| [  1:0xfcc520] Op_assign_concat  : c
-| [   :0xfcc620] Op_jmp            : [target_jmp = 0xfcc440]
...
-| [     2:0xfcc5a0] Op_K_printf         : [expr_count = 17] [redir_type = &quot;&quot;]
-| [      :0xfcc140] Op_no_op            :
-| [      :0xfcc1c0] Op_atexit           :
-| [      :0xfcc640] Op_stop             :
-| [      :0xfcc180] Op_no_op            :
-| [      :0xfcd150] Op_after_beginfile  :
</pre><div class="group"><pre class="example-preformatted">-| [      :0xfcc160] Op_no_op            :
-| [      :0xfcc1a0] Op_after_endfile    :
gawk&gt;
</pre></div></div>

</dd>
<dt><a class="index-entry-id" id="index-exit-the-debugger"></a>
<a id="index-exit-debugger-command"></a><span><code class="code">exit</code><a class="copiable-link" href="#index-exit-debugger-command"> &para;</a></span></dt>
<dd><p>Exit the debugger.
See the entry for &lsquo;<samp class="samp">quit</samp>&rsquo;, later in this list.
</p>
<a class="index-entry-id" id="index-debugger-commands-h-_0028help_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-help"></a>
</dd>
<dt><a class="index-entry-id" id="index-h-debugger-command-_0028alias-for-help_0029"></a>
<a id="index-help-debugger-command"></a><span><code class="code">help</code><a class="copiable-link" href="#index-help-debugger-command"> &para;</a></span></dt>
<dt><code class="code">h</code></dt>
<dd><p>Print a list of all of the <code class="command">gawk</code> debugger commands with a short
summary of their usage.  &lsquo;<samp class="samp">help <var class="var">command</var></samp>&rsquo; prints the information
about the command <var class="var">command</var>.
</p>
<a class="index-entry-id" id="index-debugger-commands-l-_0028list_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-list"></a>
</dd>
<dt><a class="index-entry-id" id="index-l-debugger-command-_0028alias-for-list_0029"></a>
<a id="index-list-debugger-command"></a><span><code class="code">list</code> [<code class="code">-</code> | <code class="code">+</code> | <var class="var">n</var> | <var class="var">filename</var><code class="code">:</code><var class="var">n</var> | <var class="var">n</var>&ndash;<var class="var">m</var> | <var class="var">function</var>]<a class="copiable-link" href="#index-list-debugger-command"> &para;</a></span></dt>
<dt><code class="code">l</code> [<code class="code">-</code> | <code class="code">+</code> | <var class="var">n</var> | <var class="var">filename</var><code class="code">:</code><var class="var">n</var> | <var class="var">n</var>&ndash;<var class="var">m</var> | <var class="var">function</var>]</dt>
<dd><p>Print the specified lines (default 15) from the current source file
or the file named <var class="var">filename</var>. The possible arguments to <code class="code">list</code>
are as follows:
</p>
<dl class="table">
<dt><code class="code">-</code> (Minus)</dt>
<dd><p>Print lines before the lines last printed.
</p>
</dd>
<dt><code class="code">+</code></dt>
<dd><p>Print lines after the lines last printed.
<code class="code">list</code> without any argument does the same thing.
</p>
</dd>
<dt><var class="var">n</var></dt>
<dd><p>Print lines centered around line number <var class="var">n</var>.
</p>
</dd>
<dt><var class="var">n</var>&ndash;<var class="var">m</var></dt>
<dd><p>Print lines from <var class="var">n</var> to <var class="var">m</var>.
</p>
</dd>
<dt><var class="var">filename</var><code class="code">:</code><var class="var">n</var></dt>
<dd><p>Print lines centered around line number <var class="var">n</var> in
source file <var class="var">filename</var>. This command may change the current source file.
</p>
</dd>
<dt><var class="var">function</var></dt>
<dd><p>Print lines centered around the beginning of the
function <var class="var">function</var>. This command may change the current source file.
</p></dd>
</dl>

<a class="index-entry-id" id="index-debugger-commands-q-_0028quit_0029"></a>
<a class="index-entry-id" id="index-debugger-commands-quit"></a>
</dd>
<dt><a class="index-entry-id" id="index-q-debugger-command-_0028alias-for-quit_0029"></a>
<a class="index-entry-id" id="index-exit-the-debugger-1"></a>
<a id="index-quit-debugger-command"></a><span><code class="code">quit</code><a class="copiable-link" href="#index-quit-debugger-command"> &para;</a></span></dt>
<dt><code class="code">q</code></dt>
<dd><p>Exit the debugger.  Debugging is great fun, but sometimes we all have
to tend to other obligations in life, and sometimes we find the bug
and are free to go on to the next one!  As we saw earlier, if you are
running a program, the debugger warns you when you type
&lsquo;<samp class="samp">q</samp>&rsquo; or &lsquo;<samp class="samp">quit</samp>&rsquo;, to make sure you really want to quit.
</p>
<a class="index-entry-id" id="index-debugger-commands-trace"></a>
</dd>
<dt><a id="index-trace-debugger-command"></a><span><code class="code">trace</code> [<code class="code">on</code> | <code class="code">off</code>]<a class="copiable-link" href="#index-trace-debugger-command"> &para;</a></span></dt>
<dd><p>Turn on or off continuous printing of the instructions that are about to
be executed, along with the <code class="command">awk</code> lines they
implement.  The default is <code class="code">off</code>.
</p>
<p>It is to be hoped that most of the &ldquo;opcodes&rdquo; in these instructions are
fairly self-explanatory, and using <code class="code">stepi</code> and <code class="code">nexti</code> while
<code class="code">trace</code> is on will make them into familiar friends.
</p>
</dd>
</dl>

<hr>
</div>
</div>
<div class="section-level-extent" id="Readline-Support">
<div class="nav-panel">
<p>
Next: <a href="#Limitations" accesskey="n" rel="next">Limitations</a>, Previous: <a href="#List-of-Debugger-Commands" accesskey="p" rel="prev">Main Debugger Commands</a>, Up: <a href="#Debugger" accesskey="u" rel="up">Debugging <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Readline-Support-1"><span>14.4 Readline Support<a class="copiable-link" href="#Readline-Support-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-command-completion_002c-in-debugger"></a>
<a class="index-entry-id" id="index-debugger-command-completion"></a>
<a class="index-entry-id" id="index-history-expansion_002c-in-debugger"></a>
<a class="index-entry-id" id="index-debugger-history-expansion"></a>

<p>If <code class="command">gawk</code> is compiled with
<a class="uref" href="http://cnswww.cns.cwru.edu/php/chet/readline/readline.html">the GNU Readline library</a>, you can take advantage of that library&rsquo;s
command completion and history expansion features. The following types
of completion are available:
</p>
<dl class="table">
<dt>Command completion</dt>
<dd><p>Command names.
</p>
</dd>
<dt>Source file name completion</dt>
<dd><p>Source file names. Relevant commands are
<code class="code">break</code>,
<code class="code">clear</code>,
<code class="code">list</code>,
<code class="code">tbreak</code>,
and
<code class="code">until</code>.
</p>
</dd>
<dt>Argument completion</dt>
<dd><p>Non-numeric arguments to a command.
Relevant commands are <code class="code">enable</code> and <code class="code">info</code>.
</p>
</dd>
<dt>Variable name completion</dt>
<dd><p>Global variable names, and function arguments in the current context
if the program is running. Relevant commands are
<code class="code">display</code>,
<code class="code">print</code>,
<code class="code">set</code>,
and
<code class="code">watch</code>.
</p>
</dd>
</dl>

<hr>
</div>
<div class="section-level-extent" id="Limitations">
<div class="nav-panel">
<p>
Next: <a href="#Debugging-Summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Readline-Support" accesskey="p" rel="prev">Readline Support</a>, Up: <a href="#Debugger" accesskey="u" rel="up">Debugging <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Limitations-1"><span>14.5 Limitations<a class="copiable-link" href="#Limitations-1"> &para;</a></span></h3>

<a class="index-entry-id" id="index-debugger-limitations"></a>
<p>We hope you find the <code class="command">gawk</code> debugger useful and enjoyable to work with,
but as with any program, especially in its early releases, it still has
some limitations.  A few that it&rsquo;s worth being aware of are:
</p>
<ul class="itemize mark-bullet">
<li>At this point, the debugger does not give a detailed explanation of
what you did wrong when you type in something it doesn&rsquo;t like. Rather, it just
responds &lsquo;<samp class="samp">syntax error</samp>&rsquo;.  When you do figure out what your mistake was,
though, you&rsquo;ll feel like a real guru.

</li><li>If you perused the dump of opcodes in <a class="ref" href="#Miscellaneous-Debugger-Commands">Miscellaneous Commands</a>
(or if you are already familiar with <code class="command">gawk</code> internals),
you will realize that much of the internal manipulation of data
in <code class="command">gawk</code>, as in many interpreters, is done on a stack.
<code class="code">Op_push</code>, <code class="code">Op_pop</code>, and the like are the &ldquo;bread and butter&rdquo; of
most <code class="command">gawk</code> code.

<p>Unfortunately, as of now, the <code class="command">gawk</code>
debugger does not allow you to examine the stack&rsquo;s contents.
That is, the intermediate results of expression evaluation are on the
stack, but cannot be printed.  Rather, only variables that are defined
in the program can be printed.  Of course, a workaround for
this is to use more explicit variables at the debugging stage and then
change back to obscure, perhaps more optimal code later.
</p>
</li><li>There is no way to look &ldquo;inside&rdquo; the process of compiling
regular expressions to see if you got it right.  As an <code class="command">awk</code>
programmer, you are expected to know the meaning of
<code class="code">/[^[:alnum:][:blank:]]/</code>.

</li><li>The <code class="command">gawk</code> debugger is designed to be used by running a program (with all its
parameters) on the command line, as described in <a class="ref" href="#Debugger-Invocation">How to Start the Debugger</a>.
There is no way (as of now) to attach or &ldquo;break into&rdquo; a running program.
This seems reasonable for a language that is used mainly for quickly
executing, short programs.

</li><li>The <code class="command">gawk</code> debugger only accepts source code supplied with the <samp class="option">-f</samp> option.
If you have a shell script that provides an <code class="command">awk</code> program as a command
line parameter, and you need to use the debugger, you can write the script
to a temporary file, and use that as the program, with the <samp class="option">-f</samp> option. This
might look like this:

<div class="example">
<pre class="example-preformatted">cat &lt;&lt; \EOF &gt; /tmp/script.$$
...                                  <i class="i">Your program here</i>
EOF
gawk -D -f /tmp/script.$$
rm /tmp/script.$$
</pre></div>
</li></ul>



<hr>
</div>
<div class="section-level-extent" id="Debugging-Summary">
<div class="nav-panel">
<p>
Previous: <a href="#Limitations" accesskey="p" rel="prev">Limitations</a>, Up: <a href="#Debugger" accesskey="u" rel="up">Debugging <code class="command">awk</code> Programs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary-13"><span>14.6 Summary<a class="copiable-link" href="#Summary-13"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>Programs rarely work correctly the first time.  Finding bugs
is called debugging, and a program that helps you find bugs is a
debugger.  <code class="command">gawk</code> has a built-in debugger that works very
similarly to the GNU Debugger, GDB.

</li><li>Debuggers let you step through your program one statement at a time,
examine and change variable and array values, and do a number of other
things that let you understand what your program is actually doing (as
opposed to what it is supposed to do).

</li><li>Like most debuggers, the <code class="command">gawk</code> debugger works in terms of stack
frames, and lets you set both breakpoints (stop at a point in the code)
and watchpoints (stop when a data value changes).

</li><li>The debugger command set is fairly complete, providing control over
breakpoints, execution, viewing and changing data, working with the stack,
getting information, and other tasks.

</li><li>If the GNU Readline library is available when <code class="command">gawk</code> is
compiled, it is used by the debugger to provide command-line history
and editing.

</li><li>Usually, the debugger does not affect the
program being debugged, but occasionally it can.

</li></ul>

<hr>
</div>
</div>
<div class="chapter-level-extent" id="Namespaces">
<div class="nav-panel">
<p>
Next: <a href="#Arbitrary-Precision-Arithmetic" accesskey="n" rel="next">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a>, Previous: <a href="#Debugger" accesskey="p" rel="prev">Debugging <code class="command">awk</code> Programs</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Namespaces-in-gawk"><span>15 Namespaces in <code class="command">gawk</code><a class="copiable-link" href="#Namespaces-in-gawk"> &para;</a></span></h2>

<p>This chapter describes a feature that is specific to <code class="command">gawk</code>.
</p>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> This feature described in this chapter is new.  It is entirely
possible, and even likely, that there are dark corners (if not bugs)
still lurking within the implementation. If you find any such,
please report them (See <a class="xref" href="#Bugs">Reporting Problems and Bugs</a>).
</p></blockquote>


<ul class="mini-toc">
<li><a href="#Global-Namespace" accesskey="1">Standard <code class="command">awk</code>&rsquo;s Single Namespace</a></li>
<li><a href="#Qualified-Names" accesskey="2">Qualified Names</a></li>
<li><a href="#Default-Namespace" accesskey="3">The Default Namespace</a></li>
<li><a href="#Changing-The-Namespace" accesskey="4">Changing The Namespace</a></li>
<li><a href="#Naming-Rules" accesskey="5">Namespace and Component Naming Rules</a></li>
<li><a href="#Internal-Name-Management" accesskey="6">Internal Name Management</a></li>
<li><a href="#Namespace-Example" accesskey="7">Namespace Example</a></li>
<li><a href="#Namespace-And-Features" accesskey="8">Namespaces and Other <code class="command">gawk</code> Features</a></li>
<li><a href="#Namespace-Summary" accesskey="9">Summary</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Global-Namespace">
<div class="nav-panel">
<p>
Next: <a href="#Qualified-Names" accesskey="n" rel="next">Qualified Names</a>, Up: <a href="#Namespaces" accesskey="u" rel="up">Namespaces in <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Standard-awk_0027s-Single-Namespace"><span>15.1 Standard <code class="command">awk</code>&rsquo;s Single Namespace<a class="copiable-link" href="#Standard-awk_0027s-Single-Namespace"> &para;</a></span></h3>

<a class="index-entry-id" id="index-namespace-definition-of"></a>
<a class="index-entry-id" id="index-namespace-standard-awk_002c-global"></a>
<p>In standard <code class="command">awk</code>, there is a single, global, <em class="dfn">namespace</em>.
This means that <em class="emph">all</em> function names and global variable names must
be unique. For example, two different <code class="command">awk</code> source files cannot
both define a function named <code class="code">min()</code>, or define the same identifier,
used as a scalar in one and as an array in the other.
</p>
<p>This situation is okay when programs are small, say a few hundred
lines, or even a few thousand, but it prevents the development of
reusable libraries of <code class="command">awk</code> functions, and can inadvertently
cause independently-developed library files to accidentally step on each
other&rsquo;s &ldquo;private&rdquo; global variables
(see <a class="pxref" href="#Library-Names">Naming Library Function Global Variables</a>).
</p>
<a class="index-entry-id" id="index-package_002c-definition-of"></a>
<a class="index-entry-id" id="index-module_002c-definition-of"></a>
<p>Most other programming languages solve this issue by providing some kind
of namespace control: a way to say &ldquo;this function is in namespace <var class="var">xxx</var>,
and that function is in namespace <var class="var">yyy</var>.&rdquo;  (Of course, there is then
still a single namespace for the namespaces, but the hope is that there
are much fewer namespaces in use by any given program, and thus much
less chance for collisions.)  These facilities are sometimes referred
to as <em class="dfn">packages</em> or <em class="dfn">modules</em>.
</p>
<p>Starting with version 5.0, <code class="command">gawk</code> provides a
simple mechanism to put functions and global variables into separate namespaces.
</p>
<hr>
</div>
<div class="section-level-extent" id="Qualified-Names">
<div class="nav-panel">
<p>
Next: <a href="#Default-Namespace" accesskey="n" rel="next">The Default Namespace</a>, Previous: <a href="#Global-Namespace" accesskey="p" rel="prev">Standard <code class="command">awk</code>&rsquo;s Single Namespace</a>, Up: <a href="#Namespaces" accesskey="u" rel="up">Namespaces in <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Qualified-Names-1"><span>15.2 Qualified Names<a class="copiable-link" href="#Qualified-Names-1"> &para;</a></span></h3>

<a class="index-entry-id" id="index-qualified-name-definition-of"></a>
<a class="index-entry-id" id="index-namespaces-qualified-names"></a>
<a class="index-entry-id" id="index-_003a-_0028colon_0029-_003a_003a-namespace-separator"></a>
<a class="index-entry-id" id="index-colon-_0028_003a_0029-_003a_003a-namespace-separator"></a>
<a class="index-entry-id" id="index-component-name"></a>
<p>A <em class="dfn">qualified name</em> is an identifier that includes a namespace name,
the namespace separator <code class="code">::</code>, and a <em class="dfn">component</em> name.  For example, one
might have a function named <code class="code">posix::getpid()</code>.  Here, the namespace
is <code class="code">posix</code> and the function name within the namespace (the component)
is <code class="code">getpid()</code>.  The namespace and component names are separated by
a double-colon.  Only one such separator is allowed in a qualified name.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> Unlike C++, the <code class="code">::</code> is <em class="emph">not</em> an operator.  No spaces are
allowed between the namespace name, the <code class="code">::</code>, and the component name.
</p></blockquote>

<a class="index-entry-id" id="index-qualified-name-use-of"></a>
<p>You must use qualified names from one namespace to access variables
and functions in another.  This is especially important when using
variable names to index the special <code class="code">SYMTAB</code> array (see <a class="pxref" href="#Auto_002dset">Built-in Variables That Convey Information</a>),
and when making indirect function calls (see <a class="pxref" href="#Indirect-Calls">Indirect Function Calls</a>).
</p>
<hr>
</div>
<div class="section-level-extent" id="Default-Namespace">
<div class="nav-panel">
<p>
Next: <a href="#Changing-The-Namespace" accesskey="n" rel="next">Changing The Namespace</a>, Previous: <a href="#Qualified-Names" accesskey="p" rel="prev">Qualified Names</a>, Up: <a href="#Namespaces" accesskey="u" rel="up">Namespaces in <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="The-Default-Namespace"><span>15.3 The Default Namespace<a class="copiable-link" href="#The-Default-Namespace"> &para;</a></span></h3>

<a class="index-entry-id" id="index-namespace-default"></a>
<a class="index-entry-id" id="index-namespace-awk"></a>
<a class="index-entry-id" id="index-awk-namespace"></a>
<p>The default namespace, not surprisingly, is <code class="code">awk</code>.
All of the predefined <code class="command">awk</code> and <code class="command">gawk</code> variables
are in this namespace, and thus have qualified names like
<code class="code">awk::ARGC</code>, <code class="code">awk::NF</code>, and so on.
</p>
<a class="index-entry-id" id="index-uppercase-names_002c-namespace-for"></a>
<p>Furthermore, even when you have changed the namespace for your
current source file (see <a class="pxref" href="#Changing-The-Namespace">Changing The Namespace</a>), <code class="command">gawk</code>
forces unqualified identifiers whose names are all uppercase letters
to be in the <code class="code">awk</code> namespace.  This makes it possible for you to easily
reference <code class="command">gawk</code>&rsquo;s global variables from different namespaces.
It also keeps your code looking natural.
</p>
<hr>
</div>
<div class="section-level-extent" id="Changing-The-Namespace">
<div class="nav-panel">
<p>
Next: <a href="#Naming-Rules" accesskey="n" rel="next">Namespace and Component Naming Rules</a>, Previous: <a href="#Default-Namespace" accesskey="p" rel="prev">The Default Namespace</a>, Up: <a href="#Namespaces" accesskey="u" rel="up">Namespaces in <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Changing-The-Namespace-1"><span>15.4 Changing The Namespace<a class="copiable-link" href="#Changing-The-Namespace-1"> &para;</a></span></h3>

<a class="index-entry-id" id="index-namespaces-changing"></a>
<a class="index-entry-id" id="index-_0040-_0028at_002dsign_0029-_0040namespace-directive"></a>
<a class="index-entry-id" id="index-at_002dsign-_0028_0040_0029-_0040namespace-directive"></a>
<a class="index-entry-id" id="index-_0040namespace-directive"></a>
<p>In order to set the current namespace, use an <code class="code">@namespace</code> directive
at the top level of your program:
</p>
<div class="example">
<pre class="example-preformatted">@namespace &quot;passwd&quot;

BEGIN { ... }
...
</pre></div>

<p>After this directive, all simple non-completely-uppercase identifiers are
placed into the <code class="code">passwd</code> namespace.
</p>
<p>You can change the namespace multiple times within a single
source file, although this is likely to become confusing if you
do it too much.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> Association of unqualified identifiers to a namespace is handled while
<code class="command">gawk</code> parses your program, <em class="emph">before</em> it starts to run.  There is
no concept of a &ldquo;current&rdquo; namespace once your program starts executing.
Be sure you understand this.
</p></blockquote>

<a class="index-entry-id" id="index-namespace-implicit"></a>
<a class="index-entry-id" id="index-implicit-namespace"></a>
<p>Each source file for <samp class="option">-i</samp> and <samp class="option">-f</samp> starts out with
an implicit &lsquo;<samp class="samp">@namespace &quot;awk&quot;</samp>&rsquo;.  Similarly, each chunk of
command-line code supplied with <samp class="option">-e</samp> has such an implicit
initial statement (see <a class="pxref" href="#Options">Command-Line Options</a>).
</p>
<a class="index-entry-id" id="index-current-namespace_002c-pushing-and-popping"></a>
<a class="index-entry-id" id="index-namespace-pushing-and-popping"></a>
<p>Files included with <code class="code">@include</code> (see <a class="pxref" href="#Include-Files">Including Other Files into Your Program</a>) &ldquo;push&rdquo;
and &ldquo;pop&rdquo; the current namespace. That is, each <code class="code">@include</code> saves
the current namespace and starts over with an implicit &lsquo;<samp class="samp">@namespace
&quot;awk&quot;</samp>&rsquo; which remains in effect until an explicit <code class="code">@namespace</code>
directive is seen.  When <code class="command">gawk</code> finishes processing the included
file, the saved namespace is restored and processing continues where it
left off in the original file.
</p>
<a class="index-entry-id" id="index-_0040-_0028at_002dsign_0029-_0040namespace-directive-BEGIN_002c-BEGINFILE_002c-END_002c-ENDFILE-and"></a>
<a class="index-entry-id" id="index-at_002dsign-_0028_0040_0029-_0040namespace-directive-BEGIN_002c-BEGINFILE_002c-END_002c-ENDFILE-and"></a>
<a class="index-entry-id" id="index-BEGIN-pattern-_0040namespace-directive-and"></a>
<a class="index-entry-id" id="index-BEGINFILE-pattern-_0040namespace-directive-and"></a>
<a class="index-entry-id" id="index-END-pattern-_0040namespace-directive-and"></a>
<a class="index-entry-id" id="index-ENDFILE-pattern-_0040namespace-directive-and"></a>
<a class="index-entry-id" id="index-_0040namespace-directive-1"></a>
<p>The use of <code class="code">@namespace</code> has no influence upon the order of execution
of <code class="code">BEGIN</code>, <code class="code">BEGINFILE</code>, <code class="code">END</code>, and <code class="code">ENDFILE</code> rules.
</p>
<hr>
</div>
<div class="section-level-extent" id="Naming-Rules">
<div class="nav-panel">
<p>
Next: <a href="#Internal-Name-Management" accesskey="n" rel="next">Internal Name Management</a>, Previous: <a href="#Changing-The-Namespace" accesskey="p" rel="prev">Changing The Namespace</a>, Up: <a href="#Namespaces" accesskey="u" rel="up">Namespaces in <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Namespace-and-Component-Naming-Rules"><span>15.5 Namespace and Component Naming Rules<a class="copiable-link" href="#Namespace-and-Component-Naming-Rules"> &para;</a></span></h3>

<a class="index-entry-id" id="index-naming-rules_002c-namespace-and-component-names"></a>
<a class="index-entry-id" id="index-namespaces-naming-rules"></a>
<a class="index-entry-id" id="index-component-name-naming-rules"></a>
<p>A number of rules apply to the namespace and component names, as follows.
</p>
<ul class="itemize mark-bullet">
<li>It is a syntax error to use qualified names for function parameter names.

</li><li>It is a syntax error to use any standard <code class="command">awk</code> reserved word (such
as <code class="code">if</code> or <code class="code">for</code>), or the name of any standard built-in function
(such as <code class="code">sin()</code> or <code class="code">gsub()</code>) as either part of a qualified name.
Thus, the following produces a syntax error:

<div class="example">
<pre class="example-preformatted">@namespace &quot;example&quot;

function gsub(str, pat, result) { ... }
</pre></div>

</li><li>Outside the <code class="code">awk</code> namespace, the names of the additional <code class="command">gawk</code>
built-in functions (such as <code class="code">gensub()</code> or <code class="code">strftime()</code>) <em class="emph">may</em>
be used as component names.  The same set of names may be used as namespace
names, although this has the potential to be confusing.

</li><li>The additional <code class="command">gawk</code> built-in functions may still be called
from outside the <code class="code">awk</code> namespace by qualifying them. For example,
<code class="code">awk::systime()</code>.  Here is a somewhat silly example demonstrating
this rule and the previous one:

<div class="example">
<pre class="example-preformatted">BEGIN {
    print &quot;in awk namespace, systime() =&quot;, systime()
}

@namespace &quot;testing&quot;

function systime()
{
    print &quot;in testing namespace, systime() =&quot;, awk::systime()
}

BEGIN {
    systime()
}
</pre></div>


<p>When run, it produces output like this:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f systime.awk</kbd>
-| in awk namespace, systime() = 1500488503
-| in testing namespace, systime() = 1500488503
</pre></div>

</li><li><code class="command">gawk</code> pre-defined variable names may be used:
<code class="code">NF::NR</code> is valid, if possibly not all that useful.
</li></ul>

<hr>
</div>
<div class="section-level-extent" id="Internal-Name-Management">
<div class="nav-panel">
<p>
Next: <a href="#Namespace-Example" accesskey="n" rel="next">Namespace Example</a>, Previous: <a href="#Naming-Rules" accesskey="p" rel="prev">Namespace and Component Naming Rules</a>, Up: <a href="#Namespaces" accesskey="u" rel="up">Namespaces in <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Internal-Name-Management-1"><span>15.6 Internal Name Management<a class="copiable-link" href="#Internal-Name-Management-1"> &para;</a></span></h3>

<a class="index-entry-id" id="index-name-management"></a>
<a class="index-entry-id" id="index-awk-namespace-identifier-name-storage"></a>
<a class="index-entry-id" id="index-awk-namespace-use-for-indirect-function-calls"></a>
<p>For backwards compatibility, all identifiers in the <code class="code">awk</code> namespace
are stored internally as unadorned identifiers (that is, without a
leading &lsquo;<samp class="samp">awk::</samp>&rsquo;).  This is mainly relevant
when using such identifiers as indices for <code class="code">SYMTAB</code>, <code class="code">FUNCTAB</code>,
and <code class="code">PROCINFO[&quot;identifiers&quot;]</code> (see <a class="pxref" href="#Auto_002dset">Built-in Variables That Convey Information</a>), and for use in
indirect function calls (see <a class="pxref" href="#Indirect-Calls">Indirect Function Calls</a>).
</p>
<p>In program code, to refer to variables and functions in the <code class="code">awk</code>
namespace from another namespace, you must still use the &lsquo;<samp class="samp">awk::</samp>&rsquo;
prefix. For example:
</p>
<div class="example">
<pre class="example-preformatted">@namespace &quot;awk&quot;          <i class="i">This is the default namespace</i>

BEGIN {
    Title = &quot;My Report&quot;   <i class="i">Qualified name is</i> awk::Title
}

@namespace &quot;report&quot;       <i class="i">Now in</i> report <i class="i">namespace</i>

function compute()        <i class="i">This is really</i> report::compute()
{
    print awk::Title      <i class="i">But would be</i> SYMTAB[&quot;Title&quot;]
    ...
}
</pre></div>

<hr>
</div>
<div class="section-level-extent" id="Namespace-Example">
<div class="nav-panel">
<p>
Next: <a href="#Namespace-And-Features" accesskey="n" rel="next">Namespaces and Other <code class="command">gawk</code> Features</a>, Previous: <a href="#Internal-Name-Management" accesskey="p" rel="prev">Internal Name Management</a>, Up: <a href="#Namespaces" accesskey="u" rel="up">Namespaces in <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Namespace-Example-1"><span>15.7 Namespace Example<a class="copiable-link" href="#Namespace-Example-1"> &para;</a></span></h3>

<a class="index-entry-id" id="index-namespace-example-code"></a>
<p>The following example is a revised version of the suite of routines
developed in <a class="ref" href="#Passwd-Functions">Reading the User Database</a>. See there for an explanation
of how the code works.
</p>
<p>The formulation here, due mainly to Andrew Schorr, is rather elegant.
All of the implementation functions and variables are in the
<code class="code">passwd</code> namespace, whereas the main interface functions are
defined in the <code class="code">awk</code> namespace.
</p>
<div class="example">
<pre class="example-preformatted"># ns_passwd.awk --- access password file information

@namespace &quot;passwd&quot;

BEGIN {
    # tailor this to suit your system
    Awklib = &quot;/usr/local/libexec/awk/&quot;
}

function Init(    oldfs, oldrs, olddol0, pwcat, using_fw, using_fpat)
{
    if (Inited)
        return

    oldfs = FS
    oldrs = RS
    olddol0 = $0
    using_fw = (PROCINFO[&quot;FS&quot;] == &quot;FIELDWIDTHS&quot;)
    using_fpat = (PROCINFO[&quot;FS&quot;] == &quot;FPAT&quot;)
    FS = &quot;:&quot;
    RS = &quot;\n&quot;

    pwcat = Awklib &quot;pwcat&quot;
    while ((pwcat | getline) &gt; 0) {
        Byname[$1] = $0
        Byuid[$3] = $0
        Bycount[++Total] = $0
    }
    close(pwcat)
    Count = 0
    Inited = 1
    FS = oldfs
    if (using_fw)
        FIELDWIDTHS = FIELDWIDTHS
    else if (using_fpat)
        FPAT = FPAT
    RS = oldrs
    $0 = olddol0
}

function awk::getpwnam(name)
{
    Init()
    return Byname[name]
}

function awk::getpwuid(uid)
{
    Init()
    return Byuid[uid]
}

function awk::getpwent()
{
    Init()
    if (Count &lt; Total)
        return Bycount[++Count]
    return &quot;&quot;
}

function awk::endpwent()
{
    Count = 0
}
</pre></div>

<p>As you can see, this version also follows the convention mentioned in
<a class="ref" href="#Library-Names">Naming Library Function Global Variables</a>, whereby global variable and function names
start with a capital letter.
</p>
<p>Here is a simple test program. Since it&rsquo;s in a separate file, unadorned
identifiers are sought for in the <code class="code">awk</code> namespace:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    while ((p = getpwent()) != &quot;&quot;)
        print p
}
</pre></div>


<p>Here&rsquo;s what happens when it&rsquo;s run:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f ns_passwd.awk -f testpasswd.awk</kbd>
-| root:x:0:0:root:/root:/bin/bash
-| daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
-| bin:x:2:2:bin:/bin:/usr/sbin/nologin
-| sys:x:3:3:sys:/dev:/usr/sbin/nologin
...
</pre></div>

<hr>
</div>
<div class="section-level-extent" id="Namespace-And-Features">
<div class="nav-panel">
<p>
Next: <a href="#Namespace-Summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Namespace-Example" accesskey="p" rel="prev">Namespace Example</a>, Up: <a href="#Namespaces" accesskey="u" rel="up">Namespaces in <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Namespaces-and-Other-gawk-Features"><span>15.8 Namespaces and Other <code class="command">gawk</code> Features<a class="copiable-link" href="#Namespaces-and-Other-gawk-Features"> &para;</a></span></h3>

<p>This section looks briefly at how the namespace facility interacts
with other important <code class="command">gawk</code> features.
</p>
<a class="index-entry-id" id="index-namespaces-interaction-with-profiler"></a>
<a class="index-entry-id" id="index-namespaces-interaction-with-pretty-printer"></a>
<a class="index-entry-id" id="index-profiler_002c-interaction-with-namespaces"></a>
<a class="index-entry-id" id="index-pretty-printer_002c-interaction-with-namespaces"></a>
<p>The profiler and pretty-printer (see <a class="pxref" href="#Profiling">Profiling Your <code class="command">awk</code> Programs</a>) have been enhanced
to understand namespaces and the namespace naming rules presented in
<a class="ref" href="#Naming-Rules">Namespace and Component Naming Rules</a>.  In particular, the output groups functions in the same
namespace together, and has <code class="code">@namespace</code> directives in front
of rules as necessary. This allows component names to be
simple identifiers, instead of using qualified identifiers everywhere.
</p>
<a class="index-entry-id" id="index-namespaces-interaction-with-debugger"></a>
<a class="index-entry-id" id="index-debugger-interaction-with-namespaces"></a>
<p>Interaction with the debugger (see <a class="pxref" href="#Debugging">Introduction to the <code class="command">gawk</code> Debugger</a>) has not had to change
(at least as of this writing).  Some of the internal byte codes changed
in order to accommodate namespaces, and the debugger&rsquo;s <code class="code">dump</code> command
was adjusted to match.
</p>
<a class="index-entry-id" id="index-namespaces-interaction-with-extension-API"></a>
<a class="index-entry-id" id="index-extension-API-interaction-with-namespaces"></a>
<p>The extension API (see <a class="pxref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>) has always allowed for
placing functions into a different namespace, although this was not
previously implemented.  However, the symbol lookup and symbol update
routines did not have provision for including a namespace. That has now
been corrected (see <a class="pxref" href="#Symbol-table-by-name">Variable Access and Update by Name</a>).
See <a class="xref" href="#Extension-Sample-Inplace">Enabling In-Place File Editing</a>, for a nice example of an extension that
leverages a namespace shared by cooperating <code class="command">awk</code> and C code.
</p>
<hr>
</div>
<div class="section-level-extent" id="Namespace-Summary">
<div class="nav-panel">
<p>
Previous: <a href="#Namespace-And-Features" accesskey="p" rel="prev">Namespaces and Other <code class="command">gawk</code> Features</a>, Up: <a href="#Namespaces" accesskey="u" rel="up">Namespaces in <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary-14"><span>15.9 Summary<a class="copiable-link" href="#Summary-14"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>Standard <code class="command">awk</code> provides a single namespace for all global
identifiers (scalars, arrays, and functions).  This is limiting when
one wants to develop libraries of reusable functions or function suites.

</li><li><code class="command">gawk</code> provides multiple namespaces by using qualified names:
names consisting of a namespace name, a double colon, <code class="code">::</code>, and a
component name.  Namespace names might still possibly conflict, but this
is true of any language providing namespaces, modules, or packages.

</li><li>The default namespace is <code class="command">awk</code>. The rules for namespace and
component names are provided in <a class="ref" href="#Naming-Rules">Namespace and Component Naming Rules</a>. The rules are
designed in such a way as to make namespace-aware code continue to
look and work naturally while still providing the necessary power and
flexibility.

</li><li>Other parts of <code class="command">gawk</code> have been extended as necessary to integrate
namespaces smoothly with their operation.  This applies most notably to
the profiler / pretty-printer (see <a class="pxref" href="#Profiling">Profiling Your <code class="command">awk</code> Programs</a>) and to the extension
facility (see <a class="pxref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>).

<a class="index-entry-id" id="index-namespaces-backwards-compatibility"></a>
</li><li>Overall, the namespace facility was designed and implemented such that
backwards compatibility is paramount. Programs that don&rsquo;t use namespaces
should see absolutely no difference in behavior when run by a namespace-capable
version of <code class="command">gawk</code>.
</li></ul>

<hr>
</div>
</div>
<div class="chapter-level-extent" id="Arbitrary-Precision-Arithmetic">
<div class="nav-panel">
<p>
Next: <a href="#Dynamic-Extensions" accesskey="n" rel="next">Writing Extensions for <code class="command">gawk</code></a>, Previous: <a href="#Namespaces" accesskey="p" rel="prev">Namespaces in <code class="command">gawk</code></a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Arithmetic-and-Arbitrary_002dPrecision-Arithmetic-with-gawk"><span>16 Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code><a class="copiable-link" href="#Arithmetic-and-Arbitrary_002dPrecision-Arithmetic-with-gawk"> &para;</a></span></h2>
<a class="index-entry-id" id="index-arbitrary-precision"></a>
<a class="index-entry-id" id="index-multiple-precision"></a>
<a class="index-entry-id" id="index-infinite-precision"></a>
<a class="index-entry-id" id="index-floating_002dpoint-numbers-arbitrary_002dprecision"></a>

<p>This chapter introduces some basic concepts relating to
how computers do arithmetic and defines some important terms.
It then proceeds to describe floating-point arithmetic,
which is what <code class="command">awk</code> uses for all its computations, including a
discussion of arbitrary-precision floating-point arithmetic, which is
a feature available only in <code class="command">gawk</code>. It continues on to present
arbitrary-precision integers, and concludes with a description of some
points where <code class="command">gawk</code> and the POSIX standard are not quite in
agreement.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> Most users of <code class="command">gawk</code> can safely skip this chapter.
But if you want to do scientific calculations with <code class="command">gawk</code>,
this is the place to be.
</p></blockquote>


<ul class="mini-toc">
<li><a href="#Computer-Arithmetic" accesskey="1">A General Description of Computer Arithmetic</a></li>
<li><a href="#Math-Definitions" accesskey="2">Other Stuff to Know</a></li>
<li><a href="#MPFR-features" accesskey="3">Arbitrary-Precision Arithmetic Features in <code class="command">gawk</code></a></li>
<li><a href="#FP-Math-Caution" accesskey="4">Floating-Point Arithmetic: Caveat Emptor!</a></li>
<li><a href="#Arbitrary-Precision-Integers" accesskey="5">Arbitrary-Precision Integer Arithmetic with <code class="command">gawk</code></a></li>
<li><a href="#Checking-for-MPFR" accesskey="6">How To Check If MPFR Is Available</a></li>
<li><a href="#POSIX-Floating-Point-Problems" accesskey="7">Standards Versus Existing Practice</a></li>
<li><a href="#Floating-point-summary" accesskey="8">Summary</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Computer-Arithmetic">
<div class="nav-panel">
<p>
Next: <a href="#Math-Definitions" accesskey="n" rel="next">Other Stuff to Know</a>, Up: <a href="#Arbitrary-Precision-Arithmetic" accesskey="u" rel="up">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="A-General-Description-of-Computer-Arithmetic"><span>16.1 A General Description of Computer Arithmetic<a class="copiable-link" href="#A-General-Description-of-Computer-Arithmetic"> &para;</a></span></h3>

<p>Until now, we have worked with data as either numbers or
strings.  Ultimately, however, computers represent everything in terms
of <em class="dfn">binary digits</em>, or <em class="dfn">bits</em>.  A decimal digit can take on any
of 10 values: zero through nine.  A binary digit can take on any of two
values, zero or one.  Using binary, computers (and computer software)
can represent and manipulate numerical and character data.  In general,
the more bits you can use to represent a particular thing, the greater
the range of possible values it can take on.
</p>
<p>Modern computers support at least two, and often more, ways to do
arithmetic.  Each kind of arithmetic uses a different representation
(organization of the bits) for the numbers.  The kinds of arithmetic
that interest us are:
</p>
<dl class="table">
<dt>Decimal arithmetic</dt>
<dd><p>This is the kind of arithmetic you learned in elementary school, using
paper and pencil (and/or a calculator). In theory, numbers can have an
arbitrary number of digits on either side (or both sides) of the decimal
point, and the results of a computation are always exact.
</p>
<p>Some modern systems can do decimal arithmetic in hardware, but usually you
need a special software library to provide access to these instructions.
There are also libraries that do decimal arithmetic entirely in software.
</p>
<p>Despite the fact that some users expect <code class="command">gawk</code> to be performing
decimal arithmetic,<a class="footnote" id="DOCF99" href="#FOOT99"><sup>99</sup></a> it does not do so.
</p>
</dd>
<dt>Integer arithmetic</dt>
<dd><p>In school, integer values were referred to as &ldquo;whole&rdquo; numbers&mdash;that
is, numbers without any fractional part, such as 1, 42, or &minus;17.
The advantage to integer numbers is that they represent values exactly.
The disadvantage is that their range is limited.
</p>
<a class="index-entry-id" id="index-unsigned-integers"></a>
<a class="index-entry-id" id="index-integers-unsigned"></a>
<p>In computers, integer values come in two flavors: <em class="dfn">signed</em> and
<em class="dfn">unsigned</em>.  Signed values may be negative or positive, whereas
unsigned values are always greater than or equal
to zero.
</p>
<p>In computer systems, integer arithmetic is exact, but the possible
range of values is limited.  Integer arithmetic is generally faster than
floating-point arithmetic.
</p>
<a class="index-entry-id" id="index-floating_002dpoint-numbers"></a>
</dd>
<dt>Floating-point arithmetic</dt>
<dd><p>Floating-point numbers represent what were called in school &ldquo;real&rdquo;
numbers (i.e., those that have a fractional part, such as 3.1415927).
The advantage to floating-point numbers is that they can represent a
much larger range of values than can integers.  The disadvantage is that
there are numbers that they cannot represent exactly.
</p>
<p>Modern systems support floating-point arithmetic in hardware, with a
limited range of values.  There are software libraries that allow
the use of arbitrary-precision floating-point calculations.
</p>
<a class="index-entry-id" id="index-floating_002dpoint-numbers-single_002dprecision"></a>
<a class="index-entry-id" id="index-floating_002dpoint-numbers-double_002dprecision"></a>
<a class="index-entry-id" id="index-floating_002dpoint-numbers-arbitrary_002dprecision-1"></a>
<a class="index-entry-id" id="index-single_002dprecision"></a>
<a class="index-entry-id" id="index-double_002dprecision"></a>
<a class="index-entry-id" id="index-arbitrary-precision-1"></a>
<p>POSIX <code class="command">awk</code> uses <em class="dfn">double-precision</em> floating-point numbers, which
can hold more digits than <em class="dfn">single-precision</em> floating-point numbers.
<code class="command">gawk</code> has facilities for performing arbitrary-precision
floating-point arithmetic, which we describe in more detail shortly.
</p></dd>
</dl>

<p>Computers work with integer and floating-point values of different
ranges. Integer values are usually either 32 or 64 bits in size.
Single-precision floating-point values occupy 32 bits, whereas double-precision
floating-point values occupy 64 bits.
(Quadruple-precision floating point values also exist. They occupy 128 bits,
but such numbers are not available in <code class="command">awk</code>.)
Floating-point values are always
signed. The possible ranges of values are shown in <a class="ref" href="#table_002dnumeric_002dranges">Table 16.1</a>
and <a class="ref" href="#table_002dfloating_002dpoint_002dranges">Table 16.2</a>.
</p>
<div class="float" id="table_002dnumeric_002dranges">
<table class="multitable">
<thead><tr><th width="34%">Representation</th><th width="33%">Minimum value</th><th width="33%">Maximum value</th></tr></thead>
<tbody><tr><td width="34%">32-bit signed integer</td><td width="33%">&minus;2,147,483,648</td><td width="33%">2,147,483,647</td></tr>
<tr><td width="34%">32-bit unsigned integer</td><td width="33%">0</td><td width="33%">4,294,967,295</td></tr>
<tr><td width="34%">64-bit signed integer</td><td width="33%">&minus;9,223,372,036,854,775,808</td><td width="33%">9,223,372,036,854,775,807</td></tr>
<tr><td width="34%">64-bit unsigned integer</td><td width="33%">0</td><td width="33%">18,446,744,073,709,551,615</td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 16.1: </strong>Value ranges for integer representations</p></div></div>
<div class="float" id="table_002dfloating_002dpoint_002dranges">
<table class="multitable">
<thead><tr><th width="38%">Representation</th><th width="22%">Minimum positive nonzero value</th><th width="22%">Minimum finite value</th><th width="23%">Maximum finite value</th></tr></thead>
<tbody><tr><td width="38%">Single-precision floating-point</td><td width="22%">1.175494*10<sup class="sup">-38</sup></td><td width="22%">-3.402823*10<sup class="sup">38</sup></td><td width="23%">3.402823*10<sup class="sup">38</sup></td></tr>
<tr><td width="38%">Double-precision floating-point</td><td width="22%">2.225074*10<sup class="sup">-308</sup></td><td width="22%">-1.797693*10<sup class="sup">308</sup></td><td width="23%">1.797693*10<sup class="sup">308</sup></td></tr>
<tr><td width="38%">Quadruple-precision floating-point</td><td width="22%">3.362103*10<sup class="sup">-4932</sup></td><td width="22%">-1.189731*10<sup class="sup">4932</sup></td><td width="23%">1.189731*10<sup class="sup">4932</sup></td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 16.2: </strong>Approximate value ranges for floating-point number representations</p></div></div>
<hr>
</div>
<div class="section-level-extent" id="Math-Definitions">
<div class="nav-panel">
<p>
Next: <a href="#MPFR-features" accesskey="n" rel="next">Arbitrary-Precision Arithmetic Features in <code class="command">gawk</code></a>, Previous: <a href="#Computer-Arithmetic" accesskey="p" rel="prev">A General Description of Computer Arithmetic</a>, Up: <a href="#Arbitrary-Precision-Arithmetic" accesskey="u" rel="up">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Other-Stuff-to-Know"><span>16.2 Other Stuff to Know<a class="copiable-link" href="#Other-Stuff-to-Know"> &para;</a></span></h3>

<p>The rest of this chapter uses a number of terms. Here are some
informal definitions that should help you work your way through the material
here:
</p>
<dl class="table">
<dt><em class="dfn">Accuracy</em></dt>
<dd><p>A floating-point calculation&rsquo;s accuracy is how close it comes
to the real (paper and pencil) value.
</p>
</dd>
<dt><em class="dfn">Error</em></dt>
<dd><p>The difference between what the result of a computation &ldquo;should be&rdquo;
and what it actually is.  It is best to minimize error as much
as possible.
</p>
</dd>
<dt><em class="dfn">Exponent</em></dt>
<dd><p>The order of magnitude of a value;
some number of bits in a floating-point value store the exponent.
</p>
</dd>
<dt><em class="dfn">Inf</em></dt>
<dd><p>A special value representing infinity. Operations involving another
number and infinity produce infinity.
</p>
</dd>
<dt><em class="dfn">NaN</em></dt>
<dd><p>&ldquo;Not a number.&rdquo;  A special value that results from attempting a
calculation that has no answer as a real number.  See <a class="xref" href="#Strange-values">Floating Point Values They Didn&rsquo;t Talk About In School</a>,
for more information about infinity and not-a-number values.
</p>
</dd>
<dt><em class="dfn">Normalized</em></dt>
<dd><p>How the significand (see later in this list) is usually stored. The
value is adjusted so that the first bit is one, and then that leading
one is assumed instead of physically stored.  This provides one
extra bit of precision.
</p>
</dd>
<dt><em class="dfn">Precision</em></dt>
<dd><p>The number of bits used to represent a floating-point number.
The more bits, the more digits you can represent.
Binary and decimal precisions are related approximately, according to the
formula:
</p>
<div class="display">
<pre class="display-preformatted"><var class="var">prec</var> = 3.322 * <var class="var">dps</var>
</pre></div>

<p>Here, <em class="emph">prec</em> denotes the binary precision
(measured in bits) and <em class="emph">dps</em> (short for decimal places)
is the decimal digits.
</p>
</dd>
<dt><em class="dfn">Rounding mode</em></dt>
<dd><p>How numbers are rounded up or down when necessary.
More details are provided later.
</p>
</dd>
<dt><em class="dfn">Significand</em></dt>
<dd><p>A floating-point value consists of the significand multiplied by 10
to the power of the exponent. For example, in <code class="code">1.2345e67</code>,
the significand is <code class="code">1.2345</code>.
</p>
</dd>
<dt><em class="dfn">Stability</em></dt>
<dd><p>From <a class="uref" href="https://en.wikipedia.org/wiki/Numerical_stability">the Wikipedia article on numerical stability</a>:
&ldquo;Calculations that can be proven not to magnify approximation errors
are called <em class="dfn">numerically stable</em>.&rdquo;
</p></dd>
</dl>

<p>See <a class="uref" href="https://en.wikipedia.org/wiki/Accuracy_and_precision">the Wikipedia article on accuracy and precision</a> for more information
on some of those terms.
</p>
<p>On modern systems, floating-point hardware uses the representation and
operations defined by the IEEE 754 standard.
Three of the standard IEEE 754 types are 32-bit single precision,
64-bit double precision, and 128-bit quadruple precision.
The standard also specifies extended precision formats
to allow greater precisions and larger exponent ranges.
(<code class="command">awk</code> uses only the 64-bit double-precision format.)
</p>
<p><a class="ref" href="#table_002dieee_002dformats">Table 16.3</a> lists the precision and exponent
field values for the basic IEEE 754 binary formats.
</p>
<div class="float" id="table_002dieee_002dformats">
<table class="multitable">
<thead><tr><th width="20%">Name</th><th width="20%">Total bits</th><th width="20%">Precision</th><th width="20%">Minimum exponent</th><th width="20%">Maximum exponent</th></tr></thead>
<tbody><tr><td width="20%">Single</td><td width="20%">32</td><td width="20%">24</td><td width="20%">&minus;126</td><td width="20%">+127</td></tr>
<tr><td width="20%">Double</td><td width="20%">64</td><td width="20%">53</td><td width="20%">&minus;1022</td><td width="20%">+1023</td></tr>
<tr><td width="20%">Quadruple</td><td width="20%">128</td><td width="20%">113</td><td width="20%">&minus;16382</td><td width="20%">+16383</td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 16.3: </strong>Basic IEEE format values</p></div></div>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> The precision numbers include the implied leading one that gives them
one extra bit of significand.
</p></blockquote>

<hr>
</div>
<div class="section-level-extent" id="MPFR-features">
<div class="nav-panel">
<p>
Next: <a href="#FP-Math-Caution" accesskey="n" rel="next">Floating-Point Arithmetic: Caveat Emptor!</a>, Previous: <a href="#Math-Definitions" accesskey="p" rel="prev">Other Stuff to Know</a>, Up: <a href="#Arbitrary-Precision-Arithmetic" accesskey="u" rel="up">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Arbitrary_002dPrecision-Arithmetic-Features-in-gawk"><span>16.3 Arbitrary-Precision Arithmetic Features in <code class="command">gawk</code><a class="copiable-link" href="#Arbitrary_002dPrecision-Arithmetic-Features-in-gawk"> &para;</a></span></h3>

<p>This section briefly describes arbitrary-precision
arithmetic in <code class="command">gawk</code>.
</p>

<ul class="mini-toc">
<li><a href="#MPFR-On-Parole" accesskey="1">Arbitrary Precision Arithmetic is On Parole!</a></li>
<li><a href="#MPFR-Intro" accesskey="2">Arbitrary Precision Introduction</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="MPFR-On-Parole">
<div class="nav-panel">
<p>
Next: <a href="#MPFR-Intro" accesskey="n" rel="next">Arbitrary Precision Introduction</a>, Up: <a href="#MPFR-features" accesskey="u" rel="up">Arbitrary-Precision Arithmetic Features in <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Arbitrary-Precision-Arithmetic-is-On-Parole_0021"><span>16.3.1 Arbitrary Precision Arithmetic is On Parole!<a class="copiable-link" href="#Arbitrary-Precision-Arithmetic-is-On-Parole_0021"> &para;</a></span></h4>

<p>As of version 5.2,
arbitrary precision arithmetic in <code class="command">gawk</code>
is &ldquo;on parole.&rdquo;  The primary <code class="command">gawk</code> maintainer is no
longer maintaining it. Fortunately, a volunteer from the development
team has agreed to take it over.
</p>
<p>This feature is on parole because its inclusion was a mistake. It has
led to endless bug reports, misuse of the feature and public abuse of the
maintainer, for no real increased value.
</p>

<p>If the situation with support changes, the feature will be removed
from <code class="command">gawk</code>.
</p>
<p>If you use this feature, you should consider finding a different
toolset with which to accomplish your goals.<a class="footnote" id="DOCF100" href="#FOOT100"><sup>100</sup></a>
</p>
<hr>
</div>
<div class="subsection-level-extent" id="MPFR-Intro">
<div class="nav-panel">
<p>
Previous: <a href="#MPFR-On-Parole" accesskey="p" rel="prev">Arbitrary Precision Arithmetic is On Parole!</a>, Up: <a href="#MPFR-features" accesskey="u" rel="up">Arbitrary-Precision Arithmetic Features in <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Arbitrary-Precision-Introduction"><span>16.3.2 Arbitrary Precision Introduction<a class="copiable-link" href="#Arbitrary-Precision-Introduction"> &para;</a></span></h4>

<p>By default, <code class="command">gawk</code> uses the double-precision floating-point values
supplied by the hardware of the system it runs on.  However, if it was
compiled to do so, and the <samp class="option">-M</samp> command-line option is supplied,
<code class="command">gawk</code> uses the <a class="uref" href="http://www.mpfr.org">GNU MPFR</a> and <a class="uref" href="https://gmplib.org">GNU MP</a> (GMP) libraries for
arbitrary-precision arithmetic on numbers.  You can see if MPFR support
is available like so:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk --version</kbd>
-| GNU Awk 5.2.1, API 3.2, PMA Avon 8-g1, (GNU MPFR 4.1.0, GNU MP 6.2.1)
-| Copyright (C) 1989, 1991-2022 Free Software Foundation.
...
</pre></div>

<p>(You may see different version numbers than what&rsquo;s shown here. That&rsquo;s OK;
what&rsquo;s important is to see that GNU MPFR and GNU MP are listed in
the output.)
</p>
<p>Additionally, there are a few elements available in the <code class="code">PROCINFO</code>
array to provide information about the MPFR and GMP libraries
(see <a class="pxref" href="#Auto_002dset">Built-in Variables That Convey Information</a>).
</p>
<p>The MPFR library provides precise control over precisions and rounding
modes, and gives correctly rounded, reproducible, platform-independent
results.  With the <samp class="option">-M</samp> command-line option,
all floating-point arithmetic operators and numeric functions
can yield results to any desired precision level supported by MPFR.
</p>
<p>Two predefined variables, <code class="code">PREC</code> and <code class="code">ROUNDMODE</code>,
provide control over the working precision and the rounding mode.
The precision and the rounding mode are set globally for every operation
to follow.
See <a class="xref" href="#Setting-precision">Setting the Precision</a> and <a class="ref" href="#Setting-the-rounding-mode">Setting the Rounding Mode</a>
for more information.
</p>
<hr>
</div>
</div>
<div class="section-level-extent" id="FP-Math-Caution">
<div class="nav-panel">
<p>
Next: <a href="#Arbitrary-Precision-Integers" accesskey="n" rel="next">Arbitrary-Precision Integer Arithmetic with <code class="command">gawk</code></a>, Previous: <a href="#MPFR-features" accesskey="p" rel="prev">Arbitrary-Precision Arithmetic Features in <code class="command">gawk</code></a>, Up: <a href="#Arbitrary-Precision-Arithmetic" accesskey="u" rel="up">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Floating_002dPoint-Arithmetic_003a-Caveat-Emptor_0021"><span>16.4 Floating-Point Arithmetic: Caveat Emptor!<a class="copiable-link" href="#Floating_002dPoint-Arithmetic_003a-Caveat-Emptor_0021"> &para;</a></span></h3>

<blockquote class="quotation">
<p><i class="i">Math class is tough!</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Teen Talk Barbie, July 1992</em>
</div>
<p>This section provides a high-level overview of the issues
involved when doing lots of floating-point arithmetic.<a class="footnote" id="DOCF101" href="#FOOT101"><sup>101</sup></a>
The discussion applies to both hardware and arbitrary-precision
floating-point arithmetic.
</p>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> The material here is purposely general. If you need to do serious
computer arithmetic, you should do some research first, and not
rely just on what we tell you.
</p></blockquote>


<ul class="mini-toc">
<li><a href="#Inexactness-of-computations" accesskey="1">Floating-Point Arithmetic Is Not Exact</a></li>
<li><a href="#Getting-Accuracy" accesskey="2">Getting the Accuracy You Need</a></li>
<li><a href="#Try-To-Round" accesskey="3">Try a Few Extra Bits of Precision and Rounding</a></li>
<li><a href="#Setting-precision" accesskey="4">Setting the Precision</a></li>
<li><a href="#Setting-the-rounding-mode" accesskey="5">Setting the Rounding Mode</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Inexactness-of-computations">
<div class="nav-panel">
<p>
Next: <a href="#Getting-Accuracy" accesskey="n" rel="next">Getting the Accuracy You Need</a>, Up: <a href="#FP-Math-Caution" accesskey="u" rel="up">Floating-Point Arithmetic: Caveat Emptor!</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Floating_002dPoint-Arithmetic-Is-Not-Exact"><span>16.4.1 Floating-Point Arithmetic Is Not Exact<a class="copiable-link" href="#Floating_002dPoint-Arithmetic-Is-Not-Exact"> &para;</a></span></h4>

<p>Binary floating-point representations and arithmetic are inexact.
Simple values like 0.1 cannot be precisely represented using
binary floating-point numbers, and the limited precision of
floating-point numbers means that slight changes in
the order of operations or the precision of intermediate storage
can change the result. To make matters worse, with arbitrary-precision
floating-point arithmetic, you can set the precision before starting a
computation, but then you cannot be sure of the number of significant
decimal places in the final result.
</p>

<ul class="mini-toc">
<li><a href="#Inexact-representation" accesskey="1">Many Numbers Cannot Be Represented Exactly</a></li>
<li><a href="#Comparing-FP-Values" accesskey="2">Be Careful Comparing Values</a></li>
<li><a href="#Errors-accumulate" accesskey="3">Errors Accumulate</a></li>
<li><a href="#Strange-values" accesskey="4">Floating Point Values They Didn&rsquo;t Talk About In School</a></li>
</ul>
<hr>
<div class="subsubsection-level-extent" id="Inexact-representation">
<div class="nav-panel">
<p>
Next: <a href="#Comparing-FP-Values" accesskey="n" rel="next">Be Careful Comparing Values</a>, Up: <a href="#Inexactness-of-computations" accesskey="u" rel="up">Floating-Point Arithmetic Is Not Exact</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Many-Numbers-Cannot-Be-Represented-Exactly"><span>16.4.1.1 Many Numbers Cannot Be Represented Exactly<a class="copiable-link" href="#Many-Numbers-Cannot-Be-Represented-Exactly"> &para;</a></span></h4>

<p>So, before you start to write any code, you should think
about what you really want and what&rsquo;s really happening. Consider the
two numbers in the following example:
</p>
<div class="example">
<pre class="example-preformatted">x = 0.875             # 1/2 + 1/4 + 1/8
y = 0.425
</pre></div>

<p>Unlike the number in <code class="code">y</code>, the number stored in <code class="code">x</code>
is exactly representable
in binary because it can be written as a finite sum of one or
more fractions whose denominators are all powers of two.
When <code class="command">gawk</code> reads a floating-point number from
program source, it automatically rounds that number to whatever
precision your machine supports. If you try to print the numeric
content of a variable using an output format string of <code class="code">&quot;%.17g&quot;</code>,
it may not produce the same number as you assigned to it:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { x = 0.875; y = 0.425</kbd>
&gt; <kbd class="kbd">              printf(&quot;%0.17g, %0.17g\n&quot;, x, y) }'</kbd>
-| 0.875, 0.42499999999999999
</pre></div>

<p>Often the error is so small you do not even notice it, and if you do,
you can always specify how much precision you would like in your output.
Usually this is a format string like <code class="code">&quot;%.15g&quot;</code>, which, when
used in the previous example, produces an output identical to the input.
</p>
<hr>
</div>
<div class="subsubsection-level-extent" id="Comparing-FP-Values">
<div class="nav-panel">
<p>
Next: <a href="#Errors-accumulate" accesskey="n" rel="next">Errors Accumulate</a>, Previous: <a href="#Inexact-representation" accesskey="p" rel="prev">Many Numbers Cannot Be Represented Exactly</a>, Up: <a href="#Inexactness-of-computations" accesskey="u" rel="up">Floating-Point Arithmetic Is Not Exact</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Be-Careful-Comparing-Values"><span>16.4.1.2 Be Careful Comparing Values<a class="copiable-link" href="#Be-Careful-Comparing-Values"> &para;</a></span></h4>

<p>Because the underlying representation can be a little bit off from the exact value,
comparing floating-point values to see if they are exactly equal is generally a bad idea.
Here is an example where it does not work like you would expect:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN { print (0.1 + 12.2 == 12.3) }'</kbd>
-| 0
</pre></div>

<p>The general wisdom when comparing floating-point values is to see if
they are within some small range of each other (called a <em class="dfn">delta</em>,
or <em class="dfn">tolerance</em>).
You have to decide how small a delta is important to you. Code to do
this looks something like the following:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">delta = 0.00001                 # for example
difference = abs(a - b)         # subtract the two values
if (difference &lt; delta)
    # all ok
else
    # not ok
</pre></div></div>

<p>(We assume that you have a simple absolute value function named
<code class="code">abs()</code> defined elsewhere in your program.)  If you write a
function to compare values with a delta, you should be sure
to use &lsquo;<samp class="samp">difference &lt; abs(delta)</samp>&rsquo; in case someone passes
in a negative delta value.
</p>
<hr>
</div>
<div class="subsubsection-level-extent" id="Errors-accumulate">
<div class="nav-panel">
<p>
Next: <a href="#Strange-values" accesskey="n" rel="next">Floating Point Values They Didn&rsquo;t Talk About In School</a>, Previous: <a href="#Comparing-FP-Values" accesskey="p" rel="prev">Be Careful Comparing Values</a>, Up: <a href="#Inexactness-of-computations" accesskey="u" rel="up">Floating-Point Arithmetic Is Not Exact</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Errors-Accumulate"><span>16.4.1.3 Errors Accumulate<a class="copiable-link" href="#Errors-Accumulate"> &para;</a></span></h4>

<p>The loss of accuracy during a single computation with floating-point
numbers usually isn&rsquo;t enough to worry about. However, if you compute a
value that is the result of a sequence of floating-point operations,
the error can accumulate and greatly affect the computation itself.
Here is an attempt to compute the value of <i class="i">pi</i> using one of its
many series representations:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    x = 1.0 / sqrt(3.0)
    n = 6
    for (i = 1; i &lt; 30; i++) {
        n = n * 2.0
        x = (sqrt(x * x + 1) - 1) / x
        printf(&quot;%.15f\n&quot;, n * x)
    }
}
</pre></div>

<p>When run, the early errors propagate through later computations,
causing the loop to terminate prematurely after attempting to divide by zero:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f pi.awk</kbd>
-| 3.215390309173475
-| 3.159659942097510
-| 3.146086215131467
-| 3.142714599645573
...
-| 3.224515243534819
-| 2.791117213058638
-| 0.000000000000000
error&rarr; gawk: pi.awk:6: fatal: division by zero attempted
</pre></div>

<p>Here is an additional example where the inaccuracies in internal representations
yield an unexpected result:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN {</kbd>
&gt;   <kbd class="kbd">for (d = 1.1; d &lt;= 1.5; d += 0.1)    # loop five times (?)</kbd>
&gt;       <kbd class="kbd">i++</kbd>
&gt;   <kbd class="kbd">print i</kbd>
&gt; <kbd class="kbd">}'</kbd>
-| 4
</pre></div>

<hr>
</div>
<div class="subsubsection-level-extent" id="Strange-values">
<div class="nav-panel">
<p>
Previous: <a href="#Errors-accumulate" accesskey="p" rel="prev">Errors Accumulate</a>, Up: <a href="#Inexactness-of-computations" accesskey="u" rel="up">Floating-Point Arithmetic Is Not Exact</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Floating-Point-Values-They-Didn_0027t-Talk-About-In-School"><span>16.4.1.4 Floating Point Values They Didn&rsquo;t Talk About In School<a class="copiable-link" href="#Floating-Point-Values-They-Didn_0027t-Talk-About-In-School"> &para;</a></span></h4>

<p>Both IEEE 754 floating-point hardware, and MPFR, support two kinds of
values that you probably didn&rsquo;t learn about in school.  The first is
<em class="dfn">infinity</em>, a special value, that can be either negative or positive,
and which is either smaller than any other value (negative infinity),
or larger than any other value (positive infinity).  When such values
are generated, <code class="command">gawk</code> prints them as either &lsquo;<samp class="samp">-inf</samp>&rsquo; or
&lsquo;<samp class="samp">+inf</samp>&rsquo;, respectively.  It accepts those strings as data input and
converts them to the proper floating-point values internally.
</p>
<p>Infinity values of the same sign compare as equal to each other.
Otherwise, operations (addition, subtraction, etc.) involving another
number and infinity produce mathematically reasonable results.
</p>
<p>The second kind of value is &ldquo;not a number&rdquo;, or NaN for
short.<a class="footnote" id="DOCF102" href="#FOOT102"><sup>102</sup></a> This is a special value that results
from attempting a calculation that has no answer as a real number.
In such a case, programs can either receive a floating-point exception,
or get NaN back as the result. The IEEE 754 standard recommends
that systems return NaN. Some examples:
</p>
<dl class="table">
<dt><code class="code">sqrt(-1)</code></dt>
<dd><p>This
makes sense in the range of complex numbers, but not in the
range of real numbers, so the result is NaN.
</p>
</dd>
<dt><code class="code">log(-8)</code></dt>
<dd><p>&minus;8 is out of the domain of <code class="code">log()</code>, so the result is NaN.
</p></dd>
</dl>

<p>NaN values are strange. In particular, they cannot be compared with other
floating point values; any such comparison, except for &ldquo;is not equal
to&rdquo;, returns false.  NaN values are so much unequal to other values that
even comparing two identical NaN values with <code class="code">!=</code> returns true!
</p>
<p>NaN values can also be signed, although it depends upon the implementation
as to which sign you get for any operation that returns a NaN. For
example, on some systems, <code class="code">sqrt(-1)</code> returns a negative NaN. On
others, it returns a positive NaN.
</p>
<p>When such values are generated, <code class="command">gawk</code> prints them as either
&lsquo;<samp class="samp">-nan</samp>&rsquo; or &lsquo;<samp class="samp">+nan</samp>&rsquo;, respectively.  Here too, <code class="command">gawk</code>
accepts those strings as data input and converts them to the proper
floating-point values internally.
</p>
<p>If you want to dive more deeply into this topic, you can find
test programs in C, <code class="command">awk</code> and Python in the directory
<samp class="file">awklib/eg/test-programs</samp> in the <code class="command">gawk</code> distribution.
These programs enable comparison among programming languages as to how
they handle NaN and infinity values.
</p>



<hr>
</div>
</div>
<div class="subsection-level-extent" id="Getting-Accuracy">
<div class="nav-panel">
<p>
Next: <a href="#Try-To-Round" accesskey="n" rel="next">Try a Few Extra Bits of Precision and Rounding</a>, Previous: <a href="#Inexactness-of-computations" accesskey="p" rel="prev">Floating-Point Arithmetic Is Not Exact</a>, Up: <a href="#FP-Math-Caution" accesskey="u" rel="up">Floating-Point Arithmetic: Caveat Emptor!</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Getting-the-Accuracy-You-Need"><span>16.4.2 Getting the Accuracy You Need<a class="copiable-link" href="#Getting-the-Accuracy-You-Need"> &para;</a></span></h4>

<p>Can arbitrary-precision arithmetic give exact results? There are
no easy answers. The standard rules of algebra often do not apply
when using floating-point arithmetic.
Among other things, the distributive and associative laws
do not hold completely, and order of operation may be important
for your computation. Rounding error, cumulative precision loss,
and underflow are often troublesome.
</p>
<p>When <code class="command">gawk</code> tests the expressions &lsquo;<samp class="samp">0.1 + 12.2</samp>&rsquo; and
&lsquo;<samp class="samp">12.3</samp>&rsquo; for equality using the machine double-precision arithmetic,
it decides that they are not equal!  (See <a class="xref" href="#Comparing-FP-Values">Be Careful Comparing Values</a>.)
You can get the result you want by increasing the precision; 56 bits in
this case does the job:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -M -v PREC=56 'BEGIN { print (0.1 + 12.2 == 12.3) }'</kbd>
-| 1
</pre></div>

<p>If adding more bits is good, perhaps adding even more bits of
precision is better?
Here is what happens if we use an even larger value of <code class="code">PREC</code>:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -M -v PREC=201 'BEGIN { print (0.1 + 12.2 == 12.3) }'</kbd>
-| 0
</pre></div>

<p>This is not a bug in <code class="command">gawk</code> or in the MPFR library.
It is easy to forget that the finite number of bits used to store the value
is often just an approximation after proper rounding.
The test for equality succeeds if and only if <em class="emph">all</em> bits in the two operands
are exactly the same. Because this is not necessarily true after floating-point
computations with a particular precision and effective rounding mode,
a straight test for equality may not work. Instead, compare the
two numbers to see if they are within the desirable delta of each other.
</p>
<p>In applications where 15 or fewer decimal places suffice,
hardware double-precision arithmetic can be adequate, and is usually much faster.
But you need to keep in mind that every floating-point operation
can suffer a new rounding error with catastrophic consequences, as illustrated
by our earlier attempt to compute the value of <i class="i">pi</i>.
Extra precision can greatly enhance the stability and the accuracy
of your computation in such cases.
</p>
<p>Additionally, you should understand that
repeated addition is not necessarily equivalent to multiplication
in floating-point arithmetic. In the example in
<a class="ref" href="#Errors-accumulate">Errors Accumulate</a>:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk 'BEGIN {</kbd>
&gt;   <kbd class="kbd">for (d = 1.1; d &lt;= 1.5; d += 0.1)    # loop five times (?)</kbd>
&gt;       <kbd class="kbd">i++</kbd>
&gt;   <kbd class="kbd">print i</kbd>
&gt; <kbd class="kbd">}'</kbd>
-| 4
</pre></div>

<p>you may or may not succeed in getting the correct result by choosing
an arbitrarily large value for <code class="code">PREC</code>. Reformulation of
the problem at hand is often the correct approach in such situations.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Try-To-Round">
<div class="nav-panel">
<p>
Next: <a href="#Setting-precision" accesskey="n" rel="next">Setting the Precision</a>, Previous: <a href="#Getting-Accuracy" accesskey="p" rel="prev">Getting the Accuracy You Need</a>, Up: <a href="#FP-Math-Caution" accesskey="u" rel="up">Floating-Point Arithmetic: Caveat Emptor!</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Try-a-Few-Extra-Bits-of-Precision-and-Rounding"><span>16.4.3 Try a Few Extra Bits of Precision and Rounding<a class="copiable-link" href="#Try-a-Few-Extra-Bits-of-Precision-and-Rounding"> &para;</a></span></h4>

<p>Instead of arbitrary-precision floating-point arithmetic,
often all you need is an adjustment of your logic
or a different order for the operations in your calculation.
The stability and the accuracy of the computation of <i class="i">pi</i>
in the earlier example can be enhanced by using the following
simple algebraic transformation:
</p>
<div class="example">
<pre class="example-preformatted">(sqrt(x * x + 1) - 1) / x &equiv; x / (sqrt(x * x + 1) + 1)
</pre></div>

<p>After making this change, the program converges to
<i class="i">pi</i> in under 30 iterations:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -f pi2.awk</kbd>
-| 3.215390309173473
-| 3.159659942097501
-| 3.146086215131436
-| 3.142714599645370
-| 3.141873049979825
...
-| 3.141592653589797
-| 3.141592653589797
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Setting-precision">
<div class="nav-panel">
<p>
Next: <a href="#Setting-the-rounding-mode" accesskey="n" rel="next">Setting the Rounding Mode</a>, Previous: <a href="#Try-To-Round" accesskey="p" rel="prev">Try a Few Extra Bits of Precision and Rounding</a>, Up: <a href="#FP-Math-Caution" accesskey="u" rel="up">Floating-Point Arithmetic: Caveat Emptor!</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Setting-the-Precision"><span>16.4.4 Setting the Precision<a class="copiable-link" href="#Setting-the-Precision"> &para;</a></span></h4>

<p><code class="command">gawk</code> uses a global working precision; it does not keep track of
the precision or accuracy of individual numbers. Performing an arithmetic
operation or calling a built-in function rounds the result to the current
working precision. The default working precision is 53 bits, which you can
modify using the predefined variable <code class="code">PREC</code>. You can also set the
value to one of the predefined case-insensitive strings
shown in <a class="ref" href="#table_002dpredefined_002dprecision_002dstrings">Table 16.4</a>,
to emulate an IEEE 754 binary format.
</p>
<div class="float" id="table_002dpredefined_002dprecision_002dstrings">
<table class="multitable">
<thead><tr><th><code class="code">PREC</code></th><th>IEEE 754 binary format</th></tr></thead>
<tbody><tr><td><code class="code">&quot;half&quot;</code></td><td>16-bit half-precision</td></tr>
<tr><td><code class="code">&quot;single&quot;</code></td><td>Basic 32-bit single precision</td></tr>
<tr><td><code class="code">&quot;double&quot;</code></td><td>Basic 64-bit double precision</td></tr>
<tr><td><code class="code">&quot;quad&quot;</code></td><td>Basic 128-bit quadruple precision</td></tr>
<tr><td><code class="code">&quot;oct&quot;</code></td><td>256-bit octuple precision</td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 16.4: </strong>Predefined precision strings for <code class="code">PREC</code></p></div></div>
<p>The following example illustrates the effects of changing precision
on arithmetic operations:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -M -v PREC=100 'BEGIN { x = 1.0e-400; print x + 0</kbd>
&gt;   <kbd class="kbd">PREC = &quot;double&quot;; print x + 0 }'</kbd>
-| 1e-400
-| 0
</pre></div>

<blockquote class="quotation">
<p><b class="b">CAUTION:</b> Be wary of floating-point constants! When reading a floating-point
constant from program source code, <code class="command">gawk</code> uses the default
precision (that of a C <code class="code">double</code>), unless overridden by an assignment
to the special variable <code class="code">PREC</code> on the command line, to store it
internally as an MPFR number.  Changing the precision using <code class="code">PREC</code>
in the program text does <em class="emph">not</em> change the precision of a constant.
</p>
<p>If you need to represent a floating-point constant at a higher precision
than the default and cannot use a command-line assignment to <code class="code">PREC</code>,
you should either specify the constant as a string, or as a rational
number, whenever possible. The following example illustrates the
differences among various ways to print a floating-point constant:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -M 'BEGIN { PREC = 113; printf(&quot;%0.25f\n&quot;, 0.1) }'</kbd>
-| 0.1000000000000000055511151
$ <kbd class="kbd">gawk -M -v PREC=113 'BEGIN { printf(&quot;%0.25f\n&quot;, 0.1) }'</kbd>
-| 0.1000000000000000000000000
$ <kbd class="kbd">gawk -M 'BEGIN { PREC = 113; printf(&quot;%0.25f\n&quot;, &quot;0.1&quot;) }'</kbd>
-| 0.1000000000000000000000000
$ <kbd class="kbd">gawk -M 'BEGIN { PREC = 113; printf(&quot;%0.25f\n&quot;, 1/10) }'</kbd>
-| 0.1000000000000000000000000
</pre></div>
</blockquote>

<hr>
</div>
<div class="subsection-level-extent" id="Setting-the-rounding-mode">
<div class="nav-panel">
<p>
Previous: <a href="#Setting-precision" accesskey="p" rel="prev">Setting the Precision</a>, Up: <a href="#FP-Math-Caution" accesskey="u" rel="up">Floating-Point Arithmetic: Caveat Emptor!</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Setting-the-Rounding-Mode"><span>16.4.5 Setting the Rounding Mode<a class="copiable-link" href="#Setting-the-Rounding-Mode"> &para;</a></span></h4>

<a class="index-entry-id" id="index-ROUNDMODE-variable-1"></a>
<p>The <code class="code">ROUNDMODE</code> variable provides
program-level control over the rounding mode.
The correspondence between <code class="code">ROUNDMODE</code> and the IEEE
rounding modes is shown in <a class="ref" href="#table_002dgawk_002drounding_002dmodes">Table 16.5</a>.
</p>
<div class="float" id="table_002dgawk_002drounding_002dmodes">
<table class="multitable">
<thead><tr><th width="45%">Rounding mode</th><th width="30%">IEEE name</th><th width="25%"><code class="code">ROUNDMODE</code></th></tr></thead>
<tbody><tr><td width="45%">Round to nearest, ties to even</td><td width="30%"><code class="code">roundTiesToEven</code></td><td width="25%"><code class="code">&quot;N&quot;</code> or <code class="code">&quot;n&quot;</code></td></tr>
<tr><td width="45%">Round toward positive infinity</td><td width="30%"><code class="code">roundTowardPositive</code></td><td width="25%"><code class="code">&quot;U&quot;</code> or <code class="code">&quot;u&quot;</code></td></tr>
<tr><td width="45%">Round toward negative infinity</td><td width="30%"><code class="code">roundTowardNegative</code></td><td width="25%"><code class="code">&quot;D&quot;</code> or <code class="code">&quot;d&quot;</code></td></tr>
<tr><td width="45%">Round toward zero</td><td width="30%"><code class="code">roundTowardZero</code></td><td width="25%"><code class="code">&quot;Z&quot;</code> or <code class="code">&quot;z&quot;</code></td></tr>
<tr><td width="45%">Round away from zero</td><td width="30%"></td><td width="25%"><code class="code">&quot;A&quot;</code> or <code class="code">&quot;a&quot;</code></td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 16.5: </strong><code class="command">gawk</code> rounding modes</p></div></div>
<p><code class="code">ROUNDMODE</code> has the default value <code class="code">&quot;N&quot;</code>, which
selects the IEEE 754 rounding mode <code class="code">roundTiesToEven</code>.
In <a class="ref" href="#table_002dgawk_002drounding_002dmodes">Table 16.5</a>, the value <code class="code">&quot;A&quot;</code> selects
rounding away from zero. This is only available if your version of the
MPFR library supports it; otherwise, setting <code class="code">ROUNDMODE</code> to <code class="code">&quot;A&quot;</code>
has no effect.
</p>
<p>The default mode <code class="code">roundTiesToEven</code> is the most preferred,
but the least intuitive. This method does the obvious thing for most values,
by rounding them up or down to the nearest digit.
For example, rounding 1.132 to two digits yields 1.13,
and rounding 1.157 yields 1.16.
</p>
<p>However, when it comes to rounding a value that is exactly halfway between,
things do not work the way you probably learned in school.
In this case, the number is rounded to the nearest even digit.
So rounding 0.125 to two digits rounds down to 0.12,
but rounding 0.6875 to three digits rounds up to 0.688.
You probably have already encountered this rounding mode when
using <code class="code">printf</code> to format floating-point numbers.
For example:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    x = -4.5
    for (i = 1; i &lt; 10; i++) {
        x += 1.0
        printf(&quot;%4.1f =&gt; %2.0f\n&quot;, x, x)
    }
}
</pre></div>

<p>produces the following output when run on the author&rsquo;s system:<a class="footnote" id="DOCF103" href="#FOOT103"><sup>103</sup></a>
</p>
<div class="example">
<pre class="example-preformatted">-3.5 =&gt; -4
-2.5 =&gt; -2
-1.5 =&gt; -2
-0.5 =&gt; 0
 0.5 =&gt; 0
 1.5 =&gt; 2
 2.5 =&gt; 2
 3.5 =&gt; 4
 4.5 =&gt; 4
</pre></div>

<p>The theory behind <code class="code">roundTiesToEven</code> is that it more or less evenly
distributes upward and downward rounds of exact halves, which might
cause any accumulating round-off error to cancel itself out. This is the
default rounding mode for IEEE 754 computing functions and operators.
</p>
<a class="index-entry-id" id="index-sidebar-Rounding-Modes-and-Conversion"></a>
<table class="cartouche" border="1"><tr><th>
Rounding Modes and Conversion</th></tr><tr><td>
<p>It&rsquo;s important to understand that, along with <code class="code">CONVFMT</code> and
<code class="code">OFMT</code>, the rounding mode affects how numbers are converted to strings.
For example, consider the following program:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    pi = 3.1416
    OFMT = &quot;%.f&quot;        # Print value as integer
    print pi            # ROUNDMODE = &quot;N&quot; by default.
    ROUNDMODE = &quot;U&quot;     # Now change ROUNDMODE
    print pi
}
</pre></div>

<p>Running this program produces this output:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -M -f roundmode.awk</kbd>
-| 3
-| 4
</pre></div>
</td></tr></table>

<p>The other rounding modes are rarely used.  Rounding toward positive infinity
(<code class="code">roundTowardPositive</code>) and toward negative infinity
(<code class="code">roundTowardNegative</code>) are often used to implement interval
arithmetic, where you adjust the rounding mode to calculate upper and
lower bounds for the range of output. The <code class="code">roundTowardZero</code> mode can
be used for converting floating-point numbers to integers.  When rounding
away from zero, the nearest number with magnitude greater than or equal to
the value is selected.
</p>
<p>Some numerical analysts will tell you that your choice of rounding
style has tremendous impact on the final outcome, and advise you to
wait until final output for any rounding. Instead, you can often avoid
round-off error problems by setting the precision initially to some
value sufficiently larger than the final desired precision, so that
the accumulation of round-off error does not influence the outcome.
If you suspect that results from your computation are sensitive to
accumulation of round-off error, look for a significant difference in
output when you change the rounding mode to be sure.
</p>
<hr>
</div>
</div>
<div class="section-level-extent" id="Arbitrary-Precision-Integers">
<div class="nav-panel">
<p>
Next: <a href="#Checking-for-MPFR" accesskey="n" rel="next">How To Check If MPFR Is Available</a>, Previous: <a href="#FP-Math-Caution" accesskey="p" rel="prev">Floating-Point Arithmetic: Caveat Emptor!</a>, Up: <a href="#Arbitrary-Precision-Arithmetic" accesskey="u" rel="up">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Arbitrary_002dPrecision-Integer-Arithmetic-with-gawk"><span>16.5 Arbitrary-Precision Integer Arithmetic with <code class="command">gawk</code><a class="copiable-link" href="#Arbitrary_002dPrecision-Integer-Arithmetic-with-gawk"> &para;</a></span></h3>
<a class="index-entry-id" id="index-integers-arbitrary-precision"></a>
<a class="index-entry-id" id="index-arbitrary-precision-integers"></a>

<p>When given the <samp class="option">-M</samp> option,
<code class="command">gawk</code> performs all integer arithmetic using GMP arbitrary-precision
integers.  Any number that looks like an integer in a source
or data file is stored as an arbitrary-precision integer.  The size
of the integer is limited only by the available memory.  For example,
the following computes
5<sup class="sup">4<sup class="sup">3<sup class="sup">2</sup></sup></sup>,
the result of which is beyond the
limits of ordinary hardware double-precision floating-point values:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -M 'BEGIN {</kbd>
&gt;   <kbd class="kbd">x = 5^4^3^2</kbd>
&gt;   <kbd class="kbd">print &quot;number of digits =&quot;, length(x)</kbd>
&gt;   <kbd class="kbd">print substr(x, 1, 20), &quot;...&quot;, substr(x, length(x) - 19, 20)</kbd>
&gt; <kbd class="kbd">}'</kbd>
-| number of digits = 183231
-| 62060698786608744707 ... 92256259918212890625
</pre></div>

<p>If instead you were to compute the same value using arbitrary-precision
floating-point values, the precision needed for correct output (using
the formula
&lsquo;<samp class="samp">prec = 3.322 * dps</samp>&rsquo;)
would be 3.322 x 183231,
or 608693.
</p>
<p>The result from an arithmetic operation with an integer and a floating-point value
is a floating-point value with a precision equal to the working precision.
The following program calculates the eighth term in
Sylvester&rsquo;s sequence<a class="footnote" id="DOCF104" href="#FOOT104"><sup>104</sup></a>
using a recurrence:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -M 'BEGIN {</kbd>
&gt;   <kbd class="kbd">s = 2.0</kbd>
&gt;   <kbd class="kbd">for (i = 1; i &lt;= 7; i++)</kbd>
&gt;       <kbd class="kbd">s = s * (s - 1) + 1</kbd>
&gt;   <kbd class="kbd">print s</kbd>
&gt; <kbd class="kbd">}'</kbd>
-| 113423713055421845118910464
</pre></div>

<p>The output differs from the actual number, 113,423,713,055,421,844,361,000,443,
because the default precision of 53 bits is not enough to represent the
floating-point results exactly. You can either increase the precision
(100 bits is enough in this case), or replace the floating-point constant
&lsquo;<samp class="samp">2.0</samp>&rsquo; with an integer, to perform all computations using integer
arithmetic to get the correct output.
</p>
<p>Sometimes <code class="command">gawk</code> must implicitly convert an arbitrary-precision
integer into an arbitrary-precision floating-point value.  This is
primarily because the MPFR library does not always provide the relevant
interface to process arbitrary-precision integers or mixed-mode numbers
as needed by an operation or function.  In such a case, the precision is
set to the minimum value necessary for exact conversion, and the working
precision is not used for this purpose.  If this is not what you need or
want, you can employ a subterfuge and convert the integer to floating
point first, like this:
</p>
<div class="example">
<pre class="example-preformatted">gawk -M 'BEGIN { n = 13; print (n + 0.0) % 2.0 }'
</pre></div>

<p>You can avoid this issue altogether by specifying the number as a floating-point value
to begin with:
</p>
<div class="example">
<pre class="example-preformatted">gawk -M 'BEGIN { n = 13.0; print n % 2.0 }'
</pre></div>

<p>Note that for this particular example, it is likely best
to just use the following:
</p>
<div class="example">
<pre class="example-preformatted">gawk -M 'BEGIN { n = 13; print n % 2 }'
</pre></div>

<p>When dividing two arbitrary precision integers with either
&lsquo;<samp class="samp">/</samp>&rsquo; or &lsquo;<samp class="samp">%</samp>&rsquo;, the result is typically an arbitrary
precision floating point value (unless the denominator evenly
divides into the numerator).
</p>
<hr>
</div>
<div class="section-level-extent" id="Checking-for-MPFR">
<div class="nav-panel">
<p>
Next: <a href="#POSIX-Floating-Point-Problems" accesskey="n" rel="next">Standards Versus Existing Practice</a>, Previous: <a href="#Arbitrary-Precision-Integers" accesskey="p" rel="prev">Arbitrary-Precision Integer Arithmetic with <code class="command">gawk</code></a>, Up: <a href="#Arbitrary-Precision-Arithmetic" accesskey="u" rel="up">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="How-To-Check-If-MPFR-Is-Available"><span>16.6 How To Check If MPFR Is Available<a class="copiable-link" href="#How-To-Check-If-MPFR-Is-Available"> &para;</a></span></h3>

<a class="index-entry-id" id="index-checking-for-MPFR"></a>
<a class="index-entry-id" id="index-MPFR_002c-checking-for"></a>
<p>Occasionally, you might like to be able to check if <code class="command">gawk</code>
was invoked with the <samp class="option">-M</samp> option, enabling arbitrary-precision
arithmetic.  You can do so with the following function, contributed
by Andrew Schorr:
</p>
<div class="example">
<pre class="example-preformatted"># adequate_math_precision --- return true if we have enough bits

function adequate_math_precision(n)
{
    return (1 != (1+(1/(2^(n-1)))))
}
</pre></div>

<p>Here is code that invokes the function in order to check
if arbitrary-precision arithmetic is available:
</p>
<div class="example">
<pre class="example-preformatted">BEGIN {
    # How many bits of mantissa precision are required
    # for this program to function properly?
    fpbits = 123

    # We hope that we were invoked with MPFR enabled. If so, the
    # following statement should configure calculations to our desired
    # precision.
    PREC = fpbits

    if (! adequate_math_precision(fpbits)) {
        print(&quot;Error: insufficient computation precision available.\n&quot; \
              &quot;Try again with the -M argument?&quot;) &gt; &quot;/dev/stderr&quot;
        # Note: you may need to set a flag here to bail out of END rules
        exit 1
    }
}
</pre></div>

<p>Please be aware that <code class="code">exit</code> will jump to the <code class="code">END</code> rules, if present (see <a class="pxref" href="#Exit-Statement">The <code class="code">exit</code> Statement</a>).
</p>
<hr>
</div>
<div class="section-level-extent" id="POSIX-Floating-Point-Problems">
<div class="nav-panel">
<p>
Next: <a href="#Floating-point-summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Checking-for-MPFR" accesskey="p" rel="prev">How To Check If MPFR Is Available</a>, Up: <a href="#Arbitrary-Precision-Arithmetic" accesskey="u" rel="up">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Standards-Versus-Existing-Practice"><span>16.7 Standards Versus Existing Practice<a class="copiable-link" href="#Standards-Versus-Existing-Practice"> &para;</a></span></h3>

<p>Historically, <code class="command">awk</code> has converted any nonnumeric-looking string
to the numeric value zero, when required.  Furthermore, the original
definition of the language and the original POSIX standards specified that
<code class="command">awk</code> only understands decimal numbers (base 10), and not octal
(base 8) or hexadecimal numbers (base 16).
</p>
<p>Changes in the language of the
2001 and 2004 POSIX standards can be interpreted to imply that <code class="command">awk</code>
should support additional features.  These features are:
</p>
<ul class="itemize mark-bullet">
<li>Interpretation of floating-point data values specified in hexadecimal
notation (e.g., <code class="code">0xDEADBEEF</code>). (Note: data values, <em class="emph">not</em>
source code constants.)

</li><li>Support for the special IEEE 754 floating-point values &ldquo;not a number&rdquo;
(NaN), positive infinity (&ldquo;inf&rdquo;), and negative infinity (&ldquo;&minus;inf&rdquo;).
In particular, the format for these values is as specified by the ISO 1999
C standard, which ignores case and can allow implementation-dependent additional
characters after the &lsquo;<samp class="samp">nan</samp>&rsquo; and allow either &lsquo;<samp class="samp">inf</samp>&rsquo; or &lsquo;<samp class="samp">infinity</samp>&rsquo;.
</li></ul>

<p>The first problem is that both of these are clear changes to historical
practice:
</p>
<ul class="itemize mark-bullet">
<li>The <code class="command">gawk</code> maintainer feels that supporting hexadecimal
floating-point values, in particular, is ugly, and was never intended by the
original designers to be part of the language.

</li><li>Allowing completely alphabetic strings to have valid numeric
values is also a very severe departure from historical practice.
</li></ul>

<p>The second problem is that the <code class="command">gawk</code> maintainer feels that this
interpretation of the standard, which required a certain amount of
&ldquo;language lawyering&rdquo; to arrive at in the first place, was not even
intended by the standard developers.  In other words, &ldquo;We see how you
got where you are, but we don&rsquo;t think that that&rsquo;s where you want to be.&rdquo;
</p>
<p>Recognizing these issues, but attempting to provide compatibility
with the earlier versions of the standard,
the 2008 POSIX standard added explicit wording to allow, but not require,
that <code class="command">awk</code> support hexadecimal floating-point values and
special values for &ldquo;not a number&rdquo; and infinity.
</p>
<p>Although the <code class="command">gawk</code> maintainer continues to feel that
providing those features is inadvisable,
nevertheless, on systems that support IEEE floating point, it seems
reasonable to provide <em class="emph">some</em> way to support NaN and infinity values.
The solution implemented in <code class="command">gawk</code> is as follows:
</p>
<ul class="itemize mark-bullet">
<li>With the <samp class="option">--posix</samp> command-line option, <code class="command">gawk</code> becomes
&ldquo;hands off.&rdquo; String values are passed directly to the system library&rsquo;s
<code class="code">strtod()</code> function, and if it successfully returns a numeric value,
that is what&rsquo;s used.<a class="footnote" id="DOCF105" href="#FOOT105"><sup>105</sup></a>
By definition, the results are not portable across
different systems.  They are also a little surprising:

<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo nanny | gawk --posix '{ print $1 + 0 }'</kbd>
-| nan
$ <kbd class="kbd">echo 0xDeadBeef | gawk --posix '{ print $1 + 0 }'</kbd>
-| 3735928559
</pre></div>

</li><li>Without <samp class="option">--posix</samp>, <code class="command">gawk</code> interprets the four string values
&lsquo;<samp class="samp">+inf</samp>&rsquo;,
&lsquo;<samp class="samp">-inf</samp>&rsquo;,
&lsquo;<samp class="samp">+nan</samp>&rsquo;,
and
&lsquo;<samp class="samp">-nan</samp>&rsquo;
specially, producing the corresponding special numeric values.
The leading sign acts a signal to <code class="command">gawk</code> (and the user)
that the value is really numeric.  Hexadecimal floating point is
not supported (unless you also use <samp class="option">--non-decimal-data</samp>,
which is <em class="emph">not</em> recommended). For example:

<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo nanny | gawk '{ print $1 + 0 }'</kbd>
-| 0
$ <kbd class="kbd">echo +nan | gawk '{ print $1 + 0 }'</kbd>
-| +nan
$ <kbd class="kbd">echo 0xDeadBeef | gawk '{ print $1 + 0 }'</kbd>
-| 0
</pre></div>

<p><code class="command">gawk</code> ignores case in the four special values.
Thus, &lsquo;<samp class="samp">+nan</samp>&rsquo; and &lsquo;<samp class="samp">+NaN</samp>&rsquo; are the same.
</p></li></ul>

<a class="index-entry-id" id="index-POSIX-mode-12"></a>
<p>Besides handling input, <code class="command">gawk</code> also needs to print &ldquo;correct&rdquo; values on
output when a value is either NaN or infinity. Starting with version
4.2.2, for such values <code class="command">gawk</code> prints one of the four strings
just described: &lsquo;<samp class="samp">+inf</samp>&rsquo;, &lsquo;<samp class="samp">-inf</samp>&rsquo;, &lsquo;<samp class="samp">+nan</samp>&rsquo;, or &lsquo;<samp class="samp">-nan</samp>&rsquo;.
Similarly, in POSIX mode, <code class="command">gawk</code> prints the result of
the system&rsquo;s C <code class="code">printf()</code> function using the <code class="code">%g</code> format string
for the value, whatever that may be.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> The sign used for NaN values can vary!  The result depends upon both
the underlying system architecture and the underlying library used to
format NaN values. In particular, it&rsquo;s possible to get different results
for the same function call depending upon whether or not <code class="command">gawk</code>
is running in MPFR mode (<samp class="option">-M</samp>) or not. Caveat Emptor!
</p></blockquote>

<hr>
</div>
<div class="section-level-extent" id="Floating-point-summary">
<div class="nav-panel">
<p>
Previous: <a href="#POSIX-Floating-Point-Problems" accesskey="p" rel="prev">Standards Versus Existing Practice</a>, Up: <a href="#Arbitrary-Precision-Arithmetic" accesskey="u" rel="up">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary-15"><span>16.8 Summary<a class="copiable-link" href="#Summary-15"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>Most computer arithmetic is done using either integers or floating-point
values.  Standard <code class="command">awk</code> uses double-precision
floating-point values.

</li><li>In the early 1990s Barbie mistakenly said, &ldquo;Math class is tough!&rdquo;
Although math isn&rsquo;t tough, floating-point arithmetic isn&rsquo;t the same
as pencil-and-paper math, and care must be taken:

<ul class="itemize mark-minus">
<li>Not all numbers can be represented exactly.

</li><li>Comparing values should use a delta, instead of being done directly
with &lsquo;<samp class="samp">==</samp>&rsquo; and &lsquo;<samp class="samp">!=</samp>&rsquo;.

</li><li>Errors accumulate.

</li><li>Operations are not always truly associative or distributive.
</li></ul>

</li><li>Increasing the accuracy can help, but it is not a panacea.

</li><li>Often, increasing the accuracy and then rounding to the desired
number of digits produces reasonable results.

</li><li>Use <samp class="option">-M</samp> (or <samp class="option">--bignum</samp>) to enable MPFR
arithmetic. Use <code class="code">PREC</code> to set the precision in bits, and
<code class="code">ROUNDMODE</code> to set the IEEE 754 rounding mode.

</li><li>With <samp class="option">-M</samp>, <code class="command">gawk</code> performs
arbitrary-precision integer arithmetic using the GMP library.
This is faster and more space-efficient than using MPFR for
the same calculations.

</li><li>There are several areas with respect to floating-point
numbers where <code class="command">gawk</code> disagrees with the POSIX standard.
It pays to be aware of them.

</li><li>Overall, there is no need to be unduly suspicious about the results from
floating-point arithmetic. The lesson to remember is that floating-point
arithmetic is always more complex than arithmetic using pencil and
paper. In order to take advantage of the power of floating-point arithmetic,
you need to know its limitations and work within them. For most casual
use of floating-point arithmetic, you will often get the expected result
if you simply round the display of your final results to the correct number
of significant decimal digits.

</li><li>As general advice, avoid presenting numerical data in a manner that
implies better precision than is actually the case.

</li></ul>

<hr>
</div>
</div>
<div class="chapter-level-extent" id="Dynamic-Extensions">
<div class="nav-panel">
<p>
Next: <a href="#Language-History" accesskey="n" rel="next">The Evolution of the <code class="command">awk</code> Language</a>, Previous: <a href="#Arbitrary-Precision-Arithmetic" accesskey="p" rel="prev">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="chapter" id="Writing-Extensions-for-gawk"><span>17 Writing Extensions for <code class="command">gawk</code><a class="copiable-link" href="#Writing-Extensions-for-gawk"> &para;</a></span></h2>
<a class="index-entry-id" id="index-dynamically-loaded-extensions"></a>

<p>It is possible to add new functions written in C or C++ to <code class="command">gawk</code> using
dynamically loaded libraries. This facility is available on systems
that support the C <code class="code">dlopen()</code> and <code class="code">dlsym()</code>
functions.  This chapter describes how to create extensions
using code written in C or C++.
</p>
<p>If you don&rsquo;t know anything about C programming, you can safely skip this
chapter, although you may wish to review the documentation on the
extensions that come with <code class="command">gawk</code> (see <a class="pxref" href="#Extension-Samples">The Sample Extensions in the <code class="command">gawk</code> Distribution</a>),
and the information on the <code class="code">gawkextlib</code> project (see <a class="pxref" href="#gawkextlib">The <code class="code">gawkextlib</code> Project</a>).
The sample extensions are automatically built and installed when
<code class="command">gawk</code> is.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> When <samp class="option">--sandbox</samp> is specified, extensions are disabled
(see <a class="pxref" href="#Options">Command-Line Options</a>).
</p></blockquote>


<ul class="mini-toc">
<li><a href="#Extension-Intro" accesskey="1">Introduction</a></li>
<li><a href="#Plugin-License" accesskey="2">Extension Licensing</a></li>
<li><a href="#Extension-Mechanism-Outline" accesskey="3">How It Works at a High Level</a></li>
<li><a href="#Extension-API-Description" accesskey="4">API Description</a></li>
<li><a href="#Finding-Extensions" accesskey="5">How <code class="command">gawk</code> Finds Extensions</a></li>
<li><a href="#Extension-Example" accesskey="6">Example: Some File Functions</a></li>
<li><a href="#Extension-Samples" accesskey="7">The Sample Extensions in the <code class="command">gawk</code> Distribution</a></li>
<li><a href="#gawkextlib" accesskey="8">The <code class="code">gawkextlib</code> Project</a></li>
<li><a href="#Extension-summary" accesskey="9">Summary</a></li>
<li><a href="#Extension-Exercises">Exercises</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Extension-Intro">
<div class="nav-panel">
<p>
Next: <a href="#Plugin-License" accesskey="n" rel="next">Extension Licensing</a>, Up: <a href="#Dynamic-Extensions" accesskey="u" rel="up">Writing Extensions for <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Introduction"><span>17.1 Introduction<a class="copiable-link" href="#Introduction"> &para;</a></span></h3>

<a class="index-entry-id" id="index-plug_002din"></a>
<p>An <em class="dfn">extension</em> (sometimes called a <em class="dfn">plug-in</em>) is a piece of
external compiled code that <code class="command">gawk</code> can load at runtime to
provide additional functionality, over and above the built-in capabilities
described in the rest of this Web page.
</p>
<p>Extensions are useful because they allow you (of course) to extend
<code class="command">gawk</code>&rsquo;s functionality. For example, they can provide access to
system calls (such as <code class="code">chdir()</code> to change directory) and to other
C library routines that could be of use.  As with most software,
&ldquo;the sky is the limit&rdquo;; if you can imagine something that you might
want to do and can write in C or C++, you can write an extension to do it!
</p>
<p>Extensions are written in C or C++, using the <em class="dfn">application programming
interface</em> (API) defined for this purpose by the <code class="command">gawk</code>
developers.  The rest of this chapter explains
the facilities that the API provides and how to use
them, and presents a small example extension.  In addition, it documents
the sample extensions included in the <code class="command">gawk</code> distribution
and describes the <code class="code">gawkextlib</code> project.
See <a class="xref" href="#Extension-Design">Extension API Design</a>, for a discussion of the extension mechanism
goals and design.
</p>
<hr>
</div>
<div class="section-level-extent" id="Plugin-License">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Mechanism-Outline" accesskey="n" rel="next">How It Works at a High Level</a>, Previous: <a href="#Extension-Intro" accesskey="p" rel="prev">Introduction</a>, Up: <a href="#Dynamic-Extensions" accesskey="u" rel="up">Writing Extensions for <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Extension-Licensing"><span>17.2 Extension Licensing<a class="copiable-link" href="#Extension-Licensing"> &para;</a></span></h3>

<p>Every dynamic extension must be distributed under a license that is
compatible with the GNU GPL (see <a class="pxref" href="#Copying">GNU General Public License</a>).
</p>
<p>In order for the extension to tell <code class="command">gawk</code> that it is
properly licensed, the extension must define the global symbol
<code class="code">plugin_is_GPL_compatible</code>.  If this symbol does not exist,
<code class="command">gawk</code> emits a fatal error and exits when it tries to load
your extension.
</p>
<p>The declared type of the symbol should be <code class="code">int</code>.  It does not need
to be in any allocated section, though.  The code merely asserts that
the symbol exists in the global scope.  Something like this is enough:
</p>
<div class="example">
<pre class="example-preformatted">int plugin_is_GPL_compatible;
</pre></div>

<hr>
</div>
<div class="section-level-extent" id="Extension-Mechanism-Outline">
<div class="nav-panel">
<p>
Next: <a href="#Extension-API-Description" accesskey="n" rel="next">API Description</a>, Previous: <a href="#Plugin-License" accesskey="p" rel="prev">Extension Licensing</a>, Up: <a href="#Dynamic-Extensions" accesskey="u" rel="up">Writing Extensions for <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="How-It-Works-at-a-High-Level"><span>17.3 How It Works at a High Level<a class="copiable-link" href="#How-It-Works-at-a-High-Level"> &para;</a></span></h3>

<p>Communication between
<code class="command">gawk</code> and an extension is two-way.  First, when an extension
is loaded, <code class="command">gawk</code> passes it a pointer to a <code class="code">struct</code> whose fields are
function pointers.
This is shown in <a class="ref" href="#figure_002dload_002dextension">Figure 17.1</a>.
</p>
<div class="float" id="figure_002dload_002dextension">
<div class="center"><img class="image" src="gawk_api-figure1.png" alt="Loading the extension">
</div><div class="caption"><p><strong class="strong">Figure 17.1: </strong>Loading the extension</p></div></div>

<p>The extension can call functions inside <code class="command">gawk</code> through these
function pointers, at runtime, without needing (link-time) access
to <code class="command">gawk</code>&rsquo;s symbols.  One of these function pointers is to a
function for &ldquo;registering&rdquo; new functions.
This is shown in <a class="ref" href="#figure_002dregister_002dnew_002dfunction">Figure 17.2</a>.
</p>
<div class="float" id="figure_002dregister_002dnew_002dfunction">
<div class="center"><img class="image" src="gawk_api-figure2.png" alt="Registering a new Function">
</div><div class="caption"><p><strong class="strong">Figure 17.2: </strong>Registering a new function</p></div></div>

<p>In the other direction, the extension registers its new functions
with <code class="command">gawk</code> by passing function pointers to the functions that
provide the new feature (<code class="code">do_chdir()</code>, for example).  <code class="command">gawk</code>
associates the function pointer with a name and can then call it, using a
defined calling convention.
This is shown in <a class="ref" href="#figure_002dcall_002dnew_002dfunction">Figure 17.3</a>.
</p>
<div class="float" id="figure_002dcall_002dnew_002dfunction">
<div class="center"><img class="image" src="gawk_api-figure3.png" alt="Calling the new function">
</div><div class="caption"><p><strong class="strong">Figure 17.3: </strong>Calling the new function</p></div></div>

<p>The <code class="code">do_<var class="var">xxx</var>()</code> function, in turn, then uses the function
pointers in the API <code class="code">struct</code> to do its work, such as updating
variables or arrays, printing messages, setting <code class="code">ERRNO</code>, and so on.
</p>
<p>Convenience macros make calling through the function pointers look
like regular function calls so that extension code is quite readable
and understandable.
</p>
<p>Although all of this sounds somewhat complicated, the result is that
extension code is quite straightforward to write and to read. You can
see this in the sample extension <samp class="file">filefuncs.c</samp> (see <a class="pxref" href="#Extension-Example">Example: Some File Functions</a>) and also in the <samp class="file">testext.c</samp> code for testing the APIs.
</p>
<p>Some other bits and pieces:
</p>
<ul class="itemize mark-bullet">
<li>The API provides access to <code class="command">gawk</code>&rsquo;s <code class="code">do_<var class="var">xxx</var></code> values,
reflecting command-line options, like <code class="code">do_lint</code>, <code class="code">do_profiling</code>,
and so on (see <a class="pxref" href="#Extension-API-Variables">API Variables</a>).
These are informational: an extension cannot affect their values
inside <code class="command">gawk</code>.  In addition, attempting to assign to them
produces a compile-time error.

</li><li>The API also provides major and minor version numbers, so that an
extension can check if the <code class="command">gawk</code> it is loaded with supports the
facilities it was compiled with.  (Version mismatches &ldquo;shouldn&rsquo;t&rdquo;
happen, but we all know how <em class="emph">that</em> goes.)
See <a class="xref" href="#Extension-Versioning">API Version Constants and Variables</a> for details.
</li></ul>

<hr>
</div>
<div class="section-level-extent" id="Extension-API-Description">
<div class="nav-panel">
<p>
Next: <a href="#Finding-Extensions" accesskey="n" rel="next">How <code class="command">gawk</code> Finds Extensions</a>, Previous: <a href="#Extension-Mechanism-Outline" accesskey="p" rel="prev">How It Works at a High Level</a>, Up: <a href="#Dynamic-Extensions" accesskey="u" rel="up">Writing Extensions for <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="API-Description"><span>17.4 API Description<a class="copiable-link" href="#API-Description"> &para;</a></span></h3>
<a class="index-entry-id" id="index-extension-API"></a>

<p>C or C++ code for an extension must include the header file
<samp class="file">gawkapi.h</samp>, which declares the functions and defines the data
types used to communicate with <code class="command">gawk</code>.
This (rather large) section describes the API in detail.
</p>

<ul class="mini-toc">
<li><a href="#Extension-API-Functions-Introduction" accesskey="1">Introduction</a></li>
<li><a href="#General-Data-Types" accesskey="2">General-Purpose Data Types</a></li>
<li><a href="#Memory-Allocation-Functions" accesskey="3">Memory Allocation Functions and Convenience Macros</a></li>
<li><a href="#Constructor-Functions" accesskey="4">Constructor Functions</a></li>
<li><a href="#API-Ownership-of-MPFR-and-GMP-Values" accesskey="5">Managing MPFR and GMP Values</a></li>
<li><a href="#Registration-Functions" accesskey="6">Registration Functions</a></li>
<li><a href="#Printing-Messages" accesskey="7">Printing Messages</a></li>
<li><a href="#Updating-ERRNO" accesskey="8">Updating <code class="code">ERRNO</code></a></li>
<li><a href="#Requesting-Values" accesskey="9">Requesting Values</a></li>
<li><a href="#Accessing-Parameters">Accessing and Updating Parameters</a></li>
<li><a href="#Symbol-Table-Access">Symbol Table Access</a></li>
<li><a href="#Array-Manipulation">Array Manipulation</a></li>
<li><a href="#Redirection-API">Accessing and Manipulating Redirections</a></li>
<li><a href="#Extension-API-Variables">API Variables</a></li>
<li><a href="#Extension-API-Boilerplate">Boilerplate Code</a></li>
<li><a href="#Changes-from-API-V1">Changes From Version 1 of the API</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Extension-API-Functions-Introduction">
<div class="nav-panel">
<p>
Next: <a href="#General-Data-Types" accesskey="n" rel="next">General-Purpose Data Types</a>, Up: <a href="#Extension-API-Description" accesskey="u" rel="up">API Description</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Introduction-1"><span>17.4.1 Introduction<a class="copiable-link" href="#Introduction-1"> &para;</a></span></h4>

<p>Access to facilities within <code class="command">gawk</code> is achieved
by calling through function pointers passed into your extension.
</p>
<p>API function pointers are provided for the following kinds of operations:
</p>
<ul class="itemize mark-bullet">
<li>Allocating, reallocating, and releasing memory.

</li><li>Registration functions. You may register:

<ul class="itemize mark-minus">
<li>Extension functions
</li><li>Exit callbacks
</li><li>A version string
</li><li>Input parsers
</li><li>Output wrappers
</li><li>Two-way processors
</li></ul>

<p>All of these are discussed in detail later in this chapter.
</p>
</li><li>Printing fatal, warning, and &ldquo;lint&rdquo; warning messages.

</li><li>Updating <code class="code">ERRNO</code>, or unsetting it.

</li><li>Accessing parameters, including converting an undefined parameter into
an array.

</li><li>Symbol table access: retrieving a global variable, creating one,
or changing one.

</li><li>Creating and releasing cached values; this provides an
efficient way to use values for multiple variables and
can be a big performance win.

</li><li>Manipulating arrays:

<ul class="itemize mark-minus">
<li>Retrieving, adding, deleting, and modifying elements

</li><li>Getting the count of elements in an array

</li><li>Creating a new array

</li><li>Clearing an array

</li><li>Flattening an array for easy C-style looping over all its indices and elements
</li></ul>

</li><li>Accessing and manipulating redirections.

</li></ul>

<p>Some points about using the API:
</p>
<ul class="itemize mark-bullet">
<li>The following types, macros, and/or functions are referenced
in <samp class="file">gawkapi.h</samp>.  For correct use, you must therefore include the
corresponding standard header file <em class="emph">before</em> including <samp class="file">gawkapi.h</samp>.
The list of macros and related header files is shown in <a class="ref" href="#table_002dapi_002dstd_002dheaders">Table 17.1</a>.

<div class="float" id="table_002dapi_002dstd_002dheaders">
<table class="multitable">
<thead><tr><th>C entity</th><th>Header file</th></tr></thead>
<tbody><tr><td><code class="code">EOF</code></td><td><code class="code">&lt;stdio.h&gt;</code></td></tr>
<tr><td>Values for <code class="code">errno</code></td><td><code class="code">&lt;errno.h&gt;</code></td></tr>
<tr><td><code class="code">FILE</code></td><td><code class="code">&lt;stdio.h&gt;</code></td></tr>
<tr><td><code class="code">NULL</code></td><td><code class="code">&lt;stddef.h&gt;</code></td></tr>
<tr><td><code class="code">memcpy()</code></td><td><code class="code">&lt;string.h&gt;</code></td></tr>
<tr><td><code class="code">memset()</code></td><td><code class="code">&lt;string.h&gt;</code></td></tr>
<tr><td><code class="code">size_t</code></td><td><code class="code">&lt;sys/types.h&gt;</code></td></tr>
<tr><td><code class="code">struct stat</code></td><td><code class="code">&lt;sys/stat.h&gt;</code></td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 17.1: </strong>Standard header files needed by API</p></div></div>
<p>Due to portability concerns, especially to systems that are not
fully standards-compliant, it is your responsibility
to include the correct files in the correct way. This requirement
is necessary in order to keep <samp class="file">gawkapi.h</samp> clean, instead of becoming
a portability hodge-podge as can be seen in some parts of
the <code class="command">gawk</code> source code.
</p>
</li><li>If your extension uses MPFR facilities, and you wish to receive such
values from <code class="command">gawk</code> and/or pass such values to it, you must include the
<code class="code">&lt;mpfr.h&gt;</code> header before including <code class="code">&lt;gawkapi.h&gt;</code>.

</li><li>The <samp class="file">gawkapi.h</samp> file may be included more than once without ill effect.
Doing so, however, is poor coding practice.

</li><li>Although the API only uses ISO C 90 features, there is an exception; the
&ldquo;constructor&rdquo; functions use the <code class="code">inline</code> keyword. If your compiler
does not support this keyword, you should either place
&lsquo;<samp class="samp">-Dinline=''</samp>&rsquo; on your command line or use the GNU Autotools and include a
<samp class="file">config.h</samp> file in your extensions.

</li><li>All pointers filled in by <code class="command">gawk</code> point to memory
managed by <code class="command">gawk</code> and should be treated by the extension as
read-only.

<p>Memory for <em class="emph">all</em> strings passed into <code class="command">gawk</code>
from the extension <em class="emph">must</em> come from calling one of
<code class="code">gawk_malloc()</code>, <code class="code">gawk_calloc()</code>, or <code class="code">gawk_realloc()</code>,
and is managed by <code class="command">gawk</code> from then on.
</p>
<p>Memory for MPFR/GMP values that come from <code class="command">gawk</code>
should also be treated as read-only.  However, unlike strings,
memory for MPFR/GMP values allocated by an extension and passed
into <code class="command">gawk</code> is <em class="emph">copied</em> by <code class="command">gawk</code>; the extension
should then free the values itself to avoid memory leaks. This is
discussed further in <strong class="strong">API Ownership of MPFR and GMP Values</strong>.
</p>
</li><li>The API defines several simple <code class="code">struct</code>s that map values as seen
from <code class="command">awk</code>.  A value can be a <code class="code">double</code>, a string, or an
array (as in multidimensional arrays, or when creating a new array).

<p>String values maintain both pointer and length, because embedded <small class="sc">NUL</small>
characters are allowed.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> By intent, <code class="command">gawk</code> maintains strings using the current multibyte
encoding (as defined by <code class="env">LC_<var class="var">xxx</var></code> environment variables)
and not using wide characters.  This matches how <code class="command">gawk</code> stores
strings internally and also how characters are likely to be input into
and output from files.
</p></blockquote>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> String values passed to an extension by <code class="command">gawk</code> are always
<small class="sc">NUL</small>-terminated.  Thus it is safe to pass such string values to
standard library and system routines. However, because <code class="command">gawk</code>
allows embedded <small class="sc">NUL</small> characters in string data, before using the data
as a regular C string, you should check that the length for that string
passed to the extension matches the return value of <code class="code">strlen()</code>
for it.
</p></blockquote>

</li><li>When retrieving a value (such as a parameter or that of a global variable
or array element), the extension requests a specific type (number, string,
scalar, value cookie, array, or &ldquo;undefined&rdquo;).  When the request is
&ldquo;undefined,&rdquo; the returned value will have the real underlying type.

<p>However, if the request and actual type don&rsquo;t match, the access function
returns &ldquo;false&rdquo; and fills in the type of the actual value that is there,
so that the extension can, e.g., print an error message
(such as &ldquo;scalar passed where array expected&rdquo;).
</p>
</li></ul>

<p>You may call the API functions by using the function pointers
directly, but the interface is not so pretty. To make extension code look
more like regular code, the <samp class="file">gawkapi.h</samp> header file defines several
macros that you should use in your code.  This section presents
the macros as if they were functions.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="General-Data-Types">
<div class="nav-panel">
<p>
Next: <a href="#Memory-Allocation-Functions" accesskey="n" rel="next">Memory Allocation Functions and Convenience Macros</a>, Previous: <a href="#Extension-API-Functions-Introduction" accesskey="p" rel="prev">Introduction</a>, Up: <a href="#Extension-API-Description" accesskey="u" rel="up">API Description</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="General_002dPurpose-Data-Types"><span>17.4.2 General-Purpose Data Types<a class="copiable-link" href="#General_002dPurpose-Data-Types"> &para;</a></span></h4>

<a class="index-entry-id" id="index-Robbins-Arnold-4"></a>
<a class="index-entry-id" id="index-Ramey_002c-Chet-1"></a>
<blockquote class="quotation">
<p><i class="i">I have a true love/hate relationship with unions.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Arnold Robbins</em>
</div>
<blockquote class="quotation">
<p><i class="i">That&rsquo;s the thing about unions: the compiler will arrange things so they
can accommodate both love and hate.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Chet Ramey</em>
</div>
<p>The extension API defines a number of simple types and structures for
general-purpose use. Additional, more specialized, data structures are
introduced in subsequent sections, together with the functions
that use them.
</p>
<p>The general-purpose types and structures are as follows:
</p>
<dl class="table">
<dt><code class="code">typedef void *awk_ext_id_t;</code></dt>
<dd><p>A value of this type is received from <code class="command">gawk</code> when an extension is loaded.
That value must then be passed back to <code class="command">gawk</code> as the first parameter of
each API function.
</p>
</dd>
<dt><code class="code">#define awk_const &hellip;</code></dt>
<dd><p>This macro expands to &lsquo;<samp class="samp">const</samp>&rsquo; when compiling an extension,
and to nothing when compiling <code class="command">gawk</code> itself.  This makes
certain fields in the API data structures unwritable from extension code,
while allowing <code class="command">gawk</code> to use them as it needs to.
</p>
</dd>
<dt><code class="code">typedef enum awk_bool {</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;awk_false = 0,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;awk_true</code></dt>
<dt><code class="code">} awk_bool_t;</code></dt>
<dd><p>A simple Boolean type.
</p>
</dd>
<dt><code class="code">typedef struct awk_string {</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;char *str;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* data */</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;size_t len;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* length thereof, in chars */</code></dt>
<dt><code class="code">} awk_string_t;</code></dt>
<dd><p>This represents a mutable string. <code class="command">gawk</code>
owns the memory pointed to if it supplied
the value. Otherwise, it takes ownership of the memory pointed to.
<em class="emph">Such memory must come from calling one of the
<code class="code">gawk_malloc()</code>, <code class="code">gawk_calloc()</code>, or
<code class="code">gawk_realloc()</code> functions!</em>
</p>
<p>As mentioned earlier, strings are maintained using the current
multibyte encoding.
</p>
</dd>
<dt><code class="code">typedef enum {</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;AWK_UNDEFINED,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;AWK_NUMBER,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;AWK_STRING,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;AWK_REGEX,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;AWK_STRNUM,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;AWK_ARRAY,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;AWK_SCALAR,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* opaque access to a variable */</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;AWK_VALUE_COOKIE,&nbsp;&nbsp;&nbsp;/* for updating a previously created value */</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;AWK_BOOL</code></dt>
<dt><code class="code">} awk_valtype_t;</code></dt>
<dd><p>This <code class="code">enum</code> indicates the type of a value.
It is used in the following <code class="code">struct</code>.
</p>
</dd>
<dt><code class="code">typedef struct awk_value {</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;awk_valtype_t   val_type;</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;union {</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_string_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s;</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awknum_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n;</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_array_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a;</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_scalar_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scl;</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_value_cookie_t&nbsp;vc;</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_bool_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b;</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;} u;</code></dt>
<dt><code class="code">} awk_value_t;</code></dt>
<dd><p>An &ldquo;<code class="command">awk</code> value.&rdquo;
The <code class="code">val_type</code> member indicates what kind of value the
<code class="code">union</code> holds, and each member is of the appropriate type.
</p>
</dd>
<dt><code class="code">#define str_value&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u.s</code></dt>
<dt><code class="code">#define strnum_value&nbsp;&nbsp;&nbsp;str_value</code></dt>
<dt><code class="code">#define regex_value&nbsp;&nbsp;&nbsp;&nbsp;str_value</code></dt>
<dt><code class="code">#define num_value&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u.n.d</code></dt>
<dt><code class="code">#define num_type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u.n.type</code></dt>
<dt><code class="code">#define num_ptr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u.n.ptr</code></dt>
<dt><code class="code">#define array_cookie&nbsp;&nbsp;&nbsp;u.a</code></dt>
<dt><code class="code">#define scalar_cookie&nbsp;&nbsp;u.scl</code></dt>
<dt><code class="code">#define value_cookie&nbsp;&nbsp;&nbsp;u.vc</code></dt>
<dt><code class="code">#define bool_value&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u.b</code></dt>
<dd><p>Using these macros makes accessing the fields of the <code class="code">awk_value_t</code> more
readable.
</p>
</dd>
<dt><code class="code">enum AWK_NUMBER_TYPE {</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;AWK_NUMBER_TYPE_DOUBLE,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;AWK_NUMBER_TYPE_MPFR,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;AWK_NUMBER_TYPE_MPZ</code></dt>
<dt><code class="code">};</code></dt>
<dd><p>This <code class="code">enum</code> is used in the following structure for defining the
type of numeric value that is being worked with.  It is declared at the
top level of the file so that it works correctly for C++ as well as for C.
</p>
</dd>
<dt><code class="code">typedef struct awk_number {</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;double d;</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;enum AWK_NUMBER_TYPE type;</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;void *ptr;</code></dt>
<dt><code class="code">} awk_number_t;</code></dt>
<dd><p>This represents a numeric value.  Internally, <code class="command">gawk</code> stores
every number as either a C <code class="code">double</code>, a GMP integer, or an MPFR
arbitrary-precision floating-point value.  In order to allow extensions
to also support GMP and MPFR values, numeric values are passed in this
structure.
</p>
<p>The double-precision <code class="code">d</code> element is always populated
in data received from <code class="command">gawk</code>. In addition, by examining the
<code class="code">type</code> member, an extension can determine if the <code class="code">ptr</code>
member is either a GMP integer (type <code class="code">mpz_ptr</code>), or an MPFR
floating-point value (type <code class="code">mpfr_ptr_t</code>), and cast it appropriately.
</p>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> Any MPFR or MPZ values that you create and pass to <code class="command">gawk</code>
to save are <em class="emph">copied</em>. This means you are responsible to release
the storage once you&rsquo;re done with it. See the sample <code class="code">intdiv</code>
extension for some example code.
</p></blockquote>

</dd>
<dt><code class="code">typedef void *awk_scalar_t;</code></dt>
<dd><p>Scalars can be represented as an opaque type. These values are obtained
from <code class="command">gawk</code> and then passed back into it. This is discussed
in a general fashion in the text following this list, and in more detail in
<a class="ref" href="#Symbol-table-by-cookie">Variable Access and Update by Cookie</a>.
</p>
</dd>
<dt><code class="code">typedef void *awk_value_cookie_t;</code></dt>
<dd><p>A &ldquo;value cookie&rdquo; is an opaque type representing a cached value.
This is also discussed in a general fashion in the text following this list,
and in more detail in <a class="ref" href="#Cached-values">Creating and Using Cached Values</a>.
</p>
</dd>
</dl>

<p>Scalar values in <code class="command">awk</code> are numbers, strings, strnums, or typed regexps. The
<code class="code">awk_value_t</code> struct represents values.  The <code class="code">val_type</code> member
indicates what is in the <code class="code">union</code>.
</p>
<p>Representing numbers is easy&mdash;the API uses a C <code class="code">double</code>.  Strings
require more work. Because <code class="command">gawk</code> allows embedded <small class="sc">NUL</small> bytes
in string values, a string must be represented as a pair containing a
data pointer and length. This is the <code class="code">awk_string_t</code> type.
</p>
<p>A strnum (numeric string) value is represented as a string and consists
of user input data that appears to be numeric.
When an extension creates a strnum value, the result is a string flagged
as user input. Subsequent parsing by <code class="command">gawk</code> then determines whether it
looks like a number and should be treated as a strnum, or as a regular string.
</p>
<p>This is useful in cases where an extension function would like to do something
comparable to the <code class="code">split()</code> function which sets the strnum attribute
on the array elements it creates.  For example, an extension that implements
CSV splitting would want to use this feature. This is also useful for a
function that retrieves a data item from a database. The PostgreSQL
<code class="code">PQgetvalue()</code> function, for example, returns a string that may be numeric
or textual depending on the contents.
</p>
<p>Typed regexp values (see <a class="pxref" href="#Strong-Regexp-Constants">Strongly Typed Regexp Constants</a>) are not of
much use to extension functions.  Extension functions can tell that
they&rsquo;ve received them, and create them for scalar values. Otherwise,
they can examine the text of the regexp through <code class="code">regex_value.str</code>
and <code class="code">regex_value.len</code>.
</p>
<p>Identifiers (i.e., the names of global variables) can be associated
with either scalar values or with arrays.  In addition, <code class="command">gawk</code>
provides true arrays of arrays, where any given array element can
itself be an array.  Discussion of arrays is delayed until
<a class="ref" href="#Array-Manipulation">Array Manipulation</a>.
</p>
<p>The various macros listed earlier make it easier to use the elements
of the <code class="code">union</code> as if they were fields in a <code class="code">struct</code>; this
is a common coding practice in C.  Such code is easier to write and to
read, but it remains <em class="emph">your</em> responsibility to make sure that
the <code class="code">val_type</code> member correctly reflects the type of the value in
the <code class="code">awk_value_t</code> struct.
</p>
<p>Conceptually, the first three members of the <code class="code">union</code> (number, string,
and array) are all that is needed for working with <code class="command">awk</code> values.
However, because the API provides routines for accessing and changing
the value of a global scalar variable only by using the variable&rsquo;s name,
there is a performance penalty: <code class="command">gawk</code> must find the variable
each time it is accessed and changed.  This turns out to be a real issue,
not just a theoretical one.
</p>
<p>Thus, if you know that your extension will spend considerable time
reading and/or changing the value of one or more scalar variables, you
can obtain a <em class="dfn">scalar cookie</em><a class="footnote" id="DOCF106" href="#FOOT106"><sup>106</sup></a>
object for that variable, and then use
the cookie for getting the variable&rsquo;s value or for changing the variable&rsquo;s
value.
The <code class="code">awk_scalar_t</code> type holds a scalar cookie, and the
<code class="code">scalar_cookie</code> macro provides access to the value of that type
in the <code class="code">awk_value_t</code> struct.
Given a scalar cookie, <code class="command">gawk</code> can directly retrieve or
modify the value, as required, without having to find it first.
</p>
<p>The <code class="code">awk_value_cookie_t</code> type and <code class="code">value_cookie</code> macro are similar.
If you know that you wish to
use the same numeric or string <em class="emph">value</em> for one or more variables,
you can create the value once, retaining a <em class="dfn">value cookie</em> for it,
and then pass in that value cookie whenever you wish to set the value of a
variable.  This saves storage space within the running <code class="command">gawk</code>
process and reduces the time needed to create the value.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Memory-Allocation-Functions">
<div class="nav-panel">
<p>
Next: <a href="#Constructor-Functions" accesskey="n" rel="next">Constructor Functions</a>, Previous: <a href="#General-Data-Types" accesskey="p" rel="prev">General-Purpose Data Types</a>, Up: <a href="#Extension-API-Description" accesskey="u" rel="up">API Description</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Memory-Allocation-Functions-and-Convenience-Macros"><span>17.4.3 Memory Allocation Functions and Convenience Macros<a class="copiable-link" href="#Memory-Allocation-Functions-and-Convenience-Macros"> &para;</a></span></h4>
<a class="index-entry-id" id="index-allocating-memory-for-extensions"></a>
<a class="index-entry-id" id="index-extensions-loadable-allocating-memory"></a>
<a class="index-entry-id" id="index-memory_002c-allocating-for-extensions"></a>

<p>The API provides a number of <em class="dfn">memory allocation</em> functions for
allocating memory that can be passed to <code class="command">gawk</code>, as well as a number of
convenience macros.
This subsection presents them all as function prototypes, in
the way that extension code would use them:
</p>
<dl class="table">
<dt><code class="code">void *gawk_malloc(size_t size);</code></dt>
<dd><p>Call the correct version of <code class="code">malloc()</code> to allocate storage that may
be passed to <code class="command">gawk</code>.
</p>
</dd>
<dt><code class="code">void *gawk_calloc(size_t nmemb, size_t size);</code></dt>
<dd><p>Call the correct version of <code class="code">calloc()</code> to allocate storage that may
be passed to <code class="command">gawk</code>.
</p>
</dd>
<dt><code class="code">void *gawk_realloc(void *ptr, size_t size);</code></dt>
<dd><p>Call the correct version of <code class="code">realloc()</code> to allocate storage that may
be passed to <code class="command">gawk</code>.
</p>
</dd>
<dt><code class="code">void gawk_free(void *ptr);</code></dt>
<dd><p>Call the correct version of <code class="code">free()</code> to release storage that was
allocated with <code class="code">gawk_malloc()</code>, <code class="code">gawk_calloc()</code>, or <code class="code">gawk_realloc()</code>.
</p></dd>
</dl>

<p>The API has to provide these functions because it is possible
for an extension to be compiled and linked against a different
version of the C library than was used for the <code class="command">gawk</code>
executable.<a class="footnote" id="DOCF107" href="#FOOT107"><sup>107</sup></a> If <code class="command">gawk</code> were
to use its version of <code class="code">free()</code> when the memory came from an
unrelated version of <code class="code">malloc()</code>, unexpected behavior would
likely result.
</p>
<p>Three convenience macros may be used for allocating storage
from <code class="code">gawk_malloc()</code>, <code class="code">gawk_calloc</code>, and
<code class="code">gawk_realloc()</code>. If the allocation fails, they cause <code class="command">gawk</code>
to exit with a fatal error message.  They should be used as if they were
procedure calls that do not return a value:
</p>
<dl class="table">
<dt><code class="code">#define emalloc(pointer, type, size, message) &hellip;</code></dt>
<dd><p>The arguments to this macro are as follows:
</p>
<dl class="table">
<dt><code class="code">pointer</code></dt>
<dd><p>The pointer variable to point at the allocated storage.
</p>
</dd>
<dt><code class="code">type</code></dt>
<dd><p>The type of the pointer variable.  This is used to create a cast for
the call to <code class="code">gawk_malloc()</code>.
</p>
</dd>
<dt><code class="code">size</code></dt>
<dd><p>The total number of bytes to be allocated.
</p>
</dd>
<dt><code class="code">message</code></dt>
<dd><p>A message to be prefixed to the fatal error message. Typically this is the name
of the function using the macro.
</p></dd>
</dl>

<p>For example, you might allocate a string value like so:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">awk_value_t result;
char *message;
const char greet[] = &quot;Don't Panic!&quot;;

emalloc(message, char *, sizeof(greet), &quot;myfunc&quot;);
strcpy(message, greet);
make_malloced_string(message, strlen(message), &amp; result);
</pre></div></div>

<br>
<br>
</dd>
<dt><code class="code">#define ezalloc(pointer, type, size, message) &hellip;</code></dt>
<dd><p>This is like <code class="code">emalloc()</code>, but it calls <code class="code">gawk_calloc()</code>
instead of <code class="code">gawk_malloc()</code>.
The arguments are the same as for the <code class="code">emalloc()</code> macro, but this
macro guarantees that the memory returned is initialized to zero.
</p>
</dd>
<dt><code class="code">#define erealloc(pointer, type, size, message) &hellip;</code></dt>
<dd><p>This is like <code class="code">emalloc()</code>, but it calls <code class="code">gawk_realloc()</code>
instead of <code class="code">gawk_malloc()</code>.
The arguments are the same as for the <code class="code">emalloc()</code> macro.
</p></dd>
</dl>

<p>Two additional functions allocate MPFR and GMP objects for use
by extension functions that need to create and then return such
values.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> These functions are obsolete. Extension functions that need local MPFR
and GMP values should simply allocate them on the stack and clear them,
as any other code would.
</p></blockquote>

<p>The functions are:
</p>
<dl class="table">
<dt><code class="code">void *get_mpfr_ptr();</code></dt>
<dd><p>Allocate and initialize an MPFR object and return a pointer to it.
If the allocation fails, <code class="command">gawk</code> exits with a fatal
&ldquo;out of memory&rdquo; error.  If <code class="command">gawk</code> was compiled without
MPFR support, calling this function causes a fatal error.
</p>
</dd>
<dt><code class="code">void *get_mpz_ptr();</code></dt>
<dd><p>Allocate and initialize a GMP object and return a pointer to it.
If the allocation fails, <code class="command">gawk</code> exits with a fatal
&ldquo;out of memory&rdquo; error.  If <code class="command">gawk</code> was compiled without
MPFR support, calling this function causes a fatal error.
</p></dd>
</dl>

<p>Both of these functions return &lsquo;<samp class="samp">void *</samp>&rsquo;, since the <samp class="file">gawkapi.h</samp>
header file should not have dependency upon <code class="code">&lt;mpfr.h&gt;</code> (and <code class="code">&lt;gmp.h&gt;</code>,
which is included from <code class="code">&lt;mpfr.h&gt;</code>).  The actual return values are of
types <code class="code">mpfr_ptr</code> and <code class="code">mpz_ptr</code> respectively, and you should cast
the return values appropriately before assigning the results to variables
of the correct types.
</p>
<p>The memory allocated by these functions should be freed with
<code class="code">gawk_free()</code>.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Constructor-Functions">
<div class="nav-panel">
<p>
Next: <a href="#API-Ownership-of-MPFR-and-GMP-Values" accesskey="n" rel="next">Managing MPFR and GMP Values</a>, Previous: <a href="#Memory-Allocation-Functions" accesskey="p" rel="prev">Memory Allocation Functions and Convenience Macros</a>, Up: <a href="#Extension-API-Description" accesskey="u" rel="up">API Description</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Constructor-Functions-1"><span>17.4.4 Constructor Functions<a class="copiable-link" href="#Constructor-Functions-1"> &para;</a></span></h4>

<p>The API provides a number of <em class="dfn">constructor</em> functions for creating
string and numeric values, as well as a number of convenience macros.
This subsection presents them all as function prototypes, in
the way that extension code would use them:
</p>
<dl class="table">
<dt><code class="code">static inline awk_value_t *</code></dt>
<dt><code class="code">make_const_string(const char *string, size_t length, awk_value_t *result);</code></dt>
<dd><p>This function creates a string value in the <code class="code">awk_value_t</code> variable
pointed to by <code class="code">result</code>. It expects <code class="code">string</code> to be a C string constant
(or other string data), and automatically creates a <em class="emph">copy</em> of the data
for storage in <code class="code">result</code>. It returns <code class="code">result</code>.
</p>
</dd>
<dt><code class="code">static inline awk_value_t *</code></dt>
<dt><code class="code">make_malloced_string(const char *string, size_t length, awk_value_t *result);</code></dt>
<dd><p>This function creates a string value in the <code class="code">awk_value_t</code> variable
pointed to by <code class="code">result</code>. It expects <code class="code">string</code> to be a &lsquo;<samp class="samp">char *</samp>&rsquo;
value pointing to data previously obtained from <code class="code">gawk_malloc()</code>, <code class="code">gawk_calloc()</code>, or <code class="code">gawk_realloc()</code>. The idea here
is that the data is passed directly to <code class="command">gawk</code>, which assumes
responsibility for it. It returns <code class="code">result</code>.
</p>
</dd>
<dt><code class="code">static inline awk_value_t *</code></dt>
<dt><code class="code">make_null_string(awk_value_t *result);</code></dt>
<dd><p>This specialized function creates a null string (the &ldquo;undefined&rdquo; value)
in the <code class="code">awk_value_t</code> variable pointed to by <code class="code">result</code>.
It returns <code class="code">result</code>.
</p>
</dd>
<dt><code class="code">static inline awk_value_t *</code></dt>
<dt><code class="code">make_number(double num, awk_value_t *result);</code></dt>
<dd><p>This function simply creates a numeric value in the <code class="code">awk_value_t</code> variable
pointed to by <code class="code">result</code>.
</p>
</dd>
<dt><code class="code">static inline awk_value_t *</code></dt>
<dt><code class="code">make_number_mpz(void *mpz, awk_value_t *result);</code></dt>
<dd><p>This function creates a GMP number value in <code class="code">result</code>.
The <code class="code">mpz</code> must be from a call to <code class="code">get_mpz_ptr()</code>
(and thus be of real underlying type <code class="code">mpz_ptr</code>).
</p>
</dd>
<dt><code class="code">static inline awk_value_t *</code></dt>
<dt><code class="code">make_number_mpfr(void *mpfr, awk_value_t *result);</code></dt>
<dd><p>This function creates an MPFR number value in <code class="code">result</code>.
The <code class="code">mpfr</code> must be from a call to <code class="code">get_mpfr_ptr()</code>.
</p>
</dd>
<dt><code class="code">static inline awk_value_t *</code></dt>
<dt><code class="code">make_const_user_input(const char *string, size_t length, awk_value_t *result);</code></dt>
<dd><p>This function is identical to <code class="code">make_const_string()</code>, but the string is
flagged as user input that should be treated as a strnum value if the contents
of the string are numeric.
</p>
</dd>
<dt><code class="code">static inline awk_value_t *</code></dt>
<dt><code class="code">make_malloced_user_input(const char *string, size_t length, awk_value_t *result);</code></dt>
<dd><p>This function is identical to <code class="code">make_malloced_string()</code>, but the string is
flagged as user input that should be treated as a strnum value if the contents
of the string are numeric.
</p>
</dd>
<dt><code class="code">static inline awk_value_t *</code></dt>
<dt><code class="code">make_const_regex(const char *string, size_t length, awk_value_t *result);</code></dt>
<dd><p>This function creates a strongly typed regexp value by allocating a copy of the string.
<code class="code">string</code> is the regular expression of length <code class="code">len</code>.
</p>
</dd>
<dt><code class="code">static inline awk_value_t *</code></dt>
<dt><code class="code">make_malloced_regex(const char *string, size_t length, awk_value_t *result);</code></dt>
<dd><p>This function creates a strongly typed regexp value.  <code class="code">string</code> is
the regular expression of length <code class="code">len</code>.  It expects <code class="code">string</code>
to be a &lsquo;<samp class="samp">char *</samp>&rsquo; value pointing to data previously obtained from
<code class="code">gawk_malloc()</code>, <code class="code">gawk_calloc()</code>, or <code class="code">gawk_realloc()</code>.
</p>
</dd>
<dt><code class="code">static inline awk_value_t *</code></dt>
<dt><code class="code">make_bool(awk_bool_t boolval, awk_value_t *result);</code></dt>
<dd><p>This function creates a boolean value in the <code class="code">awk_value_t</code> variable
pointed to by <code class="code">result</code>.
</p>
</dd>
</dl>

<hr>
</div>
<div class="subsection-level-extent" id="API-Ownership-of-MPFR-and-GMP-Values">
<div class="nav-panel">
<p>
Next: <a href="#Registration-Functions" accesskey="n" rel="next">Registration Functions</a>, Previous: <a href="#Constructor-Functions" accesskey="p" rel="prev">Constructor Functions</a>, Up: <a href="#Extension-API-Description" accesskey="u" rel="up">API Description</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Managing-MPFR-and-GMP-Values"><span>17.4.5 Managing MPFR and GMP Values<a class="copiable-link" href="#Managing-MPFR-and-GMP-Values"> &para;</a></span></h4>
<a class="index-entry-id" id="index-MPFR-values_002c-API-ownership-of"></a>
<a class="index-entry-id" id="index-GMP-values_002c-API-ownership-of"></a>
<a class="index-entry-id" id="index-API_002c-ownership-of-MPFR-and-GMP-values"></a>

<p>MPFR and GMP values are different from string values, where you can
&ldquo;take ownership&rdquo; of the value simply by assigning pointers. For example:
</p>
<div class="example">
<pre class="example-preformatted">char *p = gawk_malloc(42);      p <i class="i">``owns'' the memory</i>
char *q = p;
p = NULL;                       <i class="i">now</i> q <i class="i">``owns'' it</i>
</pre></div>

<p>MPFR and GMP objects are indeed allocated on the stack or dynamically,
but the MPFR and GMP libraries treat these objects as values, the same way that
you would pass an <code class="code">int</code> or a <code class="code">double</code> by value.  There is no
way to &ldquo;transfer ownership&rdquo; of MPFR and GMP objects.
</p>
<p>The final results of an MPFR or GMP calculation should be passed back
to <code class="command">gawk</code>, by value, as you would a string or a <code class="code">double</code>.
<code class="command">gawk</code> will take care of freeing the storage.
</p>
<p>Thus, code in an extension should look like this:
</p>
<div class="example">
<pre class="example-preformatted">mpz_t part1, part2, answer;             <i class="i">declare local values</i>

mpz_set_si(part1, 21);                  <i class="i">do some computations</i>
mpz_set_si(part2, 21);
mpz_add(answer, part1, part2);
...
/* assume that result is a parameter of type (awk_value_t *). */
make_number_mpz(answer, &amp; result);      <i class="i">set it with final GMP value</i>

mpz_clear(part1);                       <i class="i">release intermediate values</i>
mpz_clear(part2);

return result;                          <i class="i">value in <code class="code">answer</code> managed by <code class="code">gawk</code></i>
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Registration-Functions">
<div class="nav-panel">
<p>
Next: <a href="#Printing-Messages" accesskey="n" rel="next">Printing Messages</a>, Previous: <a href="#API-Ownership-of-MPFR-and-GMP-Values" accesskey="p" rel="prev">Managing MPFR and GMP Values</a>, Up: <a href="#Extension-API-Description" accesskey="u" rel="up">API Description</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Registration-Functions-1"><span>17.4.6 Registration Functions<a class="copiable-link" href="#Registration-Functions-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-register-loadable-extension"></a>
<a class="index-entry-id" id="index-extensions-loadable-registration"></a>

<p>This section describes the API functions for
registering parts of your extension with <code class="command">gawk</code>.
</p>

<ul class="mini-toc">
<li><a href="#Extension-Functions" accesskey="1">Registering An Extension Function</a></li>
<li><a href="#Exit-Callback-Functions" accesskey="2">Registering An Exit Callback Function</a></li>
<li><a href="#Extension-Version-String" accesskey="3">Registering An Extension Version String</a></li>
<li><a href="#Input-Parsers" accesskey="4">Customized Input Parsers</a></li>
<li><a href="#Output-Wrappers" accesskey="5">Customized Output Wrappers</a></li>
<li><a href="#Two_002dway-processors" accesskey="6">Customized Two-way Processors</a></li>
</ul>
<hr>
<div class="subsubsection-level-extent" id="Extension-Functions">
<div class="nav-panel">
<p>
Next: <a href="#Exit-Callback-Functions" accesskey="n" rel="next">Registering An Exit Callback Function</a>, Up: <a href="#Registration-Functions" accesskey="u" rel="up">Registration Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Registering-An-Extension-Function"><span>17.4.6.1 Registering An Extension Function<a class="copiable-link" href="#Registering-An-Extension-Function"> &para;</a></span></h4>

<p>Extension functions are described by the following record:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">typedef struct awk_ext_func {
&nbsp;&nbsp;&nbsp;&nbsp;const char *name;
&nbsp;&nbsp;&nbsp;&nbsp;awk_value_t *(*const function)(int num_actual_args,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_value_t *result,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct awk_ext_func *finfo);
&nbsp;&nbsp;&nbsp;&nbsp;const size_t max_expected_args;
&nbsp;&nbsp;&nbsp;&nbsp;const size_t min_required_args;
&nbsp;&nbsp;&nbsp;&nbsp;awk_bool_t suppress_lint;
&nbsp;&nbsp;&nbsp;&nbsp;void *data;        /* opaque pointer to any extra state */
} awk_ext_func_t;
</pre></div></div>

<p>The fields are:
</p>
<dl class="table">
<dt><code class="code">const char *name;</code></dt>
<dd><p>The name of the new function.
<code class="command">awk</code>-level code calls the function by this name.
This is a regular C string.
</p>
<p>Function names must obey the rules for <code class="command">awk</code>
identifiers. That is, they must begin with either an English letter
or an underscore, which may be followed by any number of
letters, digits, and underscores.
Letter case in function names is significant.
</p>
</dd>
<dt><code class="code">awk_value_t *(*const function)(int num_actual_args,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_value_t *result,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct awk_ext_func *finfo);</code></dt>
<dd><p>This is a pointer to the C function that provides the extension&rsquo;s
functionality.
The function must fill in <code class="code">*result</code> with either a number,
a string, or a regexp.
<code class="command">gawk</code> takes ownership of any string memory.
As mentioned earlier, string memory <em class="emph">must</em> come from one of
<code class="code">gawk_malloc()</code>, <code class="code">gawk_calloc()</code>, or <code class="code">gawk_realloc()</code>.
</p>
<p>The <code class="code">num_actual_args</code> argument tells the C function how many
actual parameters were passed from the calling <code class="command">awk</code> code.
</p>
<p>The <code class="code">finfo</code> parameter is a pointer to the <code class="code">awk_ext_func_t</code> for
this function. The called function may access data within it as desired, or not.
</p>
<p>The function must return the value of <code class="code">result</code>.
This is for the convenience of the calling code inside <code class="command">gawk</code>.
</p>
</dd>
<dt><code class="code">const size_t max_expected_args;</code></dt>
<dd><p>This is the maximum number of arguments the function expects to receive.
If called with more arguments than this, and if lint checking has
been enabled, then <code class="command">gawk</code> prints a warning message.  For more
information, see the entry for <code class="code">suppress_lint</code>, later in this list.
</p>
</dd>
<dt><code class="code">const size_t min_required_args;</code></dt>
<dd><p>This is the minimum number of arguments the function expects to receive.
If called with fewer arguments, <code class="command">gawk</code> prints a fatal error
message and exits.
</p>
</dd>
<dt><code class="code">awk_bool_t suppress_lint;</code></dt>
<dd><p>This flag tells <code class="command">gawk</code> not to print a lint message if lint
checking has been enabled and if more arguments were supplied in the call
than expected.  An extension function can tell if <code class="command">gawk</code> already
printed at least one such message by checking if &lsquo;<samp class="samp">num_actual_args &gt;
finfo-&gt;max_expected_args</samp>&rsquo;.  If so, and the function does not want more
lint messages to be printed, it should set <code class="code">finfo-&gt;suppress_lint</code>
to <code class="code">awk_true</code>.
</p>
</dd>
<dt><code class="code">void *data;</code></dt>
<dd><p>This is an opaque pointer to any data that an extension function may
wish to have available when called.  Passing the <code class="code">awk_ext_func_t</code>
structure to the extension function, and having this pointer available
in it enable writing a single C or C++ function that implements multiple
<code class="command">awk</code>-level extension functions.
</p></dd>
</dl>

<p>Once you have a record representing your extension function, you register
it with <code class="command">gawk</code> using this API function:
</p>
<dl class="table">
<dt><code class="code">awk_bool_t add_ext_func(const char *name_space, awk_ext_func_t *func);</code></dt>
<dd><p>This function returns true upon success, false otherwise.
The <code class="code">name_space</code> parameter is the namespace in which to place
the function (see <a class="pxref" href="#Namespaces">Namespaces in <code class="command">gawk</code></a>).
Use an empty string (<code class="code">&quot;&quot;</code>) or <code class="code">&quot;awk&quot;</code> to place
the function in the default <code class="code">awk</code> namespace.
The <code class="code">func</code> pointer is the address of a
<code class="code">struct</code> representing your function, as just described.
</p>
<p><code class="command">gawk</code> does not modify what <code class="code">func</code> points to, but the
extension function itself receives this pointer and can modify what it
points to, thus it is purposely not declared to be <code class="code">const</code>.
</p></dd>
</dl>

<p>The combination of <code class="code">min_required_args</code>, <code class="code">max_expected_args</code>,
and <code class="code">suppress_lint</code> may be confusing. Here is how you should
set things up.
</p>
<dl class="table">
<dt>Any number of arguments is valid</dt>
<dd><p>Set <code class="code">min_required_args</code> and <code class="code">max_expected_args</code> to zero and
set <code class="code">suppress_lint</code> to <code class="code">awk_true</code>.
</p>
</dd>
<dt>A minimum number of arguments is required, no limit on maximum number of arguments</dt>
<dd><p>Set <code class="code">min_required_args</code> to the minimum required. Set
<code class="code">max_expected_args</code> to zero and
set <code class="code">suppress_lint</code> to <code class="code">awk_true</code>.
</p>
</dd>
<dt>A minimum number of arguments is required, a maximum number is expected</dt>
<dd><p>Set <code class="code">min_required_args</code> to the minimum required. Set
<code class="code">max_expected_args</code> to the maximum expected.
Set <code class="code">suppress_lint</code> to <code class="code">awk_false</code>.
</p>
</dd>
<dt>A minimum number of arguments is required, and no more than a maximum is allowed</dt>
<dd><p>Set <code class="code">min_required_args</code> to the minimum required. Set
<code class="code">max_expected_args</code> to the maximum expected.
Set <code class="code">suppress_lint</code> to <code class="code">awk_false</code>.
In your extension function, check that <code class="code">num_actual_args</code> does not
exceed <code class="code">f-&gt;max_expected_args</code>. If it does, issue a fatal error message.
</p></dd>
</dl>

<hr>
</div>
<div class="subsubsection-level-extent" id="Exit-Callback-Functions">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Version-String" accesskey="n" rel="next">Registering An Extension Version String</a>, Previous: <a href="#Extension-Functions" accesskey="p" rel="prev">Registering An Extension Function</a>, Up: <a href="#Registration-Functions" accesskey="u" rel="up">Registration Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Registering-An-Exit-Callback-Function"><span>17.4.6.2 Registering An Exit Callback Function<a class="copiable-link" href="#Registering-An-Exit-Callback-Function"> &para;</a></span></h4>

<p>An <em class="dfn">exit callback</em> function is a function that
<code class="command">gawk</code> calls before it exits.
Such functions are useful if you have general &ldquo;cleanup&rdquo; tasks
that should be performed in your extension (such as closing database
connections or other resource deallocations).
You can register such
a function with <code class="command">gawk</code> using the following function:
</p>
<dl class="table">
<dt><code class="code">void awk_atexit(void (*funcp)(void *data, int exit_status),</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void *arg0);</code></dt>
<dd><p>The parameters are:
</p>
<dl class="table">
<dt><code class="code">funcp</code></dt>
<dd><p>A pointer to the function to be called before <code class="command">gawk</code> exits. The <code class="code">data</code>
parameter will be the original value of <code class="code">arg0</code>.
The <code class="code">exit_status</code> parameter is the exit status value that
<code class="command">gawk</code> intends to pass to the <code class="code">exit()</code> system call.
</p>
</dd>
<dt><code class="code">arg0</code></dt>
<dd><p>A pointer to private data that <code class="command">gawk</code> saves in order to pass to
the function pointed to by <code class="code">funcp</code>.
</p></dd>
</dl>
</dd>
</dl>

<p>Exit callback functions are called in last-in, first-out (LIFO)
order&mdash;that is, in the reverse order in which they are registered with
<code class="command">gawk</code>.
</p>
<hr>
</div>
<div class="subsubsection-level-extent" id="Extension-Version-String">
<div class="nav-panel">
<p>
Next: <a href="#Input-Parsers" accesskey="n" rel="next">Customized Input Parsers</a>, Previous: <a href="#Exit-Callback-Functions" accesskey="p" rel="prev">Registering An Exit Callback Function</a>, Up: <a href="#Registration-Functions" accesskey="u" rel="up">Registration Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Registering-An-Extension-Version-String"><span>17.4.6.3 Registering An Extension Version String<a class="copiable-link" href="#Registering-An-Extension-Version-String"> &para;</a></span></h4>

<p>You can register a version string that indicates the name and
version of your extension with <code class="command">gawk</code>, as follows:
</p>
<dl class="table">
<dt><code class="code">void register_ext_version(const char *version);</code></dt>
<dd><p>Register the string pointed to by <code class="code">version</code> with <code class="command">gawk</code>.
Note that <code class="command">gawk</code> does <em class="emph">not</em> copy the <code class="code">version</code> string, so
it should not be changed.
</p></dd>
</dl>

<p><code class="command">gawk</code> prints all registered extension version strings when it
is invoked with the <samp class="option">--version</samp> option.
</p>
<hr>
</div>
<div class="subsubsection-level-extent" id="Input-Parsers">
<div class="nav-panel">
<p>
Next: <a href="#Output-Wrappers" accesskey="n" rel="next">Customized Output Wrappers</a>, Previous: <a href="#Extension-Version-String" accesskey="p" rel="prev">Registering An Extension Version String</a>, Up: <a href="#Registration-Functions" accesskey="u" rel="up">Registration Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Customized-Input-Parsers"><span>17.4.6.4 Customized Input Parsers<a class="copiable-link" href="#Customized-Input-Parsers"> &para;</a></span></h4>
<a class="index-entry-id" id="index-customized-input-parser"></a>

<p>By default, <code class="command">gawk</code> reads text files as its input. It uses the value
of <code class="code">RS</code> to find the end of an input record, and then uses <code class="code">FS</code>
(or <code class="code">FIELDWIDTHS</code> or <code class="code">FPAT</code>) to split it into fields (see <a class="pxref" href="#Reading-Files">Reading Input Files</a>).
Additionally, it sets the value of <code class="code">RT</code> (see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>).
</p>
<p>If you want, you can provide your own custom input parser.  An input
parser&rsquo;s job is to return a record to the <code class="command">gawk</code> record-processing
code, along with indicators for the value and length of the data to be
used for <code class="code">RT</code>, if any.
</p>
<p>To provide an input parser, you must first provide two functions
(where <var class="var">XXX</var> is a prefix name for your extension):
</p>
<dl class="table">
<dt><code class="code">awk_bool_t <var class="var">XXX</var>_can_take_file(const awk_input_buf_t *iobuf);</code></dt>
<dd><p>This function examines the information available in <code class="code">iobuf</code>
(which we discuss shortly).  Based on the information there, it
decides if the input parser should be used for this file.
If so, it should return true. Otherwise, it should return false.
It should not change any state (variable values, etc.) within <code class="command">gawk</code>.
</p>
</dd>
<dt><code class="code">awk_bool_t <var class="var">XXX</var>_take_control_of(awk_input_buf_t *iobuf);</code></dt>
<dd><p>When <code class="command">gawk</code> decides to hand control of the file over to the
input parser, it calls this function.  This function in turn must fill
in certain fields in the <code class="code">awk_input_buf_t</code> structure and ensure
that certain conditions are true.  It should then return true. If an
error of some kind occurs, it should not fill in any fields and should
return false; then <code class="command">gawk</code> will not use the input parser.
The details are presented shortly.
</p></dd>
</dl>

<p>Your extension should package these functions inside an
<code class="code">awk_input_parser_t</code>, which looks like this:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">typedef struct awk_input_parser {
    const char *name;   /* name of parser */
    awk_bool_t (*can_take_file)(const awk_input_buf_t *iobuf);
    awk_bool_t (*take_control_of)(awk_input_buf_t *iobuf);
    awk_const struct awk_input_parser *awk_const next;   /* for gawk */
} awk_input_parser_t;
</pre></div></div>

<p>The fields are:
</p>
<dl class="table">
<dt><code class="code">const char *name;</code></dt>
<dd><p>The name of the input parser. This is a regular C string.
</p>
</dd>
<dt><code class="code">awk_bool_t (*can_take_file)(const awk_input_buf_t *iobuf);</code></dt>
<dd><p>A pointer to your <code class="code"><var class="var">XXX</var>_can_take_file()</code> function.
</p>
</dd>
<dt><code class="code">awk_bool_t (*take_control_of)(awk_input_buf_t *iobuf);</code></dt>
<dd><p>A pointer to your <code class="code"><var class="var">XXX</var>_take_control_of()</code> function.
</p>
</dd>
<dt><code class="code">awk_const struct input_parser *awk_const next;</code></dt>
<dd><p>This is for use by <code class="command">gawk</code>;
therefore it is marked <code class="code">awk_const</code> so that the extension cannot
modify it.
</p></dd>
</dl>

<p>The steps are as follows:
</p>
<ol class="enumerate">
<li> Create a <code class="code">static awk_input_parser_t</code> variable and initialize it
appropriately.

</li><li> When your extension is loaded, register your input parser with
<code class="command">gawk</code> using the <code class="code">register_input_parser()</code> API function
(described next).
</li></ol>

<p>An <code class="code">awk_input_buf_t</code> looks like this:
</p>
<div class="example">
<pre class="example-preformatted">typedef struct awk_input {
    const char *name;       /* filename */
    int fd;                 /* file descriptor */
#define INVALID_HANDLE (-1)
    void *opaque;           /* private data for input parsers */
    int (*get_record)(char **out, struct awk_input *iobuf,
                      int *errcode, char **rt_start, size_t *rt_len,
                      const awk_fieldwidth_info_t **field_width);
    ssize_t (*read_func)();
    void (*close_func)(struct awk_input *iobuf);
    struct stat sbuf;       /* stat buf */
} awk_input_buf_t;
</pre></div>

<p>The fields can be divided into two categories: those for use (initially,
at least) by <code class="code"><var class="var">XXX</var>_can_take_file()</code>, and those for use by
<code class="code"><var class="var">XXX</var>_take_control_of()</code>.  The first group of fields and their uses
are as follows:
</p>
<dl class="table">
<dt><code class="code">const char *name;</code></dt>
<dd><p>The name of the file.
</p>
</dd>
<dt><code class="code">int fd;</code></dt>
<dd><p>A file descriptor for the file.  <code class="command">gawk</code> attempts to open
the file for reading using the <code class="code">open()</code> system call. If it was
able to open the file, then <code class="code">fd</code> will <em class="emph">not</em> be equal to
<code class="code">INVALID_HANDLE</code>. Otherwise, it will.
</p>
<p>An extension can decide that it doesn&rsquo;t want to use the open file descriptor
provided by <code class="command">gawk</code>. In such a case it can close the file and
set <code class="code">fd</code> to <code class="code">INVALID_HANDLE</code>, or it can leave it alone and
keep it&rsquo;s own file descriptor in private data pointed to by the
<code class="code">opaque</code> pointer (see further in this list). In any case, if
the file descriptor is valid, it should <em class="emph">not</em> just overwrite the
value with something else; doing so would cause a resource leak.
</p>
</dd>
<dt><code class="code">struct stat sbuf;</code></dt>
<dd><p>If the file descriptor is valid, then <code class="command">gawk</code> will have filled
in this structure via a call to the <code class="code">fstat()</code> system call.
Otherwise, if the <code class="code">lstat()</code> system call is available, it will
use that. If <code class="code">lstat()</code> is not available, then it uses <code class="code">stat()</code>.
</p>
<p>Getting the file&rsquo;s information allows extensions to check the type of
the file even if it could not be opened.  This occurs, for example,
on Windows systems when trying to use <code class="code">open()</code> on a directory.
</p>
<p>If <code class="command">gawk</code> was not able to get the file information, then
<code class="code">sbuf</code> will be zeroed out. In particular, extension code
can check if &lsquo;<samp class="samp">sbuf.st_mode == 0</samp>&rsquo;. If that&rsquo;s true, then there
is no information in <code class="code">sbuf</code>.
</p></dd>
</dl>

<p>The <code class="code"><var class="var">XXX</var>_can_take_file()</code> function should examine these
fields and decide if the input parser should be used for the file.
The decision can be made based upon <code class="command">gawk</code> state (the value
of a variable defined previously by the extension and set by
<code class="command">awk</code> code), the name of the
file, whether or not the file descriptor is valid, the information
in the <code class="code">struct stat</code>, or any combination of these factors.
</p>
<p>Once <code class="code"><var class="var">XXX</var>_can_take_file()</code> has returned true, and
<code class="command">gawk</code> has decided to use your input parser, it calls
<code class="code"><var class="var">XXX</var>_take_control_of()</code>.  That function then fills
either the <code class="code">get_record</code> field or the <code class="code">read_func</code> field in
the <code class="code">awk_input_buf_t</code>.  It must also ensure that <code class="code">fd</code> is <em class="emph">not</em>
set to <code class="code">INVALID_HANDLE</code>.  The following list describes the fields that
may be filled by <code class="code"><var class="var">XXX</var>_take_control_of()</code>:
</p>
<dl class="table">
<dt><code class="code">void *opaque;</code></dt>
<dd><p>This is used to hold any state information needed by the input parser
for this file.  It is &ldquo;opaque&rdquo; to <code class="command">gawk</code>.  The input parser
is not required to use this pointer.
</p>
</dd>
<dt><code class="code">int&nbsp;(*get_record)(char&nbsp;**out,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;awk_input *iobuf,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int *errcode,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char **rt_start,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size_t *rt_len,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const awk_fieldwidth_info_t **field_width);</code></dt>
<dd><p>This function pointer should point to a function that creates the input
records.  Said function is the core of the input parser.  Its behavior
is described in the text following this list.
</p>
</dd>
<dt><code class="code">ssize_t (*read_func)(int, void *, size_t);</code></dt>
<dd><p>This function pointer should point to a function that has the
same behavior as the standard POSIX <code class="code">read()</code> system call.
It is an alternative to the <code class="code">get_record</code> pointer.  Its behavior
is also described in the text following this list.
</p>
</dd>
<dt><code class="code">void (*close_func)(struct awk_input *iobuf);</code></dt>
<dd><p>This function pointer should point to a function that does
the &ldquo;teardown.&rdquo; It should release any resources allocated by
<code class="code"><var class="var">XXX</var>_take_control_of()</code>.  It may also close the file. If it
does so, it should set the <code class="code">fd</code> field to <code class="code">INVALID_HANDLE</code>.
</p>
<p>If <code class="code">fd</code> is still not <code class="code">INVALID_HANDLE</code> after the call to this
function, <code class="command">gawk</code> calls the regular <code class="code">close()</code> system call.
</p>
<p>Having a &ldquo;teardown&rdquo; function is optional. If your input parser does
not need it, do not set this field.  Then, <code class="command">gawk</code> calls the
regular <code class="code">close()</code> system call on the file descriptor, so it should
be valid.
</p></dd>
</dl>

<p>The <code class="code"><var class="var">XXX</var>_get_record()</code> function does the work of creating
input records.  The parameters are as follows:
</p>
<dl class="table">
<dt><code class="code">char **out</code></dt>
<dd><p>This is a pointer to a <code class="code">char *</code> variable that is set to point
to the record.  <code class="command">gawk</code> makes its own copy of the data, so
your extension must manage this storage.
</p>
</dd>
<dt><code class="code">struct awk_input *iobuf</code></dt>
<dd><p>This is the <code class="code">awk_input_buf_t</code> for the file.  Two of its fields should
be used by your extension: <code class="code">fd</code> for reading data, and <code class="code">opaque</code>
for managing any private state.
</p>
</dd>
<dt><code class="code">int *errcode</code></dt>
<dd><p>If an error occurs, <code class="code">*errcode</code> should be set to an appropriate
code from <code class="code">&lt;errno.h&gt;</code>.
</p>
</dd>
<dt><code class="code">char **rt_start</code></dt>
<dt><code class="code">size_t *rt_len</code></dt>
<dd><p>If the concept of a &ldquo;record terminator&rdquo; makes sense, then
<code class="code">*rt_start</code> should be set to point to the data to be used for
<code class="code">RT</code>, and <code class="code">*rt_len</code> should be set to the length of the
data. Otherwise, <code class="code">*rt_len</code> should be set to zero.
Here too, <code class="command">gawk</code> makes its own copy of this data, so your
extension must manage this storage.
</p>
</dd>
<dt><code class="code">const awk_fieldwidth_info_t **field_width</code></dt>
<dd><p>If <code class="code">field_width</code> is not <code class="code">NULL</code>, then <code class="code">*field_width</code> will be initialized
to <code class="code">NULL</code>, and the function may set it to point to a structure
supplying field width information to override the default
field parsing mechanism. Note that this structure will not
be copied by <code class="command">gawk</code>; it must persist at least until the next call
to <code class="code">get_record</code> or <code class="code">close_func</code>. Note also that <code class="code">field_width</code> is
<code class="code">NULL</code> when <code class="code">getline</code> is assigning the results to a variable, thus
field parsing is not needed.
</p>
<p>If the parser sets <code class="code">*field_width</code>,
then <code class="command">gawk</code> uses this layout to parse the input record,
and the <code class="code">PROCINFO[&quot;FS&quot;]</code> value will be <code class="code">&quot;API&quot;</code> while this record
is active in <code class="code">$0</code>.
The <code class="code">awk_fieldwidth_info_t</code> data structure
is described below.
</p></dd>
</dl>

<p>The return value is the length of the buffer pointed to by
<code class="code">*out</code>, or <code class="code">EOF</code> if end-of-file was reached or an
error occurred.
</p>
<p>It is guaranteed that <code class="code">errcode</code> is a valid pointer, so there is no
need to test for a <code class="code">NULL</code> value.  <code class="command">gawk</code> sets <code class="code">*errcode</code>
to zero, so there is no need to set it unless an error occurs.
</p>
<p>If an error does occur, the function should return <code class="code">EOF</code> and set
<code class="code">*errcode</code> to a value greater than zero.  In that case, if <code class="code">*errcode</code>
does not equal zero, <code class="command">gawk</code> automatically updates
the <code class="code">ERRNO</code> variable based on the value of <code class="code">*errcode</code>.
(In general, setting &lsquo;<samp class="samp">*errcode = errno</samp>&rsquo; should do the right thing.)
</p>
<p>As an alternative to supplying a function that returns an input record,
you may instead supply a function that simply reads bytes, and let
<code class="command">gawk</code> parse the data into records.  If you do so, the data
should be returned in the multibyte encoding of the current locale.
Such a function should follow the same behavior as the <code class="code">read()</code>
system call, and you fill in the <code class="code">read_func</code> pointer with its
address in the <code class="code">awk_input_buf_t</code> structure.
</p>
<p>By default, <code class="command">gawk</code> sets the <code class="code">read_func</code> pointer to
point to the <code class="code">read()</code> system call. So your extension need not
set this field explicitly.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> You must choose one method or the other: either a function that
returns a record, or one that returns raw data.  In particular,
if you supply a function to get a record, <code class="command">gawk</code> will
call it, and will never call the raw read function.
</p></blockquote>

<p><code class="command">gawk</code> ships with a sample extension that reads directories,
returning records for each entry in a directory (see <a class="pxref" href="#Extension-Sample-Readdir">Reading Directories</a>).  You may wish to use that code as a guide for writing
your own input parser.
</p>
<p>When writing an input parser, you should think about (and document)
how it is expected to interact with <code class="command">awk</code> code.  You may want
it to always be called, and to take effect as appropriate (as the
<code class="code">readdir</code> extension does).  Or you may want it to take effect
based upon the value of an <code class="command">awk</code> variable, as the XML extension
from the <code class="code">gawkextlib</code> project does (see <a class="pxref" href="#gawkextlib">The <code class="code">gawkextlib</code> Project</a>).
In the latter case, code in a <code class="code">BEGINFILE</code> rule
can look at <code class="code">FILENAME</code> and <code class="code">ERRNO</code> to decide whether or
not to activate your input parser (see <a class="pxref" href="#BEGINFILE_002fENDFILE">The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a>).
</p>
<p>If you would like to override the default field parsing mechanism for a given
record, then you must populate an <code class="code">awk_fieldwidth_info_t</code> structure,
which looks like this:
</p>
<div class="example">
<pre class="example-preformatted">typedef struct {
        awk_bool_t     use_chars; /* false ==&gt; use bytes */
        size_t         nf;        /* number of fields in record (NF) */
        struct awk_field_info {
                size_t skip;      /* amount to skip before field starts */
                size_t len;       /* length of field */
        } fields[1];              /* actual dimension should be nf */
} awk_fieldwidth_info_t;
</pre></div>

<p>The fields are:
</p>
<dl class="table">
<dt><code class="code">awk_bool_t use_chars;</code></dt>
<dd><p>Set this to <code class="code">awk_true</code> if the field lengths are specified in terms
of potentially multi-byte characters, and set it to <code class="code">awk_false</code> if
the lengths are in terms of bytes.
Performance will be better if the values are supplied in
terms of bytes.
</p>
</dd>
<dt><code class="code">size_t nf;</code></dt>
<dd><p>Set this to the number of fields in the input record, i.e. <code class="code">NF</code>.
</p>
</dd>
<dt><code class="code">struct awk_field_info fields[nf];</code></dt>
<dd><p>This is a variable-length array whose actual dimension should be <code class="code">nf</code>.
For each field, the <code class="code">skip</code> element should be set to the number
of characters or bytes, as controlled by the <code class="code">use_chars</code> flag,
to skip before the start of this field. The <code class="code">len</code> element provides
the length of the field. The values in <code class="code">fields[0]</code> provide the information
for <code class="code">$1</code>, and so on through the <code class="code">fields[nf-1]</code> element containing the information for <code class="code">$NF</code>.
</p></dd>
</dl>

<p>A convenience macro <code class="code">awk_fieldwidth_info_size(numfields)</code> is provided to
calculate the appropriate size of a variable-length
<code class="code">awk_fieldwidth_info_t</code> structure containing <code class="code">numfields</code> fields. This can
be used as an argument to <code class="code">malloc()</code> or in a union to allocate space
statically. Please refer to the <code class="code">readdir_test</code> sample extension for an
example.
</p>
<p>You register your input parser with the following function:
</p>
<dl class="table">
<dt><code class="code">void register_input_parser(awk_input_parser_t *input_parser);</code></dt>
<dd><p>Register the input parser pointed to by <code class="code">input_parser</code> with
<code class="command">gawk</code>.
</p></dd>
</dl>

<hr>
</div>
<div class="subsubsection-level-extent" id="Output-Wrappers">
<div class="nav-panel">
<p>
Next: <a href="#Two_002dway-processors" accesskey="n" rel="next">Customized Two-way Processors</a>, Previous: <a href="#Input-Parsers" accesskey="p" rel="prev">Customized Input Parsers</a>, Up: <a href="#Registration-Functions" accesskey="u" rel="up">Registration Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Customized-Output-Wrappers"><span>17.4.6.5 Customized Output Wrappers<a class="copiable-link" href="#Customized-Output-Wrappers"> &para;</a></span></h4>
<a class="index-entry-id" id="index-customized-output-wrapper"></a>

<a class="index-entry-id" id="index-output-wrapper"></a>
<p>An <em class="dfn">output wrapper</em> is the mirror image of an input parser.
It allows an extension to take over the output to a file opened
with the &lsquo;<samp class="samp">&gt;</samp>&rsquo; or &lsquo;<samp class="samp">&gt;&gt;</samp>&rsquo; I/O redirection operators (see <a class="pxref" href="#Redirection">Redirecting Output of <code class="code">print</code> and <code class="code">printf</code></a>).
</p>
<p>The output wrapper is very similar to the input parser structure:
</p>
<div class="example">
<pre class="example-preformatted">typedef struct awk_output_wrapper {
    const char *name;   /* name of the wrapper */
    awk_bool_t (*can_take_file)(const awk_output_buf_t *outbuf);
    awk_bool_t (*take_control_of)(awk_output_buf_t *outbuf);
    awk_const struct awk_output_wrapper *awk_const next;  /* for gawk */
} awk_output_wrapper_t;
</pre></div>

<p>The members are as follows:
</p>
<dl class="table">
<dt><code class="code">const char *name;</code></dt>
<dd><p>This is the name of the output wrapper.
</p>
</dd>
<dt><code class="code">awk_bool_t (*can_take_file)(const awk_output_buf_t *outbuf);</code></dt>
<dd><p>This points to a function that examines the information in
the <code class="code">awk_output_buf_t</code> structure pointed to by <code class="code">outbuf</code>.
It should return true if the output wrapper wants to take over the
file, and false otherwise.  It should not change any state (variable
values, etc.) within <code class="command">gawk</code>.
</p>
</dd>
<dt><code class="code">awk_bool_t (*take_control_of)(awk_output_buf_t *outbuf);</code></dt>
<dd><p>The function pointed to by this field is called when <code class="command">gawk</code>
decides to let the output wrapper take control of the file. It should
fill in appropriate members of the <code class="code">awk_output_buf_t</code> structure,
as described next, and return true if successful, false otherwise.
</p>
</dd>
<dt><code class="code">awk_const struct output_wrapper *awk_const next;</code></dt>
<dd><p>This is for use by <code class="command">gawk</code>;
therefore it is marked <code class="code">awk_const</code> so that the extension cannot
modify it.
</p></dd>
</dl>

<p>The <code class="code">awk_output_buf_t</code> structure looks like this:
</p>
<div class="example">
<pre class="example-preformatted">typedef struct awk_output_buf {
    const char *name;   /* name of output file */
    const char *mode;   /* mode argument to fopen */
    FILE *fp;           /* stdio file pointer */
    awk_bool_t redirected;  /* true if a wrapper is active */
    void *opaque;       /* for use by output wrapper */
    size_t (*gawk_fwrite)(const void *buf, size_t size, size_t count,
                FILE *fp, void *opaque);
    int (*gawk_fflush)(FILE *fp, void *opaque);
    int (*gawk_ferror)(FILE *fp, void *opaque);
    int (*gawk_fclose)(FILE *fp, void *opaque);
} awk_output_buf_t;
</pre></div>

<p>Here too, your extension will define <code class="code"><var class="var">XXX</var>_can_take_file()</code>
and <code class="code"><var class="var">XXX</var>_take_control_of()</code> functions that examine and update
data members in the <code class="code">awk_output_buf_t</code>.
The data members are as follows:
</p>
<dl class="table">
<dt><code class="code">const char *name;</code></dt>
<dd><p>The name of the output file.
</p>
</dd>
<dt><code class="code">const char *mode;</code></dt>
<dd><p>The mode string (as would be used in the second argument to <code class="code">fopen()</code>)
with which the file was opened.
</p>
</dd>
<dt><code class="code">FILE *fp;</code></dt>
<dd><p>The <code class="code">FILE</code> pointer from <code class="code">&lt;stdio.h&gt;</code>. <code class="command">gawk</code> opens the file
before attempting to find an output wrapper.
</p>
</dd>
<dt><code class="code">awk_bool_t redirected;</code></dt>
<dd><p>This field must be set to true by the <code class="code"><var class="var">XXX</var>_take_control_of()</code> function.
</p>
</dd>
<dt><code class="code">void *opaque;</code></dt>
<dd><p>This pointer is opaque to <code class="command">gawk</code>. The extension should use it to store
a pointer to any private data associated with the file.
</p>
</dd>
<dt><code class="code">size_t (*gawk_fwrite)(const void *buf, size_t size, size_t count,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FILE *fp, void *opaque);</code></dt>
<dt><code class="code">int (*gawk_fflush)(FILE *fp, void *opaque);</code></dt>
<dt><code class="code">int (*gawk_ferror)(FILE *fp, void *opaque);</code></dt>
<dt><code class="code">int (*gawk_fclose)(FILE *fp, void *opaque);</code></dt>
<dd><p>These pointers should be set to point to functions that perform
the equivalent function as the <code class="code">&lt;stdio.h&gt;</code> functions do, if appropriate.
<code class="command">gawk</code> uses these function pointers for all output.
<code class="command">gawk</code> initializes the pointers to point to internal &ldquo;pass-through&rdquo;
functions that just call the regular <code class="code">&lt;stdio.h&gt;</code> functions, so an
extension only needs to redefine those functions that are appropriate for
what it does.
</p></dd>
</dl>

<p>The <code class="code"><var class="var">XXX</var>_can_take_file()</code> function should make a decision based
upon the <code class="code">name</code> and <code class="code">mode</code> fields, and any additional state
(such as <code class="command">awk</code> variable values) that is appropriate.
<code class="command">gawk</code> attempts to open the named file for writing.  The <code class="code">fp</code>
member will be <code class="code">NULL</code> only if it fails.
</p>
<p>When <code class="command">gawk</code> calls <code class="code"><var class="var">XXX</var>_take_control_of()</code>, that function should fill
in the other fields as appropriate, except for <code class="code">fp</code>, which it should just
use normally if it&rsquo;s not <code class="code">NULL</code>.
</p>
<p>You register your output wrapper with the following function:
</p>
<dl class="table">
<dt><code class="code">void register_output_wrapper(awk_output_wrapper_t *output_wrapper);</code></dt>
<dd><p>Register the output wrapper pointed to by <code class="code">output_wrapper</code> with
<code class="command">gawk</code>.
</p></dd>
</dl>

<hr>
</div>
<div class="subsubsection-level-extent" id="Two_002dway-processors">
<div class="nav-panel">
<p>
Previous: <a href="#Output-Wrappers" accesskey="p" rel="prev">Customized Output Wrappers</a>, Up: <a href="#Registration-Functions" accesskey="u" rel="up">Registration Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Customized-Two_002dway-Processors"><span>17.4.6.6 Customized Two-way Processors<a class="copiable-link" href="#Customized-Two_002dway-Processors"> &para;</a></span></h4>
<a class="index-entry-id" id="index-customized-two_002dway-processor"></a>

<p>A <em class="dfn">two-way processor</em> combines an input parser and an output wrapper for
two-way I/O with the &lsquo;<samp class="samp">|&amp;</samp>&rsquo; operator (see <a class="pxref" href="#Redirection">Redirecting Output of <code class="code">print</code> and <code class="code">printf</code></a>).  It makes identical
use of the <code class="code">awk_input_parser_t</code> and <code class="code">awk_output_buf_t</code> structures
as described earlier.
</p>
<p>A two-way processor is represented by the following structure:
</p>
<div class="example">
<pre class="example-preformatted">typedef struct awk_two_way_processor {
    const char *name;   /* name of the two-way processor */
    awk_bool_t (*can_take_two_way)(const char *name);
    awk_bool_t (*take_control_of)(const char *name,
                                  awk_input_buf_t *inbuf,
                                  awk_output_buf_t *outbuf);
    awk_const struct awk_two_way_processor *awk_const next;  /* for gawk */
} awk_two_way_processor_t;
</pre></div>

<p>The fields are as follows:
</p>
<dl class="table">
<dt><code class="code">const char *name;</code></dt>
<dd><p>The name of the two-way processor.
</p>
</dd>
<dt><code class="code">awk_bool_t (*can_take_two_way)(const char *name);</code></dt>
<dd><p>The function pointed to by this field should return true if it wants to take over two-way I/O for this file name.
It should not change any state (variable
values, etc.) within <code class="command">gawk</code>.
</p>
</dd>
<dt><code class="code">awk_bool_t (*take_control_of)(const char *name,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_input_buf_t *inbuf,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_output_buf_t *outbuf);</code></dt>
<dd><p>The function pointed to by this field should fill in the <code class="code">awk_input_buf_t</code> and
<code class="code">awk_output_buf_t</code> structures pointed to by <code class="code">inbuf</code> and
<code class="code">outbuf</code>, respectively.  These structures were described earlier.
</p>
</dd>
<dt><code class="code">awk_const struct two_way_processor *awk_const next;</code></dt>
<dd><p>This is for use by <code class="command">gawk</code>;
therefore it is marked <code class="code">awk_const</code> so that the extension cannot
modify it.
</p></dd>
</dl>

<p>As with the input parser and output processor, you provide
&ldquo;yes I can take this&rdquo; and &ldquo;take over for this&rdquo; functions,
<code class="code"><var class="var">XXX</var>_can_take_two_way()</code> and <code class="code"><var class="var">XXX</var>_take_control_of()</code>.
</p>
<p>You register your two-way processor with the following function:
</p>
<dl class="table">
<dt><code class="code">void register_two_way_processor(awk_two_way_processor_t *two_way_processor);</code></dt>
<dd><p>Register the two-way processor pointed to by <code class="code">two_way_processor</code> with
<code class="command">gawk</code>.
</p></dd>
</dl>

<hr>
</div>
</div>
<div class="subsection-level-extent" id="Printing-Messages">
<div class="nav-panel">
<p>
Next: <a href="#Updating-ERRNO" accesskey="n" rel="next">Updating <code class="code">ERRNO</code></a>, Previous: <a href="#Registration-Functions" accesskey="p" rel="prev">Registration Functions</a>, Up: <a href="#Extension-API-Description" accesskey="u" rel="up">API Description</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Printing-Messages-1"><span>17.4.7 Printing Messages<a class="copiable-link" href="#Printing-Messages-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-printing-messages-from-extensions"></a>
<a class="index-entry-id" id="index-messages-from-extensions"></a>

<p>You can print different kinds of warning messages from your
extension, as described here.  Note that for these functions,
you must pass in the extension ID received from <code class="command">gawk</code>
when the extension was loaded:<a class="footnote" id="DOCF108" href="#FOOT108"><sup>108</sup></a>
</p>
<dl class="table">
<dt><code class="code">void fatal(awk_ext_id_t id, const char *format, ...);</code></dt>
<dd><p>Print a message and then cause <code class="command">gawk</code> to exit immediately.
</p>
</dd>
<dt><code class="code">void nonfatal(awk_ext_id_t id, const char *format, ...);</code></dt>
<dd><p>Print a nonfatal error message.
</p>
</dd>
<dt><code class="code">void warning(awk_ext_id_t id, const char *format, ...);</code></dt>
<dd><p>Print a warning message.
</p>
</dd>
<dt><code class="code">void lintwarn(awk_ext_id_t id, const char *format, ...);</code></dt>
<dd><p>Print a &ldquo;lint warning.&rdquo;  Normally this is the same as printing a
warning message, but if <code class="command">gawk</code> was invoked with &lsquo;<samp class="samp">--lint=fatal</samp>&rsquo;,
then lint warnings become fatal error messages.
</p></dd>
</dl>

<p>All of these functions are otherwise like the C <code class="code">printf()</code>
family of functions, where the <code class="code">format</code> parameter is a string
with literal characters and formatting codes intermixed.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Updating-ERRNO">
<div class="nav-panel">
<p>
Next: <a href="#Requesting-Values" accesskey="n" rel="next">Requesting Values</a>, Previous: <a href="#Printing-Messages" accesskey="p" rel="prev">Printing Messages</a>, Up: <a href="#Extension-API-Description" accesskey="u" rel="up">API Description</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Updating-ERRNO-1"><span>17.4.8 Updating <code class="code">ERRNO</code><a class="copiable-link" href="#Updating-ERRNO-1"> &para;</a></span></h4>

<p>The following functions allow you to update the <code class="code">ERRNO</code>
variable:
</p>
<dl class="table">
<dt><code class="code">void update_ERRNO_int(int errno_val);</code></dt>
<dd><p>Set <code class="code">ERRNO</code> to the string equivalent of the error code
in <code class="code">errno_val</code>. The value should be one of the defined
error codes in <code class="code">&lt;errno.h&gt;</code>, and <code class="command">gawk</code> turns it
into a (possibly translated) string using the C <code class="code">strerror()</code> function.
</p>
</dd>
<dt><code class="code">void update_ERRNO_string(const char *string);</code></dt>
<dd><p>Set <code class="code">ERRNO</code> directly to the string value of <code class="code">ERRNO</code>.
<code class="command">gawk</code> makes a copy of the value of <code class="code">string</code>.
</p>
</dd>
<dt><code class="code">void unset_ERRNO(void);</code></dt>
<dd><p>Unset <code class="code">ERRNO</code>.
</p></dd>
</dl>

<hr>
</div>
<div class="subsection-level-extent" id="Requesting-Values">
<div class="nav-panel">
<p>
Next: <a href="#Accessing-Parameters" accesskey="n" rel="next">Accessing and Updating Parameters</a>, Previous: <a href="#Updating-ERRNO" accesskey="p" rel="prev">Updating <code class="code">ERRNO</code></a>, Up: <a href="#Extension-API-Description" accesskey="u" rel="up">API Description</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Requesting-Values-1"><span>17.4.9 Requesting Values<a class="copiable-link" href="#Requesting-Values-1"> &para;</a></span></h4>

<p>All of the functions that return values from <code class="command">gawk</code>
work in the same way. You pass in an <code class="code">awk_valtype_t</code> value
to indicate what kind of value you expect.  If the actual value
matches what you requested, the function returns true and fills
in the <code class="code">awk_value_t</code> result.
Otherwise, the function returns false, and the <code class="code">val_type</code>
member indicates the type of the actual value.  You may then
print an error message or reissue the request for the actual
value type, as appropriate.  This behavior is summarized in
<a class="ref" href="#table_002dvalue_002dtypes_002dreturned">Table 17.2</a>.
</p>
<div class="float" id="table_002dvalue_002dtypes_002dreturned">

<table class="multitable">
<thead><tr><th width="50%"></th><th width="50%">Type of Actual Value</th></tr></thead>
</table>
<table class="multitable">
<thead><tr><th></th><th></th><th>String</th><th>Strnum</th><th>Number</th><th>Regex</th><th>Bool</th><th>Array</th><th>Undefined</th></tr></thead>
<tbody><tr><td></td><td><b class="b">String</b></td><td>String</td><td>String</td><td>String</td><td>String</td><td>String</td><td>false</td><td>false</td></tr>
<tr><td></td><td><b class="b">Strnum</b></td><td>false</td><td>Strnum</td><td>Strnum</td><td>false</td><td>false</td><td>false</td><td>false</td></tr>
<tr><td></td><td><b class="b">Number</b></td><td>Number</td><td>Number</td><td>Number</td><td>false</td><td>Number</td><td>false</td><td>false</td></tr>
<tr><td><b class="b">Type</b></td><td><b class="b">Regex</b></td><td>false</td><td>false</td><td>false</td><td>Regex</td><td>false</td><td>false</td><td>false</td></tr>
<tr><td><b class="b">Requested</b></td><td><b class="b">Bool</b></td><td>false</td><td>false</td><td>false</td><td>false</td><td>Bool</td><td>false</td><td>false</td></tr>
<tr><td></td><td><b class="b">Array</b></td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>Array</td><td>false</td></tr>
<tr><td></td><td><b class="b">Scalar</b></td><td>Scalar</td><td>Scalar</td><td>Scalar</td><td>Scalar</td><td>Scalar</td><td>false</td><td>false</td></tr>
<tr><td></td><td><b class="b">Undefined</b></td><td>String</td><td>Strnum</td><td>Number</td><td>Regex</td><td>Bool</td><td>Array</td><td>Undefined</td></tr>
<tr><td></td><td><b class="b">Value cookie</b></td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td><td>false</td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 17.2: </strong>API value types returned</p></div></div>
<hr>
</div>
<div class="subsection-level-extent" id="Accessing-Parameters">
<div class="nav-panel">
<p>
Next: <a href="#Symbol-Table-Access" accesskey="n" rel="next">Symbol Table Access</a>, Previous: <a href="#Requesting-Values" accesskey="p" rel="prev">Requesting Values</a>, Up: <a href="#Extension-API-Description" accesskey="u" rel="up">API Description</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Accessing-and-Updating-Parameters"><span>17.4.10 Accessing and Updating Parameters<a class="copiable-link" href="#Accessing-and-Updating-Parameters"> &para;</a></span></h4>

<p>Two functions give you access to the arguments (parameters)
passed to your extension function. They are:
</p>
<dl class="table">
<dt><code class="code">awk_bool_t get_argument(size_t count,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_valtype_t wanted,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_value_t *result);</code></dt>
<dd><p>Fill in the <code class="code">awk_value_t</code> structure pointed to by <code class="code">result</code>
with the <code class="code">count</code>th argument.  Return true if the actual
type matches <code class="code">wanted</code>, and false otherwise.  In the latter
case, <code class="code">result-&gt;<!-- /@w -->val_type</code> indicates the actual type
(see <a class="pxref" href="#table_002dvalue_002dtypes_002dreturned">Table 17.2</a>).  Counts are zero-based&mdash;the first
argument is numbered zero, the second one, and so on. <code class="code">wanted</code>
indicates the type of value expected.
</p>
</dd>
<dt><code class="code">awk_bool_t set_argument(size_t count, awk_array_t array);</code></dt>
<dd><p>Convert a parameter that was undefined into an array; this provides
call by reference for arrays.  Return false if <code class="code">count</code> is too big,
or if the argument&rsquo;s type is not undefined.  See <a class="xref" href="#Array-Manipulation">Array Manipulation</a>
for more information on creating arrays.
</p></dd>
</dl>

<hr>
</div>
<div class="subsection-level-extent" id="Symbol-Table-Access">
<div class="nav-panel">
<p>
Next: <a href="#Array-Manipulation" accesskey="n" rel="next">Array Manipulation</a>, Previous: <a href="#Accessing-Parameters" accesskey="p" rel="prev">Accessing and Updating Parameters</a>, Up: <a href="#Extension-API-Description" accesskey="u" rel="up">API Description</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Symbol-Table-Access-1"><span>17.4.11 Symbol Table Access<a class="copiable-link" href="#Symbol-Table-Access-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-accessing-global-variables-from-extensions"></a>

<p>Two sets of routines provide access to global variables, and one set
allows you to create and release cached values.
</p>

<ul class="mini-toc">
<li><a href="#Symbol-table-by-name" accesskey="1">Variable Access and Update by Name</a></li>
<li><a href="#Symbol-table-by-cookie" accesskey="2">Variable Access and Update by Cookie</a></li>
<li><a href="#Cached-values" accesskey="3">Creating and Using Cached Values</a></li>
</ul>
<hr>
<div class="subsubsection-level-extent" id="Symbol-table-by-name">
<div class="nav-panel">
<p>
Next: <a href="#Symbol-table-by-cookie" accesskey="n" rel="next">Variable Access and Update by Cookie</a>, Up: <a href="#Symbol-Table-Access" accesskey="u" rel="up">Symbol Table Access</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Variable-Access-and-Update-by-Name"><span>17.4.11.1 Variable Access and Update by Name<a class="copiable-link" href="#Variable-Access-and-Update-by-Name"> &para;</a></span></h4>

<p>The following routines provide the ability to access and update
global <code class="command">awk</code>-level variables by name.  In compiler terminology,
identifiers of different kinds are termed <em class="dfn">symbols</em>, thus the &ldquo;sym&rdquo;
in the routines&rsquo; names.  The data structure that stores information
about symbols is termed a <em class="dfn">symbol table</em>.
The functions are as follows:
</p>
<dl class="table">
<dt><code class="code">awk_bool_t sym_lookup(const char *name,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_valtype_t wanted,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_value_t *result);</code></dt>
<dd><p>Fill in the <code class="code">awk_value_t</code> structure pointed to by <code class="code">result</code>
with the value of the variable named by the string <code class="code">name</code>, which is
a regular C string.  <code class="code">wanted</code> indicates the type of value expected.
Return true if the actual type matches <code class="code">wanted</code>, and false otherwise.
In the latter case, <code class="code">result-&gt;val_type</code> indicates the actual type
(see <a class="pxref" href="#table_002dvalue_002dtypes_002dreturned">Table 17.2</a>).
</p>
</dd>
<dt><code class="code">awk_bool_t sym_lookup_ns(const char *name,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const char *name_space,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_valtype_t wanted,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_value_t *result);</code></dt>
<dd><p>This is like <code class="code">sym_lookup()</code>, but the <code class="code">name_space</code> parameter allows you
to specify which namespace <code class="code">name</code> is part of.  <code class="code">name_space</code> cannot be
<code class="code">NULL</code>. If it is <code class="code">&quot;&quot;</code> or <code class="code">&quot;awk&quot;</code>, then <code class="code">name</code> is searched
for in the default <code class="code">awk</code> namespace.
</p>
<p>Note that <code class="code">namespace</code> is a C++ keyword. For interoperability with C++,
you should avoid using that identifier in C code.
</p>
</dd>
<dt><code class="code">awk_bool_t sym_update(const char *name, awk_value_t *value);</code></dt>
<dd><p>Update the variable named by the string <code class="code">name</code>, which is a regular
C string.  The variable is added to <code class="command">gawk</code>&rsquo;s symbol table
if it is not there.  Return true if everything worked, and false otherwise.
</p>
<p>Changing types (scalar to array or vice versa) of an existing variable
is <em class="emph">not</em> allowed, nor may this routine be used to update an array.
This routine cannot be used to update any of the predefined
variables (such as <code class="code">ARGC</code> or <code class="code">NF</code>).
</p>
</dd>
<dt><code class="code">awk_bool_t sym_update_ns(const char *name_space, const char *name, awk_value_t *value);</code></dt>
<dd><p>This is like <code class="code">sym_update()</code>, but the <code class="code">name_space</code> parameter allows you
to specify which namespace <code class="code">name</code> is part of.  <code class="code">name_space</code> cannot be
<code class="code">NULL</code>. If it is <code class="code">&quot;&quot;</code> or <code class="code">&quot;awk&quot;</code>, then <code class="code">name</code> is searched
for in the default <code class="code">awk</code> namespace.
</p></dd>
</dl>

<p>An extension can look up the value of <code class="command">gawk</code>&rsquo;s special variables.
However, with the exception of the <code class="code">PROCINFO</code> array, an extension
cannot change any of those variables.
</p>
<p>When searching for or updating variables outside the <code class="code">awk</code> namespace
(see <a class="pxref" href="#Namespaces">Namespaces in <code class="command">gawk</code></a>), function and variable names must be simple
identifiers.<a class="footnote" id="DOCF109" href="#FOOT109"><sup>109</sup></a> In addition, namespace names and variable and function names
must follow the rules given in <a class="ref" href="#Naming-Rules">Namespace and Component Naming Rules</a>.
</p>
<hr>
</div>
<div class="subsubsection-level-extent" id="Symbol-table-by-cookie">
<div class="nav-panel">
<p>
Next: <a href="#Cached-values" accesskey="n" rel="next">Creating and Using Cached Values</a>, Previous: <a href="#Symbol-table-by-name" accesskey="p" rel="prev">Variable Access and Update by Name</a>, Up: <a href="#Symbol-Table-Access" accesskey="u" rel="up">Symbol Table Access</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Variable-Access-and-Update-by-Cookie"><span>17.4.11.2 Variable Access and Update by Cookie<a class="copiable-link" href="#Variable-Access-and-Update-by-Cookie"> &para;</a></span></h4>

<p>A <em class="dfn">scalar cookie</em> is an opaque handle that provides access
to a global variable or array. It is an optimization that
avoids looking up variables in <code class="command">gawk</code>&rsquo;s symbol table every time
access is needed. This was discussed earlier, in <a class="ref" href="#General-Data-Types">General-Purpose Data Types</a>.
</p>
<p>The following functions let you work with scalar cookies:
</p>
<dl class="table">
<dt><code class="code">awk_bool_t sym_lookup_scalar(awk_scalar_t cookie,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_valtype_t wanted,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_value_t *result);</code></dt>
<dd><p>Retrieve the current value of a scalar cookie.
Once you have obtained a scalar cookie using <code class="code">sym_lookup()</code>, you can
use this function to get its value more efficiently.
Return false if the value cannot be retrieved.
</p>
</dd>
<dt><code class="code">awk_bool_t sym_update_scalar(awk_scalar_t cookie, awk_value_t *value);</code></dt>
<dd><p>Update the value associated with a scalar cookie.  Return false if
the new value is not of type <code class="code">AWK_STRING</code>, <code class="code">AWK_STRNUM</code>, <code class="code">AWK_REGEX</code>, or <code class="code">AWK_NUMBER</code>.
Here too, the predefined variables may not be updated.
</p></dd>
</dl>

<p>It is not obvious at first glance how to work with scalar cookies or
what their <i class="i">raison d&rsquo;&ecirc;tre</i> really is.  In theory, the <code class="code">sym_lookup()</code>
and <code class="code">sym_update()</code> routines are all you really need to work with
variables.  For example, you might have code that looks up the value of
a variable, evaluates a condition, and then possibly changes the value
of the variable based on the result of that evaluation, like so:
</p>
<div class="example">
<pre class="example-preformatted">/*  do_magic --- do something really great */

static awk_value_t *
do_magic(int nargs, awk_value_t *result)
{
    awk_value_t value;

    if (   sym_lookup(&quot;MAGIC_VAR&quot;, AWK_NUMBER, &amp; value)
        &amp;&amp; some_condition(value.num_value)) {
            value.num_value += 42;
            sym_update(&quot;MAGIC_VAR&quot;, &amp; value);
    }

    return make_number(0.0, result);
}
</pre></div>

<p>This code looks (and is) simple and straightforward. So what&rsquo;s the problem?
</p>
<p>Well, consider what happens if <code class="command">awk</code>-level code associated
with your extension calls the <code class="code">magic()</code> function (implemented in
C by <code class="code">do_magic()</code>), once per record, while processing hundreds
of thousands or millions of records.  The <code class="code">MAGIC_VAR</code> variable is
looked up in the symbol table once or twice per function call!
</p>
<p>The symbol table lookup is really pure overhead; it is considerably
more efficient to get a cookie that represents the variable, and use
that to get the variable&rsquo;s value and update it as needed.<a class="footnote" id="DOCF110" href="#FOOT110"><sup>110</sup></a>
</p>
<p>Thus, the way to use cookies is as follows.  First, install
your extension&rsquo;s variable in <code class="command">gawk</code>&rsquo;s symbol table using
<code class="code">sym_update()</code>, as usual. Then get a scalar cookie for the variable
using <code class="code">sym_lookup()</code>:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">static awk_scalar_t magic_var_cookie;    /* cookie for MAGIC_VAR */

static void
my_extension_init()
{
    awk_value_t value;
</pre></div><pre class="example-preformatted">

    /* install initial value */
    sym_update(&quot;MAGIC_VAR&quot;, make_number(42.0, &amp; value));

    /* get the cookie */
    sym_lookup(&quot;MAGIC_VAR&quot;, AWK_SCALAR, &amp; value);

    /* save the cookie */
    magic_var_cookie = value.scalar_cookie;
    ...
}
</pre></div>

<p>Next, use the routines in this section for retrieving and updating
the value through the cookie.  Thus, <code class="code">do_magic()</code> now becomes
something like this:
</p>
<div class="example">
<pre class="example-preformatted">/*  do_magic --- do something really great */

static awk_value_t *
do_magic(int nargs, awk_value_t *result)
{
    awk_value_t value;

    if (   sym_lookup_scalar(magic_var_cookie, AWK_NUMBER, &amp; value)
        &amp;&amp; some_condition(value.num_value)) {
            value.num_value += 42;
            sym_update_scalar(magic_var_cookie, &amp; value);
    }
    ...

    return make_number(0.0, result);
}
</pre></div>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> The previous code omitted error checking for
presentation purposes.  Your extension code should be more robust
and carefully check the return values from the API functions.
</p></blockquote>

<hr>
</div>
<div class="subsubsection-level-extent" id="Cached-values">
<div class="nav-panel">
<p>
Previous: <a href="#Symbol-table-by-cookie" accesskey="p" rel="prev">Variable Access and Update by Cookie</a>, Up: <a href="#Symbol-Table-Access" accesskey="u" rel="up">Symbol Table Access</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Creating-and-Using-Cached-Values"><span>17.4.11.3 Creating and Using Cached Values<a class="copiable-link" href="#Creating-and-Using-Cached-Values"> &para;</a></span></h4>

<p>The routines in this section allow you to create and release
cached values.  Like scalar cookies, in theory, cached values
are not necessary. You can create numbers and strings using
the functions in <a class="ref" href="#Constructor-Functions">Constructor Functions</a>. You can then
assign those values to variables using <code class="code">sym_update()</code>
or <code class="code">sym_update_scalar()</code>, as you like.
</p>
<p>However, you can understand the point of cached values if you remember that
<em class="emph">every</em> string value&rsquo;s storage <em class="emph">must</em> come from <code class="code">gawk_malloc()</code>,
<code class="code">gawk_calloc()</code>, or <code class="code">gawk_realloc()</code>.
If you have 20 variables, all of which have the same string value, you
must create 20 identical copies of the string.<a class="footnote" id="DOCF111" href="#FOOT111"><sup>111</sup></a>
</p>
<p>It is clearly more efficient, if possible, to create a value once, and
then tell <code class="command">gawk</code> to reuse the value for multiple variables. That
is what the routines in this section let you do.  The functions are as follows:
</p>
<dl class="table">
<dt><code class="code">awk_bool_t create_value(awk_value_t *value, awk_value_cookie_t *result);</code></dt>
<dd><p>Create a cached string or numeric value from <code class="code">value</code> for
efficient later assignment.  Only values of type <code class="code">AWK_NUMBER</code>, <code class="code">AWK_REGEX</code>, <code class="code">AWK_STRNUM</code>,
and <code class="code">AWK_STRING</code> are allowed.  Any other type is rejected.
<code class="code">AWK_UNDEFINED</code> could be allowed, but doing so would result in
inferior performance.
</p>
</dd>
<dt><code class="code">awk_bool_t release_value(awk_value_cookie_t vc);</code></dt>
<dd><p>Release the memory associated with a value cookie obtained
from <code class="code">create_value()</code>.
</p></dd>
</dl>

<p>You use value cookies in a fashion similar to the way you use scalar cookies.
In the extension initialization routine, you create the value cookie:
</p>
<div class="example">
<pre class="example-preformatted">static awk_value_cookie_t answer_cookie;  /* static value cookie */

static void
my_extension_init()
{
    awk_value_t value;
    char *long_string;
    size_t long_string_len;

    /* code from earlier */
    ...
    /* ... fill in long_string and long_string_len ... */
    make_malloced_string(long_string, long_string_len, &amp; value);
    create_value(&amp; value, &amp; answer_cookie);    /* create cookie */
    ...
}
</pre></div>

<p>Once the value is created, you can use it as the value of any number
of variables:
</p>
<div class="example">
<pre class="example-preformatted">static awk_value_t *
do_magic(int nargs, awk_value_t *result)
{
    awk_value_t new_value;

    ...    /* as earlier */

    value.val_type = AWK_VALUE_COOKIE;
    value.value_cookie = answer_cookie;
    sym_update(&quot;VAR1&quot;, &amp; value);
    sym_update(&quot;VAR2&quot;, &amp; value);
    ...
    sym_update(&quot;VAR100&quot;, &amp; value);
    ...
}
</pre></div>

<p>Using value cookies in this way saves considerable storage, as all of
<code class="code">VAR1</code> through <code class="code">VAR100</code> share the same value.
</p>
<p>You might be wondering, &ldquo;Is this sharing problematic?
What happens if <code class="command">awk</code> code assigns a new value to <code class="code">VAR1</code>;
are all the others changed too?&rdquo;
</p>
<p>That&rsquo;s a great question. The answer is that no, it&rsquo;s not a problem.
Internally, <code class="command">gawk</code> uses <em class="dfn">reference-counted strings</em>. This means
that many variables can share the same string value, and <code class="command">gawk</code>
keeps track of the usage.  When a variable&rsquo;s value changes, <code class="command">gawk</code>
simply decrements the reference count on the old value and updates
the variable to use the new value.
</p>
<p>Finally, as part of your cleanup action (see <a class="pxref" href="#Exit-Callback-Functions">Registering An Exit Callback Function</a>)
you should release any cached values that you created, using
<code class="code">release_value()</code>.
</p>
<hr>
</div>
</div>
<div class="subsection-level-extent" id="Array-Manipulation">
<div class="nav-panel">
<p>
Next: <a href="#Redirection-API" accesskey="n" rel="next">Accessing and Manipulating Redirections</a>, Previous: <a href="#Symbol-Table-Access" accesskey="p" rel="prev">Symbol Table Access</a>, Up: <a href="#Extension-API-Description" accesskey="u" rel="up">API Description</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Array-Manipulation-1"><span>17.4.12 Array Manipulation<a class="copiable-link" href="#Array-Manipulation-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-array-manipulation-in-extensions"></a>
<a class="index-entry-id" id="index-extensions-loadable-array-manipulation-in"></a>

<p>The primary data structure<a class="footnote" id="DOCF112" href="#FOOT112"><sup>112</sup></a> in <code class="command">awk</code>
is the associative array (see <a class="pxref" href="#Arrays">Arrays in <code class="command">awk</code></a>).
Extensions need to be able to manipulate <code class="command">awk</code> arrays.
The API provides a number of data structures for working with arrays,
functions for working with individual elements, and functions for
working with arrays as a whole. This includes the ability to
&ldquo;flatten&rdquo; an array so that it is easy for C code to traverse
every element in an array.  The array data structures integrate
nicely with the data structures for values to make it easy to
both work with and create true arrays of arrays (see <a class="pxref" href="#General-Data-Types">General-Purpose Data Types</a>).
</p>

<ul class="mini-toc">
<li><a href="#Array-Data-Types" accesskey="1">Array Data Types</a></li>
<li><a href="#Array-Functions" accesskey="2">Array Functions</a></li>
<li><a href="#Flattening-Arrays" accesskey="3">Working With All The Elements of an Array</a></li>
<li><a href="#Creating-Arrays" accesskey="4">How To Create and Populate Arrays</a></li>
</ul>
<hr>
<div class="subsubsection-level-extent" id="Array-Data-Types">
<div class="nav-panel">
<p>
Next: <a href="#Array-Functions" accesskey="n" rel="next">Array Functions</a>, Up: <a href="#Array-Manipulation" accesskey="u" rel="up">Array Manipulation</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Array-Data-Types-1"><span>17.4.12.1 Array Data Types<a class="copiable-link" href="#Array-Data-Types-1"> &para;</a></span></h4>

<p>The data types associated with arrays are as follows:
</p>
<dl class="table">
<dt><code class="code">typedef void *awk_array_t;</code></dt>
<dd><p>If you request the value of an array variable, you get back an
<code class="code">awk_array_t</code> value. This value is opaque<a class="footnote" id="DOCF113" href="#FOOT113"><sup>113</sup></a> to the extension; it uniquely identifies the array but can
only be used by passing it into API functions or receiving it from API
functions. This is very similar to way &lsquo;<samp class="samp">FILE *</samp>&rsquo; values are used
with the <code class="code">&lt;stdio.h&gt;</code> library routines.
</p>
</dd>
<dt><code class="code">typedef struct awk_element {</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;/* convenience linked list pointer, not used by gawk */</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;struct awk_element *next;</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;enum {</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AWK_ELEMENT_DEFAULT = 0,&nbsp;&nbsp;/* set by gawk */</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AWK_ELEMENT_DELETE = 1&nbsp;&nbsp;&nbsp;&nbsp;/* set by extension */</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;} flags;</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;awk_value_t    index;</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;awk_value_t    value;</code></dt>
<dt><code class="code">} awk_element_t;</code></dt>
<dd><p>The <code class="code">awk_element_t</code> is a &ldquo;flattened&rdquo;
array element. <code class="command">awk</code> produces an array of these
inside the <code class="code">awk_flat_array_t</code> (see the next item).
Individual elements may be marked for deletion. New elements must be added
individually, one at a time, using the separate API for that purpose.
The fields are as follows:
</p>
<dl class="table">
<dt><code class="code">struct awk_element *next;</code></dt>
<dd><p>This pointer is for the convenience of extension writers.  It allows
an extension to create a linked list of new elements that can then be
added to an array in a loop that traverses the list.
</p>
</dd>
<dt><code class="code">enum { &hellip; } flags;</code></dt>
<dd><p>A set of flag values that convey information between the extension
and <code class="command">gawk</code>.  Currently there is only one: <code class="code">AWK_ELEMENT_DELETE</code>.
Setting it causes <code class="command">gawk</code> to delete the
element from the original array upon release of the flattened array.
</p>
</dd>
<dt><code class="code">index</code></dt>
<dt><code class="code">value</code></dt>
<dd><p>The index and value of the element, respectively.
<em class="emph">All</em> memory pointed to by <code class="code">index</code> and <code class="code">value</code> belongs to <code class="command">gawk</code>.
</p></dd>
</dl>

</dd>
<dt><code class="code">typedef struct awk_flat_array {</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;awk_const void *awk_const opaque1;&nbsp;&nbsp;&nbsp;&nbsp;/* for use by gawk */</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;awk_const void *awk_const opaque2;&nbsp;&nbsp;&nbsp;&nbsp;/* for use by gawk */</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;awk_const size_t count;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* how many elements */</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;awk_element_t elements[1];&nbsp;&nbsp;/* will be extended */</code></dt>
<dt><code class="code">} awk_flat_array_t;</code></dt>
<dd><p>This is a flattened array. When an extension gets one of these
from <code class="command">gawk</code>, the <code class="code">elements</code> array is of actual
size <code class="code">count</code>.
The <code class="code">opaque1</code> and <code class="code">opaque2</code> pointers are for use by <code class="command">gawk</code>;
therefore they are marked <code class="code">awk_const</code> so that the extension cannot
modify them.
</p></dd>
</dl>

<hr>
</div>
<div class="subsubsection-level-extent" id="Array-Functions">
<div class="nav-panel">
<p>
Next: <a href="#Flattening-Arrays" accesskey="n" rel="next">Working With All The Elements of an Array</a>, Previous: <a href="#Array-Data-Types" accesskey="p" rel="prev">Array Data Types</a>, Up: <a href="#Array-Manipulation" accesskey="u" rel="up">Array Manipulation</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Array-Functions-1"><span>17.4.12.2 Array Functions<a class="copiable-link" href="#Array-Functions-1"> &para;</a></span></h4>

<p>The following functions relate to individual array elements:
</p>
<dl class="table">
<dt><code class="code">awk_bool_t get_element_count(awk_array_t a_cookie, size_t *count);</code></dt>
<dd><p>For the array represented by <code class="code">a_cookie</code>, place in <code class="code">*count</code>
the number of elements it contains. A subarray counts as a single element.
Return false if there is an error.
</p>
</dd>
<dt><code class="code">awk_bool_t get_array_element(awk_array_t a_cookie,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const awk_value_t *const index,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_valtype_t wanted,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_value_t *result);</code></dt>
<dd><p>For the array represented by <code class="code">a_cookie</code>, return in <code class="code">*result</code>
the value of the element whose index is <code class="code">index</code>.
<code class="code">wanted</code> specifies the type of value you wish to retrieve.
Return false if <code class="code">wanted</code> does not match the actual type or if
<code class="code">index</code> is not in the array (see <a class="pxref" href="#table_002dvalue_002dtypes_002dreturned">Table 17.2</a>).
</p>
<p>The value for <code class="code">index</code> can be numeric, in which case <code class="command">gawk</code>
converts it to a string. Using nonintegral values is possible, but
requires that you understand how such values are converted to strings
(see <a class="pxref" href="#Conversion">Conversion of Strings and Numbers</a>); thus, using integral values is safest.
</p>
<p>As with <em class="emph">all</em> strings passed into <code class="command">gawk</code> from an extension,
the string value of <code class="code">index</code> must come from <code class="code">gawk_malloc()</code>,
<code class="code">gawk_calloc()</code>, or <code class="code">gawk_realloc()</code>, and
<code class="command">gawk</code> releases the storage.
</p>
</dd>
<dt><code class="code">awk_bool_t set_array_element(awk_array_t a_cookie,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;awk_value_t *const index,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;awk_value_t *const value);</code></dt>
<dd><p>In the array represented by <code class="code">a_cookie</code>, create or modify
the element whose index is given by <code class="code">index</code>.
The <code class="code">ARGV</code> and <code class="code">ENVIRON</code> arrays may not be changed,
although the <code class="code">PROCINFO</code> array can be.
</p>
</dd>
<dt><code class="code">awk_bool_t set_array_element_by_elem(awk_array_t a_cookie,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_element_t element);</code></dt>
<dd><p>Like <code class="code">set_array_element()</code>, but take the <code class="code">index</code> and <code class="code">value</code>
from <code class="code">element</code>. This is a convenience macro.
</p>
</dd>
<dt><code class="code">awk_bool_t del_array_element(awk_array_t a_cookie,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const awk_value_t* const index);</code></dt>
<dd><p>Remove the element with the given index from the array
represented by <code class="code">a_cookie</code>.
Return true if the element was removed, or false if the element did
not exist in the array.
</p></dd>
</dl>

<p>The following functions relate to arrays as a whole:
</p>
<dl class="table">
<dt><code class="code">awk_array_t create_array(void);</code></dt>
<dd><p>Create a new array to which elements may be added.
See <a class="xref" href="#Creating-Arrays">How To Create and Populate Arrays</a> for a discussion of how to
create a new array and add elements to it.
</p>
</dd>
<dt><code class="code">awk_bool_t clear_array(awk_array_t a_cookie);</code></dt>
<dd><p>Clear the array represented by <code class="code">a_cookie</code>.
Return false if there was some kind of problem, true otherwise.
The array remains an array, but after calling this function, it
has no elements. This is equivalent to using the <code class="code">delete</code>
statement (see <a class="pxref" href="#Delete">The <code class="code">delete</code> Statement</a>).
</p>
</dd>
<dt><code class="code">awk_bool_t destroy_array(awk_array_t a_cookie);</code></dt>
<dd><p>Clear the array represented by <code class="code">a_cookie</code> and release the array
allocated by <code class="code">create_array</code>.
Return false if there was some kind of problem, true otherwise.
The array will no longer exist and cannot be used again.
</p>
</dd>
<dt><code class="code">awk_bool_t flatten_array_typed(awk_array_t a_cookie,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_flat_array_t **data,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_valtype_t index_type,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_valtype_t value_type);</code></dt>
<dd><p>For the array represented by <code class="code">a_cookie</code>, create an <code class="code">awk_flat_array_t</code>
structure and fill it in with indices and values of the requested types.
Set the pointer whose address is passed as <code class="code">data</code>
to point to this structure.
Return true upon success, or false otherwise.
See <a class="xref" href="#Flattening-Arrays">Working With All The Elements of an Array</a>,
for a discussion of how to
flatten an array and work with it.
</p>
</dd>
<dt><code class="code">awk_bool_t flatten_array(awk_array_t a_cookie, awk_flat_array_t **data);</code></dt>
<dd><p>For the array represented by <code class="code">a_cookie</code>, create an <code class="code">awk_flat_array_t</code>
structure and fill it in with <code class="code">AWK_STRING</code> indices and
<code class="code">AWK_UNDEFINED</code> values.
This is superseded by <code class="code">flatten_array_typed()</code>.
It is provided as a macro, and remains for convenience and for source code
compatibility with the previous version of the API.
</p>
</dd>
<dt><code class="code">awk_bool_t release_flattened_array(awk_array_t a_cookie,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk_flat_array_t *data);</code></dt>
<dd><p>When done with a flattened array, release the storage using this function.
You must pass in both the original array cookie and the address of
the created <code class="code">awk_flat_array_t</code> structure.
The function returns true upon success, false otherwise.
</p></dd>
</dl>

<hr>
</div>
<div class="subsubsection-level-extent" id="Flattening-Arrays">
<div class="nav-panel">
<p>
Next: <a href="#Creating-Arrays" accesskey="n" rel="next">How To Create and Populate Arrays</a>, Previous: <a href="#Array-Functions" accesskey="p" rel="prev">Array Functions</a>, Up: <a href="#Array-Manipulation" accesskey="u" rel="up">Array Manipulation</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Working-With-All-The-Elements-of-an-Array"><span>17.4.12.3 Working With All The Elements of an Array<a class="copiable-link" href="#Working-With-All-The-Elements-of-an-Array"> &para;</a></span></h4>

<p>To <em class="dfn">flatten</em> an array is to create a structure that
represents the full array in a fashion that makes it easy
for C code to traverse the entire array.  Some of the code
in <samp class="file">extension/testext.c</samp> does this, and also serves
as a nice example showing how to use the APIs.
</p>
<p>We walk through that part of the code one step at a time.
First, the <code class="command">gawk</code> script that drives the test extension:
</p>
<div class="example">
<pre class="example-preformatted">@load &quot;testext&quot;
BEGIN {
    n = split(&quot;blacky rusty sophie raincloud lucky&quot;, pets)
    printf(&quot;pets has %d elements\n&quot;, length(pets))
    ret = dump_array_and_delete(&quot;pets&quot;, &quot;3&quot;)
    printf(&quot;dump_array_and_delete(pets) returned %d\n&quot;, ret)
    if (&quot;3&quot; in pets)
        printf(&quot;dump_array_and_delete() did NOT remove index \&quot;3\&quot;!\n&quot;)
    else
        printf(&quot;dump_array_and_delete() did remove index \&quot;3\&quot;!\n&quot;)
    print &quot;&quot;
}
</pre></div>

<p>This code creates an array with <code class="code">split()</code> (see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>)
and then calls <code class="code">dump_array_and_delete()</code>. That function looks up
the array whose name is passed as the first argument, and
deletes the element at the index passed in the second argument.
The <code class="command">awk</code> code then prints the return value and checks if the element
was indeed deleted.  Here is the C code that implements
<code class="code">dump_array_and_delete()</code>. It has been edited slightly for
presentation.
</p>
<p>The first part declares variables, sets up the default
return value in <code class="code">result</code>, and checks that the function
was called with the correct number of arguments:
</p>
<div class="example">
<pre class="example-preformatted">static awk_value_t *
dump_array_and_delete(int nargs, awk_value_t *result)
{
    awk_value_t value, value2, value3;
    awk_flat_array_t *flat_array;
    size_t count;
    char *name;
    int i;

    assert(result != NULL);
    make_number(0.0, result);

    if (nargs != 2) {
        printf(&quot;dump_array_and_delete: nargs not right &quot;
               &quot;(%d should be 2)\n&quot;, nargs);
        goto out;
    }
</pre></div>

<p>The function then proceeds in steps, as follows. First, retrieve
the name of the array, passed as the first argument, followed by
the array itself. If either operation fails, print an
error message and return:
</p>
<div class="example">
<pre class="example-preformatted">    /* get argument named array as flat array and print it */
    if (get_argument(0, AWK_STRING, &amp; value)) {
        name = value.str_value.str;
        if (sym_lookup(name, AWK_ARRAY, &amp; value2))
            printf(&quot;dump_array_and_delete: sym_lookup of %s passed\n&quot;,
                   name);
        else {
            printf(&quot;dump_array_and_delete: sym_lookup of %s failed\n&quot;,
                   name);
            goto out;
        }
    } else {
        printf(&quot;dump_array_and_delete: get_argument(0) failed\n&quot;);
        goto out;
    }
</pre></div>

<p>For testing purposes and to make sure that the C code sees
the same number of elements as the <code class="command">awk</code> code,
the second step is to get the count of elements in the array
and print it:
</p>
<div class="example">
<pre class="example-preformatted">    if (! get_element_count(value2.array_cookie, &amp; count)) {
        printf(&quot;dump_array_and_delete: get_element_count failed\n&quot;);
        goto out;
    }

    printf(&quot;dump_array_and_delete: incoming size is %lu\n&quot;,
           (unsigned long) count);
</pre></div>

<p>The third step is to actually flatten the array, and then
to double-check that the count in the <code class="code">awk_flat_array_t</code>
is the same as the count just retrieved:
</p>
<div class="example">
<pre class="example-preformatted">    if (! flatten_array_typed(value2.array_cookie, &amp; flat_array,
                              AWK_STRING, AWK_UNDEFINED)) {
        printf(&quot;dump_array_and_delete: could not flatten array\n&quot;);
        goto out;
    }

    if (flat_array-&gt;count != count) {
        printf(&quot;dump_array_and_delete: flat_array-&gt;count (%lu)&quot;
               &quot; != count (%lu)\n&quot;,
                (unsigned long) flat_array-&gt;count,
                (unsigned long) count);
        goto out;
    }
</pre></div>

<p>The fourth step is to retrieve the index of the element
to be deleted, which was passed as the second argument.
Remember that argument counts passed to <code class="code">get_argument()</code>
are zero-based, and thus the second argument is numbered one:
</p>
<div class="example">
<pre class="example-preformatted">    if (! get_argument(1, AWK_STRING, &amp; value3)) {
        printf(&quot;dump_array_and_delete: get_argument(1) failed\n&quot;);
        goto out;
    }
</pre></div>

<p>The fifth step is where the &ldquo;real work&rdquo; is done. The function
loops over every element in the array, printing the index and
element values. In addition, upon finding the element with the
index that is supposed to be deleted, the function sets the
<code class="code">AWK_ELEMENT_DELETE</code> bit in the <code class="code">flags</code> field
of the element.  When the array is released, <code class="command">gawk</code>
traverses the flattened array, and deletes any elements that
have this flag bit set:
</p>
<div class="example">
<pre class="example-preformatted">    for (i = 0; i &lt; flat_array-&gt;count; i++) {
        printf(&quot;\t%s[\&quot;%.*s\&quot;] = %s\n&quot;,
            name,
            (int) flat_array-&gt;elements[i].index.str_value.len,
            flat_array-&gt;elements[i].index.str_value.str,
            valrep2str(&amp; flat_array-&gt;elements[i].value));

        if (strcmp(value3.str_value.str,
                   flat_array-&gt;elements[i].index.str_value.str) == 0) {
            flat_array-&gt;elements[i].flags |= AWK_ELEMENT_DELETE;
            printf(&quot;dump_array_and_delete: marking element \&quot;%s\&quot; &quot;
                   &quot;for deletion\n&quot;,
                flat_array-&gt;elements[i].index.str_value.str);
        }
    }
</pre></div>

<p>The sixth step is to release the flattened array. This tells
<code class="command">gawk</code> that the extension is no longer using the array,
and that it should delete any elements marked for deletion.
<code class="command">gawk</code> also frees any storage that was allocated,
so you should not use the pointer (<code class="code">flat_array</code> in this
code) once you have called <code class="code">release_flattened_array()</code>:
</p>
<div class="example">
<pre class="example-preformatted">    if (! release_flattened_array(value2.array_cookie, flat_array)) {
        printf(&quot;dump_array_and_delete: could not release flattened array\n&quot;);
        goto out;
    }
</pre></div>

<p>Finally, because everything was successful, the function sets the
return value to success, and returns:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">    make_number(1.0, result);
out:
    return result;
}
</pre></div></div>

<p>Here is the output from running this part of the test:
</p>
<div class="example">
<pre class="example-preformatted">pets has 5 elements
dump_array_and_delete: sym_lookup of pets passed
dump_array_and_delete: incoming size is 5
        pets[&quot;1&quot;] = &quot;blacky&quot;
        pets[&quot;2&quot;] = &quot;rusty&quot;
        pets[&quot;3&quot;] = &quot;sophie&quot;
dump_array_and_delete: marking element &quot;3&quot; for deletion
        pets[&quot;4&quot;] = &quot;raincloud&quot;
        pets[&quot;5&quot;] = &quot;lucky&quot;
dump_array_and_delete(pets) returned 1
dump_array_and_delete() did remove index &quot;3&quot;!
</pre></div>

<hr>
</div>
<div class="subsubsection-level-extent" id="Creating-Arrays">
<div class="nav-panel">
<p>
Previous: <a href="#Flattening-Arrays" accesskey="p" rel="prev">Working With All The Elements of an Array</a>, Up: <a href="#Array-Manipulation" accesskey="u" rel="up">Array Manipulation</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="How-To-Create-and-Populate-Arrays"><span>17.4.12.4 How To Create and Populate Arrays<a class="copiable-link" href="#How-To-Create-and-Populate-Arrays"> &para;</a></span></h4>

<p>Besides working with arrays created by <code class="command">awk</code> code, you can
create arrays and populate them as you see fit, and then <code class="command">awk</code>
code can access them and manipulate them.
</p>
<p>There are two important points about creating arrays from extension code:
</p>
<ul class="itemize mark-bullet">
<li>You must install a new array into <code class="command">gawk</code>&rsquo;s symbol
table immediately upon creating it.  Once you have done so,
you can then populate the array.


<p>Similarly, if installing a new array as a subarray of an existing array,
you must add the new array to its parent before adding any elements to it.
</p>
<p>Thus, the correct way to build an array is to work &ldquo;top down.&rdquo;  Create
the array, and immediately install it in <code class="command">gawk</code>&rsquo;s symbol table
using <code class="code">sym_update()</code>, or install it as an element in a previously
existing array using <code class="code">set_array_element()</code>.  We show example code shortly.
</p>
</li><li>Due to <code class="command">gawk</code> internals, after using <code class="code">sym_update()</code> to install an array
into <code class="command">gawk</code>, you have to retrieve the array cookie from the value
passed in to <code class="command">sym_update()</code> before doing anything else with it, like so:

<div class="example">
<pre class="example-preformatted">awk_value_t val;
awk_array_t new_array;

new_array = create_array();
val.val_type = AWK_ARRAY;
val.array_cookie = new_array;

/* install array in the symbol table */
sym_update(&quot;array&quot;, &amp; val);

new_array = val.array_cookie;    /* YOU MUST DO THIS */
</pre></div>

<p>If installing an array as a subarray, you must also retrieve the value
of the array cookie after the call to <code class="code">set_element()</code>.
</p></li></ul>

<p>The following C code is a simple test extension to create an array
with two regular elements and with a subarray. The leading <code class="code">#include</code>
directives and boilerplate variable declarations
(see <a class="pxref" href="#Extension-API-Boilerplate">Boilerplate Code</a>)
are omitted for brevity.
The first step is to create a new array and then install it
in the symbol table:
</p>
<div class="example">
<pre class="example-preformatted">/* create_new_array --- create a named array */

static void
create_new_array()
{
    awk_array_t a_cookie;
    awk_array_t subarray;
    awk_value_t index, value;

    a_cookie = create_array();
    value.val_type = AWK_ARRAY;
    value.array_cookie = a_cookie;

    if (! sym_update(&quot;new_array&quot;, &amp; value))
        printf(&quot;create_new_array: sym_update(\&quot;new_array\&quot;) failed!\n&quot;);
    a_cookie = value.array_cookie;
</pre></div>

<p>Note how <code class="code">a_cookie</code> is reset from the <code class="code">array_cookie</code> field in
the <code class="code">value</code> structure.
</p>
<p>The second step is to install two regular values into <code class="code">new_array</code>:
</p>
<div class="example">
<pre class="example-preformatted">    (void) make_const_string(&quot;hello&quot;, 5, &amp; index);
    (void) make_const_string(&quot;world&quot;, 5, &amp; value);
    if (! set_array_element(a_cookie, &amp; index, &amp; value)) {
        printf(&quot;fill_in_array: set_array_element failed\n&quot;);
        return;
    }

    (void) make_const_string(&quot;answer&quot;, 6, &amp; index);
    (void) make_number(42.0, &amp; value);
    if (! set_array_element(a_cookie, &amp; index, &amp; value)) {
        printf(&quot;fill_in_array: set_array_element failed\n&quot;);
        return;
    }
</pre></div>

<p>The third step is to create the subarray and install it:
</p>
<div class="example">
<pre class="example-preformatted">    (void) make_const_string(&quot;subarray&quot;, 8, &amp; index);
    subarray = create_array();
    value.val_type = AWK_ARRAY;
    value.array_cookie = subarray;
    if (! set_array_element(a_cookie, &amp; index, &amp; value)) {
        printf(&quot;fill_in_array: set_array_element failed\n&quot;);
        return;
    }
    subarray = value.array_cookie;
</pre></div>

<p>The final step is to populate the subarray with its own element:
</p>
<div class="example">
<pre class="example-preformatted">    (void) make_const_string(&quot;foo&quot;, 3, &amp; index);
    (void) make_const_string(&quot;bar&quot;, 3, &amp; value);
    if (! set_array_element(subarray, &amp; index, &amp; value)) {
        printf(&quot;fill_in_array: set_array_element failed\n&quot;);
        return;
    }
}
</pre></div>

<p>Here is a sample script that loads the extension
and then dumps the array:
</p>
<div class="example">
<pre class="example-preformatted">@load &quot;subarray&quot;

function dumparray(name, array,     i)
{
    for (i in array)
        if (isarray(array[i]))
            dumparray(name &quot;[\&quot;&quot; i &quot;\&quot;]&quot;, array[i])
        else
            printf(&quot;%s[\&quot;%s\&quot;] = %s\n&quot;, name, i, array[i])
}

BEGIN {
    dumparray(&quot;new_array&quot;, new_array);
}
</pre></div>

<a class="index-entry-id" id="index-AWKLIBPATH-environment-variable-4"></a>
<a class="index-entry-id" id="index-environment-variables-AWKLIBPATH-4"></a>
<p>Here is the result of running the script:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">AWKLIBPATH=$PWD gawk -f subarray.awk</kbd>
-| new_array[&quot;subarray&quot;][&quot;foo&quot;] = bar
-| new_array[&quot;hello&quot;] = world
-| new_array[&quot;answer&quot;] = 42
</pre></div>

<p>(See <a class="xref" href="#Finding-Extensions">How <code class="command">gawk</code> Finds Extensions</a> for more information on the
<code class="env">AWKLIBPATH</code> environment variable.)
</p>
<hr>
</div>
</div>
<div class="subsection-level-extent" id="Redirection-API">
<div class="nav-panel">
<p>
Next: <a href="#Extension-API-Variables" accesskey="n" rel="next">API Variables</a>, Previous: <a href="#Array-Manipulation" accesskey="p" rel="prev">Array Manipulation</a>, Up: <a href="#Extension-API-Description" accesskey="u" rel="up">API Description</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Accessing-and-Manipulating-Redirections"><span>17.4.13 Accessing and Manipulating Redirections<a class="copiable-link" href="#Accessing-and-Manipulating-Redirections"> &para;</a></span></h4>

<p>The following function allows extensions to access and manipulate redirections.
</p>
<dl class="table">
<dt><code class="code">awk_bool_t get_file(const char *name,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size_t name_len,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const char *filetype,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int fd,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const awk_input_buf_t **ibufp,</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const awk_output_buf_t **obufp);</code></dt>
<dd><p>Look up file <code class="code">name</code> in <code class="command">gawk</code>&rsquo;s internal redirection table.
If <code class="code">name</code> is <code class="code">NULL</code> or <code class="code">name_len</code> is zero, return
data for the currently open input file corresponding to <code class="code">FILENAME</code>.
(This does not access the <code class="code">filetype</code> argument, so that may be undefined).
If the file is not already open, attempt to open it.
The <code class="code">filetype</code> argument must be zero-terminated and should be one of:
</p>
<dl class="table">
<dt><code class="code">&quot;&gt;&quot;</code></dt>
<dd><p>A file opened for output.
</p>
</dd>
<dt><code class="code">&quot;&gt;&gt;&quot;</code></dt>
<dd><p>A file opened for append.
</p>
</dd>
<dt><code class="code">&quot;&lt;&quot;</code></dt>
<dd><p>A file opened for input.
</p>
</dd>
<dt><code class="code">&quot;|&gt;&quot;</code></dt>
<dd><p>A pipe opened for output.
</p>
</dd>
<dt><code class="code">&quot;|&lt;&quot;</code></dt>
<dd><p>A pipe opened for input.
</p>
</dd>
<dt><code class="code">&quot;|&amp;&quot;</code></dt>
<dd><p>A two-way coprocess.
</p></dd>
</dl>

<p>On error, return <code class="code">awk_false</code>.  Otherwise, return
<code class="code">awk_true</code>, and return additional information about the redirection
in the <code class="code">ibufp</code> and <code class="code">obufp</code> pointers.
</p>
<p>For input redirections, the <code class="code">*ibufp</code> value should be non-<code class="code">NULL</code>,
and <code class="code">*obufp</code> should be <code class="code">NULL</code>.  For output redirections,
the <code class="code">*obufp</code> value should be non-<code class="code">NULL</code>, and <code class="code">*ibufp</code>
should be <code class="code">NULL</code>.  For two-way coprocesses, both values should
be non-<code class="code">NULL</code>.
</p>
<p>In the usual case, the extension is interested in <code class="code">(*ibufp)-&gt;fd</code>
and/or <code class="code">fileno((*obufp)-&gt;fp)</code>.  If the file is not already
open, and the <code class="code">fd</code> argument is nonnegative, <code class="command">gawk</code>
will use that file descriptor instead of opening the file in the
usual way.  If <code class="code">fd</code> is nonnegative, but the file exists already,
<code class="command">gawk</code> ignores <code class="code">fd</code> and returns the existing file.  It is
the caller&rsquo;s responsibility to notice that neither the <code class="code">fd</code> in
the returned <code class="code">awk_input_buf_t</code> nor the <code class="code">fd</code> in the returned
<code class="code">awk_output_buf_t</code> matches the requested value.
</p>
<p>Note that supplying a file descriptor is currently <em class="emph">not</em> supported
for pipes.  However, supplying a file descriptor should work for input,
output, append, and two-way (coprocess) sockets.  If <code class="code">filetype</code>
is two-way, <code class="command">gawk</code> assumes that it is a socket!  Note that in
the two-way case, the input and output file descriptors may differ.
To check for success, you must check whether either matches.
</p></dd>
</dl>

<p>It is anticipated that this API function will be used to implement I/O
multiplexing and a socket library.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Extension-API-Variables">
<div class="nav-panel">
<p>
Next: <a href="#Extension-API-Boilerplate" accesskey="n" rel="next">Boilerplate Code</a>, Previous: <a href="#Redirection-API" accesskey="p" rel="prev">Accessing and Manipulating Redirections</a>, Up: <a href="#Extension-API-Description" accesskey="u" rel="up">API Description</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="API-Variables"><span>17.4.14 API Variables<a class="copiable-link" href="#API-Variables"> &para;</a></span></h4>

<p>The API provides two sets of variables.  The first provides information
about the version of the API (both with which the extension was compiled,
and with which <code class="command">gawk</code> was compiled).  The second provides
information about how <code class="command">gawk</code> was invoked.
</p>

<ul class="mini-toc">
<li><a href="#Extension-Versioning" accesskey="1">API Version Constants and Variables</a></li>
<li><a href="#Extension-GMP_002fMPFR-Versioning" accesskey="2">GMP and MPFR Version Information</a></li>
<li><a href="#Extension-API-Informational-Variables" accesskey="3">Informational Variables</a></li>
</ul>
<hr>
<div class="subsubsection-level-extent" id="Extension-Versioning">
<div class="nav-panel">
<p>
Next: <a href="#Extension-GMP_002fMPFR-Versioning" accesskey="n" rel="next">GMP and MPFR Version Information</a>, Up: <a href="#Extension-API-Variables" accesskey="u" rel="up">API Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="API-Version-Constants-and-Variables"><span>17.4.14.1 API Version Constants and Variables<a class="copiable-link" href="#API-Version-Constants-and-Variables"> &para;</a></span></h4>
<a class="index-entry-id" id="index-API-version"></a>
<a class="index-entry-id" id="index-extension-API-version-number-1"></a>

<p>The API provides both a &ldquo;major&rdquo; and a &ldquo;minor&rdquo; version number.
The API versions are available at compile time as C preprocessor defines
to support conditional compilation, and as enum constants to facilitate
debugging:
</p>
<div class="float" id="gawk_002dapi_002dversion">
<table class="multitable">
<thead><tr><th>API Version</th><th>C Preprocessor Define</th><th>enum constant</th></tr></thead>
<tbody><tr><td>Major</td><td><code class="code">gawk_api_major_version</code></td><td><code class="code">GAWK_API_MAJOR_VERSION</code></td></tr>
<tr><td>Minor</td><td><code class="code">gawk_api_minor_version</code></td><td><code class="code">GAWK_API_MINOR_VERSION</code></td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 17.3: </strong>gawk API version constants</p></div></div>
<p>The minor version increases when new functions are added to the API. Such
new functions are always added to the end of the API <code class="code">struct</code>.
</p>
<p>The major version increases (and the minor version is reset to zero) if any
of the data types change size or member order, or if any of the existing
functions change signature.
</p>
<p>It could happen that an extension may be compiled against one version
of the API but loaded by a version of <code class="command">gawk</code> using a different
version. For this reason, the major and minor API versions of the
running <code class="command">gawk</code> are included in the API <code class="code">struct</code> as read-only
constant integers:
</p>
<dl class="table">
<dt><code class="code">api-&gt;major_version</code></dt>
<dd><p>The major version of the running <code class="command">gawk</code>.
</p>
</dd>
<dt><code class="code">api-&gt;minor_version</code></dt>
<dd><p>The minor version of the running <code class="command">gawk</code>.
</p></dd>
</dl>

<p>It is up to the extension to decide if there are API incompatibilities.
Typically, a check like this is enough:
</p>
<div class="example">
<pre class="example-preformatted">if (   api-&gt;major_version != GAWK_API_MAJOR_VERSION
    || api-&gt;minor_version &lt; GAWK_API_MINOR_VERSION) {
        fprintf(stderr, &quot;foo_extension: version mismatch with gawk!\n&quot;);
        fprintf(stderr, &quot;\tmy version (%d, %d), gawk version (%d, %d)\n&quot;,
                GAWK_API_MAJOR_VERSION, GAWK_API_MINOR_VERSION,
                api-&gt;major_version, api-&gt;minor_version);
        exit(1);
}
</pre></div>

<p>Such code is included in the boilerplate <code class="code">dl_load_func()</code> macro
provided in <samp class="file">gawkapi.h</samp> (discussed in
<a class="ref" href="#Extension-API-Boilerplate">Boilerplate Code</a>).
</p>
<hr>
</div>
<div class="subsubsection-level-extent" id="Extension-GMP_002fMPFR-Versioning">
<div class="nav-panel">
<p>
Next: <a href="#Extension-API-Informational-Variables" accesskey="n" rel="next">Informational Variables</a>, Previous: <a href="#Extension-Versioning" accesskey="p" rel="prev">API Version Constants and Variables</a>, Up: <a href="#Extension-API-Variables" accesskey="u" rel="up">API Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="GMP-and-MPFR-Version-Information"><span>17.4.14.2 GMP and MPFR Version Information<a class="copiable-link" href="#GMP-and-MPFR-Version-Information"> &para;</a></span></h4>

<p>The API also includes information about the versions of GMP and MPFR
with which the running <code class="command">gawk</code> was compiled (if any).
They are included in the API <code class="code">struct</code> as read-only
constant integers:
</p>
<dl class="table">
<dt><code class="code">api-&gt;gmp_major_version</code></dt>
<dd><p>The major version of the GMP library used to compile <code class="command">gawk</code>.
</p>
</dd>
<dt><code class="code">api-&gt;gmp_minor_version</code></dt>
<dd><p>The minor version of the GMP library used to compile <code class="command">gawk</code>.
</p>
</dd>
<dt><code class="code">api-&gt;mpfr_major_version</code></dt>
<dd><p>The major version of the MPFR library used to compile <code class="command">gawk</code>.
</p>
</dd>
<dt><code class="code">api-&gt;mpfr_minor_version</code></dt>
<dd><p>The minor version of the MPFR library used to compile <code class="command">gawk</code>.
</p></dd>
</dl>

<p>These fields are set to zero if <code class="command">gawk</code> was compiled without
MPFR support.
</p>
<p>You can check if the versions of MPFR and GMP that you are using match those
of <code class="command">gawk</code> with the following macro:
</p>
<dl class="table">
<dt><code class="code">check_mpfr_version(extension)</code></dt>
<dd><p>The <code class="code">extension</code> is the extension id passed to all the other macros
and functions defined in <samp class="file">gawkapi.h</samp>.  If you have not included
the <code class="code">&lt;mpfr.h&gt;</code> header file, then this macro will be defined to do nothing.
</p>
<p>If you have included that file, then this macro compares the MPFR
and GMP major and minor versions against those of the library you are
compiling against.  If your libraries are newer than <code class="command">gawk</code>&rsquo;s, it
produces a fatal error message.
</p>
<p>The <code class="code">dl_load_func()</code> macro (see <a class="pxref" href="#Extension-API-Boilerplate">Boilerplate Code</a>)
calls <code class="code">check_mpfr_version()</code>.
</p></dd>
</dl>

<hr>
</div>
<div class="subsubsection-level-extent" id="Extension-API-Informational-Variables">
<div class="nav-panel">
<p>
Previous: <a href="#Extension-GMP_002fMPFR-Versioning" accesskey="p" rel="prev">GMP and MPFR Version Information</a>, Up: <a href="#Extension-API-Variables" accesskey="u" rel="up">API Variables</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsubsection" id="Informational-Variables"><span>17.4.14.3 Informational Variables<a class="copiable-link" href="#Informational-Variables"> &para;</a></span></h4>
<a class="index-entry-id" id="index-API-informational-variables"></a>
<a class="index-entry-id" id="index-extension-API-informational-variables"></a>

<p>The API provides access to several variables that describe
whether the corresponding command-line options were enabled when
<code class="command">gawk</code> was invoked.  The variables are:
</p>
<dl class="table">
<dt><code class="code">do_csv</code></dt>
<dd><p>This variable is true if <code class="command">gawk</code> was invoked with <samp class="option">--csv</samp> option.
</p>
</dd>
<dt><code class="code">do_debug</code></dt>
<dd><p>This variable is true if <code class="command">gawk</code> was invoked with <samp class="option">--debug</samp> option.
</p>
</dd>
<dt><code class="code">do_lint</code></dt>
<dd><p>This variable is true if <code class="command">gawk</code> was invoked with <samp class="option">--lint</samp> option.
</p>
</dd>
<dt><code class="code">do_mpfr</code></dt>
<dd><p>This variable is true if <code class="command">gawk</code> was invoked with <samp class="option">--bignum</samp> option.
</p>
</dd>
<dt><code class="code">do_profile</code></dt>
<dd><p>This variable is true if <code class="command">gawk</code> was invoked with <samp class="option">--profile</samp> option.
</p>
</dd>
<dt><code class="code">do_sandbox</code></dt>
<dd><p>This variable is true if <code class="command">gawk</code> was invoked with <samp class="option">--sandbox</samp> option.
</p>
</dd>
<dt><code class="code">do_traditional</code></dt>
<dd><p>This variable is true if <code class="command">gawk</code> was invoked with <samp class="option">--traditional</samp> option.
</p></dd>
</dl>

<p>The value of <code class="code">do_lint</code> can change if <code class="command">awk</code> code
modifies the <code class="code">LINT</code> predefined variable (see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>).
The others should not change during execution.
</p>
<hr>
</div>
</div>
<div class="subsection-level-extent" id="Extension-API-Boilerplate">
<div class="nav-panel">
<p>
Next: <a href="#Changes-from-API-V1" accesskey="n" rel="next">Changes From Version 1 of the API</a>, Previous: <a href="#Extension-API-Variables" accesskey="p" rel="prev">API Variables</a>, Up: <a href="#Extension-API-Description" accesskey="u" rel="up">API Description</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Boilerplate-Code"><span>17.4.15 Boilerplate Code<a class="copiable-link" href="#Boilerplate-Code"> &para;</a></span></h4>

<p>As mentioned earlier (see <a class="pxref" href="#Extension-Mechanism-Outline">How It Works at a High Level</a>), the function
definitions as presented are really macros. To use these macros, your
extension must provide a small amount of boilerplate code (variables and
functions) toward the top of your source file, using predefined names
as described here.  The boilerplate needed is also provided in comments
in the <samp class="file">gawkapi.h</samp> header file:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">/* Boilerplate code: */
int plugin_is_GPL_compatible;

static gawk_api_t *const api;
</pre></div><pre class="example-preformatted">static awk_ext_id_t ext_id;
static const char *ext_version = NULL; /* or ... = &quot;some string&quot; */

static awk_ext_func_t func_table[] = {
    { &quot;name&quot;, do_name, 1, 0, awk_false, NULL },
    /* ... */
};

/* EITHER: */

static awk_bool_t (*init_func)(void) = NULL;

/* OR: */

static awk_bool_t
init_my_extension(void)
{
    ...
}

static awk_bool_t (*init_func)(void) = init_my_extension;

dl_load_func(func_table, some_name, &quot;name_space_in_quotes&quot;)
</pre></div>

<p>These variables and functions are as follows:
</p>
<dl class="table">
<dt><code class="code">int plugin_is_GPL_compatible;</code></dt>
<dd><p>This asserts that the extension is compatible with
the GNU GPL (see <a class="pxref" href="#Copying">GNU General Public License</a>).
If your extension does not have this, <code class="command">gawk</code>
will not load it (see <a class="pxref" href="#Plugin-License">Extension Licensing</a>).
</p>
</dd>
<dt><code class="code">static gawk_api_t *const api;</code></dt>
<dd><p>This global <code class="code">static</code> variable should be set to point to
the <code class="code">gawk_api_t</code> pointer that <code class="command">gawk</code> passes to your
<code class="code">dl_load()</code> function.  This variable is used by all of the macros.
</p>
</dd>
<dt><code class="code">static awk_ext_id_t ext_id;</code></dt>
<dd><p>This global static variable should be set to the <code class="code">awk_ext_id_t</code>
value that <code class="command">gawk</code> passes to your <code class="code">dl_load()</code> function.
This variable is used by all of the macros.
</p>
</dd>
<dt><code class="code">static const char *ext_version = NULL; /* or &hellip; = &quot;some string&quot; */</code></dt>
<dd><p>This global <code class="code">static</code> variable should be set either
to <code class="code">NULL</code>, or to point to a string giving the name and version of
your extension.
</p>
</dd>
<dt><code class="code">static awk_ext_func_t func_table[] = { &hellip; };</code></dt>
<dd><p>This is an array of one or more <code class="code">awk_ext_func_t</code> structures,
as described earlier (see <a class="pxref" href="#Extension-Functions">Registering An Extension Function</a>).
It can then be looped over for multiple calls to
<code class="code">add_ext_func()</code>.
</p>
</dd>
<dt><code class="code">static awk_bool_t (*init_func)(void) = NULL;</code></dt>
<dt><code class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<var class="var">OR</var></code></dt>
<dt><code class="code">static awk_bool_t init_my_extension(void) { &hellip; }</code></dt>
<dt><code class="code">static awk_bool_t (*init_func)(void) = init_my_extension;</code></dt>
<dd><p>If you need to do some initialization work, you should define a
function that does it (creates variables, opens files, etc.)
and then define the <code class="code">init_func</code> pointer to point to your
function.
The function should return <code class="code">awk_false</code> upon failure, or <code class="code">awk_true</code>
if everything goes well.
</p>
<p>If you don&rsquo;t need to do any initialization, define the pointer and
initialize it to <code class="code">NULL</code>.
</p>
</dd>
<dt><code class="code">dl_load_func(func_table, some_name, &quot;name_space_in_quotes&quot;)</code></dt>
<dd><p>This macro expands to a <code class="code">dl_load()</code> function that performs
all the necessary initializations.
</p></dd>
</dl>

<p>The point of all the variables and arrays is to let the
<code class="code">dl_load()</code> function (from the <code class="code">dl_load_func()</code>
macro) do all the standard work. It does the following:
</p>
<ol class="enumerate">
<li> Check the API versions. If the extension major version does not match
<code class="command">gawk</code>&rsquo;s, or if the extension minor version is greater than
<code class="command">gawk</code>&rsquo;s, it prints a fatal error message and exits.

</li><li> Check the MPFR and GMP versions. If there is a mismatch, it prints
a fatal error message and exits.

</li><li> Load the functions defined in <code class="code">func_table</code>.
If any of them fails to load, it prints a warning message but
continues on.

</li><li> If the <code class="code">init_func</code> pointer is not <code class="code">NULL</code>, call the
function it points to. If it returns <code class="code">awk_false</code>, print a
warning message.

</li><li> If <code class="code">ext_version</code> is not <code class="code">NULL</code>, register
the version string with <code class="command">gawk</code>.
</li></ol>


<hr>
</div>
<div class="subsection-level-extent" id="Changes-from-API-V1">
<div class="nav-panel">
<p>
Previous: <a href="#Extension-API-Boilerplate" accesskey="p" rel="prev">Boilerplate Code</a>, Up: <a href="#Extension-API-Description" accesskey="u" rel="up">API Description</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Changes-From-Version-1-of-the-API"><span>17.4.16 Changes From Version 1 of the API<a class="copiable-link" href="#Changes-From-Version-1-of-the-API"> &para;</a></span></h4>

<p>The current API is <em class="emph">not</em> binary compatible with version 1 of the API.
You will have to recompile your extensions in order to use them with
the current version of <code class="command">gawk</code>.
</p>
<p>Fortunately, at the possible expense of some compile-time warnings, the API remains
source-code&ndash;compatible with the previous API. The major differences are
the additional members in the <code class="code">awk_ext_func_t</code> structure, and the
addition of the third argument to the C implementation function
(see <a class="pxref" href="#Extension-Functions">Registering An Extension Function</a>).
</p>
<p>Here is a list of individual features that changed from version 1 to
version 2 of the API:
</p>
<ul class="itemize mark-bullet">
<li>Numeric values can now have MPFR/MPZ variants
(see <a class="pxref" href="#General-Data-Types">General-Purpose Data Types</a>).

</li><li>There are new string types: <code class="code">AWK_REGEX</code> and <code class="code">AWK_STRNUM</code>
(see <a class="pxref" href="#General-Data-Types">General-Purpose Data Types</a>).

</li><li>The <code class="code">ezalloc()</code> macro is new
(see <a class="pxref" href="#Memory-Allocation-Functions">Memory Allocation Functions and Convenience Macros</a>).

</li><li>The <code class="code">awk_ext_func_t</code> structure changed. Instead of
<code class="code">num_expected_args</code>, it now has <code class="code">max_expected</code> and
<code class="code">min_required</code>
(see <a class="pxref" href="#Extension-Functions">Registering An Extension Function</a>).

</li><li>For <code class="code">get_record()</code>, an input parser can now specify field widths
(see <a class="pxref" href="#Input-Parsers">Customized Input Parsers</a>).

</li><li>Extensions can now produce nonfatal error messages
(see <a class="pxref" href="#Printing-Messages">Printing Messages</a>).

</li><li>When flattening an array, you can now specify the index and value types
(see <a class="pxref" href="#Array-Functions">Array Functions</a>).

</li><li>The <code class="code">get_file()</code> API is new
(see <a class="pxref" href="#Redirection-API">Accessing and Manipulating Redirections</a>).
</li></ul>

<hr>
</div>
</div>
<div class="section-level-extent" id="Finding-Extensions">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Example" accesskey="n" rel="next">Example: Some File Functions</a>, Previous: <a href="#Extension-API-Description" accesskey="p" rel="prev">API Description</a>, Up: <a href="#Dynamic-Extensions" accesskey="u" rel="up">Writing Extensions for <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="How-gawk-Finds-Extensions"><span>17.5 How <code class="command">gawk</code> Finds Extensions<a class="copiable-link" href="#How-gawk-Finds-Extensions"> &para;</a></span></h3>
<a class="index-entry-id" id="index-extensions-loadable-search-path"></a>
<a class="index-entry-id" id="index-finding-extensions"></a>

<p>Compiled extensions have to be installed in a directory where
<code class="command">gawk</code> can find them.  If <code class="command">gawk</code> is configured and
built in the default fashion, the directory in which to find
extensions is <samp class="file">/usr/local/lib/gawk</samp>.  You can also specify a search
path with a list of directories to search for compiled extensions.
See <a class="xref" href="#AWKLIBPATH-Variable">The <code class="env">AWKLIBPATH</code> Environment Variable</a> for more information.
</p>
<hr>
</div>
<div class="section-level-extent" id="Extension-Example">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Samples" accesskey="n" rel="next">The Sample Extensions in the <code class="command">gawk</code> Distribution</a>, Previous: <a href="#Finding-Extensions" accesskey="p" rel="prev">How <code class="command">gawk</code> Finds Extensions</a>, Up: <a href="#Dynamic-Extensions" accesskey="u" rel="up">Writing Extensions for <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Example_003a-Some-File-Functions"><span>17.6 Example: Some File Functions<a class="copiable-link" href="#Example_003a-Some-File-Functions"> &para;</a></span></h3>
<a class="index-entry-id" id="index-extensions-loadable-example"></a>

<blockquote class="quotation">
<p><i class="i">No matter where you go, there you are.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Buckaroo Banzai</em>
</div>

<p>Two useful functions that are not in <code class="command">awk</code> are <code class="code">chdir()</code> (so
that an <code class="command">awk</code> program can change its directory) and <code class="code">stat()</code>
(so that an <code class="command">awk</code> program can gather information about a file).
In order to illustrate the API in action, this section implements
these functions for <code class="command">gawk</code> in an extension.
</p>

<ul class="mini-toc">
<li><a href="#Internal-File-Description" accesskey="1">Using <code class="code">chdir()</code> and <code class="code">stat()</code></a></li>
<li><a href="#Internal-File-Ops" accesskey="2">C Code for <code class="code">chdir()</code> and <code class="code">stat()</code></a></li>
<li><a href="#Using-Internal-File-Ops" accesskey="3">Integrating the Extensions</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Internal-File-Description">
<div class="nav-panel">
<p>
Next: <a href="#Internal-File-Ops" accesskey="n" rel="next">C Code for <code class="code">chdir()</code> and <code class="code">stat()</code></a>, Up: <a href="#Extension-Example" accesskey="u" rel="up">Example: Some File Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Using-chdir_0028_0029-and-stat_0028_0029"><span>17.6.1 Using <code class="code">chdir()</code> and <code class="code">stat()</code><a class="copiable-link" href="#Using-chdir_0028_0029-and-stat_0028_0029"> &para;</a></span></h4>

<p>This section shows how to use the new functions at
the <code class="command">awk</code> level once they&rsquo;ve been integrated into the
running <code class="command">gawk</code> interpreter.  Using <code class="code">chdir()</code> is very
straightforward. It takes one argument, the new directory to change to:
</p>
<div class="example">
<pre class="example-preformatted">@load &quot;filefuncs&quot;
...
newdir = &quot;/home/arnold/funstuff&quot;
ret = chdir(newdir)
if (ret &lt; 0) {
    printf(&quot;could not change to %s: %s\n&quot;, newdir, ERRNO) &gt; &quot;/dev/stderr&quot;
    exit 1
}
...
</pre></div>

<p>The return value is negative if the <code class="code">chdir()</code> failed, and
<code class="code">ERRNO</code> (see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>) is set to a string indicating
the error.
</p>
<p>Using <code class="code">stat()</code> is a bit more complicated.  The C <code class="code">stat()</code>
function fills in a structure that has a fair amount of information.
The right way to model this in <code class="command">awk</code> is to fill in an associative
array with the appropriate information:
</p>
<div class="example">
<pre class="example-preformatted">file = &quot;/home/arnold/.profile&quot;
ret = stat(file, fdata)
if (ret &lt; 0) {
    printf(&quot;could not stat %s: %s\n&quot;,
             file, ERRNO) &gt; &quot;/dev/stderr&quot;
    exit 1
}
printf(&quot;size of %s is %d bytes\n&quot;, file, fdata[&quot;size&quot;])
</pre></div>

<p>The <code class="code">stat()</code> function always clears the data array, even if
the <code class="code">stat()</code> fails.  It fills in the following elements:
</p>
<dl class="table">
<dt><code class="code">&quot;name&quot;</code></dt>
<dd><p>The name of the file that was <code class="code">stat()</code>ed.
</p>
</dd>
<dt><code class="code">&quot;dev&quot;</code></dt>
<dt><code class="code">&quot;ino&quot;</code></dt>
<dd><p>The file&rsquo;s device and inode numbers, respectively.
</p>
</dd>
<dt><code class="code">&quot;mode&quot;</code></dt>
<dd><p>The file&rsquo;s mode, as a numeric value. This includes both the file&rsquo;s
type and its permissions.
</p>
</dd>
<dt><code class="code">&quot;nlink&quot;</code></dt>
<dd><p>The number of hard links (directory entries) the file has.
</p>
</dd>
<dt><code class="code">&quot;uid&quot;</code></dt>
<dt><code class="code">&quot;gid&quot;</code></dt>
<dd><p>The numeric user and group ID numbers of the file&rsquo;s owner.
</p>
</dd>
<dt><code class="code">&quot;size&quot;</code></dt>
<dd><p>The size in bytes of the file.
</p>
</dd>
<dt><code class="code">&quot;blocks&quot;</code></dt>
<dd><p>The number of disk blocks the file actually occupies. This may not
be a function of the file&rsquo;s size if the file has holes.
</p>
</dd>
<dt><code class="code">&quot;atime&quot;</code></dt>
<dt><code class="code">&quot;mtime&quot;</code></dt>
<dt><code class="code">&quot;ctime&quot;</code></dt>
<dd><p>The file&rsquo;s last access, modification, and inode update times,
respectively.  These are numeric timestamps, suitable for formatting
with <code class="code">strftime()</code>
(see <a class="pxref" href="#Time-Functions">Time Functions</a>).
</p>
</dd>
<dt><code class="code">&quot;pmode&quot;</code></dt>
<dd><p>The file&rsquo;s &ldquo;printable mode.&rdquo;  This is a string representation of
the file&rsquo;s type and permissions, such as is produced by
&lsquo;<samp class="samp">ls -l</samp>&rsquo;&mdash;for example, <code class="code">&quot;drwxr-xr-x&quot;</code>.
</p>
</dd>
<dt><code class="code">&quot;type&quot;</code></dt>
<dd><p>A printable string representation of the file&rsquo;s type.  The value
is one of the following:
</p>
<dl class="table">
<dt><code class="code">&quot;blockdev&quot;</code></dt>
<dt><code class="code">&quot;chardev&quot;</code></dt>
<dd><p>The file is a block or character device (&ldquo;special file&rdquo;).
</p>

</dd>
<dt><code class="code">&quot;directory&quot;</code></dt>
<dd><p>The file is a directory.
</p>
</dd>
<dt><code class="code">&quot;fifo&quot;</code></dt>
<dd><p>The file is a named pipe (also known as a FIFO).
</p>
</dd>
<dt><code class="code">&quot;file&quot;</code></dt>
<dd><p>The file is just a regular file.
</p>
</dd>
<dt><code class="code">&quot;socket&quot;</code></dt>
<dd><p>The file is an <code class="code">AF_UNIX</code> (&ldquo;Unix domain&rdquo;) socket in the
filesystem.
</p>
</dd>
<dt><code class="code">&quot;symlink&quot;</code></dt>
<dd><p>The file is a symbolic link.
</p></dd>
</dl>

</dd>
<dt><code class="code">&quot;devbsize&quot;</code></dt>
<dd><p>The size of a block for the element indexed by <code class="code">&quot;blocks&quot;</code>.
This information is derived from either the <code class="code">DEV_BSIZE</code>
constant defined in <code class="code">&lt;sys/param.h&gt;</code> on most systems,
or the <code class="code">S_BLKSIZE</code> constant in <code class="code">&lt;sys/stat.h&gt;</code> on BSD systems.
For some other systems, <em class="dfn">a priori</em> knowledge is used to provide
a value. Where no value can be determined, it defaults to 512.
</p></dd>
</dl>

<p>Several additional elements may be present, depending upon the operating
system and the type of the file.  You can test for them in your <code class="command">awk</code>
program by using the <code class="code">in</code> operator
(see <a class="pxref" href="#Reference-to-Elements">Referring to an Array Element</a>):
</p>
<dl class="table">
<dt><code class="code">&quot;blksize&quot;</code></dt>
<dd><p>The preferred block size for I/O to the file. This field is not
present on all POSIX-like systems in the C <code class="code">stat</code> structure.
</p>
</dd>
<dt><code class="code">&quot;linkval&quot;</code></dt>
<dd><p>If the file is a symbolic link, this element is the name of the
file the link points to (i.e., the value of the link).
</p>
</dd>
<dt><code class="code">&quot;rdev&quot;</code></dt>
<dt><code class="code">&quot;major&quot;</code></dt>
<dt><code class="code">&quot;minor&quot;</code></dt>
<dd><p>If the file is a block or character device file, then these values
represent the numeric device number and the major and minor components
of that number, respectively.
</p></dd>
</dl>

<hr>
</div>
<div class="subsection-level-extent" id="Internal-File-Ops">
<div class="nav-panel">
<p>
Next: <a href="#Using-Internal-File-Ops" accesskey="n" rel="next">Integrating the Extensions</a>, Previous: <a href="#Internal-File-Description" accesskey="p" rel="prev">Using <code class="code">chdir()</code> and <code class="code">stat()</code></a>, Up: <a href="#Extension-Example" accesskey="u" rel="up">Example: Some File Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="C-Code-for-chdir_0028_0029-and-stat_0028_0029"><span>17.6.2 C Code for <code class="code">chdir()</code> and <code class="code">stat()</code><a class="copiable-link" href="#C-Code-for-chdir_0028_0029-and-stat_0028_0029"> &para;</a></span></h4>

<p>Here is the C code for these extensions.<a class="footnote" id="DOCF114" href="#FOOT114"><sup>114</sup></a>
</p>
<p>The file includes a number of standard header files, and then includes
the <samp class="file">gawkapi.h</samp> header file, which provides the API definitions.
Those are followed by the necessary variable declarations
to make use of the API macros and boilerplate code
(see <a class="pxref" href="#Extension-API-Boilerplate">Boilerplate Code</a>):
</p>
<div class="example">
<pre class="example-preformatted">#ifdef HAVE_CONFIG_H
#include &lt;config.h&gt;
#endif

#include &lt;stdio.h&gt;
#include &lt;assert.h&gt;
#include &lt;errno.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;unistd.h&gt;

#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;

#include &quot;gawkapi.h&quot;

#include &quot;gettext.h&quot;
#define _(msgid)  gettext(msgid)
#define N_(msgid) msgid

#include &quot;gawkfts.h&quot;
#include &quot;stack.h&quot;

static const gawk_api_t *api;    /* for convenience macros to work */
static awk_ext_id_t ext_id;
static awk_bool_t init_filefuncs(void);
static awk_bool_t (*init_func)(void) = init_filefuncs;
static const char *ext_version = &quot;filefuncs extension: version 1.0&quot;;

int plugin_is_GPL_compatible;
</pre></div>

<a class="index-entry-id" id="index-programming-conventions-gawk-extensions"></a>
<p>By convention, for an <code class="command">awk</code> function <code class="code">foo()</code>, the C function
that implements it is called <code class="code">do_foo()</code>.  The function should have
two arguments. The first is an <code class="code">int</code>, usually called <code class="code">nargs</code>,
that represents the number of actual arguments for the function.
The second is a pointer to an <code class="code">awk_value_t</code> structure, usually named
<code class="code">result</code>:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">/*  do_chdir --- provide dynamically loaded chdir() function for gawk */

static awk_value_t *
do_chdir(int nargs, awk_value_t *result, struct awk_ext_func *unused)
</pre></div><pre class="example-preformatted">{
    awk_value_t newdir;
    int ret = -1;

    assert(result != NULL);
</pre></div>

<p>The <code class="code">newdir</code>
variable represents the new directory to change to, which is retrieved
with <code class="code">get_argument()</code>.  Note that the first argument is
numbered zero.
</p>
<p>If the argument is retrieved successfully, the function calls the
<code class="code">chdir()</code> system call. Otherwise, if the <code class="code">chdir()</code> fails,
it updates <code class="code">ERRNO</code>:
</p>
<div class="example">
<pre class="example-preformatted">    if (get_argument(0, AWK_STRING, &amp; newdir)) {
        ret = chdir(newdir.str_value.str);
        if (ret &lt; 0)
            update_ERRNO_int(errno);
    }
</pre></div>

<p>Finally, the function returns the return value to the <code class="command">awk</code> level:
</p>
<div class="example">
<pre class="example-preformatted">    return make_number(ret, result);
}
</pre></div>

<p>The <code class="code">stat()</code> extension is more involved.  First comes a function
that turns a numeric mode into a printable representation
(e.g., octal <code class="code">0644</code> becomes &lsquo;<samp class="samp">-rw-r--r--</samp>&rsquo;). This is omitted here for brevity:
</p>
<div class="example">
<pre class="example-preformatted">/* format_mode --- turn a stat mode field into something readable */

static char *
format_mode(unsigned long fmode)
{
    ...
}
</pre></div>

<p>Next comes a function for reading symbolic links, which is also
omitted here for brevity:
</p>
<div class="example">
<pre class="example-preformatted">/* read_symlink --- read a symbolic link into an allocated buffer.
   ... */

static char *
read_symlink(const char *fname, size_t bufsize, ssize_t *linksize)
{
    ...
}
</pre></div>

<p>Two helper functions simplify entering values in the
array that will contain the result of the <code class="code">stat()</code>:
</p>
<div class="example">
<pre class="example-preformatted">/* array_set --- set an array element */

static void
array_set(awk_array_t array, const char *sub, awk_value_t *value)
{
    awk_value_t index;

    set_array_element(array,
                      make_const_string(sub, strlen(sub), &amp; index),
                      value);

}

/* array_set_numeric --- set an array element with a number */

static void
array_set_numeric(awk_array_t array, const char *sub, double num)
{
    awk_value_t tmp;

    array_set(array, sub, make_number(num, &amp; tmp));
}
</pre></div>

<p>The following function does most of the work to fill in
the <code class="code">awk_array_t</code> result array with values obtained
from a valid <code class="code">struct stat</code>. This work is done in a separate function
to support the <code class="code">stat()</code> function for <code class="command">gawk</code> and also
to support the <code class="code">fts()</code> extension, which is included in
the same file but whose code is not shown here
(see <a class="pxref" href="#Extension-Sample-File-Functions">File-Related Functions</a>).
</p>
<p>The first part of the function is variable declarations,
including a table to map file types to strings:
</p>
<div class="example">
<pre class="example-preformatted">/* fill_stat_array --- do the work to fill an array with stat info */

static int
fill_stat_array(const char *name, awk_array_t array, struct stat *sbuf)
{
    char *pmode;    /* printable mode */
    const char *type = &quot;unknown&quot;;
    awk_value_t tmp;
    static struct ftype_map {
        unsigned int mask;
        const char *type;
    } ftype_map[] = {
        { S_IFREG, &quot;file&quot; },
        { S_IFBLK, &quot;blockdev&quot; },
        { S_IFCHR, &quot;chardev&quot; },
        { S_IFDIR, &quot;directory&quot; },
#ifdef S_IFSOCK
        { S_IFSOCK, &quot;socket&quot; },
#endif
#ifdef S_IFIFO
        { S_IFIFO, &quot;fifo&quot; },
#endif
#ifdef S_IFLNK
        { S_IFLNK, &quot;symlink&quot; },
#endif
#ifdef S_IFDOOR /* Solaris weirdness */
        { S_IFDOOR, &quot;door&quot; },
#endif
    };
    int j, k;
</pre></div>

<p>The destination array is cleared, and then code fills in
various elements based on values in the <code class="code">struct stat</code>:
</p>
<div class="example">
<pre class="example-preformatted">    /* empty out the array */
    clear_array(array);

    /* fill in the array */
    array_set(array, &quot;name&quot;, make_const_string(name, strlen(name),
                                               &amp; tmp));
    array_set_numeric(array, &quot;dev&quot;, sbuf-&gt;st_dev);
    array_set_numeric(array, &quot;ino&quot;, sbuf-&gt;st_ino);
    array_set_numeric(array, &quot;mode&quot;, sbuf-&gt;st_mode);
    array_set_numeric(array, &quot;nlink&quot;, sbuf-&gt;st_nlink);
    array_set_numeric(array, &quot;uid&quot;, sbuf-&gt;st_uid);
    array_set_numeric(array, &quot;gid&quot;, sbuf-&gt;st_gid);
    array_set_numeric(array, &quot;size&quot;, sbuf-&gt;st_size);
    array_set_numeric(array, &quot;blocks&quot;, sbuf-&gt;st_blocks);
    array_set_numeric(array, &quot;atime&quot;, sbuf-&gt;st_atime);
    array_set_numeric(array, &quot;mtime&quot;, sbuf-&gt;st_mtime);
    array_set_numeric(array, &quot;ctime&quot;, sbuf-&gt;st_ctime);

    /* for block and character devices, add rdev,
       major and minor numbers */
    if (S_ISBLK(sbuf-&gt;st_mode) || S_ISCHR(sbuf-&gt;st_mode)) {
        array_set_numeric(array, &quot;rdev&quot;, sbuf-&gt;st_rdev);
        array_set_numeric(array, &quot;major&quot;, major(sbuf-&gt;st_rdev));
        array_set_numeric(array, &quot;minor&quot;, minor(sbuf-&gt;st_rdev));
    }
</pre></div>

<p>The latter part of the function makes selective additions
to the destination array, depending upon the availability of
certain members and/or the type of the file. It then returns zero,
for success:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">#ifdef HAVE_STRUCT_STAT_ST_BLKSIZE
    array_set_numeric(array, &quot;blksize&quot;, sbuf-&gt;st_blksize);
#endif
</pre></div><pre class="example-preformatted">

    pmode = format_mode(sbuf-&gt;st_mode);
    array_set(array, &quot;pmode&quot;, make_const_string(pmode, strlen(pmode),
                                                &amp; tmp));

    /* for symbolic links, add a linkval field */
    if (S_ISLNK(sbuf-&gt;st_mode)) {
        char *buf;
        ssize_t linksize;

        if ((buf = read_symlink(name, sbuf-&gt;st_size,
                    &amp; linksize)) != NULL)
            array_set(array, &quot;linkval&quot;,
                      make_malloced_string(buf, linksize, &amp; tmp));
        else
            warning(ext_id, _(&quot;stat: unable to read symbolic link `%s'&quot;),
                    name);
    }

    /* add a type field */
    type = &quot;unknown&quot;;   /* shouldn't happen */
    for (j = 0, k = sizeof(ftype_map)/sizeof(ftype_map[0]); j &lt; k; j++) {
        if ((sbuf-&gt;st_mode &amp; S_IFMT) == ftype_map[j].mask) {
            type = ftype_map[j].type;
            break;
        }
    }

    array_set(array, &quot;type&quot;, make_const_string(type, strlen(type), &amp; tmp));

    return 0;
}
</pre></div>

<p>The third argument to <code class="code">stat()</code> was not discussed previously. This
argument is optional. If present, it causes <code class="code">do_stat()</code> to use
the <code class="code">stat()</code> system call instead of the <code class="code">lstat()</code> system
call.  This is done by using a function pointer: <code class="code">statfunc</code>.
<code class="code">statfunc</code> is initialized to point to <code class="code">lstat()</code> (instead
of <code class="code">stat()</code>) to get the file information, in case the file is a
symbolic link. However, if the third argument is included, <code class="code">statfunc</code>
is set to point to <code class="code">stat()</code>, instead.
</p>
<p>Here is the <code class="code">do_stat()</code> function, which starts with
variable declarations and argument checking:
</p>
<div class="example">
<pre class="example-preformatted">/* do_stat --- provide a stat() function for gawk */

static awk_value_t *
do_stat(int nargs, awk_value_t *result, struct awk_ext_func *unused)
{
    awk_value_t file_param, array_param;
    char *name;
    awk_array_t array;
    int ret;
    struct stat sbuf;
    /* default is lstat() */
    int (*statfunc)(const char *path, struct stat *sbuf) = lstat;

    assert(result != NULL);
</pre></div>

<p>Then comes the actual work. First, the function gets the arguments.
Next, it gets the information for the file.  If the called function
(<code class="code">lstat()</code> or <code class="code">stat()</code>) returns an error, the code sets
<code class="code">ERRNO</code> and returns:
</p>
<div class="example">
<pre class="example-preformatted">    /* file is first arg, array to hold results is second */
    if (   ! get_argument(0, AWK_STRING, &amp; file_param)
        || ! get_argument(1, AWK_ARRAY, &amp; array_param)) {
        warning(ext_id, _(&quot;stat: bad parameters&quot;));
        return make_number(-1, result);
    }

    if (nargs == 3) {
        statfunc = stat;
    }

    name = file_param.str_value.str;
    array = array_param.array_cookie;

    /* always empty out the array */
    clear_array(array);

    /* stat the file; if error, set ERRNO and return */
    ret = statfunc(name, &amp; sbuf);
</pre><div class="group"><pre class="example-preformatted">    if (ret &lt; 0) {
        update_ERRNO_int(errno);
        return make_number(ret, result);
    }
</pre></div></div>

<p>The tedious work is done by <code class="code">fill_stat_array()</code>, shown
earlier.  When done, the function returns the result from <code class="code">fill_stat_array()</code>:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">    ret = fill_stat_array(name, array, &amp; sbuf);

    return make_number(ret, result);
}
</pre></div></div>

<p>Finally, it&rsquo;s necessary to provide the &ldquo;glue&rdquo; that loads the
new function(s) into <code class="command">gawk</code>.
</p>
<p>The <code class="code">filefuncs</code> extension also provides an <code class="code">fts()</code>
function, which we omit here
(see <a class="pxref" href="#Extension-Sample-File-Functions">File-Related Functions</a>).
For its sake, there is an initialization
function:
</p>
<div class="example">
<pre class="example-preformatted">/* init_filefuncs --- initialization routine */

static awk_bool_t
init_filefuncs(void)
{
    ...
}
</pre></div>

<p>We are almost done. We need an array of <code class="code">awk_ext_func_t</code>
structures for loading each function into <code class="command">gawk</code>:
</p>
<div class="example">
<pre class="example-preformatted">static awk_ext_func_t func_table[] = {
    { &quot;chdir&quot;, do_chdir, 1, 1, awk_false, NULL },
    { &quot;stat&quot;,  do_stat, 3, 2, awk_false, NULL },
    ...
};
</pre></div>

<p>Each extension must have a routine named <code class="code">dl_load()</code> to load
everything that needs to be loaded.  It is simplest to use the
<code class="code">dl_load_func()</code> macro in <code class="code">gawkapi.h</code>:
</p>
<div class="example">
<pre class="example-preformatted">/* define the dl_load() function using the boilerplate macro */

dl_load_func(func_table, filefuncs, &quot;&quot;)
</pre></div>

<p>And that&rsquo;s it!
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Using-Internal-File-Ops">
<div class="nav-panel">
<p>
Previous: <a href="#Internal-File-Ops" accesskey="p" rel="prev">C Code for <code class="code">chdir()</code> and <code class="code">stat()</code></a>, Up: <a href="#Extension-Example" accesskey="u" rel="up">Example: Some File Functions</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Integrating-the-Extensions"><span>17.6.3 Integrating the Extensions<a class="copiable-link" href="#Integrating-the-Extensions"> &para;</a></span></h4>

<a class="index-entry-id" id="index-gawk-interpreter_002c-adding-code-to"></a>
<p>Now that the code is written, it must be possible to add it at
runtime to the running <code class="command">gawk</code> interpreter.  First, the
code must be compiled.  Assuming that the functions are in
a file named <samp class="file">filefuncs.c</samp>, and <var class="var">idir</var> is the location
of the <samp class="file">gawkapi.h</samp> header file,
the following steps<a class="footnote" id="DOCF115" href="#FOOT115"><sup>115</sup></a> create a GNU/Linux shared library:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gcc -fPIC -shared -DHAVE_CONFIG_H -c -O -g -I<var class="var">idir</var> filefuncs.c</kbd>
$ <kbd class="kbd">gcc -o filefuncs.so -shared filefuncs.o</kbd>
</pre></div>

<p>Once the library exists, it is loaded by using the <code class="code">@load</code> keyword:
</p>
<div class="example">
<pre class="example-preformatted"># file testff.awk
@load &quot;filefuncs&quot;

BEGIN {
    &quot;pwd&quot; | getline curdir  # save current directory
    close(&quot;pwd&quot;)

    chdir(&quot;/tmp&quot;)
    system(&quot;pwd&quot;)   # test it
    chdir(curdir)   # go back

    print &quot;Info for testff.awk&quot;
    ret = stat(&quot;testff.awk&quot;, data)
    print &quot;ret =&quot;, ret
    for (i in data)
        printf &quot;data[\&quot;%s\&quot;] = %s\n&quot;, i, data[i]
    print &quot;testff.awk modified:&quot;,
        strftime(&quot;%m %d %Y %H:%M:%S&quot;, data[&quot;mtime&quot;])

    print &quot;\nInfo for JUNK&quot;
    ret = stat(&quot;JUNK&quot;, data)
    print &quot;ret =&quot;, ret
    for (i in data)
        printf &quot;data[\&quot;%s\&quot;] = %s\n&quot;, i, data[i]
    print &quot;JUNK modified:&quot;, strftime(&quot;%m %d %Y %H:%M:%S&quot;, data[&quot;mtime&quot;])
}
</pre></div>

<a class="index-entry-id" id="index-AWKLIBPATH-environment-variable-5"></a>
<a class="index-entry-id" id="index-environment-variables-AWKLIBPATH-5"></a>
<p>The <code class="env">AWKLIBPATH</code> environment variable tells
<code class="command">gawk</code> where to find extensions (see <a class="pxref" href="#Finding-Extensions">How <code class="command">gawk</code> Finds Extensions</a>).
We set it to the current directory and run the program:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">AWKLIBPATH=$PWD gawk -f testff.awk</kbd>
-| /tmp
-| Info for testff.awk
-| ret = 0
-| data[&quot;blksize&quot;] = 4096
-| data[&quot;devbsize&quot;] = 512
-| data[&quot;mtime&quot;] = 1412004710
-| data[&quot;mode&quot;] = 33204
-| data[&quot;type&quot;] = file
-| data[&quot;dev&quot;] = 2053
-| data[&quot;gid&quot;] = 1000
-| data[&quot;ino&quot;] = 10358899
-| data[&quot;ctime&quot;] = 1412004710
-| data[&quot;blocks&quot;] = 8
-| data[&quot;nlink&quot;] = 1
-| data[&quot;name&quot;] = testff.awk
-| data[&quot;atime&quot;] = 1412004716
-| data[&quot;pmode&quot;] = -rw-rw-r--
-| data[&quot;size&quot;] = 666
-| data[&quot;uid&quot;] = 1000
-| testff.awk modified: 09 29 2014 18:31:50
-|
-| Info for JUNK
-| ret = -1
-| JUNK modified: 01 01 1970 02:00:00
</pre></div>

<hr>
</div>
</div>
<div class="section-level-extent" id="Extension-Samples">
<div class="nav-panel">
<p>
Next: <a href="#gawkextlib" accesskey="n" rel="next">The <code class="code">gawkextlib</code> Project</a>, Previous: <a href="#Extension-Example" accesskey="p" rel="prev">Example: Some File Functions</a>, Up: <a href="#Dynamic-Extensions" accesskey="u" rel="up">Writing Extensions for <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="The-Sample-Extensions-in-the-gawk-Distribution"><span>17.7 The Sample Extensions in the <code class="command">gawk</code> Distribution<a class="copiable-link" href="#The-Sample-Extensions-in-the-gawk-Distribution"> &para;</a></span></h3>
<a class="index-entry-id" id="index-extensions-loadable-distributed-with-gawk"></a>

<p>This section provides a brief overview of the sample extensions
that come in the <code class="command">gawk</code> distribution. Some of them are intended
for production use (e.g., the <code class="code">filefuncs</code>, <code class="code">readdir</code>, and
<code class="code">inplace</code> extensions).  Others mainly provide example code that
shows how to use the extension API.
</p>

<ul class="mini-toc">
<li><a href="#Extension-Sample-File-Functions" accesskey="1">File-Related Functions</a></li>
<li><a href="#Extension-Sample-Fnmatch" accesskey="2">Interface to <code class="code">fnmatch()</code></a></li>
<li><a href="#Extension-Sample-Fork" accesskey="3">Interface to <code class="code">fork()</code>, <code class="code">wait()</code>, and <code class="code">waitpid()</code></a></li>
<li><a href="#Extension-Sample-Inplace" accesskey="4">Enabling In-Place File Editing</a></li>
<li><a href="#Extension-Sample-Ord" accesskey="5">Character and Numeric values: <code class="code">ord()</code> and <code class="code">chr()</code></a></li>
<li><a href="#Extension-Sample-Readdir" accesskey="6">Reading Directories</a></li>
<li><a href="#Extension-Sample-Revout" accesskey="7">Reversing Output</a></li>
<li><a href="#Extension-Sample-Rev2way" accesskey="8">Two-Way I/O Example</a></li>
<li><a href="#Extension-Sample-Read-write-array" accesskey="9">Dumping and Restoring an Array</a></li>
<li><a href="#Extension-Sample-Readfile">Reading an Entire File</a></li>
<li><a href="#Extension-Sample-Time">Extension Time Functions</a></li>
<li><a href="#Extension-Sample-API-Tests">API Tests</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Extension-Sample-File-Functions">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Sample-Fnmatch" accesskey="n" rel="next">Interface to <code class="code">fnmatch()</code></a>, Up: <a href="#Extension-Samples" accesskey="u" rel="up">The Sample Extensions in the <code class="command">gawk</code> Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="File_002dRelated-Functions"><span>17.7.1 File-Related Functions<a class="copiable-link" href="#File_002dRelated-Functions"> &para;</a></span></h4>

<p>The <code class="code">filefuncs</code> extension provides three different functions, as follows.
The usage is:
</p>
<dl class="table">
<dt><code class="code">@load &quot;filefuncs&quot;</code></dt>
<dd><p>This is how you load the extension.
</p>
</dd>
<dt><a id="index-chdir_0028_0029-extension-function"></a><span><code class="code">result = chdir(&quot;/some/directory&quot;)</code><a class="copiable-link" href="#index-chdir_0028_0029-extension-function"> &para;</a></span></dt>
<dd><p>The <code class="code">chdir()</code> function is a direct hook to the <code class="code">chdir()</code>
system call to change the current directory.  It returns zero
upon success or a value less than zero upon error.
In the latter case, it updates <code class="code">ERRNO</code>.
</p>
</dd>
<dt><a id="index-stat_0028_0029-extension-function"></a><span><code class="code">result = stat(&quot;/some/path&quot;, statdata</code> [<code class="code">, follow</code>]<code class="code">)</code><a class="copiable-link" href="#index-stat_0028_0029-extension-function"> &para;</a></span></dt>
<dd><p>The <code class="code">stat()</code> function provides a hook into the
<code class="code">stat()</code> system call.
It returns zero upon success or a value less than zero upon error.
In the latter case, it updates <code class="code">ERRNO</code>.
</p>
<p>By default, it uses the <code class="code">lstat()</code> system call.  However, if passed
a third argument, it uses <code class="code">stat()</code> instead.
</p>
<p>In all cases, it clears the <code class="code">statdata</code> array.
When the call is successful, <code class="code">stat()</code> fills the <code class="code">statdata</code>
array with information retrieved from the filesystem, as follows:
</p>
<table class="multitable">
<thead><tr><th width="15%">Subscript</th><th width="50%">Field in <code class="code">struct stat</code></th><th width="20%">File type</th></tr></thead>
<tbody><tr><td width="15%"><code class="code">&quot;name&quot;</code></td><td width="50%">The file name</td><td width="20%">All</td></tr>
<tr><td width="15%"><code class="code">&quot;dev&quot;</code></td><td width="50%"><code class="code">st_dev</code></td><td width="20%">All</td></tr>
<tr><td width="15%"><code class="code">&quot;ino&quot;</code></td><td width="50%"><code class="code">st_ino</code></td><td width="20%">All</td></tr>
<tr><td width="15%"><code class="code">&quot;mode&quot;</code></td><td width="50%"><code class="code">st_mode</code></td><td width="20%">All</td></tr>
<tr><td width="15%"><code class="code">&quot;nlink&quot;</code></td><td width="50%"><code class="code">st_nlink</code></td><td width="20%">All</td></tr>
<tr><td width="15%"><code class="code">&quot;uid&quot;</code></td><td width="50%"><code class="code">st_uid</code></td><td width="20%">All</td></tr>
<tr><td width="15%"><code class="code">&quot;gid&quot;</code></td><td width="50%"><code class="code">st_gid</code></td><td width="20%">All</td></tr>
<tr><td width="15%"><code class="code">&quot;size&quot;</code></td><td width="50%"><code class="code">st_size</code></td><td width="20%">All</td></tr>
<tr><td width="15%"><code class="code">&quot;atime&quot;</code></td><td width="50%"><code class="code">st_atime</code></td><td width="20%">All</td></tr>
<tr><td width="15%"><code class="code">&quot;mtime&quot;</code></td><td width="50%"><code class="code">st_mtime</code></td><td width="20%">All</td></tr>
<tr><td width="15%"><code class="code">&quot;ctime&quot;</code></td><td width="50%"><code class="code">st_ctime</code></td><td width="20%">All</td></tr>
<tr><td width="15%"><code class="code">&quot;rdev&quot;</code></td><td width="50%"><code class="code">st_rdev</code></td><td width="20%">Device files</td></tr>
<tr><td width="15%"><code class="code">&quot;major&quot;</code></td><td width="50%"><code class="code">st_major</code></td><td width="20%">Device files</td></tr>
<tr><td width="15%"><code class="code">&quot;minor&quot;</code></td><td width="50%"><code class="code">st_minor</code></td><td width="20%">Device files</td></tr>
<tr><td width="15%"><code class="code">&quot;blksize&quot;</code></td><td width="50%"><code class="code">st_blksize</code></td><td width="20%">All</td></tr>
<tr><td width="15%"><code class="code">&quot;pmode&quot;</code></td><td width="50%">A human-readable version of the mode value, like that printed by
<code class="command">ls</code> (for example, <code class="code">&quot;-rwxr-xr-x&quot;</code>)</td><td width="20%">All</td></tr>
<tr><td width="15%"><code class="code">&quot;linkval&quot;</code></td><td width="50%">The value of the symbolic link</td><td width="20%">Symbolic links</td></tr>
<tr><td width="15%"><code class="code">&quot;type&quot;</code></td><td width="50%">The type of the file as a string&mdash;one of
<code class="code">&quot;file&quot;</code>,
<code class="code">&quot;blockdev&quot;</code>,
<code class="code">&quot;chardev&quot;</code>,
<code class="code">&quot;directory&quot;</code>,
<code class="code">&quot;socket&quot;</code>,
<code class="code">&quot;fifo&quot;</code>,
<code class="code">&quot;symlink&quot;</code>,
<code class="code">&quot;door&quot;</code>,
or
<code class="code">&quot;unknown&quot;</code>
(not all systems support all file types)</td><td width="20%">All</td></tr>
</tbody>
</table>

</dd>
<dt><a id="index-fts_0028_0029-extension-function"></a><span><code class="code">flags = or(FTS_PHYSICAL, ...)</code><a class="copiable-link" href="#index-fts_0028_0029-extension-function"> &para;</a></span></dt>
<dt><code class="code">result = fts(pathlist, flags, filedata)</code></dt>
<dd><p>Walk the file trees provided in <code class="code">pathlist</code> and fill in the
<code class="code">filedata</code> array, as described next.  <code class="code">flags</code> is the bitwise
OR of several predefined values, also described in a moment.
Return zero if there were no errors, otherwise return &minus;1.
</p></dd>
</dl>

<p>The <code class="code">fts()</code> function provides a hook to the C library <code class="code">fts()</code>
routines for traversing file hierarchies.  Instead of returning data
about one file at a time in a stream, it fills in a multidimensional
array with data about each file and directory encountered in the requested
hierarchies.
</p>
<p>The arguments are as follows:
</p>
<dl class="table">
<dt><code class="code">pathlist</code></dt>
<dd><p>An array of file names.  The element values are used; the index values are ignored.
</p>
</dd>
<dt><code class="code">flags</code></dt>
<dd><p>This should be the bitwise OR of one or more of the following
predefined constant flag values.  At least one of
<code class="code">FTS_LOGICAL</code> or <code class="code">FTS_PHYSICAL</code> must be provided; otherwise
<code class="code">fts()</code> returns an error value and sets <code class="code">ERRNO</code>.
The flags are:
</p>
<dl class="table">
<dt><code class="code">FTS_LOGICAL</code></dt>
<dd><p>Do a &ldquo;logical&rdquo; file traversal, where the information returned for
a symbolic link refers to the linked-to file, and not to the symbolic
link itself.  This flag is mutually exclusive with <code class="code">FTS_PHYSICAL</code>.
</p>
</dd>
<dt><code class="code">FTS_PHYSICAL</code></dt>
<dd><p>Do a &ldquo;physical&rdquo; file traversal, where the information returned for a
symbolic link refers to the symbolic link itself.  This flag is mutually
exclusive with <code class="code">FTS_LOGICAL</code>.
</p>
</dd>
<dt><code class="code">FTS_NOCHDIR</code></dt>
<dd><p>As a performance optimization, the C library <code class="code">fts()</code> routines
change directory as they traverse a file hierarchy.  This flag disables
that optimization.
</p>
</dd>
<dt><code class="code">FTS_COMFOLLOW</code></dt>
<dd><p>Immediately follow a symbolic link named in <code class="code">pathlist</code>,
whether or not <code class="code">FTS_LOGICAL</code> is set.
</p>
</dd>
<dt><code class="code">FTS_SEEDOT</code></dt>
<dd><p>By default, the C library <code class="code">fts()</code> routines do not return entries for
<samp class="file">.</samp> (dot) and <samp class="file">..</samp> (dot-dot).  This option causes entries for
dot-dot to also be included.  (The extension always includes an entry
for dot; more on this in a moment.)
</p>
</dd>
<dt><code class="code">FTS_XDEV</code></dt>
<dd><p>During a traversal, do not cross onto a different mounted filesystem.
</p></dd>
</dl>

</dd>
<dt><code class="code">filedata</code></dt>
<dd><p>The <code class="code">filedata</code> array holds the results.
<code class="code">fts()</code> first clears it.  Then it creates
an element in <code class="code">filedata</code> for every element in <code class="code">pathlist</code>.
The index is the name of the directory or file given in <code class="code">pathlist</code>.
The element for this index is itself an array.  There are two cases:
</p>
<dl class="table">
<dt><em class="emph">The path is a file</em></dt>
<dd><p>In this case, the array contains two or three elements:
</p>
<dl class="table">
<dt><code class="code">&quot;path&quot;</code></dt>
<dd><p>The full path to this file, starting from the &ldquo;root&rdquo; that was given
in the <code class="code">pathlist</code> array.
</p>
</dd>
<dt><code class="code">&quot;stat&quot;</code></dt>
<dd><p>This element is itself an array, containing the same information as provided
by the <code class="code">stat()</code> function described earlier for its
<code class="code">statdata</code> argument.  The element may not be present if
the <code class="code">stat()</code> system call for the file failed.
</p>
</dd>
<dt><code class="code">&quot;error&quot;</code></dt>
<dd><p>If some kind of error was encountered, the array will also
contain an element named <code class="code">&quot;error&quot;</code>, which is a string describing the error.
</p></dd>
</dl>

</dd>
<dt><em class="emph">The path is a directory</em></dt>
<dd><p>In this case, the array contains one element for each entry in the
directory.  If an entry is a file, that element is the same as for files, just
described.  If the entry is a directory, that element is (recursively)
an array describing the subdirectory.  If <code class="code">FTS_SEEDOT</code> was provided
in the flags, then there will also be an element named <code class="code">&quot;..&quot;</code>.  This
element will be an array containing the data as provided by <code class="code">stat()</code>.
</p>
<p>In addition, there will be an element whose index is <code class="code">&quot;.&quot;</code>.
This element is an array containing the same two or three elements as
for a file: <code class="code">&quot;path&quot;</code>, <code class="code">&quot;stat&quot;</code>, and <code class="code">&quot;error&quot;</code>.
</p></dd>
</dl>
</dd>
</dl>

<p>The <code class="code">fts()</code> function returns zero if there were no errors.
Otherwise, it returns &minus;1.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> The <code class="code">fts()</code> extension does not exactly mimic the
interface of the C library <code class="code">fts()</code> routines, choosing instead to
provide an interface that is based on associative arrays, which is
more comfortable to use from an <code class="command">awk</code> program.  This includes the
lack of a comparison function, because <code class="command">gawk</code> already provides
powerful array sorting facilities.  Although an <code class="code">fts_read()</code>-like
interface could have been provided, this felt less natural than simply
creating a multidimensional array to represent the file hierarchy and
its information.
</p></blockquote>

<p>See <samp class="file">test/fts.awk</samp> in the <code class="command">gawk</code> distribution for an example
use of the <code class="code">fts()</code> extension function.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Extension-Sample-Fnmatch">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Sample-Fork" accesskey="n" rel="next">Interface to <code class="code">fork()</code>, <code class="code">wait()</code>, and <code class="code">waitpid()</code></a>, Previous: <a href="#Extension-Sample-File-Functions" accesskey="p" rel="prev">File-Related Functions</a>, Up: <a href="#Extension-Samples" accesskey="u" rel="up">The Sample Extensions in the <code class="command">gawk</code> Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Interface-to-fnmatch_0028_0029"><span>17.7.2 Interface to <code class="code">fnmatch()</code><a class="copiable-link" href="#Interface-to-fnmatch_0028_0029"> &para;</a></span></h4>

<p>This extension provides an interface to the C library
<code class="code">fnmatch()</code> function.  The usage is:
</p>
<dl class="table">
<dt><code class="code">@load &quot;fnmatch&quot;</code></dt>
<dd><p>This is how you load the extension.
</p>
</dd>
<dt><a id="index-fnmatch_0028_0029-extension-function"></a><span><code class="code">result = fnmatch(pattern, string, flags)</code><a class="copiable-link" href="#index-fnmatch_0028_0029-extension-function"> &para;</a></span></dt>
<dd><p>The return value is zero on success, <code class="code">FNM_NOMATCH</code>
if the string did not match the pattern, or
a different nonzero value if an error occurred.
</p></dd>
</dl>

<p>In addition to the <code class="code">fnmatch()</code> function, the <code class="code">fnmatch</code> extension
adds one constant (<code class="code">FNM_NOMATCH</code>), and an array of flag values
named <code class="code">FNM</code>.
</p>
<p>The arguments to <code class="code">fnmatch()</code> are:
</p>
<dl class="table">
<dt><code class="code">pattern</code></dt>
<dd><p>The file name wildcard to match
</p>
</dd>
<dt><code class="code">string</code></dt>
<dd><p>The file name string
</p>
</dd>
<dt><code class="code">flag</code></dt>
<dd><p>Either zero, or the bitwise OR of one or more of the
flags in the <code class="code">FNM</code> array
</p></dd>
</dl>

<p>The flags are as follows:
</p>
<table class="multitable">
<thead><tr><th width="25%">Array element</th><th width="75%">Corresponding flag defined by <code class="code">fnmatch()</code></th></tr></thead>
<tbody><tr><td width="25%"><code class="code">FNM[&quot;CASEFOLD&quot;]</code></td><td width="75%"><code class="code">FNM_CASEFOLD</code></td></tr>
<tr><td width="25%"><code class="code">FNM[&quot;FILE_NAME&quot;]</code></td><td width="75%"><code class="code">FNM_FILE_NAME</code></td></tr>
<tr><td width="25%"><code class="code">FNM[&quot;LEADING_DIR&quot;]</code></td><td width="75%"><code class="code">FNM_LEADING_DIR</code></td></tr>
<tr><td width="25%"><code class="code">FNM[&quot;NOESCAPE&quot;]</code></td><td width="75%"><code class="code">FNM_NOESCAPE</code></td></tr>
<tr><td width="25%"><code class="code">FNM[&quot;PATHNAME&quot;]</code></td><td width="75%"><code class="code">FNM_PATHNAME</code></td></tr>
<tr><td width="25%"><code class="code">FNM[&quot;PERIOD&quot;]</code></td><td width="75%"><code class="code">FNM_PERIOD</code></td></tr>
</tbody>
</table>

<p>Here is an example:
</p>
<div class="example">
<pre class="example-preformatted">@load &quot;fnmatch&quot;
...
flags = or(FNM[&quot;PERIOD&quot;], FNM[&quot;NOESCAPE&quot;])
if (fnmatch(&quot;*.a&quot;, &quot;foo.c&quot;, flags) == FNM_NOMATCH)
    print &quot;no match&quot;
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Extension-Sample-Fork">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Sample-Inplace" accesskey="n" rel="next">Enabling In-Place File Editing</a>, Previous: <a href="#Extension-Sample-Fnmatch" accesskey="p" rel="prev">Interface to <code class="code">fnmatch()</code></a>, Up: <a href="#Extension-Samples" accesskey="u" rel="up">The Sample Extensions in the <code class="command">gawk</code> Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Interface-to-fork_0028_0029_002c-wait_0028_0029_002c-and-waitpid_0028_0029"><span>17.7.3 Interface to <code class="code">fork()</code>, <code class="code">wait()</code>, and <code class="code">waitpid()</code><a class="copiable-link" href="#Interface-to-fork_0028_0029_002c-wait_0028_0029_002c-and-waitpid_0028_0029"> &para;</a></span></h4>

<p>The <code class="code">fork</code> extension adds three functions, as follows:
</p>
<dl class="table">
<dt><code class="code">@load &quot;fork&quot;</code></dt>
<dd><p>This is how you load the extension.
</p>
</dd>
<dt><a id="index-fork_0028_0029-extension-function"></a><span><code class="code">pid = fork()</code><a class="copiable-link" href="#index-fork_0028_0029-extension-function"> &para;</a></span></dt>
<dd><p>This function creates a new process. The return value is zero in the
child and the process ID number of the child in the parent, or &minus;1
upon error. In the latter case, <code class="code">ERRNO</code> indicates the problem.
In the child, <code class="code">PROCINFO[&quot;pid&quot;]</code> and <code class="code">PROCINFO[&quot;ppid&quot;]</code> are
updated to reflect the correct values.
</p>
</dd>
<dt><a id="index-waitpid_0028_0029-extension-function"></a><span><code class="code">ret = waitpid(pid)</code><a class="copiable-link" href="#index-waitpid_0028_0029-extension-function"> &para;</a></span></dt>
<dd><p>This function takes a numeric argument, which is the process ID to
wait for. The return value is that of the
<code class="code">waitpid()</code> system call.
</p>
</dd>
<dt><a id="index-wait_0028_0029-extension-function"></a><span><code class="code">ret = wait()</code><a class="copiable-link" href="#index-wait_0028_0029-extension-function"> &para;</a></span></dt>
<dd><p>This function waits for the first child to die.
The return value is that of the
<code class="code">wait()</code> system call.
</p></dd>
</dl>

<p>There is no corresponding <code class="code">exec()</code> function.
</p>
<p>Here is an example:
</p>
<div class="example">
<pre class="example-preformatted">@load &quot;fork&quot;
...
if ((pid = fork()) == 0)
    print &quot;hello from the child&quot;
else
    print &quot;hello from the parent&quot;
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Extension-Sample-Inplace">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Sample-Ord" accesskey="n" rel="next">Character and Numeric values: <code class="code">ord()</code> and <code class="code">chr()</code></a>, Previous: <a href="#Extension-Sample-Fork" accesskey="p" rel="prev">Interface to <code class="code">fork()</code>, <code class="code">wait()</code>, and <code class="code">waitpid()</code></a>, Up: <a href="#Extension-Samples" accesskey="u" rel="up">The Sample Extensions in the <code class="command">gawk</code> Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Enabling-In_002dPlace-File-Editing"><span>17.7.4 Enabling In-Place File Editing<a class="copiable-link" href="#Enabling-In_002dPlace-File-Editing"> &para;</a></span></h4>

<a class="index-entry-id" id="index-inplace-extension"></a>
<p>The <code class="code">inplace</code> extension emulates GNU <code class="command">sed</code>&rsquo;s <samp class="option">-i</samp> option,
which performs &ldquo;in-place&rdquo; editing of each input file.
It uses the bundled <samp class="file">inplace.awk</samp> include file to invoke the extension
properly.  This extension makes use of the namespace facility to place
all the variables and functions in the <code class="code">inplace</code> namespace
(see <a class="pxref" href="#Namespaces">Namespaces in <code class="command">gawk</code></a>):
</p>
<div class="example">
<div class="group"><pre class="example-preformatted"># inplace --- load and invoke the inplace extension.

@load &quot;inplace&quot;

# Please set inplace::suffix to make a backup copy.  For example, you may
# want to set inplace::suffix to .bak on the command line or in a BEGIN rule.

# Before there were namespaces in gawk, this extension used
# INPLACE_SUFFIX as the variable for making backup copies. We allow this
# too, so that any code that used the previous version continues to work.

# By default, each filename on the command line will be edited inplace.
# But you can selectively disable this by adding an inplace::enable=0 argument
# prior to files that you do not want to process this way.  You can then
# reenable it later on the commandline by putting inplace::enable=1 before files
# that you wish to be subject to inplace editing.

# N.B. We call inplace::end() in the BEGINFILE and END rules so that any
# actions in an ENDFILE rule will be redirected as expected.

@namespace &quot;inplace&quot;
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">BEGIN {
    enable = 1         # enabled by default
}
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">BEGINFILE {
    sfx = (suffix ? suffix : awk::INPLACE_SUFFIX)
    if (filename != &quot;&quot;)
        end(filename, sfx)
    if (enable)
        begin(filename = FILENAME, sfx)
    else
        filename = &quot;&quot;
}
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">END {
    if (filename != &quot;&quot;)
        end(filename, (suffix ? suffix : awk::INPLACE_SUFFIX))
}
</pre></div></div>

<p>For each regular file that is processed, the extension redirects
standard output to a temporary file configured to have the same owner
and permissions as the original.  After the file has been processed,
the extension restores standard output to its original destination.
If <code class="code">inplace::suffix</code> is not an empty string, the original file is
linked to a backup file name created by appending that suffix.  Finally,
the temporary file is renamed to the original file name.
</p>
<p>Note that the use of this feature can be controlled by placing
&lsquo;<samp class="samp">inplace::enable=0</samp>&rsquo; on the command-line prior to listing files that
should not be processed this way.  You can reenable inplace editing by adding
an &lsquo;<samp class="samp">inplace::enable=1</samp>&rsquo; argument prior to files that should be subject
to inplace editing.
</p>
<p>The <code class="code">inplace::filename</code> variable serves to keep track of the
current file name so as to not invoke <code class="code">inplace::end()</code> before
processing the first file.
</p>
<p>If any error occurs, the extension issues a fatal error to terminate
processing immediately without damaging the original file.
</p>
<p>Here are some simple examples:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -i inplace '{ gsub(/foo/, &quot;bar&quot;) }; { print }' file1 file2 file3</kbd>
</pre></div>

<p>To keep a backup copy of the original files, try this:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -i inplace -v inplace::suffix=.bak '{ gsub(/foo/, &quot;bar&quot;) }</kbd>
&gt; <kbd class="kbd">{ print }' file1 file2 file3</kbd>
</pre></div>

<p>Please note that, while the extension does attempt to preserve ownership and permissions, it makes no attempt to copy the ACLs from the original file.
</p>
<p>If the program dies prematurely, as might happen if an unhandled signal is received, a temporary file may be left behind.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Extension-Sample-Ord">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Sample-Readdir" accesskey="n" rel="next">Reading Directories</a>, Previous: <a href="#Extension-Sample-Inplace" accesskey="p" rel="prev">Enabling In-Place File Editing</a>, Up: <a href="#Extension-Samples" accesskey="u" rel="up">The Sample Extensions in the <code class="command">gawk</code> Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Character-and-Numeric-values_003a-ord_0028_0029-and-chr_0028_0029"><span>17.7.5 Character and Numeric values: <code class="code">ord()</code> and <code class="code">chr()</code><a class="copiable-link" href="#Character-and-Numeric-values_003a-ord_0028_0029-and-chr_0028_0029"> &para;</a></span></h4>

<p>The <code class="code">ordchr</code> extension adds two functions, named
<code class="code">ord()</code> and <code class="code">chr()</code>, as follows:
</p>
<dl class="table">
<dt><code class="code">@load &quot;ordchr&quot;</code></dt>
<dd><p>This is how you load the extension.
</p>
</dd>
<dt><a id="index-ord_0028_0029-extension-function"></a><span><code class="code">number = ord(string)</code><a class="copiable-link" href="#index-ord_0028_0029-extension-function"> &para;</a></span></dt>
<dd><p>Return the numeric value of the first character in <code class="code">string</code>.
</p>
</dd>
<dt><a id="index-chr_0028_0029-extension-function"></a><span><code class="code">char = chr(number)</code><a class="copiable-link" href="#index-chr_0028_0029-extension-function"> &para;</a></span></dt>
<dd><p>Return a string whose first character is that represented by <code class="code">number</code>.
</p></dd>
</dl>

<p>These functions are inspired by the Pascal language functions
of the same name.  Here is an example:
</p>
<div class="example">
<pre class="example-preformatted">@load &quot;ordchr&quot;
...
printf(&quot;The numeric value of 'A' is %d\n&quot;, ord(&quot;A&quot;))
printf(&quot;The string value of 65 is %s\n&quot;, chr(65))
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Extension-Sample-Readdir">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Sample-Revout" accesskey="n" rel="next">Reversing Output</a>, Previous: <a href="#Extension-Sample-Ord" accesskey="p" rel="prev">Character and Numeric values: <code class="code">ord()</code> and <code class="code">chr()</code></a>, Up: <a href="#Extension-Samples" accesskey="u" rel="up">The Sample Extensions in the <code class="command">gawk</code> Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Reading-Directories"><span>17.7.6 Reading Directories<a class="copiable-link" href="#Reading-Directories"> &para;</a></span></h4>

<p>The <code class="code">readdir</code> extension adds an input parser for directories.
The usage is as follows:
</p>
<a class="index-entry-id" id="index-readdir-extension"></a>
<div class="example">
<pre class="example-preformatted">@load &quot;readdir&quot;
</pre></div>

<p>When this extension is in use, instead of skipping directories named
on the command line (or with <code class="code">getline</code>),
they are read, with each entry returned as a record.
</p>
<p>The record consists of three fields separated by forward slash characters.
The first two are the inode number and the file name, and the third field
is a single letter indicating the type of the file.  The letters and their
corresponding file types are shown in <a class="ref" href="#table_002dreaddir_002dfile_002dtypes">Table 17.4</a>.
</p>
<div class="float" id="table_002dreaddir_002dfile_002dtypes">
<table class="multitable">
<thead><tr><th width="10%">Letter</th><th width="90%">File type</th></tr></thead>
<tbody><tr><td width="10%"><code class="code">b</code></td><td width="90%">Block device</td></tr>
<tr><td width="10%"><code class="code">c</code></td><td width="90%">Character device</td></tr>
<tr><td width="10%"><code class="code">d</code></td><td width="90%">Directory</td></tr>
<tr><td width="10%"><code class="code">f</code></td><td width="90%">Regular file</td></tr>
<tr><td width="10%"><code class="code">l</code></td><td width="90%">Symbolic link</td></tr>
<tr><td width="10%"><code class="code">p</code></td><td width="90%">Named pipe (FIFO)</td></tr>
<tr><td width="10%"><code class="code">s</code></td><td width="90%">Socket</td></tr>
</tbody>
</table>
<div class="caption"><p><strong class="strong">Table 17.4: </strong>File types returned by the <code class="code">readdir</code> extension</p></div></div>
<p>On systems where the directory entry contains the file type, the third
field is filled in from that information.
On systems without the file type information, the extension falls back
to calling the <code class="code">stat()</code> system call
in order to provide the information.
Thus the third field should never be &lsquo;<samp class="samp">u</samp>&rsquo; (for &ldquo;unknown&rdquo;).
</p>
<p>Normally, when reading directories, you should set <code class="code">FS</code>
equal to <code class="code">&quot;/&quot;</code>.  However, you may instead chose to create
<code class="code">PROCINFO[&quot;readdir_override&quot;]</code> (with any value). If this element
exists when the directory is opened, then the extension automatically
sets the fields in each record for you.
</p>
<p>By default, if a directory cannot be opened (due to permission problems,
for example), <code class="command">gawk</code> will exit.  As with regular files, this
situation can be handled using a <code class="code">BEGINFILE</code> rule that checks
<code class="code">ERRNO</code> and prints an error or otherwise handles the problem.
</p>
<p>Here is an example:
</p>
<div class="example">
<pre class="example-preformatted">@load &quot;readdir&quot;
...
BEGIN { FS = &quot;/&quot; }
{ print &quot;file name is&quot;, $2 }
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Extension-Sample-Revout">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Sample-Rev2way" accesskey="n" rel="next">Two-Way I/O Example</a>, Previous: <a href="#Extension-Sample-Readdir" accesskey="p" rel="prev">Reading Directories</a>, Up: <a href="#Extension-Samples" accesskey="u" rel="up">The Sample Extensions in the <code class="command">gawk</code> Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Reversing-Output"><span>17.7.7 Reversing Output<a class="copiable-link" href="#Reversing-Output"> &para;</a></span></h4>

<p>The <code class="code">revoutput</code> extension adds a simple output wrapper that reverses
the characters in each output line.  Its main purpose is to show how to
write an output wrapper, although it may be mildly amusing for the unwary.
Here is an example:
</p>
<a class="index-entry-id" id="index-revoutput-extension"></a>
<div class="example">
<pre class="example-preformatted">@load &quot;revoutput&quot;

BEGIN {
    REVOUT = 1
    print &quot;don't panic&quot; &gt; &quot;/dev/stdout&quot;
}
</pre></div>

<p>The output from this program is &lsquo;<samp class="samp">cinap t'nod</samp>&rsquo;.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Extension-Sample-Rev2way">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Sample-Read-write-array" accesskey="n" rel="next">Dumping and Restoring an Array</a>, Previous: <a href="#Extension-Sample-Revout" accesskey="p" rel="prev">Reversing Output</a>, Up: <a href="#Extension-Samples" accesskey="u" rel="up">The Sample Extensions in the <code class="command">gawk</code> Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Two_002dWay-I_002fO-Example"><span>17.7.8 Two-Way I/O Example<a class="copiable-link" href="#Two_002dWay-I_002fO-Example"> &para;</a></span></h4>

<p>The <code class="code">revtwoway</code> extension adds a simple two-way processor that
reverses the characters in each line sent to it for reading back by
the <code class="command">awk</code> program.  Its main purpose is to show how to write
a two-way processor, although it may also be mildly amusing.
The following example shows how to use it:
</p>
<a class="index-entry-id" id="index-revtwoway-extension"></a>
<div class="example">
<pre class="example-preformatted">@load &quot;revtwoway&quot;

BEGIN {
    cmd = &quot;/magic/mirror&quot;
    print &quot;don't panic&quot; |&amp; cmd
    cmd |&amp; getline result
    print result
    close(cmd)
}
</pre></div>

<p>The output from this program
also is:
&lsquo;<samp class="samp">cinap t'nod</samp>&rsquo;.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Extension-Sample-Read-write-array">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Sample-Readfile" accesskey="n" rel="next">Reading an Entire File</a>, Previous: <a href="#Extension-Sample-Rev2way" accesskey="p" rel="prev">Two-Way I/O Example</a>, Up: <a href="#Extension-Samples" accesskey="u" rel="up">The Sample Extensions in the <code class="command">gawk</code> Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Dumping-and-Restoring-an-Array"><span>17.7.9 Dumping and Restoring an Array<a class="copiable-link" href="#Dumping-and-Restoring-an-Array"> &para;</a></span></h4>

<p>The <code class="code">rwarray</code> extension adds four functions,
named <code class="code">writea()</code>, <code class="code">reada()</code>,
<code class="code">writeall()</code> and <code class="code">readall()</code>, as follows:
</p>
<dl class="table">
<dt><code class="code">@load &quot;rwarray&quot;</code></dt>
<dd><p>This is how you load the extension.
</p>
</dd>
<dt><a id="index-writea_0028_0029-extension-function"></a><span><code class="code">ret = writea(file, array)</code><a class="copiable-link" href="#index-writea_0028_0029-extension-function"> &para;</a></span></dt>
<dd><p>This function takes a string argument, which is the name of the file
to which to dump the array, and the array itself as the second argument.
<code class="code">writea()</code> understands arrays of arrays.  It returns one on
success, or zero upon failure.
</p>
</dd>
<dt><a id="index-reada_0028_0029-extension-function"></a><span><code class="code">ret = reada(file, array)</code><a class="copiable-link" href="#index-reada_0028_0029-extension-function"> &para;</a></span></dt>
<dd><p><code class="code">reada()</code> is the inverse of <code class="code">writea()</code>;
it reads the file named as its first argument, filling in
the array named as the second argument. It clears the array first.
Here too, the return value is one on success, or zero upon failure.
</p>
</dd>
<dt><a id="index-writeall_0028_0029-extension-function"></a><span><code class="code">ret = writeall(file)</code><a class="copiable-link" href="#index-writeall_0028_0029-extension-function"> &para;</a></span></dt>
<dd><p>This function takes a string argument, which is the name of the file
to which to dump the state of all variables.
Calling this function
is completely equivalent to calling
<code class="code">writea(file, SYMTAB)</code>.
It returns one on success, or zero upon failure
</p>
</dd>
<dt><a id="index-readall_0028_0029-extension-function"></a><span><code class="code">ret = readall(file)</code><a class="copiable-link" href="#index-readall_0028_0029-extension-function"> &para;</a></span></dt>
<dd><p>This function takes a string argument, which is the name of the
file from which to read the contents of various global variables.
For each variable in the file, the data is loaded unless the variable
has already been assigned a value or used as an array.
In that case, the data for that variable
in the file is ignored.
It returns one on success, or zero upon failure.
</p></dd>
</dl>

<p>The array created by <code class="code">reada()</code> is identical to that written by
<code class="code">writea()</code> in the sense that the contents are the same. However,
due to implementation issues, the array traversal order of the re-created
array is likely to be different from that of the original array.  As array
traversal order in <code class="command">awk</code> is by default undefined, this is (technically)
not a problem.  If you need to guarantee a particular traversal
order, use the array sorting features in <code class="command">gawk</code> to do so
(see <a class="pxref" href="#Array-Sorting">Controlling Array Traversal and Array Sorting</a>).
</p>
<p>The file contains binary data.  All integral values are written in network
byte order.  However, double-precision floating-point values are written
as native binary data.  Thus, arrays containing only string data can
theoretically be dumped on systems with one byte order and restored on
systems with a different one, but this has not been tried.
</p>
<p>Note that the <code class="code">writeall()</code> and <code class="code">readall()</code> functions provide
a mechanism for maintaining persistent state across repeated invocations of a
program. If, for example, a program calculates some statistics based on the
data in a series of files, it could save state using <code class="code">writeall()</code> after
processing N files, and then reload the state using <code class="code">readall()</code> when
the N+1st file arrives to update the results.
</p>
<p>Here is an example:
</p>
<div class="example">
<pre class="example-preformatted">@load &quot;rwarray&quot;
...
ret = writea(&quot;arraydump.bin&quot;, array)
...
ret = reada(&quot;arraydump.bin&quot;, array)
...
ret = writeall(&quot;globalstate.bin&quot;)
...
ret = readall(&quot;globalstate.bin&quot;)
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Extension-Sample-Readfile">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Sample-Time" accesskey="n" rel="next">Extension Time Functions</a>, Previous: <a href="#Extension-Sample-Read-write-array" accesskey="p" rel="prev">Dumping and Restoring an Array</a>, Up: <a href="#Extension-Samples" accesskey="u" rel="up">The Sample Extensions in the <code class="command">gawk</code> Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Reading-an-Entire-File"><span>17.7.10 Reading an Entire File<a class="copiable-link" href="#Reading-an-Entire-File"> &para;</a></span></h4>

<p>The <code class="code">readfile</code> extension adds a single function
named <code class="code">readfile()</code>, and an input parser:
</p>
<dl class="table">
<dt><code class="code">@load &quot;readfile&quot;</code></dt>
<dd><p>This is how you load the extension.
</p>
</dd>
<dt><a id="index-readfile_0028_0029-extension-function"></a><span><code class="code">result = readfile(&quot;/some/path&quot;)</code><a class="copiable-link" href="#index-readfile_0028_0029-extension-function"> &para;</a></span></dt>
<dd><p>The argument is the name of the file to read.  The return value is a
string containing the entire contents of the requested file.  Upon error,
the function returns the empty string and sets <code class="code">ERRNO</code>.
</p>
</dd>
<dt><code class="code">BEGIN { PROCINFO[&quot;readfile&quot;] = 1 }</code></dt>
<dd><p>In addition, the extension adds an input parser that is activated if
<code class="code">PROCINFO[&quot;readfile&quot;]</code> exists.
When activated, each input file is returned in its entirety as <code class="code">$0</code>.
<code class="code">RT</code> is set to the null string.
</p></dd>
</dl>

<p>Here is an example:
</p>
<div class="example">
<pre class="example-preformatted">@load &quot;readfile&quot;
...
contents = readfile(&quot;/path/to/file&quot;);
if (contents == &quot;&quot; &amp;&amp; ERRNO != &quot;&quot;) {
    print(&quot;problem reading file&quot;, ERRNO) &gt; &quot;/dev/stderr&quot;
    ...
}
</pre></div>

<hr>
</div>
<div class="subsection-level-extent" id="Extension-Sample-Time">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Sample-API-Tests" accesskey="n" rel="next">API Tests</a>, Previous: <a href="#Extension-Sample-Readfile" accesskey="p" rel="prev">Reading an Entire File</a>, Up: <a href="#Extension-Samples" accesskey="u" rel="up">The Sample Extensions in the <code class="command">gawk</code> Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="Extension-Time-Functions"><span>17.7.11 Extension Time Functions<a class="copiable-link" href="#Extension-Time-Functions"> &para;</a></span></h4>

<p>The <code class="code">time</code> extension adds three functions, named <code class="code">gettimeofday()</code>
<code class="code">sleep()</code>, and <code class="code">strptime()</code>, as follows:
</p>
<dl class="table">
<dt><code class="code">@load &quot;time&quot;</code></dt>
<dd><p>This is how you load the extension.
</p>
</dd>
<dt><a id="index-gettimeofday_0028_0029-extension-function"></a><span><code class="code">the_time = gettimeofday()</code><a class="copiable-link" href="#index-gettimeofday_0028_0029-extension-function"> &para;</a></span></dt>
<dd><p>Return the time in seconds that has elapsed since 1970-01-01 UTC as a
floating-point value.  If the time is unavailable on this platform, return
&minus;1 and set <code class="code">ERRNO</code>.  The returned time should have sub-second
precision, but the actual precision may vary based on the platform.
If the standard C <code class="code">gettimeofday()</code> system call is available on this
platform, then it simply returns the value.  Otherwise, if on MS-Windows,
it tries to use <code class="code">GetSystemTimeAsFileTime()</code>.
</p>
</dd>
<dt><a id="index-sleep_0028_0029-extension-function"></a><span><code class="code">result = sleep(<var class="var">seconds</var>)</code><a class="copiable-link" href="#index-sleep_0028_0029-extension-function"> &para;</a></span></dt>
<dd><p>Attempt to sleep for <var class="var">seconds</var> seconds.  If <var class="var">seconds</var> is negative,
or the attempt to sleep fails, return &minus;1 and set <code class="code">ERRNO</code>.
Otherwise, return zero after sleeping for the indicated amount of time.
Note that <var class="var">seconds</var> may be a floating-point (nonintegral) value.
Implementation details: depending on platform availability, this function
tries to use <code class="code">nanosleep()</code> or <code class="code">select()</code> to implement the delay.
</p>
</dd>
<dt><a id="index-strptime_0028_0029-extension-function"></a><span><code class="code">timeval = strptime(<var class="var">string</var>, <var class="var">format</var>)</code><a class="copiable-link" href="#index-strptime_0028_0029-extension-function"> &para;</a></span></dt>
<dd><p>This function takes two arguments, a string representing a date and
time, and a format string describing the data in the string. It
calls the C library <code class="code">strptime()</code> function with the given values.
If the parsing succeeds, the results are passed to the C library
<code class="code">mktime()</code> function, and its result is returned, expressing
the time in seconds since the epoch in the current local timezone,
regardless of any timezone specified in the string arguments.  (This
is the same as <code class="command">gawk</code>&rsquo;s built-in <code class="code">systime()</code> function.)
Otherwise it returns &minus;1 upon error. In the latter case,
</p>
<p>Note that the underlying <code class="code">strptime()</code> C library routine apparently
ignores any time zone indication in the date string, producing values
relative to the current time zone.
</p></dd>
</dl>

<hr>
</div>
<div class="subsection-level-extent" id="Extension-Sample-API-Tests">
<div class="nav-panel">
<p>
Previous: <a href="#Extension-Sample-Time" accesskey="p" rel="prev">Extension Time Functions</a>, Up: <a href="#Extension-Samples" accesskey="u" rel="up">The Sample Extensions in the <code class="command">gawk</code> Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="subsection" id="API-Tests"><span>17.7.12 API Tests<a class="copiable-link" href="#API-Tests"> &para;</a></span></h4>
<a class="index-entry-id" id="index-testext-extension"></a>

<p>The <code class="code">testext</code> extension exercises parts of the extension API that
are not tested by the other samples.  The <samp class="file">extension/testext.c</samp>
file contains both the C code for the extension and <code class="command">awk</code>
test code inside C comments that run the tests. The testing framework
extracts the <code class="command">awk</code> code and runs the tests.  See the source file
for more information.
</p>
<hr>
</div>
</div>
<div class="section-level-extent" id="gawkextlib">
<div class="nav-panel">
<p>
Next: <a href="#Extension-summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Extension-Samples" accesskey="p" rel="prev">The Sample Extensions in the <code class="command">gawk</code> Distribution</a>, Up: <a href="#Dynamic-Extensions" accesskey="u" rel="up">Writing Extensions for <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="The-gawkextlib-Project"><span>17.8 The <code class="code">gawkextlib</code> Project<a class="copiable-link" href="#The-gawkextlib-Project"> &para;</a></span></h3>
<a class="index-entry-id" id="index-extensions-loadable-gawkextlib-project"></a>

<a class="index-entry-id" id="index-gawkextlib-project"></a>
<p>The <a class="uref" href="https://sourceforge.net/projects/gawkextlib/"><code class="code">gawkextlib</code></a>
project provides a number of <code class="command">gawk</code> extensions, including one for
processing XML files.  This is the evolution of the original <code class="command">xgawk</code>
(XML <code class="command">gawk</code>) project.
</p>
<p>There are a number of extensions. Some of the more interesting ones are:
</p>
<ul class="itemize mark-bullet">
<li><code class="code">abort</code> extension. It allows you to exit immediately from your
<code class="command">awk</code> program without running the <code class="code">END</code> rules.

</li><li><code class="code">json</code> extension.
This serializes a multidimensional array into a JSON string, and
can deserialize a JSON string into a <code class="command">gawk</code> array.
This extension is interesting since it is written in C++ instead of C.

</li><li>MPFR library extension.
This provides access to a number of MPFR functions that <code class="command">gawk</code>&rsquo;s
native MPFR support does not.

</li><li>Select extension. It provides functionality based on the
<code class="code">select()</code> system call.

</li><li>XML parser extension, using the <a class="uref" href="https://expat.sourceforge.net">Expat</a>
XML parsing library
</li></ul>

<a class="index-entry-id" id="index-git-utility"></a>
<p>You can check out the code for the <code class="code">gawkextlib</code> project
using the <a class="uref" href="https://git-scm.com">Git</a> distributed source
code control system.  The command is as follows:
</p>
<div class="example">
<pre class="example-preformatted">git clone git://git.code.sf.net/p/gawkextlib/code gawkextlib-code
</pre></div>

<a class="index-entry-id" id="index-RapidJson-JSON-parser-library"></a>
<p>You will need to have the <a class="uref" href="http://www.rapidjson.org">RapidJson</a>
JSON parser library installed in order to build and use the <code class="code">json</code> extension.
</p>
<a class="index-entry-id" id="index-Expat-XML-parser-library"></a>
<p>You will need to have the <a class="uref" href="https://expat.sourceforge.net">Expat</a>
XML parser library installed in order to build and use the XML extension.
</p>
<p>In addition, you must have the GNU Autotools installed
(<a class="uref" href="https://www.gnu.org/software/autoconf">Autoconf</a>,
<a class="uref" href="https://www.gnu.org/software/automake">Automake</a>,
<a class="uref" href="https://www.gnu.org/software/libtool">Libtool</a>,
and
<a class="uref" href="https://www.gnu.org/software/gettext">GNU <code class="command">gettext</code></a>).
</p>
<p>The simple recipe for building and testing <code class="code">gawkextlib</code> is as follows.
First, build and install <code class="command">gawk</code>:
</p>
<div class="example">
<pre class="example-preformatted">cd .../path/to/gawk/code
./configure --prefix=/tmp/newgawk     <i class="i">Install in /tmp/newgawk for now</i>
make &amp;&amp; make check                    <i class="i">Build and check that all is OK</i>
make install                          <i class="i">Install gawk</i>
</pre></div>

<p>Next, go to <a class="url" href="https://sourceforge.net/projects/gawkextlib/files">https://sourceforge.net/projects/gawkextlib/files</a> to
download <code class="code">gawkextlib</code> and any extensions that you would like to build.
The <samp class="file">README</samp> file at that site explains how to build the code.  If you
installed <code class="command">gawk</code> in a non-standard location, you will need to
specify &lsquo;<samp class="samp">./configure --with-gawk=<var class="var">/path/to/gawk</var></samp>&rsquo; to find it.
You may need to use the <code class="command">sudo</code> utility
to install both <code class="command">gawk</code> and <code class="code">gawkextlib</code>, depending upon
how your system works.
</p>
<p>If you write an extension that you wish to share with other
<code class="command">gawk</code> users, consider doing so through the
<code class="code">gawkextlib</code> project.
See the project&rsquo;s website for more information.
</p>
<hr>
</div>
<div class="section-level-extent" id="Extension-summary">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Exercises" accesskey="n" rel="next">Exercises</a>, Previous: <a href="#gawkextlib" accesskey="p" rel="prev">The <code class="code">gawkextlib</code> Project</a>, Up: <a href="#Dynamic-Extensions" accesskey="u" rel="up">Writing Extensions for <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Summary-16"><span>17.9 Summary<a class="copiable-link" href="#Summary-16"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>You can write extensions (sometimes called plug-ins) for <code class="command">gawk</code>
in C or C++ using the application programming interface (API) defined
by the <code class="command">gawk</code> developers.

</li><li>Extensions must have a license compatible with the GNU General Public
License (GPL), and they must assert that fact by declaring a variable
named <code class="code">plugin_is_GPL_compatible</code>.

</li><li>Communication between <code class="command">gawk</code> and an extension is two-way.
<code class="command">gawk</code> passes a <code class="code">struct</code> to the extension that contains
various data fields and function pointers.  The extension can then call
into <code class="command">gawk</code> via the supplied function pointers to accomplish
certain tasks.

</li><li>One of these tasks is to &ldquo;register&rdquo; the name and implementation of
new <code class="command">awk</code>-level functions with <code class="command">gawk</code>.  The implementation
takes the form of a C function pointer with a defined signature.
By convention, implementation functions are named <code class="code">do_<var class="var">XXXX</var>()</code>
for some <code class="command">awk</code>-level function <code class="code"><var class="var">XXXX</var>()</code>.

</li><li>The API is defined in a header file named <samp class="file">gawkapi.h</samp>. You must include
a number of standard header files <em class="emph">before</em> including it in your source file.

</li><li>API function pointers are provided for the following kinds of operations:

<ul class="itemize mark-bullet">
<li>Allocating, reallocating, and releasing memory

</li><li>Registration functions (you may register
extension functions,
exit callbacks,
a version string,
input parsers,
output wrappers,
and two-way processors)

</li><li>Printing fatal, nonfatal, warning, and &ldquo;lint&rdquo; warning messages

</li><li>Updating <code class="code">ERRNO</code>, or unsetting it

</li><li>Accessing parameters, including converting an undefined parameter into
an array

</li><li>Symbol table access (retrieving a global variable, creating one,
or changing one)

</li><li>Creating and releasing cached values; this provides an
efficient way to use values for multiple variables and
can be a big performance win

</li><li>Manipulating arrays
(retrieving, adding, deleting, and modifying elements;
getting the count of elements in an array;
creating a new array;
clearing an array;
and
flattening an array for easy C-style looping over all its indices and elements)
</li></ul>

</li><li>The API defines a number of standard data types for representing
<code class="command">awk</code> values, array elements, and arrays.

</li><li>The API provides convenience functions for constructing values.
It also provides memory management functions to ensure compatibility
between memory allocated by <code class="command">gawk</code> and memory allocated by an
extension.

</li><li><em class="emph">All</em> memory passed from <code class="command">gawk</code> to an extension must be
treated as read-only by the extension.

</li><li><em class="emph">All</em> memory passed from an extension to <code class="command">gawk</code> must come from
the API&rsquo;s memory allocation functions. <code class="command">gawk</code> takes responsibility for
the memory and releases it when appropriate.

</li><li>The API provides information about the running version of <code class="command">gawk</code> so
that an extension can make sure it is compatible with the <code class="command">gawk</code>
that loaded it.

</li><li>It is easiest to start a new extension by copying the boilerplate code
described in this chapter.  Macros in the <samp class="file">gawkapi.h</samp> header
file make this easier to do.

</li><li>The <code class="command">gawk</code> distribution includes a number of small but useful
sample extensions. The <code class="code">gawkextlib</code> project includes several more
(larger) extensions.  If you wish to write an extension and contribute it
to the community of <code class="command">gawk</code> users, the <code class="code">gawkextlib</code> project
is the place to do so.

</li></ul>

<hr>
</div>
<div class="section-level-extent" id="Extension-Exercises">
<div class="nav-panel">
<p>
Previous: <a href="#Extension-summary" accesskey="p" rel="prev">Summary</a>, Up: <a href="#Dynamic-Extensions" accesskey="u" rel="up">Writing Extensions for <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="section" id="Exercises-4"><span>17.10 Exercises<a class="copiable-link" href="#Exercises-4"> &para;</a></span></h3>

<ol class="enumerate">
<li> Add functions to implement system calls such as <code class="code">chown()</code>,
<code class="code">chmod()</code>, and <code class="code">umask()</code> to the file operations extension
presented in <a class="ref" href="#Internal-File-Ops">C Code for <code class="code">chdir()</code> and <code class="code">stat()</code></a>.

</li><li> Write an input parser that prints a prompt if the input is
a from a &ldquo;terminal&rdquo; device.  You can use the <code class="code">isatty()</code>
function to tell if the input file is a terminal. (Hint: this function
is usually expensive to call; try to call it just once.)
The content of the prompt should come from a variable settable
by <code class="command">awk</code>-level code.
You can write the prompt to standard error. However,
for best results, open a new file descriptor (or file pointer)
on <samp class="file">/dev/tty</samp> and print the prompt there, in case standard
error has been redirected.

<p>Why is standard error a better
choice than standard output for writing the prompt?
Which reading mechanism should you replace, the one to get
a record, or the one to read raw bytes?
</p>
</li><li> Write a wrapper script that provides an interface similar to
&lsquo;<samp class="samp">sed -i</samp>&rsquo; for the &ldquo;inplace&rdquo; extension presented in
<a class="ref" href="#Extension-Sample-Inplace">Enabling In-Place File Editing</a>.

</li></ol>

<hr>
</div>
</div>
</div>
<div class="part-level-extent" id="Part-IV_003a-Appendices">
<div class="nav-panel">
<p>
Next: <a href="#Installation" accesskey="n" rel="next">Installing <code class="command">gawk</code></a>, Previous: <a href="#Dynamic-Extensions" accesskey="p" rel="prev">Writing Extensions for <code class="command">gawk</code></a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h1 class="part"><span>Part IV:<br>Appendices<a class="copiable-link" href="#Part-IV_003a-Appendices"> &para;</a></span></h1>
<hr>


<ul class="mini-toc">
<li><a href="#Language-History" accesskey="1">The Evolution of the <code class="command">awk</code> Language</a></li>
<li><a href="#Installation" accesskey="2">Installing <code class="command">gawk</code></a></li>
<li><a href="#Notes" accesskey="3">Implementation Notes</a></li>
<li><a href="#Basic-Concepts" accesskey="4">Basic Programming Concepts</a></li>
<li><a href="#Glossary" accesskey="5">Glossary</a></li>
<li><a href="#Copying" accesskey="6">GNU General Public License</a></li>
<li><a href="#GNU-Free-Documentation-License" accesskey="7">GNU Free Documentation License</a></li>
<li><a href="#Index" accesskey="8">Index</a></li>
</ul>
<div class="appendix-level-extent" id="Language-History">
<h2 class="appendix" id="The-Evolution-of-the-awk-Language"><span>Appendix A The Evolution of the <code class="command">awk</code> Language<a class="copiable-link" href="#The-Evolution-of-the-awk-Language"> &para;</a></span></h2>

<p>This Web page describes the GNU implementation of <code class="command">awk</code>,
which follows the POSIX specification.  Many longtime <code class="command">awk</code>
users learned <code class="command">awk</code> programming with the original <code class="command">awk</code>
implementation in Version 7 Unix.  (This implementation was the basis for
<code class="command">awk</code> in Berkeley Unix, through 4.3-Reno.  Subsequent versions
of Berkeley Unix, and, for a while, some systems derived from 4.4BSD-Lite, used various
versions of <code class="command">gawk</code> for their <code class="command">awk</code>.)  This chapter
briefly describes the evolution of the <code class="command">awk</code> language, with
cross-references to other parts of the Web page where you can
find more information.
</p>


<ul class="mini-toc">
<li><a href="#V7_002fSVR3_002e1" accesskey="1">Major Changes Between V7 and SVR3.1</a></li>
<li><a href="#SVR4" accesskey="2">Changes Between SVR3.1 and SVR4</a></li>
<li><a href="#POSIX" accesskey="3">Changes Between SVR4 and POSIX <code class="command">awk</code></a></li>
<li><a href="#BTL" accesskey="4">Extensions in Brian Kernighan&rsquo;s <code class="command">awk</code></a></li>
<li><a href="#POSIX_002fGNU" accesskey="5">Extensions in <code class="command">gawk</code> Not in POSIX <code class="command">awk</code></a></li>
<li><a href="#Feature-History" accesskey="6">History of <code class="command">gawk</code> Features</a></li>
<li><a href="#Common-Extensions" accesskey="7">Common Extensions Summary</a></li>
<li><a href="#Ranges-and-Locales" accesskey="8">Regexp Ranges and Locales: A Long Sad Story</a></li>
<li><a href="#Contributors" accesskey="9">Major Contributors to <code class="command">gawk</code></a></li>
<li><a href="#History-summary">Summary</a></li>
</ul>
<hr>
<div class="appendixsec-level-extent" id="V7_002fSVR3_002e1">
<div class="nav-panel">
<p>
Next: <a href="#SVR4" accesskey="n" rel="next">Changes Between SVR3.1 and SVR4</a>, Up: <a href="#Language-History" accesskey="u" rel="up">The Evolution of the <code class="command">awk</code> Language</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Major-Changes-Between-V7-and-SVR3_002e1"><span>A.1 Major Changes Between V7 and SVR3.1<a class="copiable-link" href="#Major-Changes-Between-V7-and-SVR3_002e1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-awk-versions-of"></a>
<a class="index-entry-id" id="index-awk-versions-of-changes-between-V7-and-SVR3_002e1"></a>

<p>The <code class="command">awk</code> language evolved considerably between the release of
Version 7 Unix (1978) and the new version that was first made generally available in
System V Release 3.1 (1987).  This section summarizes the changes, with
cross-references to further details:
</p>
<ul class="itemize mark-bullet">
<li>The requirement for &lsquo;<samp class="samp">;</samp>&rsquo; to separate rules on a line
(see <a class="pxref" href="#Statements_002fLines"><code class="command">awk</code> Statements Versus Lines</a>)

</li><li>User-defined functions and the <code class="code">return</code> statement
(see <a class="pxref" href="#User_002ddefined">User-Defined Functions</a>)

</li><li>The <code class="code">delete</code> statement (see <a class="pxref" href="#Delete">The <code class="code">delete</code> Statement</a>)

</li><li>The <code class="code">do</code>-<code class="code">while</code> statement
(see <a class="pxref" href="#Do-Statement">The <code class="code">do</code>-<code class="code">while</code> Statement</a>)

</li><li>The built-in functions <code class="code">atan2()</code>, <code class="code">cos()</code>, <code class="code">sin()</code>, <code class="code">rand()</code>, and
<code class="code">srand()</code> (see <a class="pxref" href="#Numeric-Functions">Numeric Functions</a>)

</li><li>The built-in functions <code class="code">gsub()</code>, <code class="code">sub()</code>, and <code class="code">match()</code>
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>)

</li><li>The built-in functions <code class="code">close()</code> and <code class="code">system()</code>
(see <a class="pxref" href="#I_002fO-Functions">Input/Output Functions</a>)

</li><li>The <code class="code">ARGC</code>, <code class="code">ARGV</code>, <code class="code">FNR</code>, <code class="code">RLENGTH</code>, <code class="code">RSTART</code>,
and <code class="code">SUBSEP</code> predefined variables (see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>)

</li><li>Assignable <code class="code">$0</code> (see <a class="pxref" href="#Changing-Fields">Changing the Contents of a Field</a>)

</li><li>The conditional expression using the ternary operator &lsquo;<samp class="samp">?:</samp>&rsquo;
(see <a class="pxref" href="#Conditional-Exp">Conditional Expressions</a>)

</li><li>The expression &lsquo;<samp class="samp"><var class="var">indx</var> in <var class="var">array</var></samp>&rsquo; outside of <code class="code">for</code>
statements (see <a class="pxref" href="#Reference-to-Elements">Referring to an Array Element</a>)

</li><li>The exponentiation operator &lsquo;<samp class="samp">^</samp>&rsquo;
(see <a class="pxref" href="#Arithmetic-Ops">Arithmetic Operators</a>) and its assignment operator
form &lsquo;<samp class="samp">^=</samp>&rsquo; (see <a class="pxref" href="#Assignment-Ops">Assignment Expressions</a>)

</li><li>C-compatible operator precedence, which breaks some old <code class="command">awk</code>
programs (see <a class="pxref" href="#Precedence">Operator Precedence (How Operators Nest)</a>)

</li><li>Regexps as the value of <code class="code">FS</code>
(see <a class="pxref" href="#Field-Separators">Specifying How Fields Are Separated</a>) and as the
third argument to the <code class="code">split()</code> function
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>), rather than using only the first character
of <code class="code">FS</code>

</li><li>Dynamic regexps as operands of the &lsquo;<samp class="samp">~</samp>&rsquo; and &lsquo;<samp class="samp">!~</samp>&rsquo; operators
(see <a class="pxref" href="#Computed-Regexps">Using Dynamic Regexps</a>)

</li><li>The escape sequences &lsquo;<samp class="samp">\b</samp>&rsquo;, &lsquo;<samp class="samp">\f</samp>&rsquo;, and &lsquo;<samp class="samp">\r</samp>&rsquo;
(see <a class="pxref" href="#Escape-Sequences">Escape Sequences</a>)

</li><li>Redirection of input for the <code class="code">getline</code> function
(see <a class="pxref" href="#Getline">Explicit Input with <code class="code">getline</code></a>)

</li><li>Multiple <code class="code">BEGIN</code> and <code class="code">END</code> rules
(see <a class="pxref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>)

</li><li>Multidimensional arrays
(see <a class="pxref" href="#Multidimensional">Multidimensional Arrays</a>)
</li></ul>

<hr>
</div>
<div class="appendixsec-level-extent" id="SVR4">
<div class="nav-panel">
<p>
Next: <a href="#POSIX" accesskey="n" rel="next">Changes Between SVR4 and POSIX <code class="command">awk</code></a>, Previous: <a href="#V7_002fSVR3_002e1" accesskey="p" rel="prev">Major Changes Between V7 and SVR3.1</a>, Up: <a href="#Language-History" accesskey="u" rel="up">The Evolution of the <code class="command">awk</code> Language</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Changes-Between-SVR3_002e1-and-SVR4"><span>A.2 Changes Between SVR3.1 and SVR4<a class="copiable-link" href="#Changes-Between-SVR3_002e1-and-SVR4"> &para;</a></span></h3>

<a class="index-entry-id" id="index-awk-versions-of-changes-between-SVR3_002e1-and-SVR4"></a>
<p>The System V Release 4 (1989) version of Unix <code class="command">awk</code> added these features
(some of which originated in <code class="command">gawk</code>):
</p>
<ul class="itemize mark-bullet">
<li>The <code class="code">ENVIRON</code> array (see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>)

</li><li>Multiple <samp class="option">-f</samp> options on the command line
(see <a class="pxref" href="#Options">Command-Line Options</a>)

</li><li>The <samp class="option">-v</samp> option for assigning variables before program execution begins
(see <a class="pxref" href="#Options">Command-Line Options</a>)

</li><li>The <samp class="option">--</samp> signal for terminating command-line options

</li><li>The &lsquo;<samp class="samp">\a</samp>&rsquo;, &lsquo;<samp class="samp">\v</samp>&rsquo;, and &lsquo;<samp class="samp">\x</samp>&rsquo; escape sequences
(see <a class="pxref" href="#Escape-Sequences">Escape Sequences</a>)

</li><li>A defined return value for the <code class="code">srand()</code> built-in function
(see <a class="pxref" href="#Numeric-Functions">Numeric Functions</a>)

</li><li>The <code class="code">toupper()</code> and <code class="code">tolower()</code> built-in string functions
for case translation
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>)

</li><li>A cleaner specification for the &lsquo;<samp class="samp">%c</samp>&rsquo; format-control letter in the
<code class="code">printf</code> function
(see <a class="pxref" href="#Control-Letters">Format-Control Letters</a>)

</li><li>The ability to dynamically pass the field width and precision (<code class="code">&quot;%*.*d&quot;</code>)
in the argument list of <code class="code">printf</code> and <code class="code">sprintf()</code>
(see <a class="pxref" href="#Control-Letters">Format-Control Letters</a>)

</li><li>The use of regexp constants, such as <code class="code">/foo/</code>, as expressions, where
they are equivalent to using the matching operator, as in &lsquo;<samp class="samp">$0 ~ /foo/</samp>&rsquo;
(see <a class="pxref" href="#Using-Constant-Regexps">Using Regular Expression Constants</a>)

</li><li>Processing of escape sequences inside command-line variable assignments
(see <a class="pxref" href="#Assignment-Options">Assigning Variables on the Command Line</a>)
</li></ul>

<hr>
</div>
<div class="appendixsec-level-extent" id="POSIX">
<div class="nav-panel">
<p>
Next: <a href="#BTL" accesskey="n" rel="next">Extensions in Brian Kernighan&rsquo;s <code class="command">awk</code></a>, Previous: <a href="#SVR4" accesskey="p" rel="prev">Changes Between SVR3.1 and SVR4</a>, Up: <a href="#Language-History" accesskey="u" rel="up">The Evolution of the <code class="command">awk</code> Language</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Changes-Between-SVR4-and-POSIX-awk"><span>A.3 Changes Between SVR4 and POSIX <code class="command">awk</code><a class="copiable-link" href="#Changes-Between-SVR4-and-POSIX-awk"> &para;</a></span></h3>
<a class="index-entry-id" id="index-awk-versions-of-changes-between-SVR4-and-POSIX-awk"></a>
<a class="index-entry-id" id="index-POSIX-awk-changes-in-awk-versions"></a>

<p>The POSIX Command Language and Utilities standard for <code class="command">awk</code> (1992)
introduced the following changes into the language:
</p>
<ul class="itemize mark-bullet">
<li>The use of <samp class="option">-W</samp> for implementation-specific options
(see <a class="pxref" href="#Options">Command-Line Options</a>)

</li><li>The use of <code class="code">CONVFMT</code> for controlling the conversion of numbers
to strings (see <a class="pxref" href="#Conversion">Conversion of Strings and Numbers</a>)

</li><li>The concept of a numeric string and tighter comparison rules to go
with it (see <a class="pxref" href="#Typing-and-Comparison">Variable Typing and Comparison Expressions</a>)

</li><li>The use of predefined variables as function parameter names is forbidden
(see <a class="pxref" href="#Definition-Syntax">Function Definition Syntax</a>)

</li><li>More complete documentation of many of the previously undocumented
features of the language
</li></ul>

<p>In 2012, a number of extensions that had been commonly available for
many years were finally added to POSIX. They are:
</p>
<ul class="itemize mark-bullet">
<li>The <code class="code">fflush()</code> built-in function for flushing buffered output
(see <a class="pxref" href="#I_002fO-Functions">Input/Output Functions</a>)

</li><li>The <code class="code">nextfile</code> statement
(see <a class="pxref" href="#Nextfile-Statement">The <code class="code">nextfile</code> Statement</a>)

</li><li>The ability to delete all of an array at once with &lsquo;<samp class="samp">delete <var class="var">array</var></samp>&rsquo;
(see <a class="pxref" href="#Delete">The <code class="code">delete</code> Statement</a>)

</li></ul>

<p>See <a class="xref" href="#Common-Extensions">Common Extensions Summary</a> for a list of common extensions
not permitted by the POSIX standard.
</p>
<p>The 2018 POSIX standard can be found online at
<a class="url" href="https://pubs.opengroup.org/onlinepubs/9699919799/">https://pubs.opengroup.org/onlinepubs/9699919799/</a>.
</p>

<hr>
</div>
<div class="appendixsec-level-extent" id="BTL">
<div class="nav-panel">
<p>
Next: <a href="#POSIX_002fGNU" accesskey="n" rel="next">Extensions in <code class="command">gawk</code> Not in POSIX <code class="command">awk</code></a>, Previous: <a href="#POSIX" accesskey="p" rel="prev">Changes Between SVR4 and POSIX <code class="command">awk</code></a>, Up: <a href="#Language-History" accesskey="u" rel="up">The Evolution of the <code class="command">awk</code> Language</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Extensions-in-Brian-Kernighan_0027s-awk"><span>A.4 Extensions in Brian Kernighan&rsquo;s <code class="command">awk</code><a class="copiable-link" href="#Extensions-in-Brian-Kernighan_0027s-awk"> &para;</a></span></h3>

<a class="index-entry-id" id="index-awk-versions-of-1"></a>
<a class="index-entry-id" id="index-extensions-Brian-Kernighan_0027s-awk"></a>
<a class="index-entry-id" id="index-Brian-Kernighan_0027s-awk-extensions"></a>
<a class="index-entry-id" id="index-Kernighan_002c-Brian-2"></a>
<p>Brian Kernighan
has made his version available via his home page
(see <a class="pxref" href="#Other-Versions">Other Freely Available <code class="command">awk</code> Implementations</a>).
</p>
<p>This section describes common extensions that
originally appeared in his version of <code class="command">awk</code>:
</p>
<ul class="itemize mark-bullet">
<li>The &lsquo;<samp class="samp">**</samp>&rsquo; and &lsquo;<samp class="samp">**=</samp>&rsquo; operators
(see <a class="pxref" href="#Arithmetic-Ops">Arithmetic Operators</a>
and
<a class="ref" href="#Assignment-Ops">Assignment Expressions</a>)

</li><li>The use of <code class="code">func</code> as an abbreviation for <code class="code">function</code>
(see <a class="pxref" href="#Definition-Syntax">Function Definition Syntax</a>)

</li><li>The <code class="code">fflush()</code> built-in function for flushing buffered output
(see <a class="pxref" href="#I_002fO-Functions">Input/Output Functions</a>)

</li></ul>

<p>See <a class="xref" href="#Common-Extensions">Common Extensions Summary</a> for a full list of the extensions
available in his <code class="command">awk</code>.
</p>
<hr>
</div>
<div class="appendixsec-level-extent" id="POSIX_002fGNU">
<div class="nav-panel">
<p>
Next: <a href="#Feature-History" accesskey="n" rel="next">History of <code class="command">gawk</code> Features</a>, Previous: <a href="#BTL" accesskey="p" rel="prev">Extensions in Brian Kernighan&rsquo;s <code class="command">awk</code></a>, Up: <a href="#Language-History" accesskey="u" rel="up">The Evolution of the <code class="command">awk</code> Language</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Extensions-in-gawk-Not-in-POSIX-awk"><span>A.5 Extensions in <code class="command">gawk</code> Not in POSIX <code class="command">awk</code><a class="copiable-link" href="#Extensions-in-gawk-Not-in-POSIX-awk"> &para;</a></span></h3>

<a class="index-entry-id" id="index-compatibility-mode-_0028gawk_0029-extensions"></a>
<a class="index-entry-id" id="index-extensions-in-gawk_002c-not-in-POSIX-awk"></a>
<a class="index-entry-id" id="index-POSIX-gawk-extensions-not-included-in"></a>
<p>The GNU implementation, <code class="command">gawk</code>, adds a large number of features.
They can all be disabled with either the <samp class="option">--traditional</samp> or
<samp class="option">--posix</samp> options
(see <a class="pxref" href="#Options">Command-Line Options</a>).
</p>
<p>A number of features have come and gone over the years. This section
summarizes the additional features over POSIX <code class="command">awk</code> that are
in the current version of <code class="command">gawk</code>.
</p>
<ul class="itemize mark-bullet">
<li>Additional predefined variables:

<ul class="itemize mark-minus">
<li>The
<code class="code">ARGIND</code>,
<code class="code">BINMODE</code>,
<code class="code">ERRNO</code>,
<code class="code">FIELDWIDTHS</code>,
<code class="code">FPAT</code>,
<code class="code">IGNORECASE</code>,
<code class="code">LINT</code>,
<code class="code">PROCINFO</code>,
<code class="code">RT</code>,
and
<code class="code">TEXTDOMAIN</code>
variables
(see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>)
</li></ul>

</li><li>Special files in I/O redirections:

<ul class="itemize mark-minus">
<li>The <samp class="file">/dev/stdin</samp>, <samp class="file">/dev/stdout</samp>, <samp class="file">/dev/stderr</samp>, and
<samp class="file">/dev/fd/<var class="var">N</var></samp> special file names
(see <a class="pxref" href="#Special-Files">Special File names in <code class="command">gawk</code></a>)

</li><li>The <samp class="file">/inet</samp>, <samp class="file">/inet4</samp>, and <samp class="file">/inet6</samp> special files for
TCP/IP networking using &lsquo;<samp class="samp">|&amp;</samp>&rsquo; to specify which version of the
IP protocol to use
(see <a class="pxref" href="#TCP_002fIP-Networking">Using <code class="command">gawk</code> for Network Programming</a>)
</li></ul>

</li><li>Changes and/or additions to the language:

<ul class="itemize mark-minus">
<li>The &lsquo;<samp class="samp">\x</samp>&rsquo; escape sequence
(see <a class="pxref" href="#Escape-Sequences">Escape Sequences</a>)

</li><li>Full support for both POSIX and GNU regexps
(see <a class="pxref" href="#Regexp">Regular Expressions</a>)

</li><li>The ability for <code class="code">FS</code> and for the third
argument to <code class="code">split()</code> to be null strings
(see <a class="pxref" href="#Single-Character-Fields">Making Each Character a Separate Field</a>)

</li><li>The ability for <code class="code">RS</code> to be a regexp
(see <a class="pxref" href="#Records">How Input Is Split into Records</a>)

</li><li>The ability to use octal and hexadecimal constants in <code class="command">awk</code>
program source code
(see <a class="pxref" href="#Nondecimal_002dnumbers">Octal and Hexadecimal Numbers</a>)

</li><li>The &lsquo;<samp class="samp">|&amp;</samp>&rsquo; operator for two-way I/O to a coprocess
(see <a class="pxref" href="#Two_002dway-I_002fO">Two-Way Communications with Another Process</a>)

</li><li>Indirect function calls
(see <a class="pxref" href="#Indirect-Calls">Indirect Function Calls</a>)

</li><li>Directories on the command line produce a warning and are skipped
(see <a class="pxref" href="#Command_002dline-directories">Directories on the Command Line</a>)

</li><li>Output with <code class="code">print</code> and <code class="code">printf</code> need not be fatal
(see <a class="pxref" href="#Nonfatal">Enabling Nonfatal Output</a>)
</li></ul>

</li><li>New keywords:

<ul class="itemize mark-minus">
<li>The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> special patterns
(see <a class="pxref" href="#BEGINFILE_002fENDFILE">The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a>)

</li><li>The <code class="code">switch</code> statement
(see <a class="pxref" href="#Switch-Statement">The <code class="code">switch</code> Statement</a>)
</li></ul>

</li><li>Changes to standard <code class="command">awk</code> functions:

<ul class="itemize mark-minus">
<li>The optional second argument to <code class="code">close()</code> that allows closing one end
of a two-way pipe to a coprocess
(see <a class="pxref" href="#Two_002dway-I_002fO">Two-Way Communications with Another Process</a>)

</li><li>POSIX compliance for <code class="code">gsub()</code> and <code class="code">sub()</code> with <samp class="option">--posix</samp>

</li><li>The <code class="code">length()</code> function accepts an array argument
and returns the number of elements in the array
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>)

</li><li>The optional third argument to the <code class="code">match()</code> function
for capturing text-matching subexpressions within a regexp
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>)

</li><li>Positional specifiers in <code class="code">printf</code> formats for
making translations easier
(see <a class="pxref" href="#Printf-Ordering">Rearranging <code class="code">printf</code> Arguments</a>)

</li><li>The <code class="code">split()</code> function&rsquo;s additional optional fourth
argument, which is an array to hold the text of the field separators
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>)
</li></ul>

</li><li>Additional functions only in <code class="command">gawk</code>:

<ul class="itemize mark-minus">
<li>The <code class="code">gensub()</code>, <code class="code">patsplit()</code>, and <code class="code">strtonum()</code> functions
for more powerful text manipulation
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>)

</li><li>The <code class="code">asort()</code> and <code class="code">asorti()</code> functions for sorting arrays
(see <a class="pxref" href="#Array-Sorting">Controlling Array Traversal and Array Sorting</a>)

</li><li>The <code class="code">mktime()</code>, <code class="code">systime()</code>, and <code class="code">strftime()</code>
functions for working with timestamps
(see <a class="pxref" href="#Time-Functions">Time Functions</a>)

</li><li>The
<code class="code">and()</code>,
<code class="code">compl()</code>,
<code class="code">lshift()</code>,
<code class="code">or()</code>,
<code class="code">rshift()</code>,
and
<code class="code">xor()</code>
functions for bit manipulation
(see <a class="pxref" href="#Bitwise-Functions">Bit-Manipulation Functions</a>)

</li><li>The <code class="code">isarray()</code> function to check if a variable is an array or not
(see <a class="pxref" href="#Type-Functions">Getting Type Information</a>)

</li><li>The <code class="code">bindtextdomain()</code>, <code class="code">dcgettext()</code>, and <code class="code">dcngettext()</code>
functions for internationalization
(see <a class="pxref" href="#Programmer-i18n">Internationalizing <code class="command">awk</code> Programs</a>)

</li></ul>

</li><li>Changes and/or additions in the command-line options:

<ul class="itemize mark-minus">
<li><a class="index-entry-id" id="index-AWKPATH-environment-variable-6"></a>
<a class="index-entry-id" id="index-environment-variables-AWKPATH-6"></a>
</li><li>The <code class="env">AWKPATH</code> environment variable for specifying a path search for
the <samp class="option">-f</samp> command-line option
(see <a class="pxref" href="#Options">Command-Line Options</a>)

<a class="index-entry-id" id="index-AWKLIBPATH-environment-variable-6"></a>
<a class="index-entry-id" id="index-environment-variables-AWKLIBPATH-6"></a>
</li><li>The <code class="env">AWKLIBPATH</code> environment variable for specifying a path search for
the <samp class="option">-l</samp> command-line option
(see <a class="pxref" href="#Options">Command-Line Options</a>)

</li><li>The
<samp class="option">-b</samp>,
<samp class="option">-c</samp>,
<samp class="option">-C</samp>,
<samp class="option">-d</samp>,
<samp class="option">-D</samp>,
<samp class="option">-e</samp>,
<samp class="option">-E</samp>,
<samp class="option">-g</samp>,
<samp class="option">-h</samp>,
<samp class="option">-i</samp>,
<samp class="option">-l</samp>,
<samp class="option">-L</samp>,
<samp class="option">-M</samp>,
<samp class="option">-n</samp>,
<samp class="option">-N</samp>,
<samp class="option">-o</samp>,
<samp class="option">-O</samp>,
<samp class="option">-p</samp>,
<samp class="option">-P</samp>,
<samp class="option">-r</samp>,
<samp class="option">-s</samp>,
<samp class="option">-S</samp>,
<samp class="option">-t</samp>,
and
<samp class="option">-V</samp>
short options. Also, the
ability to use GNU-style long-named options that start with <samp class="option">--</samp>,
and the
<samp class="option">--assign</samp>,
<samp class="option">--bignum</samp>,
<samp class="option">--characters-as-bytes</samp>,
<samp class="option">--copyright</samp>,
<samp class="option">--debug</samp>,
<samp class="option">--dump-variables</samp>,
<samp class="option">--exec</samp>,
<samp class="option">--field-separator</samp>,
<samp class="option">--file</samp>,
<samp class="option">--gen-pot</samp>,
<samp class="option">--help</samp>,
<samp class="option">--include</samp>,
<samp class="option">--lint</samp>,
<samp class="option">--lint-old</samp>,
<samp class="option">--load</samp>,
<samp class="option">--non-decimal-data</samp>,
<samp class="option">--optimize</samp>,
<samp class="option">--no-optimize</samp>,
<samp class="option">--posix</samp>,
<samp class="option">--pretty-print</samp>,
<samp class="option">--profile</samp>,
<samp class="option">--re-interval</samp>,
<samp class="option">--sandbox</samp>,
<samp class="option">--source</samp>,
<samp class="option">--traditional</samp>,
<samp class="option">--use-lc-numeric</samp>,
and
<samp class="option">--version</samp>
long options
(see <a class="pxref" href="#Options">Command-Line Options</a>).
</li></ul>


</li><li>Support for the following obsolete systems was removed from the code
and the documentation for <code class="command">gawk</code> version 4.0:

<ul class="itemize mark-minus">
<li>Amiga

</li><li>Atari

</li><li>BeOS

</li><li>Cray

</li><li>MIPS RiscOS

</li><li>MS-DOS with the Microsoft Compiler

</li><li>MS-Windows with the Microsoft Compiler

</li><li>NeXT

</li><li>SunOS 3.x, Sun 386 (Road Runner)

</li><li>Tandem (non-POSIX)

</li><li>Prestandard VAX C compiler for VAX/VMS

</li><li>GCC for Alpha has not been tested for a while.

</li></ul>

</li><li>Support for the following obsolete system was removed from the code
for <code class="command">gawk</code> version 4.1:

<ul class="itemize mark-minus">
<li>Ultrix
</li></ul>

</li><li>Support for the following systems was removed from the code
for <code class="command">gawk</code> version 4.2:

<ul class="itemize mark-minus">
<li>MirBSD

</li><li>GNU/Linux on Alpha
</li></ul>

</li><li>Support for the following systems was removed from the code
for <code class="command">gawk</code> version 5.2:


<ul class="itemize mark-minus">
<li>OS/2

</li><li>DJGPP

</li><li>VAX/VMS

</li></ul>

</li></ul>


<hr>
</div>
<div class="appendixsec-level-extent" id="Feature-History">
<div class="nav-panel">
<p>
Next: <a href="#Common-Extensions" accesskey="n" rel="next">Common Extensions Summary</a>, Previous: <a href="#POSIX_002fGNU" accesskey="p" rel="prev">Extensions in <code class="command">gawk</code> Not in POSIX <code class="command">awk</code></a>, Up: <a href="#Language-History" accesskey="u" rel="up">The Evolution of the <code class="command">awk</code> Language</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="History-of-gawk-Features"><span>A.6 History of <code class="command">gawk</code> Features<a class="copiable-link" href="#History-of-gawk-Features"> &para;</a></span></h3>



<p>This section describes the features in <code class="command">gawk</code>
over and above those in POSIX <code class="command">awk</code>,
in the order they were added to <code class="command">gawk</code>.
</p>
<p>Version 2.10 of <code class="command">gawk</code> introduced the following features:
</p>
<ul class="itemize mark-bullet">
<li><a class="index-entry-id" id="index-AWKPATH-environment-variable-7"></a>
<a class="index-entry-id" id="index-environment-variables-AWKPATH-7"></a>
</li><li>The <code class="env">AWKPATH</code> environment variable for specifying a path search for
the <samp class="option">-f</samp> command-line option
(see <a class="pxref" href="#Options">Command-Line Options</a>).

</li><li>The <code class="code">IGNORECASE</code> variable and its effects
(see <a class="pxref" href="#Case_002dsensitivity">Case Sensitivity in Matching</a>).

</li><li>The <samp class="file">/dev/stdin</samp>, <samp class="file">/dev/stdout</samp>, <samp class="file">/dev/stderr</samp> and
<samp class="file">/dev/fd/<var class="var">N</var></samp> special file names
(see <a class="pxref" href="#Special-Files">Special File names in <code class="command">gawk</code></a>).
</li></ul>

<p>Version 2.13 of <code class="command">gawk</code> introduced the following features:
</p>
<ul class="itemize mark-bullet">
<li>The <code class="code">FIELDWIDTHS</code> variable and its effects
(see <a class="pxref" href="#Constant-Size">Reading Fixed-Width Data</a>).

</li><li>The <code class="code">systime()</code> and <code class="code">strftime()</code> built-in functions for obtaining
and printing timestamps
(see <a class="pxref" href="#Time-Functions">Time Functions</a>).

</li><li>Additional command-line options
(see <a class="pxref" href="#Options">Command-Line Options</a>):

<ul class="itemize mark-minus">
<li>The <samp class="option">-W lint</samp> option to provide error and portability checking
for both the source code and at runtime.

</li><li>The <samp class="option">-W compat</samp> option to turn off the GNU extensions.

</li><li>The <samp class="option">-W posix</samp> option for full POSIX compliance.
</li></ul>
</li></ul>

<p>Version 2.14 of <code class="command">gawk</code> introduced the following feature:
</p>
<ul class="itemize mark-bullet">
<li>The <code class="code">next file</code> statement for skipping to the next data file
(see <a class="pxref" href="#Nextfile-Statement">The <code class="code">nextfile</code> Statement</a>).
</li></ul>

<p>Version 2.15 of <code class="command">gawk</code> introduced the following features:
</p>
<ul class="itemize mark-bullet">
<li>New variables (see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>):

<ul class="itemize mark-minus">
<li><code class="code">ARGIND</code>, which tracks the movement of <code class="code">FILENAME</code>
through <code class="code">ARGV</code>.

</li><li><code class="code">ERRNO</code>, which contains the system error message when
<code class="code">getline</code> returns &minus;1 or <code class="code">close()</code> fails.
</li></ul>

</li><li>The <samp class="file">/dev/pid</samp>, <samp class="file">/dev/ppid</samp>, <samp class="file">/dev/pgrpid</samp>, and
<samp class="file">/dev/user</samp> special file names. These have since been removed.

</li><li>The ability to delete all of an array at once with &lsquo;<samp class="samp">delete <var class="var">array</var></samp>&rsquo;
(see <a class="pxref" href="#Delete">The <code class="code">delete</code> Statement</a>).

</li><li>Command-line option changes
(see <a class="pxref" href="#Options">Command-Line Options</a>):

<ul class="itemize mark-minus">
<li>The ability to use GNU-style long-named options that start with <samp class="option">--</samp>.

</li><li>The <samp class="option">--source</samp> option for mixing command-line and library-file
source code.
</li></ul>
</li></ul>

<p>Version 3.0 of <code class="command">gawk</code> introduced the following features:
</p>
<ul class="itemize mark-bullet">
<li>New or changed variables:

<ul class="itemize mark-minus">
<li><code class="code">IGNORECASE</code> changed, now applying to string comparison as well
as regexp operations
(see <a class="pxref" href="#Case_002dsensitivity">Case Sensitivity in Matching</a>).

</li><li><code class="code">RT</code>, which contains the input text that matched <code class="code">RS</code>
(see <a class="pxref" href="#Records">How Input Is Split into Records</a>).
</li></ul>

</li><li>Full support for both POSIX and GNU regexps
(see <a class="pxref" href="#Regexp">Regular Expressions</a>).

</li><li>The <code class="code">gensub()</code> function for more powerful text manipulation
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).

</li><li>The <code class="code">strftime()</code> function acquired a default time format,
allowing it to be called with no arguments
(see <a class="pxref" href="#Time-Functions">Time Functions</a>).

</li><li>The ability for <code class="code">FS</code> and for the third
argument to <code class="code">split()</code> to be null strings
(see <a class="pxref" href="#Single-Character-Fields">Making Each Character a Separate Field</a>).

</li><li>The ability for <code class="code">RS</code> to be a regexp
(see <a class="pxref" href="#Records">How Input Is Split into Records</a>).

</li><li>The <code class="code">next file</code> statement became <code class="code">nextfile</code>
(see <a class="pxref" href="#Nextfile-Statement">The <code class="code">nextfile</code> Statement</a>).

</li><li>The <code class="code">fflush()</code> function from
BWK <code class="command">awk</code>
(then at Bell Laboratories;
see <a class="pxref" href="#I_002fO-Functions">Input/Output Functions</a>).

</li><li>New command-line options:

<ul class="itemize mark-minus">
<li>The <samp class="option">--lint-old</samp> option to
warn about constructs that are not available in
the original Version 7 Unix version of <code class="command">awk</code>
(see <a class="pxref" href="#V7_002fSVR3_002e1">Major Changes Between V7 and SVR3.1</a>).

</li><li>The <samp class="option">-m</samp> option from BWK <code class="command">awk</code>.  (Brian was
still at Bell Laboratories at the time.)  This was later removed from
both his <code class="command">awk</code> and from <code class="command">gawk</code>.

</li><li>The <samp class="option">--re-interval</samp> option to provide interval expressions in regexps
(see <a class="pxref" href="#Regexp-Operators">Regular Expression Operators</a>).

</li><li>The <samp class="option">--traditional</samp> option was added as a better name for
<samp class="option">--compat</samp> (see <a class="pxref" href="#Options">Command-Line Options</a>).
</li></ul>

</li><li>The use of GNU Autoconf to control the configuration process
(see <a class="pxref" href="#Quick-Installation">Compiling <code class="command">gawk</code> for Unix-Like Systems</a>).

</li><li>Amiga support.
This has since been removed.

</li></ul>

<p>Version 3.1 of <code class="command">gawk</code> introduced the following features:
</p>
<ul class="itemize mark-bullet">
<li>New variables
(see <a class="pxref" href="#Built_002din-Variables">Predefined Variables</a>):

<ul class="itemize mark-minus">
<li><code class="code">BINMODE</code>, for non-POSIX systems,
which allows binary I/O for input and/or output files
(see <a class="pxref" href="#PC-Using">Using <code class="command">gawk</code> on PC Operating Systems</a>).

</li><li><code class="code">LINT</code>, which dynamically controls lint warnings.

</li><li><code class="code">PROCINFO</code>, an array for providing process-related information.

</li><li><code class="code">TEXTDOMAIN</code>, for setting an application&rsquo;s internationalization text domain
(see <a class="pxref" href="#Internationalization">Internationalization with <code class="command">gawk</code></a>).
</li></ul>

</li><li>The ability to use octal and hexadecimal constants in <code class="command">awk</code>
program source code
(see <a class="pxref" href="#Nondecimal_002dnumbers">Octal and Hexadecimal Numbers</a>).

</li><li>The &lsquo;<samp class="samp">|&amp;</samp>&rsquo; operator for two-way I/O to a coprocess
(see <a class="pxref" href="#Two_002dway-I_002fO">Two-Way Communications with Another Process</a>).

</li><li>The <samp class="file">/inet</samp> special files for TCP/IP networking using &lsquo;<samp class="samp">|&amp;</samp>&rsquo;
(see <a class="pxref" href="#TCP_002fIP-Networking">Using <code class="command">gawk</code> for Network Programming</a>).

</li><li>The optional second argument to <code class="code">close()</code> that allows closing one end
of a two-way pipe to a coprocess
(see <a class="pxref" href="#Two_002dway-I_002fO">Two-Way Communications with Another Process</a>).

</li><li>The optional third argument to the <code class="code">match()</code> function
for capturing text-matching subexpressions within a regexp
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).

</li><li>Positional specifiers in <code class="code">printf</code> formats for
making translations easier
(see <a class="pxref" href="#Printf-Ordering">Rearranging <code class="code">printf</code> Arguments</a>).

</li><li>A number of new built-in functions:

<ul class="itemize mark-minus">
<li>The <code class="code">asort()</code> and <code class="code">asorti()</code> functions for sorting arrays
(see <a class="pxref" href="#Array-Sorting">Controlling Array Traversal and Array Sorting</a>).

</li><li>The <code class="code">bindtextdomain()</code>, <code class="code">dcgettext()</code> and <code class="code">dcngettext()</code> functions
for internationalization
(see <a class="pxref" href="#Programmer-i18n">Internationalizing <code class="command">awk</code> Programs</a>).

</li><li>The <code class="code">extension()</code> function and the ability to add
new built-in functions dynamically. This has seen removed.
It was replaced by the new extension mechanism.
See <a class="xref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>.

</li><li>The <code class="code">mktime()</code> function for creating timestamps
(see <a class="pxref" href="#Time-Functions">Time Functions</a>).

</li><li>The <code class="code">and()</code>, <code class="code">or()</code>, <code class="code">xor()</code>, <code class="code">compl()</code>,
<code class="code">lshift()</code>, <code class="code">rshift()</code>, and <code class="code">strtonum()</code> functions
(see <a class="pxref" href="#Bitwise-Functions">Bit-Manipulation Functions</a>).
</li></ul>

</li><li><a class="index-entry-id" id="index-next-file-statement"></a>
The support for &lsquo;<samp class="samp">next file</samp>&rsquo; as two words was removed completely
(see <a class="pxref" href="#Nextfile-Statement">The <code class="code">nextfile</code> Statement</a>).

</li><li>Additional command-line options
(see <a class="pxref" href="#Options">Command-Line Options</a>):

<ul class="itemize mark-minus">
<li>The <samp class="option">--dump-variables</samp> option to print a list of all global variables.

</li><li>The <samp class="option">--exec</samp> option, for use in CGI scripts.

</li><li>The <samp class="option">--gen-po</samp> command-line option and the use of a leading
underscore to mark strings that should be translated
(see <a class="pxref" href="#String-Extraction">Extracting Marked Strings</a>).

</li><li>The <samp class="option">--non-decimal-data</samp> option to allow non-decimal
input data
(see <a class="pxref" href="#Nondecimal-Data">Allowing Nondecimal Input Data</a>).

</li><li>The <samp class="option">--profile</samp> option and <code class="command">pgawk</code>, the
profiling version of <code class="command">gawk</code>, for producing execution
profiles of <code class="command">awk</code> programs
(see <a class="pxref" href="#Profiling">Profiling Your <code class="command">awk</code> Programs</a>).

</li><li>The <samp class="option">--use-lc-numeric</samp> option to force <code class="command">gawk</code>
to use the locale&rsquo;s decimal point for parsing input data
(see <a class="pxref" href="#Conversion">Conversion of Strings and Numbers</a>).
</li></ul>

</li><li>The use of GNU Automake to help in standardizing the configuration process
(see <a class="pxref" href="#Quick-Installation">Compiling <code class="command">gawk</code> for Unix-Like Systems</a>).

</li><li>The use of GNU <code class="command">gettext</code> for <code class="command">gawk</code>&rsquo;s own message output
(see <a class="pxref" href="#Gawk-I18N"><code class="command">gawk</code> Can Speak Your Language</a>).

</li><li>BeOS support. This was later removed.

</li><li>Tandem support. This was later removed.

</li><li>The Atari port became officially unsupported and was
later removed entirely.

</li><li>The source code changed to use ISO C standard-style function definitions.

</li><li>POSIX compliance for <code class="code">sub()</code> and <code class="code">gsub()</code>
(see <a class="pxref" href="#Gory-Details">More about &lsquo;<samp class="samp">\</samp>&rsquo; and &lsquo;<samp class="samp">&amp;</samp>&rsquo; with <code class="code">sub()</code>, <code class="code">gsub()</code>, and <code class="code">gensub()</code></a>).

</li><li>The <code class="code">length()</code> function was extended to accept an array argument
and return the number of elements in the array
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).

</li><li>The <code class="code">strftime()</code> function acquired a third argument to
enable printing times as UTC
(see <a class="pxref" href="#Time-Functions">Time Functions</a>).
</li></ul>

<p>Version 4.0 of <code class="command">gawk</code> introduced the following features:
</p>
<ul class="itemize mark-bullet">
<li>Variable additions:

<ul class="itemize mark-minus">
<li><code class="code">FPAT</code>, which allows you to specify a regexp that matches
the fields, instead of matching the field separator
(see <a class="pxref" href="#Splitting-By-Content">Defining Fields by Content</a>).

</li><li>If <code class="code">PROCINFO[&quot;sorted_in&quot;]</code> exists, &lsquo;<samp class="samp">for (iggy in foo)</samp>&rsquo; loops sort the
indices before looping over them.  The value of this element
provides control over how the indices are sorted before the loop
traversal starts
(see <a class="pxref" href="#Controlling-Scanning">Using Predefined Array Scanning Orders with <code class="command">gawk</code></a>).

</li><li><code class="code">PROCINFO[&quot;strftime&quot;]</code>, which holds
the default format for <code class="code">strftime()</code>
(see <a class="pxref" href="#Time-Functions">Time Functions</a>).
</li></ul>

</li><li>The special files <samp class="file">/dev/pid</samp>, <samp class="file">/dev/ppid</samp>, <samp class="file">/dev/pgrpid</samp>
and <samp class="file">/dev/user</samp> were removed.

</li><li>Support for IPv6 was added via the <samp class="file">/inet6</samp> special file.
<samp class="file">/inet4</samp> forces IPv4 and <samp class="file">/inet</samp> chooses the system
default, which is probably IPv4
(see <a class="pxref" href="#TCP_002fIP-Networking">Using <code class="command">gawk</code> for Network Programming</a>).

</li><li>The use of &lsquo;<samp class="samp">\s</samp>&rsquo; and &lsquo;<samp class="samp">\S</samp>&rsquo; escape sequences in regular expressions
(see <a class="pxref" href="#GNU-Regexp-Operators"><code class="command">gawk</code>-Specific Regexp Operators</a>).

</li><li>Interval expressions became part of default regular expressions
(see <a class="pxref" href="#Regexp-Operators">Regular Expression Operators</a>).

</li><li>POSIX character classes work even with <samp class="option">--traditional</samp>
(see <a class="pxref" href="#Regexp-Operators">Regular Expression Operators</a>).

</li><li><code class="code">break</code> and <code class="code">continue</code> became invalid outside a loop,
even with <samp class="option">--traditional</samp>
(see <a class="pxref" href="#Break-Statement">The <code class="code">break</code> Statement</a>, and also see
<a class="ref" href="#Continue-Statement">The <code class="code">continue</code> Statement</a>).

</li><li><code class="code">fflush()</code>, <code class="code">nextfile</code>, and &lsquo;<samp class="samp">delete <var class="var">array</var></samp>&rsquo;
are allowed if <samp class="option">--posix</samp> or <samp class="option">--traditional</samp>, since they
are all now part of POSIX.

</li><li>An optional third argument to
<code class="code">asort()</code> and <code class="code">asorti()</code>, specifying how to sort
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).

</li><li>The behavior of <code class="code">fflush()</code> changed to match BWK <code class="command">awk</code>
and for POSIX; now both &lsquo;<samp class="samp">fflush()</samp>&rsquo; and &lsquo;<samp class="samp">fflush(&quot;&quot;)</samp>&rsquo;
flush all open output redirections
(see <a class="pxref" href="#I_002fO-Functions">Input/Output Functions</a>).

</li><li>The <code class="code">isarray()</code>
function which distinguishes if an item is an array
or not, to make it possible to traverse arrays of arrays
(see <a class="pxref" href="#Type-Functions">Getting Type Information</a>).

</li><li>The <code class="code">patsplit()</code>
function which gives the same capability as <code class="code">FPAT</code>, for splitting
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).

</li><li>An optional fourth argument to the <code class="code">split()</code> function,
which is an array to hold the values of the separators
(see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).

</li><li>Arrays of arrays
(see <a class="pxref" href="#Arrays-of-Arrays">Arrays of Arrays</a>).

</li><li>The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> special patterns
(see <a class="pxref" href="#BEGINFILE_002fENDFILE">The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a>).

</li><li>Indirect function calls
(see <a class="pxref" href="#Indirect-Calls">Indirect Function Calls</a>).

</li><li><code class="code">switch</code> / <code class="code">case</code> are enabled by default
(see <a class="pxref" href="#Switch-Statement">The <code class="code">switch</code> Statement</a>).

</li><li>Command-line option changes
(see <a class="pxref" href="#Options">Command-Line Options</a>):

<ul class="itemize mark-minus">
<li>The <samp class="option">-b</samp> and <samp class="option">--characters-as-bytes</samp> options
which prevent <code class="command">gawk</code> from treating input as a multibyte string.

</li><li>The redundant <samp class="option">--compat</samp>, <samp class="option">--copyleft</samp>, and <samp class="option">--usage</samp>
long options were removed.

</li><li>The <samp class="option">--gen-po</samp> option was finally renamed to the correct <samp class="option">--gen-pot</samp>.

</li><li>The <samp class="option">--sandbox</samp> option which disables certain features.

</li><li>All long options acquired corresponding short options, for use in &lsquo;<samp class="samp">#!</samp>&rsquo; scripts.
</li></ul>

</li><li>Directories named on the command line now produce a warning, not a fatal
error, unless <samp class="option">--posix</samp> or <samp class="option">--traditional</samp> are used
(see <a class="pxref" href="#Command_002dline-directories">Directories on the Command Line</a>).

</li><li>The <code class="command">gawk</code> internals were rewritten, bringing the <code class="command">dgawk</code>
debugger and possibly improved performance
(see <a class="pxref" href="#Debugger">Debugging <code class="command">awk</code> Programs</a>).

</li><li>Per the GNU Coding Standards, dynamic extensions must now define
a global symbol indicating that they are GPL-compatible
(see <a class="pxref" href="#Plugin-License">Extension Licensing</a>).

</li><li><a class="index-entry-id" id="index-POSIX-mode-13"></a>
In POSIX mode, string comparisons use <code class="code">strcoll()</code> / <code class="code">wcscoll()</code>
(see <a class="pxref" href="#POSIX-String-Comparison">String Comparison Based on Locale Collating Order</a>).

</li><li>The option for raw sockets was removed, since it was never implemented
(see <a class="pxref" href="#TCP_002fIP-Networking">Using <code class="command">gawk</code> for Network Programming</a>).

</li><li>Ranges of the form &lsquo;<samp class="samp">[d-h]</samp>&rsquo; are treated as if they were in the
C locale, no matter what kind of regexp is being used, and even if
<samp class="option">--posix</samp>
(see <a class="pxref" href="#Ranges-and-Locales">Regexp Ranges and Locales: A Long Sad Story</a>).

</li><li>Support was removed for the following systems:

<ul class="itemize mark-minus">
<li>Atari

</li><li>Amiga

</li><li>BeOS

</li><li>Cray

</li><li>MIPS RiscOS

</li><li>MS-DOS with the Microsoft Compiler

</li><li>MS-Windows with the Microsoft Compiler

</li><li>NeXT

</li><li>SunOS 3.x, Sun 386 (Road Runner)

</li><li>Tandem (non-POSIX)

</li><li>Prestandard VAX C compiler for VAX/VMS
</li></ul>
</li></ul>

<p>Version 4.1 of <code class="command">gawk</code> introduced the following features:
</p>
<ul class="itemize mark-bullet">
<li>Three new arrays:
<code class="code">SYMTAB</code>, <code class="code">FUNCTAB</code>, and <code class="code">PROCINFO[&quot;identifiers&quot;]</code>
(see <a class="pxref" href="#Auto_002dset">Built-in Variables That Convey Information</a>).

</li><li>The three executables <code class="command">gawk</code>, <code class="command">pgawk</code>, and <code class="command">dgawk</code>, were merged into
one, named just <code class="command">gawk</code>.  As a result the command-line options changed.

</li><li>Command-line option changes
(see <a class="pxref" href="#Options">Command-Line Options</a>):

<ul class="itemize mark-minus">
<li>The <samp class="option">-D</samp> option invokes the debugger.

</li><li>The <samp class="option">-i</samp> and <samp class="option">--include</samp> options
load <code class="command">awk</code> library files.

</li><li>The <samp class="option">-l</samp> and <samp class="option">--load</samp> options load compiled dynamic extensions.

</li><li>The <samp class="option">-M</samp> and <samp class="option">--bignum</samp> options enable MPFR.

</li><li>The <samp class="option">-o</samp> option only does pretty-printing.

</li><li>The <samp class="option">-p</samp> option is used for profiling.

</li><li>The <samp class="option">-R</samp> option was removed.
</li></ul>

</li><li>Support for high precision arithmetic with MPFR
(see <a class="pxref" href="#Arbitrary-Precision-Arithmetic">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a>).

</li><li>The <code class="code">and()</code>, <code class="code">or()</code> and <code class="code">xor()</code> functions
changed to allow any number of arguments,
with a minimum of two
(see <a class="pxref" href="#Bitwise-Functions">Bit-Manipulation Functions</a>).

</li><li>The dynamic extension interface was completely redone
(see <a class="pxref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>).

</li><li>Redirected <code class="code">getline</code> became allowed inside
<code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code>
(see <a class="pxref" href="#BEGINFILE_002fENDFILE">The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a>).

</li><li>Support for nonfatal I/O
(see <a class="pxref" href="#Nonfatal">Enabling Nonfatal Output</a>).

</li><li>The <code class="code">where</code> command was added to the debugger
(see <a class="pxref" href="#Execution-Stack">Working with the Stack</a>).

</li><li>Support for Ultrix was removed.

</li></ul>

<p>Version 4.2 of <code class="command">gawk</code> introduced the following changes:
</p>
<ul class="itemize mark-bullet">
<li>Changes to <code class="code">ENVIRON</code> are reflected into <code class="command">gawk</code>&rsquo;s
environment and that of programs that it runs.
See <a class="xref" href="#Auto_002dset">Built-in Variables That Convey Information</a>.

</li><li><code class="code">FIELDWIDTHS</code> was enhanced to allow skipping characters
before assigning a value to a field
(see <a class="pxref" href="#Splitting-By-Content">Defining Fields by Content</a>).

</li><li>The <code class="code">PROCINFO[&quot;argv&quot;]</code> array.
See <a class="xref" href="#Auto_002dset">Built-in Variables That Convey Information</a>.

</li><li>The maximum number of hexadecimal digits in &lsquo;<samp class="samp">\x</samp>&rsquo; escapes
is now two.
See <a class="xref" href="#Escape-Sequences">Escape Sequences</a>.

</li><li>Strongly typed regexp constants of the form &lsquo;<samp class="samp">@/&hellip;/</samp>&rsquo;
(see <a class="pxref" href="#Strong-Regexp-Constants">Strongly Typed Regexp Constants</a>).

</li><li>The bitwise functions changed, making negative arguments into
a fatal error (see <a class="pxref" href="#Bitwise-Functions">Bit-Manipulation Functions</a>).


</li><li>The <code class="code">mktime()</code> function now accepts an optional
second argument
(see <a class="pxref" href="#Time-Functions">Time Functions</a>).

</li><li>The <code class="code">typeof()</code> function (see <a class="pxref" href="#Type-Functions">Getting Type Information</a>).

</li><li>Optimizations are enabled by default. Use <samp class="option">-s</samp> /
<samp class="option">--no-optimize</samp> to disable optimizations.

</li><li>For many years, POSIX specified that default field splitting
only allowed spaces and tabs to separate fields, and this was
how <code class="command">gawk</code> behaved with <samp class="option">--posix</samp>. As of 2013,
the standard restored historical behavior, and now default
field splitting with <samp class="option">--posix</samp> also allows newlines to
separate fields.

</li><li>Nonfatal output with <code class="code">print</code> and <code class="code">printf</code>.
See <a class="xref" href="#Nonfatal">Enabling Nonfatal Output</a>.

</li><li>Retryable I/O via <code class="code">PROCINFO[<var class="var">input-file</var>, &quot;RETRY&quot;]</code>;
(see <a class="pxref" href="#Retrying-Input">Retrying Reads After Certain Input Errors</a>).

</li><li>Changes to the pretty-printer (see <a class="pxref" href="#Profiling">Profiling Your <code class="command">awk</code> Programs</a>):

<ul class="itemize mark-minus">
<li>The <samp class="option">--pretty-print</samp> option no longer runs the <code class="command">awk</code>
program too.

</li><li>Comments in the source program are preserved and placed into the
output file.

</li><li>Explicit parentheses for expressions
in the input are preserved in the generated output.
</li></ul>

</li><li>Improvements to the extension API
(see <a class="pxref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>):

<ul class="itemize mark-minus">
<li>The <code class="code">get_file()</code> function to access open redirections.

</li><li>The <code class="code">nonfatal()</code> function for generating nonfatal error messages.

</li><li>Support for GMP and MPFR values.

</li><li>Input parsers can now override the default field parsing mechanism
by specifying explicit locations.
</li></ul>

</li><li>Shell startup files are supplied with the distribution and
installed by &lsquo;<samp class="samp">make install</samp>&rsquo; (see <a class="pxref" href="#Shell-Startup-Files">Shell Startup Files</a>).

</li><li>The <code class="command">igawk</code> program and its manual page are no longer
installed when <code class="command">gawk</code> is built.
See <a class="xref" href="#Igawk-Program">An Easy Way to Use Library Functions</a>.

</li><li>Support for MirBSD was removed.

</li><li>Support for GNU/Linux on Alpha was removed.

</li></ul>

<p>Version 5.0 added the following features:
</p>
<ul class="itemize mark-bullet">
<li>The <code class="code">PROCINFO[&quot;platform&quot;]</code> array element, which allows you
to write code that takes the operating system / platform into account.
</li></ul>

<p>Version 5.1 was created to release <code class="command">gawk</code> with a correct
major version number for the API. This was overlooked for version 5.0,
unfortunately. It added the following features:
</p>
<ul class="itemize mark-bullet">
<li>The index for this manual was completely reworked.

</li><li>Support was added for MSYS2.

</li><li><code class="code">asort()</code> and <code class="code">asorti()</code> were changed to
allow <code class="code">FUNCTAB</code> and <code class="code">SYMTAB</code> as the first argument if a
second destination array is supplied (see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).

</li><li>The <samp class="option">-I</samp>/<samp class="option">--trace</samp> options were added to
print a trace of the byte codes as they execute (see <a class="pxref" href="#Options">Command-Line Options</a>).

</li><li><code class="code">$0</code> and the fields are now cleared before starting a
<code class="code">BEGINFILE</code> rule (see <a class="pxref" href="#BEGINFILE_002fENDFILE">The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a>).

</li><li>Several example programs in the manual were updated to their modern
POSIX equivalents.

</li><li>The &ldquo;no effect&rdquo; lint warnings from <samp class="option">--lint</samp> were fixed up
and now behave more sanely (see <a class="pxref" href="#Options">Command-Line Options</a>).

</li><li>Handling of Infinity and NaN values were improved.
See <a class="xref" href="#Math-Definitions">Other Stuff to Know</a>, and also see
<a class="ref" href="#POSIX-Floating-Point-Problems">Standards Versus Existing Practice</a>.
</li></ul>

<p>Version 5.2 added the following features:
</p>
<ul class="itemize mark-bullet">
<li>The <code class="code">mkbool()</code> built-in function
(see <a class="pxref" href="#Boolean-Functions">Generating Boolean Values</a>).

</li><li>Interval expressions in regular expressions are
enabled by default (see <a class="pxref" href="#Interval-Expressions">Some Notes On Interval Expressions</a>).

</li><li>Support for the FNV1-A hash algorithm for its hash function
(see <a class="pxref" href="#Other-Environment-Variables">Other Environment Variables</a>).

</li><li>The <code class="command">gawkbug</code> script for reporting bugs
(see <a class="pxref" href="#Bug-address">Submitting Bug Reports</a>).

</li><li><a class="index-entry-id" id="index-Kelly_002c-Terence-2"></a>
Terence Kelly&rsquo;s persistent memory allocator (PMA) was
added, allowing the use of persistent data on certain systems
(see <a class="pxref" href="#Persistent-Memory">Preserving Data Between Runs</a>).

</li><li><code class="code">PROCINFO[&quot;pma&quot;]</code> exists if the PMA allocator is compiled
in (see <a class="pxref" href="#Auto_002dset">Built-in Variables That Convey Information</a>).

</li></ul>

<p>Version 5.3 added the following features:
</p>
<ul class="itemize mark-bullet">
<li>Comma separated value (CSV) field splitting and the <samp class="option">--csv</samp>
command-line option
(see <a class="pxref" href="#Comma-Separated-Fields">Working With Comma Separated Value Files</a>).

</li><li><code class="code">PROCINFO[&quot;CSV&quot;]</code> exists if <code class="command">gawk</code> was invoked
with <samp class="option">--csv</samp> (see <a class="pxref" href="#Auto_002dset">Built-in Variables That Convey Information</a>).

</li><li>The <code class="code">do_csv</code> API information variable
(see <a class="pxref" href="#Extension-API-Informational-Variables">Informational Variables</a>).

</li><li>The ability to make <code class="command">gawk</code> buffer output to pipes
(see <a class="pxref" href="#Noflush">Speeding Up Pipe Output</a>).

</li><li>The &lsquo;<samp class="samp">\u</samp>&rsquo; escape sequence
(see <a class="pxref" href="#Escape-Sequences">Escape Sequences</a>).

</li><li>The need for GNU <code class="code">libsigsegv</code> was removed from <code class="command">gawk</code>.
The value-add was never very much and it caused problems in some
environments.

</li></ul>


<hr>
</div>
<div class="appendixsec-level-extent" id="Common-Extensions">
<div class="nav-panel">
<p>
Next: <a href="#Ranges-and-Locales" accesskey="n" rel="next">Regexp Ranges and Locales: A Long Sad Story</a>, Previous: <a href="#Feature-History" accesskey="p" rel="prev">History of <code class="command">gawk</code> Features</a>, Up: <a href="#Language-History" accesskey="u" rel="up">The Evolution of the <code class="command">awk</code> Language</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Common-Extensions-Summary"><span>A.7 Common Extensions Summary<a class="copiable-link" href="#Common-Extensions-Summary"> &para;</a></span></h3>

<a class="index-entry-id" id="index-extensions-Brian-Kernighan_0027s-awk-1"></a>
<a class="index-entry-id" id="index-extensions-mawk"></a>
<p>The following table summarizes the common extensions supported
by <code class="command">gawk</code>, Brian Kernighan&rsquo;s <code class="command">awk</code>, and <code class="command">mawk</code>,
the three most widely used freely available versions of <code class="command">awk</code>
(see <a class="pxref" href="#Other-Versions">Other Freely Available <code class="command">awk</code> Implementations</a>).
</p>
<table class="multitable">
<thead><tr><th>Feature</th><th>BWK <code class="command">awk</code></th><th><code class="command">mawk</code></th><th><code class="command">gawk</code></th><th>Now standard</th></tr></thead>
<tbody><tr><td><code class="code">**</code> and <code class="code">**=</code> operators</td><td>X</td><td></td><td>X</td><td></td></tr>
<tr><td>&lsquo;<samp class="samp">\x</samp>&rsquo; escape sequence</td><td>X</td><td>X</td><td>X</td><td></td></tr>
<tr><td>&lsquo;<samp class="samp">\u</samp>&rsquo; escape sequence</td><td>X</td><td></td><td>X</td><td></td></tr>
<tr><td><samp class="file">/dev/stdin</samp> special file</td><td>X</td><td>X</td><td>X</td><td></td></tr>
<tr><td><samp class="file">/dev/stdout</samp> special file</td><td>X</td><td>X</td><td>X</td><td></td></tr>
<tr><td><samp class="file">/dev/stderr</samp> special file</td><td>X</td><td>X</td><td>X</td><td></td></tr>
<tr><td><code class="code">BINMODE</code> variable</td><td></td><td>X</td><td>X</td><td></td></tr>
<tr><td>CSV support</td><td>X</td><td></td><td>X</td><td></td></tr>
<tr><td><code class="code">FS</code> as null string</td><td>X</td><td>X</td><td>X</td><td></td></tr>
<tr><td><code class="code">delete</code> without subscript</td><td>X</td><td>X</td><td>X</td><td>X</td></tr>
<tr><td><code class="code">fflush()</code> function</td><td>X</td><td>X</td><td>X</td><td>X</td></tr>
<tr><td><code class="code">func</code> keyword</td><td>X</td><td></td><td>X</td><td></td></tr>
<tr><td><code class="code">length()</code> of an array</td><td>X</td><td>X</td><td>X</td><td></td></tr>
<tr><td><code class="code">nextfile</code> statement</td><td>X</td><td>X</td><td>X</td><td>X</td></tr>
<tr><td><code class="code">RS</code> as regexp</td><td>X</td><td>X</td><td>X</td><td></td></tr>
<tr><td>Time-related functions</td><td></td><td>X</td><td>X</td><td></td></tr>
</tbody>
</table>

<hr>
</div>
<div class="appendixsec-level-extent" id="Ranges-and-Locales">
<div class="nav-panel">
<p>
Next: <a href="#Contributors" accesskey="n" rel="next">Major Contributors to <code class="command">gawk</code></a>, Previous: <a href="#Common-Extensions" accesskey="p" rel="prev">Common Extensions Summary</a>, Up: <a href="#Language-History" accesskey="u" rel="up">The Evolution of the <code class="command">awk</code> Language</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Regexp-Ranges-and-Locales_003a-A-Long-Sad-Story"><span>A.8 Regexp Ranges and Locales: A Long Sad Story<a class="copiable-link" href="#Regexp-Ranges-and-Locales_003a-A-Long-Sad-Story"> &para;</a></span></h3>

<p>This section describes the confusing history of ranges within
regular expressions and their interactions with locales, and how this
affected different versions of <code class="command">gawk</code>.
</p>
<a class="index-entry-id" id="index-ASCII-6"></a>
<a class="index-entry-id" id="index-EBCDIC-1"></a>
<p>The original Unix tools that worked with regular expressions defined
character ranges (such as &lsquo;<samp class="samp">[a-z]</samp>&rsquo;) to match any character between
the first character in the range and the last character in the range,
inclusive.  Ordering was based on the numeric value of each character
in the machine&rsquo;s native character set.  Thus, on ASCII-based systems,
&lsquo;<samp class="samp">[a-z]</samp>&rsquo; matched all the lowercase letters, and only the lowercase
letters, as the numeric values for the letters from &lsquo;<samp class="samp">a</samp>&rsquo; through
&lsquo;<samp class="samp">z</samp>&rsquo; were contiguous.  (On an EBCDIC system, the range &lsquo;<samp class="samp">[a-z]</samp>&rsquo;
includes additional nonalphabetic characters as well.)
</p>
<p>Almost all introductory Unix literature explained range expressions
as working in this fashion, and in particular, would teach that the
&ldquo;correct&rdquo; way to match lowercase letters was with &lsquo;<samp class="samp">[a-z]</samp>&rsquo;, and
that &lsquo;<samp class="samp">[A-Z]</samp>&rsquo; was the &ldquo;correct&rdquo; way to match uppercase letters.
And indeed, this was true.<a class="footnote" id="DOCF116" href="#FOOT116"><sup>116</sup></a>
</p>
<p>The 1992 POSIX standard introduced the idea of locales (see <a class="pxref" href="#Locales">Where You Are Makes a Difference</a>).
Because many locales include other letters besides the plain 26
letters of the English alphabet, the POSIX standard added
character classes (see <a class="pxref" href="#Bracket-Expressions">Using Bracket Expressions</a>) as a way to match
different kinds of characters besides the traditional ones in the ASCII
character set.
</p>
<p>However, the standard <em class="emph">changed</em> the interpretation of range expressions.
In the <code class="code">&quot;C&quot;</code> and <code class="code">&quot;POSIX&quot;</code> locales, a range expression like
&lsquo;<samp class="samp">[a-dx-z]</samp>&rsquo; is still equivalent to &lsquo;<samp class="samp">[abcdxyz]</samp>&rsquo;, as in ASCII.
But outside those locales, the ordering was defined to be based on
<em class="dfn">collation order</em>.
</p>
<p>What does that mean?
In many locales, &lsquo;<samp class="samp">A</samp>&rsquo; and &lsquo;<samp class="samp">a</samp>&rsquo; are both less than &lsquo;<samp class="samp">B</samp>&rsquo;.
In other words, these locales sort characters in dictionary order,
and &lsquo;<samp class="samp">[a-dx-z]</samp>&rsquo; is typically not equivalent to &lsquo;<samp class="samp">[abcdxyz]</samp>&rsquo;;
instead, it might be equivalent to &lsquo;<samp class="samp">[ABCXYabcdxyz]</samp>&rsquo;, for example.
</p>
<p>This point needs to be emphasized: much literature teaches that you should
use &lsquo;<samp class="samp">[a-z]</samp>&rsquo; to match a lowercase character.  But on systems with
non-ASCII locales, this also matches all of the uppercase characters
except &lsquo;<samp class="samp">A</samp>&rsquo; or &lsquo;<samp class="samp">Z</samp>&rsquo;!  This was a continuous cause of confusion, even well
into the twenty-first century.
</p>
<p>To demonstrate these issues, the following example uses the <code class="code">sub()</code>
function, which does text replacement (see <a class="pxref" href="#String-Functions">String-Manipulation Functions</a>).  Here,
the intent is to remove trailing uppercase characters:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo something1234abc | gawk-3.1.8 '{ sub(&quot;[A-Z]*$&quot;, &quot;&quot;); print }'</kbd>
-| something1234a
</pre></div>

<p>This output is unexpected, as the &lsquo;<samp class="samp">bc</samp>&rsquo; at the end of
&lsquo;<samp class="samp">something1234abc</samp>&rsquo; should not normally match &lsquo;<samp class="samp">[A-Z]*</samp>&rsquo;.
This result is due to the locale setting (and thus you may not see
it on your system).
</p>
<a class="index-entry-id" id="index-Unicode-1"></a>
<a class="index-entry-id" id="index-ASCII-7"></a>
<p>Similar considerations apply to other ranges.  For example, &lsquo;<samp class="samp">[&quot;-/]</samp>&rsquo;
is perfectly valid in ASCII, but is not valid in many Unicode locales,
such as <code class="code">en_US.UTF-8</code>.
</p>
<p>Early versions of <code class="command">gawk</code> used regexp matching code that was not
locale-aware, so ranges had their traditional interpretation.
</p>
<p>When <code class="command">gawk</code> switched to using locale-aware regexp matchers,
the problems began; especially as both GNU/Linux and commercial Unix
vendors started implementing non-ASCII locales, <em class="emph">and making them
the default</em>.  Perhaps the most frequently asked question became something
like, &ldquo;Why does &lsquo;<samp class="samp">[A-Z]</samp>&rsquo; match lowercase letters?!?&rdquo;
</p>
<a class="index-entry-id" id="index-Berry_002c-Karl-2"></a>
<p>This situation existed for close to 10 years, if not more, and
the <code class="command">gawk</code> maintainer grew weary of trying to explain that
<code class="command">gawk</code> was being nicely standards-compliant, and that the issue
was in the user&rsquo;s locale.  During the development of version 4.0,
he modified <code class="command">gawk</code> to always treat ranges in the original,
pre-POSIX fashion, unless <samp class="option">--posix</samp> was used (see <a class="pxref" href="#Options">Command-Line Options</a>).<a class="footnote" id="DOCF117" href="#FOOT117"><sup>117</sup></a>
</p>
<p>Fortunately, shortly before the final release of <code class="command">gawk</code> 4.0,
the maintainer learned that the 2008 standard had changed the
definition of ranges, such that outside the <code class="code">&quot;C&quot;</code> and <code class="code">&quot;POSIX&quot;</code>
locales, the meaning of range expressions was <em class="emph">undefined</em>.<a class="footnote" id="DOCF118" href="#FOOT118"><sup>118</sup></a>
</p>
<p>By using this lovely technical term, the standard gives license
to implementers to implement ranges in whatever way they choose.
The <code class="command">gawk</code> maintainer chose to apply the pre-POSIX meaning
both with the default regexp matching and when <samp class="option">--traditional</samp> or
<samp class="option">--posix</samp> are used.
In all cases <code class="command">gawk</code> remains POSIX-compliant.
</p>
<hr>
</div>
<div class="appendixsec-level-extent" id="Contributors">
<div class="nav-panel">
<p>
Next: <a href="#History-summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Ranges-and-Locales" accesskey="p" rel="prev">Regexp Ranges and Locales: A Long Sad Story</a>, Up: <a href="#Language-History" accesskey="u" rel="up">The Evolution of the <code class="command">awk</code> Language</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Major-Contributors-to-gawk"><span>A.9 Major Contributors to <code class="command">gawk</code><a class="copiable-link" href="#Major-Contributors-to-gawk"> &para;</a></span></h3>
<a class="index-entry-id" id="index-gawk-list-of-contributors-to"></a>
<blockquote class="quotation">
<p><i class="i">Always give credit where credit is due.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Anonymous</em>
</div>
<p>This section names the major contributors to <code class="command">gawk</code>
and/or this Web page, in approximate chronological order:
</p>
<ul class="itemize mark-bullet">
<li><a class="index-entry-id" id="index-Aho_002c-Alfred-1"></a>
<a class="index-entry-id" id="index-Weinberger_002c-Peter-1"></a>
<a class="index-entry-id" id="index-Kernighan_002c-Brian-3"></a>
Dr. Alfred V. Aho,
Dr. Peter J. Weinberger, and
Dr. Brian W. Kernighan, all of Bell Laboratories,
designed and implemented Unix <code class="command">awk</code>,
from which <code class="command">gawk</code> gets the majority of its feature set.

</li><li><a class="index-entry-id" id="index-Rubin_002c-Paul-1"></a>
Paul Rubin
did the initial design and implementation in 1986, and wrote
the first draft (around 40 pages) of this Web page.

</li><li><a class="index-entry-id" id="index-Fenlason_002c-Jay-1"></a>
Jay Fenlason
finished the initial implementation.

</li><li><a class="index-entry-id" id="index-Close_002c-Diane-1"></a>
Diane Close
revised the first draft of this Web page, bringing it
to around 90 pages.

</li><li><a class="index-entry-id" id="index-Stallman_002c-Richard-2"></a>
Richard Stallman
helped finish the implementation and the initial draft of this
Web page.
He is also the founder of the FSF and the GNU Project.

</li><li><a class="index-entry-id" id="index-Woods_002c-John"></a>
John Woods
contributed parts of the code (mostly fixes) in
the initial version of <code class="command">gawk</code>.

</li><li><a class="index-entry-id" id="index-Trueman_002c-David-2"></a>
In 1988,
David Trueman
took over primary maintenance of <code class="command">gawk</code>,
making it compatible with &ldquo;new&rdquo; <code class="command">awk</code>, and
greatly improving its performance.

</li><li><a class="index-entry-id" id="index-Kwok_002c-Conrad"></a>
<a class="index-entry-id" id="index-Garfinkle_002c-Scott"></a>
<a class="index-entry-id" id="index-Williams_002c-Kent"></a>
Conrad Kwok,
Scott Garfinkle,
and
Kent Williams
did the initial ports to MS-DOS with various versions of MSC.

</li><li><a class="index-entry-id" id="index-Rankin_002c-Pat-2"></a>
Pat Rankin
provided the VMS port and its documentation.

</li><li><a class="index-entry-id" id="index-Peterson_002c-Hal"></a>
Hal Peterson
provided help in porting <code class="command">gawk</code> to Cray systems.
(This is no longer supported.)

</li><li><a class="index-entry-id" id="index-Rommel_002c-Kai-Uwe"></a>
Kai Uwe Rommel
provided the initial port to OS/2 and its documentation.

</li><li><a class="index-entry-id" id="index-Jaegermann_002c-Michal-1"></a>
Michal Jaegermann
provided the port to Atari systems and its documentation.
(This port is no longer supported.)
He continues to provide portability checking,
and has done a lot of work to make sure <code class="command">gawk</code>
works on non-32-bit systems.

</li><li><a class="index-entry-id" id="index-Fish_002c-Fred"></a>
Fred Fish
provided the port to Amiga systems and its documentation.
(With Fred&rsquo;s sad passing, this is no longer supported.)

</li><li><a class="index-entry-id" id="index-Deifik_002c-Scott-1"></a>
Scott Deifik
formerly maintained the MS-DOS port using DJGPP.

</li><li><a class="index-entry-id" id="index-Zaretskii_002c-Eli-1"></a>
Eli Zaretskii
currently maintains the MS-Windows port using MinGW.

</li><li><a class="index-entry-id" id="index-Grigera_002c-Juan"></a>
Juan Grigera
provided a port to Windows32 systems.
(This is no longer supported.)


</li><li><a class="index-entry-id" id="index-Hankerson_002c-Darrel-1"></a>
For many years,
Dr. Darrel Hankerson
acted as coordinator for the various ports to different PC platforms
and created binary distributions for various PC operating systems.
He was also instrumental in keeping the documentation up to date for
the various PC platforms.

</li><li><a class="index-entry-id" id="index-Zoulas_002c-Christos"></a>
Christos Zoulas
provided the <code class="code">extension()</code>
built-in function for dynamically adding new functions.
(This was obsoleted at <code class="command">gawk</code> 4.1.)

</li><li><a class="index-entry-id" id="index-Kahrs_002c-Jurgen-1"></a>
J&uuml;rgen Kahrs
contributed the initial version of the TCP/IP networking
code and documentation, and motivated the inclusion of the &lsquo;<samp class="samp">|&amp;</samp>&rsquo; operator.

</li><li><a class="index-entry-id" id="index-Davies_002c-Stephen-1"></a>
Stephen Davies
provided the initial port to Tandem systems and its documentation.
(However, this is no longer supported.)
He was also instrumental in the initial work to integrate the
byte-code internals into the <code class="command">gawk</code> code base.
Additionally, he did most of the work enabling the pretty-printer
to preserve and output comments.

</li><li><a class="index-entry-id" id="index-Woehlke_002c-Matthew"></a>
Matthew Woehlke
provided improvements for Tandem&rsquo;s POSIX-compliant systems.

</li><li><a class="index-entry-id" id="index-Brown_002c-Martin"></a>
Martin Brown
provided the port to BeOS and its documentation.
(This is no longer supported.)

</li><li><a class="index-entry-id" id="index-Peters_002c-Arno"></a>
Arno Peters
did the initial work to convert <code class="command">gawk</code> to use
GNU Automake and GNU <code class="command">gettext</code>.

</li><li><a class="index-entry-id" id="index-Broder_002c-Alan-J_002e"></a>
Alan J. Broder
provided the initial version of the <code class="code">asort()</code> function
as well as the code for the optional third argument to the
<code class="code">match()</code> function.

</li><li><a class="index-entry-id" id="index-Buening_002c-Andreas-1"></a>
Andreas Buening
updated the <code class="command">gawk</code> port for OS/2.

</li><li><a class="index-entry-id" id="index-Hasegawa_002c-Isamu"></a>
Isamu Hasegawa,
of IBM in Japan, contributed support for multibyte characters.

</li><li><a class="index-entry-id" id="index-Benzinger_002c-Michael"></a>
Michael Benzinger contributed the initial code for <code class="code">switch</code> statements.

</li><li><a class="index-entry-id" id="index-McPhee_002c-Patrick-T_002eJ_002e"></a>
Patrick T.J. McPhee contributed the code for dynamic loading in Windows32
environments.
(This is no longer supported.)

</li><li><a class="index-entry-id" id="index-Wallin_002c-Anders"></a>
Anders Wallin helped keep the VMS port going for several years.

</li><li><a class="index-entry-id" id="index-Gordon_002c-Assaf"></a>
Assaf Gordon contributed the initial code to implement the
<samp class="option">--sandbox</samp> option.

</li><li><a class="index-entry-id" id="index-Haque_002c-John"></a>
John Haque made the following contributions:

<ul class="itemize mark-minus">
<li>The modifications to convert <code class="command">gawk</code>
into a byte-code interpreter, including the debugger

</li><li>The addition of true arrays of arrays

</li><li>The additional modifications for support of arbitrary-precision arithmetic

</li><li>The initial text of
<a class="ref" href="#Arbitrary-Precision-Arithmetic">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a>

</li><li>The work to merge the three versions of <code class="command">gawk</code>
into one, for the 4.1 release

</li><li>Improved array internals for arrays indexed by integers

</li><li>The improved array sorting features were also driven by John, together
with Pat Rankin
</li></ul>

</li><li><a class="index-entry-id" id="index-Papadopoulos_002c-Panos"></a>
Panos Papadopoulos contributed the original text for <a class="ref" href="#Include-Files">Including Other Files into Your Program</a>.

</li><li><a class="index-entry-id" id="index-Yawitz_002c-Efraim"></a>
Efraim Yawitz contributed the original text for <a class="ref" href="#Debugger">Debugging <code class="command">awk</code> Programs</a>.

</li><li><a class="index-entry-id" id="index-Schorr_002c-Andrew-2"></a>
The development of the extension API first released with
<code class="command">gawk</code> 4.1 was driven primarily by
Arnold Robbins and Andrew Schorr, with notable contributions from
the rest of the development team.

</li><li><a class="index-entry-id" id="index-Malmberg_002c-John-1"></a>
John Malmberg contributed significant improvements to the
OpenVMS port and the related documentation.

</li><li><a class="index-entry-id" id="index-Colombo_002c-Antonio-1"></a>
Antonio Giovanni Colombo rewrote a number of examples in the early
chapters that were severely dated, for which I am incredibly grateful.
He also provided and maintains the Italian translation.

</li><li><a class="index-entry-id" id="index-Curreli_002c-Marco"></a>
Marco Curreli, together with Antonio Colombo, translated this
Web page into Italian.  It is included in the <code class="command">gawk</code>
distribution.

</li><li><a class="index-entry-id" id="index-Guerrero_002c-Juan-Manuel-1"></a>
Juan Manuel Guerrero took over maintenance of the DJGPP port.

</li><li><a class="index-entry-id" id="index-Jannick"></a>
&ldquo;Jannick&rdquo; provided support for MSYS2.

</li><li><a class="index-entry-id" id="index-Robbins-Arnold-5"></a>
Arnold Robbins
has been working on <code class="command">gawk</code> since 1988, at first
helping David Trueman, and as the primary maintainer since around 1994.
</li></ul>

<hr>
</div>
<div class="appendixsec-level-extent" id="History-summary">
<div class="nav-panel">
<p>
Previous: <a href="#Contributors" accesskey="p" rel="prev">Major Contributors to <code class="command">gawk</code></a>, Up: <a href="#Language-History" accesskey="u" rel="up">The Evolution of the <code class="command">awk</code> Language</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Summary-17"><span>A.10 Summary<a class="copiable-link" href="#Summary-17"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>The <code class="command">awk</code> language has evolved over time. The first release
was with V7 Unix, circa 1978.  In 1987, for System V Release 3.1,
major additions, including user-defined functions, were made to the language.
Additional changes were made for System V Release 4, in 1989.
Since then, further minor changes have happened under the auspices of the
POSIX standard.

</li><li>Brian Kernighan&rsquo;s <code class="command">awk</code> provides a small number of extensions
that are implemented in common with other versions of <code class="command">awk</code>.

</li><li><code class="command">gawk</code> provides a large number of extensions over POSIX <code class="command">awk</code>.
They can be disabled with either the <samp class="option">--traditional</samp> or <samp class="option">--posix</samp>
options.

</li><li><a class="index-entry-id" id="index-ASCII-8"></a>
<a class="index-entry-id" id="index-EBCDIC-2"></a>
The interaction of POSIX locales and regexp matching in <code class="command">gawk</code> has been confusing over
the years. Today, <code class="command">gawk</code> implements Rational Range Interpretation, where
ranges of the form &lsquo;<samp class="samp">[a-z]</samp>&rsquo; match <em class="emph">only</em> the characters numerically between
&lsquo;<samp class="samp">a</samp>&rsquo; through &lsquo;<samp class="samp">z</samp>&rsquo; in the machine&rsquo;s native character set.  Usually this is ASCII,
but it can be EBCDIC on IBM S/390 systems.

</li><li>Many people have contributed to <code class="command">gawk</code> development over the years.
We hope that the list provided in this chapter is complete and gives
the appropriate credit where credit is due.

</li></ul>

<hr>
</div>
</div>
<div class="appendix-level-extent" id="Installation">
<div class="nav-panel">
<p>
Next: <a href="#Notes" accesskey="n" rel="next">Implementation Notes</a>, Previous: <a href="#Language-History" accesskey="p" rel="prev">The Evolution of the <code class="command">awk</code> Language</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="appendix" id="Installing-gawk"><span>Appendix B Installing <code class="command">gawk</code><a class="copiable-link" href="#Installing-gawk"> &para;</a></span></h2>

<a class="index-entry-id" id="index-operating-systems"></a>
<a class="index-entry-id" id="index-gawk-installing"></a>
<a class="index-entry-id" id="index-installing-gawk"></a>
<p>This appendix provides instructions for installing <code class="command">gawk</code> on the
various platforms that are supported by the developers.  The primary
developer supports GNU/Linux (and Unix), whereas the other ports are
contributed.
See <a class="xref" href="#Bugs">Reporting Problems and Bugs</a>
for the email addresses of the people who maintain
the respective ports.
</p>

<ul class="mini-toc">
<li><a href="#Gawk-Distribution" accesskey="1">The <code class="command">gawk</code> Distribution</a></li>
<li><a href="#Unix-Installation" accesskey="2">Compiling and Installing <code class="command">gawk</code> on Unix-Like Systems</a></li>
<li><a href="#Non_002dUnix-Installation" accesskey="3">Installation on Other Operating Systems</a></li>
<li><a href="#Bugs" accesskey="4">Reporting Problems and Bugs</a></li>
<li><a href="#Other-Versions" accesskey="5">Other Freely Available <code class="command">awk</code> Implementations</a></li>
<li><a href="#Installation-summary" accesskey="6">Summary</a></li>
</ul>
<hr>
<div class="appendixsec-level-extent" id="Gawk-Distribution">
<div class="nav-panel">
<p>
Next: <a href="#Unix-Installation" accesskey="n" rel="next">Compiling and Installing <code class="command">gawk</code> on Unix-Like Systems</a>, Up: <a href="#Installation" accesskey="u" rel="up">Installing <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="The-gawk-Distribution"><span>B.1 The <code class="command">gawk</code> Distribution<a class="copiable-link" href="#The-gawk-Distribution"> &para;</a></span></h3>
<a class="index-entry-id" id="index-source-code-gawk"></a>

<p>This section describes how to get the <code class="command">gawk</code>
distribution, how to extract it, and then what is in the various files and
subdirectories.
</p>

<ul class="mini-toc">
<li><a href="#Getting" accesskey="1">Getting the <code class="command">gawk</code> Distribution</a></li>
<li><a href="#Extracting" accesskey="2">Extracting the Distribution</a></li>
<li><a href="#Distribution-contents" accesskey="3">Contents of the <code class="command">gawk</code> Distribution</a></li>
</ul>
<hr>
<div class="appendixsubsec-level-extent" id="Getting">
<div class="nav-panel">
<p>
Next: <a href="#Extracting" accesskey="n" rel="next">Extracting the Distribution</a>, Up: <a href="#Gawk-Distribution" accesskey="u" rel="up">The <code class="command">gawk</code> Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Getting-the-gawk-Distribution"><span>B.1.1 Getting the <code class="command">gawk</code> Distribution<a class="copiable-link" href="#Getting-the-gawk-Distribution"> &para;</a></span></h4>
<a class="index-entry-id" id="index-gawk-source-code_002c-obtaining"></a>
<p>There are two ways to get GNU software:
</p>
<ul class="itemize mark-bullet">
<li>Copy it from someone else who already has it.

</li><li><a class="index-entry-id" id="index-FSF-_0028Free-Software-Foundation_0029-1"></a>
<a class="index-entry-id" id="index-Free-Software-Foundation-_0028FSF_0029-1"></a>
Retrieve <code class="command">gawk</code>
from the Internet host
<code class="code">ftp.gnu.org</code>, in the directory <samp class="file">/gnu/gawk</samp>.
Both anonymous <code class="command">ftp</code> and <code class="code">http</code> access are supported.
If you have the <code class="command">wget</code> program, you can use a command like
the following:

<div class="example">
<pre class="example-preformatted">wget https://ftp.gnu.org/gnu/gawk/gawk-5.3.0.tar.gz
</pre></div>
</li></ul>

<p>The GNU software archive is mirrored around the world.
The up-to-date list of mirror sites is available from
<a class="uref" href="https://www.gnu.org/order/ftp.html">the main FSF website</a>.
Try to use one of the mirrors; they
will be less busy, and you can usually find one closer to your site.
</p>
<p>You may also retrieve the <code class="command">gawk</code> source code from the official
Git repository; for more information see <a class="ref" href="#Accessing-The-Source">Accessing The <code class="command">gawk</code> Git Repository</a>.
</p>
<hr>
</div>
<div class="appendixsubsec-level-extent" id="Extracting">
<div class="nav-panel">
<p>
Next: <a href="#Distribution-contents" accesskey="n" rel="next">Contents of the <code class="command">gawk</code> Distribution</a>, Previous: <a href="#Getting" accesskey="p" rel="prev">Getting the <code class="command">gawk</code> Distribution</a>, Up: <a href="#Gawk-Distribution" accesskey="u" rel="up">The <code class="command">gawk</code> Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Extracting-the-Distribution"><span>B.1.2 Extracting the Distribution<a class="copiable-link" href="#Extracting-the-Distribution"> &para;</a></span></h4>
<p><code class="command">gawk</code> is distributed as several <code class="command">tar</code> files compressed with
different compression programs: <code class="command">gzip</code>, <code class="command">bzip2</code>,
and <code class="command">xz</code>. For simplicity, the rest of these instructions assume
you are using the one compressed with the GNU Gzip program (<code class="command">gzip</code>).
</p>
<p>Once you have the distribution (e.g.,
<samp class="file">gawk-5.3.0.tar.gz</samp>),
use <code class="command">gzip</code> to expand the
file and then use <code class="command">tar</code> to extract it.  You can use the following
pipeline to produce the <code class="command">gawk</code> distribution:
</p>
<div class="example">
<pre class="example-preformatted">gzip -d -c gawk-5.3.0.tar.gz | tar -xvpf -
</pre></div>

<p>On a system with GNU <code class="command">tar</code>, you can let <code class="command">tar</code>
do the decompression for you:
</p>
<div class="example">
<pre class="example-preformatted">tar -xvpzf gawk-5.3.0.tar.gz
</pre></div>

<p>Extracting the archive
creates a directory named <samp class="file">gawk-5.3.0</samp>
in the current directory.
</p>
<p>The distribution file name is of the form
<samp class="file">gawk-<var class="var">V</var>.<var class="var">R</var>.<var class="var">P</var>.tar.gz</samp>.
The <var class="var">V</var> represents the major version of <code class="command">gawk</code>,
the <var class="var">R</var> represents the current release of version <var class="var">V</var>, and
the <var class="var">P</var> represents a <em class="dfn">patch level</em>, meaning that minor bugs have
been fixed in the release.  The current patch level is 0,
but when retrieving distributions, you should get the version with the highest
version, release, and patch level.  (Note, however, that patch levels greater than
or equal to 60 denote &ldquo;beta&rdquo; or nonproduction software; you might not want
to retrieve such a version unless you don&rsquo;t mind experimenting.)
If you are not on a Unix or GNU/Linux system, you need to make other arrangements
for getting and extracting the <code class="command">gawk</code> distribution.  You should consult
a local expert.
</p>
<hr>
</div>
<div class="appendixsubsec-level-extent" id="Distribution-contents">
<div class="nav-panel">
<p>
Previous: <a href="#Extracting" accesskey="p" rel="prev">Extracting the Distribution</a>, Up: <a href="#Gawk-Distribution" accesskey="u" rel="up">The <code class="command">gawk</code> Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Contents-of-the-gawk-Distribution"><span>B.1.3 Contents of the <code class="command">gawk</code> Distribution<a class="copiable-link" href="#Contents-of-the-gawk-Distribution"> &para;</a></span></h4>
<a class="index-entry-id" id="index-gawk-distribution"></a>

<p>The <code class="command">gawk</code> distribution has a number of C source files,
documentation files,
subdirectories, and files related to the configuration process
(see <a class="pxref" href="#Unix-Installation">Compiling and Installing <code class="command">gawk</code> on Unix-Like Systems</a>),
as well as several subdirectories related to different non-Unix
operating systems:
</p>
<dl class="table">
<dt>Various &lsquo;<samp class="samp">.c</samp>&rsquo;, &lsquo;<samp class="samp">.y</samp>&rsquo;, and &lsquo;<samp class="samp">.h</samp>&rsquo; files</dt>
<dd><p>These files contain the actual <code class="command">gawk</code> source code.
</p></dd>
</dl>

<dl class="table">
<dt><samp class="file">support/*</samp></dt>
<dd><p>C header and source files for routines that <code class="command">gawk</code>
uses, but that are not part of its core functionality.
For example, argument parsing, regular expression matching,
and random number generating routines are all kept here.
</p>
</dd>
<dt><samp class="file">ABOUT-NLS</samp></dt>
<dd><p>A file containing information about GNU <code class="command">gettext</code> and translations.
</p>
</dd>
<dt><samp class="file">AUTHORS</samp></dt>
<dd><p>A file with some information about the authorship of <code class="command">gawk</code>.
It exists only to satisfy the pedants at the Free Software Foundation.
</p>
</dd>
<dt><samp class="file">README</samp></dt>
<dt><samp class="file">README_d/README.*</samp></dt>
<dd><p>Descriptive files: <samp class="file">README</samp> for <code class="command">gawk</code> under Unix and the
rest for the various hardware and software combinations.
</p>
</dd>
<dt><samp class="file">INSTALL</samp></dt>
<dd><p>A file providing an overview of the configuration and installation process.
</p>
</dd>
<dt><samp class="file">ChangeLog</samp></dt>
<dd><p>A detailed list of source code changes as bugs are fixed or improvements made.
There are similar files in all of the subdirectories.
</p>
</dd>
<dt><samp class="file">ChangeLog.0</samp></dt>
<dt><samp class="file">ChangeLog.1</samp></dt>
<dd><p>Older lists of source code changes.
There are similar files in all of the subdirectories.
</p>
</dd>
<dt><samp class="file">NEWS</samp></dt>
<dd><p>A list of changes to <code class="command">gawk</code> since the last release or patch.
There may be similar files in other subdirectories.
</p>
</dd>
<dt><samp class="file">NEWS.0</samp></dt>
<dt><samp class="file">NEWS.1</samp></dt>
<dd><p>Older lists of changes to <code class="command">gawk</code>.
There may be similar files in other subdirectories.
</p>
</dd>
<dt><samp class="file">COPYING</samp></dt>
<dd><p>The GNU General Public License.
</p>
</dd>
<dt><samp class="file">POSIX.STD</samp></dt>
<dd><p>A description of behaviors in the POSIX standard for <code class="command">awk</code> that
are left undefined, or where <code class="command">gawk</code> may not comply fully, as well
as a list of things that the POSIX standard should describe but does not.
</p>
</dd>
<dt><a id="index-artificial-intelligence_002c-gawk-and"></a><span><samp class="file">doc/awkforai.txt</samp><a class="copiable-link" href="#index-artificial-intelligence_002c-gawk-and"> &para;</a></span></dt>
<dd><p>Pointers to the original draft of
a short article describing why <code class="command">gawk</code> is a good language for
artificial intelligence (AI) programming.
</p>
</dd>
<dt><samp class="file">doc/bc_notes</samp></dt>
<dd><p>A brief description of <code class="command">gawk</code>&rsquo;s &ldquo;byte code&rdquo; internals.
</p>
</dd>
<dt><samp class="file">doc/README.card</samp></dt>
<dt><samp class="file">doc/ad.block</samp></dt>
<dt><samp class="file">doc/awkcard.in</samp></dt>
<dt><samp class="file">doc/cardfonts</samp></dt>
<dt><samp class="file">doc/colors</samp></dt>
<dt><samp class="file">doc/macros</samp></dt>
<dt><samp class="file">doc/no.colors</samp></dt>
<dt><samp class="file">doc/setter.outline</samp></dt>
<dd><p>The <code class="command">troff</code> source for a five-color <code class="command">awk</code> reference card.
A modern version of <code class="command">troff</code> such as GNU <code class="command">troff</code> (<code class="command">groff</code>) is
needed to produce the color version. See the file <samp class="file">README.card</samp>
for instructions if you have an older <code class="command">troff</code>.
</p>
</dd>
<dt><samp class="file">doc/gawk.1</samp></dt>
<dd><p>The <code class="command">troff</code> source for a manual page describing <code class="command">gawk</code>.
This is distributed for the convenience of Unix users.
</p>
</dd>
<dt><a id="index-Texinfo-4"></a><span><samp class="file">doc/gawktexi.in</samp><a class="copiable-link" href="#index-Texinfo-4"> &para;</a></span></dt>
<dt><samp class="file">doc/sidebar.awk</samp></dt>
<dd><p>The Texinfo source file for this Web page.
It should be processed by <samp class="file">doc/sidebar.awk</samp>
before processing with <code class="command">texi2dvi</code> or <code class="command">texi2pdf</code>
to produce a printed document, and
with <code class="command">makeinfo</code> to produce an Info or HTML file.
The <samp class="file">Makefile</samp> takes care of this processing and produces
printable output via <code class="command">texi2dvi</code> or <code class="command">texi2pdf</code>.
</p>
</dd>
<dt><samp class="file">doc/gawk.texi</samp></dt>
<dd><p>The file produced after processing <samp class="file">gawktexi.in</samp>
with <samp class="file">sidebar.awk</samp>.
</p>
</dd>
<dt><samp class="file">doc/gawk.info</samp></dt>
<dd><p>The generated Info file for this Web page.
</p>
</dd>
<dt><samp class="file">doc/gawkinet.texi</samp></dt>
<dd><p>The Texinfo source file for
<cite class="cite">TCP/IP Internetworking with <code class="command">gawk</code></cite>.
It should be processed with TeX
(via <code class="command">texi2dvi</code> or <code class="command">texi2pdf</code>)
to produce a printed document and
with <code class="command">makeinfo</code> to produce an Info or HTML file.
</p>
</dd>
<dt><samp class="file">doc/gawkinet.info</samp></dt>
<dd><p>The generated Info file for
<cite class="cite">TCP/IP Internetworking with <code class="command">gawk</code></cite>.
</p>
</dd>
<dt><samp class="file">doc/gawkworkflow.texi</samp></dt>
<dd><p>The Texinfo source file for
<cite class="cite">Participating in <code class="command">gawk</code> Development</cite>.
It should be processed with TeX
(via <code class="command">texi2dvi</code> or <code class="command">texi2pdf</code>)
to produce a printed document and
with <code class="command">makeinfo</code> to produce an Info or HTML file.
</p>
</dd>
<dt><samp class="file">doc/gawkworkflow.info</samp></dt>
<dd><p>The generated Info file for
<cite class="cite">Participating in <code class="command">gawk</code> Development</cite>.
</p>
</dd>
<dt><samp class="file">doc/pm-gawk.texi</samp></dt>
<dd><p>The Texinfo source file for
<cite class="cite">Persistent-Memory <code class="command">gawk</code> User Manual</cite>.
It should be processed with TeX
(via <code class="command">texi2dvi</code> or <code class="command">texi2pdf</code>)
to produce a printed document and
with <code class="command">makeinfo</code> to produce an Info or HTML file.
</p>
</dd>
<dt><samp class="file">doc/pm-gawk.info</samp></dt>
<dd><p>The generated Info file for
<cite class="cite">Persistent-Memory <code class="command">gawk</code> User Manual</cite>.
</p>
</dd>
<dt><samp class="file">doc/pm-gawk.1</samp></dt>
<dd><p>The <code class="command">troff</code> source for a manual page describing the
persistent memory features presented in <a class="ref" href="#Persistent-Memory">Preserving Data Between Runs</a>.
</p>
</dd>
<dt><samp class="file">doc/igawk.1</samp></dt>
<dd><p>The <code class="command">troff</code> source for a manual page describing the <code class="command">igawk</code>
program presented in
<a class="ref" href="#Igawk-Program">An Easy Way to Use Library Functions</a>.
(Since <code class="command">gawk</code> can do its own <code class="code">@include</code> processing,
neither <code class="command">igawk</code> nor <samp class="file">igawk.1</samp> are installed.)
</p>
</dd>
<dt><samp class="file">doc/it/*</samp></dt>
<dd><p>Files for the Italian translation of this Web page, produced and
contributed by Antonio Colombo and Marco Curreli.
</p>
</dd>
<dt><samp class="file">doc/Makefile.in</samp></dt>
<dd><p>The input file used during the configuration process to generate the
actual <samp class="file">Makefile</samp> for creating the documentation.
</p>
</dd>
<dt><samp class="file">Makefile.am</samp></dt>
<dt><samp class="file">*/Makefile.am</samp></dt>
<dd><p>Files used by the GNU Automake software for generating
the <samp class="file">Makefile.in</samp> files used by Autoconf and
<code class="command">configure</code>.
</p>
</dd>
<dt><samp class="file">Makefile.in</samp></dt>
<dt><samp class="file">aclocal.m4</samp></dt>
<dt><samp class="file">build-aux/*</samp></dt>
<dt><samp class="file">configh.in</samp></dt>
<dt><samp class="file">configure.ac</samp></dt>
<dt><samp class="file">configure</samp></dt>
<dt><samp class="file">custom.h</samp></dt>
<dt><samp class="file">missing_d/*</samp></dt>
<dt><samp class="file">m4/*</samp></dt>
<dd><p>These files and subdirectories are used when configuring and compiling
<code class="command">gawk</code> for various Unix systems.  Most of them are explained
in <a class="ref" href="#Unix-Installation">Compiling and Installing <code class="command">gawk</code> on Unix-Like Systems</a>. The rest are there to support the main
infrastructure.
</p>
</dd>
<dt><samp class="file">po/*</samp></dt>
<dd><p>The <samp class="file">po</samp> library contains message translations.
</p>
</dd>
<dt><samp class="file">awklib/extract.awk</samp></dt>
<dt><samp class="file">awklib/Makefile.am</samp></dt>
<dt><samp class="file">awklib/Makefile.in</samp></dt>
<dt><samp class="file">awklib/eg/*</samp></dt>
<dd><p>The <samp class="file">awklib</samp> directory contains a copy of <samp class="file">extract.awk</samp>
(see <a class="pxref" href="#Extract-Program">Extracting Programs from Texinfo Source Files</a>),
which can be used to extract the sample programs from the Texinfo
source file for this Web page. It also contains a <samp class="file">Makefile.in</samp> file, which
<code class="command">configure</code> uses to generate a <samp class="file">Makefile</samp>.
<samp class="file">Makefile.am</samp> is used by GNU Automake to create <samp class="file">Makefile.in</samp>.
The library functions from
<a class="ref" href="#Library-Functions">A Library of <code class="command">awk</code> Functions</a>,
are included as ready-to-use files in the <code class="command">gawk</code> distribution.
They are installed as part of the installation process.
The rest of the programs in this Web page are available in appropriate
subdirectories of <samp class="file">awklib/eg</samp>.
</p>
</dd>
<dt><samp class="file">extension/*</samp></dt>
<dd><p>The source code, manual pages, and infrastructure files for
the sample extensions included with <code class="command">gawk</code>.
See <a class="xref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>, for more information.
</p>
<a class="index-entry-id" id="index-AWKPATH-environment-variable-8"></a>
<a class="index-entry-id" id="index-environment-variables-AWKPATH-8"></a>
<a class="index-entry-id" id="index-AWKLIBPATH-environment-variable-7"></a>
<a class="index-entry-id" id="index-environment-variables-AWKLIBPATH-7"></a>
</dd>
<dt><samp class="file">extras/*</samp></dt>
<dd><p>Additional non-essential files.  Currently, this directory contains some shell
startup files to be installed in <samp class="file">/etc/profile.d</samp> to aid in manipulating
the <code class="env">AWKPATH</code> and <code class="env">AWKLIBPATH</code> environment variables.
See <a class="xref" href="#Shell-Startup-Files">Shell Startup Files</a>, for more information.
</p>
</dd>
<dt><samp class="file">posix/*</samp></dt>
<dd><p>Files needed for building <code class="command">gawk</code> on POSIX-compliant systems.
</p>
</dd>
<dt><samp class="file">pc/*</samp></dt>
<dd><p>Files needed for building <code class="command">gawk</code> under MS-Windows
(see <a class="pxref" href="#PC-Installation">Installation on MS-Windows</a> for details).
</p>
</dd>
<dt><samp class="file">vms/*</samp></dt>
<dd><p>Files needed for building <code class="command">gawk</code> under OpenVMS
(see <a class="pxref" href="#OpenVMS-Installation">Compiling and Installing <code class="command">gawk</code> on OpenVMS</a> for details).
</p>
</dd>
<dt><samp class="file">test/*</samp></dt>
<dd><p>A test suite for
<code class="command">gawk</code>.  You can use &lsquo;<samp class="samp">make check</samp>&rsquo; from the top-level <code class="command">gawk</code>
directory to run your version of <code class="command">gawk</code> against the test suite.
If <code class="command">gawk</code> successfully passes &lsquo;<samp class="samp">make check</samp>&rsquo;, then you can
be confident of a successful port.
</p></dd>
</dl>

<hr>
</div>
</div>
<div class="appendixsec-level-extent" id="Unix-Installation">
<div class="nav-panel">
<p>
Next: <a href="#Non_002dUnix-Installation" accesskey="n" rel="next">Installation on Other Operating Systems</a>, Previous: <a href="#Gawk-Distribution" accesskey="p" rel="prev">The <code class="command">gawk</code> Distribution</a>, Up: <a href="#Installation" accesskey="u" rel="up">Installing <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Compiling-and-Installing-gawk-on-Unix_002dLike-Systems"><span>B.2 Compiling and Installing <code class="command">gawk</code> on Unix-Like Systems<a class="copiable-link" href="#Compiling-and-Installing-gawk-on-Unix_002dLike-Systems"> &para;</a></span></h3>

<p>Usually, you can compile and install <code class="command">gawk</code> by typing only two
commands.  However, if you use an unusual system, you may need
to configure <code class="command">gawk</code> for your system yourself.
</p>

<ul class="mini-toc">
<li><a href="#Quick-Installation" accesskey="1">Compiling <code class="command">gawk</code> for Unix-Like Systems</a></li>
<li><a href="#Shell-Startup-Files" accesskey="2">Shell Startup Files</a></li>
<li><a href="#Additional-Configuration-Options" accesskey="3">Additional Configuration Options</a></li>
<li><a href="#Configuration-Philosophy" accesskey="4">The Configuration Process</a></li>
<li><a href="#Compiling-from-Git" accesskey="5">Compiling from Git</a></li>
<li><a href="#Building-the-Documentation" accesskey="6">Building the Documentation</a></li>
</ul>
<hr>
<div class="appendixsubsec-level-extent" id="Quick-Installation">
<div class="nav-panel">
<p>
Next: <a href="#Shell-Startup-Files" accesskey="n" rel="next">Shell Startup Files</a>, Up: <a href="#Unix-Installation" accesskey="u" rel="up">Compiling and Installing <code class="command">gawk</code> on Unix-Like Systems</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Compiling-gawk-for-Unix_002dLike-Systems"><span>B.2.1 Compiling <code class="command">gawk</code> for Unix-Like Systems<a class="copiable-link" href="#Compiling-gawk-for-Unix_002dLike-Systems"> &para;</a></span></h4>


<p>The normal installation steps should work on all modern commercial
Unix-derived systems, GNU/Linux, BSD-based systems, and the Cygwin
environment for MS-Windows.
</p>
<p>After you have extracted the <code class="command">gawk</code> distribution, <code class="command">cd</code>
to <samp class="file">gawk-5.3.0</samp>.  As with most GNU
software, you configure <code class="command">gawk</code> for your system by running the
<code class="command">configure</code> program.  This program is a Bourne shell script that
is generated automatically using GNU Autoconf.
(The Autoconf software is
described fully in
<cite class="cite">Autoconf&mdash;Generating Automatic Configuration Scripts</cite>,
which can be found online at
<a class="uref" href="https://www.gnu.org/software/autoconf/manual/index.html">the Free Software Foundation&rsquo;s website</a>.)
</p>
<p>To configure <code class="command">gawk</code>, simply run <code class="command">configure</code>:
</p>
<div class="example">
<pre class="example-preformatted">sh ./configure
</pre></div>

<p>This produces a <samp class="file">Makefile</samp> and <samp class="file">config.h</samp> tailored to your system.
The <samp class="file">config.h</samp> file describes various facts about your system.
You might want to edit the <samp class="file">Makefile</samp> to
change the <code class="code">CFLAGS</code> variable, which controls
the command-line options that are passed to the C compiler (such as
optimization levels or compiling for debugging).
</p>
<p>Alternatively, you can add your own values for most <code class="command">make</code>
variables on the command line, such as <code class="code">CC</code> and <code class="code">CFLAGS</code>, when
running <code class="command">configure</code>:
</p>
<div class="example">
<pre class="example-preformatted">CC=cc CFLAGS=-g sh ./configure
</pre></div>

<p>See the file <samp class="file">INSTALL</samp> in the <code class="command">gawk</code> distribution for
all the details.
</p>
<p>After you have run <code class="command">configure</code> and possibly edited the <samp class="file">Makefile</samp>,
type:
</p>
<div class="example">
<pre class="example-preformatted">make
</pre></div>

<p>Shortly thereafter, you should have an executable version of <code class="command">gawk</code>.
That&rsquo;s all there is to it!
To verify that <code class="command">gawk</code> is working properly,
run &lsquo;<samp class="samp">make check</samp>&rsquo;.  All of the tests should succeed.
If these steps do not work, or if any of the tests fail,
check the files in the <samp class="file">README_d</samp> directory to see if you&rsquo;ve
found a known problem.  If the failure is not described there,
send in a bug report (see <a class="pxref" href="#Bugs">Reporting Problems and Bugs</a>).
</p>
<p>Of course, once you&rsquo;ve built <code class="command">gawk</code>, it is likely that you will
wish to install it.  To do so, you need to run the command &lsquo;<samp class="samp">make
install</samp>&rsquo;, as a user with the appropriate permissions.  How to do this
varies by system, but on many systems you can use the <code class="command">sudo</code>
command to do so.  The command then becomes &lsquo;<samp class="samp">sudo make install</samp>&rsquo;. It
is likely that you will be asked for your password, and you will have
to have been set up previously as a user who is allowed to run the
<code class="command">sudo</code> command.
</p>

<ul class="mini-toc">
<li><a href="#Compiling-with-MPFR" accesskey="1">Building With MPFR</a></li>
</ul>
<hr>
<div class="appendixsubsubsec-level-extent" id="Compiling-with-MPFR">
<div class="nav-panel">
<p>
Up: <a href="#Quick-Installation" accesskey="u" rel="up">Compiling <code class="command">gawk</code> for Unix-Like Systems</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsubsec" id="Building-With-MPFR"><span>B.2.1.1 Building With MPFR<a class="copiable-link" href="#Building-With-MPFR"> &para;</a></span></h4>

<a class="index-entry-id" id="index-MPFR-library_002c-building-with"></a>
<p>Use of the MPFR library with <code class="command">gawk</code>
is an optional feature: if you have the MPFR and GMP libraries already installed
when you configure and build <code class="command">gawk</code>,
<code class="command">gawk</code> automatically will be able to use them.
</p>
<p>You can install these libraries from source code by fetching them
from the GNU distribution site at <code class="code">ftp.gnu.org</code>.
</p>
<p>Most modern systems provide package managers which save you the trouble
of building from source. They fetch and install the library header files
and binaries for you.  You will need to research how to do this for
your particular system.
</p>
<hr>
</div>
</div>
<div class="appendixsubsec-level-extent" id="Shell-Startup-Files">
<div class="nav-panel">
<p>
Next: <a href="#Additional-Configuration-Options" accesskey="n" rel="next">Additional Configuration Options</a>, Previous: <a href="#Quick-Installation" accesskey="p" rel="prev">Compiling <code class="command">gawk</code> for Unix-Like Systems</a>, Up: <a href="#Unix-Installation" accesskey="u" rel="up">Compiling and Installing <code class="command">gawk</code> on Unix-Like Systems</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Shell-Startup-Files-1"><span>B.2.2 Shell Startup Files<a class="copiable-link" href="#Shell-Startup-Files-1"> &para;</a></span></h4>

<a class="index-entry-id" id="index-AWKPATH-environment-variable-9"></a>
<a class="index-entry-id" id="index-environment-variables-AWKPATH-9"></a>
<a class="index-entry-id" id="index-AWKLIBPATH-environment-variable-8"></a>
<a class="index-entry-id" id="index-environment-variables-AWKLIBPATH-8"></a>
<p>The distribution contains shell startup files <samp class="file">gawk.sh</samp> and
<samp class="file">gawk.csh</samp>, containing functions to aid in manipulating
the <code class="env">AWKPATH</code> and <code class="env">AWKLIBPATH</code> environment variables.
On a Fedora GNU/Linux system, these files should be installed in <samp class="file">/etc/profile.d</samp>;
on other platforms, the appropriate location may be different.
</p>
<dl class="table">
<dd>
<a class="index-entry-id" id="index-gawkpath_005fdefault-shell-function"></a>
<a class="index-entry-id" id="index-shell-function-gawkpath_005fdefault"></a>
</dd>
<dt><code class="command">gawkpath_default</code></dt>
<dd><p>Reset the <code class="env">AWKPATH</code> environment variable to its default value.
</p>
<a class="index-entry-id" id="index-gawkpath_005fprepend-shell-function"></a>
<a class="index-entry-id" id="index-shell-function-gawkpath_005fprepend"></a>
</dd>
<dt><code class="command">gawkpath_prepend</code></dt>
<dd><p>Add the argument to the front of the <code class="env">AWKPATH</code> environment variable.
</p>
<a class="index-entry-id" id="index-gawkpath_005fappend-shell-function"></a>
<a class="index-entry-id" id="index-shell-function-gawkpath_005fappend"></a>
</dd>
<dt><code class="command">gawkpath_append</code></dt>
<dd><p>Add the argument to the end of the <code class="env">AWKPATH</code> environment variable.
</p>
<a class="index-entry-id" id="index-gawklibpath_005fdefault-shell-function"></a>
<a class="index-entry-id" id="index-shell-function-gawklibpath_005fdefault"></a>
</dd>
<dt><code class="command">gawklibpath_default</code></dt>
<dd><p>Reset the <code class="env">AWKLIBPATH</code> environment variable to its default value.
</p>
<a class="index-entry-id" id="index-gawklibpath_005fprepend-shell-function"></a>
<a class="index-entry-id" id="index-shell-function-gawklibpath_005fprepend"></a>
</dd>
<dt><code class="command">gawklibpath_prepend</code></dt>
<dd><p>Add the argument to the front of the <code class="env">AWKLIBPATH</code> environment variable.
</p>
<a class="index-entry-id" id="index-gawklibpath_005fappend-shell-function"></a>
<a class="index-entry-id" id="index-shell-function-gawklibpath_005fappend"></a>
</dd>
<dt><code class="command">gawklibpath_append</code></dt>
<dd><p>Add the argument to the end of the <code class="env">AWKLIBPATH</code> environment variable.
</p>
</dd>
</dl>


<hr>
</div>
<div class="appendixsubsec-level-extent" id="Additional-Configuration-Options">
<div class="nav-panel">
<p>
Next: <a href="#Configuration-Philosophy" accesskey="n" rel="next">The Configuration Process</a>, Previous: <a href="#Shell-Startup-Files" accesskey="p" rel="prev">Shell Startup Files</a>, Up: <a href="#Unix-Installation" accesskey="u" rel="up">Compiling and Installing <code class="command">gawk</code> on Unix-Like Systems</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Additional-Configuration-Options-1"><span>B.2.3 Additional Configuration Options<a class="copiable-link" href="#Additional-Configuration-Options-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-gawk-configuring-options"></a>
<a class="index-entry-id" id="index-configuration-options_002c-gawk"></a>

<p>There are several additional options you may use on the <code class="command">configure</code>
command line when compiling <code class="command">gawk</code> from scratch, including:
</p>
<dl class="table">
<dd>
<a class="index-entry-id" id="index-_002d_002ddisable_002dextensions-configuration-option"></a>
<a class="index-entry-id" id="index-configuration-option-_002d_002ddisable_002dextensions"></a>
</dd>
<dt><code class="code">--disable-extensions</code></dt>
<dd><p>Disable the extension mechanism within <code class="command">gawk</code>. With this
option, it is not possible to use dynamic extensions.  This also
disables configuring and building the sample extensions in the
<samp class="file">extension</samp> directory.
</p>
<p>This option may be useful for cross-compiling.
The default action is to dynamically check if the extensions
can be configured and compiled.
</p>
<a class="index-entry-id" id="index-_002d_002ddisable_002dlint-configuration-option"></a>
<a class="index-entry-id" id="index-configuration-option-_002d_002ddisable_002dlint"></a>
</dd>
<dt><code class="code">--disable-lint</code></dt>
<dd><p>Disable all lint checking within <code class="command">gawk</code>.  The
<samp class="option">--lint</samp> and <samp class="option">--lint-old</samp> options
(see <a class="pxref" href="#Options">Command-Line Options</a>)
are accepted, but silently do nothing.
Similarly, setting the <code class="code">LINT</code> variable
(see <a class="pxref" href="#User_002dmodified">Built-in Variables That Control <code class="command">awk</code></a>)
has no effect on the running <code class="command">awk</code> program.
</p>
<p>When used with the GNU Compiler Collection&rsquo;s (GCC&rsquo;s)
automatic dead-code-elimination, this option
cuts almost 23K bytes off the size of the <code class="command">gawk</code>
executable on GNU/Linux x86_64 systems.  Results on other systems and
with other compilers are likely to vary.
Using this option may bring you some slight performance improvement.
</p>
<blockquote class="quotation">
<p><b class="b">CAUTION:</b> Using this option will cause some of the tests in the test suite
to fail.  This option may be removed at a later date.
</p></blockquote>

<a class="index-entry-id" id="index-_002d_002ddisable_002dmpfr-configuration-option"></a>
<a class="index-entry-id" id="index-configuration-option-_002d_002ddisable_002dmpfr"></a>
</dd>
<dt><code class="code">--disable-mpfr</code></dt>
<dd><p>Skip checking for the MPFR and GMP libraries. This is useful
mainly for the developers, to make sure nothing breaks if
MPFR support is not available.
</p>
<a class="index-entry-id" id="index-_002d_002ddisable_002dnls-configuration-option"></a>
<a class="index-entry-id" id="index-configuration-option-_002d_002ddisable_002dnls"></a>
</dd>
<dt><code class="code">--disable-nls</code></dt>
<dd><p>Disable all message-translation facilities.
This is usually not desirable, but it may bring you some slight performance
improvement.
</p>
<a class="index-entry-id" id="index-_002d_002denable_002dversioned_002dextension_002ddir-configuration-option"></a>
<a class="index-entry-id" id="index-configuration-option-_002d_002denable_002dversioned_002dextension_002ddir"></a>
</dd>
<dt><code class="code">--enable-versioned-extension-dir</code></dt>
<dd><p>Use a versioned directory for extensions.  The directory name will
include the major and minor API versions in it. This makes it possible
to keep extensions for different API versions on the same system
without their conflicting with one another.
</p>
</dd>
</dl>

<p>Use the command &lsquo;<samp class="samp">./configure --help</samp>&rsquo; to see the full list of
options supplied by <code class="command">configure</code>.
</p>
<hr>
</div>
<div class="appendixsubsec-level-extent" id="Configuration-Philosophy">
<div class="nav-panel">
<p>
Next: <a href="#Compiling-from-Git" accesskey="n" rel="next">Compiling from Git</a>, Previous: <a href="#Additional-Configuration-Options" accesskey="p" rel="prev">Additional Configuration Options</a>, Up: <a href="#Unix-Installation" accesskey="u" rel="up">Compiling and Installing <code class="command">gawk</code> on Unix-Like Systems</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="The-Configuration-Process"><span>B.2.4 The Configuration Process<a class="copiable-link" href="#The-Configuration-Process"> &para;</a></span></h4>

<a class="index-entry-id" id="index-gawk-configuring"></a>
<p>This section is of interest only if you know something about using the
C language and Unix-like operating systems.
</p>
<p>The source code for <code class="command">gawk</code> generally attempts to adhere to formal
standards wherever possible.  This means that <code class="command">gawk</code> uses library
routines that are specified by the ISO C standard and by the POSIX
operating system interface standard.
The <code class="command">gawk</code> source code requires using an ISO C compiler (the 1999
standard).
</p>
<p>Many Unix systems do not support all of either the ISO or the
POSIX standards.  The <samp class="file">missing_d</samp> subdirectory in the <code class="command">gawk</code>
distribution contains replacement versions of those functions that are
most likely to be missing.
</p>
<p>The <samp class="file">config.h</samp> file that <code class="command">configure</code> creates contains
definitions that describe features of the particular operating system
where you are attempting to compile <code class="command">gawk</code>.  The three things
described by this file are: what header files are available, so that
they can be correctly included, what (supposedly) standard functions
are actually available in your C libraries, and various miscellaneous
facts about your operating system.  For example, there may not be an
<code class="code">st_blksize</code> element in the <code class="code">stat</code> structure.  In this case,
&lsquo;<samp class="samp">HAVE_STRUCT_STAT_ST_BLKSIZE</samp>&rsquo; is undefined.
</p>
<a class="index-entry-id" id="index-custom_002eh-file"></a>
<p>It is possible for your C compiler to lie to <code class="command">configure</code>. It may
do so by not exiting with an error when a library function is not
available.  To get around this, edit the <samp class="file">custom.h</samp> file.
Use an &lsquo;<samp class="samp">#ifdef</samp>&rsquo; that is appropriate for your system, and either
<code class="code">#define</code> any constants that <code class="command">configure</code> should have defined but
didn&rsquo;t, or <code class="code">#undef</code> any constants that <code class="command">configure</code> defined and
should not have.  The <samp class="file">custom.h</samp> file is automatically included by
the <samp class="file">config.h</samp> file.
</p>
<p>It is also possible that the <code class="command">configure</code> program generated by
Autoconf will not work on your system in some other fashion.
If you do have a problem, the <samp class="file">configure.ac</samp> file is the input for
Autoconf.  You may be able to change this file and generate a
new version of <code class="command">configure</code> that works on your system
(see <a class="pxref" href="#Bugs">Reporting Problems and Bugs</a>
for information on how to report problems in configuring <code class="command">gawk</code>).
The same mechanism may be used to send in updates to <samp class="file">configure.ac</samp>
and/or <samp class="file">custom.h</samp>.
</p>
<hr>
</div>
<div class="appendixsubsec-level-extent" id="Compiling-from-Git">
<div class="nav-panel">
<p>
Next: <a href="#Building-the-Documentation" accesskey="n" rel="next">Building the Documentation</a>, Previous: <a href="#Configuration-Philosophy" accesskey="p" rel="prev">The Configuration Process</a>, Up: <a href="#Unix-Installation" accesskey="u" rel="up">Compiling and Installing <code class="command">gawk</code> on Unix-Like Systems</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Compiling-from-Git-1"><span>B.2.5 Compiling from Git<a class="copiable-link" href="#Compiling-from-Git-1"> &para;</a></span></h4>

<p>Building <code class="command">gawk</code> directly from the development source control
repository is possible, but not recommended for everyday users, as the
code may not be as stable as released versions are.  If you really do
want to do that, here are the steps:
</p>
<div class="example">
<pre class="example-preformatted">git clone https://git.savannah.gnu.org/r/gawk.git
cd gawk
./bootstrap.sh &amp;&amp; ./configure &amp;&amp; make &amp;&amp; make check
</pre></div>

<hr>
</div>
<div class="appendixsubsec-level-extent" id="Building-the-Documentation">
<div class="nav-panel">
<p>
Previous: <a href="#Compiling-from-Git" accesskey="p" rel="prev">Compiling from Git</a>, Up: <a href="#Unix-Installation" accesskey="u" rel="up">Compiling and Installing <code class="command">gawk</code> on Unix-Like Systems</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Building-the-Documentation-1"><span>B.2.6 Building the Documentation<a class="copiable-link" href="#Building-the-Documentation-1"> &para;</a></span></h4>

<a class="index-entry-id" id="index-documentation-building-Info-files"></a>
<p>The generated Info documentation is included in the distribution
<code class="command">tar</code> files and in the Git source code repository; you should
not need to rebuild it. However, if it needs to be done, simply running
<code class="command">make</code> will do it, assuming that you have a recent enough version
of <code class="command">makeinfo</code> installed.
</p>
<a class="index-entry-id" id="index-documentation-building-PDF"></a>
<p>If you wish to build the PDF version of the manuals, you will need
to have TeX installed, and possibly additional packages that
provide the necessary fonts and tools, such as <code class="command">dvi2pdf</code>
and <code class="command">ps2pdf</code>.  You will also need GNU Troff (<code class="command">groff</code>)
installed in order to format the reference card and the manual page
(see <a class="pxref" href="#Distribution-contents">Contents of the <code class="command">gawk</code> Distribution</a>).  Managing this process is beyond the
scope of this Web page.
</p>
<p>Assuming you have all you need, then the following commands produce the
PDF versions of the documentation:
</p>
<div class="example">
<pre class="example-preformatted">cd doc
make pdf
</pre></div>

<p>This creates PDF versions of all three Texinfo documents included
in the distribution, as well as of the manual page and the reference card.
</p>
<a class="index-entry-id" id="index-documentation-building-HTML"></a>
<p>Similarly, if you have a recent enough version of <code class="command">makeinfo</code>,
you can make the HTML version of the manuals with:
</p>
<div class="example">
<pre class="example-preformatted">cd doc
make html
</pre></div>

<p>This creates HTML versions of all three Texinfo documents included
in the distribution.
</p>
<hr>
</div>
</div>
<div class="appendixsec-level-extent" id="Non_002dUnix-Installation">
<div class="nav-panel">
<p>
Next: <a href="#Bugs" accesskey="n" rel="next">Reporting Problems and Bugs</a>, Previous: <a href="#Unix-Installation" accesskey="p" rel="prev">Compiling and Installing <code class="command">gawk</code> on Unix-Like Systems</a>, Up: <a href="#Installation" accesskey="u" rel="up">Installing <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Installation-on-Other-Operating-Systems"><span>B.3 Installation on Other Operating Systems<a class="copiable-link" href="#Installation-on-Other-Operating-Systems"> &para;</a></span></h3>

<p>This section describes how to install <code class="command">gawk</code> on
various non-Unix systems.
</p>

<ul class="mini-toc">
<li><a href="#PC-Installation" accesskey="1">Installation on MS-Windows</a></li>
<li><a href="#OpenVMS-Installation" accesskey="2">Compiling and Installing <code class="command">gawk</code> on OpenVMS</a></li>
</ul>
<hr>
<div class="appendixsubsec-level-extent" id="PC-Installation">
<div class="nav-panel">
<p>
Next: <a href="#OpenVMS-Installation" accesskey="n" rel="next">Compiling and Installing <code class="command">gawk</code> on OpenVMS</a>, Up: <a href="#Non_002dUnix-Installation" accesskey="u" rel="up">Installation on Other Operating Systems</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Installation-on-MS_002dWindows"><span>B.3.1 Installation on MS-Windows<a class="copiable-link" href="#Installation-on-MS_002dWindows"> &para;</a></span></h4>

<a class="index-entry-id" id="index-PC-operating-systems_002c-gawk-on-installing"></a>
<a class="index-entry-id" id="index-operating-systems-PC_002c-gawk-on-installing"></a>
<p>This section covers installation and usage of <code class="command">gawk</code>
on Intel architecture machines running any version of MS-Windows.
In this section, the term &ldquo;Windows32&rdquo;
refers to any of Microsoft Windows 95/98/ME/NT/2000/XP/Vista/7/8/10/11.
</p>
<p>See also the <samp class="file">README_d/README.pc</samp> file in the distribution.
</p>

<ul class="mini-toc">
<li><a href="#PC-Binary-Installation" accesskey="1">Installing a Prepared Distribution for MS-Windows Systems</a></li>
<li><a href="#PC-Compiling" accesskey="2">Compiling <code class="command">gawk</code> for PC Operating Systems</a></li>
<li><a href="#PC-Using" accesskey="3">Using <code class="command">gawk</code> on PC Operating Systems</a></li>
<li><a href="#Cygwin" accesskey="4">Using <code class="command">gawk</code> In The Cygwin Environment</a></li>
<li><a href="#MSYS" accesskey="5">Using <code class="command">gawk</code> In The MSYS Environment</a></li>
</ul>
<hr>
<div class="appendixsubsubsec-level-extent" id="PC-Binary-Installation">
<div class="nav-panel">
<p>
Next: <a href="#PC-Compiling" accesskey="n" rel="next">Compiling <code class="command">gawk</code> for PC Operating Systems</a>, Up: <a href="#PC-Installation" accesskey="u" rel="up">Installation on MS-Windows</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsubsec" id="Installing-a-Prepared-Distribution-for-MS_002dWindows-Systems"><span>B.3.1.1 Installing a Prepared Distribution for MS-Windows Systems<a class="copiable-link" href="#Installing-a-Prepared-Distribution-for-MS_002dWindows-Systems"> &para;</a></span></h4>
<a class="index-entry-id" id="index-installing-gawk-MS_002dWindows"></a>

<a class="index-entry-id" id="index-Path-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-Path"></a>
<p>The only supported binary distribution for MS-Windows systems
is that provided by Eli Zaretskii&rsquo;s <a class="uref" href="https://sourceforge.net/projects/ezwinports/">&ldquo;ezwinports&rdquo;</a> project.  Install the compiled <code class="command">gawk</code> from there.
Note that to run that port, you need to have the
<samp class="file">libgcc_s_dw2-1.dll</samp> file installed on your system.  This file is
part of the GCC distribution, and should reside either in the same
directory where you install <samp class="file">gawk.exe</samp> or somewhere on your
system&rsquo;s <code class="env">Path</code>.  You can download this file from
<a class="uref" href="https://osdn.net/projects/mingw/releases">the MinGW site</a>; look under the
&ldquo;MinGW.org Compiler Collection (GCC)&rdquo; for the <code class="code">LibGCC-1.DLL</code>
download.
</p>
<hr>
</div>
<div class="appendixsubsubsec-level-extent" id="PC-Compiling">
<div class="nav-panel">
<p>
Next: <a href="#PC-Using" accesskey="n" rel="next">Using <code class="command">gawk</code> on PC Operating Systems</a>, Previous: <a href="#PC-Binary-Installation" accesskey="p" rel="prev">Installing a Prepared Distribution for MS-Windows Systems</a>, Up: <a href="#PC-Installation" accesskey="u" rel="up">Installation on MS-Windows</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsubsec" id="Compiling-gawk-for-PC-Operating-Systems"><span>B.3.1.2 Compiling <code class="command">gawk</code> for PC Operating Systems<a class="copiable-link" href="#Compiling-gawk-for-PC-Operating-Systems"> &para;</a></span></h4>

<p><code class="command">gawk</code> can be compiled for Windows32 using MinGW (Windows32).
The file <samp class="file">README_d/README.pc</samp> in the <code class="command">gawk</code> distribution
contains additional notes, and <samp class="file">pc/Makefile</samp> contains important
information on compilation options.
</p>
<a class="index-entry-id" id="index-compiling-gawk-for-MS_002dWindows"></a>
<p>To build <code class="command">gawk</code> for Windows32, copy the files in
the <samp class="file">pc</samp> directory (<em class="emph">except</em> for <samp class="file">ChangeLog</samp>) to the
directory with the rest of the <code class="command">gawk</code> sources, then invoke
<code class="command">make</code> with the appropriate target name as an argument to
build <code class="command">gawk</code>.  The <samp class="file">Makefile</samp> copied from the <samp class="file">pc</samp>
directory contains a configuration section with comments and may need
to be edited in order to work with your <code class="command">make</code> utility.
</p>
<p>The <samp class="file">Makefile</samp> supports a number of targets for building various
Windows32 versions.  A list of targets is printed if the
<code class="command">make</code> command is given without a target.  As an example,
to build a native MS-Windows binary of <code class="command">gawk</code> using the MinGW tools,
type &lsquo;<samp class="samp">make mingw32</samp>&rsquo;.
</p>
<hr>
</div>
<div class="appendixsubsubsec-level-extent" id="PC-Using">
<div class="nav-panel">
<p>
Next: <a href="#Cygwin" accesskey="n" rel="next">Using <code class="command">gawk</code> In The Cygwin Environment</a>, Previous: <a href="#PC-Compiling" accesskey="p" rel="prev">Compiling <code class="command">gawk</code> for PC Operating Systems</a>, Up: <a href="#PC-Installation" accesskey="u" rel="up">Installation on MS-Windows</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsubsec" id="Using-gawk-on-PC-Operating-Systems"><span>B.3.1.3 Using <code class="command">gawk</code> on PC Operating Systems<a class="copiable-link" href="#Using-gawk-on-PC-Operating-Systems"> &para;</a></span></h4>
<a class="index-entry-id" id="index-operating-systems-PC_002c-gawk-on"></a>
<a class="index-entry-id" id="index-PC-operating-systems_002c-gawk-on"></a>

<p>Information in this section applies to the MinGW
port of <code class="command">gawk</code>. See <a class="xref" href="#Cygwin">Using <code class="command">gawk</code> In The Cygwin Environment</a> for information
about the Cygwin port.
</p>
<p>Under MS-Windows, the MinGW environment supports
both the &lsquo;<samp class="samp">|&amp;</samp>&rsquo; operator and TCP/IP networking
(see <a class="pxref" href="#TCP_002fIP-Networking">Using <code class="command">gawk</code> for Network Programming</a>).
</p>
<a class="index-entry-id" id="index-search-paths-1"></a>
<a class="index-entry-id" id="index-search-paths-for-source-files-2"></a>
<a class="index-entry-id" id="index-gawk-MS_002dWindows-version-of"></a>
<a class="index-entry-id" id="index-_003b-_0028semicolon_0029-AWKPATH-variable-and"></a>
<a class="index-entry-id" id="index-semicolon-_0028_003b_0029-AWKPATH-variable-and"></a>
<a class="index-entry-id" id="index-AWKPATH-environment-variable-10"></a>
<a class="index-entry-id" id="index-environment-variables-AWKPATH-10"></a>
<p>The MS-Windows version of <code class="command">gawk</code> searches for
program files as described in <a class="ref" href="#AWKPATH-Variable">The <code class="env">AWKPATH</code> Environment Variable</a>.  However,
semicolons (rather than colons) separate elements in the <code class="env">AWKPATH</code>
variable.  If <code class="env">AWKPATH</code> is not set or is empty, then the default
search path is &lsquo;<samp class="samp">.;c:/lib/awk;c:/gnu/lib/awk<!-- /@w --></samp>&rsquo;.
</p>
<a class="index-entry-id" id="index-common-extensions-BINMODE-variable"></a>
<a class="index-entry-id" id="index-extensions-common-BINMODE-variable"></a>
<a class="index-entry-id" id="index-differences-in-awk-and-gawk-BINMODE-variable-1"></a>
<a class="index-entry-id" id="index-BINMODE-variable-1"></a>
<p>Under MS-Windows,
<code class="command">gawk</code> (and many other text programs) silently
translates end-of-line &lsquo;<samp class="samp">\r\n</samp>&rsquo; to &lsquo;<samp class="samp">\n</samp>&rsquo; on input and &lsquo;<samp class="samp">\n</samp>&rsquo;
to &lsquo;<samp class="samp">\r\n</samp>&rsquo; on output.  A special <code class="code">BINMODE</code> variable (c.e.)
allows control over these translations and is interpreted as follows:
</p>
<ul class="itemize mark-bullet">
<li>If <code class="code">BINMODE</code> is <code class="code">&quot;r&quot;</code> or one,
then
binary mode is set on read (i.e., no translations on reads).

</li><li>If <code class="code">BINMODE</code> is <code class="code">&quot;w&quot;</code> or two,
then
binary mode is set on write (i.e., no translations on writes).

</li><li>If <code class="code">BINMODE</code> is <code class="code">&quot;rw&quot;</code> or <code class="code">&quot;wr&quot;</code> or three,
binary mode is set for both read and write.

</li><li><code class="code">BINMODE=<var class="var">non-null-string</var></code> is
the same as &lsquo;<samp class="samp">BINMODE=3</samp>&rsquo; (i.e., no translations on
reads or writes).  However, <code class="command">gawk</code> issues a warning
message if the string is not one of <code class="code">&quot;rw&quot;</code> or <code class="code">&quot;wr&quot;</code>.
</li></ul>

<p>The modes for standard input and standard output are set one time
only (after the
command line is read, but before processing any of the <code class="command">awk</code> program).
Setting <code class="code">BINMODE</code> for standard input or
standard output is accomplished by using an
appropriate &lsquo;<samp class="samp">-v BINMODE=<var class="var">N</var></samp>&rsquo; option on the command line.
<code class="code">BINMODE</code> is set at the time a file or pipe is opened and cannot be
changed midstream.
</p>
<p>On POSIX-compatible systems, this variable&rsquo;s value has no effect.
Thus, if you think your program will run on multiple different systems
and that you may need to use <code class="code">BINMODE</code>, you should simply set it
(in the program or on the command line) unconditionally, and not worry
about the operating system on which your program is running.
</p>
<p>The name <code class="code">BINMODE</code> was chosen to match <code class="command">mawk</code>
(see <a class="pxref" href="#Other-Versions">Other Freely Available <code class="command">awk</code> Implementations</a>).
<code class="command">mawk</code> and <code class="command">gawk</code> handle <code class="code">BINMODE</code> similarly; however,
<code class="command">mawk</code> adds a &lsquo;<samp class="samp">-W BINMODE=<var class="var">N</var></samp>&rsquo; option and an environment
variable that can set <code class="code">BINMODE</code>, <code class="code">RS</code>, and <code class="code">ORS</code>.  The
files <samp class="file">binmode[1-3].awk</samp> (under <samp class="file">gnu/lib/awk</samp> in some of the
prepared binary distributions) have been chosen to match <code class="command">mawk</code>&rsquo;s &lsquo;<samp class="samp">-W
BINMODE=<var class="var">N</var></samp>&rsquo; option.  These can be changed or discarded; in particular,
the setting of <code class="code">RS</code> giving the fewest &ldquo;surprises&rdquo; is open to debate.
<code class="command">mawk</code> uses &lsquo;<samp class="samp">RS = &quot;\r\n&quot;</samp>&rsquo; if binary mode is set on read, which is
appropriate for files with the MS-DOS-style end-of-line.
</p>
<p>To illustrate, the following examples set binary mode on writes for standard
output and other files, and set <code class="code">ORS</code> as the &ldquo;usual&rdquo; MS-DOS-style
end-of-line:
</p>
<div class="example">
<pre class="example-preformatted">gawk -v BINMODE=2 -v ORS=&quot;\r\n&quot; ...
</pre></div>

<p>or:
</p>
<div class="example">
<pre class="example-preformatted">gawk -v BINMODE=w -f binmode2.awk ...
</pre></div>

<p>These give the same result as the &lsquo;<samp class="samp">-W BINMODE=2</samp>&rsquo; option in
<code class="command">mawk</code>.
The following changes the record separator to <code class="code">&quot;\r\n&quot;</code> and sets binary
mode on reads, but does not affect the mode on standard input:
</p>
<div class="example">
<pre class="example-preformatted">gawk -v RS=&quot;\r\n&quot; -e &quot;BEGIN { BINMODE = 1 }&quot; ...
</pre></div>

<p>or:
</p>
<div class="example">
<pre class="example-preformatted">gawk -f binmode1.awk ...
</pre></div>

<p>With proper quoting, in the first example the setting of <code class="code">RS</code> can be
moved into the <code class="code">BEGIN</code> rule.
</p>
<hr>
</div>
<div class="appendixsubsubsec-level-extent" id="Cygwin">
<div class="nav-panel">
<p>
Next: <a href="#MSYS" accesskey="n" rel="next">Using <code class="command">gawk</code> In The MSYS Environment</a>, Previous: <a href="#PC-Using" accesskey="p" rel="prev">Using <code class="command">gawk</code> on PC Operating Systems</a>, Up: <a href="#PC-Installation" accesskey="u" rel="up">Installation on MS-Windows</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsubsec" id="Using-gawk-In-The-Cygwin-Environment"><span>B.3.1.4 Using <code class="command">gawk</code> In The Cygwin Environment<a class="copiable-link" href="#Using-gawk-In-The-Cygwin-Environment"> &para;</a></span></h4>
<a class="index-entry-id" id="index-compiling-gawk-for-Cygwin"></a>

<p><code class="command">gawk</code> can be built and used &ldquo;out of the box&rdquo; under MS-Windows
if you are using the <a class="uref" href="http://www.cygwin.com">Cygwin environment</a>.
This environment provides an excellent simulation of GNU/Linux, using
Bash, GCC, GNU Make,
and other GNU programs.  Compilation and installation for Cygwin is the
same as for a Unix system:
</p>
<div class="example">
<pre class="example-preformatted">tar -xvpzf gawk-5.3.0.tar.gz
cd gawk-5.3.0
./configure
make &amp;&amp; make check
</pre></div>

<p>When compared to GNU/Linux on the same system, the &lsquo;<samp class="samp">configure</samp>&rsquo;
step on Cygwin takes considerably longer.  However, it does finish,
and then the &lsquo;<samp class="samp">make</samp>&rsquo; proceeds as usual.
</p>
<a class="index-entry-id" id="index-installing-gawk-Cygwin"></a>
<p>You may also install <code class="command">gawk</code> using the regular Cygwin installer.
In general Cygwin supplies the latest released version.
</p>
<p>Recent versions of Cygwin open all files in binary mode. This means
that you should use &lsquo;<samp class="samp">RS = &quot;\r?\n&quot;</samp>&rsquo; in order to be able to
handle standard MS-Windows text files with carriage-return plus
line-feed line endings.
</p>
<p>The Cygwin environment supports
both the &lsquo;<samp class="samp">|&amp;</samp>&rsquo; operator and TCP/IP networking
(see <a class="pxref" href="#TCP_002fIP-Networking">Using <code class="command">gawk</code> for Network Programming</a>).
</p>
<hr>
</div>
<div class="appendixsubsubsec-level-extent" id="MSYS">
<div class="nav-panel">
<p>
Previous: <a href="#Cygwin" accesskey="p" rel="prev">Using <code class="command">gawk</code> In The Cygwin Environment</a>, Up: <a href="#PC-Installation" accesskey="u" rel="up">Installation on MS-Windows</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsubsec" id="Using-gawk-In-The-MSYS-Environment"><span>B.3.1.5 Using <code class="command">gawk</code> In The MSYS Environment<a class="copiable-link" href="#Using-gawk-In-The-MSYS-Environment"> &para;</a></span></h4>

<p>In the MSYS environment under MS-Windows, <code class="command">gawk</code> automatically
uses binary mode for reading and writing files.  Thus, there is no
need to use the <code class="code">BINMODE</code> variable.
</p>
<p>This can cause problems with other Unix-like components that have
been ported to MS-Windows that expect <code class="command">gawk</code> to do automatic
translation of <code class="code">&quot;\r\n&quot;</code>, because it won&rsquo;t.
</p>
<p>Under MSYS2, compilation using the standard &lsquo;<samp class="samp">./configure &amp;&amp; make</samp>&rsquo;
recipe works &ldquo;out of the box.&rdquo;
</p>
<hr>
</div>
</div>
<div class="appendixsubsec-level-extent" id="OpenVMS-Installation">
<div class="nav-panel">
<p>
Previous: <a href="#PC-Installation" accesskey="p" rel="prev">Installation on MS-Windows</a>, Up: <a href="#Non_002dUnix-Installation" accesskey="u" rel="up">Installation on Other Operating Systems</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Compiling-and-Installing-gawk-on-OpenVMS"><span>B.3.2 Compiling and Installing <code class="command">gawk</code> on OpenVMS<a class="copiable-link" href="#Compiling-and-Installing-gawk-on-OpenVMS"> &para;</a></span></h4>


<a class="index-entry-id" id="index-gawk-OpenVMS-version-of"></a>
<a class="index-entry-id" id="index-installing-gawk-OpenVMS"></a>
<p>This subsection describes how to compile and install <code class="command">gawk</code> under OpenVMS.
</p>

<ul class="mini-toc">
<li><a href="#OpenVMS-Compilation" accesskey="1">Compiling <code class="command">gawk</code> on OpenVMS</a></li>
<li><a href="#OpenVMS-Dynamic-Extensions" accesskey="2">Compiling <code class="command">gawk</code> Dynamic Extensions on OpenVMS</a></li>
<li><a href="#OpenVMS-Installation-Details" accesskey="3">Installing <code class="command">gawk</code> on OpenVMS</a></li>
<li><a href="#OpenVMS-Running" accesskey="4">Running <code class="command">gawk</code> on OpenVMS</a></li>
<li><a href="#OpenVMS-GNV" accesskey="5">The OpenVMS GNV Project</a></li>
</ul>
<hr>
<div class="appendixsubsubsec-level-extent" id="OpenVMS-Compilation">
<div class="nav-panel">
<p>
Next: <a href="#OpenVMS-Dynamic-Extensions" accesskey="n" rel="next">Compiling <code class="command">gawk</code> Dynamic Extensions on OpenVMS</a>, Up: <a href="#OpenVMS-Installation" accesskey="u" rel="up">Compiling and Installing <code class="command">gawk</code> on OpenVMS</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsubsec" id="Compiling-gawk-on-OpenVMS"><span>B.3.2.1 Compiling <code class="command">gawk</code> on OpenVMS<a class="copiable-link" href="#Compiling-gawk-on-OpenVMS"> &para;</a></span></h4>
<a class="index-entry-id" id="index-compiling-gawk-for-OpenVMS"></a>

<p>To compile <code class="command">gawk</code> under OpenVMS, there is a <code class="code">DCL</code> command procedure
that issues all the necessary <code class="code">CC</code> and <code class="code">LINK</code> commands. There is
also a <samp class="file">Makefile</samp> for use with the <code class="code">MMS</code> and <code class="code">MMK</code> utilities.
From the source directory, use either:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">@[.vms]vmsbuild.com</kbd>
</pre></div>

<p>or:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">MMS/DESCRIPTION=[.vms]descrip.mms gawk</kbd>
</pre></div>

<p>or:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">MMK/DESCRIPTION=[.vms]descrip.mms gawk</kbd>
</pre></div>

<p>Note that the <code class="command">vmsbuild.com</code> method of building is no longer being
maintained and is planned to be removed in the future.
</p>
<p><code class="command">MMK</code> is an open source, free, near-clone of <code class="command">MMS</code> and
can better handle ODS-5 volumes with upper- and lowercase file names.
<code class="command">MMK</code> is available from <a class="uref" href="https://github.com/endlesssoftware/mmk">https://github.com/endlesssoftware/mmk</a>.
</p>
<p>With ODS-5 volumes and extended parsing enabled, the case of the target
parameter may need to be exact.
</p>
<p><code class="command">gawk</code> has been tested using these VMS Software, Inc.
Community editions:
</p>
<ul class="itemize mark-bullet">
<li>HP C V7.3-010 on OpenVMS Alpha V8.4-2L1.

</li><li>HP C V7.3-020 on OpenVMS IA64 V8.4-2L3.<a class="footnote" id="DOCF119" href="#FOOT119"><sup>119</sup></a>
</li></ul>

<p>Due to HPE cancelling the Hobbyist licensing program, no more testing is
being done on older releases of OpenVMS.
</p>
<p>See <a class="xref" href="#OpenVMS-GNV">The OpenVMS GNV Project</a> for information on building
<code class="command">gawk</code> as a PCSI kit that is compatible with the GNV product.
</p>
<hr>
</div>
<div class="appendixsubsubsec-level-extent" id="OpenVMS-Dynamic-Extensions">
<div class="nav-panel">
<p>
Next: <a href="#OpenVMS-Installation-Details" accesskey="n" rel="next">Installing <code class="command">gawk</code> on OpenVMS</a>, Previous: <a href="#OpenVMS-Compilation" accesskey="p" rel="prev">Compiling <code class="command">gawk</code> on OpenVMS</a>, Up: <a href="#OpenVMS-Installation" accesskey="u" rel="up">Compiling and Installing <code class="command">gawk</code> on OpenVMS</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsubsec" id="Compiling-gawk-Dynamic-Extensions-on-OpenVMS"><span>B.3.2.2 Compiling <code class="command">gawk</code> Dynamic Extensions on OpenVMS<a class="copiable-link" href="#Compiling-gawk-Dynamic-Extensions-on-OpenVMS"> &para;</a></span></h4>

<p>The extensions that have been ported to OpenVMS can be built using one of
the following commands:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">MMS/DESCRIPTION=[.vms]descrip.mms extensions</kbd>
</pre></div>

<p>or:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">MMK/DESCRIPTION=[.vms]descrip.mms extensions</kbd>
</pre></div>

<p><code class="command">gawk</code> uses <code class="code">AWKLIBPATH</code> as either an environment variable
or a logical name to find the dynamic extensions.
</p>
<p>Dynamic extensions need to be compiled with the same compiler options for
floating-point, pointer size, and symbol name handling as were used
to compile <code class="command">gawk</code> itself.
Alpha and Itanium should use IEEE floating point.  The pointer size is 32 bits,
and the symbol name handling should be exact case with CRC shortening for
symbols longer than 32 bits.
</p>
<div class="example">
<pre class="example-preformatted">/name=(as_is,short)
/float=ieee/ieee_mode=denorm_results
</pre></div>

<p>Compile-time macros need to be defined before the first OpenVMS-supplied
header file is included, as follows:
</p>
<div class="example">
<pre class="example-preformatted">#if (__CRTL_VER &gt;= 70200000)
#define _LARGEFILE 1
#endif

#ifdef __CRTL_VER
#if __CRTL_VER &gt;= 80200000
#define _USE_STD_STAT 1
#endif
#endif
</pre></div>

<p>If you are writing your own extensions to run on OpenVMS, you must supply these
definitions yourself. The <samp class="file">config.h</samp> file created when building <code class="command">gawk</code>
on OpenVMS does this for you; if instead you use that file or a similar one, then you
must remember to include it before any OpenVMS-supplied header files.
</p>
<hr>
</div>
<div class="appendixsubsubsec-level-extent" id="OpenVMS-Installation-Details">
<div class="nav-panel">
<p>
Next: <a href="#OpenVMS-Running" accesskey="n" rel="next">Running <code class="command">gawk</code> on OpenVMS</a>, Previous: <a href="#OpenVMS-Dynamic-Extensions" accesskey="p" rel="prev">Compiling <code class="command">gawk</code> Dynamic Extensions on OpenVMS</a>, Up: <a href="#OpenVMS-Installation" accesskey="u" rel="up">Compiling and Installing <code class="command">gawk</code> on OpenVMS</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsubsec" id="Installing-gawk-on-OpenVMS"><span>B.3.2.3 Installing <code class="command">gawk</code> on OpenVMS<a class="copiable-link" href="#Installing-gawk-on-OpenVMS"> &para;</a></span></h4>

<p>To use <code class="command">gawk</code>, all you need is a &ldquo;foreign&rdquo; command, which is a
<code class="code">DCL</code> symbol whose value begins with a dollar sign. For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">GAWK :== $disk1:[gnubin]gawk</kbd>
</pre></div>

<p>Substitute the actual location of <code class="command">gawk.exe</code> for
&lsquo;<samp class="samp">$disk1:[gnubin]</samp>&rsquo;. The symbol should be placed in the
<samp class="file">login.com</samp> of any user who wants to run <code class="command">gawk</code>,
so that it is defined every time the user logs on.
Alternatively, the symbol may be placed in the system-wide
<samp class="file">sylogin.com</samp> procedure, which allows all users
to run <code class="command">gawk</code>.
</p>
<p>If your <code class="command">gawk</code> was installed by a PCSI kit into the
<samp class="file">GNV$GNU:</samp> directory tree, the program will be known as
<samp class="file">GNV$GNU:[bin]gnv$gawk.exe</samp> and the help file will be
<samp class="file">GNV$GNU:[vms_help]gawk.hlp</samp>.
</p>
<p>The PCSI kit also installs a <samp class="file">GNV$GNU:[vms_bin]gawk_verb.cld</samp> file
that can be used to add <code class="command">gawk</code> and <code class="command">awk</code> as DCL commands.
</p>
<p>For just the current process you can use:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">set command gnv$gnu:[vms_bin]gawk_verb.cld</kbd>
</pre></div>

<p>Or the system manager can use <samp class="file">GNV$GNU:[vms_bin]gawk_verb.cld</samp> to
add the <code class="command">gawk</code> and <code class="command">awk</code> commands to the system-wide &lsquo;<samp class="samp">DCLTABLES</samp>&rsquo;.
</p>
<p>The DCL syntax is documented in the <samp class="file">gawk.hlp</samp> file.
</p>
<p>Optionally, the <samp class="file">gawk.hlp</samp> entry can be loaded into an OpenVMS help library:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">LIBRARY/HELP sys$help:helplib [.vms]gawk.hlp</kbd>
</pre></div>

<p>(You may want to substitute a site-specific help library rather than
the standard OpenVMS library &lsquo;<samp class="samp">HELPLIB</samp>&rsquo;.)  After loading the help text,
the command:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">HELP GAWK</kbd>
</pre></div>

<p>provides information about both the <code class="command">gawk</code> implementation and the
<code class="command">awk</code> programming language.
</p>
<p>The logical name &lsquo;<samp class="samp">AWK_LIBRARY</samp>&rsquo; can designate a default location
for <code class="command">awk</code> program files.  For the <samp class="option">-f</samp> option, if the specified
file name has no device or directory path information in it, <code class="command">gawk</code>
looks in the current directory first, then in the directory specified
by the translation of &lsquo;<samp class="samp">AWK_LIBRARY</samp>&rsquo; if the file is not found.
If, after searching in both directories, the file still is not found,
<code class="command">gawk</code> appends the suffix &lsquo;<samp class="samp">.awk</samp>&rsquo; to the file name and retries
the file search.  If &lsquo;<samp class="samp">AWK_LIBRARY</samp>&rsquo; has no definition, a default value
of &lsquo;<samp class="samp">SYS$LIBRARY:</samp>&rsquo; is used for it.
</p>
<hr>
</div>
<div class="appendixsubsubsec-level-extent" id="OpenVMS-Running">
<div class="nav-panel">
<p>
Next: <a href="#OpenVMS-GNV" accesskey="n" rel="next">The OpenVMS GNV Project</a>, Previous: <a href="#OpenVMS-Installation-Details" accesskey="p" rel="prev">Installing <code class="command">gawk</code> on OpenVMS</a>, Up: <a href="#OpenVMS-Installation" accesskey="u" rel="up">Compiling and Installing <code class="command">gawk</code> on OpenVMS</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsubsec" id="Running-gawk-on-OpenVMS"><span>B.3.2.4 Running <code class="command">gawk</code> on OpenVMS<a class="copiable-link" href="#Running-gawk-on-OpenVMS"> &para;</a></span></h4>

<p>Command-line parsing and quoting conventions are significantly different
on OpenVMS, so examples in this Web page or from other sources often need minor
changes.  They <em class="emph">are</em> minor though, and all <code class="command">awk</code> programs
should run correctly.
</p>
<p>Here are a couple of trivial tests:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">gawk -- &quot;BEGIN {print &quot;&quot;Hello, World!&quot;&quot;}&quot;</kbd>
$ <kbd class="kbd">gawk -&quot;W&quot; version</kbd>
! could also be -&quot;W version&quot; or &quot;-W version&quot;
</pre></div>

<p>Note that uppercase and mixed-case text must be quoted.
</p>
<p>The OpenVMS port of <code class="command">gawk</code> includes a <code class="code">DCL</code>-style interface in addition
to the original shell-style interface (see the help entry for details).
One side effect of dual command-line parsing is that if there is only a
single parameter (as in the quoted program string), the command
becomes ambiguous.  To work around this, the normally optional <samp class="option">--</samp>
flag is required to force Unix-style parsing rather than <code class="code">DCL</code> parsing.
If any other dash-type options (or multiple parameters such as data files to
process) are present, there is no ambiguity and <samp class="option">--</samp> can be omitted.
</p>
<a class="index-entry-id" id="index-exit-status_002c-of-gawk-on-OpenVMS"></a>
<p>The <code class="code">exit</code> value is a Unix-style value and is encoded into an OpenVMS exit
status value when the program exits.
</p>
<p>The OpenVMS severity bits will be set based on the <code class="code">exit</code> value.
A failure is indicated by 1, and OpenVMS sets the <code class="code">ERROR</code> status.
A fatal error is indicated by 2, and OpenVMS sets the <code class="code">FATAL</code> status.
All other values will have the <code class="code">SUCCESS</code> status.  The exit value is
encoded to comply with OpenVMS coding standards and will have the
<code class="code">C_FACILITY_NO</code> of <code class="code">0x350000</code> with the constant <code class="code">0xA000</code>
added to the number shifted over by 3 bits to make room for the severity codes.
</p>
<p>To extract the actual <code class="command">gawk</code> exit code from the OpenVMS status, use:
</p>
<div class="example">
<pre class="example-preformatted">unix_status = (vms_status .and. %x7f8) / 8
</pre></div>

<p>A C program that uses <code class="code">exec()</code> to call <code class="command">gawk</code> will get the original
Unix-style exit value.
</p>
<p>OpenVMS reports time values in GMT unless one of the <code class="code">SYS$TIMEZONE_RULE</code>
or <code class="code">TZ</code> logical names is set.
</p>
<a class="index-entry-id" id="index-search-paths-2"></a>
<a class="index-entry-id" id="index-search-paths-for-source-files-3"></a>
<a class="index-entry-id" id="index-AWKPATH-environment-variable-11"></a>
<a class="index-entry-id" id="index-environment-variables-AWKPATH-11"></a>
<p>The default search path, when looking for <code class="command">awk</code> program files specified
by the <samp class="option">-f</samp> option, is <code class="code">&quot;SYS$DISK:[],AWK_LIBRARY:&quot;</code>.  The logical
name <code class="env">AWKPATH</code> can be used to override this default.  The format
of <code class="env">AWKPATH</code> is a comma-separated list of directory specifications.
When defining it, the value should be quoted so that it retains a single
translation and not a multitranslation <code class="code">RMS</code> searchlist.
</p>
<a class="index-entry-id" id="index-redirection-on-OpenVMS"></a>
<p>This restriction also applies to running <code class="command">gawk</code> under GNV,
as redirection is always to a DCL command.
</p>
<p>If you are redirecting data to an OpenVMS command or utility, the current
implementation requires setting up an OpenVMS foreign command that runs
a command file before invoking <code class="command">gawk</code>.
(This restriction may be removed in a future release of <code class="command">gawk</code> on OpenVMS.)
</p>
<p>Without this command file, the input data will also appear prepended
to the output data.
</p>
<p>This also allows simulating POSIX commands that are not found on OpenVMS or the
use of GNV utilities.
</p>
<p>The example below is for <code class="command">gawk</code> redirecting data to the OpenVMS
<code class="command">sort</code> command.
</p>
<div class="example">
<pre class="example-preformatted">$ sort = &quot;@device:[dir]vms_gawk_sort.com&quot;
</pre></div>

<p>The command file needs to be of the format in the example below.
</p>
<p>The first line inhibits the passed input data from also showing up in the
output.  It must be in the format in the example.
</p>
<p>The next line creates a foreign command that overrides the outer foreign
command which prevents an infinite recursion of command files.
</p>
<p>The next to the last command redirects <code class="code">sys$input</code> to be
<code class="code">sys$command</code>, in order to pick up the data that is being redirected
to the command.
</p>
<p>The last line runs the actual command.  It must be the last command as the data
redirected from <code class="command">gawk</code> will be read when the command file ends.
</p>
<div class="example">
<pre class="example-preformatted">$!'f$verify(0,0)'
$ sort := sort
$ define/user sys$input sys$command:
$ sort sys$input: sys$output:
</pre></div>

<hr>
</div>
<div class="appendixsubsubsec-level-extent" id="OpenVMS-GNV">
<div class="nav-panel">
<p>
Previous: <a href="#OpenVMS-Running" accesskey="p" rel="prev">Running <code class="command">gawk</code> on OpenVMS</a>, Up: <a href="#OpenVMS-Installation" accesskey="u" rel="up">Compiling and Installing <code class="command">gawk</code> on OpenVMS</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsubsec" id="The-OpenVMS-GNV-Project"><span>B.3.2.5 The OpenVMS GNV Project<a class="copiable-link" href="#The-OpenVMS-GNV-Project"> &para;</a></span></h4>

<p>The OpenVMS GNV package provides a build environment similar to POSIX with ports
of a collection of open source tools.  The <code class="command">gawk</code> found in the GNV
base kit is an older port.  Currently, the GNV project is being reorganized
to supply individual PCSI packages for each component.
See <a class="uref" href="https://sourceforge.net/p/gnv/wiki/InstallingGNVPackages/">https://sourceforge.net/p/gnv/wiki/InstallingGNVPackages/</a>.<!-- /@w -->
</p>
<p>The normal build procedure for <code class="command">gawk</code> produces a program that
is suitable for use with GNV.
</p>
<p>The file <samp class="file">vms/gawk_build_steps.txt</samp> in the distribution documents
the procedure for building an OpenVMS PCSI kit that is compatible with GNV.
</p>
<hr>
</div>
</div>
</div>
<div class="appendixsec-level-extent" id="Bugs">
<div class="nav-panel">
<p>
Next: <a href="#Other-Versions" accesskey="n" rel="next">Other Freely Available <code class="command">awk</code> Implementations</a>, Previous: <a href="#Non_002dUnix-Installation" accesskey="p" rel="prev">Installation on Other Operating Systems</a>, Up: <a href="#Installation" accesskey="u" rel="up">Installing <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Reporting-Problems-and-Bugs"><span>B.4 Reporting Problems and Bugs<a class="copiable-link" href="#Reporting-Problems-and-Bugs"> &para;</a></span></h3>
<a class="index-entry-id" id="index-archaeologists"></a>
<blockquote class="quotation">
<p><i class="i">There is nothing more dangerous than a bored archaeologist.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Douglas Adams, <cite class="cite">The Hitchhiker&rsquo;s Guide to the Galaxy</cite></em>
</div>
<a class="index-entry-id" id="index-debugging-gawk_002c-bug-reports"></a>
<a class="index-entry-id" id="index-troubleshooting-gawk-bug-reports"></a>
<p>If you have problems with <code class="command">gawk</code> or think that you have found a bug,
report it to the developers; we cannot promise to do anything,
but we might well want to fix it.
</p>

<ul class="mini-toc">
<li><a href="#Bug-definition" accesskey="1">Defining What Is and What Is Not A Bug</a></li>
<li><a href="#Bug-address" accesskey="2">Submitting Bug Reports</a></li>
<li><a href="#Usenet" accesskey="3">Please Don&rsquo;t Post Bug Reports to USENET</a></li>
<li><a href="#Performance-bugs" accesskey="4">What To Do If You Think There Is A Performance Issue</a></li>
<li><a href="#Asking-for-help" accesskey="5">Where To Send Non-bug Questions</a></li>
<li><a href="#Maintainers" accesskey="6">Reporting Problems with Non-Unix Ports</a></li>
</ul>
<hr>
<div class="appendixsubsec-level-extent" id="Bug-definition">
<div class="nav-panel">
<p>
Next: <a href="#Bug-address" accesskey="n" rel="next">Submitting Bug Reports</a>, Up: <a href="#Bugs" accesskey="u" rel="up">Reporting Problems and Bugs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Defining-What-Is-and-What-Is-Not-A-Bug"><span>B.4.1 Defining What Is and What Is Not A Bug<a class="copiable-link" href="#Defining-What-Is-and-What-Is-Not-A-Bug"> &para;</a></span></h4>

<p>Before talking about reporting bugs, let&rsquo;s define what is a bug,
and what is not.
</p>
<p>A bug is:
</p>
<ul class="itemize mark-bullet">
<li>When <code class="command">gawk</code> behaves differently from what&rsquo;s described
in the POSIX standard, and that difference is not mentioned
in this Web page as being done on purpose.

</li><li>When <code class="command">gawk</code> behaves differently from what&rsquo;s described
in this Web page.

</li><li>When <code class="command">gawk</code> behaves differently from other <code class="command">awk</code>
implementations in particular circumstances, and that behavior cannot
be attributed to an additional feature in <code class="command">gawk</code>.

</li><li>Something that is obviously wrong, such as a core dump.

</li><li>When this Web page is unclear or ambiguous about a particular
feature&rsquo;s behavior.
</li></ul>

<p>The following things are <em class="emph">not</em> bugs, and should not be reported
to the bug mailing list.  You can ask about them on the &ldquo;help&rdquo; mailing
list (see <a class="pxref" href="#Asking-for-help">Where To Send Non-bug Questions</a>), but don&rsquo;t be surprised if you get an
answer of the form &ldquo;that&rsquo;s how <code class="command">gawk</code> behaves and it isn&rsquo;t
going to change.&rdquo; Here&rsquo;s the list:
</p>
<ul class="itemize mark-bullet">
<li>Missing features, for any definition of <em class="dfn">feature</em>. For example,
additional built-in arithmetic functions, or additional ways to split
fields or records, or anything else.

<p>The number of features that <code class="command">gawk</code> does <em class="emph">not</em> have is
by definition infinite.  It cannot be all things to all people.
In short, just because <code class="command">gawk</code> doesn&rsquo;t do what <em class="emph">you</em>
think it should, it&rsquo;s not necessarily a bug.
</p>
</li><li>Behaviors that are defined by the POSIX standard and/or for historical
compatibility with Unix <code class="command">awk</code>.  Even if you happen to dislike
those behaviors, they&rsquo;re not going to change: changing them would
break millions of existing <code class="command">awk</code> programs.

</li><li>Behaviors that differ from how it&rsquo;s done in other languages. <code class="command">awk</code>
and <code class="command">gawk</code> stand on their own and do not have to follow the crowd.
This is particularly true when the requested behavior change would break
backwards compatibility.

<p>This applies also to differences in behavior between <code class="command">gawk</code>
and other language compilers and interpreters, such as wishes for more
detailed descriptions of what the problem is when a syntax error is
encountered.
</p>
</li><li>Documentation issues of the form &ldquo;the manual doesn&rsquo;t tell me how to
do XYZ.&rdquo;  The manual is not a cookbook to solve every little problem
you may have.  Its purpose is to teach you how to solve your problems
on your own.

</li><li>General questions and discussion about <code class="command">awk</code> programming or
why <code class="command">gawk</code> behaves the way it does. For that use the &ldquo;help&rdquo;
mailing list: see <a class="ref" href="#Asking-for-help">Where To Send Non-bug Questions</a>.
</li></ul>

<p>For more information, see <a class="uref" href="http://www.skeeve.com/fork-my-code.html"><cite class="cite">Fork My Code, Please!&mdash;An Open Letter To Those of You Who Are Unhappy</cite></a>,
by Arnold Robbins and Chet Ramey.
</p>
<a class="index-entry-id" id="index-sidebar-A-Note-About-Fuzzers"></a>
<table class="cartouche" border="1"><tr><th>
A Note About Fuzzers</th></tr><tr><td>
<p>In recent years, people have been running &ldquo;fuzzers&rdquo; to generate
invalid <code class="command">awk</code> programs in order to find and report (so-called)
bugs in <code class="command">gawk</code>.
</p>
<p>In general, such reports are not of much practical use.  The programs
they create are not realistic and the bugs found are generally from
some kind of memory corruption that is fatal anyway.
</p>
<p>So, if you want to run a fuzzer against <code class="command">gawk</code> and report the
results, you may do so, but be aware that such reports don&rsquo;t carry the
same weight as reports of real bugs do.
</p></td></tr></table>

<hr>
</div>
<div class="appendixsubsec-level-extent" id="Bug-address">
<div class="nav-panel">
<p>
Next: <a href="#Usenet" accesskey="n" rel="next">Please Don&rsquo;t Post Bug Reports to USENET</a>, Previous: <a href="#Bug-definition" accesskey="p" rel="prev">Defining What Is and What Is Not A Bug</a>, Up: <a href="#Bugs" accesskey="u" rel="up">Reporting Problems and Bugs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Submitting-Bug-Reports"><span>B.4.2 Submitting Bug Reports<a class="copiable-link" href="#Submitting-Bug-Reports"> &para;</a></span></h4>

<p>Before reporting a bug, make sure you have really found a genuine bug.
</p>
<p>Here are the steps for submitting a bug report. Following them will
make both your life and the lives of the maintainers much easier.
</p>
<ol class="enumerate">
<li> Make sure that what you want to report is appropriate.
See <a class="xref" href="#Bug-definition">Defining What Is and What Is Not A Bug</a>.  If it&rsquo;s not, you are wasting your
time and ours.

</li><li> Verify that you have the latest version of <code class="command">gawk</code>.
Many bugs (usually subtle ones) are fixed at each release, and if yours
is out-of-date, the problem may already have been solved.

<a class="index-entry-id" id="index-LC_005fALL-environment-variable-2"></a>
<a class="index-entry-id" id="index-environment-variables-LC_005fALL-2"></a>
</li><li> Please see if setting the environment variable <code class="env">LC_ALL</code>
to <code class="code">LC_ALL=C</code> causes things to behave as you expect. If so, it&rsquo;s
a locale issue, and may or may not really be a bug.

</li><li> Carefully reread the documentation and see if it says you can do
what you&rsquo;re trying to do.  If it&rsquo;s not clear whether you should be able
to do something or not, report that too; it&rsquo;s a bug in the documentation!

</li><li> Before reporting a bug or trying to fix it yourself, try to isolate it
to the smallest possible <code class="command">awk</code> program and input data file that
reproduce the problem.

</li><li> <a class="index-entry-id" id="index-gawkbug-utility"></a>
Use the <code class="command">gawkbug</code> program to submit the bug report. This
program sets up a bug report template and opens it in your editor.
You then need to edit it appropriately to include:

<ul class="itemize mark-bullet">
<li>The program and data file.

</li><li>The exact results
<code class="command">gawk</code> gave you.  Also say what you expected to occur; this helps
us decide whether the problem is really in the documentation.

</li><li>A fix if you have one.
</li></ul>

</li><li> Do <em class="emph">not</em> send screenshots. Instead, use copy/paste to send text, or
send files.


</li><li> Please be sure to send all mail in <em class="emph">plain text</em>,
not (or not exclusively) in HTML.

</li><li> <em class="emph">All email must be in English. This is the only language
understood in common by all the maintainers.</em>
</li></ol>

<a class="index-entry-id" id="index-bug_002dgawk_0040gnu_002eorg-bug-reporting-address"></a>
<a class="index-entry-id" id="index-email-address-for-bug-reports_002c-bug_002dgawk_0040gnu_002eorg"></a>
<a class="index-entry-id" id="index-bug-reports_002c-email-address_002c-bug_002dgawk_0040gnu_002eorg"></a>
<p>The <code class="command">gawkbug</code> program sends email to
&ldquo;bug dash gawk at gnu dot org&rdquo;.
</p>
<p>The <code class="command">gawk</code> maintainers subscribe to this address, and
thus they will receive your bug report.
Do <em class="emph">not</em> send mail to the maintainers directly;
the bug reporting address is preferred because the
email list is archived at the GNU Project.
</p>
<p>If you are using OpenVMS or the MinGW build of <code class="command">gawk</code>,
the <code class="command">gawkbug</code> script won&rsquo;t be available.  Please send
the previously listed information directly in an email to
the bug list.  Please send any test program or data files
as attachments, instead of inline in the email, to avoid
their being mangled by various mail systems.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> Many distributions of GNU/Linux and the various BSD-based operating systems
have their own bug reporting systems.  If you report a bug using your distribution&rsquo;s
bug reporting system, you should also send a copy to
&ldquo;bug dash gawk at gnu dot org&rdquo;.
</p>
<p>This is for two reasons.  First, although some distributions forward
bug reports &ldquo;upstream&rdquo; to the GNU mailing list, many don&rsquo;t, so there is a good
chance that the <code class="command">gawk</code> maintainers won&rsquo;t even see the bug report!  Second,
mail to the GNU list is archived, and having everything at the GNU Project
keeps things self-contained and not dependent on other organizations.
</p></blockquote>

<p>Please note: We ask that you follow the
<a class="uref" href="https://gnu.org/philosophy/kind-communication.html">GNU Kind Communication Guidelines</a> in your correspondence on the
list (as well as off of it).
</p>
<hr>
</div>
<div class="appendixsubsec-level-extent" id="Usenet">
<div class="nav-panel">
<p>
Next: <a href="#Performance-bugs" accesskey="n" rel="next">What To Do If You Think There Is A Performance Issue</a>, Previous: <a href="#Bug-address" accesskey="p" rel="prev">Submitting Bug Reports</a>, Up: <a href="#Bugs" accesskey="u" rel="up">Reporting Problems and Bugs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Please-Don_0027t-Post-Bug-Reports-to-USENET"><span>B.4.3 Please Don&rsquo;t Post Bug Reports to USENET<a class="copiable-link" href="#Please-Don_0027t-Post-Bug-Reports-to-USENET"> &para;</a></span></h4>

<blockquote class="quotation">
<p>I gave up on Usenet a couple of years ago and haven&rsquo;t really looked back.
It&rsquo;s like sports talk radio&mdash;you feel smarter for not having read it.
</p></blockquote>
<div class="center">&mdash; <em class="emph">Chet Ramey</em>
</div>
<a class="index-entry-id" id="index-comp_002elang_002eawk-newsgroup"></a>
<p>Please do <em class="emph">not</em> try to report bugs in <code class="command">gawk</code> by posting to the
Usenet/Internet newsgroup <code class="code">comp.lang.awk</code>.  Although some of the
<code class="command">gawk</code> developers occasionally read this news group, the primary
<code class="command">gawk</code> maintainer no longer does.  Thus it&rsquo;s virtually guaranteed
that he will <em class="emph">not</em> see your posting.
</p>
<p>If you really don&rsquo;t care about the previous paragraph and continue to
post bug reports in <code class="code">comp.lang.awk</code>, then understand that you&rsquo;re
not reporting bugs, you&rsquo;re just whining.
</p>
<p>Similarly, posting bug reports or questions in web forums (such
as <a class="uref" href="https://stackoverflow.com/">Stack Overflow</a>) may get you
an answer, but it won&rsquo;t be from the <code class="command">gawk</code> maintainers,
who do not spend their time in web forums.  The steps described here are
the only officially recognized way for reporting bugs.  Really.
</p>

<hr>
</div>
<div class="appendixsubsec-level-extent" id="Performance-bugs">
<div class="nav-panel">
<p>
Next: <a href="#Asking-for-help" accesskey="n" rel="next">Where To Send Non-bug Questions</a>, Previous: <a href="#Usenet" accesskey="p" rel="prev">Please Don&rsquo;t Post Bug Reports to USENET</a>, Up: <a href="#Bugs" accesskey="u" rel="up">Reporting Problems and Bugs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="What-To-Do-If-You-Think-There-Is-A-Performance-Issue"><span>B.4.4 What To Do If You Think There Is A Performance Issue<a class="copiable-link" href="#What-To-Do-If-You-Think-There-Is-A-Performance-Issue"> &para;</a></span></h4>

<a class="index-entry-id" id="index-performance_002c-checking-issues"></a>
<a class="index-entry-id" id="index-profiling_002c-compiling-gawk-for"></a>
<p>If you think that <code class="command">gawk</code> is too slow at doing a particular task,
you should investigate before sending in a bug report. Here are the steps
to follow:
</p>
<ol class="enumerate">
<li> Run <code class="command">gawk</code> with the <samp class="option">--profile</samp> option (see <a class="pxref" href="#Options">Command-Line Options</a>)
to see what your
program is doing. It may be that you have written it in an inefficient manner.
For example, you may be doing something for every record that could be done
just once, for every file.
(Use a <code class="code">BEGINFILE</code> rule; see <a class="pxref" href="#BEGINFILE_002fENDFILE">The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a>.)
Or you may be doing something for every file that only needs to be done
once per run of the program.
(Use a <code class="code">BEGIN</code> rule; see <a class="pxref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>.)

</li><li> If profiling at the <code class="command">awk</code> level doesn&rsquo;t help, then you will
need to compile <code class="command">gawk</code> itself for profiling at the C language level.

<p>To do that, start with the latest released version of
<code class="command">gawk</code>. Unpack the source code in a new directory, and configure
it:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">tar -xpzvf gawk-X.Y.Z.tar.gz</kbd>
-| ...                                <i class="i">Output omitted</i>
$ <kbd class="kbd">cd gawk-X.Y.Z</kbd>
$ <kbd class="kbd">./configure</kbd>
-| ...                                <i class="i">Output omitted</i>
</pre></div>

</li><li> Edit the files <samp class="file">Makefile</samp> and <samp class="file">support/Makefile</samp>.
Change every instance of <samp class="option">-O2</samp> or <samp class="option">-O</samp> to <samp class="option">-pg</samp>.
This causes <code class="command">gawk</code> to be compiled for profiling.

</li><li> Compile the program by running the <code class="command">make</code> command:

<div class="example">
<div class="group"><pre class="example-preformatted">$ <kbd class="kbd">make</kbd>
-| ...                                <i class="i">Output omitted</i>
</pre></div></div>

</li><li> Run the freshly compiled <code class="command">gawk</code> on a <em class="emph">real</em> program,
using <em class="emph">real</em> data.  Using an artificial program to try to time one
particular feature of <code class="command">gawk</code> is useless; real <code class="command">awk</code> programs
generally spend most of their time doing I/O, not computing.  If you want to prove
that something is slow, it <em class="emph">must</em> be done using a real program and real data.

<p>Use a data file that is large enough for the statistical profiling to measure
where <code class="command">gawk</code> spends its time. It should be at least 100 megabytes in size.
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">./gawk -f realprogram.awk realdata &gt; /dev/null</kbd>
</pre></div>

</li><li> When done, you should have a file in the current directory named <samp class="file">gmon.out</samp>.
Run the command &lsquo;<samp class="samp">gprof gawk gmon.out &gt; gprof.out</samp>&rsquo;.

</li><li> Submit a bug report explaining what you think is slow. Include the <samp class="file">gprof.out</samp>
file with it.

<p>Preferably, you should also submit the program and the data, or else indicate where to
get the data if the file is large.
</p>
</li><li> If you have not submitted your program and data, be prepared to apply patches and
rerun the profiling in order to see if the patches were effective.

</li></ol>

<p>If you are incapable or unwilling to do the steps listed above, then you will
just have to live with <code class="command">gawk</code> as it is.
</p>
<hr>
</div>
<div class="appendixsubsec-level-extent" id="Asking-for-help">
<div class="nav-panel">
<p>
Next: <a href="#Maintainers" accesskey="n" rel="next">Reporting Problems with Non-Unix Ports</a>, Previous: <a href="#Performance-bugs" accesskey="p" rel="prev">What To Do If You Think There Is A Performance Issue</a>, Up: <a href="#Bugs" accesskey="u" rel="up">Reporting Problems and Bugs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Where-To-Send-Non_002dbug-Questions"><span>B.4.5 Where To Send Non-bug Questions<a class="copiable-link" href="#Where-To-Send-Non_002dbug-Questions"> &para;</a></span></h4>

<p>If you have questions related to <code class="command">awk</code> programming, or why <code class="command">gawk</code>
behaves a certain way, or any other <code class="command">awk</code>- or <code class="command">gawk</code>-related issue,
please <em class="emph">do not</em> send it to the bug reporting address.
</p>
<p>As of July, 2021, there is a separate mailing list for this purpose:
&ldquo;help dash gawk at gnu dot org&rdquo;.
Anything that is not a bug report should be sent to that list.
</p>
<blockquote class="quotation">
<p><b class="b">NOTE:</b> If you disregard these directions and send non-bug mails to the bug list,
you will be told to use the help list.
After two such requests you will be silently <em class="emph">blacklisted</em> from the bug list.
</p></blockquote>

<p>Please note: As with the bug list, we ask that you follow the
<a class="uref" href="https://gnu.org/philosophy/kind-communication.html">GNU Kind Communication Guidelines</a> in your correspondence on the help
list (as well as off of it).
</p>
<a class="index-entry-id" id="index-Proulx_002c-Bob"></a>
<p>If you wish to the subscribe to the list, in order to help out
others, or to learn from others, here are instructions, courtesy
of Bob Proulx:
</p>
<dl class="table">
<dt><em class="emph">Subscribe by email</em></dt>
<dd>
<p>Send an email message to
&ldquo;help dash gawk dash request at gnu dot org&rdquo;
with &ldquo;subscribe&rdquo; in
the body of the message.  The subject does not matter and is not used.
</p>
</dd>
<dt><em class="emph">Subscribe by web form</em></dt>
<dd>
<p>To use the web interface visit
<a class="uref" href="https://lists.gnu.org/mailman/listinfo/help-gawk">the list information page</a>.
Use the
subscribe form to fill out your email address and submit using the
<code class="code">Subscribe</code> button.
</p>
</dd>
<dt><em class="emph">Reply to the confirmation message</em></dt>
<dd>
<p>In both cases then reply to the confirmation message that is sent to
your address in reply.
</p></dd>
</dl>

<p>Bob mentions that you may also use email for subscribing and
unsubscribing. For example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">echo help | mailx -s request help-gawk-request@gnu.org</kbd>
$ <kbd class="kbd">echo subscribe | mailx -s request help-gawk-request@gnu.org</kbd>
$ <kbd class="kbd">echo unsubscribe | mailx -s request help-gawk-request@gnu.org</kbd>
</pre></div>

<hr>
</div>
<div class="appendixsubsec-level-extent" id="Maintainers">
<div class="nav-panel">
<p>
Previous: <a href="#Asking-for-help" accesskey="p" rel="prev">Where To Send Non-bug Questions</a>, Up: <a href="#Bugs" accesskey="u" rel="up">Reporting Problems and Bugs</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Reporting-Problems-with-Non_002dUnix-Ports"><span>B.4.6 Reporting Problems with Non-Unix Ports<a class="copiable-link" href="#Reporting-Problems-with-Non_002dUnix-Ports"> &para;</a></span></h4>

<p>If you find bugs in one of the non-Unix ports of <code class="command">gawk</code>,
send an email to the bug list, with a copy to the
person who maintains that port.  The maintainers are named in the following list,
as well as in the <samp class="file">README</samp> file in the <code class="command">gawk</code> distribution.
Information in the <samp class="file">README</samp> file should be considered authoritative
if it conflicts with this Web page.
</p>
<p>The people maintaining the various <code class="command">gawk</code> ports are:
</p>
<a class="index-entry-id" id="index-Buening_002c-Andreas-2"></a>
<a class="index-entry-id" id="index-Malmberg_002c-John-2"></a>
<a class="index-entry-id" id="index-G_002e_002c-Daniel-Richard-1"></a>
<a class="index-entry-id" id="index-Robbins-Arnold-6"></a>
<a class="index-entry-id" id="index-Zaretskii_002c-Eli-2"></a>
<table class="multitable">
<tbody><tr><td>Unix and POSIX systems</td><td>Arnold Robbins, &ldquo;arnold at skeeve dot com&rdquo;</td></tr>
<tr><td>MS-Windows with MinGW</td><td>Eli Zaretskii, &ldquo;eliz at gnu dot org&rdquo;</td></tr>
<tr><td>OpenVMS</td><td>John Malmberg, &ldquo;wb8tyw at qsl dot net&rdquo;</td></tr>
<tr><td>z/OS (OS/390)</td><td>Daniel Richard G. &ldquo;skunk at iSKUNK dot ORG&rdquo;</td></tr>
</tbody>
</table>

<p>If your bug is also reproducible under Unix, send a copy of your
report to the &ldquo;bug dash gawk at gnu dot org&rdquo; email list as well.
</p>
<hr>
</div>
</div>
<div class="appendixsec-level-extent" id="Other-Versions">
<div class="nav-panel">
<p>
Next: <a href="#Installation-summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Bugs" accesskey="p" rel="prev">Reporting Problems and Bugs</a>, Up: <a href="#Installation" accesskey="u" rel="up">Installing <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Other-Freely-Available-awk-Implementations"><span>B.5 Other Freely Available <code class="command">awk</code> Implementations<a class="copiable-link" href="#Other-Freely-Available-awk-Implementations"> &para;</a></span></h3>
<a class="index-entry-id" id="index-awk-implementations"></a>
<a class="index-entry-id" id="index-Brennan_002c-Michael-5"></a>
<blockquote class="quotation">
<p><i class="i">It&rsquo;s kind of fun to put comments like this in your awk code:</i><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="code">// Do C++ comments work? answer: yes! of course</code>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Michael Brennan</em>
</div>

<p>There are a number of other freely available <code class="command">awk</code> implementations.
This section briefly describes where to get them:
</p>
<dl class="table">
<dd><a class="index-entry-id" id="index-Kernighan_002c-Brian-4"></a>
<a class="index-entry-id" id="index-source-code-Brian-Kernighan_0027s-awk"></a>
<a class="index-entry-id" id="index-awk-versions-of-2"></a>
<a class="index-entry-id" id="index-Brian-Kernighan_0027s-awk-source-code"></a>
</dd>
<dt>Unix <code class="command">awk</code></dt>
<dd><p>Brian Kernighan, one of the original designers of Unix <code class="command">awk</code>,
has made his implementation of
<code class="command">awk</code> freely available.
You can retrieve it from GitHub:
</p>
<a class="index-entry-id" id="index-git-utility-1"></a>
<div class="example">
<pre class="example-preformatted">git clone https://github.com/onetrueawk/awk bwkawk
</pre></div>

<p>This command creates a copy of the <a class="uref" href="https://git-scm.com">Git</a>
repository in a directory named <samp class="file">bwkawk</samp>.  If you omit the last argument
from the <code class="command">git</code> command line, the repository copy is created in a
directory named <samp class="file">awk</samp>.
</p>
<p>This version requires an ISO C (1990 standard) compiler; the C compiler
from GCC (the GNU Compiler Collection) works quite nicely.
</p>
<p>To build it, review the settings in the <samp class="file">makefile</samp>, and then just run
<code class="command">make</code>.  Note that the result of compilation is named
<code class="command">a.out</code>; you will have to rename it to something reasonable.
</p>
<p>See <a class="xref" href="#Common-Extensions">Common Extensions Summary</a>
for a list of extensions in this <code class="command">awk</code> that are not in POSIX <code class="command">awk</code>.
</p>
<a class="index-entry-id" id="index-Aho_002c-Alfred-2"></a>
<a class="index-entry-id" id="index-Weinberger_002c-Peter-2"></a>
<a class="index-entry-id" id="index-Kernighan_002c-Brian-5"></a>
<p>In 2023, Brian Kernighan, along with Al Aho and Peter Weinberger, published
a second edition of their book on <code class="command">awk</code>.  Professor Kernighan
also maintains a <a class="uref" href="https://awk.dev">companion web site</a> for the book.
A copy of all the book&rsquo;s programs are available there for download.
</p>
<a class="index-entry-id" id="index-Bornstein_002c-Dan"></a>
<p>As a side note, Dan Bornstein has created a Git repository tracking
all the versions of BWK <code class="command">awk</code> that he could find. It&rsquo;s
available at <a class="uref" href="https://github.com/danfuzz/one-true-awk">https://github.com/danfuzz/one-true-awk</a>.
</p>
<a class="index-entry-id" id="index-Brennan_002c-Michael-6"></a>
<a class="index-entry-id" id="index-mawk-utility-4"></a>
<a class="index-entry-id" id="index-source-code-mawk"></a>
</dd>
<dt><code class="command">mawk</code></dt>
<dd><p>Michael Brennan wrote an independent implementation of <code class="command">awk</code>,
called <code class="command">mawk</code>.  It is available under the
GPL (see <a class="pxref" href="#Copying">GNU General Public License</a>),
just as <code class="command">gawk</code> is.
</p>
<p>The original distribution site for the <code class="command">mawk</code> source code
no longer has it.  A copy is available at
<a class="uref" href="http://www.skeeve.com/gawk/mawk1.3.3.tar.gz">http://www.skeeve.com/gawk/mawk1.3.3.tar.gz</a>.
</p>
<p>In 2009, Thomas Dickey took on <code class="command">mawk</code> maintenance.
Basic information is available on
<a class="uref" href="http://www.invisible-island.net/mawk">the project&rsquo;s web page</a>.
The download URL is
<a class="url" href="http://invisible-island.net/datafiles/release/mawk.tar.gz">http://invisible-island.net/datafiles/release/mawk.tar.gz</a>.
</p>
<p>Once you have it,
<code class="command">gunzip</code> may be used to decompress this file. Installation
is similar to <code class="command">gawk</code>&rsquo;s
(see <a class="pxref" href="#Unix-Installation">Compiling and Installing <code class="command">gawk</code> on Unix-Like Systems</a>).
</p>
<p>See <a class="xref" href="#Common-Extensions">Common Extensions Summary</a>
for a list of extensions in <code class="command">mawk</code> that are not in POSIX <code class="command">awk</code>.
</p>
</dd>
<dt><code class="command">mawk</code> 2.0</dt>
<dd><p>In 2016, Michael Brennan resumed <code class="command">mawk</code> development.
His development snapshots are available via Git from the project&rsquo;s
<a class="uref" href="https://github.com/mikebrennan000/mawk-2">GitHub page</a>.
</p>
<a class="index-entry-id" id="index-Sumner_002c-Andrew"></a>
<a class="index-entry-id" id="index-awka-compiler-for-awk"></a>
<a class="index-entry-id" id="index-source-code-awka"></a>
</dd>
<dt><code class="command">awka</code></dt>
<dd><p>Written by Andrew Sumner,
<code class="command">awka</code> translates <code class="command">awk</code> programs into C, compiles them,
and links them with a library of functions that provide the core
<code class="command">awk</code> functionality.
It also has a number of extensions.
</p>
<p>Both the <code class="command">awk</code> translator and the library are released under the GPL.
</p>
<p>To get <code class="command">awka</code>, go to <a class="url" href="https://sourceforge.net/projects/awka">https://sourceforge.net/projects/awka</a>.
</p>
<p>The project seems to be frozen; no new code changes have been made
since approximately 2001.
</p>
</dd>
<dt>Revive Awka</dt>
<dd><p>This project, available at <a class="uref" href="https://github.com/noyesno/awka">https://github.com/noyesno/awka</a>,
intends to fix bugs in <code class="command">awka</code> and add more features.
</p>
<a class="index-entry-id" id="index-Beebe_002c-Nelson-H_002eF_002e-2"></a>
<a class="index-entry-id" id="index-pawk-_0028profiling-version-of-Brian-Kernighan_0027s-awk_0029"></a>
<a class="index-entry-id" id="index-source-code-pawk-_0028profiling-version-of-Brian-Kernighan_0027s-awk_0029"></a>
</dd>
<dt><code class="command">pawk</code></dt>
<dd><p>Nelson H.F. Beebe at the University of Utah has modified
BWK <code class="command">awk</code> to provide timing and profiling information.
It is different from <code class="command">gawk</code> with the <samp class="option">--profile</samp> option
(see <a class="pxref" href="#Profiling">Profiling Your <code class="command">awk</code> Programs</a>)
in that it uses CPU-based profiling, not line-count
profiling.  You may find it at either
<a class="uref" href="ftp://ftp.math.utah.edu/pub/pawk/pawk-20030606.tar.gz">ftp://ftp.math.utah.edu/pub/pawk/pawk-20030606.tar.gz</a>
or
<a class="uref" href="http://www.math.utah.edu/pub/pawk/pawk-20030606.tar.gz">http://www.math.utah.edu/pub/pawk/pawk-20030606.tar.gz</a>.
</p>
</dd>
<dt><a class="index-entry-id" id="index-source-code-BusyBox-Awk"></a>
<a id="index-BusyBox-Awk"></a><span>BusyBox <code class="command">awk</code><a class="copiable-link" href="#index-BusyBox-Awk"> &para;</a></span></dt>
<dd><p>BusyBox is a GPL-licensed program providing small versions of many
applications within a single executable. It is aimed at embedded systems.
It includes a full implementation of POSIX <code class="command">awk</code>.  When building
it, be careful not to do &lsquo;<samp class="samp">make install</samp>&rsquo; as it will overwrite
copies of other applications in your <samp class="file">/usr/local/bin</samp>.  For more
information, see the <a class="uref" href="https://busybox.net">project&rsquo;s home page</a>.
</p>
<a class="index-entry-id" id="index-OpenSolaris"></a>
<a class="index-entry-id" id="index-Solaris_002c-POSIX_002dcompliant-awk"></a>
<a class="index-entry-id" id="index-source-code-Solaris-awk"></a>
</dd>
<dt>The OpenSolaris POSIX <code class="command">awk</code></dt>
<dd><p>The versions of <code class="command">awk</code> in <samp class="file">/usr/xpg4/bin</samp> and
<samp class="file">/usr/xpg6/bin</samp> on Solaris are more or less POSIX-compliant.
They are based on the <code class="command">awk</code> from Mortice Kern Systems for PCs.
We were able to make this code compile and work under GNU/Linux
with 1&ndash;2 hours of work.  Making it more generally portable (using
GNU Autoconf and/or Automake) would take more work, and this
has not been done, at least to our knowledge.
</p>
<a class="index-entry-id" id="index-Illumos_002c-POSIX_002dcompliant-awk"></a>
<a class="index-entry-id" id="index-source-code-Illumos-awk"></a>
<p>The source code used to be available from the OpenSolaris website.
However, that project was ended and the website shut down.  Fortunately, the
<a class="uref" href="https://wiki.illumos.org/display/illumos/illumos+Home">Illumos project</a>
makes this implementation available.  You can view the files one at a time from
<a class="uref" href="https://github.com/joyent/illumos-joyent/blob/master/usr/src/cmd/awk_xpg4">https://github.com/joyent/illumos-joyent/blob/master/usr/src/cmd/awk_xpg4</a>.
</p>
<a class="index-entry-id" id="index-frawk"></a>
<a class="index-entry-id" id="index-source-code-frawk"></a>
</dd>
<dt><code class="command">frawk</code></dt>
<dd><p>This is a language for writing short programs.  &ldquo;To a first
approximation, it is an implementation of the AWK language;
many common <code class="command">awk</code> programs produce equivalent output
when passed to <code class="command">frawk</code>.&rdquo;  However, it has a number of
important additional features.  The code is available at
<a class="uref" href="https://github.com/ezrosent/frawk">https://github.com/ezrosent/frawk</a>.
</p>
<a class="index-entry-id" id="index-goawk"></a>
<a class="index-entry-id" id="index-Go-implementation-of-awk"></a>
<a class="index-entry-id" id="index-source-code-goawk"></a>
<a class="index-entry-id" id="index-programming-languages-Go"></a>
</dd>
<dt><code class="command">goawk</code></dt>
<dd><p>This is an <code class="command">awk</code> interpreter written in the
<a class="uref" href="https://golang.org/">Go programming language</a>.
It implements POSIX <code class="command">awk</code>, with a few minor extensions.
Source code is available from <a class="uref" href="https://github.com/benhoyt/goawk">https://github.com/benhoyt/goawk</a>.
The author wrote a nice
<a class="uref" href="https://benhoyt.com/writings/goawk/">article</a>
describing the implementation.
</p>
<a class="index-entry-id" id="index-AWKgo"></a>
<a class="index-entry-id" id="index-awk-to-Go-translator"></a>
<a class="index-entry-id" id="index-source-code-AWKgo"></a>
<a class="index-entry-id" id="index-programming-languages-Go-1"></a>
</dd>
<dt><code class="command">AWKgo</code></dt>
<dd><p>This is an <code class="command">awk</code> to Go translator.
It was written by the author of <code class="command">goawk</code>.
(See the previous entry in this list.) Source code is
available from
<a class="uref" href="https://github.com/benhoyt/goawk/tree/master/awkgo">https://github.com/benhoyt/goawk/tree/master/awkgo</a>.
The author&rsquo;s article about it is at
<a class="uref" href="https://benhoyt.com/writings/awkgo/">https://benhoyt.com/writings/awkgo/</a>.
</p>
<a class="index-entry-id" id="index-jawk"></a>
<a class="index-entry-id" id="index-Java-implementation-of-awk"></a>
<a class="index-entry-id" id="index-source-code-jawk"></a>
</dd>
<dt><code class="command">jawk</code></dt>
<dd><p>This is an interpreter for <code class="command">awk</code> written in Java. It claims
to be a full interpreter, although because it uses Java facilities
for I/O and for regexp matching, the language it supports is different
from POSIX <code class="command">awk</code>.  More information is available on the
<a class="uref" href="http://jawk.sourceforge.net">project&rsquo;s home page</a>.
</p>
</dd>
<dt>Hoijui&rsquo;s <code class="command">jawk</code></dt>
<dd><p>This project, available at <a class="uref" href="https://github.com/hoijui/Jawk">https://github.com/hoijui/Jawk</a>,
is another <code class="command">awk</code> interpreter written in Java. It uses
modern Java build tools.
</p>
</dd>
<dt><a class="index-entry-id" id="index-source-code-libmawk"></a>
<a id="index-libmawk"></a><span>Libmawk<a class="copiable-link" href="#index-libmawk"> &para;</a></span></dt>
<dd><p>This is an embeddable <code class="command">awk</code> interpreter derived from
<code class="command">mawk</code>. For more information, see
<a class="uref" href="http://repo.hu/projects/libmawk/">http://repo.hu/projects/libmawk/</a>.
</p>
<a class="index-entry-id" id="index-source-code-embeddable-awk-interpreter"></a>
</dd>
<dt><a id="index-Neacsu_002c-Mircea"></a><span>Mircea Neacsu&rsquo;s Embeddable <code class="command">awk</code><a class="copiable-link" href="#index-Neacsu_002c-Mircea"> &para;</a></span></dt>
<dd><p>Mircea Neacsu has created an embeddable <code class="command">awk</code>
interpreter, based on BWK awk. It&rsquo;s available
at <a class="uref" href="https://github.com/neacsum/awk">https://github.com/neacsum/awk</a>.
</p>
</dd>
<dt><a id="index-source-code-pawk-_0028Python-version_0029"></a><span><code class="code">pawk</code><a class="copiable-link" href="#index-source-code-pawk-_0028Python-version_0029"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-pawk_002c-awk_002dlike-facilities-for-Python"></a>
<p>This is a Python module that claims to bring <code class="command">awk</code>-like
features to Python. See <a class="uref" href="https://github.com/alecthomas/pawk">https://github.com/alecthomas/pawk</a>
for more information. (This is not related to Nelson Beebe&rsquo;s
modified version of BWK <code class="command">awk</code>, described earlier.)
</p>
</dd>
<dt><a id="index-source-code-awkcc"></a><span><code class="command">awkcc</code><a class="copiable-link" href="#index-source-code-awkcc"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-awkcc_002c-awk-to-C-translator"></a>
<a class="index-entry-id" id="index-Ramming_002c-J_002e-Christopher"></a>
<p>This is an early adaptation of Unix <code class="command">awk</code> that
translates <code class="command">awk</code> into C code. It was done by
J. Christopher Ramming at Bell Labs, circa 1988.
It&rsquo;s available at <a class="uref" href="https://github.com/nokia/awkcc">https://github.com/nokia/awkcc</a>.
Bringing this up to date would be an interesting
software engineering exercise.
</p>
</dd>
<dt><a class="index-entry-id" id="index-source-code-QSE-awk"></a>
<a id="index-QSE-awk"></a><span>QSE&nbsp;<code class="command">awk</code><!-- /@w --><a class="copiable-link" href="#index-QSE-awk"> &para;</a></span></dt>
<dd><p>This is an embeddable <code class="command">awk</code> interpreter. For more information,
see <a class="uref" href="https://code.google.com/p/qse/">https://code.google.com/p/qse/</a>. </p>
</dd>
<dt><a class="index-entry-id" id="index-source-code-QuikTrim-Awk"></a>
<a id="index-QuikTrim-Awk"></a><span><code class="command">QTawk</code><a class="copiable-link" href="#index-QuikTrim-Awk"> &para;</a></span></dt>
<dd><p>This is an independent implementation of <code class="command">awk</code> distributed
under the GPL. It has a large number of extensions over standard
<code class="command">awk</code> and may not be 100% syntactically compatible with it.
See <a class="uref" href="http://www.quiktrim.org/QTawk.html">http://www.quiktrim.org/QTawk.html</a> for more information,
including the manual. The download link there is out of date; see
<a class="uref" href="http://www.quiktrim.org/#AdditionalResources">http://www.quiktrim.org/#AdditionalResources</a> for the latest
download link.
</p>
<p>The project may also be frozen; no new code changes have been made
since approximately 2014.
</p>
</dd>
<dt><a class="index-entry-id" id="index-source-code-cppawk"></a>
<a id="index-cppawk"></a><span><code class="command">cppawk</code><a class="copiable-link" href="#index-cppawk"> &para;</a></span></dt>
<dd><p>Quoting from the web page, &ldquo;<code class="command">cppawk</code> is a tiny shell script that is
used like <code class="command">awk</code>. It invokes the C preprocessor (GNU <code class="command">cpp</code>) on the Awk
code and calls Awk on the result.&rdquo;  This program may be of use if
the way <code class="command">gawk</code>&rsquo;s <code class="code">@include</code> facility works doesn&rsquo;t suit
your needs.  For more information, see <a class="uref" href="https://www.kylheku.com/cgit/cppawk/">https://www.kylheku.com/cgit/cppawk/</a>.
</p>
</dd>
<dt>Other versions</dt>
<dd><p>See also the &ldquo;Versions and implementations&rdquo; section of the
<a class="uref" href="https://en.wikipedia.org/wiki/Awk_language#Versions_and_implementations">Wikipedia article</a> on <code class="command">awk</code> for information on additional versions.
</p>
</dd>
</dl>

<p>An interesting collection of library functions is available
at <a class="uref" href="https://github.com/e36freak/awk-libs">https://github.com/e36freak/awk-libs</a>.
</p>
<p>An interesting collection of <code class="command">gawk</code> extensions is
available <a class="uref" href="https://github.com/su8/gawk-extensions">https://github.com/su8/gawk-extensions</a>.
</p>
<hr>
</div>
<div class="appendixsec-level-extent" id="Installation-summary">
<div class="nav-panel">
<p>
Previous: <a href="#Other-Versions" accesskey="p" rel="prev">Other Freely Available <code class="command">awk</code> Implementations</a>, Up: <a href="#Installation" accesskey="u" rel="up">Installing <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Summary-18"><span>B.6 Summary<a class="copiable-link" href="#Summary-18"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li>The <code class="command">gawk</code> distribution is available from the GNU Project&rsquo;s main
distribution site, <code class="code">ftp.gnu.org</code>.  The canonical build recipe is:

<div class="example">
<pre class="example-preformatted">wget https://ftp.gnu.org/gnu/gawk/gawk-5.3.0.tar.gz
tar -xvpzf gawk-5.3.0.tar.gz
cd gawk-5.3.0
./configure &amp;&amp; make &amp;&amp; make check
</pre></div>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> Because of the &lsquo;<samp class="samp">https://</samp>&rsquo; URL, you may have to supply the
<samp class="option">--no-check-certificate</samp> option to <code class="command">wget</code> to download
the file.
</p></blockquote>

</li><li><code class="command">gawk</code> may be built on non-POSIX systems as well. The currently
supported systems are MS-Windows using
MSYS, MSYS2, MinGW, and Cygwin,
and OpenVMS.
Instructions for each system are included in this appendix.

</li><li>Bug reports should be sent via email to &ldquo;bug dash gawk at gnu dot org&rdquo;.
Bug reports should be in English and should include the version of <code class="command">gawk</code>,
how it was compiled, and a short program and data file that demonstrate
the problem.

</li><li>Non-bug emails should be sent to &ldquo;help dash gawk at gnu dot org&rdquo;.
Repeatedly sending non-bug emails to the bug list will get you blacklisted from it.

</li><li>There are a number of other freely available <code class="command">awk</code>
implementations.  Many are POSIX-compliant; others are less so.

</li></ul>


<hr>
</div>
</div>
<div class="appendix-level-extent" id="Notes">
<div class="nav-panel">
<p>
Next: <a href="#Basic-Concepts" accesskey="n" rel="next">Basic Programming Concepts</a>, Previous: <a href="#Installation" accesskey="p" rel="prev">Installing <code class="command">gawk</code></a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="appendix" id="Implementation-Notes"><span>Appendix C Implementation Notes<a class="copiable-link" href="#Implementation-Notes"> &para;</a></span></h2>
<a class="index-entry-id" id="index-gawk-implementation-issues"></a>
<a class="index-entry-id" id="index-implementation-issues_002c-gawk"></a>

<p>This appendix contains information mainly of interest to implementers and
maintainers of <code class="command">gawk</code>.  Everything in it applies specifically to
<code class="command">gawk</code> and not to other implementations.
</p>

<ul class="mini-toc">
<li><a href="#Compatibility-Mode" accesskey="1">Downward Compatibility and Debugging</a></li>
<li><a href="#Additions" accesskey="2">Making Additions to <code class="command">gawk</code></a></li>
<li><a href="#Future-Extensions" accesskey="3">Probable Future Extensions</a></li>
<li><a href="#Implementation-Limitations" accesskey="4">Some Limitations of the Implementation</a></li>
<li><a href="#Extension-Design" accesskey="5">Extension API Design</a></li>
<li><a href="#Notes-summary" accesskey="6">Summary</a></li>
</ul>
<hr>
<div class="appendixsec-level-extent" id="Compatibility-Mode">
<div class="nav-panel">
<p>
Next: <a href="#Additions" accesskey="n" rel="next">Making Additions to <code class="command">gawk</code></a>, Up: <a href="#Notes" accesskey="u" rel="up">Implementation Notes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Downward-Compatibility-and-Debugging"><span>C.1 Downward Compatibility and Debugging<a class="copiable-link" href="#Downward-Compatibility-and-Debugging"> &para;</a></span></h3>
<a class="index-entry-id" id="index-gawk-implementation-issues-downward-compatibility"></a>
<a class="index-entry-id" id="index-gawk-implementation-issues-debugging"></a>
<a class="index-entry-id" id="index-troubleshooting-gawk"></a>
<a class="index-entry-id" id="index-implementation-issues_002c-gawk-debugging"></a>

<p>See <a class="xref" href="#POSIX_002fGNU">Extensions in <code class="command">gawk</code> Not in POSIX <code class="command">awk</code></a>,
for a summary of the GNU extensions to the <code class="command">awk</code> language and program.
All of these features can be turned off by invoking <code class="command">gawk</code> with the
<samp class="option">--traditional</samp> option or with the <samp class="option">--posix</samp> option.
</p>
<p>If <code class="command">gawk</code> is compiled for debugging with &lsquo;<samp class="samp">-DDEBUG</samp>&rsquo;, then there
is one more option available on the command line:
</p>
<dl class="table">
<dt><code class="code">-Y</code></dt>
<dt><code class="code">--parsedebug</code></dt>
<dd><p>Print out the parse stack information as the program is being parsed.
</p></dd>
</dl>

<p>This option is intended only for serious <code class="command">gawk</code> developers
and not for the casual user.  It probably has not even been compiled into
your version of <code class="command">gawk</code>, since it slows down execution.
</p>
<hr>
</div>
<div class="appendixsec-level-extent" id="Additions">
<div class="nav-panel">
<p>
Next: <a href="#Future-Extensions" accesskey="n" rel="next">Probable Future Extensions</a>, Previous: <a href="#Compatibility-Mode" accesskey="p" rel="prev">Downward Compatibility and Debugging</a>, Up: <a href="#Notes" accesskey="u" rel="up">Implementation Notes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Making-Additions-to-gawk"><span>C.2 Making Additions to <code class="command">gawk</code><a class="copiable-link" href="#Making-Additions-to-gawk"> &para;</a></span></h3>

<p>If you find that you want to enhance <code class="command">gawk</code> in a significant
fashion, you are perfectly free to do so.  That is the point of having
free software; the source code is available and you are free to change
it as you want (see <a class="pxref" href="#Copying">GNU General Public License</a>).
</p>
<p>This section discusses the ways you might want to change <code class="command">gawk</code>
as well as any considerations you should bear in mind.
</p>

<ul class="mini-toc">
<li><a href="#Accessing-The-Source" accesskey="1">Accessing The <code class="command">gawk</code> Git Repository</a></li>
<li><a href="#Adding-Code" accesskey="2">Adding New Features</a></li>
<li><a href="#New-Ports" accesskey="3">Porting <code class="command">gawk</code> to a New Operating System</a></li>
<li><a href="#Derived-Files" accesskey="4">Why Generated Files Are Kept In Git</a></li>
</ul>
<hr>
<div class="appendixsubsec-level-extent" id="Accessing-The-Source">
<div class="nav-panel">
<p>
Next: <a href="#Adding-Code" accesskey="n" rel="next">Adding New Features</a>, Up: <a href="#Additions" accesskey="u" rel="up">Making Additions to <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Accessing-The-gawk-Git-Repository"><span>C.2.1 Accessing The <code class="command">gawk</code> Git Repository<a class="copiable-link" href="#Accessing-The-gawk-Git-Repository"> &para;</a></span></h4>

<p>As <code class="command">gawk</code> is Free Software, the source code is always available.
<a class="ref" href="#Gawk-Distribution">The <code class="command">gawk</code> Distribution</a> describes how to get and build the formal,
released versions of <code class="command">gawk</code>.
</p>
<a class="index-entry-id" id="index-git-utility-2"></a>
<p>However, if you want to modify <code class="command">gawk</code> and contribute back your
changes, you will probably wish to work with the development version.
To do so, you will need to access the <code class="command">gawk</code> source code
repository.  The code is maintained using the
<a class="uref" href="https://git-scm.com">Git distributed version control system</a>.
You will need to install it if your system doesn&rsquo;t have it.
Once you have done so, use the command:
</p>
<div class="example">
<pre class="example-preformatted">git clone git://git.savannah.gnu.org/gawk.git
</pre></div>

<p>This clones the <code class="command">gawk</code> repository.  If you are behind a
firewall that does not allow you to use the Git native protocol, you
can still access the repository using:
</p>
<div class="example">
<pre class="example-preformatted">git clone https://git.savannah.gnu.org/r/gawk.git
</pre></div>

<p>(Using the <code class="code">https</code> URL is considered to be more secure.)
</p>
<p>Once you have made changes, you can use &lsquo;<samp class="samp">git diff</samp>&rsquo; to produce a
patch, and send that to the <code class="command">gawk</code> maintainer; see <a class="ref" href="#Bugs">Reporting Problems and Bugs</a>,
for how to do that.
</p>
<p>Once upon a time there was Git&ndash;CVS gateway for use by people who could
not install Git. However, this gateway no longer works, so you may have
better luck using a more modern version control system like Bazaar,
that has a Git plug-in for working with Git repositories.
</p>
<hr>
</div>
<div class="appendixsubsec-level-extent" id="Adding-Code">
<div class="nav-panel">
<p>
Next: <a href="#New-Ports" accesskey="n" rel="next">Porting <code class="command">gawk</code> to a New Operating System</a>, Previous: <a href="#Accessing-The-Source" accesskey="p" rel="prev">Accessing The <code class="command">gawk</code> Git Repository</a>, Up: <a href="#Additions" accesskey="u" rel="up">Making Additions to <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Adding-New-Features"><span>C.2.2 Adding New Features<a class="copiable-link" href="#Adding-New-Features"> &para;</a></span></h4>

<a class="index-entry-id" id="index-adding-features-to-gawk"></a>
<a class="index-entry-id" id="index-features-adding-to-gawk"></a>
<a class="index-entry-id" id="index-gawk-features-adding"></a>
<p>You are free to add any new features you like to <code class="command">gawk</code>.
However, if you want your changes to be incorporated into the <code class="command">gawk</code>
distribution, there are several steps that you need to take in order to
make it possible to include them:
</p>
<ol class="enumerate">
<li> Discuss the proposed new feature with the <code class="command">gawk</code> maintainer.
The bug list may be used for this.  Even if I don&rsquo;t
wish to include your feature, be aware that you are still free to
add it and distribute your own &ldquo;fork&rdquo; of <code class="command">gawk</code>.

</li><li> Before building the new feature into <code class="command">gawk</code> itself,
consider writing it as an extension
(see <a class="pxref" href="#Dynamic-Extensions">Writing Extensions for <code class="command">gawk</code></a>).
If that&rsquo;s not possible, continue with the rest of the steps in this list.

</li><li> Be prepared to sign the appropriate paperwork.
In order for the FSF to distribute your changes, you must either place
those changes in the public domain and submit a signed statement to that
effect, or assign the copyright in your changes to the FSF.
Both of these actions are easy to do and <em class="emph">many</em> people have done so
already. If you have questions, please contact me
(see <a class="pxref" href="#Bugs">Reporting Problems and Bugs</a>),
or &ldquo;assign at gnu dot org&rdquo;.

</li><li> Get the latest version.
It is much easier for me to integrate changes if they are relative to
the most recent distributed version of <code class="command">gawk</code>, or better yet,
relative to the latest code in the Git repository.  If your version of
<code class="command">gawk</code> is very old, I may not be able to integrate your changes at all.
(See <a class="xref" href="#Getting">Getting the <code class="command">gawk</code> Distribution</a>,
for information on getting the latest version of <code class="command">gawk</code>.)

</li><li> Follow the <cite class="cite">GNU Coding Standards</cite>.
This document describes how GNU software should be written. If you haven&rsquo;t
read it, please do so, preferably <em class="emph">before</em> starting to modify <code class="command">gawk</code>.
(The <cite class="cite">GNU Coding Standards</cite> are available from
the GNU Project&rsquo;s
<a class="uref" href="https://www.gnu.org/prep/standards/">website</a>.
Texinfo, Info, and DVI versions are also available.)

<a class="index-entry-id" id="index-gawk-coding-style-in"></a>
</li><li> Use the <code class="command">gawk</code> coding style.
The C code for <code class="command">gawk</code> follows the instructions in the
<cite class="cite">GNU Coding Standards</cite>, with minor exceptions.  The code is formatted
using the traditional &ldquo;K&amp;R&rdquo; style, particularly as regards to the placement
of braces and the use of TABs.  In brief, the coding rules for <code class="command">gawk</code>
are as follows:

<ul class="itemize mark-bullet">
<li>Use ANSI/ISO style (prototype) function headers when defining functions.

</li><li>Put the name of the function at the beginning of its own line.

</li><li>Use &lsquo;<samp class="samp">#elif</samp>&rsquo; instead of nesting &lsquo;<samp class="samp">#if</samp>&rsquo; inside &lsquo;<samp class="samp">#else</samp>&rsquo;.

</li><li>Put the return type of the function, even if it is <code class="code">int</code>, on the
line above the line with the name and arguments of the function.

</li><li>Put spaces around parentheses used in control structures
(<code class="code">if</code>, <code class="code">while</code>, <code class="code">for</code>, <code class="code">do</code>, and <code class="code">switch</code>).

</li><li>Do not parenthesize the expression used with <code class="code">return</code>.

</li><li>Do not put spaces in front of parentheses used in function calls.

</li><li>Put spaces around all C operators and after commas in function calls.

</li><li>Do not use the comma operator to produce multiple side effects, except
in <code class="code">for</code> loop initialization and increment parts, and in macro bodies.

</li><li>Use real TABs for indenting, not spaces.

</li><li>Use the &ldquo;K&amp;R&rdquo; brace layout style.

</li><li>Use comparisons against <code class="code">NULL</code> and <code class="code">'\0'</code> in the conditions of
<code class="code">if</code>, <code class="code">while</code>, and <code class="code">for</code> statements, as well as in the <code class="code">case</code>s
of <code class="code">switch</code> statements, instead of just the
plain pointer or character value.

</li><li>Do not, <em class="emph">under any circumstances</em>, use the &lsquo;<samp class="samp">-1 == foo</samp>&rsquo; or
&lsquo;<samp class="samp">0 &gt;= bar</samp>&rsquo; style of comparison expressions.  I have known about
it for decades, and I understand why some people like it.  Nonetheless,
I abhor it with a passion, and code that uses it will never be accepted.

</li><li>Use <code class="code">true</code> and <code class="code">false</code> for <code class="code">bool</code> values,
the <code class="code">NULL</code> symbolic constant for pointer values,
and the character constant <code class="code">'\0'</code> where appropriate, instead of <code class="code">1</code>
and <code class="code">0</code>.

</li><li>Provide one-line descriptive comments for each function.

</li><li>Do not use the <code class="code">alloca()</code> function for allocating memory off the
stack.  Its use causes more portability trouble than is worth the minor
benefit of not having to free the storage. Instead, use <code class="code">malloc()</code>
and <code class="code">free()</code>.

</li><li>Do not use comparisons of the form &lsquo;<samp class="samp">! strcmp(a, b)</samp>&rsquo; or similar.
As Henry Spencer once said, &ldquo;<code class="code">strcmp()</code> is not a boolean!&rdquo;
Instead, use &lsquo;<samp class="samp">strcmp(a, b) == 0</samp>&rsquo;.

</li><li>If adding new bit flag values, use explicit hexadecimal constants
(<code class="code">0x001</code>, <code class="code">0x002</code>, <code class="code">0x004</code>, and so on) instead of
shifting one left by successive amounts (&lsquo;<samp class="samp">(1&lt;&lt;0)</samp>&rsquo;, &lsquo;<samp class="samp">(1&lt;&lt;1)</samp>&rsquo;,
and so on).
</li></ul>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> If I have to reformat your code to follow the coding style used in
<code class="command">gawk</code>, I may not bother to integrate your changes at all.
</p></blockquote>

</li><li> <a class="index-entry-id" id="index-Texinfo-5"></a>
Update the documentation.
Along with your new code, please supply new sections and/or chapters
for this Web page.  If at all possible, please use real
Texinfo, instead of just supplying unformatted ASCII text (although
even that is better than no documentation at all).
Conventions to be followed in <cite class="cite">GAWK: Effective AWK Programming</cite> are provided
after the &lsquo;<samp class="samp">@bye</samp>&rsquo; at the end of the Texinfo source file.
If possible, please update the <code class="command">man</code> page as well.

<p>You will also have to sign paperwork for your documentation changes.
</p>
</li><li> <a class="index-entry-id" id="index-git-utility-3"></a>
Submit changes as unified diffs.
Use &lsquo;<samp class="samp">diff -u -r -N</samp>&rsquo; to compare
the original <code class="command">gawk</code> source tree with your version.
I recommend using the GNU version of <code class="command">diff</code>, or best of all,
&lsquo;<samp class="samp">git diff</samp>&rsquo; or &lsquo;<samp class="samp">git format-patch</samp>&rsquo;.
Send the output produced by <code class="command">diff</code> to me when you
submit your changes.
(See <a class="xref" href="#Bugs">Reporting Problems and Bugs</a>, for the electronic mail
information.)

<p>Using this format makes it easy for me to apply your changes to the
master version of the <code class="command">gawk</code> source code (using <code class="command">patch</code>).
If I have to apply the changes manually, using a text editor, I may
not do so, particularly if there are lots of changes.
</p>
</li><li> Include an entry for the <samp class="file">ChangeLog</samp> file with your submission.
This helps further minimize the amount of work I have to do,
making it easier for me to accept patches.
It is simplest if you just make this part of your diff.
</li></ol>

<p>Although this sounds like a lot of work, please remember that while you
may write the new code, I have to maintain it and support it. If it
isn&rsquo;t possible for me to do that with a minimum of extra work, then I
probably will not.
</p>
<hr>
</div>
<div class="appendixsubsec-level-extent" id="New-Ports">
<div class="nav-panel">
<p>
Next: <a href="#Derived-Files" accesskey="n" rel="next">Why Generated Files Are Kept In Git</a>, Previous: <a href="#Adding-Code" accesskey="p" rel="prev">Adding New Features</a>, Up: <a href="#Additions" accesskey="u" rel="up">Making Additions to <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Porting-gawk-to-a-New-Operating-System"><span>C.2.3 Porting <code class="command">gawk</code> to a New Operating System<a class="copiable-link" href="#Porting-gawk-to-a-New-Operating-System"> &para;</a></span></h4>
<a class="index-entry-id" id="index-portability-gawk"></a>
<a class="index-entry-id" id="index-operating-systems-porting-gawk-to"></a>

<a class="index-entry-id" id="index-porting-gawk"></a>
<p>If you want to port <code class="command">gawk</code> to a new operating system, there are
several steps:
</p>
<ol class="enumerate">
<li> Follow the guidelines in
the previous section
concerning coding style, submission of diffs, and so on.

</li><li> Be prepared to sign the appropriate paperwork.
In order for the FSF to distribute your code, you must either place
your code in the public domain and submit a signed statement to that
effect, or assign the copyright in your code to the FSF.
Both of these actions are easy to do and <em class="emph">many</em> people have done so
already. If you have questions, please contact me, or
&ldquo;gnu at gnu dot org&rdquo;.

</li><li> When doing a port, bear in mind that your code must coexist peacefully
with the rest of <code class="command">gawk</code> and the other ports. Avoid gratuitous
changes to the system-independent parts of the code. If at all possible,
avoid sprinkling &lsquo;<samp class="samp">#ifdef</samp>&rsquo;s just for your port throughout the
code.

<p>If the changes needed for a particular system affect too much of the
code, I probably will not accept them.  In such a case, you can, of course,
distribute your changes on your own, as long as you comply
with the GPL
(see <a class="pxref" href="#Copying">GNU General Public License</a>).
</p>
</li><li> A number of the files that come with <code class="command">gawk</code> are maintained by other
people.  Thus, you should not change them
unless it is for a very good reason; i.e., changes are not out of the
question, but changes to these files are scrutinized extra carefully.
These are all the files in the <samp class="file">support</samp> directory
within the <code class="command">gawk</code> distribution. See there.

</li><li> A number of other files are provided by the GNU
Autotools (Autoconf, Automake, and GNU <code class="command">gettext</code>).
You should not change them either, unless it is for a very
good reason. The files are
<samp class="file">ABOUT-NLS</samp>,
<samp class="file">config.guess</samp>,
<samp class="file">config.rpath</samp>,
<samp class="file">config.sub</samp>,
<samp class="file">depcomp</samp>,
<samp class="file">INSTALL</samp>,
<samp class="file">install-sh</samp>,
<samp class="file">missing</samp>,
<samp class="file">mkinstalldirs</samp>,
and
<samp class="file">ylwrap</samp>.

</li><li> Be willing to continue to maintain the port.
Non-Unix operating systems are supported by volunteers who maintain
the code needed to compile and run <code class="command">gawk</code> on their systems. If no-one
volunteers to maintain a port, it becomes unsupported and it may
be necessary to remove it from the distribution.

</li><li> Supply an appropriate <samp class="file">gawkmisc.???</samp> file.
Each port has its own <samp class="file">gawkmisc.???</samp> that implements certain
operating system specific functions. This is cleaner than a plethora of
&lsquo;<samp class="samp">#ifdef</samp>&rsquo;s scattered throughout the code.  The <samp class="file">gawkmisc.c</samp> in
the main source directory includes the appropriate
<samp class="file">gawkmisc.???</samp> file from each subdirectory.
Be sure to update it as well.

<p>Each port&rsquo;s <samp class="file">gawkmisc.???</samp> file has a suffix reminiscent of the machine
or operating system for the port&mdash;for example, <samp class="file">pc/gawkmisc.pc</samp> and
<samp class="file">vms/gawkmisc.vms</samp>. The use of separate suffixes, instead of plain
<samp class="file">gawkmisc.c</samp>, makes it possible to move files from a port&rsquo;s subdirectory
into the main subdirectory, without accidentally destroying the real
<samp class="file">gawkmisc.c</samp> file.  (Currently, this is only an issue for the
PC operating system ports.)
</p>
</li><li> Supply a <samp class="file">Makefile</samp> as well as any other C source and header files that are
necessary for your operating system.  All your code should be in a
separate subdirectory, with a name that is the same as, or reminiscent
of, either your operating system or the computer system.  If possible,
try to structure things so that it is not necessary to move files out
of the subdirectory into the main source directory.  If that is not
possible, then be sure to avoid using names for your files that
duplicate the names of files in the main source directory.

</li><li> Update the documentation.
Please write a section (or sections) for this Web page describing the
installation and compilation steps needed to compile and/or install
<code class="command">gawk</code> for your system.
</li></ol>

<p>Following these steps makes it much easier to integrate your changes
into <code class="command">gawk</code> and have them coexist happily with other
operating systems&rsquo; code that is already there.
</p>
<p>In the code that you supply and maintain, feel free to use a
coding style and brace layout that suits your taste.
</p>
<hr>
</div>
<div class="appendixsubsec-level-extent" id="Derived-Files">
<div class="nav-panel">
<p>
Previous: <a href="#New-Ports" accesskey="p" rel="prev">Porting <code class="command">gawk</code> to a New Operating System</a>, Up: <a href="#Additions" accesskey="u" rel="up">Making Additions to <code class="command">gawk</code></a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Why-Generated-Files-Are-Kept-In-Git"><span>C.2.4 Why Generated Files Are Kept In Git<a class="copiable-link" href="#Why-Generated-Files-Are-Kept-In-Git"> &para;</a></span></h4>

<a class="index-entry-id" id="index-Git_002c-use-of-for-gawk-source-code"></a>

<p>If you look at the <code class="command">gawk</code> source in the Git
repository, you will notice that it includes files that are automatically
generated by GNU infrastructure tools, such as <samp class="file">Makefile.in</samp> from
Automake and even <samp class="file">configure</samp> from Autoconf.
</p>
<p>This is different from many Free Software projects that do not store
the derived files, because that keeps the repository less cluttered,
and it is easier to see the substantive changes when comparing versions
and trying to understand what changed between commits.
</p>
<p>However, there are several reasons why the <code class="command">gawk</code> maintainer
likes to have everything in the repository.
</p>
<p>First, because it is then easy to reproduce any given version completely,
without relying upon the availability of (older, likely obsolete, and
maybe even impossible to find) other tools.
</p>
<p>As an extreme example, if you ever even think about trying to compile,
oh, say, the V7 <code class="command">awk</code>, you will discover that not only do you
have to bootstrap the V7 <code class="command">yacc</code> to do so, but you also need the
V7 <code class="command">lex</code>.  And the latter is pretty much impossible to bring up
on a modern GNU/Linux system.<a class="footnote" id="DOCF120" href="#FOOT120"><sup>120</sup></a>
</p>
<p>(Or, let&rsquo;s say <code class="command">gawk</code> 1.2 required <code class="command">bison</code> whatever-it-was
in 1989 and that there was no <samp class="file">awkgram.c</samp> file in the repository.  Is
there a guarantee that we could find that <code class="command">bison</code> version? Or that
<em class="emph">it</em> would build?)
</p>
<p>If the repository has all the generated files, then it&rsquo;s easy to just check
them out and build. (Or <em class="emph">easier</em>, depending upon how far back we go.)
</p>
<p>And that brings us to the second (and stronger) reason why all the files
really need to be in Git.  It boils down to who do you cater
to&mdash;the <code class="command">gawk</code> developer(s), or the user who just wants to check
out a version and try it out?
</p>
<p>The <code class="command">gawk</code> maintainer
wants it to be possible for any interested <code class="command">awk</code> user in the
world to just clone the repository, check out the branch of interest and
build it, without their having to have the correct version(s) of the
autotools.<a class="footnote" id="DOCF121" href="#FOOT121"><sup>121</sup></a>
That is the point of the <samp class="file">bootstrap.sh</samp> file.  It touches the
various other files in the right order such that
</p>
<div class="example">
<pre class="example-preformatted"># The canonical incantation for building GNU software:
./bootstrap.sh &amp;&amp; ./configure &amp;&amp; make
</pre></div>

<p>will <em class="emph">just work</em>.
</p>
<p>This is extremely important for the <code class="code">master</code> and
<code class="code">gawk-<var class="var">X</var>.<var class="var">Y</var>-stable</code> branches.
</p>
<p>Further, the <code class="command">gawk</code> maintainer would argue that it&rsquo;s also
important for the <code class="command">gawk</code> developers. When he tried to check out
the <code class="code">xgawk</code> branch<a class="footnote" id="DOCF122" href="#FOOT122"><sup>122</sup></a> to build it, he
couldn&rsquo;t. (No <samp class="file">ltmain.sh</samp> file, and he had no idea how to create it,
and that was not the only problem.)
</p>
<p>He felt <em class="emph">extremely</em> frustrated.  With respect to that branch,
the maintainer is no different than Jane User who wants to try to build
<code class="code">gawk-4.1-stable</code> or <code class="code">master</code> from the repository.
</p>
<p>Thus, the maintainer thinks that it&rsquo;s not just important, but critical,
that for any given branch, the above incantation <em class="emph">just works</em>.
</p>
<p>A third reason to have all the files is that without them, using &lsquo;<samp class="samp">git
bisect</samp>&rsquo; to try to find the commit that introduced a bug is exceedingly
difficult. The maintainer tried to do that on another project that
requires running bootstrapping scripts just to create <code class="command">configure</code>
and so on; it was really painful. When the repository is self-contained,
using <code class="command">git bisect</code> in it is very easy.
</p>

<p>What are some of the consequences and/or actions to take?
</p>
<ol class="enumerate">
<li> We don&rsquo;t mind that there are differing files in the different branches
as a result of different versions of the autotools.

<ol class="enumerate" type="A" start="1">
<li> It&rsquo;s the maintainer&rsquo;s job to merge them and he will deal with it.

</li><li> He is really good at &lsquo;<samp class="samp">git diff x y &gt; /tmp/diff1 ; gvim /tmp/diff1</samp>&rsquo; to
remove the diffs that aren&rsquo;t of interest in order to review code.
</li></ol>

</li><li> It would certainly help if everyone used the same versions of the GNU tools
as he does, which in general are the latest released versions of
Automake,
Autoconf,
<code class="command">bison</code>,
GNU <code class="command">gettext</code>,
and
Libtool.


<a class="index-entry-id" id="index-PATH-environment-variable"></a>
<a class="index-entry-id" id="index-environment-variables-PATH"></a>
<p>Installing from source is quite easy. It&rsquo;s how the maintainer worked for years
(and still works).
He had <samp class="file">/usr/local/bin</samp> at the front of his <code class="env">PATH</code> and just did:
</p>
<div class="example">
<pre class="example-preformatted">wget https://ftp.gnu.org/gnu/<var class="var">package</var>/<var class="var">package</var>-<var class="var">x</var>.<var class="var">y</var>.<var class="var">z</var>.tar.gz
tar -xpzvf <var class="var">package</var>-<var class="var">x</var>.<var class="var">y</var>.<var class="var">z</var>.tar.gz
cd <var class="var">package</var>-<var class="var">x</var>.<var class="var">y</var>.<var class="var">z</var>
./configure &amp;&amp; make &amp;&amp; make check
make install    # as root
</pre></div>

<blockquote class="quotation">
<p><b class="b">NOTE:</b> Because of the &lsquo;<samp class="samp">https://</samp>&rsquo; URL, you may have to supply the
<samp class="option">--no-check-certificate</samp> option to <code class="command">wget</code> to download
the file.
</p></blockquote>



</li></ol>

<p>Most of the above was originally written by the maintainer to other
<code class="command">gawk</code> developers.  It raised the objection from one of
the developers &ldquo;&hellip; that anybody pulling down the source from
Git is not an end user.&rdquo;
</p>
<p>However, this is not true. There are &ldquo;power <code class="command">awk</code> users&rdquo;
who can build <code class="command">gawk</code> (using the magic incantation shown previously)
but who can&rsquo;t program in C.  Thus, the major branches should be
kept buildable all the time.
</p>
<p>It was then suggested that there be a <code class="command">cron</code> job to create
nightly tarballs of &ldquo;the source.&rdquo;  Here, the problem is that there
are source trees, corresponding to the various branches! So,
nightly tarballs aren&rsquo;t the answer, especially as the repository can go
for weeks without significant change being introduced.
</p>
<p>Fortunately, the Git server can meet this need. For any given
branch named <var class="var">branchname</var>, use:
</p>
<div class="example">
<pre class="example-preformatted">wget https://git.savannah.gnu.org/cgit/gawk.git/snapshot/gawk-<var class="var">branchname</var>.tar.gz
</pre></div>

<p>to retrieve a snapshot of the given branch.
</p>
<hr>
</div>
</div>
<div class="appendixsec-level-extent" id="Future-Extensions">
<div class="nav-panel">
<p>
Next: <a href="#Implementation-Limitations" accesskey="n" rel="next">Some Limitations of the Implementation</a>, Previous: <a href="#Additions" accesskey="p" rel="prev">Making Additions to <code class="command">gawk</code></a>, Up: <a href="#Notes" accesskey="u" rel="up">Implementation Notes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Probable-Future-Extensions"><span>C.3 Probable Future Extensions<a class="copiable-link" href="#Probable-Future-Extensions"> &para;</a></span></h3>
<a class="index-entry-id" id="index-Perl"></a>
<a class="index-entry-id" id="index-Wall_002c-Larry-1"></a>
<a class="index-entry-id" id="index-Robbins-Arnold-7"></a>
<blockquote class="quotation">
<p><i class="i">AWK is a language similar to PERL, only considerably more elegant.</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Arnold Robbins</em>
</div>
<blockquote class="quotation">
<p><i class="i">Hey!</i>
</p></blockquote>
<div class="center">&mdash; <em class="emph">Larry Wall</em>
</div>
<p>The <samp class="file">TODO</samp> file in the <code class="code">master</code> branch of the <code class="command">gawk</code>
Git repository lists possible future enhancements.  Some of these relate
to the source code, and others to possible new features.  Please see
that file for the list.
See <a class="xref" href="#Additions">Making Additions to <code class="command">gawk</code></a>,
if you are interested in tackling any of the projects listed there.
</p>
<hr>
</div>
<div class="appendixsec-level-extent" id="Implementation-Limitations">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Design" accesskey="n" rel="next">Extension API Design</a>, Previous: <a href="#Future-Extensions" accesskey="p" rel="prev">Probable Future Extensions</a>, Up: <a href="#Notes" accesskey="u" rel="up">Implementation Notes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Some-Limitations-of-the-Implementation"><span>C.4 Some Limitations of the Implementation<a class="copiable-link" href="#Some-Limitations-of-the-Implementation"> &para;</a></span></h3>

<p>This following table describes limits of <code class="command">gawk</code> on a Unix-like
system (although it is variable even then). Other systems may have
different limits.
</p>
<table class="multitable">
<thead><tr><th width="40%">Item</th><th width="60%">Limit</th></tr></thead>
<tbody><tr><td width="40%">Characters in a character class</td><td width="60%">2^(number of bits per byte)</td></tr>
<tr><td width="40%">Length of input record in bytes</td><td width="60%"><code class="code">ULONG_MAX</code></td></tr>
<tr><td width="40%">Length of output record</td><td width="60%">Unlimited</td></tr>
<tr><td width="40%">Length of source line</td><td width="60%">Unlimited</td></tr>
<tr><td width="40%">Number of fields in a record</td><td width="60%"><code class="code">ULONG_MAX</code></td></tr>
<tr><td width="40%">Number of file redirections</td><td width="60%">Unlimited</td></tr>
<tr><td width="40%">Number of input records in one file</td><td width="60%"><code class="code">MAX_LONG</code></td></tr>
<tr><td width="40%">Number of input records total</td><td width="60%"><code class="code">MAX_LONG</code></td></tr>
<tr><td width="40%">Number of pipe redirections</td><td width="60%">min(number of processes per user, number of open files)</td></tr>
<tr><td width="40%">Numeric values</td><td width="60%">Double-precision floating point (if not using MPFR)</td></tr>
<tr><td width="40%">Size of a field in bytes</td><td width="60%"><code class="code">ULONG_MAX</code></td></tr>
<tr><td width="40%">Size of a literal string in bytes</td><td width="60%"><code class="code">ULONG_MAX</code></td></tr>
<tr><td width="40%">Size of a printf string in bytes</td><td width="60%"><code class="code">ULONG_MAX</code></td></tr>
</tbody>
</table>

<hr>
</div>
<div class="appendixsec-level-extent" id="Extension-Design">
<div class="nav-panel">
<p>
Next: <a href="#Notes-summary" accesskey="n" rel="next">Summary</a>, Previous: <a href="#Implementation-Limitations" accesskey="p" rel="prev">Some Limitations of the Implementation</a>, Up: <a href="#Notes" accesskey="u" rel="up">Implementation Notes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Extension-API-Design"><span>C.5 Extension API Design<a class="copiable-link" href="#Extension-API-Design"> &para;</a></span></h3>

<p>This section documents the design of the extension API,
including a discussion of some of the history and problems that needed
to be solved.
</p>
<p>The first version of extensions for <code class="command">gawk</code> was developed in
the mid-1990s and released with <code class="command">gawk</code> 3.1 in the late 1990s.
The basic mechanisms and design remained unchanged for close to 15 years,
until 2012.
</p>
<p>The old extension mechanism used data types and functions from
<code class="command">gawk</code> itself, with a &ldquo;clever hack&rdquo; to install extension
functions.
</p>
<p><code class="command">gawk</code> included some sample extensions, of which a few were
really useful.  However, it was clear from the outset that the extension
mechanism was bolted onto the side and was not really well thought out.
</p>

<ul class="mini-toc">
<li><a href="#Old-Extension-Problems" accesskey="1">Problems With The Old Mechanism</a></li>
<li><a href="#Extension-New-Mechanism-Goals" accesskey="2">Goals For A New Mechanism</a></li>
<li><a href="#Extension-Other-Design-Decisions" accesskey="3">Other Design Decisions</a></li>
<li><a href="#Extension-Future-Growth" accesskey="4">Room For Future Growth</a></li>
</ul>
<hr>
<div class="appendixsubsec-level-extent" id="Old-Extension-Problems">
<div class="nav-panel">
<p>
Next: <a href="#Extension-New-Mechanism-Goals" accesskey="n" rel="next">Goals For A New Mechanism</a>, Up: <a href="#Extension-Design" accesskey="u" rel="up">Extension API Design</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Problems-With-The-Old-Mechanism"><span>C.5.1 Problems With The Old Mechanism<a class="copiable-link" href="#Problems-With-The-Old-Mechanism"> &para;</a></span></h4>

<p>The old extension mechanism had several problems:
</p>
<ul class="itemize mark-bullet">
<li>It depended heavily upon <code class="command">gawk</code> internals.  Any time the
<code class="code">NODE</code> structure<a class="footnote" id="DOCF123" href="#FOOT123"><sup>123</sup></a> changed, an extension would have to be
recompiled. Furthermore, to really write extensions required understanding
something about <code class="command">gawk</code>&rsquo;s internal functions.  There was some
documentation in this Web page, but it was quite minimal.

</li><li>Being able to call into <code class="command">gawk</code> from an extension required linker
facilities that are common on Unix-derived systems but that did
not work on MS-Windows systems; users wanting extensions on MS-Windows
had to statically link them into <code class="command">gawk</code>, even though MS-Windows supports
dynamic loading of shared objects.

</li><li>The API would change occasionally as <code class="command">gawk</code> changed; no compatibility
between versions was ever offered or planned for.
</li></ul>

<p>Despite the drawbacks, the <code class="command">xgawk</code> project developers forked
<code class="command">gawk</code> and developed several significant extensions. They also
enhanced <code class="command">gawk</code>&rsquo;s facilities relating to file inclusion and
shared object access.
</p>
<p>A new API was desired for a long time, but only in 2012 did the
<code class="command">gawk</code> maintainer and the <code class="command">xgawk</code> developers finally
start working on it together.  More information about the <code class="command">xgawk</code>
project is provided in <a class="ref" href="#gawkextlib">The <code class="code">gawkextlib</code> Project</a>.
</p>
<hr>
</div>
<div class="appendixsubsec-level-extent" id="Extension-New-Mechanism-Goals">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Other-Design-Decisions" accesskey="n" rel="next">Other Design Decisions</a>, Previous: <a href="#Old-Extension-Problems" accesskey="p" rel="prev">Problems With The Old Mechanism</a>, Up: <a href="#Extension-Design" accesskey="u" rel="up">Extension API Design</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Goals-For-A-New-Mechanism"><span>C.5.2 Goals For A New Mechanism<a class="copiable-link" href="#Goals-For-A-New-Mechanism"> &para;</a></span></h4>

<p>Some goals for the new API were:
</p>
<ul class="itemize mark-bullet">
<li>The API should be independent of <code class="command">gawk</code> internals.  Changes in
<code class="command">gawk</code> internals should not be visible to the writer of an
extension function.

</li><li>The API should provide <em class="emph">binary</em> compatibility across <code class="command">gawk</code>
releases as long as the API itself does not change.

</li><li>The API should enable extensions written in C or C++ to have roughly the
same &ldquo;appearance&rdquo; to <code class="command">awk</code>-level code as <code class="command">awk</code>
functions do. This means that extensions should have:

<ul class="itemize mark-minus">
<li>The ability to access function parameters.

</li><li>The ability to turn an undefined parameter into an array (call by reference).

</li><li>The ability to create, access and update global variables.

</li><li>Easy access to all the elements of an array at once (&ldquo;array flattening&rdquo;)
in order to loop over all the element in an easy fashion for C code.

</li><li>The ability to create arrays (including <code class="command">gawk</code>&rsquo;s true
arrays of arrays).
</li></ul>
</li></ul>

<p>Some additional important goals were:
</p>
<ul class="itemize mark-bullet">
<li>The API should use only features in ISO C 90, so that extensions
can be written using the widest range of C and C++ compilers. The header
should include the appropriate &lsquo;<samp class="samp">#ifdef __cplusplus</samp>&rsquo; and &lsquo;<samp class="samp">extern &quot;C&quot;</samp>&rsquo;
magic so that a C++ compiler could be used.  (If using C++, the runtime
system has to be smart enough to call any constructors and destructors,
as <code class="command">gawk</code> is a C program. As of this writing, this has not been
tested.)

</li><li>The API mechanism should not require access to <code class="command">gawk</code>&rsquo;s
symbols<a class="footnote" id="DOCF124" href="#FOOT124"><sup>124</sup></a> by the compile-time or dynamic linker,
in order to enable creation of extensions that also work on MS-Windows.
</li></ul>

<p>During development, it became clear that there were other features
that should be available to extensions, which were also subsequently
provided:
</p>
<ul class="itemize mark-bullet">
<li>Extensions should have the ability to hook into <code class="command">gawk</code>&rsquo;s
I/O redirection mechanism.  In particular, the <code class="command">xgawk</code>
developers provided a so-called &ldquo;open hook&rdquo; to take over reading
records.  During development, this was generalized to allow
extensions to hook into input processing, output processing, and
two-way I/O.

</li><li>An extension should be able to provide a &ldquo;call back&rdquo; function
to perform cleanup actions when <code class="command">gawk</code> exits.

</li><li>An extension should be able to provide a version string so that
<code class="command">gawk</code>&rsquo;s <samp class="option">--version</samp> option can provide information
about extensions as well.
</li></ul>

<p>The requirement to avoid access to <code class="command">gawk</code>&rsquo;s symbols is, at first
glance, a difficult one to meet.
</p>
<p>One design, apparently used by Perl and Ruby and maybe others, would
be to make the mainline <code class="command">gawk</code> code into a library, with the
<code class="command">gawk</code> utility a small C <code class="code">main()</code> function linked against
the library.
</p>
<p>This seemed like the tail wagging the dog, complicating build and
installation and making a simple copy of the <code class="command">gawk</code> executable
from one system to another (or one place to another on the same
system!) into a chancy operation.
</p>
<p>Pat Rankin suggested the solution that was adopted.
See <a class="xref" href="#Extension-Mechanism-Outline">How It Works at a High Level</a>, for the details.
</p>
<hr>
</div>
<div class="appendixsubsec-level-extent" id="Extension-Other-Design-Decisions">
<div class="nav-panel">
<p>
Next: <a href="#Extension-Future-Growth" accesskey="n" rel="next">Room For Future Growth</a>, Previous: <a href="#Extension-New-Mechanism-Goals" accesskey="p" rel="prev">Goals For A New Mechanism</a>, Up: <a href="#Extension-Design" accesskey="u" rel="up">Extension API Design</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Other-Design-Decisions"><span>C.5.3 Other Design Decisions<a class="copiable-link" href="#Other-Design-Decisions"> &para;</a></span></h4>

<p>As an arbitrary design decision, extensions can read the values of
predefined variables and arrays (such as <code class="code">ARGV</code> and <code class="code">FS</code>), but cannot
change them, with the exception of <code class="code">PROCINFO</code>.
</p>
<p>The reason for this is to prevent an extension function from affecting
the flow of an <code class="command">awk</code> program outside its control.  While a real
<code class="command">awk</code> function can do what it likes, that is at the discretion
of the programmer.  An extension function should provide a service or
make a C API available for use within <code class="command">awk</code>, and not mess with
<code class="code">FS</code> or <code class="code">ARGC</code> and <code class="code">ARGV</code>.
</p>
<p>In addition, it becomes easy to start down a slippery slope. How
much access to <code class="command">gawk</code> facilities do extensions need?
Do they need <code class="code">getline</code>?  What about calling <code class="code">gsub()</code> or
compiling regular expressions?  What about calling into <code class="command">awk</code>
functions? (<em class="emph">That</em> would be messy.)
</p>
<p>In order to avoid these issues, the <code class="command">gawk</code> developers chose
to start with the simplest, most basic features that are still truly useful.
</p>
<p>Another decision is that although <code class="command">gawk</code> provides nice things like
MPFR, and arrays indexed internally by integers, these features are not
being brought out to the API in order to keep things simple and close to
traditional <code class="command">awk</code> semantics.  (In fact, arrays indexed internally
by integers are so transparent that they aren&rsquo;t even documented!)
</p>
<p>Additionally, all functions in the API check that their pointer
input parameters are not <code class="code">NULL</code>. If they are, they return an error.
(It is a good idea for extension code to verify that
pointers received from <code class="command">gawk</code> are not <code class="code">NULL</code>.
Such a thing should not happen, but the <code class="command">gawk</code> developers
are only human, and they have been known to occasionally make
mistakes.)
</p>
<p>With time, the API will undoubtedly evolve; the <code class="command">gawk</code> developers
expect this to be driven by user needs. For now, the current API seems
to provide a minimal yet powerful set of features for creating extensions.
</p>
<hr>
</div>
<div class="appendixsubsec-level-extent" id="Extension-Future-Growth">
<div class="nav-panel">
<p>
Previous: <a href="#Extension-Other-Design-Decisions" accesskey="p" rel="prev">Other Design Decisions</a>, Up: <a href="#Extension-Design" accesskey="u" rel="up">Extension API Design</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h4 class="appendixsubsec" id="Room-For-Future-Growth"><span>C.5.4 Room For Future Growth<a class="copiable-link" href="#Room-For-Future-Growth"> &para;</a></span></h4>

<p>The API can later be expanded, in at least the following way:
</p>
<ul class="itemize mark-bullet">
<li><code class="command">gawk</code> passes an &ldquo;extension id&rdquo; into the extension when it
first loads the extension.  The extension then passes this id back
to <code class="command">gawk</code> with each function call.  This mechanism allows
<code class="command">gawk</code> to identify the extension calling into it, should it need
to know.

</li></ul>

<p>Of course, as of this writing, no decisions have been made with respect
to the above.
</p>
<hr>
</div>
</div>
<div class="appendixsec-level-extent" id="Notes-summary">
<div class="nav-panel">
<p>
Previous: <a href="#Extension-Design" accesskey="p" rel="prev">Extension API Design</a>, Up: <a href="#Notes" accesskey="u" rel="up">Implementation Notes</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Summary-19"><span>C.6 Summary<a class="copiable-link" href="#Summary-19"> &para;</a></span></h3>

<ul class="itemize mark-bullet">
<li><code class="command">gawk</code>&rsquo;s extensions can be disabled with either the
<samp class="option">--traditional</samp> option or with the <samp class="option">--posix</samp> option.
The <samp class="option">--parsedebug</samp> option is available if <code class="command">gawk</code> is
compiled with &lsquo;<samp class="samp">-DDEBUG</samp>&rsquo;.

</li><li>The source code for <code class="command">gawk</code> is maintained in a publicly
accessible Git repository. Anyone may check it out and view the source.

</li><li>Contributions to <code class="command">gawk</code> are welcome. Following the steps
outlined in this chapter will make it easier to integrate
your contributions into the code base.
This applies both to new feature contributions and to ports to
additional operating systems.

</li><li><code class="command">gawk</code> has some limits&mdash;generally those that are imposed by
the machine architecture.

</li><li>The extension API design was intended to solve a number of problems
with the previous extension mechanism, enable features needed by
the <code class="code">xgawk</code> project, and provide binary compatibility going forward.

</li><li>The previous extension mechanism is no longer supported and was
removed from the code base with the 4.2 release.

</li></ul>


<hr>
</div>
</div>
<div class="appendix-level-extent" id="Basic-Concepts">
<div class="nav-panel">
<p>
Next: <a href="#Glossary" accesskey="n" rel="next">Glossary</a>, Previous: <a href="#Notes" accesskey="p" rel="prev">Implementation Notes</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="appendix" id="Basic-Programming-Concepts"><span>Appendix D Basic Programming Concepts<a class="copiable-link" href="#Basic-Programming-Concepts"> &para;</a></span></h2>
<a class="index-entry-id" id="index-programming-concepts"></a>
<a class="index-entry-id" id="index-programming-concepts-1"></a>

<p>This appendix attempts to define some of the basic concepts
and terms that are used throughout the rest of this Web page.
As this Web page is specifically about <code class="command">awk</code>,
and not about computer programming in general, the coverage here
is by necessity fairly cursory and simplistic.
(If you need more background, there are many
other introductory texts that you should refer to instead.)
</p>

<ul class="mini-toc">
<li><a href="#Basic-High-Level" accesskey="1">What a Program Does</a></li>
<li><a href="#Basic-Data-Typing" accesskey="2">Data Values in a Computer</a></li>
</ul>
<hr>
<div class="appendixsec-level-extent" id="Basic-High-Level">
<div class="nav-panel">
<p>
Next: <a href="#Basic-Data-Typing" accesskey="n" rel="next">Data Values in a Computer</a>, Up: <a href="#Basic-Concepts" accesskey="u" rel="up">Basic Programming Concepts</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="What-a-Program-Does"><span>D.1 What a Program Does<a class="copiable-link" href="#What-a-Program-Does"> &para;</a></span></h3>

<a class="index-entry-id" id="index-processing-data"></a>
<p>At the most basic level, the job of a program is to process
some input data and produce results.
See <a class="ref" href="#figure_002dgeneral_002dflow">Figure D.1</a>.
</p>
<div class="float" id="figure_002dgeneral_002dflow">
<div class="center"><img class="image" src="gawk_general-program.png" alt="General program flow">
</div><div class="caption"><p><strong class="strong">Figure D.1: </strong>General Program Flow</p></div></div>

<a class="index-entry-id" id="index-compiled-programs"></a>
<a class="index-entry-id" id="index-interpreted-programs"></a>
<p>The &ldquo;program&rdquo; in the figure can be either a compiled
program<a class="footnote" id="DOCF125" href="#FOOT125"><sup>125</sup></a>
(such as <code class="command">ls</code>),
or it may be <em class="dfn">interpreted</em>.  In the latter case, a machine-executable
program such as <code class="command">awk</code> reads your program, and then uses the
instructions in your program to process the data.
</p>
<a class="index-entry-id" id="index-programming-basic-steps"></a>
<p>When you write a program, it usually consists
of the following, very basic set of steps,
as shown in <a class="ref" href="#figure_002dprocess_002dflow">Figure D.2</a>:
</p>
<div class="float" id="figure_002dprocess_002dflow">
<div class="center"><img class="image" src="gawk_process-flow.png" alt="Basic Program Stages">
</div><div class="caption"><p><strong class="strong">Figure D.2: </strong>Basic Program Steps</p></div></div>

<dl class="table">
<dt>Initialization</dt>
<dd><p>These are the things you do before actually starting to process
data, such as checking arguments, initializing any data you need
to work with, and so on.
This step corresponds to <code class="command">awk</code>&rsquo;s <code class="code">BEGIN</code> rule
(see <a class="pxref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>).
</p>
<p>If you were baking a cake, this might consist of laying out all the
mixing bowls and the baking pan, and making sure you have all the
ingredients that you need.
</p>
</dd>
<dt>Processing</dt>
<dd><p>This is where the actual work is done.  Your program reads data,
one logical chunk at a time, and processes it as appropriate.
</p>
<p>In most programming languages, you have to manually manage the reading
of data, checking to see if there is more each time you read a chunk.
<code class="command">awk</code>&rsquo;s pattern-action paradigm
(see <a class="pxref" href="#Getting-Started">Getting Started with <code class="command">awk</code></a>)
handles the mechanics of this for you.
</p>
<p>In baking a cake, the processing corresponds to the actual labor:
breaking eggs, mixing the flour, water, and other ingredients, and then putting the cake
into the oven.
</p>
</dd>
<dt>Clean Up</dt>
<dd><p>Once you&rsquo;ve processed all the data, you may have things you need to
do before exiting.
This step corresponds to <code class="command">awk</code>&rsquo;s <code class="code">END</code> rule
(see <a class="pxref" href="#BEGIN_002fEND">The <code class="code">BEGIN</code> and <code class="code">END</code> Special Patterns</a>).
</p>
<p>After the cake comes out of the oven, you still have to wrap it in
plastic wrap to keep anyone from tasting it, as well as wash
the mixing bowls and utensils.
</p></dd>
</dl>

<a class="index-entry-id" id="index-algorithms"></a>
<p>An <em class="dfn">algorithm</em> is a detailed set of instructions necessary to accomplish
a task, or process data.  It is much the same as a recipe for baking
a cake.  Programs implement algorithms.  Often, it is up to you to design
the algorithm and implement it, simultaneously.
</p>
<a class="index-entry-id" id="index-records-1"></a>
<a class="index-entry-id" id="index-fields-2"></a>
<p>The &ldquo;logical chunks&rdquo; we talked about previously are called <em class="dfn">records</em>,
similar to the records a company keeps on employees, a school keeps for
students, or a doctor keeps for patients.
Each record has many component parts, such as first and last names,
date of birth, address, and so on.  The component parts are referred
to as the <em class="dfn">fields</em> of the record.
</p>
<p>The act of reading data is termed <em class="dfn">input</em>, and that of
generating results, not too surprisingly, is termed <em class="dfn">output</em>.
They are often referred to together as &ldquo;input/output,&rdquo;
and even more often, as &ldquo;I/O&rdquo; for short.
(You will also see &ldquo;input&rdquo; and &ldquo;output&rdquo; used as verbs.)
</p>
<a class="index-entry-id" id="index-data_002ddriven-languages"></a>
<a class="index-entry-id" id="index-languages_002c-data_002ddriven"></a>
<p><code class="command">awk</code> manages the reading of data for you, as well as the
breaking it up into records and fields.  Your program&rsquo;s job is to
tell <code class="command">awk</code> what to do with the data.  You do this by describing
<em class="dfn">patterns</em> in the data to look for, and <em class="dfn">actions</em> to execute
when those patterns are seen.  This <em class="dfn">data-driven</em> nature of
<code class="command">awk</code> programs usually makes them both easier to write
and easier to read.
</p>
<hr>
</div>
<div class="appendixsec-level-extent" id="Basic-Data-Typing">
<div class="nav-panel">
<p>
Previous: <a href="#Basic-High-Level" accesskey="p" rel="prev">What a Program Does</a>, Up: <a href="#Basic-Concepts" accesskey="u" rel="up">Basic Programming Concepts</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h3 class="appendixsec" id="Data-Values-in-a-Computer"><span>D.2 Data Values in a Computer<a class="copiable-link" href="#Data-Values-in-a-Computer"> &para;</a></span></h3>

<a class="index-entry-id" id="index-variables-1"></a>
<p>In a program,
you keep track of information and values in things called <em class="dfn">variables</em>.
A variable is just a name for a given value, such as <code class="code">first_name</code>,
<code class="code">last_name</code>, <code class="code">address</code>, and so on.
<code class="command">awk</code> has several predefined variables, and it has
special names to refer to the current input record
and the fields of the record.
You may also group multiple
associated values under one name, as an array.
</p>
<a class="index-entry-id" id="index-values-numeric"></a>
<a class="index-entry-id" id="index-values-string"></a>
<a class="index-entry-id" id="index-scalar-values"></a>
<p>Data, particularly in <code class="command">awk</code>, consists of either numeric
values, such as 42 or 3.1415927, or string values.
String values are essentially anything that&rsquo;s not a number, such as a name.
Strings are sometimes referred to as <em class="dfn">character data</em>, since they
store the individual characters that comprise them.
Individual variables, as well as numeric and string variables, are
referred to as <em class="dfn">scalar</em> values.
Groups of values, such as arrays, are not scalars.
</p>
<p><a class="ref" href="#Computer-Arithmetic">A General Description of Computer Arithmetic</a>, provided a basic introduction to numeric
types (integer and floating-point) and how they are used in a computer.
Please review that information, including a number of caveats that
were presented.
</p>
<a class="index-entry-id" id="index-null-strings-3"></a>
<p>While you are probably used to the idea of a number without a value (i.e., zero),
it takes a bit more getting used to the idea of zero-length character data.
Nevertheless, such a thing exists.
It is called the <em class="dfn">null string</em>.
The null string is character data that has no value.
In other words, it is empty.  It is written in <code class="command">awk</code> programs
like this: <code class="code">&quot;&quot;</code>.
</p>
<p>Humans are used to working in decimal; i.e., base 10.  In base 10,
numbers go from 0 to 9, and then &ldquo;roll over&rdquo; into the next
column.  (Remember grade school? 42 = 4 x 10 + 2.)
</p>
<p>There are other number bases though.  Computers commonly use base 2
or <em class="dfn">binary</em>, base 8 or <em class="dfn">octal</em>, and base 16 or <em class="dfn">hexadecimal</em>.
In binary, each column represents two times the value in the column to
its right. Each column may contain either a 0 or a 1.
Thus, binary 1010 represents (1 x 8) + (0 x 4) + (1 x 2)
+ (0 x 1), or decimal 10.
Octal and hexadecimal are discussed more in
<a class="ref" href="#Nondecimal_002dnumbers">Octal and Hexadecimal Numbers</a>.
</p>
<p>At the very lowest level, computers store values as groups of binary digits,
or <em class="dfn">bits</em>.  Modern computers group bits into groups of eight, called <em class="dfn">bytes</em>.
Advanced applications sometimes have to manipulate bits directly,
and <code class="command">gawk</code> provides functions for doing so.
</p>
<p>Programs are written in programming languages.
Hundreds, if not thousands, of programming languages exist.
One of the most popular is the C programming language.
The C language had a very strong influence on the design of
the <code class="command">awk</code> language.
</p>
<a class="index-entry-id" id="index-Kernighan_002c-Brian-6"></a>
<a class="index-entry-id" id="index-Ritchie_002c-Dennis"></a>
<p>There have been several versions of C.  The first is often referred to
as &ldquo;K&amp;R&rdquo; C, after the initials of Brian Kernighan and Dennis Ritchie,
the authors of the first book on C.  (Dennis Ritchie created the language,
and Brian Kernighan was one of the creators of <code class="command">awk</code>.)
</p>
<p>In the mid-1980s, an effort began to produce an international standard
for C.  This work culminated in 1989, with the production of the ANSI
standard for C.  This standard became an ISO standard in 1990.
In 1999, a revised ISO C standard was approved and released.
Where it makes sense, POSIX <code class="command">awk</code> is compatible with 1999 ISO C.
</p>

<hr>
</div>
</div>
<div class="unnumbered-level-extent" id="Glossary">
<div class="nav-panel">
<p>
Next: <a href="#Copying" accesskey="n" rel="next">GNU General Public License</a>, Previous: <a href="#Basic-Concepts" accesskey="p" rel="prev">Basic Programming Concepts</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="unnumbered" id="Glossary-1"><span>Glossary<a class="copiable-link" href="#Glossary-1"> &para;</a></span></h2>

<dl class="table">
<dt>Action</dt>
<dd><p>A series of <code class="command">awk</code> statements attached to a rule.  If the rule&rsquo;s
pattern matches an input record, <code class="command">awk</code> executes the
rule&rsquo;s action.  Actions are always enclosed in braces.
(See <a class="xref" href="#Action-Overview">Actions</a>.)
</p>
<a class="index-entry-id" id="index-Ada-programming-language"></a>
<a class="index-entry-id" id="index-programming-languages-Ada"></a>
</dd>
<dt>Ada</dt>
<dd><p>A programming language originally defined by the U.S. Department of
Defense for embedded programming. It was designed to enforce good
Software Engineering practices.
</p>
</dd>
<dt><a class="index-entry-id" id="index-sed-utility-2"></a>
<a class="index-entry-id" id="index-amazing-awk-assembler-_0028aaa_0029"></a>
<a class="index-entry-id" id="index-aaa-_0028amazing-awk-assembler_0029-program"></a>
<a id="index-Spencer_002c-Henry"></a><span>Amazing <code class="command">awk</code> Assembler<a class="copiable-link" href="#index-Spencer_002c-Henry"> &para;</a></span></dt>
<dd><p>Henry Spencer at the University of Toronto wrote a retargetable assembler
completely as <code class="command">sed</code> and <code class="command">awk</code> scripts.  It is thousands
of lines long, including machine descriptions for several eight-bit
microcomputers.  It is a good example of a program that would have been
better written in another language.
</p>
</dd>
<dt><a class="index-entry-id" id="index-awf-_0028amazingly-workable-formatter_0029-program"></a>
<a id="index-amazingly-workable-formatter-_0028awf_0029"></a><span>Amazingly Workable Formatter (<code class="command">awf</code>)<a class="copiable-link" href="#index-amazingly-workable-formatter-_0028awf_0029"> &para;</a></span></dt>
<dd><p>Henry Spencer at the University of Toronto wrote a formatter that accepts
a large subset of the &lsquo;<samp class="samp">nroff -ms</samp>&rsquo; and &lsquo;<samp class="samp">nroff -man</samp>&rsquo; formatting
commands, using <code class="command">awk</code> and <code class="command">sh</code>.
</p>
</dd>
<dt>Anchor</dt>
<dd><p>The regexp metacharacters &lsquo;<samp class="samp">^</samp>&rsquo; and &lsquo;<samp class="samp">$</samp>&rsquo;, which force the match
to the beginning or end of the string, respectively.
</p>
</dd>
<dt><a id="index-ANSI"></a><span>ANSI<a class="copiable-link" href="#index-ANSI"> &para;</a></span></dt>
<dd><p>The American National Standards Institute.  This organization produces
many standards, among them the standards for the C and C++ programming
languages.
These standards often become international standards as well. See also
&ldquo;ISO.&rdquo;
</p>
</dd>
<dt>Argument</dt>
<dd><p>An argument can be two different things.  It can be an option or a
file name passed to a command while invoking it from the command line, or
it can be something passed to a <em class="dfn">function</em> inside a program, e.g.
inside <code class="command">awk</code>.
</p>
<p>In the latter case, an argument can be passed to a function in two ways.
Either it is given to the called function by value, i.e., a copy of the
value of the variable is made available to the called function, but the
original variable cannot be modified by the function itself; or it is
given by reference, i.e., a pointer to the interested variable is passed to
the function, which can then directly modify it. In <code class="command">awk</code>
scalars are passed by value, and arrays are passed by reference.
See &ldquo;Pass By Value/Reference.&rdquo;
</p>
</dd>
<dt>Array</dt>
<dd><p>A grouping of multiple values under the same name.
Most languages just provide sequential arrays.
<code class="command">awk</code> provides associative arrays.
</p>
</dd>
<dt>Assertion</dt>
<dd><p>A statement in a program that a condition is true at this point in the program.
Useful for reasoning about how a program is supposed to behave.
</p>
</dd>
<dt>Assignment</dt>
<dd><p>An <code class="command">awk</code> expression that changes the value of some <code class="command">awk</code>
variable or data object.  An object that you can assign to is called an
<em class="dfn">lvalue</em>.  The assigned values are called <em class="dfn">rvalues</em>.
See <a class="xref" href="#Assignment-Ops">Assignment Expressions</a>.
</p>
</dd>
<dt>Associative Array</dt>
<dd><p>Arrays in which the indices may be numbers or strings, not just
sequential integers in a fixed range.
</p>
</dd>
<dt><code class="command">awk</code> Language</dt>
<dd><p>The language in which <code class="command">awk</code> programs are written.
</p>
</dd>
<dt><code class="command">awk</code> Program</dt>
<dd><p>An <code class="command">awk</code> program consists of a series of <em class="dfn">patterns</em> and
<em class="dfn">actions</em>, collectively known as <em class="dfn">rules</em>.  For each input record
given to the program, the program&rsquo;s rules are all processed in turn.
<code class="command">awk</code> programs may also contain function definitions.
</p>
</dd>
<dt><code class="command">awk</code> Script</dt>
<dd><p>Another name for an <code class="command">awk</code> program.
</p>
</dd>
<dt>Bash</dt>
<dd><p>The GNU version of the standard shell
(the <b class="b">B</b>ourne-<b class="b">A</b>gain <b class="b">SH</b>ell).
See also &ldquo;Bourne Shell.&rdquo;
</p>
</dd>
<dt>Binary</dt>
<dd><p>Base-two notation, where the digits are <code class="code">0</code>&ndash;<code class="code">1</code>. Since
electronic circuitry works &ldquo;naturally&rdquo; in base 2 (just think of Off/On),
everything inside a computer is calculated using base 2. Each digit
represents the presence (or absence) of a power of 2 and is called a
<em class="dfn">bit</em>. So, for example, the base-two number <code class="code">10101</code> is
the same as decimal 21, ((1 x 16) + (1 x 4) + (1 x 1)).
</p>
<p>Since base-two numbers quickly become
very long to read and write, they are usually grouped by 3 (i.e., they are
read as octal numbers), or by 4 (i.e., they are read as hexadecimal
numbers). There is no direct way to insert base 2 numbers in a C program.
If need arises, such numbers are usually inserted as octal or hexadecimal
numbers. The number of base-two digits that fit into registers used for
representing integer numbers in computers is a rough indication of the
computing power of the computer itself.  Most computers nowadays use 64
bits for representing integer numbers in their registers, but 32-bit,
16-bit and 8-bit registers have been widely used in the past.
See <a class="xref" href="#Nondecimal_002dnumbers">Octal and Hexadecimal Numbers</a>.
</p></dd>
<dt>Bit</dt>
<dd><p>Short for &ldquo;Binary Digit.&rdquo;
All values in computer memory ultimately reduce to binary digits: values
that are either zero or one.
Groups of bits may be interpreted differently&mdash;as integers,
floating-point numbers, character data, addresses of other
memory objects, or other data.
<code class="command">awk</code> lets you work with floating-point numbers and strings.
<code class="command">gawk</code> lets you manipulate bit values with the built-in
functions described in
<a class="ref" href="#Bitwise-Functions">Bit-Manipulation Functions</a>.
</p>
<p>Computers are often defined by how many bits they use to represent integer
values.  Typical systems are 32-bit systems, but 64-bit systems are
becoming increasingly popular, and 16-bit systems have essentially
disappeared.
</p>
</dd>
<dt>Boolean Expression</dt>
<dd><p>Named after the English mathematician Boole. See also &ldquo;Logical Expression.&rdquo;
</p>
</dd>
<dt>Bourne Shell</dt>
<dd><p>The standard shell (<samp class="file">/bin/sh</samp>) on Unix and Unix-like systems,
originally written by Steven R. Bourne at Bell Laboratories.
Many shells (Bash, <code class="command">ksh</code>, <code class="command">pdksh</code>, <code class="command">zsh</code>) are
generally upwardly compatible with the Bourne shell.
</p>
</dd>
<dt>Braces</dt>
<dd><p>The characters &lsquo;<samp class="samp">{</samp>&rsquo; and &lsquo;<samp class="samp">}</samp>&rsquo;.  Braces are used in
<code class="command">awk</code> for delimiting actions, compound statements, and function
bodies.
</p>
</dd>
<dt>Bracket Expression</dt>
<dd><p>Inside a <em class="dfn">regular expression</em>, an expression included in square
brackets, meant to designate a single character as belonging to a
specified character class. A bracket expression can contain a list of one
or more characters, like &lsquo;<samp class="samp">[abc]</samp>&rsquo;, a range of characters, like
&lsquo;<samp class="samp">[A-Z]</samp>&rsquo;, or a name, delimited by &lsquo;<samp class="samp">:</samp>&rsquo;, that designates a known set
of characters, like &lsquo;<samp class="samp">[:digit:]</samp>&rsquo;. The form of bracket expression
enclosed between &lsquo;<samp class="samp">:</samp>&rsquo; is independent of the underlying representation
of the character themselves, which could utilize the ASCII, EBCDIC, or
Unicode codesets, depending on the architecture of the computer system, and on
localization.
See also &ldquo;Regular Expression.&rdquo;
</p>
</dd>
<dt>Built-in Function</dt>
<dd><p>The <code class="command">awk</code> language provides built-in functions that perform various
numerical, I/O-related, and string computations.  Examples are
<code class="code">sqrt()</code> (for the square root of a number) and <code class="code">substr()</code> (for a
substring of a string).
<code class="command">gawk</code> provides functions for timestamp management, bit manipulation,
array sorting, type checking,
and runtime string translation.
(See <a class="xref" href="#Built_002din">Built-in Functions</a>.)
</p>
</dd>
<dt>Built-in Variable</dt>
<dd><p><code class="code">ARGC</code>,
<code class="code">ARGV</code>,
<code class="code">CONVFMT</code>,
<code class="code">ENVIRON</code>,
<code class="code">FILENAME</code>,
<code class="code">FNR</code>,
<code class="code">FS</code>,
<code class="code">NF</code>,
<code class="code">NR</code>,
<code class="code">OFMT</code>,
<code class="code">OFS</code>,
<code class="code">ORS</code>,
<code class="code">RLENGTH</code>,
<code class="code">RSTART</code>,
<code class="code">RS</code>,
and
<code class="code">SUBSEP</code>
are the variables that have special meaning to <code class="command">awk</code>.
In addition,
<code class="code">ARGIND</code>,
<code class="code">BINMODE</code>,
<code class="code">ERRNO</code>,
<code class="code">FIELDWIDTHS</code>,
<code class="code">FPAT</code>,
<code class="code">IGNORECASE</code>,
<code class="code">LINT</code>,
<code class="code">PROCINFO</code>,
<code class="code">RT</code>,
and
<code class="code">TEXTDOMAIN</code>
are the variables that have special meaning to <code class="command">gawk</code>.
Changing some of them affects <code class="command">awk</code>&rsquo;s running environment.
(See <a class="xref" href="#Built_002din-Variables">Predefined Variables</a>.)
</p>
</dd>
<dt>C</dt>
<dd><p>The system programming language that most GNU software is written in.  The
<code class="command">awk</code> programming language has C-like syntax, and this Web page
points out similarities between <code class="command">awk</code> and C when appropriate.
</p>
<p>In general, <code class="command">gawk</code> attempts to be as similar to the 1990 version
of ISO C as makes sense.
</p>
</dd>
<dt>C Shell</dt>
<dd><p>The C Shell (<code class="command">csh</code> or its improved version, <code class="command">tcsh</code>) is a Unix shell that was
created by Bill Joy in the late 1970s. The C shell was differentiated from
other shells by its interactive features and overall style, which
looks more like C. The C Shell is not backward compatible with the Bourne
Shell, so special attention is required when converting scripts
written for other Unix shells to the C shell, especially with regard to the management of
shell variables.
See also &ldquo;Bourne Shell.&rdquo;
</p>
</dd>
<dt>C++</dt>
<dd><p>A popular object-oriented programming language derived from C.
</p>
</dd>
<dt>Character Class</dt>
<dd><p>See &ldquo;Bracket Expression.&rdquo;
</p>
</dd>
<dt>Character List</dt>
<dd><p>See &ldquo;Bracket Expression.&rdquo;
</p>
<a class="index-entry-id" id="index-ASCII-9"></a>
<a class="index-entry-id" id="index-ISO-ISO-8859_002d1-character-set"></a>
<a class="index-entry-id" id="index-ISO-ISO-Latin_002d1-character-set"></a>
</dd>
<dt><a class="index-entry-id" id="index-Unicode-2"></a>
<a id="index-character-sets-_0028machine-character-encodings_0029-1"></a><span>Character Set<a class="copiable-link" href="#index-character-sets-_0028machine-character-encodings_0029-1"> &para;</a></span></dt>
<dd><p>The set of numeric codes used by a computer system to represent the
characters (letters, numbers, punctuation, etc.) of a particular country
or place. The most common character set in use today is ASCII (American
Standard Code for Information Interchange).  Many European
countries use an extension of ASCII known as ISO-8859-1 (ISO Latin-1).
The <a class="uref" href="http://www.unicode.org">Unicode character set</a> is
increasingly popular and standard, and is particularly
widely used on GNU/Linux systems.
</p>
</dd>
<dt><a class="index-entry-id" id="index-Bentley_002c-Jon"></a>
<a class="index-entry-id" id="index-chem-utility"></a>
<a id="index-Kernighan_002c-Brian-7"></a><span>CHEM<a class="copiable-link" href="#index-Kernighan_002c-Brian-7"> &para;</a></span></dt>
<dd><p>A preprocessor for <code class="command">pic</code> that reads descriptions of molecules
and produces <code class="command">pic</code> input for drawing them.
It was written in <code class="command">awk</code>
by Brian Kernighan and Jon Bentley, and is available from
<a class="uref" href="http://netlib.org/typesetting/chem">http://netlib.org/typesetting/chem</a>.
</p>
</dd>
<dt>Comparison Expression</dt>
<dd><p>A relation that is either true or false, such as &lsquo;<samp class="samp">a &lt; b</samp>&rsquo;.
Comparison expressions are used in <code class="code">if</code>, <code class="code">while</code>, <code class="code">do</code>,
and <code class="code">for</code>
statements, and in patterns to select which input records to process.
(See <a class="xref" href="#Typing-and-Comparison">Variable Typing and Comparison Expressions</a>.)
</p>
</dd>
<dt><a id="index-compiled-programs-1"></a><span>Compiler<a class="copiable-link" href="#index-compiled-programs-1"> &para;</a></span></dt>
<dd><p>A program that translates human-readable source code into
machine-executable object code.  The object code is then executed
directly by the computer.
See also &ldquo;Interpreter.&rdquo;
</p>
</dd>
<dt>Complemented Bracket Expression</dt>
<dd><p>The negation of a <em class="dfn">bracket expression</em>.  All that is <em class="emph">not</em>
described by a given bracket expression. The symbol &lsquo;<samp class="samp">^</samp>&rsquo; precedes
the negated bracket expression.  E.g.: &lsquo;<samp class="samp">[^[:digit:]]</samp>&rsquo;
designates whatever character is not a digit. &lsquo;<samp class="samp">[^bad]</samp>&rsquo;
designates whatever character is not one of the letters &lsquo;<samp class="samp">b</samp>&rsquo;, &lsquo;<samp class="samp">a</samp>&rsquo;,
or &lsquo;<samp class="samp">d</samp>&rsquo;.
See &ldquo;Bracket Expression.&rdquo;
</p>
</dd>
<dt>Compound Statement</dt>
<dd><p>A series of <code class="command">awk</code> statements, enclosed in curly braces.  Compound
statements may be nested.
(See <a class="xref" href="#Statements">Control Statements in Actions</a>.)
</p>
</dd>
<dt>Computed Regexps</dt>
<dd><p>See &ldquo;Dynamic Regular Expressions.&rdquo;
</p>
</dd>
<dt>Concatenation</dt>
<dd><p>Concatenating two strings means sticking them together, one after another,
producing a new string.  For example, the string &lsquo;<samp class="samp">foo</samp>&rsquo; concatenated with
the string &lsquo;<samp class="samp">bar</samp>&rsquo; gives the string &lsquo;<samp class="samp">foobar</samp>&rsquo;.
(See <a class="xref" href="#Concatenation">String Concatenation</a>.)
</p>
</dd>
<dt>Conditional Expression</dt>
<dd><p>An expression using the &lsquo;<samp class="samp">?:</samp>&rsquo; ternary operator, such as
&lsquo;<samp class="samp"><var class="var">expr1</var> ? <var class="var">expr2</var> : <var class="var">expr3</var></samp>&rsquo;.  The expression
<var class="var">expr1</var> is evaluated; if the result is true, the value of the whole
expression is the value of <var class="var">expr2</var>; otherwise the value is
<var class="var">expr3</var>.  In either case, only one of <var class="var">expr2</var> and <var class="var">expr3</var>
is evaluated. (See <a class="xref" href="#Conditional-Exp">Conditional Expressions</a>.)
</p>
</dd>
<dt>Control Statement</dt>
<dd><p>A control statement is an instruction to perform a given operation or a set
of operations inside an <code class="command">awk</code> program, if a given condition is
true. Control statements are: <code class="code">if</code>, <code class="code">for</code>, <code class="code">while</code>, and
<code class="code">do</code>
(see <a class="pxref" href="#Statements">Control Statements in Actions</a>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-cookie"></a>
<a id="index-McIlroy_002c-Doug"></a><span>Cookie<a class="copiable-link" href="#index-McIlroy_002c-Doug"> &para;</a></span></dt>
<dd><p>A peculiar goodie, token, saying or remembrance
produced by or presented to a program. (With thanks to Professor Doug McIlroy.)
</p>
</dd>
<dt>Coprocess</dt>
<dd><p>A subordinate program with which two-way communications is possible.
</p>
</dd>
<dt>Curly Braces</dt>
<dd><p>See &ldquo;Braces.&rdquo;
</p>
</dd>
<dt><a id="index-dark-corner-1"></a><span>Dark Corner<a class="copiable-link" href="#index-dark-corner-1"> &para;</a></span></dt>
<dd><p>An area in the language where specifications often were (or still
are) not clear, leading to unexpected or undesirable behavior.
Such areas are marked in this Web page with
&ldquo;(d.c.)&rdquo; in the text
and are indexed under the heading &ldquo;dark corner.&rdquo;
</p>
</dd>
<dt>Data Driven</dt>
<dd><p>A description of <code class="command">awk</code> programs, where you specify the data you
are interested in processing, and what to do when that data is seen.
</p>
</dd>
<dt>Data Objects</dt>
<dd><p>These are numbers and strings of characters.  Numbers are converted into
strings and vice versa, as needed.
(See <a class="xref" href="#Conversion">Conversion of Strings and Numbers</a>.)
</p>
</dd>
<dt>Deadlock</dt>
<dd><p>The situation in which two communicating processes are each waiting
for the other to perform an action.
</p>
</dd>
<dt>Debugger</dt>
<dd><p>A program used to help developers remove &ldquo;bugs&rdquo; from (de-bug)
their programs.
</p>
</dd>
<dt>Double Precision</dt>
<dd><p>An internal representation of numbers that can have fractional parts.
Double precision numbers keep track of more digits than do single precision
numbers, but operations on them are sometimes more expensive.  This is the way
<code class="command">awk</code> stores numeric values.  It is the C type <code class="code">double</code>.
</p>
</dd>
<dt>Dynamic Regular Expression</dt>
<dd><p>A dynamic regular expression is a regular expression written as an
ordinary expression.  It could be a string constant, such as
<code class="code">&quot;foo&quot;</code>, but it may also be an expression whose value can vary.
(See <a class="xref" href="#Computed-Regexps">Using Dynamic Regexps</a>.)
</p>
</dd>
<dt>Empty String</dt>
<dd><p>See &ldquo;Null String.&rdquo;
</p>
</dd>
<dt><a id="index-environment_002c-definition-of"></a><span>Environment<a class="copiable-link" href="#index-environment_002c-definition-of"> &para;</a></span></dt>
<dd><p>A collection of strings, of the form &lsquo;<samp class="samp"><var class="var">name</var>=<var class="var">val</var></samp>&rsquo;, that each
program has available to it. Users generally place values into the
environment in order to provide information to various programs. Typical
examples are the environment variables <code class="env">HOME</code> and <code class="env">PATH</code>.
</p>
</dd>
<dt><a id="index-epoch_002c-definition-of"></a><span>Epoch<a class="copiable-link" href="#index-epoch_002c-definition-of"> &para;</a></span></dt>
<dd><p>The date used as the &ldquo;beginning of time&rdquo; for timestamps.
Time values in most systems are represented as seconds since the epoch,
with library functions available for converting these values into
standard date and time formats.
</p>
<p>The epoch on Unix and POSIX systems is 1970-01-01 00:00:00 UTC.
See also &ldquo;GMT&rdquo; and &ldquo;UTC.&rdquo;
</p>
</dd>
<dt><a id="index-ASCII-10"></a><span>Escape Sequences<a class="copiable-link" href="#index-ASCII-10"> &para;</a></span></dt>
<dd><p>A special sequence of characters used for describing nonprinting
characters, such as &lsquo;<samp class="samp">\n</samp>&rsquo; for newline or &lsquo;<samp class="samp">\033</samp>&rsquo; for the ASCII
ESC (Escape) character. (See <a class="xref" href="#Escape-Sequences">Escape Sequences</a>.)
</p>
</dd>
<dt>Extension</dt>
<dd><p>An additional feature or change to a programming language or
utility not defined by that language&rsquo;s or utility&rsquo;s standard.
<code class="command">gawk</code> has (too) many extensions over POSIX <code class="command">awk</code>.
</p>
</dd>
<dt>FDL</dt>
<dd><p>See &ldquo;Free Documentation License.&rdquo;
</p>
</dd>
<dt>Field</dt>
<dd><p>When <code class="command">awk</code> reads an input record, it splits the record into pieces
separated by whitespace (or by a separator regexp that you can
change by setting the predefined variable <code class="code">FS</code>).  Such pieces are
called fields.  If the pieces are of fixed length, you can use the built-in
variable <code class="code">FIELDWIDTHS</code> to describe their lengths.
If you wish to specify the contents of fields instead of the field
separator, you can use the predefined variable <code class="code">FPAT</code> to do so.
(See <a class="xref" href="#Field-Separators">Specifying How Fields Are Separated</a>,
<a class="ref" href="#Constant-Size">Reading Fixed-Width Data</a>,
and
<a class="ref" href="#Splitting-By-Content">Defining Fields by Content</a>.)
</p>
</dd>
<dt>Flag</dt>
<dd><p>A variable whose truth value indicates the existence or nonexistence
of some condition.
</p>
</dd>
<dt>Floating-Point Number</dt>
<dd><p>Often referred to in mathematical terms as a &ldquo;rational&rdquo; or real number,
this is just a number that can have a fractional part.
See also &ldquo;Double Precision&rdquo; and &ldquo;Single Precision.&rdquo;
</p>
</dd>
<dt>Format</dt>
<dd><p>Format strings control the appearance of output in the
<code class="code">strftime()</code> and <code class="code">sprintf()</code> functions, and in the
<code class="code">printf</code> statement as well.  Also, data conversions from numbers to strings
are controlled by the format strings contained in the predefined variables
<code class="code">CONVFMT</code> and <code class="code">OFMT</code>. (See <a class="xref" href="#Control-Letters">Format-Control Letters</a>.)
</p>
</dd>
<dt>Fortran</dt>
<dd><p>Shorthand for FORmula TRANslator, one of the first programming languages
available for scientific calculations. It was created by John Backus,
and has been available since 1957. It is still in use today.
</p>
</dd>
<dt>Free Documentation License</dt>
<dd><p>This document describes the terms under which this Web page
is published and may be copied. (See <a class="xref" href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>.)
</p>
</dd>
<dt><a class="index-entry-id" id="index-Free-Software-Foundation-_0028FSF_0029-2"></a>
<a class="index-entry-id" id="index-Stallman_002c-Richard-3"></a>
<a id="index-FSF-_0028Free-Software-Foundation_0029-2"></a><span>Free Software Foundation<a class="copiable-link" href="#index-FSF-_0028Free-Software-Foundation_0029-2"> &para;</a></span></dt>
<dd><p>A nonprofit organization dedicated
to the production and distribution of freely distributable software.
It was founded by Richard M. Stallman, the author of the original
Emacs editor.  GNU Emacs is the most widely used version of Emacs today.
</p>
</dd>
<dt>FSF</dt>
<dd><p>See &ldquo;Free Software Foundation.&rdquo;
</p>
</dd>
<dt>Function</dt>
<dd><p>A part of an <code class="command">awk</code> program that can be invoked from every point of
the program, to perform a task.  <code class="command">awk</code> has several built-in
functions.
Users can define their own functions in every part of the program.
Function can be recursive, i.e., they may invoke themselves.
See <a class="xref" href="#Functions">Functions</a>.
In <code class="command">gawk</code> it is also possible to have functions shared
among different programs, and included where required using the
<code class="code">@include</code> directive
(see <a class="pxref" href="#Include-Files">Including Other Files into Your Program</a>).
In <code class="command">gawk</code> the name of the function that should be invoked
can be generated at run time, i.e., dynamically.
The <code class="command">gawk</code> extension API provides constructor functions
(see <a class="pxref" href="#Constructor-Functions">Constructor Functions</a>).
</p>

</dd>
<dt><code class="command">gawk</code></dt>
<dd><p>The GNU implementation of <code class="command">awk</code>.
</p>
</dd>
<dt><a id="index-GPL-_0028General-Public-License_0029-1"></a><span>General Public License<a class="copiable-link" href="#index-GPL-_0028General-Public-License_0029-1"> &para;</a></span></dt>
<dd><p>This document describes the terms under which <code class="command">gawk</code> and its source
code may be distributed. (See <a class="xref" href="#Copying">GNU General Public License</a>.)
</p>
</dd>
<dt>GMT</dt>
<dd><p>&ldquo;Greenwich Mean Time.&rdquo;
This is the old term for UTC.
It is the time of day used internally for Unix and POSIX systems.
See also &ldquo;Epoch&rdquo; and &ldquo;UTC.&rdquo;
</p>
</dd>
<dt><a class="index-entry-id" id="index-Free-Software-Foundation-_0028FSF_0029-3"></a>
<a class="index-entry-id" id="index-GNU-Project-1"></a>
<a id="index-FSF-_0028Free-Software-Foundation_0029-3"></a><span>GNU<a class="copiable-link" href="#index-FSF-_0028Free-Software-Foundation_0029-3"> &para;</a></span></dt>
<dd><p>&ldquo;GNU&rsquo;s not Unix&rdquo;.  An on-going project of the Free Software Foundation
to create a complete, freely distributable, POSIX-compliant computing
environment.
</p>
</dd>
<dt>GNU/Linux</dt>
<dd><p>A variant of the GNU system using the Linux kernel, instead of the
Free Software Foundation&rsquo;s Hurd kernel.
The Linux kernel is a stable, efficient, full-featured clone of Unix that has
been ported to a variety of architectures.
It is most popular on PC-class systems, but runs well on a variety of
other systems too.
The Linux kernel source code is available under the terms of the GNU General
Public License, which is perhaps its most important aspect.
</p>
</dd>
<dt>GPL</dt>
<dd><p>See &ldquo;General Public License.&rdquo;
</p>
</dd>
<dt>Hexadecimal</dt>
<dd><p>Base 16 notation, where the digits are <code class="code">0</code>&ndash;<code class="code">9</code> and
<code class="code">A</code>&ndash;<code class="code">F</code>, with &lsquo;<samp class="samp">A</samp>&rsquo;
representing 10, &lsquo;<samp class="samp">B</samp>&rsquo; representing 11, and so on, up to &lsquo;<samp class="samp">F</samp>&rsquo; for 15.
Hexadecimal numbers are written in C using a leading &lsquo;<samp class="samp">0x</samp>&rsquo;,
to indicate their base.  Thus, <code class="code">0x12</code> is 18 ((1 x 16) + 2).
See <a class="xref" href="#Nondecimal_002dnumbers">Octal and Hexadecimal Numbers</a>.
</p>
</dd>
<dt>I/O</dt>
<dd><p>Abbreviation for &ldquo;Input/Output,&rdquo; the act of moving data into and/or
out of a running program.
</p>
</dd>
<dt>Input Record</dt>
<dd><p>A single chunk of data that is read in by <code class="command">awk</code>.  Usually, an <code class="command">awk</code> input
record consists of one line of text.
(See <a class="xref" href="#Records">How Input Is Split into Records</a>.)
</p>
</dd>
<dt>Integer</dt>
<dd><p>A whole number, i.e., a number that does not have a fractional part.
</p>
</dd>
<dt>Internationalization</dt>
<dd><p>The process of writing or modifying a program so
that it can use multiple languages without requiring
further source code changes.
</p>
</dd>
<dt><a id="index-interpreted-programs-1"></a><span>Interpreter<a class="copiable-link" href="#index-interpreted-programs-1"> &para;</a></span></dt>
<dd><p>A program that reads human-readable source code directly, and uses
the instructions in it to process data and produce results.
<code class="command">awk</code> is typically (but not always) implemented as an interpreter.
See also &ldquo;Compiler.&rdquo;
</p>
</dd>
<dt>Interval Expression</dt>
<dd><p>A component of a regular expression that lets you specify repeated matches of
some part of the regexp.  Interval expressions were not originally available
in <code class="command">awk</code> programs.
</p>
</dd>
<dt><a id="index-ISO"></a><span>ISO<a class="copiable-link" href="#index-ISO"> &para;</a></span></dt>
<dd><p>The International Organization for Standardization.
This organization produces international standards for many things, including
programming languages, such as C and C++.
In the computer arena, important standards like those for C, C++, and POSIX
become both American national and ISO international standards simultaneously.
This Web page refers to Standard C as &ldquo;ISO C&rdquo; throughout.
See <a class="uref" href="https://www.iso.org/iso/home/about.htm">the ISO website</a> for more
information about the name of the organization and its language-independent
three-letter acronym.
</p>
<a class="index-entry-id" id="index-Java-programming-language"></a>
<a class="index-entry-id" id="index-programming-languages-Java"></a>
</dd>
<dt>Java</dt>
<dd><p>A modern programming language originally developed by Sun Microsystems
(now Oracle) supporting Object-Oriented programming.  Although usually
implemented by compiling to the instructions for a standard virtual
machine (the JVM), the language can be compiled to native code.
</p>
</dd>
<dt>Keyword</dt>
<dd><p>In the <code class="command">awk</code> language, a keyword is a word that has special
meaning.  Keywords are reserved and may not be used as variable names.
</p>
<p><code class="command">gawk</code>&rsquo;s keywords are:
<code class="code">BEGIN</code>,
<code class="code">BEGINFILE</code>,
<code class="code">END</code>,
<code class="code">ENDFILE</code>,
<code class="code">break</code>,
<code class="code">case</code>,
<code class="code">continue</code>,
<code class="code">default</code>,
<code class="code">delete</code>,
<code class="code">do&hellip;while</code>,
<code class="code">else</code>,
<code class="code">exit</code>,
<code class="code">for&hellip;in</code>,
<code class="code">for</code>,
<code class="code">function</code>,
<code class="code">func</code>,
<code class="code">if</code>,
<code class="code">next</code>,
<code class="code">nextfile</code>,
<code class="code">switch</code>,
and
<code class="code">while</code>.
</p>
</dd>
<dt>Korn Shell</dt>
<dd><p>The Korn Shell (<code class="command">ksh</code>) is a Unix shell which was developed by David Korn at Bell
Laboratories in the early 1980s. The Korn Shell is backward-compatible with the Bourne
shell and includes many features of the C shell.
See also &ldquo;Bourne Shell.&rdquo;
</p>
</dd>
<dt><a class="index-entry-id" id="index-Lesser-General-Public-License-_0028LGPL_0029"></a>
<a class="index-entry-id" id="index-GNU-Lesser-General-Public-License"></a>
<a id="index-LGPL-_0028Lesser-General-Public-License_0029"></a><span>Lesser General Public License<a class="copiable-link" href="#index-LGPL-_0028Lesser-General-Public-License_0029"> &para;</a></span></dt>
<dd><p>This document describes the terms under which binary library archives
or shared objects,
and their source code may be distributed.
</p>
</dd>
<dt>LGPL</dt>
<dd><p>See &ldquo;Lesser General Public License.&rdquo;
</p>
</dd>
<dt>Linux</dt>
<dd><p>See &ldquo;GNU/Linux.&rdquo;
</p>
</dd>
<dt>Localization</dt>
<dd><p>The process of providing the data necessary for an
internationalized program to work in a particular language.
</p>
</dd>
<dt>Logical Expression</dt>
<dd><p>An expression using the operators for logic, AND, OR, and NOT, written
&lsquo;<samp class="samp">&amp;&amp;</samp>&rsquo;, &lsquo;<samp class="samp">||</samp>&rsquo;, and &lsquo;<samp class="samp">!</samp>&rsquo; in <code class="command">awk</code>. Often called <em class="dfn">Boolean
expressions</em>, after the mathematician who pioneered this kind of
mathematical logic.
</p>
</dd>
<dt>Lvalue</dt>
<dd><p>An expression that can appear on the left side of an assignment
operator.  In most languages, lvalues can be variables or array
elements.  In <code class="command">awk</code>, a field designator can also be used as an
lvalue.
</p>
</dd>
<dt>Matching</dt>
<dd><p>The act of testing a string against a regular expression.  If the
regexp describes the contents of the string, it is said to <em class="dfn">match</em> it.
</p>
</dd>
<dt>Metacharacters</dt>
<dd><p>Characters used within a regexp that do not stand for themselves.
Instead, they denote regular expression operations, such as repetition,
grouping, or alternation.
</p>
</dd>
<dt>Nesting</dt>
<dd><p>Nesting is where information is organized in layers, or where objects
contain other similar objects.
In <code class="command">gawk</code> the <code class="code">@include</code>
directive can be nested. The &ldquo;natural&rdquo; nesting of arithmetic and
logical operations can be changed using parentheses
(see <a class="pxref" href="#Precedence">Operator Precedence (How Operators Nest)</a>).
</p>
</dd>
<dt>No-op</dt>
<dd><p>An operation that does nothing.
</p>
</dd>
<dt>Null String</dt>
<dd><p>A string with no characters in it.  It is represented explicitly in
<code class="command">awk</code> programs by placing two double quote characters next to
each other (<code class="code">&quot;&quot;</code>).  It can appear in input data by having two successive
occurrences of the field separator appear next to each other.
</p>
</dd>
<dt>Number</dt>
<dd><p>A numeric-valued data object.  Modern <code class="command">awk</code> implementations use
double precision floating-point to represent numbers.
Ancient <code class="command">awk</code> implementations used single precision floating-point.
</p>
</dd>
<dt>Octal</dt>
<dd><p>Base-eight notation, where the digits are <code class="code">0</code>&ndash;<code class="code">7</code>.
Octal numbers are written in C using a leading &lsquo;<samp class="samp">0</samp>&rsquo;,
to indicate their base.  Thus, <code class="code">013</code> is 11 ((1 x 8) + 3).
See <a class="xref" href="#Nondecimal_002dnumbers">Octal and Hexadecimal Numbers</a>.
</p>
</dd>
<dt>Output Record</dt>
<dd><p>A single chunk of data that is written out by <code class="command">awk</code>.  Usually, an
<code class="command">awk</code> output record consists of one or more lines of text.
See <a class="xref" href="#Records">How Input Is Split into Records</a>.
</p>
</dd>
<dt>Pattern</dt>
<dd><p>Patterns tell <code class="command">awk</code> which input records are interesting to which
rules.
</p>
<p>A pattern is an arbitrary conditional expression against which input is
tested.  If the condition is satisfied, the pattern is said to <em class="dfn">match</em>
the input record.  A typical pattern might compare the input record against
a regular expression. (See <a class="xref" href="#Pattern-Overview">Pattern Elements</a>.)
</p>
</dd>
<dt>PEBKAC</dt>
<dd><p>An acronym describing what is possibly the most frequent
source of computer usage problems. (Problem Exists Between
Keyboard And Chair.)
</p>
</dd>
<dt>Plug-in</dt>
<dd><p>See &ldquo;Extensions.&rdquo;
</p>
</dd>
<dt>POSIX</dt>
<dd><p>The name for a series of standards
that specify a Portable Operating System interface.  The &ldquo;IX&rdquo; denotes
the Unix heritage of these standards.  The main standard of interest for
<code class="command">awk</code> users is
<cite class="cite">IEEE Standard for Information Technology, Standard 1003.1<sup class="sup">TM</sup>-2017
(Revision of IEEE Std 1003.1-2008)</cite>.
The 2018 POSIX standard can be found online at
<a class="url" href="https://pubs.opengroup.org/onlinepubs/9699919799/">https://pubs.opengroup.org/onlinepubs/9699919799/</a>.
</p>
</dd>
<dt>Precedence</dt>
<dd><p>The order in which operations are performed when operators are used
without explicit parentheses.
</p>
</dd>
<dt>Private</dt>
<dd><p>Variables and/or functions that are meant for use exclusively by library
functions and not for the main <code class="command">awk</code> program. Special care must be
taken when naming such variables and functions.
(See <a class="xref" href="#Library-Names">Naming Library Function Global Variables</a>.)
</p>
</dd>
<dt>Range (of input lines)</dt>
<dd><p>A sequence of consecutive lines from the input file(s).  A pattern
can specify ranges of input lines for <code class="command">awk</code> to process or it can
specify single lines. (See <a class="xref" href="#Pattern-Overview">Pattern Elements</a>.)
</p>
</dd>
<dt>Record</dt>
<dd><p>See &ldquo;Input record&rdquo; and &ldquo;Output record.&rdquo;
</p>
</dd>
<dt>Recursion</dt>
<dd><p>When a function calls itself, either directly or indirectly.
If this is clear, stop, and proceed to the next entry.
Otherwise, refer to the entry for &ldquo;recursion.&rdquo;
</p>
</dd>
<dt>Redirection</dt>
<dd><p>Redirection means performing input from something other than the standard input
stream, or performing output to something other than the standard output stream.
</p>
<p>You can redirect input to the <code class="code">getline</code> statement using
the &lsquo;<samp class="samp">&lt;</samp>&rsquo;, &lsquo;<samp class="samp">|</samp>&rsquo;, and &lsquo;<samp class="samp">|&amp;</samp>&rsquo; operators.
You can redirect the output of the <code class="code">print</code> and <code class="code">printf</code> statements
to a file or a system command, using the &lsquo;<samp class="samp">&gt;</samp>&rsquo;, &lsquo;<samp class="samp">&gt;&gt;</samp>&rsquo;, &lsquo;<samp class="samp">|</samp>&rsquo;, and &lsquo;<samp class="samp">|&amp;</samp>&rsquo;
operators.
(See <a class="xref" href="#Getline">Explicit Input with <code class="code">getline</code></a>,
and <a class="ref" href="#Redirection">Redirecting Output of <code class="code">print</code> and <code class="code">printf</code></a>.)
</p>
</dd>
<dt>Reference Counts</dt>
<dd><p>An internal mechanism in <code class="command">gawk</code> to minimize the amount of memory
needed to store the value of string variables. If the value assumed by
a variable is used in more than one place, only one copy of the value
itself is kept, and the associated reference count is increased when the
same value is used by an additional variable, and decreased when the related
variable is no longer in use. When the reference count goes to zero,
the memory space used to store the value of the variable is freed.
</p>
</dd>
<dt>Regexp</dt>
<dd><p>See &ldquo;Regular Expression.&rdquo;
</p>
</dd>
<dt>Regular Expression</dt>
<dd><p>A regular expression (&ldquo;regexp&rdquo; for short) is a pattern that denotes a
set of strings, possibly an infinite set.  For example, the regular expression
&lsquo;<samp class="samp">R.*xp</samp>&rsquo; matches any string starting with the letter &lsquo;<samp class="samp">R</samp>&rsquo;
and ending with the letters &lsquo;<samp class="samp">xp</samp>&rsquo;.  In <code class="command">awk</code>, regular expressions are
used in patterns and in conditional expressions.  Regular expressions may contain
escape sequences. (See <a class="xref" href="#Regexp">Regular Expressions</a>.)
</p>
</dd>
<dt>Regular Expression Constant</dt>
<dd><p>A regular expression constant is a regular expression written within
slashes, such as <code class="code">/foo/</code>.  This regular expression is chosen
when you write the <code class="command">awk</code> program and cannot be changed during
its execution. (See <a class="xref" href="#Regexp-Usage">How to Use Regular Expressions</a>.)
</p>
</dd>
<dt>Regular Expression Operators</dt>
<dd><p>See &ldquo;Metacharacters.&rdquo;
</p>
</dd>
<dt>Rounding</dt>
<dd><p>Rounding the result of an arithmetic operation can be tricky.
More than one way of rounding exists, and in <code class="command">gawk</code>
it is possible to choose which method should be used in a program.
See <a class="xref" href="#Setting-the-rounding-mode">Setting the Rounding Mode</a>.
</p>
</dd>
<dt>Rule</dt>
<dd><p>A segment of an <code class="command">awk</code> program that specifies how to process single
input records.  A rule consists of a <em class="dfn">pattern</em> and an <em class="dfn">action</em>.
<code class="command">awk</code> reads an input record; then, for each rule, if the input record
satisfies the rule&rsquo;s pattern, <code class="command">awk</code> executes the rule&rsquo;s action.
Otherwise, the rule does nothing for that input record.
</p>
</dd>
<dt>Rvalue</dt>
<dd><p>A value that can appear on the right side of an assignment operator.
In <code class="command">awk</code>, essentially every expression has a value. These values
are rvalues.
</p>
</dd>
<dt>Scalar</dt>
<dd><p>A single value, be it a number or a string.
Regular variables are scalars; arrays and functions are not.
</p>
</dd>
<dt>Search Path</dt>
<dd><p>In <code class="command">gawk</code>, a list of directories to search for <code class="command">awk</code> program source files.
In the shell, a list of directories to search for executable programs.
</p>
</dd>
<dt><code class="command">sed</code></dt>
<dd><p>See &ldquo;Stream Editor.&rdquo;
</p>
</dd>
<dt>Seed</dt>
<dd><p>The initial value, or starting point, for a sequence of random numbers.
</p>
</dd>
<dt>Shell</dt>
<dd><p>The command interpreter for Unix and POSIX-compliant systems.
The shell works both interactively, and as a programming language
for batch files, or shell scripts.
</p>
</dd>
<dt>Short-Circuit</dt>
<dd><p>The nature of the <code class="command">awk</code> logical operators &lsquo;<samp class="samp">&amp;&amp;</samp>&rsquo; and &lsquo;<samp class="samp">||</samp>&rsquo;.
If the value of the entire expression is determinable from evaluating just
the lefthand side of these operators, the righthand side is not
evaluated.
(See <a class="xref" href="#Boolean-Ops">Boolean Expressions</a>.)
</p>
</dd>
<dt>Side Effect</dt>
<dd><p>A side effect occurs when an expression has an effect aside from merely
producing a value.  Assignment expressions, increment and decrement
expressions, and function calls have side effects.
(See <a class="xref" href="#Assignment-Ops">Assignment Expressions</a>.)
</p>
</dd>
<dt>Single Precision</dt>
<dd><p>An internal representation of numbers that can have fractional parts.
Single precision numbers keep track of fewer digits than do double precision
numbers, but operations on them are sometimes less expensive in terms of CPU time.
This is the type used by some ancient versions of <code class="command">awk</code> to store
numeric values.  It is the C type <code class="code">float</code>.
</p>
</dd>
<dt>Space</dt>
<dd><p>The character generated by hitting the space bar on the keyboard.
</p>
</dd>
<dt>Special File</dt>
<dd><p>A file name interpreted internally by <code class="command">gawk</code>, instead of being handed
directly to the underlying operating system&mdash;for example, <samp class="file">/dev/stderr</samp>.
(See <a class="xref" href="#Special-Files">Special File names in <code class="command">gawk</code></a>.)
</p>
</dd>
<dt>Statement</dt>
<dd><p>An expression inside an <code class="command">awk</code> program in the action part
of a pattern&ndash;action rule, or inside an
<code class="command">awk</code> function. A statement can be a variable assignment,
an array operation, a loop, etc.
</p>
</dd>
<dt>Stream Editor</dt>
<dd><p>A program that reads records from an input stream and processes them one
or more at a time.  This is in contrast with batch programs, which may
expect to read their input files in entirety before starting to do
anything, as well as with interactive programs which require input from the
user.
</p>
</dd>
<dt>String</dt>
<dd><p>A datum consisting of a sequence of characters, such as &lsquo;<samp class="samp">I am a
string</samp>&rsquo;.  Constant strings are written with double quotes in the
<code class="command">awk</code> language and may contain escape sequences.
(See <a class="xref" href="#Escape-Sequences">Escape Sequences</a>.)
</p>
</dd>
<dt>Tab</dt>
<dd><p>The character generated by hitting the <kbd class="kbd">TAB</kbd> key on the keyboard.
It usually expands to up to eight spaces upon output.
</p>
</dd>
<dt>Text Domain</dt>
<dd><p>A unique name that identifies an application.
Used for grouping messages that are translated at runtime
into the local language.
</p>
</dd>
<dt>Timestamp</dt>
<dd><p>A value in the &ldquo;seconds since the epoch&rdquo; format used by Unix
and POSIX systems.  Used for the <code class="command">gawk</code> functions
<code class="code">mktime()</code>, <code class="code">strftime()</code>, and <code class="code">systime()</code>.
See also &ldquo;Epoch,&rdquo; &ldquo;GMT,&rdquo; and &ldquo;UTC.&rdquo;
</p>
</dd>
<dt><a class="index-entry-id" id="index-Unix"></a>
<a class="index-entry-id" id="index-BSD_002dbased-operating-systems"></a>
<a class="index-entry-id" id="index-NetBSD"></a>
<a class="index-entry-id" id="index-FreeBSD"></a>
<a class="index-entry-id" id="index-OpenBSD"></a>
<a id="index-GNU_002fLinux-2"></a><span>Unix<a class="copiable-link" href="#index-GNU_002fLinux-2"> &para;</a></span></dt>
<dd><p>A computer operating system originally developed in the early 1970&rsquo;s at
AT&amp;T Bell Laboratories.  It initially became popular in universities around
the world and later moved into commercial environments as a software
development system and network server system. There are many commercial
versions of Unix, as well as several work-alike systems whose source code
is freely available (such as GNU/Linux, <a class="uref" href="http://www.netbsd.org">NetBSD</a>,
<a class="uref" href="https://www.freebsd.org">FreeBSD</a>, and <a class="uref" href="http://www.openbsd.org">OpenBSD</a>).
</p>
</dd>
<dt>UTC</dt>
<dd><p>The accepted abbreviation for &ldquo;Universal Coordinated Time.&rdquo;
This is standard time in Greenwich, England, which is used as a
reference time for day and date calculations.
See also &ldquo;Epoch&rdquo; and &ldquo;GMT.&rdquo;
</p>
</dd>
<dt>Variable</dt>
<dd><p>A name for a value. In <code class="command">awk</code>, variables may be either scalars
or arrays.
</p>
</dd>
<dt>Whitespace</dt>
<dd><p>A sequence of space, TAB, or newline characters occurring inside an input
record or a string.
</p>
</dd>
</dl>


<hr>
</div>
<div class="unnumbered-level-extent" id="Copying">
<div class="nav-panel">
<p>
Next: <a href="#GNU-Free-Documentation-License" accesskey="n" rel="next">GNU Free Documentation License</a>, Previous: <a href="#Glossary" accesskey="p" rel="prev">Glossary</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="unnumbered" id="GNU-General-Public-License"><span>GNU General Public License<a class="copiable-link" href="#GNU-General-Public-License"> &para;</a></span></h2>
<div class="center">Version 3, 29 June 2007
</div>

<div class="display">
<pre class="display-preformatted">Copyright &copy; 2007 Free Software Foundation, Inc. <a class="url" href="https://fsf.org/">https://fsf.org/</a>

Everyone is permitted to copy and distribute verbatim copies of this
license document, but changing it is not allowed.
</pre></div>

<h3 class="heading" id="Preamble"><span>Preamble<a class="copiable-link" href="#Preamble"> &para;</a></span></h3>

<p>The GNU General Public License is a free, copyleft license for
software and other kinds of works.
</p>
<p>The licenses for most software and other practical works are designed
to take away your freedom to share and change the works.  By contrast,
the GNU General Public License is intended to guarantee your freedom
to share and change all versions of a program&mdash;to make sure it remains
free software for all its users.  We, the Free Software Foundation,
use the GNU General Public License for most of our software; it
applies also to any other work released this way by its authors.  You
can apply it to your programs, too.
</p>
<p>When we speak of free software, we are referring to freedom, not
price.  Our General Public Licenses are designed to make sure that you
have the freedom to distribute copies of free software (and charge for
them if you wish), that you receive source code or can get it if you
want it, that you can change the software or use pieces of it in new
free programs, and that you know you can do these things.
</p>
<p>To protect your rights, we need to prevent others from denying you
these rights or asking you to surrender the rights.  Therefore, you
have certain responsibilities if you distribute copies of the
software, or if you modify it: responsibilities to respect the freedom
of others.
</p>
<p>For example, if you distribute copies of such a program, whether
gratis or for a fee, you must pass on to the recipients the same
freedoms that you received.  You must make sure that they, too,
receive or can get the source code.  And you must show them these
terms so they know their rights.
</p>
<p>Developers that use the GNU GPL protect your rights with two steps:
(1) assert copyright on the software, and (2) offer you this License
giving you legal permission to copy, distribute and/or modify it.
</p>
<p>For the developers&rsquo; and authors&rsquo; protection, the GPL clearly explains
that there is no warranty for this free software.  For both users&rsquo; and
authors&rsquo; sake, the GPL requires that modified versions be marked as
changed, so that their problems will not be attributed erroneously to
authors of previous versions.
</p>
<p>Some devices are designed to deny users access to install or run
modified versions of the software inside them, although the
manufacturer can do so.  This is fundamentally incompatible with the
aim of protecting users&rsquo; freedom to change the software.  The
systematic pattern of such abuse occurs in the area of products for
individuals to use, which is precisely where it is most unacceptable.
Therefore, we have designed this version of the GPL to prohibit the
practice for those products.  If such problems arise substantially in
other domains, we stand ready to extend this provision to those
domains in future versions of the GPL, as needed to protect the
freedom of users.
</p>
<p>Finally, every program is threatened constantly by software patents.
States should not allow patents to restrict development and use of
software on general-purpose computers, but in those that do, we wish
to avoid the special danger that patents applied to a free program
could make it effectively proprietary.  To prevent this, the GPL
assures that patents cannot be used to render the program non-free.
</p>
<p>The precise terms and conditions for copying, distribution and
modification follow.
</p>
<h3 class="heading" id="TERMS-AND-CONDITIONS"><span>TERMS AND CONDITIONS<a class="copiable-link" href="#TERMS-AND-CONDITIONS"> &para;</a></span></h3>

<ol class="enumerate" start="0">
<li> Definitions.

<p>&ldquo;This License&rdquo; refers to version 3 of the GNU General Public License.
</p>
<p>&ldquo;Copyright&rdquo; also means copyright-like laws that apply to other kinds
of works, such as semiconductor masks.
</p>
<p>&ldquo;The Program&rdquo; refers to any copyrightable work licensed under this
License.  Each licensee is addressed as &ldquo;you&rdquo;.  &ldquo;Licensees&rdquo; and
&ldquo;recipients&rdquo; may be individuals or organizations.
</p>
<p>To &ldquo;modify&rdquo; a work means to copy from or adapt all or part of the work
in a fashion requiring copyright permission, other than the making of
an exact copy.  The resulting work is called a &ldquo;modified version&rdquo; of
the earlier work or a work &ldquo;based on&rdquo; the earlier work.
</p>
<p>A &ldquo;covered work&rdquo; means either the unmodified Program or a work based
on the Program.
</p>
<p>To &ldquo;propagate&rdquo; a work means to do anything with it that, without
permission, would make you directly or secondarily liable for
infringement under applicable copyright law, except executing it on a
computer or modifying a private copy.  Propagation includes copying,
distribution (with or without modification), making available to the
public, and in some countries other activities as well.
</p>
<p>To &ldquo;convey&rdquo; a work means any kind of propagation that enables other
parties to make or receive copies.  Mere interaction with a user
through a computer network, with no transfer of a copy, is not
conveying.
</p>
<p>An interactive user interface displays &ldquo;Appropriate Legal Notices&rdquo; to
the extent that it includes a convenient and prominently visible
feature that (1) displays an appropriate copyright notice, and (2)
tells the user that there is no warranty for the work (except to the
extent that warranties are provided), that licensees may convey the
work under this License, and how to view a copy of this License.  If
the interface presents a list of user commands or options, such as a
menu, a prominent item in the list meets this criterion.
</p>
</li><li> Source Code.

<p>The &ldquo;source code&rdquo; for a work means the preferred form of the work for
making modifications to it.  &ldquo;Object code&rdquo; means any non-source form
of a work.
</p>
<p>A &ldquo;Standard Interface&rdquo; means an interface that either is an official
standard defined by a recognized standards body, or, in the case of
interfaces specified for a particular programming language, one that
is widely used among developers working in that language.
</p>
<p>The &ldquo;System Libraries&rdquo; of an executable work include anything, other
than the work as a whole, that (a) is included in the normal form of
packaging a Major Component, but which is not part of that Major
Component, and (b) serves only to enable use of the work with that
Major Component, or to implement a Standard Interface for which an
implementation is available to the public in source code form.  A
&ldquo;Major Component&rdquo;, in this context, means a major essential component
(kernel, window system, and so on) of the specific operating system
(if any) on which the executable work runs, or a compiler used to
produce the work, or an object code interpreter used to run it.
</p>
<p>The &ldquo;Corresponding Source&rdquo; for a work in object code form means all
the source code needed to generate, install, and (for an executable
work) run the object code and to modify the work, including scripts to
control those activities.  However, it does not include the work&rsquo;s
System Libraries, or general-purpose tools or generally available free
programs which are used unmodified in performing those activities but
which are not part of the work.  For example, Corresponding Source
includes interface definition files associated with source files for
the work, and the source code for shared libraries and dynamically
linked subprograms that the work is specifically designed to require,
such as by intimate data communication or control flow between those
subprograms and other parts of the work.
</p>
<p>The Corresponding Source need not include anything that users can
regenerate automatically from other parts of the Corresponding Source.
</p>
<p>The Corresponding Source for a work in source code form is that same
work.
</p>
</li><li> Basic Permissions.

<p>All rights granted under this License are granted for the term of
copyright on the Program, and are irrevocable provided the stated
conditions are met.  This License explicitly affirms your unlimited
permission to run the unmodified Program.  The output from running a
covered work is covered by this License only if the output, given its
content, constitutes a covered work.  This License acknowledges your
rights of fair use or other equivalent, as provided by copyright law.
</p>
<p>You may make, run and propagate covered works that you do not convey,
without conditions so long as your license otherwise remains in force.
You may convey covered works to others for the sole purpose of having
them make modifications exclusively for you, or provide you with
facilities for running those works, provided that you comply with the
terms of this License in conveying all material for which you do not
control copyright.  Those thus making or running the covered works for
you must do so exclusively on your behalf, under your direction and
control, on terms that prohibit them from making any copies of your
copyrighted material outside their relationship with you.
</p>
<p>Conveying under any other circumstances is permitted solely under the
conditions stated below.  Sublicensing is not allowed; section 10
makes it unnecessary.
</p>
</li><li> Protecting Users&rsquo; Legal Rights From Anti-Circumvention Law.

<p>No covered work shall be deemed part of an effective technological
measure under any applicable law fulfilling obligations under article
11 of the WIPO copyright treaty adopted on 20 December 1996, or
similar laws prohibiting or restricting circumvention of such
measures.
</p>
<p>When you convey a covered work, you waive any legal power to forbid
circumvention of technological measures to the extent such
circumvention is effected by exercising rights under this License with
respect to the covered work, and you disclaim any intention to limit
operation or modification of the work as a means of enforcing, against
the work&rsquo;s users, your or third parties&rsquo; legal rights to forbid
circumvention of technological measures.
</p>
</li><li> Conveying Verbatim Copies.

<p>You may convey verbatim copies of the Program&rsquo;s source code as you
receive it, in any medium, provided that you conspicuously and
appropriately publish on each copy an appropriate copyright notice;
keep intact all notices stating that this License and any
non-permissive terms added in accord with section 7 apply to the code;
keep intact all notices of the absence of any warranty; and give all
recipients a copy of this License along with the Program.
</p>
<p>You may charge any price or no price for each copy that you convey,
and you may offer support or warranty protection for a fee.
</p>
</li><li> Conveying Modified Source Versions.

<p>You may convey a work based on the Program, or the modifications to
produce it from the Program, in the form of source code under the
terms of section 4, provided that you also meet all of these
conditions:
</p>
<ol class="enumerate" type="a" start="1">
<li> The work must carry prominent notices stating that you modified it,
and giving a relevant date.

</li><li> The work must carry prominent notices stating that it is released
under this License and any conditions added under section 7.  This
requirement modifies the requirement in section 4 to &ldquo;keep intact all
notices&rdquo;.

</li><li> You must license the entire work, as a whole, under this License to
anyone who comes into possession of a copy.  This License will
therefore apply, along with any applicable section 7 additional terms,
to the whole of the work, and all its parts, regardless of how they
are packaged.  This License gives no permission to license the work in
any other way, but it does not invalidate such permission if you have
separately received it.

</li><li> If the work has interactive user interfaces, each must display
Appropriate Legal Notices; however, if the Program has interactive
interfaces that do not display Appropriate Legal Notices, your work
need not make them do so.
</li></ol>

<p>A compilation of a covered work with other separate and independent
works, which are not by their nature extensions of the covered work,
and which are not combined with it such as to form a larger program,
in or on a volume of a storage or distribution medium, is called an
&ldquo;aggregate&rdquo; if the compilation and its resulting copyright are not
used to limit the access or legal rights of the compilation&rsquo;s users
beyond what the individual works permit.  Inclusion of a covered work
in an aggregate does not cause this License to apply to the other
parts of the aggregate.
</p>
</li><li> Conveying Non-Source Forms.

<p>You may convey a covered work in object code form under the terms of
sections 4 and 5, provided that you also convey the machine-readable
Corresponding Source under the terms of this License, in one of these
ways:
</p>
<ol class="enumerate" type="a" start="1">
<li> Convey the object code in, or embodied in, a physical product
(including a physical distribution medium), accompanied by the
Corresponding Source fixed on a durable physical medium customarily
used for software interchange.

</li><li> Convey the object code in, or embodied in, a physical product
(including a physical distribution medium), accompanied by a written
offer, valid for at least three years and valid for as long as you
offer spare parts or customer support for that product model, to give
anyone who possesses the object code either (1) a copy of the
Corresponding Source for all the software in the product that is
covered by this License, on a durable physical medium customarily used
for software interchange, for a price no more than your reasonable
cost of physically performing this conveying of source, or (2) access
to copy the Corresponding Source from a network server at no charge.

</li><li> Convey individual copies of the object code with a copy of the written
offer to provide the Corresponding Source.  This alternative is
allowed only occasionally and noncommercially, and only if you
received the object code with such an offer, in accord with subsection
6b.

</li><li> Convey the object code by offering access from a designated place
(gratis or for a charge), and offer equivalent access to the
Corresponding Source in the same way through the same place at no
further charge.  You need not require recipients to copy the
Corresponding Source along with the object code.  If the place to copy
the object code is a network server, the Corresponding Source may be
on a different server (operated by you or a third party) that supports
equivalent copying facilities, provided you maintain clear directions
next to the object code saying where to find the Corresponding Source.
Regardless of what server hosts the Corresponding Source, you remain
obligated to ensure that it is available for as long as needed to
satisfy these requirements.

</li><li> Convey the object code using peer-to-peer transmission, provided you
inform other peers where the object code and Corresponding Source of
the work are being offered to the general public at no charge under
subsection 6d.

</li></ol>

<p>A separable portion of the object code, whose source code is excluded
from the Corresponding Source as a System Library, need not be
included in conveying the object code work.
</p>
<p>A &ldquo;User Product&rdquo; is either (1) a &ldquo;consumer product&rdquo;, which means any
tangible personal property which is normally used for personal,
family, or household purposes, or (2) anything designed or sold for
incorporation into a dwelling.  In determining whether a product is a
consumer product, doubtful cases shall be resolved in favor of
coverage.  For a particular product received by a particular user,
&ldquo;normally used&rdquo; refers to a typical or common use of that class of
product, regardless of the status of the particular user or of the way
in which the particular user actually uses, or expects or is expected
to use, the product.  A product is a consumer product regardless of
whether the product has substantial commercial, industrial or
non-consumer uses, unless such uses represent the only significant
mode of use of the product.
</p>
<p>&ldquo;Installation Information&rdquo; for a User Product means any methods,
procedures, authorization keys, or other information required to
install and execute modified versions of a covered work in that User
Product from a modified version of its Corresponding Source.  The
information must suffice to ensure that the continued functioning of
the modified object code is in no case prevented or interfered with
solely because modification has been made.
</p>
<p>If you convey an object code work under this section in, or with, or
specifically for use in, a User Product, and the conveying occurs as
part of a transaction in which the right of possession and use of the
User Product is transferred to the recipient in perpetuity or for a
fixed term (regardless of how the transaction is characterized), the
Corresponding Source conveyed under this section must be accompanied
by the Installation Information.  But this requirement does not apply
if neither you nor any third party retains the ability to install
modified object code on the User Product (for example, the work has
been installed in ROM).
</p>
<p>The requirement to provide Installation Information does not include a
requirement to continue to provide support service, warranty, or
updates for a work that has been modified or installed by the
recipient, or for the User Product in which it has been modified or
installed.  Access to a network may be denied when the modification
itself materially and adversely affects the operation of the network
or violates the rules and protocols for communication across the
network.
</p>
<p>Corresponding Source conveyed, and Installation Information provided,
in accord with this section must be in a format that is publicly
documented (and with an implementation available to the public in
source code form), and must require no special password or key for
unpacking, reading or copying.
</p>
</li><li> Additional Terms.

<p>&ldquo;Additional permissions&rdquo; are terms that supplement the terms of this
License by making exceptions from one or more of its conditions.
Additional permissions that are applicable to the entire Program shall
be treated as though they were included in this License, to the extent
that they are valid under applicable law.  If additional permissions
apply only to part of the Program, that part may be used separately
under those permissions, but the entire Program remains governed by
this License without regard to the additional permissions.
</p>
<p>When you convey a copy of a covered work, you may at your option
remove any additional permissions from that copy, or from any part of
it.  (Additional permissions may be written to require their own
removal in certain cases when you modify the work.)  You may place
additional permissions on material, added by you to a covered work,
for which you have or can give appropriate copyright permission.
</p>
<p>Notwithstanding any other provision of this License, for material you
add to a covered work, you may (if authorized by the copyright holders
of that material) supplement the terms of this License with terms:
</p>
<ol class="enumerate" type="a" start="1">
<li> Disclaiming warranty or limiting liability differently from the terms
of sections 15 and 16 of this License; or

</li><li> Requiring preservation of specified reasonable legal notices or author
attributions in that material or in the Appropriate Legal Notices
displayed by works containing it; or

</li><li> Prohibiting misrepresentation of the origin of that material, or
requiring that modified versions of such material be marked in
reasonable ways as different from the original version; or

</li><li> Limiting the use for publicity purposes of names of licensors or
authors of the material; or

</li><li> Declining to grant rights under trademark law for use of some trade
names, trademarks, or service marks; or

</li><li> Requiring indemnification of licensors and authors of that material by
anyone who conveys the material (or modified versions of it) with
contractual assumptions of liability to the recipient, for any
liability that these contractual assumptions directly impose on those
licensors and authors.
</li></ol>

<p>All other non-permissive additional terms are considered &ldquo;further
restrictions&rdquo; within the meaning of section 10.  If the Program as you
received it, or any part of it, contains a notice stating that it is
governed by this License along with a term that is a further
restriction, you may remove that term.  If a license document contains
a further restriction but permits relicensing or conveying under this
License, you may add to a covered work material governed by the terms
of that license document, provided that the further restriction does
not survive such relicensing or conveying.
</p>
<p>If you add terms to a covered work in accord with this section, you
must place, in the relevant source files, a statement of the
additional terms that apply to those files, or a notice indicating
where to find the applicable terms.
</p>
<p>Additional terms, permissive or non-permissive, may be stated in the
form of a separately written license, or stated as exceptions; the
above requirements apply either way.
</p>
</li><li> Termination.

<p>You may not propagate or modify a covered work except as expressly
provided under this License.  Any attempt otherwise to propagate or
modify it is void, and will automatically terminate your rights under
this License (including any patent licenses granted under the third
paragraph of section 11).
</p>
<p>However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.
</p>
<p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.
</p>
<p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, you do not qualify to receive new licenses for the same
material under section 10.
</p>
</li><li> Acceptance Not Required for Having Copies.

<p>You are not required to accept this License in order to receive or run
a copy of the Program.  Ancillary propagation of a covered work
occurring solely as a consequence of using peer-to-peer transmission
to receive a copy likewise does not require acceptance.  However,
nothing other than this License grants you permission to propagate or
modify any covered work.  These actions infringe copyright if you do
not accept this License.  Therefore, by modifying or propagating a
covered work, you indicate your acceptance of this License to do so.
</p>
</li><li> Automatic Licensing of Downstream Recipients.

<p>Each time you convey a covered work, the recipient automatically
receives a license from the original licensors, to run, modify and
propagate that work, subject to this License.  You are not responsible
for enforcing compliance by third parties with this License.
</p>
<p>An &ldquo;entity transaction&rdquo; is a transaction transferring control of an
organization, or substantially all assets of one, or subdividing an
organization, or merging organizations.  If propagation of a covered
work results from an entity transaction, each party to that
transaction who receives a copy of the work also receives whatever
licenses to the work the party&rsquo;s predecessor in interest had or could
give under the previous paragraph, plus a right to possession of the
Corresponding Source of the work from the predecessor in interest, if
the predecessor has it or can get it with reasonable efforts.
</p>
<p>You may not impose any further restrictions on the exercise of the
rights granted or affirmed under this License.  For example, you may
not impose a license fee, royalty, or other charge for exercise of
rights granted under this License, and you may not initiate litigation
(including a cross-claim or counterclaim in a lawsuit) alleging that
any patent claim is infringed by making, using, selling, offering for
sale, or importing the Program or any portion of it.
</p>
</li><li> Patents.

<p>A &ldquo;contributor&rdquo; is a copyright holder who authorizes use under this
License of the Program or a work on which the Program is based.  The
work thus licensed is called the contributor&rsquo;s &ldquo;contributor version&rdquo;.
</p>
<p>A contributor&rsquo;s &ldquo;essential patent claims&rdquo; are all patent claims owned
or controlled by the contributor, whether already acquired or
hereafter acquired, that would be infringed by some manner, permitted
by this License, of making, using, or selling its contributor version,
but do not include claims that would be infringed only as a
consequence of further modification of the contributor version.  For
purposes of this definition, &ldquo;control&rdquo; includes the right to grant
patent sublicenses in a manner consistent with the requirements of
this License.
</p>
<p>Each contributor grants you a non-exclusive, worldwide, royalty-free
patent license under the contributor&rsquo;s essential patent claims, to
make, use, sell, offer for sale, import and otherwise run, modify and
propagate the contents of its contributor version.
</p>
<p>In the following three paragraphs, a &ldquo;patent license&rdquo; is any express
agreement or commitment, however denominated, not to enforce a patent
(such as an express permission to practice a patent or covenant not to
sue for patent infringement).  To &ldquo;grant&rdquo; such a patent license to a
party means to make such an agreement or commitment not to enforce a
patent against the party.
</p>
<p>If you convey a covered work, knowingly relying on a patent license,
and the Corresponding Source of the work is not available for anyone
to copy, free of charge and under the terms of this License, through a
publicly available network server or other readily accessible means,
then you must either (1) cause the Corresponding Source to be so
available, or (2) arrange to deprive yourself of the benefit of the
patent license for this particular work, or (3) arrange, in a manner
consistent with the requirements of this License, to extend the patent
license to downstream recipients.  &ldquo;Knowingly relying&rdquo; means you have
actual knowledge that, but for the patent license, your conveying the
covered work in a country, or your recipient&rsquo;s use of the covered work
in a country, would infringe one or more identifiable patents in that
country that you have reason to believe are valid.
</p>
<p>If, pursuant to or in connection with a single transaction or
arrangement, you convey, or propagate by procuring conveyance of, a
covered work, and grant a patent license to some of the parties
receiving the covered work authorizing them to use, propagate, modify
or convey a specific copy of the covered work, then the patent license
you grant is automatically extended to all recipients of the covered
work and works based on it.
</p>
<p>A patent license is &ldquo;discriminatory&rdquo; if it does not include within the
scope of its coverage, prohibits the exercise of, or is conditioned on
the non-exercise of one or more of the rights that are specifically
granted under this License.  You may not convey a covered work if you
are a party to an arrangement with a third party that is in the
business of distributing software, under which you make payment to the
third party based on the extent of your activity of conveying the
work, and under which the third party grants, to any of the parties
who would receive the covered work from you, a discriminatory patent
license (a) in connection with copies of the covered work conveyed by
you (or copies made from those copies), or (b) primarily for and in
connection with specific products or compilations that contain the
covered work, unless you entered into that arrangement, or that patent
license was granted, prior to 28 March 2007.
</p>
<p>Nothing in this License shall be construed as excluding or limiting
any implied license or other defenses to infringement that may
otherwise be available to you under applicable patent law.
</p>
</li><li> No Surrender of Others&rsquo; Freedom.

<p>If conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot convey
a covered work so as to satisfy simultaneously your obligations under
this License and any other pertinent obligations, then as a
consequence you may not convey it at all.  For example, if you agree
to terms that obligate you to collect a royalty for further conveying
from those to whom you convey the Program, the only way you could
satisfy both those terms and this License would be to refrain entirely
from conveying the Program.
</p>
</li><li> Use with the GNU Affero General Public License.

<p>Notwithstanding any other provision of this License, you have
permission to link or combine any covered work with a work licensed
under version 3 of the GNU Affero General Public License into a single
combined work, and to convey the resulting work.  The terms of this
License will continue to apply to the part which is the covered work,
but the special requirements of the GNU Affero General Public License,
section 13, concerning interaction through a network will apply to the
combination as such.
</p>
</li><li> Revised Versions of this License.

<p>The Free Software Foundation may publish revised and/or new versions
of the GNU General Public License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.
</p>
<p>Each version is given a distinguishing version number.  If the Program
specifies that a certain numbered version of the GNU General Public
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that numbered version or
of any later version published by the Free Software Foundation.  If
the Program does not specify a version number of the GNU General
Public License, you may choose any version ever published by the Free
Software Foundation.
</p>
<p>If the Program specifies that a proxy can decide which future versions
of the GNU General Public License can be used, that proxy&rsquo;s public
statement of acceptance of a version permanently authorizes you to
choose that version for the Program.
</p>
<p>Later license versions may give you additional or different
permissions.  However, no additional obligations are imposed on any
author or copyright holder as a result of your choosing to follow a
later version.
</p>
</li><li> Disclaimer of Warranty.

<p>THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY
APPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT
HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM &ldquo;AS IS&rdquo; WITHOUT
WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND
PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE PROGRAM PROVE
DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR
CORRECTION.
</p>
</li><li> Limitation of Liability.

<p>IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR
CONVEYS THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES
ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT
NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR
LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM
TO OPERATE WITH ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER
PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.
</p>
</li><li> Interpretation of Sections 15 and 16.

<p>If the disclaimer of warranty and limitation of liability provided
above cannot be given local legal effect according to their terms,
reviewing courts shall apply local law that most closely approximates
an absolute waiver of all civil liability in connection with the
Program, unless a warranty or assumption of liability accompanies a
copy of the Program in return for a fee.
</p>
</li></ol>

<h3 class="heading" id="END-OF-TERMS-AND-CONDITIONS"><span>END OF TERMS AND CONDITIONS<a class="copiable-link" href="#END-OF-TERMS-AND-CONDITIONS"> &para;</a></span></h3>

<h3 class="heading" id="How-to-Apply-These-Terms-to-Your-New-Programs"><span>How to Apply These Terms to Your New Programs<a class="copiable-link" href="#How-to-Apply-These-Terms-to-Your-New-Programs"> &para;</a></span></h3>

<p>If you develop a new program, and you want it to be of the greatest
possible use to the public, the best way to achieve this is to make it
free software which everyone can redistribute and change under these
terms.
</p>
<p>To do so, attach the following notices to the program.  It is safest
to attach them to the start of each source file to most effectively
state the exclusion of warranty; and each file should have at least
the &ldquo;copyright&rdquo; line and a pointer to where the full notice is found.
</p>
<div class="example smallexample">
<pre class="example-preformatted"><var class="var">one line to give the program's name and a brief idea of what it does.</var>
Copyright (C) <var class="var">year</var> <var class="var">name of author</var>

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or (at
your option) any later version.

This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <a class="url" href="https://www.gnu.org/licenses/">https://www.gnu.org/licenses/</a>.
</pre></div>

<p>Also add information on how to contact you by electronic and paper mail.
</p>
<p>If the program does terminal interaction, make it output a short
notice like this when it starts in an interactive mode:
</p>
<div class="example smallexample">
<pre class="example-preformatted"><var class="var">program</var> Copyright (C) <var class="var">year</var> <var class="var">name of author</var>
This program comes with ABSOLUTELY NO WARRANTY; for details type &lsquo;<samp class="samp">show w</samp>&rsquo;.
This is free software, and you are welcome to redistribute it
under certain conditions; type &lsquo;<samp class="samp">show c</samp>&rsquo; for details.
</pre></div>

<p>The hypothetical commands &lsquo;<samp class="samp">show w</samp>&rsquo; and &lsquo;<samp class="samp">show c</samp>&rsquo; should show
the appropriate parts of the General Public License.  Of course, your
program&rsquo;s commands might be different; for a GUI interface, you would
use an &ldquo;about box&rdquo;.
</p>
<p>You should also get your employer (if you work as a programmer) or school,
if any, to sign a &ldquo;copyright disclaimer&rdquo; for the program, if necessary.
For more information on this, and how to apply and follow the GNU GPL, see
<a class="url" href="https://www.gnu.org/licenses/">https://www.gnu.org/licenses/</a>.
</p>
<p>The GNU General Public License does not permit incorporating your
program into proprietary programs.  If your program is a subroutine
library, you may consider it more useful to permit linking proprietary
applications with the library.  If this is what you want to do, use
the GNU Lesser General Public License instead of this License.  But
first, please read <a class="url" href="https://www.gnu.org/philosophy/why-not-lgpl.html">https://www.gnu.org/philosophy/why-not-lgpl.html</a>.
</p>
<hr>
</div>
<div class="unnumbered-level-extent" id="GNU-Free-Documentation-License">
<div class="nav-panel">
<p>
Next: <a href="#Index" accesskey="n" rel="next">Index</a>, Previous: <a href="#Copying" accesskey="p" rel="prev">GNU General Public License</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="unnumbered" id="GNU-Free-Documentation-License-1"><span>GNU Free Documentation License<a class="copiable-link" href="#GNU-Free-Documentation-License-1"> &para;</a></span></h2>
<div class="center">Version 1.3, 3 November 2008
</div>

<a class="index-entry-id" id="index-FDL-_0028Free-Documentation-License_0029"></a>
<a class="index-entry-id" id="index-Free-Documentation-License-_0028FDL_0029"></a>
<a class="index-entry-id" id="index-GNU-Free-Documentation-License"></a>


<div class="display">
<pre class="display-preformatted">Copyright &copy; 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
<a class="uref" href="https://fsf.org/">https://fsf.org/</a>

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></div>

<ol class="enumerate" start="0">
<li> PREAMBLE

<p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <em class="dfn">free</em> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.
</p>
<p>This License is a kind of &ldquo;copyleft&rdquo;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.
</p>
<p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.
</p>
</li><li> APPLICABILITY AND DEFINITIONS

<p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The &ldquo;Document&rdquo;, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as &ldquo;you&rdquo;.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.
</p>
<p>A &ldquo;Modified Version&rdquo; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.
</p>
<p>A &ldquo;Secondary Section&rdquo; is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document&rsquo;s overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.
</p>
<p>The &ldquo;Invariant Sections&rdquo; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.
</p>
<p>The &ldquo;Cover Texts&rdquo; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.
</p>
<p>A &ldquo;Transparent&rdquo; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not &ldquo;Transparent&rdquo; is called &ldquo;Opaque&rdquo;.
</p>
<p>Examples of suitable formats for Transparent copies include plain
<small class="sc">ASCII</small> without markup, Texinfo input format, LaTeX input
format, <abbr class="acronym">SGML</abbr> or <abbr class="acronym">XML</abbr> using a publicly available
<abbr class="acronym">DTD</abbr>, and standard-conforming simple <abbr class="acronym">HTML</abbr>,
PostScript or <abbr class="acronym">PDF</abbr> designed for human modification.  Examples
of transparent image formats include <abbr class="acronym">PNG</abbr>, <abbr class="acronym">XCF</abbr> and
<abbr class="acronym">JPG</abbr>.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, <abbr class="acronym">SGML</abbr> or
<abbr class="acronym">XML</abbr> for which the <abbr class="acronym">DTD</abbr> and/or processing tools are
not generally available, and the machine-generated <abbr class="acronym">HTML</abbr>,
PostScript or <abbr class="acronym">PDF</abbr> produced by some word processors for
output purposes only.
</p>
<p>The &ldquo;Title Page&rdquo; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &ldquo;Title Page&rdquo; means
the text near the most prominent appearance of the work&rsquo;s title,
preceding the beginning of the body of the text.
</p>
<p>The &ldquo;publisher&rdquo; means any person or entity that distributes copies
of the Document to the public.
</p>
<p>A section &ldquo;Entitled XYZ&rdquo; means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, &ldquo;Endorsements&rdquo;, or &ldquo;History&rdquo;.)  To &ldquo;Preserve the Title&rdquo;
of such a section when you modify the Document means that it remains a
section &ldquo;Entitled XYZ&rdquo; according to this definition.
</p>
<p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.
</p>
</li><li> VERBATIM COPYING

<p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.
</p>
<p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.
</p>
</li><li> COPYING IN QUANTITY

<p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document&rsquo;s license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.
</p>
<p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.
</p>
<p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.
</p>
<p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.
</p>
</li><li> MODIFICATIONS

<p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:
</p>
<ol class="enumerate" type="A" start="1">
<li> Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

</li><li> List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

</li><li> State on the Title page the name of the publisher of the
Modified Version, as the publisher.

</li><li> Preserve all the copyright notices of the Document.

</li><li> Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

</li><li> Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

</li><li> Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document&rsquo;s license notice.

</li><li> Include an unaltered copy of this License.

</li><li> Preserve the section Entitled &ldquo;History&rdquo;, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled &ldquo;History&rdquo; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

</li><li> Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &ldquo;History&rdquo; section.
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

</li><li> For any section Entitled &ldquo;Acknowledgements&rdquo; or &ldquo;Dedications&rdquo;, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

</li><li> Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

</li><li> Delete any section Entitled &ldquo;Endorsements&rdquo;.  Such a section
may not be included in the Modified Version.

</li><li> Do not retitle any existing section to be Entitled &ldquo;Endorsements&rdquo; or
to conflict in title with any Invariant Section.

</li><li> Preserve any Warranty Disclaimers.
</li></ol>

<p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version&rsquo;s license notice.
These titles must be distinct from any other section titles.
</p>
<p>You may add a section Entitled &ldquo;Endorsements&rdquo;, provided it contains
nothing but endorsements of your Modified Version by various
parties&mdash;for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.
</p>
<p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.
</p>
<p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.
</p>
</li><li> COMBINING DOCUMENTS

<p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.
</p>
<p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.
</p>
<p>In the combination, you must combine any sections Entitled &ldquo;History&rdquo;
in the various original documents, forming one section Entitled
&ldquo;History&rdquo;; likewise combine any sections Entitled &ldquo;Acknowledgements&rdquo;,
and any sections Entitled &ldquo;Dedications&rdquo;.  You must delete all
sections Entitled &ldquo;Endorsements.&rdquo;
</p>
</li><li> COLLECTIONS OF DOCUMENTS

<p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.
</p>
<p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.
</p>
</li><li> AGGREGATION WITH INDEPENDENT WORKS

<p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an &ldquo;aggregate&rdquo; if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation&rsquo;s users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.
</p>
<p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document&rsquo;s Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole
aggregate.
</p>
</li><li> TRANSLATION

<p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.
</p>
<p>If a section in the Document is Entitled &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, or &ldquo;History&rdquo;, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.
</p>
</li><li> TERMINATION

<p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void, and
will automatically terminate your rights under this License.
</p>
<p>However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.
</p>
<p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.
</p>
<p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.
</p>
</li><li> FUTURE REVISIONS OF THIS LICENSE

<p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a class="uref" href="https://www.gnu.org/copyleft/">https://www.gnu.org/copyleft/</a>.
</p>
<p>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.  If the Document
specifies that a proxy can decide which future versions of this
License can be used, that proxy&rsquo;s public statement of acceptance of a
version permanently authorizes you to choose that version for the
Document.
</p>
</li><li> RELICENSING

<p>&ldquo;Massive Multiauthor Collaboration Site&rdquo; (or &ldquo;MMC Site&rdquo;) means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.  A
&ldquo;Massive Multiauthor Collaboration&rdquo; (or &ldquo;MMC&rdquo;) contained in the
site means any set of copyrightable works thus published on the MMC
site.
</p>
<p>&ldquo;CC-BY-SA&rdquo; means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.
</p>
<p>&ldquo;Incorporate&rdquo; means to publish or republish a Document, in whole or
in part, as part of another Document.
</p>
<p>An MMC is &ldquo;eligible for relicensing&rdquo; if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole
or in part into the MMC, (1) had no cover texts or invariant sections,
and (2) were thus incorporated prior to November 1, 2008.
</p>
<p>The operator of an MMC Site may republish an MMC contained in the site
under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.
</p>
</li></ol>

<ul class="mini-toc">
<li><a href="#ADDENDUM_003a-How-to-use-this-License-for-your-documents" accesskey="1">ADDENDUM: How to use this License for your documents</a></li>
</ul>
<div class="unnumberedsec-level-extent" id="ADDENDUM_003a-How-to-use-this-License-for-your-documents">
<h3 class="unnumberedsec"><span>ADDENDUM: How to use this License for your documents<a class="copiable-link" href="#ADDENDUM_003a-How-to-use-this-License-for-your-documents"> &para;</a></span></h3>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">  Copyright (C)  <var class="var">year</var>  <var class="var">your name</var>.
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.3
  or any later version published by the Free Software Foundation;
  with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
  Texts.  A copy of the license is included in the section entitled ``GNU
  Free Documentation License''.
</pre></div></div>

<p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the &ldquo;with&hellip;Texts.&rdquo; line with this:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">    with the Invariant Sections being <var class="var">list their titles</var>, with
    the Front-Cover Texts being <var class="var">list</var>, and with the Back-Cover Texts
    being <var class="var">list</var>.
</pre></div></div>

<p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.
</p>
<p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.
</p>

<hr>
</div>
</div>
<div class="unnumbered-level-extent" id="Index">
<div class="nav-panel">
<p>
Previous: <a href="#GNU-Free-Documentation-License" accesskey="p" rel="prev">GNU Free Documentation License</a>, Up: <a href="#Top" accesskey="u" rel="up">General Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#Index" title="Index" rel="index">Index</a>]</p>
</div>
<h2 class="unnumbered" id="Index-1"><span>Index<a class="copiable-link" href="#Index-1"> &para;</a></span></h2>
<div class="printindex cp-printindex">
<table class="cp-letters-header-printindex"><tr><th>Jump to: &nbsp; </th><td><a class="summary-letter-printindex" href="#Index_cp_symbol-1"><b>_</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-2"><b>-</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-3"><b>,</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-4"><b>;</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-5"><b>:</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-6"><b>!</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-7"><b>?</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-8"><b>.</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-9"><b>'</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-10"><b>&quot;</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-11"><b>(</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-12"><b>[</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-13"><b>{</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-14"><b>@</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-15"><b>*</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-16"><b>/</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-17"><b>\</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-18"><b>&amp;</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-19"><b>#</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-20"><b>%</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-21"><b>^</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-22"><b>+</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-23"><b>&lt;</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-24"><b>=</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-25"><b>&gt;</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-26"><b>|</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-27"><b>~</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-28"><b>$</b></a>
 &nbsp; 
<br>
<a class="summary-letter-printindex" href="#Index_cp_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-J"><b>J</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-K"><b>K</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-O"><b>O</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-Q"><b>Q</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-V"><b>V</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-W"><b>W</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-X"><b>X</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-Y"><b>Y</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-Z"><b>Z</b></a>
 &nbsp; 
</td></tr></table>
<table class="cp-entries-printindex" border="0">
<tr><td></td><th class="entries-header-printindex">Index Entry</th><th class="sections-header-printindex">Section</th></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-1">_</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">_</code> (underscore)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005f-_0028underscore_0029-C-macro">C macro</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005f-_0028underscore_0029-in-names-of-private-variables">in names of private variables</a></td><td class="printindex-index-section"><a href="#Library-Names">Library Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005f-_0028underscore_0029-translatable-strings">translatable strings</a></td><td class="printindex-index-section"><a href="#Programmer-i18n">Programmer i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_005fgr_005finit_0028_0029-user_002ddefined-function"><code class="code">_gr_init()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_005ford_005finit_0028_0029-user_002ddefined-function"><code class="code">_ord_init()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Ordinal-Functions">Ordinal Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_005fpw_005finit_0028_0029-user_002ddefined-function"><code class="code">_pw_init()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-2">-</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">-</code> (hyphen)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002d-_0028hyphen_0029-_002d-operator"><code class="code">-</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002d-_0028hyphen_0029-_002d-operator-1"><code class="code">-</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002d-_0028hyphen_0029-_002d_002d-end-of-options-marker"><code class="code">--</code> end of options marker</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002d-_0028hyphen_0029-_002d_002d-operator"><code class="code">--</code> operator</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002d-_0028hyphen_0029-_002d_002d-operator-1"><code class="code">--</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002d-_0028hyphen_0029-_002d_003d-operator"><code class="code">-=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002d-_0028hyphen_0029-_002d_003d-operator-1"><code class="code">-=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002d-_0028hyphen_0029-file-names-beginning-with">file names beginning with</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002d-_0028hyphen_0029-in-bracket-expressions">in bracket expressions</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dassign-option"><samp class="option">--assign</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dbignum-option"><samp class="option">--bignum</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dcharacters_002das_002dbytes-option"><samp class="option">--characters-as-bytes</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dcopyright-option"><samp class="option">--copyright</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dcsv-option"><samp class="option">--csv</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002ddebug-option"><samp class="option">--debug</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002ddisable_002dextensions-configuration-option"><samp class="option">--disable-extensions</samp> configuration option</a></td><td class="printindex-index-section"><a href="#Additional-Configuration-Options">Additional Configuration Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002ddisable_002dlint-configuration-option"><samp class="option">--disable-lint</samp> configuration option</a></td><td class="printindex-index-section"><a href="#Additional-Configuration-Options">Additional Configuration Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002ddisable_002dmpfr-configuration-option"><samp class="option">--disable-mpfr</samp> configuration option</a></td><td class="printindex-index-section"><a href="#Additional-Configuration-Options">Additional Configuration Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002ddisable_002dnls-configuration-option"><samp class="option">--disable-nls</samp> configuration option</a></td><td class="printindex-index-section"><a href="#Additional-Configuration-Options">Additional Configuration Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002ddump_002dvariables-option"><samp class="option">--dump-variables</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002d_002ddump_002dvariables-option-using-for-library-functions">using for library functions</a></td><td class="printindex-index-section"><a href="#Library-Names">Library Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002denable_002dversioned_002dextension_002ddir-configuration-option"><samp class="option">--enable-versioned-extension-dir</samp> configuration option</a></td><td class="printindex-index-section"><a href="#Additional-Configuration-Options">Additional Configuration Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dexec-option"><samp class="option">--exec</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dfield_002dseparator-option"><samp class="option">--field-separator</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dfile-option"><samp class="option">--file</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dgen_002dpot-option"><samp class="option">--gen-pot</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dgen_002dpot-option-1"><samp class="option">--gen-pot</samp> option</a></td><td class="printindex-index-section"><a href="#String-Extraction">String Extraction</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dgen_002dpot-option-2"><samp class="option">--gen-pot</samp> option</a></td><td class="printindex-index-section"><a href="#String-Extraction">String Extraction</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dhelp-option"><samp class="option">--help</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dinclude-option"><samp class="option">--include</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dlint-option"><samp class="option">--lint</samp> option</a></td><td class="printindex-index-section"><a href="#Command-Line">Command Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dlint-option-1"><samp class="option">--lint</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dlint_002dold-option"><samp class="option">--lint-old</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dload-option"><samp class="option">--load</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dno_002doptimize-option"><samp class="option">--no-optimize</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dnon_002ddecimal_002ddata-option"><samp class="option">--non-decimal-data</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dnon_002ddecimal_002ddata-option-1"><samp class="option">--non-decimal-data</samp> option</a></td><td class="printindex-index-section"><a href="#Nondecimal-Data">Nondecimal Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002d_002dnon_002ddecimal_002ddata-option-strtonum_0028_0029-function-and"><code class="code">strtonum()</code> function and</a></td><td class="printindex-index-section"><a href="#Nondecimal-Data">Nondecimal Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002doptimize-option"><samp class="option">--optimize</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dposix-option"><samp class="option">--posix</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002d_002dposix-option-_002d_002dtraditional-option-and"><samp class="option">--traditional</samp> option and</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dpretty_002dprint-option"><samp class="option">--pretty-print</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dprofile-option"><samp class="option">--profile</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dprofile-option-1"><samp class="option">--profile</samp> option</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dre_002dinterval-option"><samp class="option">--re-interval</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dsandbox-option"><samp class="option">--sandbox</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002d_002dsandbox-option-disabling-system_0028_0029-function">disabling <code class="code">system()</code> function</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002d_002dsandbox-option-input-redirection-with-getline">input redirection with <code class="code">getline</code></a></td><td class="printindex-index-section"><a href="#Getline">Getline</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">output redirection with <code class="code">print</code></td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-_002d_002dsandbox-option-output-redirection-with-print-printf"><code class="code">printf</code></a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dsource-option"><samp class="option">--source</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dtrace-option"><samp class="option">--trace</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dtraditional-option"><samp class="option">--traditional</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002d_002dtraditional-option-_002d_002dposix-option-and"><samp class="option">--posix</samp> option and</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002duse_002dlc_002dnumeric-option"><samp class="option">--use-lc-numeric</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002d_002dversion-option"><samp class="option">--version</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002db-option"><samp class="option">-b</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dc-option"><samp class="option">-c</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dC-option"><samp class="option">-C</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dd-option"><samp class="option">-d</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dD-option"><samp class="option">-D</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002de-option"><samp class="option">-e</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dE-option"><samp class="option">-E</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002de-option-1"><samp class="option">-e</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002df-option"><samp class="option">-f</samp> option</a></td><td class="printindex-index-section"><a href="#Long">Long</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dF-option"><samp class="option">-F</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002df-option-1"><samp class="option">-f</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002dF-option-_002dFt-sets-FS-to-TAB"><samp class="option">-Ft</samp> sets <code class="code">FS</code> to TAB</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002dF-option-command_002dline">command-line</a></td><td class="printindex-index-section"><a href="#Command-Line-Field-Separator">Command Line Field Separator</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002df-option-multiple-uses">multiple uses</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dg-option"><samp class="option">-g</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dh-option"><samp class="option">-h</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002di-option"><samp class="option">-i</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dI-option"><samp class="option">-I</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dk-option"><samp class="option">-k</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dl-option"><samp class="option">-l</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dl-option-1"><samp class="option">-l</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dL-option"><samp class="option">-L</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dM-option"><samp class="option">-M</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dn-option"><samp class="option">-n</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dN-option"><samp class="option">-N</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002do-option"><samp class="option">-o</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dO-option"><samp class="option">-O</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dp-option"><samp class="option">-p</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dP-option"><samp class="option">-P</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dr-option"><samp class="option">-r</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002ds-option"><samp class="option">-s</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dS-option"><samp class="option">-S</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dv-option"><samp class="option">-v</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dV-option"><samp class="option">-V</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dv-option-1"><samp class="option">-v</samp> option</a></td><td class="printindex-index-section"><a href="#Assignment-Options">Assignment Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002dW-option"><samp class="option">-W</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-3">,</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002c-_0028comma_0029_002c-in-range-patterns"><code class="code">,</code> (comma), in range patterns</a></td><td class="printindex-index-section"><a href="#Ranges">Ranges</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-4">;</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">;</code> (semicolon)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003b-_0028semicolon_0029-AWKPATH-variable-and"><code class="env">AWKPATH</code> variable and</a></td><td class="printindex-index-section"><a href="#PC-Using">PC Using</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003b-_0028semicolon_0029-separating-rules">separating rules</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003b-_0028semicolon_0029-separating-statements-in-actions">separating statements in actions</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003b-_0028semicolon_0029-separating-statements-in-actions-1">separating statements in actions</a></td><td class="printindex-index-section"><a href="#Action-Overview">Action Overview</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003b-_0028semicolon_0029-separating-statements-in-actions-2">separating statements in actions</a></td><td class="printindex-index-section"><a href="#Statements">Statements</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-5">:</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">:</code> (colon)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003a-_0028colon_0029-_003a_003a-namespace-separator"><code class="code">::</code> namespace separator</a></td><td class="printindex-index-section"><a href="#Qualified-Names">Qualified Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003a-_0028colon_0029-_003f_003a-operator"><code class="code">?:</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-6">!</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">!</code> (exclamation point)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0021-_0028exclamation-point_0029-_0021-operator"><code class="code">!</code>  operator</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0021-_0028exclamation-point_0029-_0021-operator-1"><code class="code">!</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0021-_0028exclamation-point_0029-_0021-operator-2"><code class="code">!</code> operator</a></td><td class="printindex-index-section"><a href="#Ranges">Ranges</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0021-_0028exclamation-point_0029-_0021-operator-3"><code class="code">!</code> operator</a></td><td class="printindex-index-section"><a href="#Egrep-Program">Egrep Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0021-_0028exclamation-point_0029-_0021_003d-operator"><code class="code">!=</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0021-_0028exclamation-point_0029-_0021_003d-operator-1"><code class="code">!=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0021-_0028exclamation-point_0029-_0021_007e-operator"><code class="code">!~</code> operator</a></td><td class="printindex-index-section"><a href="#Regexp-Usage">Regexp Usage</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0021-_0028exclamation-point_0029-_0021_007e-operator-1"><code class="code">!~</code> operator</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0021-_0028exclamation-point_0029-_0021_007e-operator-2"><code class="code">!~</code> operator</a></td><td class="printindex-index-section"><a href="#Case_002dsensitivity">Case-sensitivity</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0021-_0028exclamation-point_0029-_0021_007e-operator-3"><code class="code">!~</code> operator</a></td><td class="printindex-index-section"><a href="#Regexp-Constants">Regexp Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0021-_0028exclamation-point_0029-_0021_007e-operator-4"><code class="code">!~</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0021-_0028exclamation-point_0029-_0021_007e-operator-5"><code class="code">!~</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0021-_0028exclamation-point_0029-_0021_007e-operator-6"><code class="code">!~</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0021-_0028exclamation-point_0029-_0021_007e-operator-7"><code class="code">!~</code> operator</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-7">?</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">?</code> (question mark)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003f-_0028question-mark_0029-_003f_003a-operator"><code class="code">?:</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003f-_0028question-mark_0029-regexp-operator">regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003f-_0028question-mark_0029-regexp-operator-1">regexp operator</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-8">.</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002e-_0028period_0029_002c-regexp-operator"><code class="code">.</code> (period), regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002egmo-files"><code class="code">.gmo</code> files</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002egmo-files-specifying-directory-of">specifying directory of</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002egmo-files-specifying-directory-of-1">specifying directory of</a></td><td class="printindex-index-section"><a href="#Programmer-i18n">Programmer i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002emo-files_002c-converting-from-_002epo"><code class="code">.mo</code> files, converting from <code class="code">.po</code></a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002epo-files"><code class="code">.po</code> files</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002epo-files-1"><code class="code">.po</code> files</a></td><td class="printindex-index-section"><a href="#Translator-i18n">Translator i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002epo-files-converting-to-_002emo">converting to <code class="code">.mo</code></a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002epot-files"><code class="code">.pot</code> files</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-9">'</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_0027-_0028single-quote_0029"><code class="code">'</code> (single quote)</a></td><td class="printindex-index-section"><a href="#One_002dshot">One-shot</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0027-_0028single-quote_0029-in-gawk-command-lines">in <code class="command">gawk</code> command lines</a></td><td class="printindex-index-section"><a href="#Long">Long</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0027-_0028single-quote_0029-in-shell-commands">in shell commands</a></td><td class="printindex-index-section"><a href="#Quoting">Quoting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0027-_0028single-quote_0029-vs_002e-apostrophe">vs. apostrophe</a></td><td class="printindex-index-section"><a href="#Comments">Comments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0027-_0028single-quote_0029-with-double-quotes">with double quotes</a></td><td class="printindex-index-section"><a href="#Quoting">Quoting</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-10">&quot;</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">&quot;</code> (double quote)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0022-_0028double-quote_0029-in-regexp-constants">in regexp constants</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0022-_0028double-quote_0029-in-shell-commands">in shell commands</a></td><td class="printindex-index-section"><a href="#Quoting">Quoting</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-11">(</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">()</code> (parentheses)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0028_0029-_0028parentheses_0029-in-a-profile">in a profile</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0028_0029-_0028parentheses_0029-regexp-operator">regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-12">[</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_005b_005d-_0028square-brackets_0029_002c-regexp-operator"><code class="code">[]</code> (square brackets), regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-13">{</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_007b_007d-_0028braces_0029"><code class="code">{}</code> (braces)</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_007b_007d-_0028braces_0029-actions-and">actions and</a></td><td class="printindex-index-section"><a href="#Action-Overview">Action Overview</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_007b_007d-_0028braces_0029-regexp-operator">regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_007b_007d-_0028braces_0029-statements_002c-grouping">statements, grouping</a></td><td class="printindex-index-section"><a href="#Statements">Statements</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-14">@</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">@</code> (at-sign)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0040-_0028at_002dsign_0029-_0040_002dnotation-for-indirect-function-calls"><code class="code">@</code>-notation for indirect function calls</a></td><td class="printindex-index-section"><a href="#Indirect-Calls">Indirect Calls</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0040-_0028at_002dsign_0029-_0040include-directive"><code class="code">@include</code> directive</a></td><td class="printindex-index-section"><a href="#Include-Files">Include Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0040-_0028at_002dsign_0029-_0040load-directive"><code class="code">@load</code> directive</a></td><td class="printindex-index-section"><a href="#Loading-Shared-Libraries">Loading Shared Libraries</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0040-_0028at_002dsign_0029-_0040namespace-directive"><code class="code">@namespace</code> directive</a></td><td class="printindex-index-section"><a href="#Changing-The-Namespace">Changing The Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-_0040-_0028at_002dsign_0029-_0040namespace-directive-BEGIN_002c-BEGINFILE_002c-END_002c-ENDFILE-and"><code class="code">BEGIN</code>, <code class="code">BEGINFILE</code>, <code class="code">END</code>, <code class="code">ENDFILE</code> and</a></td><td class="printindex-index-section"><a href="#Changing-The-Namespace">Changing The Namespace</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-15">*</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">*</code> (asterisk)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><code class="code">*</code> operator</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-_002a-_0028asterisk_0029-_002a-operator-as-multiplication-operator">as multiplication operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-_002a-_0028asterisk_0029-_002a-operator-as-regexp-operator">as regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-_002a-_0028asterisk_0029-_002a-operator-null-strings_002c-matching">null strings, matching</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002a-_0028asterisk_0029-_002a_002a-operator"><code class="code">**</code> operator</a></td><td class="printindex-index-section"><a href="#Arithmetic-Ops">Arithmetic Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002a-_0028asterisk_0029-_002a_002a-operator-1"><code class="code">**</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002a-_0028asterisk_0029-_002a_002a_003d-operator"><code class="code">**=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002a-_0028asterisk_0029-_002a_002a_003d-operator-1"><code class="code">**=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002a-_0028asterisk_0029-_002a_003d-operator"><code class="code">*=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002a-_0028asterisk_0029-_002a_003d-operator-1"><code class="code">*=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-16">/</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">/</code> (forward slash)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002f-_0028forward-slash_0029-_002f-operator"><code class="code">/</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002f-_0028forward-slash_0029-_002f_003d-operator"><code class="code">/=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002f-_0028forward-slash_0029-_002f_003d-operator-1"><code class="code">/=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-_002f-_0028forward-slash_0029-_002f_003d-operator-vs_002e-_002f_003d_2026_002f-regexp-constant">vs. <code class="code">/=&hellip;/</code> regexp constant</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002f-_0028forward-slash_0029-patterns-and">patterns and</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002f-_0028forward-slash_0029-to-enclose-regular-expressions">to enclose regular expressions</a></td><td class="printindex-index-section"><a href="#Regexp">Regexp</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002f_003d-operator-vs_002e-_002f_003d_2026_002f-regexp-constant"><code class="code">/=</code> operator vs. <code class="code">/=&hellip;/</code> regexp constant</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002fdev_002f_2026-special-files"><code class="code">/dev/&hellip;</code> special files</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002fdev_002ffd_002fN-special-files-_0028gawk_0029"><code class="code">/dev/fd/<var class="var">N</var></code> special files (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002finet_002f_2026-special-files-_0028gawk_0029"><code class="code">/inet/&hellip;</code> special files (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#TCP_002fIP-Networking">TCP/IP Networking</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002finet4_002f_2026-special-files-_0028gawk_0029"><code class="code">/inet4/&hellip;</code> special files (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#TCP_002fIP-Networking">TCP/IP Networking</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_002finet6_002f_2026-special-files-_0028gawk_0029"><code class="code">/inet6/&hellip;</code> special files (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#TCP_002fIP-Networking">TCP/IP Networking</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-17">\</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_005c-_0028backslash_0029"><code class="code">\</code> (backslash)</a></td><td class="printindex-index-section"><a href="#Comments">Comments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005c_0027-operator-_0028gawk_0029"><code class="code">\'</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005c_0022-escape-sequence"><code class="code">\&quot;</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005c_002f-escape-sequence"><code class="code">\/</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005c_0060-operator-_0028gawk_0029"><code class="code">\`</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005c_003c-operator-_0028gawk_0029"><code class="code">\&lt;</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005c_003e-operator-_0028gawk_0029"><code class="code">\&gt;</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005ca-escape-sequence"><code class="code">\a</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005cb-escape-sequence"><code class="code">\b</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005cB-operator-_0028gawk_0029"><code class="code">\B</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005cf-escape-sequence"><code class="code">\f</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005cn-escape-sequence"><code class="code">\n</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005cnnn-escape-sequence"><code class="code">\</code><var class="var">nnn</var> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005cr-escape-sequence"><code class="code">\r</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005cs-operator-_0028gawk_0029"><code class="code">\s</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005cS-operator-_0028gawk_0029"><code class="code">\S</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005ct-escape-sequence"><code class="code">\t</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005cu-escape-sequence"><code class="code">\u</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005cv-escape-sequence"><code class="code">\v</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005cw-operator-_0028gawk_0029"><code class="code">\w</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005cW-operator-_0028gawk_0029"><code class="code">\W</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005cx-escape-sequence"><code class="code">\x</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-_005cy-operator-_0028gawk_0029"><code class="code">\y</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-as-field-separator">as field separator</a></td><td class="printindex-index-section"><a href="#Command-Line-Field-Separator">Command Line Field Separator</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-continuing-lines-and">continuing lines and</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-_005c-_0028backslash_0029-continuing-lines-and-comments-and">comments and</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-_005c-_0028backslash_0029-continuing-lines-and-in-csh">in <code class="command">csh</code></a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-gsub_0028_0029_002fgensub_0028_0029_002fsub_0028_0029-functions-and"><code class="code">gsub()</code>/<code class="code">gensub()</code>/<code class="code">sub()</code> functions and</a></td><td class="printindex-index-section"><a href="#Gory-Details">Gory Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-in-bracket-expressions">in bracket expressions</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-in-escape-sequences">in escape sequences</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-in-escape-sequences-1">in escape sequences</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-_005c-_0028backslash_0029-in-escape-sequences-POSIX-and">POSIX and</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-in-regexp-constants">in regexp constants</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-in-shell-commands">in shell commands</a></td><td class="printindex-index-section"><a href="#Quoting">Quoting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005c-_0028backslash_0029-regexp-operator">regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-18">&amp;</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">&amp;</code> (ampersand)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0026-_0028ampersand_0029-_0026_0026-operator"><code class="code">&amp;&amp;</code> operator</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0026-_0028ampersand_0029-_0026_0026-operator-1"><code class="code">&amp;&amp;</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0026-_0028ampersand_0029-gsub_0028_0029_002fgensub_0028_0029_002fsub_0028_0029-functions-and"><code class="code">gsub()</code>/<code class="code">gensub()</code>/<code class="code">sub()</code> functions and</a></td><td class="printindex-index-section"><a href="#Gory-Details">Gory Details</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-19">#</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">#</code> (number sign)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0023-_0028number-sign_0029-_0023_0021-_0028executable-scripts_0029"><code class="code">#!</code> (executable scripts)</a></td><td class="printindex-index-section"><a href="#Executable-Scripts">Executable Scripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0023-_0028number-sign_0029-commenting">commenting</a></td><td class="printindex-index-section"><a href="#Comments">Comments</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-20">%</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">%</code> (percent sign)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0025-_0028percent-sign_0029-_0025-operator"><code class="code">%</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0025-_0028percent-sign_0029-_0025_003d-operator"><code class="code">%=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0025-_0028percent-sign_0029-_0025_003d-operator-1"><code class="code">%=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-21">^</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">^</code> (caret)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005e-_0028caret_0029-_005e-operator"><code class="code">^</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005e-_0028caret_0029-_005e_003d-operator"><code class="code">^=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005e-_0028caret_0029-_005e_003d-operator-1"><code class="code">^=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005e-_0028caret_0029-in-bracket-expressions">in bracket expressions</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005e-_0028caret_0029-in-FS">in <code class="code">FS</code></a></td><td class="printindex-index-section"><a href="#Regexp-Field-Splitting">Regexp Field Splitting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005e-_0028caret_0029-regexp-operator">regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_005e-_0028caret_0029-regexp-operator-1">regexp operator</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-22">+</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">+</code> (plus sign)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002b-_0028plus-sign_0029-_002b-operator"><code class="code">+</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002b-_0028plus-sign_0029-_002b-operator-1"><code class="code">+</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002b-_0028plus-sign_0029-_002b_002b-operator"><code class="code">++</code> operator</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002b-_0028plus-sign_0029-_002b_002b-operator-1"><code class="code">++</code> operator</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002b-_0028plus-sign_0029-_002b_002b-operator-2"><code class="code">++</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002b-_0028plus-sign_0029-_002b_003d-operator"><code class="code">+=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002b-_0028plus-sign_0029-_002b_003d-operator-1"><code class="code">+=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_002b-_0028plus-sign_0029-regexp-operator">regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-23">&lt;</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">&lt;</code> (left angle bracket)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003c-_0028left-angle-bracket_0029-_003c-operator"><code class="code">&lt;</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003c-_0028left-angle-bracket_0029-_003c-operator-1"><code class="code">&lt;</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003c-_0028left-angle-bracket_0029-_003c-operator-_0028I_002fO_0029"><code class="code">&lt;</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Getline_002fFile">Getline/File</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003c-_0028left-angle-bracket_0029-_003c_003d-operator"><code class="code">&lt;=</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003c-_0028left-angle-bracket_0029-_003c_003d-operator-1"><code class="code">&lt;=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-24">=</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">=</code> (equals sign)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003d-_0028equals-sign_0029-_003d-operator"><code class="code">=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003d-_0028equals-sign_0029-_003d_003d-operator"><code class="code">==</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003d-_0028equals-sign_0029-_003d_003d-operator-1"><code class="code">==</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-25">&gt;</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">&gt;</code> (right angle bracket)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003e-_0028right-angle-bracket_0029-_003e-operator"><code class="code">&gt;</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003e-_0028right-angle-bracket_0029-_003e-operator-1"><code class="code">&gt;</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003e-_0028right-angle-bracket_0029-_003e-operator-_0028I_002fO_0029"><code class="code">&gt;</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003e-_0028right-angle-bracket_0029-_003e_003d-operator"><code class="code">&gt;=</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003e-_0028right-angle-bracket_0029-_003e_003d-operator-1"><code class="code">&gt;=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003e-_0028right-angle-bracket_0029-_003e_003e-operator-_0028I_002fO_0029"><code class="code">&gt;&gt;</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_003e-_0028right-angle-bracket_0029-_003e_003e-operator-_0028I_002fO_0029-1"><code class="code">&gt;&gt;</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-26">|</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_007c-_0028vertical-bar_0029"><code class="code">|</code> (vertical bar)</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_007c-_0028vertical-bar_0029-_007c-operator-_0028I_002fO_0029"><code class="code">|</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Getline_002fPipe">Getline/Pipe</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_007c-_0028vertical-bar_0029-_007c-operator-_0028I_002fO_0029-1"><code class="code">|</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_007c-_0028vertical-bar_0029-_007c-operator-_0028I_002fO_0029-2"><code class="code">|</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_007c-_0028vertical-bar_0029-_007c_0026-operator-_0028I_002fO_0029"><code class="code">|&amp;</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Getline_002fCoprocess">Getline/Coprocess</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_007c-_0028vertical-bar_0029-_007c_0026-operator-_0028I_002fO_0029-1"><code class="code">|&amp;</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_007c-_0028vertical-bar_0029-_007c_0026-operator-_0028I_002fO_0029-2"><code class="code">|&amp;</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_007c-_0028vertical-bar_0029-_007c_0026-operator-_0028I_002fO_0029-3"><code class="code">|&amp;</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Two_002dway-I_002fO">Two-way I/O</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-_007c-_0028vertical-bar_0029-_007c_0026-operator-_0028I_002fO_0029-pipes_002c-closing">pipes, closing</a></td><td class="printindex-index-section"><a href="#Close-Files-And-Pipes">Close Files And Pipes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_007c-_0028vertical-bar_0029-_007c_007c-operator"><code class="code">||</code> operator</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_007c-_0028vertical-bar_0029-_007c_007c-operator-1"><code class="code">||</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-27">~</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_007e-_0028tilde_0029_002c-_007e-operator"><code class="code">~</code> (tilde), <code class="code">~</code> operator</a></td><td class="printindex-index-section"><a href="#Regexp-Usage">Regexp Usage</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_007e-_0028tilde_0029_002c-_007e-operator-1"><code class="code">~</code> (tilde), <code class="code">~</code> operator</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_007e-_0028tilde_0029_002c-_007e-operator-2"><code class="code">~</code> (tilde), <code class="code">~</code> operator</a></td><td class="printindex-index-section"><a href="#Case_002dsensitivity">Case-sensitivity</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_007e-_0028tilde_0029_002c-_007e-operator-3"><code class="code">~</code> (tilde), <code class="code">~</code> operator</a></td><td class="printindex-index-section"><a href="#Regexp-Constants">Regexp Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_007e-_0028tilde_0029_002c-_007e-operator-4"><code class="code">~</code> (tilde), <code class="code">~</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_007e-_0028tilde_0029_002c-_007e-operator-5"><code class="code">~</code> (tilde), <code class="code">~</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_007e-_0028tilde_0029_002c-_007e-operator-6"><code class="code">~</code> (tilde), <code class="code">~</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_007e-_0028tilde_0029_002c-_007e-operator-7"><code class="code">~</code> (tilde), <code class="code">~</code> operator</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_symbol-28">$</th></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">$</code> (dollar sign)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0024-_0028dollar-sign_0029-_0024-field-operator"><code class="code">$</code> field operator</a></td><td class="printindex-index-section"><a href="#Fields">Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0024-_0028dollar-sign_0029-_0024-field-operator-1"><code class="code">$</code> field operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0024-_0028dollar-sign_0029-incrementing-fields-and-arrays">incrementing fields and arrays</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-_0024-_0028dollar-sign_0029-regexp-operator">regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-A">A</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-aaa-_0028amazing-awk-assembler_0029-program"><code class="command">aaa</code> (amazing <code class="command">awk</code> assembler) program</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-accessing-fields">accessing fields</a></td><td class="printindex-index-section"><a href="#Fields">Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-accessing-global-variables-from-extensions">accessing global variables from extensions</a></td><td class="printindex-index-section"><a href="#Symbol-Table-Access">Symbol Table Access</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-account-information">account information</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-account-information-1">account information</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-actions">actions</a></td><td class="printindex-index-section"><a href="#Action-Overview">Action Overview</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-actions-control-statements-in">control statements in</a></td><td class="printindex-index-section"><a href="#Statements">Statements</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-actions-default">default</a></td><td class="printindex-index-section"><a href="#Very-Simple">Very Simple</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-actions-empty">empty</a></td><td class="printindex-index-section"><a href="#Very-Simple">Very Simple</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Ada-programming-language">Ada programming language</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry">adding</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-adding-features-to-gawk">features to <code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Adding-Code">Adding Code</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-adding-fields">fields</a></td><td class="printindex-index-section"><a href="#Changing-Fields">Changing Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry">advanced features</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-advanced-features-fixed_002dwidth-data">fixed-width data</a></td><td class="printindex-index-section"><a href="#Constant-Size">Constant Size</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-advanced-features-gawk"><code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Advanced-Features">Advanced Features</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-advanced-features-network-programming">network programming</a></td><td class="printindex-index-section"><a href="#TCP_002fIP-Networking">TCP/IP Networking</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-advanced-features-nondecimal-input-data">nondecimal input data</a></td><td class="printindex-index-section"><a href="#Nondecimal-Data">Nondecimal Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-advanced-features-processes_002c-communicating-with">processes, communicating with</a></td><td class="printindex-index-section"><a href="#Two_002dway-I_002fO">Two-way I/O</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-advanced-features-specifying-field-content">specifying field content</a></td><td class="printindex-index-section"><a href="#Splitting-By-Content">Splitting By Content</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Aho_002c-Alfred">Aho, Alfred</a></td><td class="printindex-index-section"><a href="#History">History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Aho_002c-Alfred-1">Aho, Alfred</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Aho_002c-Alfred-2">Aho, Alfred</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-alarm-clock-example-program">alarm clock example program</a></td><td class="printindex-index-section"><a href="#Alarm-Program">Alarm Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-alarm_002eawk-program"><samp class="file">alarm.awk</samp> program</a></td><td class="printindex-index-section"><a href="#Alarm-Program">Alarm Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-algorithms">algorithms</a></td><td class="printindex-index-section"><a href="#Basic-High-Level">Basic High Level</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-all-source-files_002c-show-in-debugger">all source files, show in debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-allocating-memory-for-extensions">allocating memory for extensions</a></td><td class="printindex-index-section"><a href="#Memory-Allocation-Functions">Memory Allocation Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-amazing-awk-assembler-_0028aaa_0029">amazing <code class="command">awk</code> assembler (<code class="command">aaa</code>)</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-amazingly-workable-formatter-_0028awf_0029">amazingly workable formatter (<code class="command">awf</code>)</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ambiguity_002c-syntactic_003a-_002f_003d-operator-vs_002e-_002f_003d_2026_002f-regexp-constant">ambiguity, syntactic: <code class="code">/=</code> operator vs. <code class="code">/=&hellip;/</code> regexp constant</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry">ampersand (<code class="code">&amp;</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-ampersand-_0028_0026_0029-_0026_0026-operator"><code class="code">&amp;&amp;</code> operator</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-ampersand-_0028_0026_0029-_0026_0026-operator-1"><code class="code">&amp;&amp;</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-ampersand-_0028_0026_0029-gsub_0028_0029_002fgensub_0028_0029_002fsub_0028_0029-functions-and"><code class="code">gsub()</code>/<code class="code">gensub()</code>/<code class="code">sub()</code> functions and</a></td><td class="printindex-index-section"><a href="#Gory-Details">Gory Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-anagram_002eawk-program"><samp class="file">anagram.awk</samp> program</a></td><td class="printindex-index-section"><a href="#Anagram-Program">Anagram Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-anagrams_002c-finding">anagrams, finding</a></td><td class="printindex-index-section"><a href="#Anagram-Program">Anagram Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AND-bitwise-operation">AND bitwise operation</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-and-Boolean_002dlogic-operator">and Boolean-logic operator</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-and_0028_0029-function-_0028gawk_0029"><code class="code">and()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ANSI">ANSI</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry">API</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-API-informational-variables">informational variables</a></td><td class="printindex-index-section"><a href="#Extension-API-Informational-Variables">Extension API Informational Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-API-version">version</a></td><td class="printindex-index-section"><a href="#Extension-Versioning">Extension Versioning</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-API_002c-ownership-of-MPFR-and-GMP-values">API, ownership of MPFR and GMP values</a></td><td class="printindex-index-section"><a href="#API-Ownership-of-MPFR-and-GMP-Values">API Ownership of MPFR and GMP Values</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-arbitrary-precision">arbitrary precision</a></td><td class="printindex-index-section"><a href="#Arbitrary-Precision-Arithmetic">Arbitrary Precision Arithmetic</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-arbitrary-precision-1">arbitrary precision</a></td><td class="printindex-index-section"><a href="#Computer-Arithmetic">Computer Arithmetic</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arbitrary-precision-integers">integers</a></td><td class="printindex-index-section"><a href="#Arbitrary-Precision-Integers">Arbitrary Precision Integers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-archaeologists">archaeologists</a></td><td class="printindex-index-section"><a href="#Bugs">Bugs</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-arctangent">arctangent</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ARGC_002fARGV-variables"><code class="code">ARGC</code>/<code class="code">ARGV</code> variables</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-ARGC_002fARGV-variables-command_002dline-arguments">command-line arguments</a></td><td class="printindex-index-section"><a href="#Other-Arguments">Other Arguments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-ARGC_002fARGV-variables-how-to-use">how to use</a></td><td class="printindex-index-section"><a href="#ARGC-and-ARGV">ARGC and ARGV</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-ARGC_002fARGV-variables-portability-and">portability and</a></td><td class="printindex-index-section"><a href="#Executable-Scripts">Executable Scripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ARGIND-variable"><code class="code">ARGIND</code> variable</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-ARGIND-variable-command_002dline-arguments">command-line arguments</a></td><td class="printindex-index-section"><a href="#Other-Arguments">Other Arguments</a></td></tr>
<tr><td></td><td class="printindex-index-entry">arguments</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arguments-command_002dline">command-line</a></td><td class="printindex-index-section"><a href="#Other-Arguments">Other Arguments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arguments-command_002dline-1">command-line</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arguments-command_002dline-2">command-line</a></td><td class="printindex-index-section"><a href="#ARGC-and-ARGV">ARGC and ARGV</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-arguments-command_002dline-invoking-awk">invoking <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Command-Line">Command Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arguments-in-function-calls">in function calls</a></td><td class="printindex-index-section"><a href="#Function-Calls">Function Calls</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arguments-processing">processing</a></td><td class="printindex-index-section"><a href="#Getopt-Function">Getopt Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ARGV-array"><code class="code">ARGV</code> array</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ARGV-array_002c-indexing-into"><code class="code">ARGV</code> array, indexing into</a></td><td class="printindex-index-section"><a href="#Other-Arguments">Other Arguments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-arithmetic-operators">arithmetic operators</a></td><td class="printindex-index-section"><a href="#Arithmetic-Ops">Arithmetic Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-array-manipulation-in-extensions">array manipulation in extensions</a></td><td class="printindex-index-section"><a href="#Array-Manipulation">Array Manipulation</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-array-members">array members</a></td><td class="printindex-index-section"><a href="#Reference-to-Elements">Reference to Elements</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-array-scanning-order_002c-controlling">array scanning order, controlling</a></td><td class="printindex-index-section"><a href="#Controlling-Scanning">Controlling Scanning</a></td></tr>
<tr><td></td><td class="printindex-index-entry">array subscripts</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-array-subscripts-null-string-as">null string as</a></td><td class="printindex-index-section"><a href="#Uninitialized-Subscripts">Uninitialized Subscripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-array-subscripts-numbers-as">numbers as</a></td><td class="printindex-index-section"><a href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-arrays">arrays</a></td><td class="printindex-index-section"><a href="#Arrays">Arrays</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-arrays-of-arrays">arrays of arrays</a></td><td class="printindex-index-section"><a href="#Arrays-of-Arrays">Arrays of Arrays</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-as-parameters-to-functions">as parameters to functions</a></td><td class="printindex-index-section"><a href="#Pass-By-Value_002fReference">Pass By Value/Reference</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-associative">associative</a></td><td class="printindex-index-section"><a href="#Array-Intro">Array Intro</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-arrays-associative-library-functions-and">library functions and</a></td><td class="printindex-index-section"><a href="#Library-Names">Library Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-deleting-entire-contents">deleting entire contents</a></td><td class="printindex-index-section"><a href="#Delete">Delete</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">elements</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-arrays-elements-assigning-values">assigning values</a></td><td class="printindex-index-section"><a href="#Assigning-Elements">Assigning Elements</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-arrays-elements-deleting">deleting</a></td><td class="printindex-index-section"><a href="#Delete">Delete</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-arrays-elements-order-of-access-by-in-operator">order of access by <code class="code">in</code> operator</a></td><td class="printindex-index-section"><a href="#Scanning-an-Array">Scanning an Array</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-arrays-elements-retrieving-number-of">retrieving number of</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-arrays-elements-that-don_0027t-exist">that don&rsquo;t exist</a></td><td class="printindex-index-section"><a href="#Reference-to-Elements">Reference to Elements</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-example-of-using">example of using</a></td><td class="printindex-index-section"><a href="#Array-Example">Array Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-for-statement-and"><code class="code">for</code> statement and</a></td><td class="printindex-index-section"><a href="#Scanning-an-Array">Scanning an Array</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-IGNORECASE-variable-and"><code class="code">IGNORECASE</code> variable and</a></td><td class="printindex-index-section"><a href="#Array-Intro">Array Intro</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-indexing">indexing</a></td><td class="printindex-index-section"><a href="#Array-Intro">Array Intro</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-merging-into-strings">merging into strings</a></td><td class="printindex-index-section"><a href="#Join-Function">Join Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-multidimensional">multidimensional</a></td><td class="printindex-index-section"><a href="#Multidimensional">Multidimensional</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-arrays-multidimensional-scanning">scanning</a></td><td class="printindex-index-section"><a href="#Multiscanning">Multiscanning</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-number-of-elements">number of elements</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-numeric-subscripts">numeric subscripts</a></td><td class="printindex-index-section"><a href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-referencing-elements">referencing elements</a></td><td class="printindex-index-section"><a href="#Reference-to-Elements">Reference to Elements</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-scanning">scanning</a></td><td class="printindex-index-section"><a href="#Scanning-an-Array">Scanning an Array</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">sorting</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-arrays-sorting-asort_0028_0029-function-_0028gawk_0029"><code class="code">asort()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Array-Sorting-Functions">Array Sorting Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-arrays-sorting-asorti_0028_0029-function-_0028gawk_0029"><code class="code">asorti()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Array-Sorting-Functions">Array Sorting Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-arrays-sorting-IGNORECASE-variable-and"><code class="code">IGNORECASE</code> variable and</a></td><td class="printindex-index-section"><a href="#Array-Sorting-Functions">Array Sorting Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-sparse">sparse</a></td><td class="printindex-index-section"><a href="#Array-Intro">Array Intro</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-subscripts_002c-uninitialized-variables-as">subscripts, uninitialized variables as</a></td><td class="printindex-index-section"><a href="#Uninitialized-Subscripts">Uninitialized Subscripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-arrays-unassigned-elements">unassigned elements</a></td><td class="printindex-index-section"><a href="#Reference-to-Elements">Reference to Elements</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-artificial-intelligence_002c-gawk-and">artificial intelligence, <code class="command">gawk</code> and</a></td><td class="printindex-index-section"><a href="#Distribution-contents">Distribution contents</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ASCII">ASCII</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ASCII-1">ASCII</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ASCII-2">ASCII</a></td><td class="printindex-index-section"><a href="#Scalar-Constants">Scalar Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ASCII-3">ASCII</a></td><td class="printindex-index-section"><a href="#Ordinal-Functions">Ordinal Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ASCII-4">ASCII</a></td><td class="printindex-index-section"><a href="#Alarm-Program">Alarm Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ASCII-5">ASCII</a></td><td class="printindex-index-section"><a href="#Two_002dway-I_002fO">Two-way I/O</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ASCII-6">ASCII</a></td><td class="printindex-index-section"><a href="#Ranges-and-Locales">Ranges and Locales</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ASCII-7">ASCII</a></td><td class="printindex-index-section"><a href="#Ranges-and-Locales">Ranges and Locales</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ASCII-8">ASCII</a></td><td class="printindex-index-section"><a href="#History-summary">History summary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ASCII-9">ASCII</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ASCII-10">ASCII</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-asort_0028_0029-function-_0028gawk_0029"><code class="code">asort()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-asort_0028_0029-function-_0028gawk_0029-1"><code class="code">asort()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Array-Sorting-Functions">Array Sorting Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-asort_0028_0029-function-_0028gawk_0029-arrays_002c-sorting">arrays, sorting</a></td><td class="printindex-index-section"><a href="#Array-Sorting-Functions">Array Sorting Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-asort_0028_0029-function-_0028gawk_0029-side-effects">side effects</a></td><td class="printindex-index-section"><a href="#Array-Sorting-Functions">Array Sorting Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-asorti_0028_0029-function-_0028gawk_0029"><code class="code">asorti()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-asorti_0028_0029-function-_0028gawk_0029-1"><code class="code">asorti()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Array-Sorting-Functions">Array Sorting Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-asorti_0028_0029-function-_0028gawk_0029-arrays_002c-sorting">arrays, sorting</a></td><td class="printindex-index-section"><a href="#Array-Sorting-Functions">Array Sorting Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-asorti_0028_0029-function-_0028gawk_0029-side-effects">side effects</a></td><td class="printindex-index-section"><a href="#Array-Sorting-Functions">Array Sorting Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-assert_0028_0029-function-_0028C-library_0029"><code class="code">assert()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#Assert-Function">Assert Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-assert_0028_0029-user_002ddefined-function"><code class="code">assert()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Assert-Function">Assert Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-assertions">assertions</a></td><td class="printindex-index-section"><a href="#Assert-Function">Assert Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-assign-values-to-variables_002c-in-debugger">assign values to variables, in debugger</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-assignment-operators">assignment operators</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-assignment-operators-evaluation-order">evaluation order</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-assignment-operators-lvalues_002frvalues">lvalues/rvalues</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-assignments-as-file-names">assignments as file names</a></td><td class="printindex-index-section"><a href="#Ignoring-Assigns">Ignoring Assigns</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-associative-arrays">associative arrays</a></td><td class="printindex-index-section"><a href="#Array-Intro">Array Intro</a></td></tr>
<tr><td></td><td class="printindex-index-entry">asterisk (<code class="code">*</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><code class="code">*</code> operator</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-asterisk-_0028_002a_0029-_002a-operator-as-multiplication-operator">as multiplication operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-asterisk-_0028_002a_0029-_002a-operator-as-regexp-operator">as regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-asterisk-_0028_002a_0029-_002a-operator-null-strings_002c-matching">null strings, matching</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-asterisk-_0028_002a_0029-_002a_002a-operator"><code class="code">**</code> operator</a></td><td class="printindex-index-section"><a href="#Arithmetic-Ops">Arithmetic Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-asterisk-_0028_002a_0029-_002a_002a-operator-1"><code class="code">**</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-asterisk-_0028_002a_0029-_002a_002a_003d-operator"><code class="code">**=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-asterisk-_0028_002a_0029-_002a_002a_003d-operator-1"><code class="code">**=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-asterisk-_0028_002a_0029-_002a_003d-operator"><code class="code">*=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-asterisk-_0028_002a_0029-_002a_003d-operator-1"><code class="code">*=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry">at-sign (<code class="code">@</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-at_002dsign-_0028_0040_0029-_0040_002dnotation-for-indirect-function-calls"><code class="code">@</code>-notation for indirect function calls</a></td><td class="printindex-index-section"><a href="#Indirect-Calls">Indirect Calls</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-at_002dsign-_0028_0040_0029-_0040include-directive"><code class="code">@include</code> directive</a></td><td class="printindex-index-section"><a href="#Include-Files">Include Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-at_002dsign-_0028_0040_0029-_0040load-directive"><code class="code">@load</code> directive</a></td><td class="printindex-index-section"><a href="#Loading-Shared-Libraries">Loading Shared Libraries</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-at_002dsign-_0028_0040_0029-_0040namespace-directive"><code class="code">@namespace</code> directive</a></td><td class="printindex-index-section"><a href="#Changing-The-Namespace">Changing The Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-at_002dsign-_0028_0040_0029-_0040namespace-directive-BEGIN_002c-BEGINFILE_002c-END_002c-ENDFILE-and"><code class="code">BEGIN</code>, <code class="code">BEGINFILE</code>, <code class="code">END</code>, <code class="code">ENDFILE</code> and</a></td><td class="printindex-index-section"><a href="#Changing-The-Namespace">Changing The Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-atan2_0028_0029-function"><code class="code">atan2()</code> function</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-automatic-displays_002c-in-debugger">automatic displays, in debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-awf-_0028amazingly-workable-formatter_0029-program"><code class="command">awf</code> (amazingly workable formatter) program</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-awk"><code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Preface">Preface</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><code class="command">awk</code></td><td class="printindex-index-see-also"><em class="emph">See also</em> <code class="command">gawk</code></td></tr>
<tr><td></td><td class="printindex-index-entry"><code class="command">awk</code></td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-function-of">function of</a></td><td class="printindex-index-section"><a href="#Getting-Started">Getting Started</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-gawk-and"><code class="command">gawk</code> and</a></td><td class="printindex-index-section"><a href="#Preface">Preface</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-gawk-and-1"><code class="command">gawk</code> and</a></td><td class="printindex-index-section"><a href="#This-Manual">This Manual</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-history-of">history of</a></td><td class="printindex-index-section"><a href="#History">History</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">implementation issues</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-awk-implementation-issues-pipes">pipes</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-implementations">implementations</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-awk-implementations-limits">limits</a></td><td class="printindex-index-section"><a href="#Getline-Notes">Getline Notes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-invoking">invoking</a></td><td class="printindex-index-section"><a href="#Command-Line">Command Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-language_002c-POSIX-version">language, POSIX version</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-language_002c-POSIX-version-1">language, POSIX version</a></td><td class="printindex-index-section"><a href="#Next-Statement">Next Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-language_002c-POSIX-version-2">language, POSIX version</a></td><td class="printindex-index-section"><a href="#Definition-Syntax">Definition Syntax</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-namespace">namespace</a></td><td class="printindex-index-section"><a href="#Default-Namespace">Default Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-awk-namespace-identifier-name-storage">identifier name storage</a></td><td class="printindex-index-section"><a href="#Internal-Name-Management">Internal Name Management</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-awk-namespace-use-for-indirect-function-calls">use for indirect function calls</a></td><td class="printindex-index-section"><a href="#Internal-Name-Management">Internal Name Management</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-new-vs_002e-old">new vs. old</a></td><td class="printindex-index-section"><a href="#Names">Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-awk-new-vs_002e-old-OFMT-variable"><code class="code">OFMT</code> variable</a></td><td class="printindex-index-section"><a href="#Strings-And-Numbers">Strings And Numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-POSIX-and">POSIX and</a></td><td class="printindex-index-section"><a href="#Preface">Preface</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-POSIX-and-1">POSIX and</a></td><td class="printindex-index-section"><a href="#Preface">Preface</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-profiling_002c-enabling">profiling, enabling</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-regexp-constants-and">regexp constants and</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-terms-describing">terms describing</a></td><td class="printindex-index-section"><a href="#This-Manual">This Manual</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-uses-for">uses for</a></td><td class="printindex-index-section"><a href="#Preface">Preface</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-uses-for-1">uses for</a></td><td class="printindex-index-section"><a href="#Getting-Started">Getting Started</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-uses-for-2">uses for</a></td><td class="printindex-index-section"><a href="#When">When</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-versions-of">versions of</a></td><td class="printindex-index-section"><a href="#V7_002fSVR3_002e1">V7/SVR3.1</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-versions-of-1">versions of</a></td><td class="printindex-index-section"><a href="#BTL">BTL</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-versions-of-2">versions of</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-awk-versions-of-changes-between-SVR3_002e1-and-SVR4">changes between SVR3.1 and SVR4</a></td><td class="printindex-index-section"><a href="#SVR4">SVR4</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-awk-versions-of-changes-between-SVR4-and-POSIX-awk">changes between SVR4 and POSIX <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#POSIX">POSIX</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-awk-versions-of-changes-between-V7-and-SVR3_002e1">changes between V7 and SVR3.1</a></td><td class="printindex-index-section"><a href="#V7_002fSVR3_002e1">V7/SVR3.1</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-awk-programs"><code class="command">awk</code> programs</a></td><td class="printindex-index-section"><a href="#Getting-Started">Getting Started</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-awk-programs-1"><code class="command">awk</code> programs</a></td><td class="printindex-index-section"><a href="#Executable-Scripts">Executable Scripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-awk-programs-2"><code class="command">awk</code> programs</a></td><td class="printindex-index-section"><a href="#Two-Rules">Two Rules</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-complex">complex</a></td><td class="printindex-index-section"><a href="#When">When</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-debugging_002c-enabling">debugging, enabling</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-documenting">documenting</a></td><td class="printindex-index-section"><a href="#Comments">Comments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-documenting-1">documenting</a></td><td class="printindex-index-section"><a href="#Library-Names">Library Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-examples-of">examples of</a></td><td class="printindex-index-section"><a href="#Sample-Programs">Sample Programs</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-execution-of">execution of</a></td><td class="printindex-index-section"><a href="#Next-Statement">Next Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-internationalizing">internationalizing</a></td><td class="printindex-index-section"><a href="#I18N-Functions">I18N Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-internationalizing-1">internationalizing</a></td><td class="printindex-index-section"><a href="#Programmer-i18n">Programmer i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-lengthy">lengthy</a></td><td class="printindex-index-section"><a href="#Long">Long</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-awk-programs-lengthy-assertions">assertions</a></td><td class="printindex-index-section"><a href="#Assert-Function">Assert Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-location-of">location of</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-location-of-1">location of</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-location-of-2">location of</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-one_002dline-examples">one-line examples</a></td><td class="printindex-index-section"><a href="#Very-Simple">Very Simple</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-profiling">profiling</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-running">running</a></td><td class="printindex-index-section"><a href="#Running-gawk">Running gawk</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-running-1">running</a></td><td class="printindex-index-section"><a href="#Long">Long</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-awk-programs-running-from-shell-scripts">from shell scripts</a></td><td class="printindex-index-section"><a href="#One_002dshot">One-shot</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-awk-programs-running-without-input-files">without input files</a></td><td class="printindex-index-section"><a href="#Read-Terminal">Read Terminal</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-awk-programs-shell-variables-in">shell variables in</a></td><td class="printindex-index-section"><a href="#Using-Shell-Variables">Using Shell Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-awk-to-Go-translator"><code class="command">awk</code> to Go translator</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWK_005fHASH-environment-variable"><code class="env">AWK_HASH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-awka-compiler-for-awk"><code class="command">awka</code> compiler for <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKBUFSIZE-environment-variable"><code class="env">AWKBUFSIZE</code> environment variable</a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-awkcc_002c-awk-to-C-translator"><code class="command">awkcc</code>, <code class="command">awk</code> to C translator</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKgo"><code class="command">AWKgo</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKLIBPATH-environment-variable"><code class="env">AWKLIBPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKLIBPATH-environment-variable-1"><code class="env">AWKLIBPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#AWKLIBPATH-Variable">AWKLIBPATH Variable</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKLIBPATH-environment-variable-2"><code class="env">AWKLIBPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Loading-Shared-Libraries">Loading Shared Libraries</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKLIBPATH-environment-variable-3"><code class="env">AWKLIBPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Invoking-Summary">Invoking Summary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKLIBPATH-environment-variable-4"><code class="env">AWKLIBPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Creating-Arrays">Creating Arrays</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKLIBPATH-environment-variable-5"><code class="env">AWKLIBPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Using-Internal-File-Ops">Using Internal File Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKLIBPATH-environment-variable-6"><code class="env">AWKLIBPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#POSIX_002fGNU">POSIX/GNU</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKLIBPATH-environment-variable-7"><code class="env">AWKLIBPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Distribution-contents">Distribution contents</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKLIBPATH-environment-variable-8"><code class="env">AWKLIBPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Shell-Startup-Files">Shell Startup Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKPATH-environment-variable"><code class="env">AWKPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#AWKPATH-Variable">AWKPATH Variable</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKPATH-environment-variable-1"><code class="env">AWKPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Include-Files">Include Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKPATH-environment-variable-2"><code class="env">AWKPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Invoking-Summary">Invoking Summary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKPATH-environment-variable-3"><code class="env">AWKPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Igawk-Program">Igawk Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKPATH-environment-variable-4"><code class="env">AWKPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Igawk-Program">Igawk Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKPATH-environment-variable-5"><code class="env">AWKPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Debugger-Invocation">Debugger Invocation</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKPATH-environment-variable-6"><code class="env">AWKPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#POSIX_002fGNU">POSIX/GNU</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKPATH-environment-variable-7"><code class="env">AWKPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Feature-History">Feature History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKPATH-environment-variable-8"><code class="env">AWKPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Distribution-contents">Distribution contents</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKPATH-environment-variable-9"><code class="env">AWKPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Shell-Startup-Files">Shell Startup Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKPATH-environment-variable-10"><code class="env">AWKPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#PC-Using">PC Using</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKPATH-environment-variable-11"><code class="env">AWKPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#OpenVMS-Running">OpenVMS Running</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-awkprof_002eout-file"><code class="code">awkprof.out</code> file</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-AWKREADFUNC-environment-variable"><code class="env">AWKREADFUNC</code> environment variable</a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-awksed_002eawk-program"><code class="command">awksed.awk</code> program</a></td><td class="printindex-index-section"><a href="#Simple-Sed">Simple Sed</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-awkvars_002eout-file"><samp class="file">awkvars.out</samp> file</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-B">B</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-b-debugger-command-_0028alias-for-break_0029"><code class="code">b</code> debugger command (alias for <code class="code">break</code>)</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-backslash-_0028_005c_0029">backslash (<code class="code">\</code>)</a></td><td class="printindex-index-section"><a href="#Comments">Comments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005c_0027-operator-_0028gawk_0029"><code class="code">\'</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005c_0022-escape-sequence"><code class="code">\&quot;</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005c_002f-escape-sequence"><code class="code">\/</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005c_0060-operator-_0028gawk_0029"><code class="code">\`</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005c_003c-operator-_0028gawk_0029"><code class="code">\&lt;</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005c_003e-operator-_0028gawk_0029"><code class="code">\&gt;</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005ca-escape-sequence"><code class="code">\a</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005cb-escape-sequence"><code class="code">\b</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005cB-operator-_0028gawk_0029"><code class="code">\B</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005cf-escape-sequence"><code class="code">\f</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005cn-escape-sequence"><code class="code">\n</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005cnnn-escape-sequence"><code class="code">\</code><var class="var">nnn</var> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005cr-escape-sequence"><code class="code">\r</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005cs-operator-_0028gawk_0029"><code class="code">\s</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005cS-operator-_0028gawk_0029"><code class="code">\S</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005ct-escape-sequence"><code class="code">\t</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005cu-escape-sequence"><code class="code">\u</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005cv-escape-sequence"><code class="code">\v</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005cw-operator-_0028gawk_0029"><code class="code">\w</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005cW-operator-_0028gawk_0029"><code class="code">\W</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005cx-escape-sequence"><code class="code">\x</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-_005cy-operator-_0028gawk_0029"><code class="code">\y</code> operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-as-field-separator">as field separator</a></td><td class="printindex-index-section"><a href="#Command-Line-Field-Separator">Command Line Field Separator</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-continuing-lines-and">continuing lines and</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-backslash-_0028_005c_0029-continuing-lines-and-comments-and">comments and</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-backslash-_0028_005c_0029-continuing-lines-and-in-csh">in <code class="command">csh</code></a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-gsub_0028_0029_002fgensub_0028_0029_002fsub_0028_0029-functions-and"><code class="code">gsub()</code>/<code class="code">gensub()</code>/<code class="code">sub()</code> functions and</a></td><td class="printindex-index-section"><a href="#Gory-Details">Gory Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-in-bracket-expressions">in bracket expressions</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-in-escape-sequences">in escape sequences</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-in-escape-sequences-1">in escape sequences</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-backslash-_0028_005c_0029-in-escape-sequences-POSIX-and">POSIX and</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-in-regexp-constants">in regexp constants</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-in-shell-commands">in shell commands</a></td><td class="printindex-index-section"><a href="#Quoting">Quoting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-backslash-_0028_005c_0029-regexp-operator">regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-backtrace-debugger-command"><code class="code">backtrace</code> debugger command</a></td><td class="printindex-index-section"><a href="#Execution-Stack">Execution Stack</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Beebe_002c-Nelson-H_002eF_002e">Beebe, Nelson H.F.</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Beebe_002c-Nelson-H_002eF_002e-1">Beebe, Nelson H.F.</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Beebe_002c-Nelson-H_002eF_002e-2">Beebe, Nelson H.F.</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-BEGIN-pattern"><code class="code">BEGIN</code> pattern</a></td><td class="printindex-index-section"><a href="#Field-Separators">Field Separators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-BEGIN-pattern-1"><code class="code">BEGIN</code> pattern</a></td><td class="printindex-index-section"><a href="#BEGIN_002fEND">BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-BEGIN-pattern-2"><code class="code">BEGIN</code> pattern</a></td><td class="printindex-index-section"><a href="#Using-BEGIN_002fEND">Using BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGIN-pattern-_0040namespace-directive-and"><code class="code">@namespace</code> directive and</a></td><td class="printindex-index-section"><a href="#Changing-The-Namespace">Changing The Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGIN-pattern-assert_0028_0029-user_002ddefined-function-and"><code class="code">assert()</code> user-defined function and</a></td><td class="printindex-index-section"><a href="#Assert-Function">Assert Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGIN-pattern-Boolean-patterns-and">Boolean patterns and</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGIN-pattern-exit-statement-and"><code class="code">exit</code> statement and</a></td><td class="printindex-index-section"><a href="#Exit-Statement">Exit Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGIN-pattern-getline-and"><code class="code">getline</code> and</a></td><td class="printindex-index-section"><a href="#Getline-Notes">Getline Notes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGIN-pattern-headings_002c-adding">headings, adding</a></td><td class="printindex-index-section"><a href="#Print-Examples">Print Examples</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGIN-pattern-next_002fnextfile-statements-and"><code class="code">next</code>/<code class="code">nextfile</code> statements and</a></td><td class="printindex-index-section"><a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGIN-pattern-next_002fnextfile-statements-and-1"><code class="code">next</code>/<code class="code">nextfile</code> statements and</a></td><td class="printindex-index-section"><a href="#Next-Statement">Next Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGIN-pattern-OFS_002fORS-variables_002c-assigning-values-to"><code class="code">OFS</code>/<code class="code">ORS</code> variables, assigning values to</a></td><td class="printindex-index-section"><a href="#Output-Separators">Output Separators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGIN-pattern-operators-and">operators and</a></td><td class="printindex-index-section"><a href="#Using-BEGIN_002fEND">Using BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGIN-pattern-print-statement-and"><code class="code">print</code> statement and</a></td><td class="printindex-index-section"><a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGIN-pattern-profiling-and">profiling and</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGIN-pattern-pwcat-program"><code class="code">pwcat</code> program</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGIN-pattern-running-awk-programs-and">running <code class="command">awk</code> programs and</a></td><td class="printindex-index-section"><a href="#Cut-Program">Cut Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGIN-pattern-TEXTDOMAIN-variable-and"><code class="code">TEXTDOMAIN</code> variable and</a></td><td class="printindex-index-section"><a href="#Programmer-i18n">Programmer i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-BEGINFILE-pattern"><code class="code">BEGINFILE</code> pattern</a></td><td class="printindex-index-section"><a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGINFILE-pattern-_0040namespace-directive-and"><code class="code">@namespace</code> directive and</a></td><td class="printindex-index-section"><a href="#Changing-The-Namespace">Changing The Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BEGINFILE-pattern-Boolean-patterns-and">Boolean patterns and</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-beginfile_0028_0029-user_002ddefined-function"><code class="code">beginfile()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Filetrans-Function">Filetrans Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Bentley_002c-Jon">Bentley, Jon</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Benzinger_002c-Michael">Benzinger, Michael</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Berry_002c-Karl">Berry, Karl</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Berry_002c-Karl-1">Berry, Karl</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Berry_002c-Karl-2">Berry, Karl</a></td><td class="printindex-index-section"><a href="#Ranges-and-Locales">Ranges and Locales</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-binary-input_002foutput">binary input/output</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-bindtextdomain_0028_0029-function-_0028C-library_0029"><code class="code">bindtextdomain()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-bindtextdomain_0028_0029-function-_0028gawk_0029"><code class="code">bindtextdomain()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#I18N-Functions">I18N Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-bindtextdomain_0028_0029-function-_0028gawk_0029-1"><code class="code">bindtextdomain()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Programmer-i18n">Programmer i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bindtextdomain_0028_0029-function-_0028gawk_0029-portability-and">portability and</a></td><td class="printindex-index-section"><a href="#I18N-Portability">I18N Portability</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-BINMODE-variable"><code class="code">BINMODE</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-BINMODE-variable-1"><code class="code">BINMODE</code> variable</a></td><td class="printindex-index-section"><a href="#PC-Using">PC Using</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-bit_002dmanipulation-functions">bit-manipulation functions</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-bits2str_0028_0029-user_002ddefined-function"><code class="code">bits2str()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">bitwise</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bitwise-AND">AND</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bitwise-complement">complement</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bitwise-complement-1">complement</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bitwise-operations">operations</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bitwise-OR">OR</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bitwise-shift">shift</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bitwise-XOR">XOR</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">body</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-body-in-actions">in actions</a></td><td class="printindex-index-section"><a href="#Statements">Statements</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-body-in-loops">in loops</a></td><td class="printindex-index-section"><a href="#While-Statement">While Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Boolean-expressions">Boolean expressions</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Boolean-expressions-as-patterns">as patterns</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-boolean-function">boolean function</a></td><td class="printindex-index-section"><a href="#Boolean-Functions">Boolean Functions</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">Boolean operators, <em class="emph">See</em> Boolean expressions</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Bornstein_002c-Dan">Bornstein, Dan</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Bourne-shell_002c-quoting-rules-for">Bourne shell, quoting rules for</a></td><td class="printindex-index-section"><a href="#Quoting">Quoting</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-braces-_0028_007b_007d_0029">braces (<code class="code">{}</code>)</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-braces-_0028_007b_007d_0029-actions-and">actions and</a></td><td class="printindex-index-section"><a href="#Action-Overview">Action Overview</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-braces-_0028_007b_007d_0029-regexp-operator">regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-braces-_0028_007b_007d_0029-statements_002c-grouping">statements, grouping</a></td><td class="printindex-index-section"><a href="#Statements">Statements</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-bracket-expressions">bracket expressions</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-bracket-expressions-1">bracket expressions</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bracket-expressions-character-classes">character classes</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bracket-expressions-character-lists">character lists</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bracket-expressions-collating-elements">collating elements</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bracket-expressions-collating-symbols">collating symbols</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bracket-expressions-complemented">complemented</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bracket-expressions-equivalence-classes">equivalence classes</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bracket-expressions-non_002dASCII">non-ASCII</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bracket-expressions-range-expressions">range expressions</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-break-debugger-command"><code class="code">break</code> debugger command</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-break-statement"><code class="code">break</code> statement</a></td><td class="printindex-index-section"><a href="#Break-Statement">Break Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-breakpoint">breakpoint</a></td><td class="printindex-index-section"><a href="#Debugging-Terms">Debugging Terms</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-breakpoint-at-location_002c-how-to-delete">at location, how to delete</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-breakpoint-commands-to-execute-at">commands to execute at</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-breakpoint-condition">condition</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-breakpoint-delete-by-number">delete by number</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-breakpoint-how-to-disable-or-enable">how to disable or enable</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-breakpoint-setting">setting</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-breakpoint-show-all-in-debugger">show all in debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brennan_002c-Michael">Brennan, Michael</a></td><td class="printindex-index-section"><a href="#Foreword3">Foreword3</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brennan_002c-Michael-1">Brennan, Michael</a></td><td class="printindex-index-section"><a href="#Foreword4">Foreword4</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brennan_002c-Michael-2">Brennan, Michael</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brennan_002c-Michael-3">Brennan, Michael</a></td><td class="printindex-index-section"><a href="#Delete">Delete</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brennan_002c-Michael-4">Brennan, Michael</a></td><td class="printindex-index-section"><a href="#Simple-Sed">Simple Sed</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brennan_002c-Michael-5">Brennan, Michael</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brennan_002c-Michael-6">Brennan, Michael</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brian-Kernighan_0027s-awk">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#When">When</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brian-Kernighan_0027s-awk-1">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brian-Kernighan_0027s-awk-2">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brian-Kernighan_0027s-awk-3">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#gawk-split-records">gawk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brian-Kernighan_0027s-awk-4">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Regexp-Field-Splitting">Regexp Field Splitting</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brian-Kernighan_0027s-awk-5">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Getline_002fPipe">Getline/Pipe</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brian-Kernighan_0027s-awk-6">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Concatenation">Concatenation</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brian-Kernighan_0027s-awk-7">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brian-Kernighan_0027s-awk-8">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Break-Statement">Break Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brian-Kernighan_0027s-awk-9">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Continue-Statement">Continue Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brian-Kernighan_0027s-awk-10">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Nextfile-Statement">Nextfile Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brian-Kernighan_0027s-awk-11">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Delete">Delete</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brian-Kernighan_0027s-awk-12">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brian-Kernighan_0027s-awk-13">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Gory-Details">Gory Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brian-Kernighan_0027s-awk-14">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Brian-Kernighan_0027s-awk-extensions">extensions</a></td><td class="printindex-index-section"><a href="#BTL">BTL</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Brian-Kernighan_0027s-awk-source-code">source code</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brini_002c-Davide">Brini, Davide</a></td><td class="printindex-index-section"><a href="#Signature-Program">Signature Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brink_002c-Jeroen">Brink, Jeroen</a></td><td class="printindex-index-section"><a href="#DOS-Quoting">DOS Quoting</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Broder_002c-Alan-J_002e">Broder, Alan J.</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Brown_002c-Martin">Brown, Martin</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-BSD_002dbased-operating-systems">BSD-based operating systems</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-bt-debugger-command-_0028alias-for-backtrace_0029"><code class="code">bt</code> debugger command (alias for <code class="code">backtrace</code>)</a></td><td class="printindex-index-section"><a href="#Execution-Stack">Execution Stack</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Buening_002c-Andreas">Buening, Andreas</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Buening_002c-Andreas-1">Buening, Andreas</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Buening_002c-Andreas-2">Buening, Andreas</a></td><td class="printindex-index-section"><a href="#Maintainers">Maintainers</a></td></tr>
<tr><td></td><td class="printindex-index-entry">buffering</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-buffering-input_002foutput">input/output</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-buffering-input_002foutput-1">input/output</a></td><td class="printindex-index-section"><a href="#Two_002dway-I_002fO">Two-way I/O</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-buffering-interactive-vs_002e-noninteractive">interactive vs. noninteractive</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">buffers</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-buffers-flushing">flushing</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-buffers-flushing-1">flushing</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-buffers-operators-for">operators for</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-bug-reports_002c-email-address_002c-bug_002dgawk_0040gnu_002eorg">bug reports, email address, <a class="email" href="mailto:bug-gawk@gnu.org">bug-gawk@gnu.org</a></a></td><td class="printindex-index-section"><a href="#Bug-address">Bug address</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-bug_002dgawk_0040gnu_002eorg-bug-reporting-address"><a class="email" href="mailto:bug-gawk@gnu.org">bug-gawk@gnu.org</a> bug reporting address</a></td><td class="printindex-index-section"><a href="#Bug-address">Bug address</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-built_002din-functions">built-in functions</a></td><td class="printindex-index-section"><a href="#Functions">Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-built_002din-functions-evaluation-order">evaluation order</a></td><td class="printindex-index-section"><a href="#Calling-Built_002din">Calling Built-in</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-BusyBox-Awk">BusyBox Awk</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">BWK <code class="command">awk</code>, <em class="emph">See</em> Brian Kernighan&rsquo;s <code class="command">awk</code></td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry">BWK <code class="command">awk</code></td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-BWK-awk-interval-expressions-in">interval expressions in</a></td><td class="printindex-index-section"><a href="#Interval-Expressions">Interval Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">bytes</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-bytes-counting">counting</a></td><td class="printindex-index-section"><a href="#Wc-Program">Wc Program</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-C">C</th></tr>
<tr><td></td><td class="printindex-index-entry">C library functions</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-assert_0028_0029"><code class="code">assert()</code></a></td><td class="printindex-index-section"><a href="#Assert-Function">Assert Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-bindtextdomain_0028_0029"><code class="code">bindtextdomain()</code></a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-endgrent_0028_0029"><code class="code">endgrent()</code></a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-endpwent_0028_0029"><code class="code">endpwent()</code></a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-getaddrinfo_0028_0029"><code class="code">getaddrinfo()</code></a></td><td class="printindex-index-section"><a href="#TCP_002fIP-Networking">TCP/IP Networking</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-getgrent_0028_0029"><code class="code">getgrent()</code></a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-getgrent_0028_0029-1"><code class="code">getgrent()</code></a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-getgrgid_0028_0029"><code class="code">getgrgid()</code></a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-getgrnam_0028_0029"><code class="code">getgrnam()</code></a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-getgruser_0028_0029"><code class="code">getgruser()</code></a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-getopt_0028_0029"><code class="code">getopt()</code></a></td><td class="printindex-index-section"><a href="#Getopt-Function">Getopt Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-getpwent_0028_0029"><code class="code">getpwent()</code></a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-getpwent_0028_0029-1"><code class="code">getpwent()</code></a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-getpwnam_0028_0029"><code class="code">getpwnam()</code></a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-getpwuid_0028_0029"><code class="code">getpwuid()</code></a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-gettext_0028_0029"><code class="code">gettext()</code></a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-C-library-functions-textdomain_0028_0029"><code class="code">textdomain()</code></a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">c.e., <em class="emph">See</em> common extensions</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-call-by-reference">call by reference</a></td><td class="printindex-index-section"><a href="#Pass-By-Value_002fReference">Pass By Value/Reference</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-call-by-value">call by value</a></td><td class="printindex-index-section"><a href="#Pass-By-Value_002fReference">Pass By Value/Reference</a></td></tr>
<tr><td></td><td class="printindex-index-entry">call stack</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-call-stack-display-in-debugger">display in debugger</a></td><td class="printindex-index-section"><a href="#Execution-Stack">Execution Stack</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-call-stack-explanation-of">explanation of</a></td><td class="printindex-index-section"><a href="#Debugging-Terms">Debugging Terms</a></td></tr>
<tr><td></td><td class="printindex-index-entry">caret (<code class="code">^</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-caret-_0028_005e_0029-_005e-operator"><code class="code">^</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-caret-_0028_005e_0029-_005e_003d-operator"><code class="code">^=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-caret-_0028_005e_0029-_005e_003d-operator-1"><code class="code">^=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-caret-_0028_005e_0029-in-bracket-expressions">in bracket expressions</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-caret-_0028_005e_0029-regexp-operator">regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-caret-_0028_005e_0029-regexp-operator-1">regexp operator</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-case-keyword"><code class="code">case</code> keyword</a></td><td class="printindex-index-section"><a href="#Switch-Statement">Switch Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry">case sensitivity</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-case-sensitivity-array-indices-and">array indices and</a></td><td class="printindex-index-section"><a href="#Array-Intro">Array Intro</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-case-sensitivity-converting-case">converting case</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-case-sensitivity-example-programs">example programs</a></td><td class="printindex-index-section"><a href="#Library-Functions">Library Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-case-sensitivity-gawk"><code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Case_002dsensitivity">Case-sensitivity</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-case-sensitivity-regexps-and">regexps and</a></td><td class="printindex-index-section"><a href="#Case_002dsensitivity">Case-sensitivity</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-case-sensitivity-regexps-and-1">regexps and</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-case-sensitivity-string-comparisons-and">string comparisons and</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-CGI_002c-awk-scripts-for">CGI, <code class="command">awk</code> scripts for</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">character classes, <em class="emph">See</em> bracket expressions</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-see-entry">character lists, <em class="emph">See</em> bracket expressions</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-see-entry">character sets (in regular expressions), <em class="emph">See</em> bracket expressions</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-character-sets-_0028machine-character-encodings_0029">character sets (machine character encodings)</a></td><td class="printindex-index-section"><a href="#Ordinal-Functions">Ordinal Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-character-sets-_0028machine-character-encodings_0029-1">character sets (machine character encodings)</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry">characters</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-characters-counting">counting</a></td><td class="printindex-index-section"><a href="#Wc-Program">Wc Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-characters-transliterating">transliterating</a></td><td class="printindex-index-section"><a href="#Translate-Program">Translate Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-characters-values-of-as-numbers">values of as numbers</a></td><td class="printindex-index-section"><a href="#Ordinal-Functions">Ordinal Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Chassell_002c-Robert-J_002e">Chassell, Robert J.</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-chdir_0028_0029-extension-function"><code class="code">chdir()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-File-Functions">Extension Sample File Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-checking-for-MPFR">checking for MPFR</a></td><td class="printindex-index-section"><a href="#Checking-for-MPFR">Checking for MPFR</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-chem-utility"><code class="command">chem</code> utility</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-chr_0028_0029-extension-function"><code class="code">chr()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Ord">Extension Sample Ord</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-chr_0028_0029-user_002ddefined-function"><code class="code">chr()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Ordinal-Functions">Ordinal Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-clear-debugger-command"><code class="code">clear</code> debugger command</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Cliff-random-numbers">Cliff random numbers</a></td><td class="printindex-index-section"><a href="#Cliff-Random-Function">Cliff Random Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-cliff_005frand_0028_0029-user_002ddefined-function"><code class="code">cliff_rand()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Cliff-Random-Function">Cliff Random Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-close-file-or-coprocess">close file or coprocess</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Close_002c-Diane">Close, Diane</a></td><td class="printindex-index-section"><a href="#Manual-History">Manual History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Close_002c-Diane-1">Close, Diane</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-close_0028_0029-function"><code class="code">close()</code> function</a></td><td class="printindex-index-section"><a href="#Close-Files-And-Pipes">Close Files And Pipes</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-close_0028_0029-function-1"><code class="code">close()</code> function</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-close_0028_0029-function-portability">portability</a></td><td class="printindex-index-section"><a href="#Close-Files-And-Pipes">Close Files And Pipes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-close_0028_0029-function-return-value">return value</a></td><td class="printindex-index-section"><a href="#Close-Return-Value">Close Return Value</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-close_0028_0029-function-two_002dway-pipes-and">two-way pipes and</a></td><td class="printindex-index-section"><a href="#Two_002dway-I_002fO">Two-way I/O</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Collado_002c-Manuel">Collado, Manuel</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Collado_002c-Manuel-1">Collado, Manuel</a></td><td class="printindex-index-section"><a href="#More-CSV">More CSV</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Collado_002c-Manuel-2">Collado, Manuel</a></td><td class="printindex-index-section"><a href="#More-CSV">More CSV</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-collating-elements">collating elements</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-collating-symbols">collating symbols</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Colombo_002c-Antonio">Colombo, Antonio</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Colombo_002c-Antonio-1">Colombo, Antonio</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry">colon (<code class="code">:</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-colon-_0028_003a_0029-_003a_003a-namespace-separator"><code class="code">::</code> namespace separator</a></td><td class="printindex-index-section"><a href="#Qualified-Names">Qualified Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-colon-_0028_003a_0029-_003f_003a-operator"><code class="code">?:</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry">columns</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-columns-aligning">aligning</a></td><td class="printindex-index-section"><a href="#Print-Examples">Print Examples</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-columns-cutting">cutting</a></td><td class="printindex-index-section"><a href="#Cut-Program">Cut Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-comma-_0028_002c_0029_002c-in-range-patterns">comma (<code class="code">,</code>), in range patterns</a></td><td class="printindex-index-section"><a href="#Ranges">Ranges</a></td></tr>
<tr><td></td><td class="printindex-index-entry">comma separated values (CSV) data</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-comma-separated-values-_0028CSV_0029-data-_002d_002dcsv-option"><samp class="option">--csv</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-comma-separated-values-_0028CSV_0029-data-_002dk-option"><samp class="option">-k</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-comma-separated-values-_0028CSV_0029-data-generating-CSV-data">generating CSV data</a></td><td class="printindex-index-section"><a href="#To-CSV-Function">To CSV Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Comma-separated-values-_0028CSV_0029-data-parsing-with-FPAT">parsing with <code class="code">FPAT</code></a></td><td class="printindex-index-section"><a href="#Splitting-By-Content">Splitting By Content</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Comma-separated-values-_0028CSV_0029-data-parsing-with-FPAT-library">parsing with <code class="code">FPAT</code> library</a></td><td class="printindex-index-section"><a href="#More-CSV">More CSV</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-comma-separated-values-_0028CSV_0029-data-records-and-fields">records and fields</a></td><td class="printindex-index-section"><a href="#Comma-Separated-Fields">Comma Separated Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-command-completion_002c-in-debugger">command completion, in debugger</a></td><td class="printindex-index-section"><a href="#Readline-Support">Readline Support</a></td></tr>
<tr><td></td><td class="printindex-index-entry">command line</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-command-line-arguments">arguments</a></td><td class="printindex-index-section"><a href="#Other-Arguments">Other Arguments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-command-line-arguments-1">arguments</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-command-line-arguments-2">arguments</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-command-line-arguments-3">arguments</a></td><td class="printindex-index-section"><a href="#ARGC-and-ARGV">ARGC and ARGV</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-command-line-directories-on">directories on</a></td><td class="printindex-index-section"><a href="#Command_002dline-directories">Command-line directories</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-command-line-formats">formats</a></td><td class="printindex-index-section"><a href="#Running-gawk">Running gawk</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-command-line-FS-on_002c-setting"><code class="code">FS</code> on, setting</a></td><td class="printindex-index-section"><a href="#Command-Line-Field-Separator">Command Line Field Separator</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-command-line-invoking-awk-from">invoking <code class="command">awk</code> from</a></td><td class="printindex-index-section"><a href="#Command-Line">Command Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-command-line-option-_002df">option <samp class="option">-f</samp></a></td><td class="printindex-index-section"><a href="#Long">Long</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-command-line-options">options</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-command-line-options-end-of">end of</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-command-line-options-processing">processing</a></td><td class="printindex-index-section"><a href="#Getopt-Function">Getopt Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-command-line-options-string-extraction">string extraction</a></td><td class="printindex-index-section"><a href="#String-Extraction">String Extraction</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-command-line-variables_002c-assigning-on">variables, assigning on</a></td><td class="printindex-index-section"><a href="#Assignment-Options">Assignment Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-commands-debugger-command"><code class="code">commands</code> debugger command</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-commands-to-execute-at-breakpoint">commands to execute at breakpoint</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-commenting">commenting</a></td><td class="printindex-index-section"><a href="#Comments">Comments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-commenting-backslash-continuation-and">backslash continuation and</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry">common extensions</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-common-extensions-_002a_002a-operator"><code class="code">**</code> operator</a></td><td class="printindex-index-section"><a href="#Arithmetic-Ops">Arithmetic Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-common-extensions-_002a_002a_003d-operator"><code class="code">**=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-common-extensions-_002fdev_002fstderr-special-file"><code class="code">/dev/stderr</code> special file</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-common-extensions-_002fdev_002fstdin-special-file"><code class="code">/dev/stdin</code> special file</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-common-extensions-_002fdev_002fstdout-special-file"><code class="code">/dev/stdout</code> special file</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-common-extensions-_005cu-escape-sequence"><code class="code">\u</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-common-extensions-_005cx-escape-sequence"><code class="code">\x</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-common-extensions-BINMODE-variable"><code class="code">BINMODE</code> variable</a></td><td class="printindex-index-section"><a href="#PC-Using">PC Using</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-common-extensions-delete-to-delete-entire-arrays"><code class="code">delete</code> to delete entire arrays</a></td><td class="printindex-index-section"><a href="#Delete">Delete</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-common-extensions-func-keyword"><code class="code">func</code> keyword</a></td><td class="printindex-index-section"><a href="#Definition-Syntax">Definition Syntax</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-common-extensions-length_0028_0029-applied-to-an-array"><code class="code">length()</code> applied to an array</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-common-extensions-RS-as-a-regexp"><code class="code">RS</code> as a regexp</a></td><td class="printindex-index-section"><a href="#gawk-split-records">gawk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-common-extensions-single-character-fields">single character fields</a></td><td class="printindex-index-section"><a href="#Single-Character-Fields">Single Character Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-comp_002elang_002eawk-newsgroup"><code class="code">comp.lang.awk</code> newsgroup</a></td><td class="printindex-index-section"><a href="#Usenet">Usenet</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-comparison-expressions">comparison expressions</a></td><td class="printindex-index-section"><a href="#Typing-and-Comparison">Typing and Comparison</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-comparison-expressions-as-patterns">as patterns</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-comparison-expressions-string-vs_002e-regexp">string vs. regexp</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry">compatibility mode (<code class="command">gawk</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-compatibility-mode-_0028gawk_0029-extensions">extensions</a></td><td class="printindex-index-section"><a href="#POSIX_002fGNU">POSIX/GNU</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-compatibility-mode-_0028gawk_0029-file-names">file names</a></td><td class="printindex-index-section"><a href="#Special-Caveats">Special Caveats</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-compatibility-mode-_0028gawk_0029-hexadecimal-numbers">hexadecimal numbers</a></td><td class="printindex-index-section"><a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-compatibility-mode-_0028gawk_0029-octal-numbers">octal numbers</a></td><td class="printindex-index-section"><a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-compatibility-mode-_0028gawk_0029-specifying">specifying</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-compiled-programs">compiled programs</a></td><td class="printindex-index-section"><a href="#Basic-High-Level">Basic High Level</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-compiled-programs-1">compiled programs</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry">compiling <code class="command">gawk</code></td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-compiling-gawk-for-Cygwin">for Cygwin</a></td><td class="printindex-index-section"><a href="#Cygwin">Cygwin</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-compiling-gawk-for-MS_002dWindows">for MS-Windows</a></td><td class="printindex-index-section"><a href="#PC-Compiling">PC Compiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-compiling-gawk-for-OpenVMS">for OpenVMS</a></td><td class="printindex-index-section"><a href="#OpenVMS-Compilation">OpenVMS Compilation</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-compl_0028_0029-function-_0028gawk_0029"><code class="code">compl()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-complement_002c-bitwise">complement, bitwise</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-component-name">component name</a></td><td class="printindex-index-section"><a href="#Qualified-Names">Qualified Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-component-name-naming-rules">naming rules</a></td><td class="printindex-index-section"><a href="#Naming-Rules">Naming Rules</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-compound-statements_002c-control-statements-and">compound statements, control statements and</a></td><td class="printindex-index-section"><a href="#Statements">Statements</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-concatenating">concatenating</a></td><td class="printindex-index-section"><a href="#Concatenation">Concatenation</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-condition-debugger-command"><code class="code">condition</code> debugger command</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-conditional-expressions">conditional expressions</a></td><td class="printindex-index-section"><a href="#Conditional-Exp">Conditional Exp</a></td></tr>
<tr><td></td><td class="printindex-index-entry">configuration option</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-configuration-option-_002d_002ddisable_002dextensions"><samp class="option">--disable-extensions</samp></a></td><td class="printindex-index-section"><a href="#Additional-Configuration-Options">Additional Configuration Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-configuration-option-_002d_002ddisable_002dlint"><samp class="option">--disable-lint</samp></a></td><td class="printindex-index-section"><a href="#Additional-Configuration-Options">Additional Configuration Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-configuration-option-_002d_002ddisable_002dmpfr"><samp class="option">--disable-mpfr</samp></a></td><td class="printindex-index-section"><a href="#Additional-Configuration-Options">Additional Configuration Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-configuration-option-_002d_002ddisable_002dnls"><samp class="option">--disable-nls</samp></a></td><td class="printindex-index-section"><a href="#Additional-Configuration-Options">Additional Configuration Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-configuration-option-_002d_002denable_002dversioned_002dextension_002ddir"><samp class="option">--enable-versioned-extension-dir</samp></a></td><td class="printindex-index-section"><a href="#Additional-Configuration-Options">Additional Configuration Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-configuration-options_002c-gawk">configuration options, <code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Additional-Configuration-Options">Additional Configuration Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry">constants</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-constants-nondecimal">nondecimal</a></td><td class="printindex-index-section"><a href="#Nondecimal-Data">Nondecimal Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-constants-numeric">numeric</a></td><td class="printindex-index-section"><a href="#Scalar-Constants">Scalar Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-constants-regexp">regexp</a></td><td class="printindex-index-section"><a href="#Regexp-Usage">Regexp Usage</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-constants-string">string</a></td><td class="printindex-index-section"><a href="#Scalar-Constants">Scalar Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-constants-types-of">types of</a></td><td class="printindex-index-section"><a href="#Constants">Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-continue-debugger-command"><code class="code">continue</code> debugger command</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-continue-program_002c-in-debugger">continue program, in debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-continue-statement"><code class="code">continue</code> statement</a></td><td class="printindex-index-section"><a href="#Continue-Statement">Continue Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-control-statements">control statements</a></td><td class="printindex-index-section"><a href="#Statements">Statements</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-controlling-array-scanning-order">controlling array scanning order</a></td><td class="printindex-index-section"><a href="#Controlling-Scanning">Controlling Scanning</a></td></tr>
<tr><td></td><td class="printindex-index-entry">converting</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-converting-dates-to-timestamps">dates to timestamps</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-converting-integer-array-subscripts-to-strings">integer array subscripts to strings</a></td><td class="printindex-index-section"><a href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-converting-numbers-to-strings">numbers to strings</a></td><td class="printindex-index-section"><a href="#Strings-And-Numbers">Strings And Numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-converting-numbers-to-strings-1">numbers to strings</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-converting-string-to-lower-case">string to lower case</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-converting-string-to-numbers">string to numbers</a></td><td class="printindex-index-section"><a href="#Strings-And-Numbers">Strings And Numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-converting-string-to-numbers-1">string to numbers</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-converting-string-to-numbers-2">string to numbers</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-converting-string-to-upper-case">string to upper case</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-CONVFMT-variable"><code class="code">CONVFMT</code> variable</a></td><td class="printindex-index-section"><a href="#Strings-And-Numbers">Strings And Numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-CONVFMT-variable-1"><code class="code">CONVFMT</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-CONVFMT-variable-array-subscripts-and">array subscripts and</a></td><td class="printindex-index-section"><a href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-cookie">cookie</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-coprocesses">coprocesses</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-coprocesses-1">coprocesses</a></td><td class="printindex-index-section"><a href="#Two_002dway-I_002fO">Two-way I/O</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-coprocesses-closing">closing</a></td><td class="printindex-index-section"><a href="#Close-Files-And-Pipes">Close Files And Pipes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-coprocesses-getline-from"><code class="code">getline</code> from</a></td><td class="printindex-index-section"><a href="#Getline_002fCoprocess">Getline/Coprocess</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-cos_0028_0029-function"><code class="code">cos()</code> function</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-cosine">cosine</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-counting-words_002c-lines_002c-characters_002c-and-bytes">counting words, lines, characters, and bytes</a></td><td class="printindex-index-section"><a href="#Wc-Program">Wc Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-cppawk"><code class="command">cppawk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-csh-utility"><code class="command">csh</code> utility</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-csh-utility-_007c_0026-operator_002c-comparison-with"><code class="code">|&amp;</code> operator, comparison with</a></td><td class="printindex-index-section"><a href="#Two_002dway-I_002fO">Two-way I/O</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-csh-utility-POSIXLY_005fCORRECT-environment-variable"><code class="env">POSIXLY_CORRECT</code> environment variable</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry">CSV (comma separated values) data</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-CSV-_0028comma-separated-values_0029-data-_002d_002dcsv-option"><samp class="option">--csv</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-CSV-_0028comma-separated-values_0029-data-_002dk-option"><samp class="option">-k</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-CSV-_0028comma-separated-values_0029-data-generating-CSV-data">generating CSV data</a></td><td class="printindex-index-section"><a href="#To-CSV-Function">To CSV Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-CSV-_0028comma-separated-values_0029-data-parsing-with-CSVMODE-library">parsing with <code class="code">CSVMODE</code> library</a></td><td class="printindex-index-section"><a href="#More-CSV">More CSV</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-CSV-_0028comma-separated-values_0029-data-parsing-with-FPAT">parsing with <code class="code">FPAT</code></a></td><td class="printindex-index-section"><a href="#Splitting-By-Content">Splitting By Content</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-CSV-_0028comma-separated-values_0029-data-records-and-fields">records and fields</a></td><td class="printindex-index-section"><a href="#Comma-Separated-Fields">Comma Separated Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-CSVMODE-library-for-gawk"><code class="code">CSVMODE</code> library for <code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#More-CSV">More CSV</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ctime_0028_0029-user_002ddefined-function"><code class="code">ctime()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Function-Example">Function Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Curreli_002c-Marco">Curreli, Marco</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-currency-symbols_002c-localization">currency symbols, localization</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-current-namespace_002c-pushing-and-popping">current namespace, pushing and popping</a></td><td class="printindex-index-section"><a href="#Changing-The-Namespace">Changing The Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-current-source-file_002c-show-in-debugger">current source file, show in debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-current-system-time">current system time</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-custom_002eh-file"><code class="code">custom.h</code> file</a></td><td class="printindex-index-section"><a href="#Configuration-Philosophy">Configuration Philosophy</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-customized-input-parser">customized input parser</a></td><td class="printindex-index-section"><a href="#Input-Parsers">Input Parsers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-customized-output-wrapper">customized output wrapper</a></td><td class="printindex-index-section"><a href="#Output-Wrappers">Output Wrappers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-customized-two_002dway-processor">customized two-way processor</a></td><td class="printindex-index-section"><a href="#Two_002dway-processors">Two-way processors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-cut-utility"><code class="command">cut</code> utility</a></td><td class="printindex-index-section"><a href="#Cut-Program">Cut Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-cut-utility-1"><code class="command">cut</code> utility</a></td><td class="printindex-index-section"><a href="#Cut-Program">Cut Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-cut_002eawk-program"><samp class="file">cut.awk</samp> program</a></td><td class="printindex-index-section"><a href="#Cut-Program">Cut Program</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-D">D</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-d-debugger-command-_0028alias-for-delete_0029"><code class="code">d</code> debugger command (alias for <code class="code">delete</code>)</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">d.c., <em class="emph">See</em> dark corner</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-dark-corner">dark corner</a></td><td class="printindex-index-section"><a href="#Conventions">Conventions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-dark-corner-1">dark corner</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-_00220_0022-is-actually-true"><code class="code">&quot;0&quot;</code> is actually true</a></td><td class="printindex-index-section"><a href="#Truth-Values">Truth Values</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-_002f_003d-operator-vs_002e-_002f_003d_2026_002f-regexp-constant"><code class="code">/=</code> operator vs. <code class="code">/=&hellip;/</code> regexp constant</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-_005e_002c-in-FS"><code class="code">^</code>, in <code class="code">FS</code></a></td><td class="printindex-index-section"><a href="#Regexp-Field-Splitting">Regexp Field Splitting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-ARGV-variable_002c-value-of"><code class="code">ARGV</code> variable, value of</a></td><td class="printindex-index-section"><a href="#Executable-Scripts">Executable Scripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-array-subscripts">array subscripts</a></td><td class="printindex-index-section"><a href="#Uninitialized-Subscripts">Uninitialized Subscripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-backslash-continuation-on-command-line">backslash continuation on command line</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-break-statement"><code class="code">break</code> statement</a></td><td class="printindex-index-section"><a href="#Break-Statement">Break Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-close_0028_0029-function"><code class="code">close()</code> function</a></td><td class="printindex-index-section"><a href="#Close-Return-Value">Close Return Value</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-command-line_002c-backslash-continuation-on">command line, backslash continuation on</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-command_002dline-arguments">command-line arguments</a></td><td class="printindex-index-section"><a href="#Assignment-Options">Assignment Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-continue-statement"><code class="code">continue</code> statement</a></td><td class="printindex-index-section"><a href="#Continue-Statement">Continue Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-CONVFMT-variable"><code class="code">CONVFMT</code> variable</a></td><td class="printindex-index-section"><a href="#Strings-And-Numbers">Strings And Numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-empty-programs">empty programs</a></td><td class="printindex-index-section"><a href="#Command-Line">Command Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-escape-sequences">escape sequences</a></td><td class="printindex-index-section"><a href="#Other-Arguments">Other Arguments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-dark-corner-escape-sequences-for-metacharacters">for metacharacters</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-exit-statement"><code class="code">exit</code> statement</a></td><td class="printindex-index-section"><a href="#Exit-Statement">Exit Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-field-separators">field separators</a></td><td class="printindex-index-section"><a href="#Full-Line-Fields">Full Line Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-FILENAME-variable"><code class="code">FILENAME</code> variable</a></td><td class="printindex-index-section"><a href="#Getline-Notes">Getline Notes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-FILENAME-variable-1"><code class="code">FILENAME</code> variable</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-FNR_002fNR-variables"><code class="code">FNR</code>/<code class="code">NR</code> variables</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-format_002dcontrol-characters">format-control characters</a></td><td class="printindex-index-section"><a href="#Control-Letters">Control Letters</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-format_002dcontrol-characters-1">format-control characters</a></td><td class="printindex-index-section"><a href="#Control-Letters">Control Letters</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-FS-as-null-string"><code class="code">FS</code> as null string</a></td><td class="printindex-index-section"><a href="#Single-Character-Fields">Single Character Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-input-files">input files</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-invoking-awk">invoking <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Command-Line">Command Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-length_0028_0029-function"><code class="code">length()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-locale_0027s-decimal-point-character">locale&rsquo;s decimal point character</a></td><td class="printindex-index-section"><a href="#Locale-influences-conversions">Locale influences conversions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-multiline-records">multiline records</a></td><td class="printindex-index-section"><a href="#Multiple-Line">Multiple Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-NF-variable_002c-decrementing"><code class="code">NF</code> variable, decrementing</a></td><td class="printindex-index-section"><a href="#Changing-Fields">Changing Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-OFMT-variable"><code class="code">OFMT</code> variable</a></td><td class="printindex-index-section"><a href="#OFMT">OFMT</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-parameter-name-restrictions">parameter name restrictions</a></td><td class="printindex-index-section"><a href="#Definition-Syntax">Definition Syntax</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-range-patterns_002c-line-continuation-and">range patterns, line continuation and</a></td><td class="printindex-index-section"><a href="#Ranges">Ranges</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-regexp-as-second-argument-to-index_0028_0029">regexp as second argument to <code class="code">index()</code></a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-regexp-constants">regexp constants</a></td><td class="printindex-index-section"><a href="#Standard-Regexp-Constants">Standard Regexp Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-dark-corner-regexp-constants-_002f_003d-operator-and"><code class="code">/=</code> operator and</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-dark-corner-regexp-constants-as-arguments-to-user_002ddefined-functions">as arguments to user-defined functions</a></td><td class="printindex-index-section"><a href="#Standard-Regexp-Constants">Standard Regexp Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-split_0028_0029-function"><code class="code">split()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-string-continuation">string continuation</a></td><td class="printindex-index-section"><a href="#Scalar-Constants">Scalar Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-strings_002c-storing">strings, storing</a></td><td class="printindex-index-section"><a href="#gawk-split-records">gawk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dark-corner-value-of-ARGV_005b0_005d">value of <code class="code">ARGV[0]</code></a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-data_002ddriven-languages">data-driven languages</a></td><td class="printindex-index-section"><a href="#Basic-High-Level">Basic High Level</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-data_002c-fixed_002dwidth">data, fixed-width</a></td><td class="printindex-index-section"><a href="#Constant-Size">Constant Size</a></td></tr>
<tr><td></td><td class="printindex-index-entry">database</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-database-group_002c-reading">group, reading</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-database-users_002c-reading">users, reading</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><code class="command">date</code> utility</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-date-utility-GNU">GNU</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-date-utility-POSIX">POSIX</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">dates</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dates-converting-to-timestamps">converting to timestamps</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dates-information-related-to_002c-localization">information related to, localization</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Davies_002c-Stephen">Davies, Stephen</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Davies_002c-Stephen-1">Davies, Stephen</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Day_002c-Robert-P_002eJ_002e">Day, Robert P.J.</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-dcgettext_0028_0029-function-_0028gawk_0029"><code class="code">dcgettext()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#I18N-Functions">I18N Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-dcgettext_0028_0029-function-_0028gawk_0029-1"><code class="code">dcgettext()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Programmer-i18n">Programmer i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dcgettext_0028_0029-function-_0028gawk_0029-portability-and">portability and</a></td><td class="printindex-index-section"><a href="#I18N-Portability">I18N Portability</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-dcngettext_0028_0029-function-_0028gawk_0029"><code class="code">dcngettext()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#I18N-Functions">I18N Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-dcngettext_0028_0029-function-_0028gawk_0029-1"><code class="code">dcngettext()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Programmer-i18n">Programmer i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dcngettext_0028_0029-function-_0028gawk_0029-portability-and">portability and</a></td><td class="printindex-index-section"><a href="#I18N-Portability">I18N Portability</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-deadlocks">deadlocks</a></td><td class="printindex-index-section"><a href="#Two_002dway-I_002fO">Two-way I/O</a></td></tr>
<tr><td></td><td class="printindex-index-entry">debugger</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-capabilities">capabilities</a></td><td class="printindex-index-section"><a href="#Debugging-Concepts">Debugging Concepts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-command-completion">command completion</a></td><td class="printindex-index-section"><a href="#Readline-Support">Readline Support</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">commands</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-b-_0028break_0029"><code class="code">b</code> (<code class="code">break</code>)</a></td><td class="printindex-index-section"><a href="#Finding-The-Bug">Finding The Bug</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-b-_0028break_0029-1"><code class="code">b</code> (<code class="code">break</code>)</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-backtrace"><code class="code">backtrace</code></a></td><td class="printindex-index-section"><a href="#Finding-The-Bug">Finding The Bug</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-backtrace-1"><code class="code">backtrace</code></a></td><td class="printindex-index-section"><a href="#Execution-Stack">Execution Stack</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-break"><code class="code">break</code></a></td><td class="printindex-index-section"><a href="#Finding-The-Bug">Finding The Bug</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-break-1"><code class="code">break</code></a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-breakpoint"><code class="code">breakpoint</code></a></td><td class="printindex-index-section"><a href="#Finding-The-Bug">Finding The Bug</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-bt-_0028backtrace_0029"><code class="code">bt</code> (<code class="code">backtrace</code>)</a></td><td class="printindex-index-section"><a href="#Finding-The-Bug">Finding The Bug</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-bt-_0028backtrace_0029-1"><code class="code">bt</code> (<code class="code">backtrace</code>)</a></td><td class="printindex-index-section"><a href="#Execution-Stack">Execution Stack</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-c-_0028continue_0029"><code class="code">c</code> (<code class="code">continue</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-clear"><code class="code">clear</code></a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-commands"><code class="code">commands</code></a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-condition"><code class="code">condition</code></a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-continue"><code class="code">continue</code></a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-d-_0028delete_0029"><code class="code">d</code> (<code class="code">delete</code>)</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-delete"><code class="code">delete</code></a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-disable"><code class="code">disable</code></a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-display"><code class="code">display</code></a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-down"><code class="code">down</code></a></td><td class="printindex-index-section"><a href="#Execution-Stack">Execution Stack</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-dump"><code class="code">dump</code></a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-e-_0028enable_0029"><code class="code">e</code> (<code class="code">enable</code>)</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-enable"><code class="code">enable</code></a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-end"><code class="code">end</code></a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-eval"><code class="code">eval</code></a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-f-_0028frame_0029"><code class="code">f</code> (<code class="code">frame</code>)</a></td><td class="printindex-index-section"><a href="#Execution-Stack">Execution Stack</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-finish"><code class="code">finish</code></a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-frame"><code class="code">frame</code></a></td><td class="printindex-index-section"><a href="#Execution-Stack">Execution Stack</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-h-_0028help_0029"><code class="code">h</code> (<code class="code">help</code>)</a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-help"><code class="code">help</code></a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-i-_0028info_0029"><code class="code">i</code> (<code class="code">info</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-ignore"><code class="code">ignore</code></a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-info"><code class="code">info</code></a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-l-_0028list_0029"><code class="code">l</code> (<code class="code">list</code>)</a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-list"><code class="code">list</code></a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-n-_0028next_0029"><code class="code">n</code> (<code class="code">next</code>)</a></td><td class="printindex-index-section"><a href="#Finding-The-Bug">Finding The Bug</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-n-_0028next_0029-1"><code class="code">n</code> (<code class="code">next</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-next"><code class="code">next</code></a></td><td class="printindex-index-section"><a href="#Finding-The-Bug">Finding The Bug</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-next-1"><code class="code">next</code></a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-nexti"><code class="code">nexti</code></a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-ni-_0028nexti_0029"><code class="code">ni</code> (<code class="code">nexti</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-o-_0028option_0029"><code class="code">o</code> (<code class="code">option</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-option"><code class="code">option</code></a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-p-_0028print_0029"><code class="code">p</code> (<code class="code">print</code>)</a></td><td class="printindex-index-section"><a href="#Finding-The-Bug">Finding The Bug</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-p-_0028print_0029-1"><code class="code">p</code> (<code class="code">print</code>)</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-print"><code class="code">print</code></a></td><td class="printindex-index-section"><a href="#Finding-The-Bug">Finding The Bug</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-print-1"><code class="code">print</code></a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-printf"><code class="code">printf</code></a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-q-_0028quit_0029"><code class="code">q</code> (<code class="code">quit</code>)</a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-quit"><code class="code">quit</code></a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-r-_0028run_0029"><code class="code">r</code> (<code class="code">run</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-return"><code class="code">return</code></a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-run"><code class="code">run</code></a></td><td class="printindex-index-section"><a href="#Finding-The-Bug">Finding The Bug</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-run-1"><code class="code">run</code></a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-s-_0028step_0029"><code class="code">s</code> (<code class="code">step</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-set"><code class="code">set</code></a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-si-_0028stepi_0029"><code class="code">si</code> (<code class="code">stepi</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-silent"><code class="code">silent</code></a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-step"><code class="code">step</code></a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-stepi"><code class="code">stepi</code></a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-t-_0028tbreak_0029"><code class="code">t</code> (<code class="code">tbreak</code>)</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-tbreak"><code class="code">tbreak</code></a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-trace"><code class="code">trace</code></a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-u-_0028until_0029"><code class="code">u</code> (<code class="code">until</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-undisplay"><code class="code">undisplay</code></a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-until"><code class="code">until</code></a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-unwatch"><code class="code">unwatch</code></a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-up"><code class="code">up</code></a></td><td class="printindex-index-section"><a href="#Execution-Stack">Execution Stack</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-w-_0028watch_0029"><code class="code">w</code> (<code class="code">watch</code>)</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-watch"><code class="code">watch</code></a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-debugger-commands-where-_0028backtrace_0029"><code class="code">where</code> (<code class="code">backtrace</code>)</a></td><td class="printindex-index-section"><a href="#Execution-Stack">Execution Stack</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-concepts">concepts</a></td><td class="printindex-index-section"><a href="#Debugging-Terms">Debugging Terms</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-default-list-amount">default list amount</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-history-expansion">history expansion</a></td><td class="printindex-index-section"><a href="#Readline-Support">Readline Support</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-history-file">history file</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-history-size">history size</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-how-to-start">how to start</a></td><td class="printindex-index-section"><a href="#Debugger-Invocation">Debugger Invocation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-instruction-tracing">instruction tracing</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-interaction-with-namespaces">interaction with namespaces</a></td><td class="printindex-index-section"><a href="#Namespace-And-Features">Namespace And Features</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-limitations">limitations</a></td><td class="printindex-index-section"><a href="#Limitations">Limitations</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-options">options</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-printing-all-array-elements">printing all array elements</a></td><td class="printindex-index-section"><a href="#Finding-The-Bug">Finding The Bug</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-printing-single-array-elements">printing single array elements</a></td><td class="printindex-index-section"><a href="#Finding-The-Bug">Finding The Bug</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-prompt">prompt</a></td><td class="printindex-index-section"><a href="#Debugger-Invocation">Debugger Invocation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-prompt-1">prompt</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-read-commands-from-a-file">read commands from a file</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-repeating-commands">repeating commands</a></td><td class="printindex-index-section"><a href="#List-of-Debugger-Commands">List of Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-running-the-program">running the program</a></td><td class="printindex-index-section"><a href="#Finding-The-Bug">Finding The Bug</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-save-commands-to-a-file">save commands to a file</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-setting-a-breakpoint">setting a breakpoint</a></td><td class="printindex-index-section"><a href="#Finding-The-Bug">Finding The Bug</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugger-stack-frames_002c-showing">stack frames, showing</a></td><td class="printindex-index-section"><a href="#Finding-The-Bug">Finding The Bug</a></td></tr>
<tr><td></td><td class="printindex-index-entry">debugging</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugging-awk-programs"><code class="command">awk</code> programs</a></td><td class="printindex-index-section"><a href="#Debugger">Debugger</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-debugging-example-session">example session</a></td><td class="printindex-index-section"><a href="#Sample-Debugging-Session">Sample Debugging Session</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-debugging-gawk_002c-bug-reports">debugging <code class="command">gawk</code>, bug reports</a></td><td class="printindex-index-section"><a href="#Bugs">Bugs</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-decimal-point-character_002c-locale-specific">decimal point character, locale specific</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-decrement-operators">decrement operators</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-default-keyword"><code class="code">default</code> keyword</a></td><td class="printindex-index-section"><a href="#Switch-Statement">Switch Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Deifik_002c-Scott">Deifik, Scott</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Deifik_002c-Scott-1">Deifik, Scott</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-delete-array"><code class="code">delete</code> <var class="var">array</var></a></td><td class="printindex-index-section"><a href="#Delete">Delete</a></td></tr>
<tr><td></td><td class="printindex-index-entry">delete breakpoint</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-delete-breakpoint-at-location">at location</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-delete-breakpoint-by-number">by number</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-delete-debugger-command"><code class="code">delete</code> debugger command</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-delete-statement"><code class="code">delete</code> statement</a></td><td class="printindex-index-section"><a href="#Delete">Delete</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-delete-watchpoint">delete watchpoint</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry">deleting</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-deleting-elements-in-arrays">elements in arrays</a></td><td class="printindex-index-section"><a href="#Delete">Delete</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-deleting-entire-arrays">entire arrays</a></td><td class="printindex-index-section"><a href="#Delete">Delete</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Demaille_002c-Akim">Demaille, Akim</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-describe-call-stack-frame_002c-in-debugger">describe call stack frame, in debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry">differences in <code class="command">awk</code> and <code class="command">gawk</code></td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-ARGC_002fARGV-variables"><code class="code">ARGC</code>/<code class="code">ARGV</code> variables</a></td><td class="printindex-index-section"><a href="#ARGC-and-ARGV">ARGC and ARGV</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-ARGIND-variable"><code class="code">ARGIND</code> variable</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-array-elements_002c-deleting">array elements, deleting</a></td><td class="printindex-index-section"><a href="#Delete">Delete</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-AWKLIBPATH-environment-variable"><code class="code">AWKLIBPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#AWKLIBPATH-Variable">AWKLIBPATH Variable</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-AWKPATH-environment-variable"><code class="env">AWKPATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#AWKPATH-Variable">AWKPATH Variable</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-BEGIN_002fEND-patterns"><code class="code">BEGIN</code>/<code class="code">END</code> patterns</a></td><td class="printindex-index-section"><a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-BEGINFILE_002fENDFILE-patterns"><code class="code">BEGINFILE</code>/<code class="code">ENDFILE</code> patterns</a></td><td class="printindex-index-section"><a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-BINMODE-variable"><code class="code">BINMODE</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-BINMODE-variable-1"><code class="code">BINMODE</code> variable</a></td><td class="printindex-index-section"><a href="#PC-Using">PC Using</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-close_0028_0029-function"><code class="code">close()</code> function</a></td><td class="printindex-index-section"><a href="#Close-Files-And-Pipes">Close Files And Pipes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-close_0028_0029-function-1"><code class="code">close()</code> function</a></td><td class="printindex-index-section"><a href="#Close-Return-Value">Close Return Value</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-command_002dline-directories">command-line directories</a></td><td class="printindex-index-section"><a href="#Command_002dline-directories">Command-line directories</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-ERRNO-variable"><code class="code">ERRNO</code> variable</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-error-messages">error messages</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-FIELDWIDTHS-variable"><code class="code">FIELDWIDTHS</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-FPAT-variable"><code class="code">FPAT</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-FUNCTAB-variable"><code class="code">FUNCTAB</code> variable</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-function-arguments">function arguments</a></td><td class="printindex-index-section"><a href="#Calling-Built_002din">Calling Built-in</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-getline-command"><code class="code">getline</code> command</a></td><td class="printindex-index-section"><a href="#Getline">Getline</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-IGNORECASE-variable"><code class="code">IGNORECASE</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-implementation-limitations">implementation limitations</a></td><td class="printindex-index-section"><a href="#Getline-Notes">Getline Notes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-implementation-limitations-1">implementation limitations</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-indirect-function-calls">indirect function calls</a></td><td class="printindex-index-section"><a href="#Indirect-Calls">Indirect Calls</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-input_002foutput-operators">input/output operators</a></td><td class="printindex-index-section"><a href="#Getline_002fCoprocess">Getline/Coprocess</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-input_002foutput-operators-1">input/output operators</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-length_0028_0029-function"><code class="code">length()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-line-continuations">line continuations</a></td><td class="printindex-index-section"><a href="#Conditional-Exp">Conditional Exp</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-LINT-variable"><code class="code">LINT</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-match_0028_0029-function"><code class="code">match()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-print_002fprintf-statements"><code class="code">print</code>/<code class="code">printf</code> statements</a></td><td class="printindex-index-section"><a href="#Format-Modifiers">Format Modifiers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-PROCINFO-array"><code class="code">PROCINFO</code> array</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-read-timeouts">read timeouts</a></td><td class="printindex-index-section"><a href="#Read-Timeout">Read Timeout</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-record-separators">record separators</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-regexp-constants">regexp constants</a></td><td class="printindex-index-section"><a href="#Standard-Regexp-Constants">Standard Regexp Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-regular-expressions">regular expressions</a></td><td class="printindex-index-section"><a href="#Case_002dsensitivity">Case-sensitivity</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-retrying-input">retrying input</a></td><td class="printindex-index-section"><a href="#Retrying-Input">Retrying Input</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-RS_002fRT-variables"><code class="code">RS</code>/<code class="code">RT</code> variables</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-RS_002fRT-variables-1"><code class="code">RS</code>/<code class="code">RT</code> variables</a></td><td class="printindex-index-section"><a href="#gawk-split-records">gawk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-RS_002fRT-variables-2"><code class="code">RS</code>/<code class="code">RT</code> variables</a></td><td class="printindex-index-section"><a href="#Multiple-Line">Multiple Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-RS_002fRT-variables-3"><code class="code">RS</code>/<code class="code">RT</code> variables</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-single_002dcharacter-fields">single-character fields</a></td><td class="printindex-index-section"><a href="#Single-Character-Fields">Single Character Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-split_0028_0029-function"><code class="code">split()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-strings">strings</a></td><td class="printindex-index-section"><a href="#Scalar-Constants">Scalar Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-strings-1">strings</a></td><td class="printindex-index-section"><a href="#Scalar-Constants">Scalar Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-differences-in-awk-and-gawk-strings-storing">storing</a></td><td class="printindex-index-section"><a href="#gawk-split-records">gawk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-SYMTAB-variable"><code class="code">SYMTAB</code> variable</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-TEXTDOMAIN-variable"><code class="code">TEXTDOMAIN</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-differences-in-awk-and-gawk-trunc_002dmod-operation">trunc-mod operation</a></td><td class="printindex-index-section"><a href="#Arithmetic-Ops">Arithmetic Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry">directories</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-directories-command_002dline">command-line</a></td><td class="printindex-index-section"><a href="#Command_002dline-directories">Command-line directories</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">searching</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-directories-searching-for-loadable-extensions">for loadable extensions</a></td><td class="printindex-index-section"><a href="#AWKLIBPATH-Variable">AWKLIBPATH Variable</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-directories-searching-for-source-files">for source files</a></td><td class="printindex-index-section"><a href="#AWKPATH-Variable">AWKPATH Variable</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-directories-searching-for-source-files-1">for source files</a></td><td class="printindex-index-section"><a href="#Programs-Exercises">Programs Exercises</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-disable-breakpoint">disable breakpoint</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-disable-debugger-command"><code class="code">disable</code> debugger command</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-display-debugger-command"><code class="code">display</code> debugger command</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-display-debugger-options">display debugger options</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-division">division</a></td><td class="printindex-index-section"><a href="#Arithmetic-Ops">Arithmetic Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-do_002dwhile-statement"><code class="code">do</code>-<code class="code">while</code> statement</a></td><td class="printindex-index-section"><a href="#Do-Statement">Do Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-do_002dwhile-statement-use-of-regexps-in">use of regexps in</a></td><td class="printindex-index-section"><a href="#Regexp-Usage">Regexp Usage</a></td></tr>
<tr><td></td><td class="printindex-index-entry">documentation</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">building</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-documentation-building-HTML">HTML</a></td><td class="printindex-index-section"><a href="#Building-the-Documentation">Building the Documentation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-documentation-building-Info-files">Info files</a></td><td class="printindex-index-section"><a href="#Building-the-Documentation">Building the Documentation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-documentation-building-PDF">PDF</a></td><td class="printindex-index-section"><a href="#Building-the-Documentation">Building the Documentation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-documentation-of-awk-programs">of <code class="command">awk</code> programs</a></td><td class="printindex-index-section"><a href="#Library-Names">Library Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-documentation-online">online</a></td><td class="printindex-index-section"><a href="#Manual-History">Manual History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-documents_002c-searching">documents, searching</a></td><td class="printindex-index-section"><a href="#Dupword-Program">Dupword Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry">dollar sign (<code class="code">$</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dollar-sign-_0028_0024_0029-_0024-field-operator"><code class="code">$</code> field operator</a></td><td class="printindex-index-section"><a href="#Fields">Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dollar-sign-_0028_0024_0029-_0024-field-operator-1"><code class="code">$</code> field operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dollar-sign-_0028_0024_0029-incrementing-fields-and-arrays">incrementing fields and arrays</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-dollar-sign-_0028_0024_0029-regexp-operator">regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry">double quote (<code class="code">&quot;</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-double-quote-_0028_0022_0029-in-regexp-constants">in regexp constants</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-double-quote-_0028_0022_0029-in-shell-commands">in shell commands</a></td><td class="printindex-index-section"><a href="#Quoting">Quoting</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-double_002dprecision">double-precision</a></td><td class="printindex-index-section"><a href="#Computer-Arithmetic">Computer Arithmetic</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-down-debugger-command"><code class="code">down</code> debugger command</a></td><td class="printindex-index-section"><a href="#Execution-Stack">Execution Stack</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Drepper_002c-Ulrich">Drepper, Ulrich</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Duman_002c-Patrice">Duman, Patrice</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-dump-all-variables-of-a-program">dump all variables of a program</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-dump-debugger-command"><code class="code">dump</code> debugger command</a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-dupword_002eawk-program"><samp class="file">dupword.awk</samp> program</a></td><td class="printindex-index-section"><a href="#Dupword-Program">Dupword Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-dynamic-profiling">dynamic profiling</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-dynamically-loaded-extensions">dynamically loaded extensions</a></td><td class="printindex-index-section"><a href="#Dynamic-Extensions">Dynamic Extensions</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-E">E</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-e-debugger-command-_0028alias-for-enable_0029"><code class="code">e</code> debugger command (alias for <code class="code">enable</code>)</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-EBCDIC">EBCDIC</a></td><td class="printindex-index-section"><a href="#Ordinal-Functions">Ordinal Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-EBCDIC-1">EBCDIC</a></td><td class="printindex-index-section"><a href="#Ranges-and-Locales">Ranges and Locales</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-EBCDIC-2">EBCDIC</a></td><td class="printindex-index-section"><a href="#History-summary">History summary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-effective-group-ID-of-gawk-user">effective group ID of <code class="command">gawk</code> user</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-effective-user-ID-of-gawk-user">effective user ID of <code class="command">gawk</code> user</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Eggert_002c-Paul">Eggert, Paul</a></td><td class="printindex-index-section"><a href="#Interval-Expressions">Interval Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-egrep-utility"><code class="command">egrep</code> utility</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-egrep-utility-1"><code class="command">egrep</code> utility</a></td><td class="printindex-index-section"><a href="#Egrep-Program">Egrep Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-egrep_002eawk-program"><samp class="file">egrep.awk</samp> program</a></td><td class="printindex-index-section"><a href="#Egrep-Program">Egrep Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-elements-in-arrays">elements in arrays</a></td><td class="printindex-index-section"><a href="#Reference-to-Elements">Reference to Elements</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-elements-in-arrays-assigning-values">assigning values</a></td><td class="printindex-index-section"><a href="#Assigning-Elements">Assigning Elements</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-elements-in-arrays-deleting">deleting</a></td><td class="printindex-index-section"><a href="#Delete">Delete</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-elements-in-arrays-order-of-access-by-in-operator">order of access by <code class="code">in</code> operator</a></td><td class="printindex-index-section"><a href="#Scanning-an-Array">Scanning an Array</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-elements-in-arrays-scanning">scanning</a></td><td class="printindex-index-section"><a href="#Scanning-an-Array">Scanning an Array</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-email-address-for-bug-reports_002c-bug_002dgawk_0040gnu_002eorg">email address for bug reports, <a class="email" href="mailto:bug-gawk@gnu.org">bug-gawk@gnu.org</a></a></td><td class="printindex-index-section"><a href="#Bug-address">Bug address</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-empty-array-elements">empty array elements</a></td><td class="printindex-index-section"><a href="#Reference-to-Elements">Reference to Elements</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-empty-pattern">empty pattern</a></td><td class="printindex-index-section"><a href="#Empty">Empty</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-empty-regexps">empty regexps</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">empty strings, <em class="emph">See</em> null strings</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-EMRED"><code class="code">EMRED</code></a></td><td class="printindex-index-section"><a href="#TCP_002fIP-Networking">TCP/IP Networking</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-enable-breakpoint">enable breakpoint</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-enable-debugger-command"><code class="code">enable</code> debugger command</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-end-debugger-command"><code class="code">end</code> debugger command</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-END-pattern"><code class="code">END</code> pattern</a></td><td class="printindex-index-section"><a href="#BEGIN_002fEND">BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-END-pattern-1"><code class="code">END</code> pattern</a></td><td class="printindex-index-section"><a href="#Using-BEGIN_002fEND">Using BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-END-pattern-_0040namespace-directive-and"><code class="code">@namespace</code> directive and</a></td><td class="printindex-index-section"><a href="#Changing-The-Namespace">Changing The Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-END-pattern-assert_0028_0029-user_002ddefined-function-and"><code class="code">assert()</code> user-defined function and</a></td><td class="printindex-index-section"><a href="#Assert-Function">Assert Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-END-pattern-Boolean-patterns-and">Boolean patterns and</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-END-pattern-exit-statement-and"><code class="code">exit</code> statement and</a></td><td class="printindex-index-section"><a href="#Exit-Statement">Exit Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-END-pattern-next_002fnextfile-statements-and"><code class="code">next</code>/<code class="code">nextfile</code> statements and</a></td><td class="printindex-index-section"><a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-END-pattern-next_002fnextfile-statements-and-1"><code class="code">next</code>/<code class="code">nextfile</code> statements and</a></td><td class="printindex-index-section"><a href="#Next-Statement">Next Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-END-pattern-operators-and">operators and</a></td><td class="printindex-index-section"><a href="#Using-BEGIN_002fEND">Using BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-END-pattern-print-statement-and"><code class="code">print</code> statement and</a></td><td class="printindex-index-section"><a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-END-pattern-profiling-and">profiling and</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ENDFILE-pattern"><code class="code">ENDFILE</code> pattern</a></td><td class="printindex-index-section"><a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-ENDFILE-pattern-_0040namespace-directive-and"><code class="code">@namespace</code> directive and</a></td><td class="printindex-index-section"><a href="#Changing-The-Namespace">Changing The Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-ENDFILE-pattern-Boolean-patterns-and">Boolean patterns and</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-endfile_0028_0029-user_002ddefined-function"><code class="code">endfile()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Filetrans-Function">Filetrans Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-endgrent_0028_0029-function-_0028C-library_0029"><code class="code">endgrent()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-endgrent_0028_0029-user_002ddefined-function"><code class="code">endgrent()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-endpwent_0028_0029-function-_0028C-library_0029"><code class="code">endpwent()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-endpwent_0028_0029-user_002ddefined-function"><code class="code">endpwent()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-English_002c-Steve">English, Steve</a></td><td class="printindex-index-section"><a href="#Advanced-Features">Advanced Features</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ENVIRON-array"><code class="code">ENVIRON</code> array</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry">environment variables</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWK_005fHASH"><code class="env">AWK_HASH</code></a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKBUFSIZE"><code class="env">AWKBUFSIZE</code></a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKLIBPATH"><code class="env">AWKLIBPATH</code></a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKLIBPATH-1"><code class="env">AWKLIBPATH</code></a></td><td class="printindex-index-section"><a href="#AWKLIBPATH-Variable">AWKLIBPATH Variable</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKLIBPATH-2"><code class="env">AWKLIBPATH</code></a></td><td class="printindex-index-section"><a href="#Loading-Shared-Libraries">Loading Shared Libraries</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKLIBPATH-3"><code class="env">AWKLIBPATH</code></a></td><td class="printindex-index-section"><a href="#Invoking-Summary">Invoking Summary</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKLIBPATH-4"><code class="env">AWKLIBPATH</code></a></td><td class="printindex-index-section"><a href="#Creating-Arrays">Creating Arrays</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKLIBPATH-5"><code class="env">AWKLIBPATH</code></a></td><td class="printindex-index-section"><a href="#Using-Internal-File-Ops">Using Internal File Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKLIBPATH-6"><code class="env">AWKLIBPATH</code></a></td><td class="printindex-index-section"><a href="#POSIX_002fGNU">POSIX/GNU</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKLIBPATH-7"><code class="env">AWKLIBPATH</code></a></td><td class="printindex-index-section"><a href="#Distribution-contents">Distribution contents</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKLIBPATH-8"><code class="env">AWKLIBPATH</code></a></td><td class="printindex-index-section"><a href="#Shell-Startup-Files">Shell Startup Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKPATH"><code class="env">AWKPATH</code></a></td><td class="printindex-index-section"><a href="#AWKPATH-Variable">AWKPATH Variable</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKPATH-1"><code class="env">AWKPATH</code></a></td><td class="printindex-index-section"><a href="#Include-Files">Include Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKPATH-2"><code class="env">AWKPATH</code></a></td><td class="printindex-index-section"><a href="#Invoking-Summary">Invoking Summary</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKPATH-3"><code class="env">AWKPATH</code></a></td><td class="printindex-index-section"><a href="#Igawk-Program">Igawk Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKPATH-4"><code class="env">AWKPATH</code></a></td><td class="printindex-index-section"><a href="#Igawk-Program">Igawk Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKPATH-5"><code class="env">AWKPATH</code></a></td><td class="printindex-index-section"><a href="#Debugger-Invocation">Debugger Invocation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKPATH-6"><code class="env">AWKPATH</code></a></td><td class="printindex-index-section"><a href="#POSIX_002fGNU">POSIX/GNU</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKPATH-7"><code class="env">AWKPATH</code></a></td><td class="printindex-index-section"><a href="#Feature-History">Feature History</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKPATH-8"><code class="env">AWKPATH</code></a></td><td class="printindex-index-section"><a href="#Distribution-contents">Distribution contents</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKPATH-9"><code class="env">AWKPATH</code></a></td><td class="printindex-index-section"><a href="#Shell-Startup-Files">Shell Startup Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKPATH-10"><code class="env">AWKPATH</code></a></td><td class="printindex-index-section"><a href="#PC-Using">PC Using</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKPATH-11"><code class="env">AWKPATH</code></a></td><td class="printindex-index-section"><a href="#OpenVMS-Running">OpenVMS Running</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-AWKREADFUNC"><code class="env">AWKREADFUNC</code></a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-GAWK_005fLOCALE_005fDIR"><code class="env">GAWK_LOCALE_DIR</code></a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-GAWK_005fLOCALE_005fDIR-1"><code class="env">GAWK_LOCALE_DIR</code></a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-GAWK_005fMSEC_005fSLEEP"><code class="env">GAWK_MSEC_SLEEP</code></a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-GAWK_005fMSG_005fSRC"><code class="env">GAWK_MSG_SRC</code></a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-GAWK_005fNO_005fDFA"><code class="env">GAWK_NO_DFA</code></a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-GAWK_005fPERSIST_005fFILE"><code class="env">GAWK_PERSIST_FILE</code></a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-GAWK_005fPERSIST_005fFILE-1"><code class="env">GAWK_PERSIST_FILE</code></a></td><td class="printindex-index-section"><a href="#Persistent-Memory">Persistent Memory</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-GAWK_005fREAD_005fTIMEOUT"><code class="env">GAWK_READ_TIMEOUT</code></a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-GAWK_005fREAD_005fTIMEOUT-1"><code class="env">GAWK_READ_TIMEOUT</code></a></td><td class="printindex-index-section"><a href="#Read-Timeout">Read Timeout</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-GAWK_005fSOCK_005fRETRIES"><code class="env">GAWK_SOCK_RETRIES</code></a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-GAWK_005fSOCK_005fRETRIES-1"><code class="env">GAWK_SOCK_RETRIES</code></a></td><td class="printindex-index-section"><a href="#Nonfatal">Nonfatal</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-GAWK_005fSTACKSIZE"><code class="env">GAWK_STACKSIZE</code></a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-in-ENVIRON-array">in <code class="code">ENVIRON</code> array</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-INT_005fCHAIN_005fMAX"><code class="env">INT_CHAIN_MAX</code></a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-LANG"><code class="env">LANG</code></a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-LANGUAGE"><code class="env">LANGUAGE</code></a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-LANGUAGE-1"><code class="env">LANGUAGE</code></a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-LC_005fALL"><code class="env">LC_ALL</code></a></td><td class="printindex-index-section"><a href="#Split-Program">Split Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-LC_005fALL-1"><code class="env">LC_ALL</code></a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-LC_005fALL-2"><code class="env">LC_ALL</code></a></td><td class="printindex-index-section"><a href="#Bug-address">Bug address</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-LC_005fMESSAGES"><code class="env">LC_MESSAGES</code></a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-Path"><code class="env">Path</code></a></td><td class="printindex-index-section"><a href="#PC-Binary-Installation">PC Binary Installation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-PATH"><code class="env">PATH</code></a></td><td class="printindex-index-section"><a href="#Derived-Files">Derived Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-PMA_005fVERBOSITY"><code class="env">PMA_VERBOSITY</code></a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-PMA_005fVERBOSITY-1"><code class="env">PMA_VERBOSITY</code></a></td><td class="printindex-index-section"><a href="#Persistent-Memory">Persistent Memory</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-POSIXLY_005fCORRECT"><code class="env">POSIXLY_CORRECT</code></a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-POSIXLY_005fCORRECT-1"><code class="env">POSIXLY_CORRECT</code></a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-POSIXLY_005fCORRECT-2"><code class="env">POSIXLY_CORRECT</code></a></td><td class="printindex-index-section"><a href="#Invoking-Summary">Invoking Summary</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-POSIXLY_005fCORRECT-3"><code class="env">POSIXLY_CORRECT</code></a></td><td class="printindex-index-section"><a href="#Locale-influences-conversions">Locale influences conversions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-REALLY_005fUSE_005fPERSIST_005fMALLOC"><code class="env">REALLY_USE_PERSIST_MALLOC</code></a></td><td class="printindex-index-section"><a href="#Persistent-Memory">Persistent Memory</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-STR_005fCHAIN_005fMAX"><code class="env">STR_CHAIN_MAX</code></a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-TIDYMEM"><code class="env">TIDYMEM</code></a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-TZ"><code class="env">TZ</code></a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-environment-variables-used-by-gawk">used by <code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Environment-Variables">Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-environment_002c-definition-of">environment, definition of</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-epoch_002c-definition-of">epoch, definition of</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry">equals sign (<code class="code">=</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-equals-sign-_0028_003d_0029-_003d-operator"><code class="code">=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-equals-sign-_0028_003d_0029-_003d_003d-operator"><code class="code">==</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-equals-sign-_0028_003d_0029-_003d_003d-operator-1"><code class="code">==</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-EREs-_0028Extended-Regular-Expressions_0029">EREs (Extended Regular Expressions)</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ERRNO-variable"><code class="code">ERRNO</code> variable</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ERRNO-variable-1"><code class="code">ERRNO</code> variable</a></td><td class="printindex-index-section"><a href="#TCP_002fIP-Networking">TCP/IP Networking</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-ERRNO-variable-with-BEGINFILE-pattern">with <code class="code">BEGINFILE</code> pattern</a></td><td class="printindex-index-section"><a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-ERRNO-variable-with-close_0028_0029-function">with <code class="command">close()</code> function</a></td><td class="printindex-index-section"><a href="#Close-Return-Value">Close Return Value</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-ERRNO-variable-with-getline-command">with <code class="command">getline</code> command</a></td><td class="printindex-index-section"><a href="#Getline">Getline</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-error-handling">error handling</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-error-handling-ERRNO-variable-and"><code class="code">ERRNO</code> variable and</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-error-output">error output</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry">escape processing</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-escape-processing-gsub_0028_0029_002fgensub_0028_0029_002fsub_0028_0029-functions"><code class="code">gsub()</code>/<code class="code">gensub()</code>/<code class="code">sub()</code> functions</a></td><td class="printindex-index-section"><a href="#Gory-Details">Gory Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-escape-sequences">escape sequences</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry">escape sequences</td><td class="printindex-index-see-also"><em class="emph">See also</em> backslash</td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-eval-debugger-command"><code class="code">eval</code> debugger command</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-evaluate-expressions_002c-in-debugger">evaluate expressions, in debugger</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-evaluation-order">evaluation order</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-evaluation-order-concatenation">concatenation</a></td><td class="printindex-index-section"><a href="#Concatenation">Concatenation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-evaluation-order-functions">functions</a></td><td class="printindex-index-section"><a href="#Calling-Built_002din">Calling Built-in</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-examining-fields">examining fields</a></td><td class="printindex-index-section"><a href="#Fields">Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-example-debugging-session">example debugging session</a></td><td class="printindex-index-section"><a href="#Sample-Debugging-Session">Sample Debugging Session</a></td></tr>
<tr><td></td><td class="printindex-index-entry">exclamation point (<code class="code">!</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-exclamation-point-_0028_0021_0029-_0021-operator"><code class="code">!</code> operator</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-exclamation-point-_0028_0021_0029-_0021-operator-1"><code class="code">!</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-exclamation-point-_0028_0021_0029-_0021-operator-2"><code class="code">!</code> operator</a></td><td class="printindex-index-section"><a href="#Egrep-Program">Egrep Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-exclamation-point-_0028_0021_0029-_0021_003d-operator"><code class="code">!=</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-exclamation-point-_0028_0021_0029-_0021_003d-operator-1"><code class="code">!=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-exclamation-point-_0028_0021_0029-_0021_007e-operator"><code class="code">!~</code> operator</a></td><td class="printindex-index-section"><a href="#Regexp-Usage">Regexp Usage</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-exclamation-point-_0028_0021_0029-_0021_007e-operator-1"><code class="code">!~</code> operator</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-exclamation-point-_0028_0021_0029-_0021_007e-operator-2"><code class="code">!~</code> operator</a></td><td class="printindex-index-section"><a href="#Case_002dsensitivity">Case-sensitivity</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-exclamation-point-_0028_0021_0029-_0021_007e-operator-3"><code class="code">!~</code> operator</a></td><td class="printindex-index-section"><a href="#Regexp-Constants">Regexp Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-exclamation-point-_0028_0021_0029-_0021_007e-operator-4"><code class="code">!~</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-exclamation-point-_0028_0021_0029-_0021_007e-operator-5"><code class="code">!~</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-exclamation-point-_0028_0021_0029-_0021_007e-operator-6"><code class="code">!~</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-exclamation-point-_0028_0021_0029-_0021_007e-operator-7"><code class="code">!~</code> operator</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-exit-debugger-command"><code class="code">exit</code> debugger command</a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-exit-statement"><code class="code">exit</code> statement</a></td><td class="printindex-index-section"><a href="#Exit-Statement">Exit Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-exit-status_002c-of-gawk">exit status, of <code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Exit-Status">Exit Status</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-exit-status_002c-of-gawk-on-OpenVMS">on OpenVMS</a></td><td class="printindex-index-section"><a href="#OpenVMS-Running">OpenVMS Running</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-exit-the-debugger">exit the debugger</a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-exit-the-debugger-1">exit the debugger</a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-exp_0028_0029-function"><code class="code">exp()</code> function</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-expand-utility"><code class="command">expand</code> utility</a></td><td class="printindex-index-section"><a href="#Very-Simple">Very Simple</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Expat-XML-parser-library">Expat XML parser library</a></td><td class="printindex-index-section"><a href="#gawkextlib">gawkextlib</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-exponent">exponent</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-expressions">expressions</a></td><td class="printindex-index-section"><a href="#Expressions">Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-expressions-as-patterns">as patterns</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-expressions-assignment">assignment</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-expressions-Boolean">Boolean</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-expressions-comparison">comparison</a></td><td class="printindex-index-section"><a href="#Typing-and-Comparison">Typing and Comparison</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-expressions-conditional">conditional</a></td><td class="printindex-index-section"><a href="#Conditional-Exp">Conditional Exp</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-expressions-selecting">selecting</a></td><td class="printindex-index-section"><a href="#Conditional-Exp">Conditional Exp</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">expressions, matching, <em class="emph">See</em> comparison expressions</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Extended-Regular-Expressions-_0028EREs_0029">Extended Regular Expressions (EREs)</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-extension-API">extension API</a></td><td class="printindex-index-section"><a href="#Extension-API-Description">Extension API Description</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-extension-API-informational-variables">informational variables</a></td><td class="printindex-index-section"><a href="#Extension-API-Informational-Variables">Extension API Informational Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-extension-API-interaction-with-namespaces">interaction with namespaces</a></td><td class="printindex-index-section"><a href="#Namespace-And-Features">Namespace And Features</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-extension-API-version-number">version number</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-extension-API-version-number-1">version number</a></td><td class="printindex-index-section"><a href="#Extension-Versioning">Extension Versioning</a></td></tr>
<tr><td></td><td class="printindex-index-entry">extensions</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-extensions-Brian-Kernighan_0027s-awk">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#BTL">BTL</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-extensions-Brian-Kernighan_0027s-awk-1">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Common-Extensions">Common Extensions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">common</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-common-_002a_002a-operator"><code class="code">**</code> operator</a></td><td class="printindex-index-section"><a href="#Arithmetic-Ops">Arithmetic Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-common-_002a_002a_003d-operator"><code class="code">**=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-common-_002fdev_002fstderr-special-file"><code class="code">/dev/stderr</code> special file</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-common-_002fdev_002fstdin-special-file"><code class="code">/dev/stdin</code> special file</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-common-_002fdev_002fstdout-special-file"><code class="code">/dev/stdout</code> special file</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-common-_005cu-escape-sequence"><code class="code">\u</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-common-_005cx-escape-sequence"><code class="code">\x</code> escape sequence</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-common-BINMODE-variable"><code class="code">BINMODE</code> variable</a></td><td class="printindex-index-section"><a href="#PC-Using">PC Using</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-common-delete-to-delete-entire-arrays"><code class="code">delete</code> to delete entire arrays</a></td><td class="printindex-index-section"><a href="#Delete">Delete</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-common-fflush_0028_0029-function"><code class="code">fflush()</code> function</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-common-func-keyword"><code class="code">func</code> keyword</a></td><td class="printindex-index-section"><a href="#Definition-Syntax">Definition Syntax</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-common-length_0028_0029-applied-to-an-array"><code class="code">length()</code> applied to an array</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-common-RS-as-a-regexp"><code class="code">RS</code> as a regexp</a></td><td class="printindex-index-section"><a href="#gawk-split-records">gawk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-common-single-character-fields">single character fields</a></td><td class="printindex-index-section"><a href="#Single-Character-Fields">Single Character Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-extensions-in-gawk_002c-not-in-POSIX-awk">in <code class="command">gawk</code>, not in POSIX <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#POSIX_002fGNU">POSIX/GNU</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">loadable</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-loadable-allocating-memory">allocating memory</a></td><td class="printindex-index-section"><a href="#Memory-Allocation-Functions">Memory Allocation Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-loadable-array-manipulation-in">array manipulation in</a></td><td class="printindex-index-section"><a href="#Array-Manipulation">Array Manipulation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-loadable-distributed-with-gawk">distributed with <code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Extension-Samples">Extension Samples</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-loadable-example">example</a></td><td class="printindex-index-section"><a href="#Extension-Example">Extension Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-loadable-gawkextlib-project"><code class="code">gawkextlib</code> project</a></td><td class="printindex-index-section"><a href="#gawkextlib">gawkextlib</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-loadable-loading_002c-_0040load-directive">loading, <code class="code">@load</code> directive</a></td><td class="printindex-index-section"><a href="#Loading-Shared-Libraries">Loading Shared Libraries</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-loadable-registration">registration</a></td><td class="printindex-index-section"><a href="#Registration-Functions">Registration Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-extensions-loadable-search-path">search path</a></td><td class="printindex-index-section"><a href="#Finding-Extensions">Finding Extensions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-extensions-mawk"><code class="command">mawk</code></a></td><td class="printindex-index-section"><a href="#Common-Extensions">Common Extensions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-extract_002eawk-program"><samp class="file">extract.awk</samp> program</a></td><td class="printindex-index-section"><a href="#Extract-Program">Extract Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-extraction_002c-of-marked-strings-_0028internationalization_0029">extraction, of marked strings (internationalization)</a></td><td class="printindex-index-section"><a href="#String-Extraction">String Extraction</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-F">F</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-f-debugger-command-_0028alias-for-frame_0029"><code class="code">f</code> debugger command (alias for <code class="code">frame</code>)</a></td><td class="printindex-index-section"><a href="#Execution-Stack">Execution Stack</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-false_002c-logical">false, logical</a></td><td class="printindex-index-section"><a href="#Truth-Values">Truth Values</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FDL-_0028Free-Documentation-License_0029">FDL (Free Documentation License)</a></td><td class="printindex-index-section"><a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a></td></tr>
<tr><td></td><td class="printindex-index-entry">features</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-features-adding-to-gawk">adding to <code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Adding-Code">Adding Code</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-features-deprecated">deprecated</a></td><td class="printindex-index-section"><a href="#Obsolete">Obsolete</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-features-undocumented">undocumented</a></td><td class="printindex-index-section"><a href="#Undocumented">Undocumented</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Fenlason_002c-Jay">Fenlason, Jay</a></td><td class="printindex-index-section"><a href="#History">History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Fenlason_002c-Jay-1">Fenlason, Jay</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-fflush_0028_0029-function"><code class="code">fflush()</code> function</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-field-numbers">field numbers</a></td><td class="printindex-index-section"><a href="#Nonconstant-Fields">Nonconstant Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-field-operator-_0024">field operator <code class="code">$</code></a></td><td class="printindex-index-section"><a href="#Fields">Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-field-operators_002c-dollar-sign-as">field operators, dollar sign as</a></td><td class="printindex-index-section"><a href="#Fields">Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry">field separator</td><td class="printindex-index-see-also"><em class="emph">See also</em> <code class="code">OFS</code></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-field-separator">field separator</a></td><td class="printindex-index-section"><a href="#Field-Separators">Field Separators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-field-separator-1">field separator</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-field-separator-2">field separator</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-field-separator-backslash-_0028_005c_0029-as">backslash (<code class="code">\</code>) as</a></td><td class="printindex-index-section"><a href="#Command-Line-Field-Separator">Command Line Field Separator</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-field-separator-choice-of">choice of</a></td><td class="printindex-index-section"><a href="#Field-Separators">Field Separators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-field-separator-FIELDWIDTHS-variable-and"><code class="code">FIELDWIDTHS</code> variable and</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-field-separator-FPAT-variable-and"><code class="code">FPAT</code> variable and</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-field-separator-FS-variable-and"><code class="code">FS</code> variable and</a></td><td class="printindex-index-section"><a href="#Default-Field-Splitting">Default Field Splitting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-field-separator-in-multiline-records">in multiline records</a></td><td class="printindex-index-section"><a href="#Multiple-Line">Multiple Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-field-separator-on-command-line">on command line</a></td><td class="printindex-index-section"><a href="#Command-Line-Field-Separator">Command Line Field Separator</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-field-separator-POSIX-and">POSIX and</a></td><td class="printindex-index-section"><a href="#Full-Line-Fields">Full Line Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-field-separator-regular-expression-as">regular expression as</a></td><td class="printindex-index-section"><a href="#Field-Separators">Field Separators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-field-separator-regular-expression-as-1">regular expression as</a></td><td class="printindex-index-section"><a href="#Regexp-Field-Splitting">Regexp Field Splitting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-field-separator-spaces-as">spaces as</a></td><td class="printindex-index-section"><a href="#Cut-Program">Cut Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-field-separator-whitespace-as">whitespace as</a></td><td class="printindex-index-section"><a href="#Default-Field-Splitting">Default Field Splitting</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-fields">fields</a></td><td class="printindex-index-section"><a href="#Reading-Files">Reading Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-fields-1">fields</a></td><td class="printindex-index-section"><a href="#Fields">Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-fields-2">fields</a></td><td class="printindex-index-section"><a href="#Basic-High-Level">Basic High Level</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-fields-adding">adding</a></td><td class="printindex-index-section"><a href="#Changing-Fields">Changing Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-fields-changing-contents-of">changing contents of</a></td><td class="printindex-index-section"><a href="#Changing-Fields">Changing Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-fields-cutting">cutting</a></td><td class="printindex-index-section"><a href="#Cut-Program">Cut Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-fields-examining">examining</a></td><td class="printindex-index-section"><a href="#Fields">Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-fields-number-of">number of</a></td><td class="printindex-index-section"><a href="#Fields">Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-fields-numbers">numbers</a></td><td class="printindex-index-section"><a href="#Nonconstant-Fields">Nonconstant Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-fields-printing">printing</a></td><td class="printindex-index-section"><a href="#Print-Examples">Print Examples</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-fields-separating">separating</a></td><td class="printindex-index-section"><a href="#Field-Separators">Field Separators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-fields-separating-1">separating</a></td><td class="printindex-index-section"><a href="#Field-Separators">Field Separators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-fields-single_002dcharacter">single-character</a></td><td class="printindex-index-section"><a href="#Single-Character-Fields">Single Character Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FIELDWIDTHS-variable"><code class="code">FIELDWIDTHS</code> variable</a></td><td class="printindex-index-section"><a href="#Fixed-width-data">Fixed width data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FIELDWIDTHS-variable-1"><code class="code">FIELDWIDTHS</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-file-descriptors">file descriptors</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-file-inclusion_002c-_0040include-directive">file inclusion, <code class="code">@include</code> directive</a></td><td class="printindex-index-section"><a href="#Include-Files">Include Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry">file names</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-file-names-assignments-as">assignments as</a></td><td class="printindex-index-section"><a href="#Ignoring-Assigns">Ignoring Assigns</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-file-names-distinguishing">distinguishing</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-file-names-in-compatibility-mode">in compatibility mode</a></td><td class="printindex-index-section"><a href="#Special-Caveats">Special Caveats</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-file-names-standard-streams-in-gawk">standard streams in <code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FILENAME-variable"><code class="code">FILENAME</code> variable</a></td><td class="printindex-index-section"><a href="#Reading-Files">Reading Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FILENAME-variable-1"><code class="code">FILENAME</code> variable</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-FILENAME-variable-getline_002c-setting-with"><code class="code">getline</code>, setting with</a></td><td class="printindex-index-section"><a href="#Getline-Notes">Getline Notes</a></td></tr>
<tr><td></td><td class="printindex-index-entry">files</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-_002egmo"><code class="code">.gmo</code></a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-files-_002egmo-specifying-directory-of">specifying directory of</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-files-_002egmo-specifying-directory-of-1">specifying directory of</a></td><td class="printindex-index-section"><a href="#Programmer-i18n">Programmer i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-_002emo_002c-converting-from-_002epo"><code class="code">.mo</code>, converting from <code class="code">.po</code></a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-_002epo"><code class="code">.po</code></a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-_002epo-1"><code class="code">.po</code></a></td><td class="printindex-index-section"><a href="#Translator-i18n">Translator i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-files-_002epo-converting-to-_002emo">converting to <code class="code">.mo</code></a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-_002epot"><code class="code">.pot</code></a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-_002fdev_002f_2026-special-files"><code class="code">/dev/&hellip;</code> special files</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-_002finet_002f_2026-_0028gawk_0029"><code class="code">/inet/&hellip;</code> (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#TCP_002fIP-Networking">TCP/IP Networking</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-_002finet4_002f_2026-_0028gawk_0029"><code class="code">/inet4/&hellip;</code> (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#TCP_002fIP-Networking">TCP/IP Networking</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-_002finet6_002f_2026-_0028gawk_0029"><code class="code">/inet6/&hellip;</code> (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#TCP_002fIP-Networking">TCP/IP Networking</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-awk-programs-in"><code class="command">awk</code> programs in</a></td><td class="printindex-index-section"><a href="#Long">Long</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-awkprof_002eout"><code class="code">awkprof.out</code></a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-awkvars_002eout"><samp class="file">awkvars.out</samp></a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-closing">closing</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-descriptors">descriptors</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-group">group</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-initialization-and-cleanup">initialization and cleanup</a></td><td class="printindex-index-section"><a href="#Filetrans-Function">Filetrans Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-input">input</a></td><td class="printindex-index-section"><a href="#Read-Terminal">Read Terminal</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-log_002c-timestamps-in">log, timestamps in</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-managing">managing</a></td><td class="printindex-index-section"><a href="#Data-File-Management">Data File Management</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-files-managing-data-file-boundaries">data file boundaries</a></td><td class="printindex-index-section"><a href="#Filetrans-Function">Filetrans Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-message-object">message object</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-files-message-object-converting-from-portable-object-files">converting from portable object files</a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-files-message-object-specifying-directory-of">specifying directory of</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-files-message-object-specifying-directory-of-1">specifying directory of</a></td><td class="printindex-index-section"><a href="#Programmer-i18n">Programmer i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-multiple-passes-over">multiple passes over</a></td><td class="printindex-index-section"><a href="#Other-Arguments">Other Arguments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-multiple_002c-duplicating-output-into">multiple, duplicating output into</a></td><td class="printindex-index-section"><a href="#Tee-Program">Tee Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-output">output</a></td><td class="printindex-index-section"><a href="#Close-Files-And-Pipes">Close Files And Pipes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-password">password</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-portable-object">portable object</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-portable-object-1">portable object</a></td><td class="printindex-index-section"><a href="#Translator-i18n">Translator i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-files-portable-object-converting-to-message-object-files">converting to message object files</a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-files-portable-object-generating">generating</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-files-portable-object-template-file-_0028_002epot_0029">template file (<samp class="file">.pot</samp>)</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-processing_002c-ARGIND-variable-and">processing, <code class="code">ARGIND</code> variable and</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-reading">reading</a></td><td class="printindex-index-section"><a href="#Rewind-Function">Rewind Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-files-reading-multiline-records">multiline records</a></td><td class="printindex-index-section"><a href="#Multiple-Line">Multiple Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-searching-for-regular-expressions">searching for regular expressions</a></td><td class="printindex-index-section"><a href="#Egrep-Program">Egrep Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-skipping">skipping</a></td><td class="printindex-index-section"><a href="#File-Checking">File Checking</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-source_002c-search-path-for">source, search path for</a></td><td class="printindex-index-section"><a href="#Programs-Exercises">Programs Exercises</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-splitting">splitting</a></td><td class="printindex-index-section"><a href="#Split-Program">Split Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-files-Texinfo_002c-extracting-programs-from">Texinfo, extracting programs from</a></td><td class="printindex-index-section"><a href="#Extract-Program">Extract Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-find-substring-in-string">find substring in string</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-finding-extensions">finding extensions</a></td><td class="printindex-index-section"><a href="#Finding-Extensions">Finding Extensions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-finish-debugger-command"><code class="code">finish</code> debugger command</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Fish_002c-Fred">Fish, Fred</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-fixed_002dwidth-data">fixed-width data</a></td><td class="printindex-index-section"><a href="#Constant-Size">Constant Size</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-flag-variables">flag variables</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-flag-variables-1">flag variables</a></td><td class="printindex-index-section"><a href="#Tee-Program">Tee Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry">floating-point</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-floating_002dpoint-numbers">numbers</a></td><td class="printindex-index-section"><a href="#Computer-Arithmetic">Computer Arithmetic</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-floating_002dpoint-numbers-arbitrary_002dprecision">arbitrary-precision</a></td><td class="printindex-index-section"><a href="#Arbitrary-Precision-Arithmetic">Arbitrary Precision Arithmetic</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-floating_002dpoint-numbers-arbitrary_002dprecision-1">arbitrary-precision</a></td><td class="printindex-index-section"><a href="#Computer-Arithmetic">Computer Arithmetic</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-floating_002dpoint-numbers-double_002dprecision">double-precision</a></td><td class="printindex-index-section"><a href="#Computer-Arithmetic">Computer Arithmetic</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-floating_002dpoint-numbers-single_002dprecision">single-precision</a></td><td class="printindex-index-section"><a href="#Computer-Arithmetic">Computer Arithmetic</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-flush-buffered-output">flush buffered output</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-fnmatch_0028_0029-extension-function"><code class="code">fnmatch()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Fnmatch">Extension Sample Fnmatch</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FNR-variable"><code class="code">FNR</code> variable</a></td><td class="printindex-index-section"><a href="#Records">Records</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FNR-variable-1"><code class="code">FNR</code> variable</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-FNR-variable-changing">changing</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-for-statement"><code class="code">for</code> statement</a></td><td class="printindex-index-section"><a href="#For-Statement">For Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-for-statement-looping-over-arrays">looping over arrays</a></td><td class="printindex-index-section"><a href="#Scanning-an-Array">Scanning an Array</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-fork_0028_0029-extension-function"><code class="code">fork()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Fork">Extension Sample Fork</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-format-specifiers">format specifiers</a></td><td class="printindex-index-section"><a href="#Basic-Printf">Basic Printf</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-format-specifiers-mixing-regular-with-positional-specifiers">mixing regular with positional specifiers</a></td><td class="printindex-index-section"><a href="#Printf-Ordering">Printf Ordering</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-format-specifiers-printf-statement"><code class="code">printf</code> statement</a></td><td class="printindex-index-section"><a href="#Control-Letters">Control Letters</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-format-specifiers-strftime_0028_0029-function-_0028gawk_0029"><code class="code">strftime()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-format-time-string">format time string</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-formats_002c-numeric-output">formats, numeric output</a></td><td class="printindex-index-section"><a href="#OFMT">OFMT</a></td></tr>
<tr><td></td><td class="printindex-index-entry">formatting</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-formatting-output">output</a></td><td class="printindex-index-section"><a href="#Printf">Printf</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-formatting-strings">strings</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">forward slash (<code class="code">/</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-forward-slash-_0028_002f_0029-_002f-operator"><code class="code">/</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-forward-slash-_0028_002f_0029-_002f_003d-operator"><code class="code">/=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-forward-slash-_0028_002f_0029-_002f_003d-operator-1"><code class="code">/=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-forward-slash-_0028_002f_0029-_002f_003d-operator-vs_002e-_002f_003d_2026_002f-regexp-constant">vs. <code class="code">/=&hellip;/</code> regexp constant</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-forward-slash-_0028_002f_0029-patterns-and">patterns and</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-forward-slash-_0028_002f_0029-to-enclose-regular-expressions">to enclose regular expressions</a></td><td class="printindex-index-section"><a href="#Regexp">Regexp</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FPAT-variable"><code class="code">FPAT</code> variable</a></td><td class="printindex-index-section"><a href="#Splitting-By-Content">Splitting By Content</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FPAT-variable-1"><code class="code">FPAT</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-frame-debugger-command"><code class="code">frame</code> debugger command</a></td><td class="printindex-index-section"><a href="#Execution-Stack">Execution Stack</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-frawk"><code class="command">frawk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Free-Documentation-License-_0028FDL_0029">Free Documentation License (FDL)</a></td><td class="printindex-index-section"><a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Free-Software-Foundation-_0028FSF_0029">Free Software Foundation (FSF)</a></td><td class="printindex-index-section"><a href="#Manual-History">Manual History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Free-Software-Foundation-_0028FSF_0029-1">Free Software Foundation (FSF)</a></td><td class="printindex-index-section"><a href="#Getting">Getting</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Free-Software-Foundation-_0028FSF_0029-2">Free Software Foundation (FSF)</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Free-Software-Foundation-_0028FSF_0029-3">Free Software Foundation (FSF)</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FreeBSD">FreeBSD</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FS-variable"><code class="code">FS</code> variable</a></td><td class="printindex-index-section"><a href="#Field-Separators">Field Separators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FS-variable-1"><code class="code">FS</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-FS-variable-_002d_002dfield_002dseparator-option-and"><samp class="option">--field-separator</samp> option and</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-FS-variable-changing-value-of">changing value of</a></td><td class="printindex-index-section"><a href="#Field-Separators">Field Separators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-FS-variable-containing-_005e">containing <code class="code">^</code></a></td><td class="printindex-index-section"><a href="#Regexp-Field-Splitting">Regexp Field Splitting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-FS-variable-in-multiline-records">in multiline records</a></td><td class="printindex-index-section"><a href="#Multiple-Line">Multiple Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-FS-variable-null-string-as">null string as</a></td><td class="printindex-index-section"><a href="#Single-Character-Fields">Single Character Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-FS-variable-running-awk-programs-and">running <code class="command">awk</code> programs and</a></td><td class="printindex-index-section"><a href="#Cut-Program">Cut Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-FS-variable-setting-from-command-line">setting from command line</a></td><td class="printindex-index-section"><a href="#Command-Line-Field-Separator">Command Line Field Separator</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-FS-variable-TAB-character-as">TAB character as</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FSF-_0028Free-Software-Foundation_0029">FSF (Free Software Foundation)</a></td><td class="printindex-index-section"><a href="#Manual-History">Manual History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FSF-_0028Free-Software-Foundation_0029-1">FSF (Free Software Foundation)</a></td><td class="printindex-index-section"><a href="#Getting">Getting</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FSF-_0028Free-Software-Foundation_0029-2">FSF (Free Software Foundation)</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FSF-_0028Free-Software-Foundation_0029-3">FSF (Free Software Foundation)</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-fts_0028_0029-extension-function"><code class="code">fts()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-File-Functions">Extension Sample File Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-FUNCTAB-array"><code class="code">FUNCTAB</code> array</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-function-arguments_002c-show-in-debugger">function arguments, show in debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-function-calls">function calls</a></td><td class="printindex-index-section"><a href="#Function-Calls">Function Calls</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-function-calls-indirect">indirect</a></td><td class="printindex-index-section"><a href="#Indirect-Calls">Indirect Calls</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-function-calls-indirect-_0040_002dnotation-for"><code class="code">@</code>-notation for</a></td><td class="printindex-index-section"><a href="#Indirect-Calls">Indirect Calls</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-function-definition-example">function definition example</a></td><td class="printindex-index-section"><a href="#Function-Example">Function Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-function-definitions_002c-list-in-debugger">function definitions, list in debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-function-pointers">function pointers</a></td><td class="printindex-index-section"><a href="#Indirect-Calls">Indirect Calls</a></td></tr>
<tr><td></td><td class="printindex-index-entry">functions</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-functions-arrays-as-parameters-to">arrays as parameters to</a></td><td class="printindex-index-section"><a href="#Pass-By-Value_002fReference">Pass By Value/Reference</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-functions-built_002din">built-in</a></td><td class="printindex-index-section"><a href="#Function-Calls">Function Calls</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-functions-built_002din-1">built-in</a></td><td class="printindex-index-section"><a href="#Functions">Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-built_002din-evaluation-order">evaluation order</a></td><td class="printindex-index-section"><a href="#Calling-Built_002din">Calling Built-in</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-functions-defining">defining</a></td><td class="printindex-index-section"><a href="#Definition-Syntax">Definition Syntax</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-functions-library">library</a></td><td class="printindex-index-section"><a href="#Library-Functions">Library Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-library-assertions">assertions</a></td><td class="printindex-index-section"><a href="#Assert-Function">Assert Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-library-associative-arrays-and">associative arrays and</a></td><td class="printindex-index-section"><a href="#Library-Names">Library Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-library-C-library">C library</a></td><td class="printindex-index-section"><a href="#Getopt-Function">Getopt Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-library-character-values-as-numbers">character values as numbers</a></td><td class="printindex-index-section"><a href="#Ordinal-Functions">Ordinal Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-library-Cliff-random-numbers">Cliff random numbers</a></td><td class="printindex-index-section"><a href="#Cliff-Random-Function">Cliff Random Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-library-command_002dline-options">command-line options</a></td><td class="printindex-index-section"><a href="#Getopt-Function">Getopt Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-library-example-program-for-using">example program for using</a></td><td class="printindex-index-section"><a href="#Igawk-Program">Igawk Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-library-group-database_002c-reading">group database, reading</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-library-managing-data-files">managing data files</a></td><td class="printindex-index-section"><a href="#Data-File-Management">Data File Management</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-library-managing-time">managing time</a></td><td class="printindex-index-section"><a href="#Getlocaltime-Function">Getlocaltime Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-library-merging-arrays-into-strings">merging arrays into strings</a></td><td class="printindex-index-section"><a href="#Join-Function">Join Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-library-rounding-numbers">rounding numbers</a></td><td class="printindex-index-section"><a href="#Round-Function">Round Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-library-user-database_002c-reading">user database, reading</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-functions-names-of">names of</a></td><td class="printindex-index-section"><a href="#Definition-Syntax">Definition Syntax</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-functions-recursive">recursive</a></td><td class="printindex-index-section"><a href="#Definition-Syntax">Definition Syntax</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-functions-string_002dtranslation">string-translation</a></td><td class="printindex-index-section"><a href="#I18N-Functions">I18N Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-functions-undefined">undefined</a></td><td class="printindex-index-section"><a href="#Function-Caveats">Function Caveats</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-functions-user_002ddefined">user-defined</a></td><td class="printindex-index-section"><a href="#User_002ddefined">User-defined</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-user_002ddefined-calling">calling</a></td><td class="printindex-index-section"><a href="#Function-Calling">Function Calling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-user_002ddefined-counts_002c-in-a-profile">counts, in a profile</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-user_002ddefined-library-of">library of</a></td><td class="printindex-index-section"><a href="#Library-Functions">Library Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-user_002ddefined-next_002fnextfile-statements-and"><code class="code">next</code>/<code class="code">nextfile</code> statements and</a></td><td class="printindex-index-section"><a href="#Next-Statement">Next Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-functions-user_002ddefined-next_002fnextfile-statements-and-1"><code class="code">next</code>/<code class="code">nextfile</code> statements and</a></td><td class="printindex-index-section"><a href="#Nextfile-Statement">Nextfile Statement</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-G">G</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-G_002dd">G-d</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-G_002e_002c-Daniel-Richard">G., Daniel Richard</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-G_002e_002c-Daniel-Richard-1">G., Daniel Richard</a></td><td class="printindex-index-section"><a href="#Maintainers">Maintainers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Garfinkle_002c-Scott">Garfinkle, Scott</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-gawk"><code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Preface">Preface</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><code class="command">gawk</code></td><td class="printindex-index-see-also"><em class="emph">See also</em> <code class="command">awk</code></td></tr>
<tr><td></td><td class="printindex-index-entry"><code class="command">gawk</code></td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-ARGIND-variable-in"><code class="code">ARGIND</code> variable in</a></td><td class="printindex-index-section"><a href="#Other-Arguments">Other Arguments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-awk-and"><code class="command">awk</code> and</a></td><td class="printindex-index-section"><a href="#Preface">Preface</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-awk-and-1"><code class="command">awk</code> and</a></td><td class="printindex-index-section"><a href="#This-Manual">This Manual</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-bitwise-operations-in">bitwise operations in</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-break-statement-in"><code class="code">break</code> statement in</a></td><td class="printindex-index-section"><a href="#Break-Statement">Break Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-character-classes-and">character classes and</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-coding-style-in">coding style in</a></td><td class="printindex-index-section"><a href="#Adding-Code">Adding Code</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-command_002dline-options_002c-regular-expressions-and">command-line options, regular expressions and</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-configuring">configuring</a></td><td class="printindex-index-section"><a href="#Configuration-Philosophy">Configuration Philosophy</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-gawk-configuring-options">options</a></td><td class="printindex-index-section"><a href="#Additional-Configuration-Options">Additional Configuration Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-continue-statement-in"><code class="code">continue</code> statement in</a></td><td class="printindex-index-section"><a href="#Continue-Statement">Continue Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-distribution">distribution</a></td><td class="printindex-index-section"><a href="#Distribution-contents">Distribution contents</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-dynamic-profiling">dynamic profiling</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-ERRNO-variable-in"><code class="code">ERRNO</code> variable in</a></td><td class="printindex-index-section"><a href="#Getline">Getline</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-ERRNO-variable-in-1"><code class="code">ERRNO</code> variable in</a></td><td class="printindex-index-section"><a href="#Close-Return-Value">Close Return Value</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-ERRNO-variable-in-2"><code class="code">ERRNO</code> variable in</a></td><td class="printindex-index-section"><a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-ERRNO-variable-in-3"><code class="code">ERRNO</code> variable in</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-ERRNO-variable-in-4"><code class="code">ERRNO</code> variable in</a></td><td class="printindex-index-section"><a href="#TCP_002fIP-Networking">TCP/IP Networking</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-escape-sequences">escape sequences</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-escape-sequences-1">escape sequences</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-extensions_002c-disabling">extensions, disabling</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">features</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-gawk-features-adding">adding</a></td><td class="printindex-index-section"><a href="#Adding-Code">Adding Code</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-gawk-features-advanced">advanced</a></td><td class="printindex-index-section"><a href="#Advanced-Features">Advanced Features</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-field-separators-and">field separators and</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-FIELDWIDTHS-variable-in"><code class="code">FIELDWIDTHS</code> variable in</a></td><td class="printindex-index-section"><a href="#Fixed-width-data">Fixed width data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-FIELDWIDTHS-variable-in-1"><code class="code">FIELDWIDTHS</code> variable in</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-file-names-in">file names in</a></td><td class="printindex-index-section"><a href="#Special-Files">Special Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-format_002dcontrol-characters">format-control characters</a></td><td class="printindex-index-section"><a href="#Control-Letters">Control Letters</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-format_002dcontrol-characters-1">format-control characters</a></td><td class="printindex-index-section"><a href="#Control-Letters">Control Letters</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-FPAT-variable-in"><code class="code">FPAT</code> variable in</a></td><td class="printindex-index-section"><a href="#Splitting-By-Content">Splitting By Content</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-FPAT-variable-in-1"><code class="code">FPAT</code> variable in</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-FUNCTAB-array-in"><code class="code">FUNCTAB</code> array in</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-function-arguments-and">function arguments and</a></td><td class="printindex-index-section"><a href="#Calling-Built_002din">Calling Built-in</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-hexadecimal-numbers-and">hexadecimal numbers and</a></td><td class="printindex-index-section"><a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-IGNORECASE-variable-in"><code class="code">IGNORECASE</code> variable in</a></td><td class="printindex-index-section"><a href="#Case_002dsensitivity">Case-sensitivity</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-IGNORECASE-variable-in-1"><code class="code">IGNORECASE</code> variable in</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-IGNORECASE-variable-in-2"><code class="code">IGNORECASE</code> variable in</a></td><td class="printindex-index-section"><a href="#Array-Intro">Array Intro</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-IGNORECASE-variable-in-3"><code class="code">IGNORECASE</code> variable in</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-IGNORECASE-variable-in-4"><code class="code">IGNORECASE</code> variable in</a></td><td class="printindex-index-section"><a href="#Array-Sorting-Functions">Array Sorting Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-implementation-issues">implementation issues</a></td><td class="printindex-index-section"><a href="#Notes">Notes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-gawk-implementation-issues-debugging">debugging</a></td><td class="printindex-index-section"><a href="#Compatibility-Mode">Compatibility Mode</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-gawk-implementation-issues-downward-compatibility">downward compatibility</a></td><td class="printindex-index-section"><a href="#Compatibility-Mode">Compatibility Mode</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-gawk-implementation-issues-limits">limits</a></td><td class="printindex-index-section"><a href="#Getline-Notes">Getline Notes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-gawk-implementation-issues-pipes">pipes</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-installing">installing</a></td><td class="printindex-index-section"><a href="#Installation">Installation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-internationalization">internationalization</a></td><td class="printindex-index-section"><a href="#Internationalization">Internationalization</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-interpreter_002c-adding-code-to">interpreter, adding code to</a></td><td class="printindex-index-section"><a href="#Using-Internal-File-Ops">Using Internal File Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-interval-expressions-and">interval expressions and</a></td><td class="printindex-index-section"><a href="#Interval-Expressions">Interval Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-line-continuation-in">line continuation in</a></td><td class="printindex-index-section"><a href="#Conditional-Exp">Conditional Exp</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-LINT-variable-in"><code class="code">LINT</code> variable in</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-list-of-contributors-to">list of contributors to</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-MS_002dWindows-version-of">MS-Windows version of</a></td><td class="printindex-index-section"><a href="#PC-Using">PC Using</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-newlines-in">newlines in</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-octal-numbers-and">octal numbers and</a></td><td class="printindex-index-section"><a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-OpenVMS-version-of">OpenVMS version of</a></td><td class="printindex-index-section"><a href="#OpenVMS-Installation">OpenVMS Installation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-predefined-variables-and">predefined variables and</a></td><td class="printindex-index-section"><a href="#Built_002din-Variables">Built-in Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-PROCINFO-array-in"><code class="code">PROCINFO</code> array in</a></td><td class="printindex-index-section"><a href="#Other-Arguments">Other Arguments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-PROCINFO-array-in-1"><code class="code">PROCINFO</code> array in</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-PROCINFO-array-in-2"><code class="code">PROCINFO</code> array in</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-PROCINFO-array-in-3"><code class="code">PROCINFO</code> array in</a></td><td class="printindex-index-section"><a href="#Two_002dway-I_002fO">Two-way I/O</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-profiling-programs">profiling programs</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-regexp-constants-and">regexp constants and</a></td><td class="printindex-index-section"><a href="#Standard-Regexp-Constants">Standard Regexp Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">regular expressions</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-gawk-regular-expressions-case-sensitivity">case sensitivity</a></td><td class="printindex-index-section"><a href="#Case_002dsensitivity">Case-sensitivity</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-gawk-regular-expressions-operators">operators</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-gawk-regular-expressions-precedence">precedence</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-RT-variable-in"><code class="code">RT</code> variable in</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-RT-variable-in-1"><code class="code">RT</code> variable in</a></td><td class="printindex-index-section"><a href="#gawk-split-records">gawk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-RT-variable-in-2"><code class="code">RT</code> variable in</a></td><td class="printindex-index-section"><a href="#Multiple-Line">Multiple Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-RT-variable-in-3"><code class="code">RT</code> variable in</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-source-code_002c-obtaining">source code, obtaining</a></td><td class="printindex-index-section"><a href="#Getting">Getting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-splitting-fields-and">splitting fields and</a></td><td class="printindex-index-section"><a href="#Testing-field-creation">Testing field creation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-string_002dtranslation-functions">string-translation functions</a></td><td class="printindex-index-section"><a href="#I18N-Functions">I18N Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-SYMTAB-array-in"><code class="code">SYMTAB</code> array in</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-TEXTDOMAIN-variable-in"><code class="code">TEXTDOMAIN</code> variable in</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-timestamps">timestamps</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-uses-for">uses for</a></td><td class="printindex-index-section"><a href="#Preface">Preface</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-version-of">version of</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-gawk-version-of-printing-information-about">printing information about</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gawk-word_002dboundary-operator">word-boundary operator</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GAWK_005fLOCALE_005fDIR-environment-variable"><code class="env">GAWK_LOCALE_DIR</code> environment variable</a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GAWK_005fLOCALE_005fDIR-environment-variable-1"><code class="env">GAWK_LOCALE_DIR</code> environment variable</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GAWK_005fMSEC_005fSLEEP-environment-variable"><code class="env">GAWK_MSEC_SLEEP</code> environment variable</a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GAWK_005fMSG_005fSRC-environment-variable"><code class="env">GAWK_MSG_SRC</code> environment variable</a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GAWK_005fNO_005fDFA-environment-variable"><code class="env">GAWK_NO_DFA</code> environment variable</a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GAWK_005fPERSIST_005fFILE-environment-variable"><code class="env">GAWK_PERSIST_FILE</code> environment variable</a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GAWK_005fPERSIST_005fFILE-environment-variable-1"><code class="env">GAWK_PERSIST_FILE</code> environment variable</a></td><td class="printindex-index-section"><a href="#Persistent-Memory">Persistent Memory</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GAWK_005fREAD_005fTIMEOUT-environment-variable"><code class="env">GAWK_READ_TIMEOUT</code> environment variable</a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GAWK_005fREAD_005fTIMEOUT-environment-variable-1"><code class="env">GAWK_READ_TIMEOUT</code> environment variable</a></td><td class="printindex-index-section"><a href="#Read-Timeout">Read Timeout</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GAWK_005fSOCK_005fRETRIES-environment-variable"><code class="env">GAWK_SOCK_RETRIES</code> environment variable</a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GAWK_005fSOCK_005fRETRIES-environment-variable-1"><code class="env">GAWK_SOCK_RETRIES</code> environment variable</a></td><td class="printindex-index-section"><a href="#Nonfatal">Nonfatal</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GAWK_005fSTACKSIZE-environment-variable"><code class="env">GAWK_STACKSIZE</code> environment variable</a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-gawkbug-utility"><code class="command">gawkbug</code> utility</a></td><td class="printindex-index-section"><a href="#Bug-address">Bug address</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-gawkextlib-project"><code class="code">gawkextlib</code> project</a></td><td class="printindex-index-section"><a href="#gawkextlib">gawkextlib</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-gawklibpath_005fappend-shell-function"><code class="command">gawklibpath_append</code> shell function</a></td><td class="printindex-index-section"><a href="#Shell-Startup-Files">Shell Startup Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-gawklibpath_005fdefault-shell-function"><code class="command">gawklibpath_default</code> shell function</a></td><td class="printindex-index-section"><a href="#Shell-Startup-Files">Shell Startup Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-gawklibpath_005fprepend-shell-function"><code class="command">gawklibpath_prepend</code> shell function</a></td><td class="printindex-index-section"><a href="#Shell-Startup-Files">Shell Startup Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-gawkpath_005fappend-shell-function"><code class="command">gawkpath_append</code> shell function</a></td><td class="printindex-index-section"><a href="#Shell-Startup-Files">Shell Startup Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-gawkpath_005fdefault-shell-function"><code class="command">gawkpath_default</code> shell function</a></td><td class="printindex-index-section"><a href="#Shell-Startup-Files">Shell Startup Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-gawkpath_005fprepend-shell-function"><code class="command">gawkpath_prepend</code> shell function</a></td><td class="printindex-index-section"><a href="#Shell-Startup-Files">Shell Startup Files</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">General Public License, <em class="emph">See</em> GPL</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-generate-time-values">generate time values</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-gensub_0028_0029-function-_0028gawk_0029"><code class="code">gensub()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Standard-Regexp-Constants">Standard Regexp Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-gensub_0028_0029-function-_0028gawk_0029-1"><code class="code">gensub()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gensub_0028_0029-function-_0028gawk_0029-escape-processing">escape processing</a></td><td class="printindex-index-section"><a href="#Gory-Details">Gory Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getaddrinfo_0028_0029-function-_0028C-library_0029"><code class="code">getaddrinfo()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#TCP_002fIP-Networking">TCP/IP Networking</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getgrent_0028_0029-function-_0028C-library_0029"><code class="code">getgrent()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getgrent_0028_0029-function-_0028C-library_0029-1"><code class="code">getgrent()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getgrent_0028_0029-user_002ddefined-function"><code class="code">getgrent()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getgrent_0028_0029-user_002ddefined-function-1"><code class="code">getgrent()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getgrgid_0028_0029-function-_0028C-library_0029"><code class="code">getgrgid()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getgrgid_0028_0029-user_002ddefined-function"><code class="code">getgrgid()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getgrnam_0028_0029-function-_0028C-library_0029"><code class="code">getgrnam()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getgrnam_0028_0029-user_002ddefined-function"><code class="code">getgrnam()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getgruser_0028_0029-function-_0028C-library_0029"><code class="code">getgruser()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getgruser_0028_0029-user_002ddefined-function"><code class="code">getgruser()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getline-command"><code class="code">getline</code> command</a></td><td class="printindex-index-section"><a href="#Reading-Files">Reading Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-getline-command-_005fgr_005finit_0028_0029-user_002ddefined-function"><code class="code">_gr_init()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-getline-command-_005fpw_005finit_0028_0029-function"><code class="code">_pw_init()</code> function</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-getline-command-BEGINFILE_002fENDFILE-patterns-and"><code class="code">BEGINFILE</code>/<code class="code">ENDFILE</code> patterns and</a></td><td class="printindex-index-section"><a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-getline-command-coprocesses_002c-using-from">coprocesses, using from</a></td><td class="printindex-index-section"><a href="#Getline_002fCoprocess">Getline/Coprocess</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-getline-command-coprocesses_002c-using-from-1">coprocesses, using from</a></td><td class="printindex-index-section"><a href="#Close-Files-And-Pipes">Close Files And Pipes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-getline-command-deadlock-and">deadlock and</a></td><td class="printindex-index-section"><a href="#Two_002dway-I_002fO">Two-way I/O</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-getline-command-explicit-input-with">explicit input with</a></td><td class="printindex-index-section"><a href="#Getline">Getline</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-getline-command-FILENAME-variable-and"><code class="code">FILENAME</code> variable and</a></td><td class="printindex-index-section"><a href="#Getline-Notes">Getline Notes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-getline-command-from-a-file">from a file</a></td><td class="printindex-index-section"><a href="#Getline_002fFile">Getline/File</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-getline-command-into-a-variable">into a variable</a></td><td class="printindex-index-section"><a href="#Getline_002fVariable">Getline/Variable</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-getline-command-return-values">return values</a></td><td class="printindex-index-section"><a href="#Getline">Getline</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-getline-command-variants">variants</a></td><td class="printindex-index-section"><a href="#Getline-Summary">Getline Summary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getlocaltime_0028_0029-user_002ddefined-function"><code class="code">getlocaltime()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Getlocaltime-Function">Getlocaltime Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getopt_0028_0029-function-_0028C-library_0029"><code class="code">getopt()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#Getopt-Function">Getopt Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getopt_0028_0029-user_002ddefined-function"><code class="code">getopt()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Getopt-Function">Getopt Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getopt_0028_0029-user_002ddefined-function-1"><code class="code">getopt()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Getopt-Function">Getopt Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getpwent_0028_0029-function-_0028C-library_0029"><code class="code">getpwent()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getpwent_0028_0029-function-_0028C-library_0029-1"><code class="code">getpwent()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getpwent_0028_0029-user_002ddefined-function"><code class="code">getpwent()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getpwent_0028_0029-user_002ddefined-function-1"><code class="code">getpwent()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getpwnam_0028_0029-function-_0028C-library_0029"><code class="code">getpwnam()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getpwnam_0028_0029-user_002ddefined-function"><code class="code">getpwnam()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getpwuid_0028_0029-function-_0028C-library_0029"><code class="code">getpwuid()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-getpwuid_0028_0029-user_002ddefined-function"><code class="code">getpwuid()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-gettext-library"><code class="command">gettext</code> library</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gettext-library-locale-categories">locale categories</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-gettext_0028_0029-function-_0028C-library_0029"><code class="code">gettext()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-gettimeofday_0028_0029-extension-function"><code class="code">gettimeofday()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Time">Extension Sample Time</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Ghostbusters">Ghostbusters</a></td><td class="printindex-index-section"><a href="#Gory-Details">Gory Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-git-utility"><code class="command">git</code> utility</a></td><td class="printindex-index-section"><a href="#gawkextlib">gawkextlib</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-git-utility-1"><code class="command">git</code> utility</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-git-utility-2"><code class="command">git</code> utility</a></td><td class="printindex-index-section"><a href="#Accessing-The-Source">Accessing The Source</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-git-utility-3"><code class="command">git</code> utility</a></td><td class="printindex-index-section"><a href="#Adding-Code">Adding Code</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Git_002c-use-of-for-gawk-source-code">Git, use of for <code class="command">gawk</code> source code</a></td><td class="printindex-index-section"><a href="#Derived-Files">Derived Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-global-variables_002c-show-in-debugger">global variables, show in debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GMP-values_002c-API-ownership-of">GMP values, API ownership of</a></td><td class="printindex-index-section"><a href="#API-Ownership-of-MPFR-and-GMP-Values">API Ownership of MPFR and GMP Values</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GNITS-mailing-list">GNITS mailing list</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">GNU <code class="command">awk</code>, <em class="emph">See</em> <code class="command">gawk</code></td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GNU-Free-Documentation-License">GNU Free Documentation License</a></td><td class="printindex-index-section"><a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">GNU General Public License, <em class="emph">See</em> GPL</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GNU-Lesser-General-Public-License">GNU Lesser General Public License</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GNU-long-options">GNU long options</a></td><td class="printindex-index-section"><a href="#Command-Line">Command Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GNU-long-options-1">GNU long options</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-GNU-long-options-printing-list-of">printing list of</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GNU-Project">GNU Project</a></td><td class="printindex-index-section"><a href="#Manual-History">Manual History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GNU-Project-1">GNU Project</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GNU_002fLinux">GNU/Linux</a></td><td class="printindex-index-section"><a href="#Manual-History">Manual History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GNU_002fLinux-1">GNU/Linux</a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GNU_002fLinux-2">GNU/Linux</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Go-implementation-of-awk">Go implementation of <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-goawk"><code class="command">goawk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Gordon_002c-Assaf">Gordon, Assaf</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GPL-_0028General-Public-License_0029">GPL (General Public License)</a></td><td class="printindex-index-section"><a href="#Manual-History">Manual History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-GPL-_0028General-Public-License_0029-1">GPL (General Public License)</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-GPL-_0028General-Public-License_0029-printing">printing</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-grcat-program"><code class="command">grcat</code> program</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Grigera_002c-Juan">Grigera, Juan</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-group-database_002c-reading">group database, reading</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-group-file">group file</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-group-ID-of-gawk-user">group ID of <code class="command">gawk</code> user</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-groups_002c-information-about">groups, information about</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-gsub_0028_0029-function"><code class="code">gsub()</code> function</a></td><td class="printindex-index-section"><a href="#Standard-Regexp-Constants">Standard Regexp Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-gsub_0028_0029-function-1"><code class="code">gsub()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gsub_0028_0029-function-arguments-of">arguments of</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-gsub_0028_0029-function-escape-processing">escape processing</a></td><td class="printindex-index-section"><a href="#Gory-Details">Gory Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Guerrero_002c-Juan-Manuel">Guerrero, Juan Manuel</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Guerrero_002c-Juan-Manuel-1">Guerrero, Juan Manuel</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-H">H</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-h-debugger-command-_0028alias-for-help_0029"><code class="code">h</code> debugger command (alias for <code class="code">help</code>)</a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Hankerson_002c-Darrel">Hankerson, Darrel</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Hankerson_002c-Darrel-1">Hankerson, Darrel</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Haque_002c-John">Haque, John</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry">Hartholz</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Hartholz-Elaine">Elaine</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Hartholz-Marshall">Marshall</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Hasegawa_002c-Isamu">Hasegawa, Isamu</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-help-debugger-command"><code class="code">help</code> debugger command</a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-hexadecimal-numbers">hexadecimal numbers</a></td><td class="printindex-index-section"><a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-hexadecimal-values_002c-enabling-interpretation-of">hexadecimal values, enabling interpretation of</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-history-expansion_002c-in-debugger">history expansion, in debugger</a></td><td class="printindex-index-section"><a href="#Readline-Support">Readline Support</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-histsort_002eawk-program"><samp class="file">histsort.awk</samp> program</a></td><td class="printindex-index-section"><a href="#History-Sorting">History Sorting</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Hughes_002c-Phil">Hughes, Phil</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-HUP-signal_002c-for-dynamic-profiling"><code class="code">HUP</code> signal, for dynamic profiling</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry">hyphen (<code class="code">-</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-hyphen-_0028_002d_0029-_002d-operator"><code class="code">-</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-hyphen-_0028_002d_0029-_002d-operator-1"><code class="code">-</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-hyphen-_0028_002d_0029-_002d_002d-end-of-options-marker"><code class="code">--</code> end of options marker</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-hyphen-_0028_002d_0029-_002d_002d-operator"><code class="code">--</code> operator</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-hyphen-_0028_002d_0029-_002d_002d-operator-1"><code class="code">--</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-hyphen-_0028_002d_0029-_002d_003d-operator"><code class="code">-=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-hyphen-_0028_002d_0029-_002d_003d-operator-1"><code class="code">-=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-hyphen-_0028_002d_0029-file-names-beginning-with">file names beginning with</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-hyphen-_0028_002d_0029-in-bracket-expressions">in bracket expressions</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-I">I</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-i-debugger-command-_0028alias-for-info_0029"><code class="code">i</code> debugger command (alias for <code class="code">info</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-id-utility"><code class="command">id</code> utility</a></td><td class="printindex-index-section"><a href="#Id-Program">Id Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-id_002eawk-program"><samp class="file">id.awk</samp> program</a></td><td class="printindex-index-section"><a href="#Id-Program">Id Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-if-statement"><code class="code">if</code> statement</a></td><td class="printindex-index-section"><a href="#If-Statement">If Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-if-statement-actions_002c-changing">actions, changing</a></td><td class="printindex-index-section"><a href="#Ranges">Ranges</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-if-statement-use-of-regexps-in">use of regexps in</a></td><td class="printindex-index-section"><a href="#Regexp-Usage">Regexp Usage</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-igawk_002esh-program"><code class="code">igawk.sh</code> program</a></td><td class="printindex-index-section"><a href="#Igawk-Program">Igawk Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ignore-breakpoint">ignore breakpoint</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ignore-debugger-command"><code class="code">ignore</code> debugger command</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-IGNORECASE-variable"><code class="code">IGNORECASE</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-IGNORECASE-variable-array-indices-and">array indices and</a></td><td class="printindex-index-section"><a href="#Array-Intro">Array Intro</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-IGNORECASE-variable-array-sorting-functions-and">array sorting functions and</a></td><td class="printindex-index-section"><a href="#Array-Sorting-Functions">Array Sorting Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-IGNORECASE-variable-in-example-programs">in example programs</a></td><td class="printindex-index-section"><a href="#Library-Functions">Library Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-IGNORECASE-variable-with-_007e-and-_0021_007e-operators">with <code class="code">~</code> and <code class="code">!~</code> operators</a></td><td class="printindex-index-section"><a href="#Case_002dsensitivity">Case-sensitivity</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Illumos_002c-POSIX_002dcompliant-awk">Illumos, POSIX-compliant <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-implementation-issues_002c-gawk">implementation issues, <code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Notes">Notes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-implementation-issues_002c-gawk-debugging">debugging</a></td><td class="printindex-index-section"><a href="#Compatibility-Mode">Compatibility Mode</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-implementation-issues_002c-gawk-limits">limits</a></td><td class="printindex-index-section"><a href="#Getline-Notes">Getline Notes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-implementation-issues_002c-gawk-limits-1">limits</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-implicit-namespace">implicit namespace</a></td><td class="printindex-index-section"><a href="#Changing-The-Namespace">Changing The Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-in-operator"><code class="code">in</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-in-operator-1"><code class="code">in</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-in-operator-2"><code class="code">in</code> operator</a></td><td class="printindex-index-section"><a href="#For-Statement">For Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-in-operator-index-existence-in-multidimensional-arrays">index existence in multidimensional arrays</a></td><td class="printindex-index-section"><a href="#Multidimensional">Multidimensional</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-in-operator-order-of-array-access">order of array access</a></td><td class="printindex-index-section"><a href="#Scanning-an-Array">Scanning an Array</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-in-operator-testing-if-array-element-exists">testing if array element exists</a></td><td class="printindex-index-section"><a href="#Reference-to-Elements">Reference to Elements</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-in-operator-use-in-loops">use in loops</a></td><td class="printindex-index-section"><a href="#Scanning-an-Array">Scanning an Array</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_0040include-directive"><code class="code">@include</code> directive</a></td><td class="printindex-index-section"><a href="#Include-Files">Include Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-including-files_002c-_0040include-directive">including files, <code class="code">@include</code> directive</a></td><td class="printindex-index-section"><a href="#Include-Files">Include Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-increment-operators">increment operators</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-index_0028_0029-function"><code class="code">index()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-indexing-arrays">indexing arrays</a></td><td class="printindex-index-section"><a href="#Array-Intro">Array Intro</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-indirect-function-calls">indirect function calls</a></td><td class="printindex-index-section"><a href="#Indirect-Calls">Indirect Calls</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-indirect-function-calls-_0040_002dnotation"><code class="code">@</code>-notation</a></td><td class="printindex-index-section"><a href="#Indirect-Calls">Indirect Calls</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-infinite-precision">infinite precision</a></td><td class="printindex-index-section"><a href="#Arbitrary-Precision-Arithmetic">Arbitrary Precision Arithmetic</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-info-debugger-command"><code class="code">info</code> debugger command</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-initialization_002c-automatic">initialization, automatic</a></td><td class="printindex-index-section"><a href="#More-Complex">More Complex</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-inplace-extension"><code class="code">inplace</code> extension</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Inplace">Extension Sample Inplace</a></td></tr>
<tr><td></td><td class="printindex-index-entry">input</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input-data_002c-nondecimal">data, nondecimal</a></td><td class="printindex-index-section"><a href="#Nondecimal-Data">Nondecimal Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input-explicit">explicit</a></td><td class="printindex-index-section"><a href="#Getline">Getline</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input-multiline-records">multiline records</a></td><td class="printindex-index-section"><a href="#Multiple-Line">Multiple Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input-splitting-into-records">splitting into records</a></td><td class="printindex-index-section"><a href="#Records">Records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input-standard">standard</a></td><td class="printindex-index-section"><a href="#Read-Terminal">Read Terminal</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input-standard-1">standard</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-input-files">input files</a></td><td class="printindex-index-section"><a href="#Reading-Files">Reading Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input-files-closing">closing</a></td><td class="printindex-index-section"><a href="#Close-Files-And-Pipes">Close Files And Pipes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input-files-counting-elements-in">counting elements in</a></td><td class="printindex-index-section"><a href="#Wc-Program">Wc Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input-files-examples">examples</a></td><td class="printindex-index-section"><a href="#Sample-Data-Files">Sample Data Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input-files-reading">reading</a></td><td class="printindex-index-section"><a href="#Reading-Files">Reading Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input-files-running-awk-without">running <code class="command">awk</code> without</a></td><td class="printindex-index-section"><a href="#Read-Terminal">Read Terminal</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input-files-running-awk-without-1">running <code class="command">awk</code> without</a></td><td class="printindex-index-section"><a href="#Read-Terminal">Read Terminal</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input-files-variable-assignments-and">variable assignments and</a></td><td class="printindex-index-section"><a href="#Other-Arguments">Other Arguments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-input-pipeline">input pipeline</a></td><td class="printindex-index-section"><a href="#Getline_002fPipe">Getline/Pipe</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-input-record_002c-length-of">input record, length of</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-input-redirection">input redirection</a></td><td class="printindex-index-section"><a href="#Getline_002fFile">Getline/File</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">input, files, <em class="emph">See</em> input files</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry">input/output</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input_002foutput-binary">binary</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input_002foutput-from-BEGIN-and-END">from <code class="code">BEGIN</code> and <code class="code">END</code></a></td><td class="printindex-index-section"><a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input_002foutput-functions">functions</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-input_002foutput-two_002dway">two-way</a></td><td class="printindex-index-section"><a href="#Two_002dway-I_002fO">Two-way I/O</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-insomnia_002c-cure-for">insomnia, cure for</a></td><td class="printindex-index-section"><a href="#Alarm-Program">Alarm Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-installing-gawk">installing <code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Installation">Installation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-installing-gawk-Cygwin">Cygwin</a></td><td class="printindex-index-section"><a href="#Cygwin">Cygwin</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-installing-gawk-MS_002dWindows">MS-Windows</a></td><td class="printindex-index-section"><a href="#PC-Binary-Installation">PC Binary Installation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-installing-gawk-OpenVMS">OpenVMS</a></td><td class="printindex-index-section"><a href="#OpenVMS-Installation">OpenVMS Installation</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-instruction-tracing_002c-in-debugger">instruction tracing, in debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-instructions_002c-trace-of-internal">instructions, trace of internal</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-INT-signal-_0028MS_002dWindows_0029"><code class="code">INT</code> signal (MS-Windows)</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-INT_005fCHAIN_005fMAX-environment-variable"><code class="env">INT_CHAIN_MAX</code> environment variable</a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-int_0028_0029-function"><code class="code">int()</code> function</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-integer-array-indices">integer array indices</a></td><td class="printindex-index-section"><a href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry">integers</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-integers-arbitrary-precision">arbitrary precision</a></td><td class="printindex-index-section"><a href="#Arbitrary-Precision-Integers">Arbitrary Precision Integers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-integers-unsigned">unsigned</a></td><td class="printindex-index-section"><a href="#Computer-Arithmetic">Computer Arithmetic</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-interacting-with-other-programs">interacting with other programs</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-internationalization">internationalization</a></td><td class="printindex-index-section"><a href="#I18N-Functions">I18N Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-internationalization-1">internationalization</a></td><td class="printindex-index-section"><a href="#I18N-and-L10N">I18N and L10N</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-internationalization-localization">localization</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-internationalization-localization-1">localization</a></td><td class="printindex-index-section"><a href="#Internationalization">Internationalization</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-internationalization-localization-2">localization</a></td><td class="printindex-index-section"><a href="#I18N-and-L10N">I18N and L10N</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-internationalization-localization-character-classes">character classes</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-internationalization-localization-currency-symbols">currency symbols</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-internationalization-localization-gawk-and"><code class="command">gawk</code> and</a></td><td class="printindex-index-section"><a href="#Internationalization">Internationalization</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-internationalization-localization-locale-categories">locale categories</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-internationalization-localization-marked-strings">marked strings</a></td><td class="printindex-index-section"><a href="#Programmer-i18n">Programmer i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-internationalization-localization-monetary-information">monetary information</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-internationalization-localization-portability-and">portability and</a></td><td class="printindex-index-section"><a href="#I18N-Portability">I18N Portability</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-internationalizing-a-program">internationalizing a program</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-interpreted-programs">interpreted programs</a></td><td class="printindex-index-section"><a href="#Basic-High-Level">Basic High Level</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-interpreted-programs-1">interpreted programs</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-interval-expressions_002c-regexp-operator">interval expressions, regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-inventory_002dshipped-file"><code class="code">inventory-shipped</code> file</a></td><td class="printindex-index-section"><a href="#Sample-Data-Files">Sample Data Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-invoke-shell-command">invoke shell command</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-isarray_0028_0029-function-_0028gawk_0029"><code class="code">isarray()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Type-Functions">Type Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-isnumeric_0028_0029-user_002ddefined-function"><code class="code">isnumeric()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Isnumeric-Function">Isnumeric Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ISO">ISO</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-ISO-ISO-8601-date-and-time-standard">ISO 8601 date and time standard</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-ISO-ISO-8859_002d1-character-set">ISO 8859-1 character set</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-ISO-ISO-Latin_002d1-character-set">ISO Latin-1 character set</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-J">J</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Jacobs_002c-Andrew">Jacobs, Andrew</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Jaegermann_002c-Michal">Jaegermann, Michal</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Jaegermann_002c-Michal-1">Jaegermann, Michal</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Jannick">Jannick</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Java-implementation-of-awk">Java implementation of <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Java-programming-language">Java programming language</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-jawk"><code class="command">jawk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-jedi-knights">jedi knights</a></td><td class="printindex-index-section"><a href="#Undocumented">Undocumented</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Johansen_002c-Chris">Johansen, Chris</a></td><td class="printindex-index-section"><a href="#Signature-Program">Signature Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-join_0028_0029-user_002ddefined-function"><code class="code">join()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Join-Function">Join Function</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-K">K</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Kahrs_002c-Jurgen">Kahrs, J&uuml;rgen</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Kahrs_002c-Jurgen-1">Kahrs, J&uuml;rgen</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Kasal_002c-Stepan">Kasal, Stepan</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Kelly_002c-Terence">Kelly, Terence</a></td><td class="printindex-index-section"><a href="#Persistent-Memory">Persistent Memory</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Kelly_002c-Terence-1">Kelly, Terence</a></td><td class="printindex-index-section"><a href="#Persistent-Memory">Persistent Memory</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Kelly_002c-Terence-2">Kelly, Terence</a></td><td class="printindex-index-section"><a href="#Feature-History">Feature History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Kenobi_002c-Obi_002dWan">Kenobi, Obi-Wan</a></td><td class="printindex-index-section"><a href="#Undocumented">Undocumented</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Kernighan_002c-Brian">Kernighan, Brian</a></td><td class="printindex-index-section"><a href="#History">History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Kernighan_002c-Brian-1">Kernighan, Brian</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Kernighan_002c-Brian-2">Kernighan, Brian</a></td><td class="printindex-index-section"><a href="#BTL">BTL</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Kernighan_002c-Brian-3">Kernighan, Brian</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Kernighan_002c-Brian-4">Kernighan, Brian</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Kernighan_002c-Brian-5">Kernighan, Brian</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Kernighan_002c-Brian-6">Kernighan, Brian</a></td><td class="printindex-index-section"><a href="#Basic-Data-Typing">Basic Data Typing</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Kernighan_002c-Brian-7">Kernighan, Brian</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Kernighan_002c-Brian-quotes">quotes</a></td><td class="printindex-index-section"><a href="#Conventions">Conventions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Kernighan_002c-Brian-quotes-1">quotes</a></td><td class="printindex-index-section"><a href="#Comma-Separated-Fields">Comma Separated Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Kernighan_002c-Brian-quotes-2">quotes</a></td><td class="printindex-index-section"><a href="#Getline_002fPipe">Getline/Pipe</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Kernighan_002c-Brian-quotes-3">quotes</a></td><td class="printindex-index-section"><a href="#Concatenation">Concatenation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Kernighan_002c-Brian-quotes-4">quotes</a></td><td class="printindex-index-section"><a href="#Library-Functions">Library Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Kernighan_002c-Brian-quotes-5">quotes</a></td><td class="printindex-index-section"><a href="#Programs-Exercises">Programs Exercises</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-kill-command_002c-dynamic-profiling"><code class="command">kill</code> command, dynamic profiling</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-knights_002c-jedi">knights, jedi</a></td><td class="printindex-index-section"><a href="#Undocumented">Undocumented</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Kwok_002c-Conrad">Kwok, Conrad</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-L">L</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-l-debugger-command-_0028alias-for-list_0029"><code class="code">l</code> debugger command (alias for <code class="code">list</code>)</a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-labels_002eawk-program"><samp class="file">labels.awk</samp> program</a></td><td class="printindex-index-section"><a href="#Labels-Program">Labels Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LANG-environment-variable"><code class="env">LANG</code> environment variable</a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Langston_002c-Peter">Langston, Peter</a></td><td class="printindex-index-section"><a href="#Advanced-Features">Advanced Features</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LANGUAGE-environment-variable"><code class="env">LANGUAGE</code> environment variable</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LANGUAGE-environment-variable-1"><code class="env">LANGUAGE</code> environment variable</a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-languages_002c-data_002ddriven">languages, data-driven</a></td><td class="printindex-index-section"><a href="#Basic-High-Level">Basic High Level</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LC_005fALL-environment-variable"><code class="env">LC_ALL</code> environment variable</a></td><td class="printindex-index-section"><a href="#Split-Program">Split Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LC_005fALL-environment-variable-1"><code class="env">LC_ALL</code> environment variable</a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LC_005fALL-environment-variable-2"><code class="env">LC_ALL</code> environment variable</a></td><td class="printindex-index-section"><a href="#Bug-address">Bug address</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LC_005fALL-locale-category"><code class="code">LC_ALL</code> locale category</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LC_005fCOLLATE-locale-category"><code class="code">LC_COLLATE</code> locale category</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LC_005fCTYPE-locale-category"><code class="code">LC_CTYPE</code> locale category</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LC_005fMESSAGES-environment-variable"><code class="env">LC_MESSAGES</code> environment variable</a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LC_005fMESSAGES-locale-category"><code class="code">LC_MESSAGES</code> locale category</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-LC_005fMESSAGES-locale-category-bindtextdomain_0028_0029-function-_0028gawk_0029"><code class="code">bindtextdomain()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Programmer-i18n">Programmer i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LC_005fMONETARY-locale-category"><code class="code">LC_MONETARY</code> locale category</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LC_005fNUMERIC-locale-category"><code class="code">LC_NUMERIC</code> locale category</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LC_005fTIME-locale-category"><code class="code">LC_TIME</code> locale category</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry">left angle bracket (<code class="code">&lt;</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-left-angle-bracket-_0028_003c_0029-_003c-operator"><code class="code">&lt;</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-left-angle-bracket-_0028_003c_0029-_003c-operator-1"><code class="code">&lt;</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-left-angle-bracket-_0028_003c_0029-_003c-operator-_0028I_002fO_0029"><code class="code">&lt;</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Getline_002fFile">Getline/File</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-left-angle-bracket-_0028_003c_0029-_003c_003d-operator"><code class="code">&lt;=</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-left-angle-bracket-_0028_003c_0029-_003c_003d-operator-1"><code class="code">&lt;=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-left-shift_002c-bitwise">left shift, bitwise</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-leftmost-longest-match">leftmost longest match</a></td><td class="printindex-index-section"><a href="#Multiple-Line">Multiple Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-length-of-input-record">length of input record</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-length-of-string">length of string</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-length_0028_0029-function"><code class="code">length()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Lesser-General-Public-License-_0028LGPL_0029">Lesser General Public License (LGPL)</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LGPL-_0028Lesser-General-Public-License_0029">LGPL (Lesser General Public License)</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-libmawk">libmawk</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-libraries-of-awk-functions">libraries of <code class="command">awk</code> functions</a></td><td class="printindex-index-section"><a href="#Library-Functions">Library Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-libraries-of-awk-functions-assertions">assertions</a></td><td class="printindex-index-section"><a href="#Assert-Function">Assert Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-libraries-of-awk-functions-associative-arrays-and">associative arrays and</a></td><td class="printindex-index-section"><a href="#Library-Names">Library Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-libraries-of-awk-functions-character-values-as-numbers">character values as numbers</a></td><td class="printindex-index-section"><a href="#Ordinal-Functions">Ordinal Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-libraries-of-awk-functions-command_002dline-options">command-line options</a></td><td class="printindex-index-section"><a href="#Getopt-Function">Getopt Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-libraries-of-awk-functions-example-program-for-using">example program for using</a></td><td class="printindex-index-section"><a href="#Igawk-Program">Igawk Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-libraries-of-awk-functions-group-database_002c-reading">group database, reading</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">managing</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-libraries-of-awk-functions-managing-data-files">data files</a></td><td class="printindex-index-section"><a href="#Data-File-Management">Data File Management</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-libraries-of-awk-functions-managing-time">time</a></td><td class="printindex-index-section"><a href="#Getlocaltime-Function">Getlocaltime Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-libraries-of-awk-functions-merging-arrays-into-strings">merging arrays into strings</a></td><td class="printindex-index-section"><a href="#Join-Function">Join Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-libraries-of-awk-functions-rounding-numbers">rounding numbers</a></td><td class="printindex-index-section"><a href="#Round-Function">Round Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-libraries-of-awk-functions-user-database_002c-reading">user database, reading</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-line-breaks">line breaks</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-line-continuations">line continuations</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-line-continuations-gawk"><code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Conditional-Exp">Conditional Exp</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-line-continuations-in-print-statement">in <code class="code">print</code> statement</a></td><td class="printindex-index-section"><a href="#Print-Examples">Print Examples</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-line-continuations-with-C-shell">with C shell</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry">lines</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-lines-blank_002c-printing">blank, printing</a></td><td class="printindex-index-section"><a href="#Print">Print</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-lines-counting">counting</a></td><td class="printindex-index-section"><a href="#Wc-Program">Wc Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-lines-duplicate_002c-removing">duplicate, removing</a></td><td class="printindex-index-section"><a href="#History-Sorting">History Sorting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-lines-matching-ranges-of">matching ranges of</a></td><td class="printindex-index-section"><a href="#Ranges">Ranges</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-lines-skipping-between-markers">skipping between markers</a></td><td class="printindex-index-section"><a href="#Ranges">Ranges</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-lint-checking">lint checking</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-lint-checking-array-subscripts">array subscripts</a></td><td class="printindex-index-section"><a href="#Uninitialized-Subscripts">Uninitialized Subscripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-lint-checking-array-subscripts-1">array subscripts</a></td><td class="printindex-index-section"><a href="#Delete">Delete</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-lint-checking-empty-programs">empty programs</a></td><td class="printindex-index-section"><a href="#Command-Line">Command Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-lint-checking-issuing-warnings">issuing warnings</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-lint-checking-POSIXLY_005fCORRECT-environment-variable"><code class="env">POSIXLY_CORRECT</code> environment variable</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-lint-checking-undefined-functions">undefined functions</a></td><td class="printindex-index-section"><a href="#Function-Caveats">Function Caveats</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-LINT-variable"><code class="code">LINT</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">Linux, <em class="emph">See</em> GNU/Linux</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-list-all-global-variables_002c-in-debugger">list all global variables, in debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-list-debugger-command"><code class="code">list</code> debugger command</a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-list-function-definitions_002c-in-debugger">list function definitions, in debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_0040load-directive"><code class="code">@load</code> directive</a></td><td class="printindex-index-section"><a href="#Loading-Shared-Libraries">Loading Shared Libraries</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-loading-extensions">loading extensions</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-loading-extensions-_0040load-directive"><code class="code">@load</code> directive</a></td><td class="printindex-index-section"><a href="#Loading-Shared-Libraries">Loading Shared Libraries</a></td></tr>
<tr><td></td><td class="printindex-index-entry">local variables</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-local-variables-in-a-function">in a function</a></td><td class="printindex-index-section"><a href="#Variable-Scope">Variable Scope</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-local-variables-show-in-debugger">show in debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-locale-categories">locale categories</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-locale-decimal-point-character">locale decimal point character</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-locale_002c-definition-of">locale, definition of</a></td><td class="printindex-index-section"><a href="#Locales">Locales</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">localization, <em class="emph">See</em> internationalization, localization</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-log-files_002c-timestamps-in">log files, timestamps in</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-log_0028_0029-function"><code class="code">log()</code> function</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-logarithm">logarithm</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-logical-false_002ftrue">logical false/true</a></td><td class="printindex-index-section"><a href="#Truth-Values">Truth Values</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">logical operators, <em class="emph">See</em> Boolean expressions</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-login-information">login information</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-long-options">long options</a></td><td class="printindex-index-section"><a href="#Command-Line">Command Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-loops">loops</a></td><td class="printindex-index-section"><a href="#While-Statement">While Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry">loops</td><td class="printindex-index-see-also"><em class="emph">See also</em> <code class="code">while</code> statement</td></tr>
<tr><td></td><td class="printindex-index-entry">loops</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-loops-break-statement-and"><code class="code">break</code> statement and</a></td><td class="printindex-index-section"><a href="#Break-Statement">Break Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-loops-continue-statement-and"><code class="code">continue</code> statement and</a></td><td class="printindex-index-section"><a href="#For-Statement">For Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-loops-count-for-header_002c-in-a-profile">count for header, in a profile</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-loops-do_002dwhile"><code class="code">do</code>-<code class="code">while</code></a></td><td class="printindex-index-section"><a href="#Do-Statement">Do Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-loops-exiting">exiting</a></td><td class="printindex-index-section"><a href="#Break-Statement">Break Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><code class="code">for</code></td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-loops-for-array-scanning">array scanning</a></td><td class="printindex-index-section"><a href="#Scanning-an-Array">Scanning an Array</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-loops-for-iterative">iterative</a></td><td class="printindex-index-section"><a href="#For-Statement">For Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-loops-while"><code class="code">while</code></a></td><td class="printindex-index-section"><a href="#While-Statement">While Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ls-utility"><code class="command">ls</code> utility</a></td><td class="printindex-index-section"><a href="#Very-Simple">Very Simple</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ls-utility-1"><code class="command">ls</code> utility</a></td><td class="printindex-index-section"><a href="#More-Complex">More Complex</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-lshift_0028_0029-function-_0028gawk_0029"><code class="code">lshift()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-lvalues_002frvalues">lvalues/rvalues</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-M">M</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-mail_002dlist-file"><code class="code">mail-list</code> file</a></td><td class="printindex-index-section"><a href="#Sample-Data-Files">Sample Data Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-mailing-labels_002c-printing">mailing labels, printing</a></td><td class="printindex-index-section"><a href="#Labels-Program">Labels Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-mailing-list_002c-GNITS">mailing list, GNITS</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Malmberg_002c-John">Malmberg, John</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Malmberg_002c-John-1">Malmberg, John</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Malmberg_002c-John-2">Malmberg, John</a></td><td class="printindex-index-section"><a href="#Maintainers">Maintainers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-mark-parity">mark parity</a></td><td class="printindex-index-section"><a href="#Ordinal-Functions">Ordinal Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-marked-string-extraction-_0028internationalization_0029">marked string extraction (internationalization)</a></td><td class="printindex-index-section"><a href="#String-Extraction">String Extraction</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Marx_002c-Groucho">Marx, Groucho</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-match-regexp-in-string">match regexp in string</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-match_0028_0029-function"><code class="code">match()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-match_0028_0029-function-RSTART_002fRLENGTH-variables"><code class="code">RSTART</code>/<code class="code">RLENGTH</code> variables</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-match_0028_0029-function-side-effects">side effects</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">matching</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-matching-expressions">expressions</a></td><td class="printindex-index-section"><a href="#Typing-and-Comparison">Typing and Comparison</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-matching-leftmost-longest">leftmost longest</a></td><td class="printindex-index-section"><a href="#Multiple-Line">Multiple Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-matching-null-strings">null strings</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-mawk-utility"><code class="command">mawk</code> utility</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-mawk-utility-1"><code class="command">mawk</code> utility</a></td><td class="printindex-index-section"><a href="#Getline_002fPipe">Getline/Pipe</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-mawk-utility-2"><code class="command">mawk</code> utility</a></td><td class="printindex-index-section"><a href="#Concatenation">Concatenation</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-mawk-utility-3"><code class="command">mawk</code> utility</a></td><td class="printindex-index-section"><a href="#Nextfile-Statement">Nextfile Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-mawk-utility-4"><code class="command">mawk</code> utility</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-maximum-precision-supported-by-MPFR-library">maximum precision supported by MPFR library</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-McIlroy_002c-Doug">McIlroy, Doug</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-McPhee_002c-Patrick-T_002eJ_002e">McPhee, Patrick T.J.</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-memory_002c-allocating-for-extensions">memory, allocating for extensions</a></td><td class="printindex-index-section"><a href="#Memory-Allocation-Functions">Memory Allocation Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-message-object-files">message object files</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-message-object-files-converting-from-portable-object-files">converting from portable object files</a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-message-object-files-specifying-directory-of">specifying directory of</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-message-object-files-specifying-directory-of-1">specifying directory of</a></td><td class="printindex-index-section"><a href="#Programmer-i18n">Programmer i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-messages-from-extensions">messages from extensions</a></td><td class="printindex-index-section"><a href="#Printing-Messages">Printing Messages</a></td></tr>
<tr><td></td><td class="printindex-index-entry">metacharacters</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-metacharacters-escape-sequences-for">escape sequences for</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-metacharacters-in-regular-expressions">in regular expressions</a></td><td class="printindex-index-section"><a href="#Regexp-Operators">Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-minimum-precision-required-by-MPFR-library">minimum precision required by MPFR library</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Minshall_002c-Greg">Minshall, Greg</a></td><td class="printindex-index-section"><a href="#Getopt-Function">Getopt Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-mkbool_0028_0029-function-_0028gawk_0029"><code class="code">mkbool()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Boolean-Functions">Boolean Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-mktime_0028_0029-function-_0028gawk_0029"><code class="code">mktime()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-modifiers_002c-in-format-specifiers">modifiers, in format specifiers</a></td><td class="printindex-index-section"><a href="#Format-Modifiers">Format Modifiers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-module_002c-definition-of">module, definition of</a></td><td class="printindex-index-section"><a href="#Global-Namespace">Global Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-monetary-information_002c-localization">monetary information, localization</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Moon_002c-Sailor">Moon, Sailor</a></td><td class="printindex-index-section"><a href="#Internationalization">Internationalization</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Moore_002c-Duncan">Moore, Duncan</a></td><td class="printindex-index-section"><a href="#Getline-Notes">Getline Notes</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-MPFR-library_002c-building-with">MPFR library, building with</a></td><td class="printindex-index-section"><a href="#Compiling-with-MPFR">Compiling with MPFR</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-MPFR-values_002c-API-ownership-of">MPFR values, API ownership of</a></td><td class="printindex-index-section"><a href="#API-Ownership-of-MPFR-and-GMP-Values">API Ownership of MPFR and GMP Values</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-MPFR_002c-checking-for">MPFR, checking for</a></td><td class="printindex-index-section"><a href="#Checking-for-MPFR">Checking for MPFR</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-msgfmt-utility"><code class="command">msgfmt</code> utility</a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-multiple-precision">multiple precision</a></td><td class="printindex-index-section"><a href="#Arbitrary-Precision-Arithmetic">Arbitrary Precision Arithmetic</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-multiple_002dline-records">multiple-line records</a></td><td class="printindex-index-section"><a href="#Multiple-Line">Multiple Line</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-N">N</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-n-debugger-command-_0028alias-for-next_0029"><code class="code">n</code> debugger command (alias for <code class="code">next</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-name-management">name management</a></td><td class="printindex-index-section"><a href="#Internal-Name-Management">Internal Name Management</a></td></tr>
<tr><td></td><td class="printindex-index-entry">names</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-names-arrays_002fvariables">arrays/variables</a></td><td class="printindex-index-section"><a href="#Library-Names">Library Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-names-functions">functions</a></td><td class="printindex-index-section"><a href="#Definition-Syntax">Definition Syntax</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-names-functions-1">functions</a></td><td class="printindex-index-section"><a href="#Library-Names">Library Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry">namespace</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-namespace-awk"><code class="code">awk</code></a></td><td class="printindex-index-section"><a href="#Default-Namespace">Default Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-namespace-default">default</a></td><td class="printindex-index-section"><a href="#Default-Namespace">Default Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-namespace-definition-of">definition of</a></td><td class="printindex-index-section"><a href="#Global-Namespace">Global Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-namespace-example-code">example code</a></td><td class="printindex-index-section"><a href="#Namespace-Example">Namespace Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-namespace-implicit">implicit</a></td><td class="printindex-index-section"><a href="#Changing-The-Namespace">Changing The Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-namespace-pushing-and-popping">pushing and popping</a></td><td class="printindex-index-section"><a href="#Changing-The-Namespace">Changing The Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-namespace-standard-awk_002c-global">standard <code class="command">awk</code>, global</a></td><td class="printindex-index-section"><a href="#Global-Namespace">Global Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_0040namespace-directive"><code class="code">@namespace</code> directive</a></td><td class="printindex-index-section"><a href="#Changing-The-Namespace">Changing The Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-_0040namespace-directive-1"><code class="code">@namespace</code> directive</a></td><td class="printindex-index-section"><a href="#Changing-The-Namespace">Changing The Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry">namespaces</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-namespaces-backwards-compatibility">backwards compatibility</a></td><td class="printindex-index-section"><a href="#Namespace-Summary">Namespace Summary</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-namespaces-changing">changing</a></td><td class="printindex-index-section"><a href="#Changing-The-Namespace">Changing The Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">interaction with</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-namespaces-interaction-with-debugger">debugger</a></td><td class="printindex-index-section"><a href="#Namespace-And-Features">Namespace And Features</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-namespaces-interaction-with-extension-API">extension API</a></td><td class="printindex-index-section"><a href="#Namespace-And-Features">Namespace And Features</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-namespaces-interaction-with-pretty-printer">pretty printer</a></td><td class="printindex-index-section"><a href="#Namespace-And-Features">Namespace And Features</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-namespaces-interaction-with-profiler">profiler</a></td><td class="printindex-index-section"><a href="#Namespace-And-Features">Namespace And Features</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-namespaces-naming-rules">naming rules</a></td><td class="printindex-index-section"><a href="#Naming-Rules">Naming Rules</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-namespaces-qualified-names">qualified names</a></td><td class="printindex-index-section"><a href="#Qualified-Names">Qualified Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-naming-issues">naming issues</a></td><td class="printindex-index-section"><a href="#Library-Names">Library Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-naming-issues-functions">functions</a></td><td class="printindex-index-section"><a href="#Definition-Syntax">Definition Syntax</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-naming-rules_002c-namespace-and-component-names">naming rules, namespace and component names</a></td><td class="printindex-index-section"><a href="#Naming-Rules">Naming Rules</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Neacsu_002c-Mircea">Neacsu, Mircea</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-NetBSD">NetBSD</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry">networks</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-networks-programming">programming</a></td><td class="printindex-index-section"><a href="#TCP_002fIP-Networking">TCP/IP Networking</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-networks-support-for">support for</a></td><td class="printindex-index-section"><a href="#Special-Network">Special Network</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-newlines">newlines</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-newlines-1">newlines</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-newlines-2">newlines</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-newlines-as-record-separators">as record separators</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-newlines-in-dynamic-regexps">in dynamic regexps</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-newlines-in-regexp-constants">in regexp constants</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-newlines-printing">printing</a></td><td class="printindex-index-section"><a href="#Print-Examples">Print Examples</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-newlines-separating-statements-in-actions">separating statements in actions</a></td><td class="printindex-index-section"><a href="#Action-Overview">Action Overview</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-newlines-separating-statements-in-actions-1">separating statements in actions</a></td><td class="printindex-index-section"><a href="#Statements">Statements</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-next-debugger-command"><code class="code">next</code> debugger command</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-next-file-statement"><code class="code">next file</code> statement</a></td><td class="printindex-index-section"><a href="#Feature-History">Feature History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-next-statement"><code class="code">next</code> statement</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-next-statement-1"><code class="code">next</code> statement</a></td><td class="printindex-index-section"><a href="#Next-Statement">Next Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-next-statement-BEGIN_002fEND-patterns-and"><code class="code">BEGIN</code>/<code class="code">END</code> patterns and</a></td><td class="printindex-index-section"><a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-next-statement-BEGINFILE_002fENDFILE-patterns-and"><code class="code">BEGINFILE</code>/<code class="code">ENDFILE</code> patterns and</a></td><td class="printindex-index-section"><a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-next-statement-user_002ddefined-functions-and">user-defined functions and</a></td><td class="printindex-index-section"><a href="#Next-Statement">Next Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-nextfile-statement"><code class="code">nextfile</code> statement</a></td><td class="printindex-index-section"><a href="#Nextfile-Statement">Nextfile Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-nextfile-statement-BEGIN_002fEND-patterns-and"><code class="code">BEGIN</code>/<code class="code">END</code> patterns and</a></td><td class="printindex-index-section"><a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-nextfile-statement-BEGINFILE_002fENDFILE-patterns-and"><code class="code">BEGINFILE</code>/<code class="code">ENDFILE</code> patterns and</a></td><td class="printindex-index-section"><a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-nextfile-statement-user_002ddefined-functions-and">user-defined functions and</a></td><td class="printindex-index-section"><a href="#Nextfile-Statement">Nextfile Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-nexti-debugger-command"><code class="code">nexti</code> debugger command</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-NF-variable"><code class="code">NF</code> variable</a></td><td class="printindex-index-section"><a href="#Fields">Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-NF-variable-1"><code class="code">NF</code> variable</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-NF-variable-decrementing">decrementing</a></td><td class="printindex-index-section"><a href="#Changing-Fields">Changing Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ni-debugger-command-_0028alias-for-nexti_0029"><code class="code">ni</code> debugger command (alias for <code class="code">nexti</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-noassign_002eawk-program"><samp class="file">noassign.awk</samp> program</a></td><td class="printindex-index-section"><a href="#Ignoring-Assigns">Ignoring Assigns</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-non_002dexistent-array-elements">non-existent array elements</a></td><td class="printindex-index-section"><a href="#Reference-to-Elements">Reference to Elements</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-nonfatal-output">nonfatal output</a></td><td class="printindex-index-section"><a href="#Nonfatal">Nonfatal</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-not-Boolean_002dlogic-operator">not Boolean-logic operator</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-NR-variable"><code class="code">NR</code> variable</a></td><td class="printindex-index-section"><a href="#Records">Records</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-NR-variable-1"><code class="code">NR</code> variable</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-NR-variable-changing">changing</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-null-strings">null strings</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-null-strings-1">null strings</a></td><td class="printindex-index-section"><a href="#Regexp-Field-Splitting">Regexp Field Splitting</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-null-strings-2">null strings</a></td><td class="printindex-index-section"><a href="#Truth-Values">Truth Values</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-null-strings-3">null strings</a></td><td class="printindex-index-section"><a href="#Basic-Data-Typing">Basic Data Typing</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-null-strings-as-array-subscripts">as array subscripts</a></td><td class="printindex-index-section"><a href="#Uninitialized-Subscripts">Uninitialized Subscripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-null-strings-converting-numbers-to-strings">converting numbers to strings</a></td><td class="printindex-index-section"><a href="#Strings-And-Numbers">Strings And Numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-null-strings-deleting-array-elements-and">deleting array elements and</a></td><td class="printindex-index-section"><a href="#Delete">Delete</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-null-strings-in-gawk-arguments_002c-quoting-and">in <code class="command">gawk</code> arguments, quoting and</a></td><td class="printindex-index-section"><a href="#Quoting">Quoting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-null-strings-in-gawk-arguments_002c-quoting-and-1">in <code class="command">gawk</code> arguments, quoting and</a></td><td class="printindex-index-section"><a href="#Other-Arguments">Other Arguments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-null-strings-matching">matching</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-number-of-array-elements">number of array elements</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">number sign (<code class="code">#</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-number-sign-_0028_0023_0029-_0023_0021-_0028executable-scripts_0029"><code class="code">#!</code> (executable scripts)</a></td><td class="printindex-index-section"><a href="#Executable-Scripts">Executable Scripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-number-sign-_0028_0023_0029-commenting">commenting</a></td><td class="printindex-index-section"><a href="#Comments">Comments</a></td></tr>
<tr><td></td><td class="printindex-index-entry">numbers</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-numbers-as-array-subscripts">as array subscripts</a></td><td class="printindex-index-section"><a href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-numbers-as-string-of-bits">as string of bits</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-numbers-as-values-of-characters">as values of characters</a></td><td class="printindex-index-section"><a href="#Ordinal-Functions">Ordinal Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-numbers-Cliff-random">Cliff random</a></td><td class="printindex-index-section"><a href="#Cliff-Random-Function">Cliff Random Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-numbers-converting">converting</a></td><td class="printindex-index-section"><a href="#Strings-And-Numbers">Strings And Numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-numbers-converting-1">converting</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-numbers-converting-to-strings">to strings</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-numbers-converting-to-strings-1">to strings</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-numbers-hexadecimal">hexadecimal</a></td><td class="printindex-index-section"><a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-numbers-octal">octal</a></td><td class="printindex-index-section"><a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-numbers-rounding">rounding</a></td><td class="printindex-index-section"><a href="#Round-Function">Round Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry">numeric</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-numeric-constants">constants</a></td><td class="printindex-index-section"><a href="#Scalar-Constants">Scalar Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-numeric-functions">functions</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-numeric-output-format">output format</a></td><td class="printindex-index-section"><a href="#OFMT">OFMT</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-numeric-strings">strings</a></td><td class="printindex-index-section"><a href="#Variable-Typing">Variable Typing</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-O">O</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-o-debugger-command-_0028alias-for-option_0029"><code class="code">o</code> debugger command (alias for <code class="code">option</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-obsolete-features">obsolete features</a></td><td class="printindex-index-section"><a href="#Obsolete">Obsolete</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-octal-numbers">octal numbers</a></td><td class="printindex-index-section"><a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-octal-values_002c-enabling-interpretation-of">octal values, enabling interpretation of</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-OFMT-variable"><code class="code">OFMT</code> variable</a></td><td class="printindex-index-section"><a href="#OFMT">OFMT</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-OFMT-variable-1"><code class="code">OFMT</code> variable</a></td><td class="printindex-index-section"><a href="#Strings-And-Numbers">Strings And Numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-OFMT-variable-2"><code class="code">OFMT</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-OFMT-variable-POSIX-awk-and">POSIX <code class="command">awk</code> and</a></td><td class="printindex-index-section"><a href="#OFMT">OFMT</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-OFS-variable"><code class="code">OFS</code> variable</a></td><td class="printindex-index-section"><a href="#Changing-Fields">Changing Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-OFS-variable-1"><code class="code">OFS</code> variable</a></td><td class="printindex-index-section"><a href="#Output-Separators">Output Separators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-OFS-variable-2"><code class="code">OFS</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-op_002dcodes_002c-trace-of-internal">op-codes, trace of internal</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-OpenBSD">OpenBSD</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-OpenSolaris">OpenSolaris</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-operating-systems">operating systems</a></td><td class="printindex-index-section"><a href="#Installation">Installation</a></td></tr>
<tr><td></td><td class="printindex-index-entry">operating systems</td><td class="printindex-index-see-also"><em class="emph">See also</em> GNU/Linux</td></tr>
<tr><td></td><td class="printindex-index-entry">operating systems</td><td class="printindex-index-see-also"><em class="emph">See also</em> PC operating systems</td></tr>
<tr><td></td><td class="printindex-index-entry">operating systems</td><td class="printindex-index-see-also"><em class="emph">See also</em> Unix</td></tr>
<tr><td></td><td class="printindex-index-entry">operating systems</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operating-systems-BSD_002dbased">BSD-based</a></td><td class="printindex-index-section"><a href="#Manual-History">Manual History</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operating-systems-PC_002c-gawk-on">PC, <code class="command">gawk</code> on</a></td><td class="printindex-index-section"><a href="#PC-Using">PC Using</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-operating-systems-PC_002c-gawk-on-installing">installing</a></td><td class="printindex-index-section"><a href="#PC-Installation">PC Installation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operating-systems-porting-gawk-to">porting <code class="command">gawk</code> to</a></td><td class="printindex-index-section"><a href="#New-Ports">New Ports</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-operations_002c-bitwise">operations, bitwise</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">operators</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-arithmetic">arithmetic</a></td><td class="printindex-index-section"><a href="#Arithmetic-Ops">Arithmetic Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-assignment">assignment</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-assignment-1">assignment</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-operators-assignment-evaluation-order">evaluation order</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-comparison">comparison</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-decrement_002fincrement">decrement/increment</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-GNU_002dspecific">GNU-specific</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-input_002foutput">input/output</a></td><td class="printindex-index-section"><a href="#Getline_002fFile">Getline/File</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-input_002foutput-1">input/output</a></td><td class="printindex-index-section"><a href="#Getline_002fPipe">Getline/Pipe</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-input_002foutput-2">input/output</a></td><td class="printindex-index-section"><a href="#Getline_002fCoprocess">Getline/Coprocess</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-input_002foutput-3">input/output</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-input_002foutput-4">input/output</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-input_002foutput-5">input/output</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-input_002foutput-6">input/output</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-input_002foutput-7">input/output</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-precedence-of">precedence of</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-precedence-of-1">precedence of</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-short_002dcircuit">short-circuit</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-string">string</a></td><td class="printindex-index-section"><a href="#Concatenation">Concatenation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-string_002dmatching">string-matching</a></td><td class="printindex-index-section"><a href="#Regexp-Usage">Regexp Usage</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-operators-string_002dmatching-for-buffers">for buffers</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-operators-word_002dboundary-_0028gawk_0029">word-boundary (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">operators, Boolean, <em class="emph">See</em> Boolean expressions</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-see-entry">operators, logical, <em class="emph">See</em> Boolean expressions</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-see-entry">operators, relational, <em class="emph">See</em> operators, comparison</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-option-debugger-command"><code class="code">option</code> debugger command</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry">options</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-options-command_002dline">command-line</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-options-command_002dline-end-of">end of</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-options-command_002dline-invoking-awk">invoking <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Command-Line">Command Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-options-command_002dline-processing">processing</a></td><td class="printindex-index-section"><a href="#Getopt-Function">Getopt Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-options-deprecated">deprecated</a></td><td class="printindex-index-section"><a href="#Obsolete">Obsolete</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-options-long">long</a></td><td class="printindex-index-section"><a href="#Command-Line">Command Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-options-long-1">long</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-options-printing-list-of">printing list of</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-OR-bitwise-operation">OR bitwise operation</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-or-Boolean_002dlogic-operator">or Boolean-logic operator</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-or_0028_0029-function-_0028gawk_0029"><code class="code">or()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ord_0028_0029-extension-function"><code class="code">ord()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Ord">Extension Sample Ord</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ord_0028_0029-user_002ddefined-function"><code class="code">ord()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Ordinal-Functions">Ordinal Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-order-of-evaluation_002c-concatenation">order of evaluation, concatenation</a></td><td class="printindex-index-section"><a href="#Concatenation">Concatenation</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ORS-variable"><code class="code">ORS</code> variable</a></td><td class="printindex-index-section"><a href="#Output-Separators">Output Separators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ORS-variable-1"><code class="code">ORS</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry">output</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-output-buffering">buffering</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-output-buffering-1">buffering</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-output-duplicating-into-files">duplicating into files</a></td><td class="printindex-index-section"><a href="#Tee-Program">Tee Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-output-files_002c-closing">files, closing</a></td><td class="printindex-index-section"><a href="#Close-Files-And-Pipes">Close Files And Pipes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-output-format-specifier_002c-OFMT">format specifier, <code class="code">OFMT</code></a></td><td class="printindex-index-section"><a href="#OFMT">OFMT</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-output-formatted">formatted</a></td><td class="printindex-index-section"><a href="#Printf">Printf</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-output-pipes">pipes</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-output-records">records</a></td><td class="printindex-index-section"><a href="#Output-Separators">Output Separators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-output-standard">standard</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">output field separator, <em class="emph">See</em> <code class="code">OFS</code> variable</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-see-entry">output record separator, <em class="emph">See</em> <code class="code">ORS</code> variable</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-output-redirection">output redirection</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-output-wrapper">output wrapper</a></td><td class="printindex-index-section"><a href="#Output-Wrappers">Output Wrappers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-output_002c-nonfatal">output, nonfatal</a></td><td class="printindex-index-section"><a href="#Nonfatal">Nonfatal</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">output, printing, <em class="emph">See</em> printing</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-P">P</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-p-debugger-command-_0028alias-for-print_0029"><code class="code">p</code> debugger command (alias for <code class="code">print</code>)</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-package_002c-definition-of">package, definition of</a></td><td class="printindex-index-section"><a href="#Global-Namespace">Global Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Papadopoulos_002c-Panos">Papadopoulos, Panos</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-parent-process-ID-of-gawk-process">parent process ID of <code class="command">gawk</code> process</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry">parentheses <code class="code">()</code></td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-parentheses-_0028_0029-in-a-profile">in a profile</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-parentheses-_0028_0029-regexp-operator">regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-password-file">password file</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Path-environment-variable"><code class="env">Path</code> environment variable</a></td><td class="printindex-index-section"><a href="#PC-Binary-Installation">PC Binary Installation</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-PATH-environment-variable"><code class="env">PATH</code> environment variable</a></td><td class="printindex-index-section"><a href="#Derived-Files">Derived Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-patsplit_0028_0029-function-_0028gawk_0029"><code class="code">patsplit()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-patterns">patterns</a></td><td class="printindex-index-section"><a href="#Patterns-and-Actions">Patterns and Actions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-patterns-Boolean-expressions-as">Boolean expressions as</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-patterns-comparison-expressions-as">comparison expressions as</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-patterns-counts_002c-in-a-profile">counts, in a profile</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-patterns-default">default</a></td><td class="printindex-index-section"><a href="#Very-Simple">Very Simple</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-patterns-empty">empty</a></td><td class="printindex-index-section"><a href="#Empty">Empty</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-patterns-expressions-as">expressions as</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-patterns-ranges-in">ranges in</a></td><td class="printindex-index-section"><a href="#Ranges">Ranges</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-patterns-regexp-constants-as">regexp constants as</a></td><td class="printindex-index-section"><a href="#Regexp-Usage">Regexp Usage</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-patterns-regexp-constants-as-1">regexp constants as</a></td><td class="printindex-index-section"><a href="#Regexp-Patterns">Regexp Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-patterns-regexp-constants-as-2">regexp constants as</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-patterns-types-of">types of</a></td><td class="printindex-index-section"><a href="#Pattern-Overview">Pattern Overview</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-pawk-_0028profiling-version-of-Brian-Kernighan_0027s-awk_0029"><code class="command">pawk</code> (profiling version of Brian Kernighan&rsquo;s <code class="command">awk</code>)</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-pawk_002c-awk_002dlike-facilities-for-Python"><code class="code">pawk</code>, <code class="command">awk</code>-like facilities for Python</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-PC-operating-systems_002c-gawk-on">PC operating systems, <code class="command">gawk</code> on</a></td><td class="printindex-index-section"><a href="#PC-Using">PC Using</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-PC-operating-systems_002c-gawk-on-installing">installing</a></td><td class="printindex-index-section"><a href="#PC-Installation">PC Installation</a></td></tr>
<tr><td></td><td class="printindex-index-entry">percent sign (<code class="code">%</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-percent-sign-_0028_0025_0029-_0025-operator"><code class="code">%</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-percent-sign-_0028_0025_0029-_0025_003d-operator"><code class="code">%=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-percent-sign-_0028_0025_0029-_0025_003d-operator-1"><code class="code">%=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-performance_002c-checking-issues">performance, checking issues</a></td><td class="printindex-index-section"><a href="#Performance-bugs">Performance bugs</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-period-_0028_002e_0029_002c-regexp-operator">period (<code class="code">.</code>), regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Perl">Perl</a></td><td class="printindex-index-section"><a href="#Future-Extensions">Future Extensions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-persistent-memory">persistent memory</a></td><td class="printindex-index-section"><a href="#Persistent-Memory">Persistent Memory</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-persistent-memory-compiled-into-gawk">compiled into <code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Peters_002c-Arno">Peters, Arno</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Peterson_002c-Hal">Peterson, Hal</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry">pipe</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-pipe-closing">closing</a></td><td class="printindex-index-section"><a href="#Close-Files-And-Pipes">Close Files And Pipes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-pipe-input">input</a></td><td class="printindex-index-section"><a href="#Getline_002fPipe">Getline/Pipe</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-pipe-output">output</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-pipe-output_002c-speeding-up">pipe output, speeding up</a></td><td class="printindex-index-section"><a href="#Noflush">Noflush</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-platform-running-on">platform running on</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Plauger_002c-P_002eJ_002e">Plauger, P.J.</a></td><td class="printindex-index-section"><a href="#Library-Functions">Library Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-plug_002din">plug-in</a></td><td class="printindex-index-section"><a href="#Extension-Intro">Extension Intro</a></td></tr>
<tr><td></td><td class="printindex-index-entry">plus sign (<code class="code">+</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-plus-sign-_0028_002b_0029-_002b-operator"><code class="code">+</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-plus-sign-_0028_002b_0029-_002b-operator-1"><code class="code">+</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-plus-sign-_0028_002b_0029-_002b_002b-operator"><code class="code">++</code> operator</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-plus-sign-_0028_002b_0029-_002b_002b-operator-1"><code class="code">++</code> operator</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-plus-sign-_0028_002b_0029-_002b_002b-operator-2"><code class="code">++</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-plus-sign-_0028_002b_0029-_002b_003d-operator"><code class="code">+=</code> operator</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-plus-sign-_0028_002b_0029-_002b_003d-operator-1"><code class="code">+=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-plus-sign-_0028_002b_0029-regexp-operator">regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-PMA-memory-allocator">PMA memory allocator</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-PMA-memory-allocator-1">PMA memory allocator</a></td><td class="printindex-index-section"><a href="#Persistent-Memory">Persistent Memory</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-PMA_005fVERBOSITY-environment-variable"><code class="env">PMA_VERBOSITY</code> environment variable</a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-PMA_005fVERBOSITY-environment-variable-1"><code class="env">PMA_VERBOSITY</code> environment variable</a></td><td class="printindex-index-section"><a href="#Persistent-Memory">Persistent Memory</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-pointers-to-functions">pointers to functions</a></td><td class="printindex-index-section"><a href="#Indirect-Calls">Indirect Calls</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-portability">portability</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-_002a_002a-operator-and"><code class="code">**</code> operator and</a></td><td class="printindex-index-section"><a href="#Arithmetic-Ops">Arithmetic Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-_002a_002a_003d-operator-and"><code class="code">**=</code> operator and</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-_0023_0021-_0028executable-scripts_0029"><code class="code">#!</code> (executable scripts)</a></td><td class="printindex-index-section"><a href="#Executable-Scripts">Executable Scripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-ARGV-variable"><code class="code">ARGV</code> variable</a></td><td class="printindex-index-section"><a href="#Executable-Scripts">Executable Scripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-backslash-continuation-and">backslash continuation and</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-backslash-in-escape-sequences">backslash in escape sequences</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-close_0028_0029-function-and"><code class="code">close()</code> function and</a></td><td class="printindex-index-section"><a href="#Close-Files-And-Pipes">Close Files And Pipes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-data-files-as-single-record">data files as single record</a></td><td class="printindex-index-section"><a href="#gawk-split-records">gawk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-deleting-array-elements">deleting array elements</a></td><td class="printindex-index-section"><a href="#Delete">Delete</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-example-programs">example programs</a></td><td class="printindex-index-section"><a href="#Library-Functions">Library Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-functions_002c-defining">functions, defining</a></td><td class="printindex-index-section"><a href="#Definition-Syntax">Definition Syntax</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-gawk"><code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#New-Ports">New Ports</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-gettext-library-and"><code class="command">gettext</code> library and</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-internationalization-and">internationalization and</a></td><td class="printindex-index-section"><a href="#I18N-Portability">I18N Portability</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-length_0028_0029-function"><code class="code">length()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-new-awk-vs_002e-old-awk">new <code class="command">awk</code> vs. old <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Strings-And-Numbers">Strings And Numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-next-statement-in-user_002ddefined-functions"><code class="code">next</code> statement in user-defined functions</a></td><td class="printindex-index-section"><a href="#Function-Caveats">Function Caveats</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-NF-variable_002c-decrementing"><code class="code">NF</code> variable, decrementing</a></td><td class="printindex-index-section"><a href="#Changing-Fields">Changing Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-operators">operators</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-portability-operators-not-in-POSIX-awk">not in POSIX <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-POSIXLY_005fCORRECT-environment-variable"><code class="env">POSIXLY_CORRECT</code> environment variable</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portability-substr_0028_0029-function"><code class="code">substr()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">portable object</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portable-object-files">files</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portable-object-files-1">files</a></td><td class="printindex-index-section"><a href="#Translator-i18n">Translator i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-portable-object-files-converting-to-message-object-files">converting to message object files</a></td><td class="printindex-index-section"><a href="#I18N-Example">I18N Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-portable-object-files-generating">generating</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-portable-object-template-files">template files</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-porting-gawk">porting <code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#New-Ports">New Ports</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-positional-specifiers_002c-printf-statement">positional specifiers, <code class="code">printf</code> statement</a></td><td class="printindex-index-section"><a href="#Format-Modifiers">Format Modifiers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-positional-specifiers_002c-printf-statement-1">positional specifiers, <code class="code">printf</code> statement</a></td><td class="printindex-index-section"><a href="#Printf-Ordering">Printf Ordering</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-positional-specifiers_002c-printf-statement-mixing-with-regular-formats">mixing with regular formats</a></td><td class="printindex-index-section"><a href="#Printf-Ordering">Printf Ordering</a></td></tr>
<tr><td></td><td class="printindex-index-entry">POSIX</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-and"><code class="command">awk</code> and</a></td><td class="printindex-index-section"><a href="#Preface">Preface</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-gawk-extensions-not-included-in"><code class="command">gawk</code> extensions not included in</a></td><td class="printindex-index-section"><a href="#POSIX_002fGNU">POSIX/GNU</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-programs_002c-implementing-in-awk">programs, implementing in <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Clones">Clones</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIX-awk">POSIX <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#This-Manual">This Manual</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIX-awk-1">POSIX <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-_002a_002a-operator-and"><code class="code">**</code> operator and</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-_002a_002a_003d-operator-and"><code class="code">**=</code> operator and</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-_003c-operator-and"><code class="code">&lt;</code> operator and</a></td><td class="printindex-index-section"><a href="#Getline_002fFile">Getline/File</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-_007c-I_002fO-operator-and"><code class="code">|</code> I/O operator and</a></td><td class="printindex-index-section"><a href="#Getline_002fPipe">Getline/Pipe</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-arithmetic-operators-and">arithmetic operators and</a></td><td class="printindex-index-section"><a href="#Arithmetic-Ops">Arithmetic Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-backslashes-in-string-constants">backslashes in string constants</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-BEGIN_002fEND-patterns"><code class="code">BEGIN</code>/<code class="code">END</code> patterns</a></td><td class="printindex-index-section"><a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-bracket-expressions-and">bracket expressions and</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-POSIX-awk-bracket-expressions-and-character-classes">character classes</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-POSIX-awk-bracket-expressions-and-character-classes-1">character classes</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-break-statement-and"><code class="code">break</code> statement and</a></td><td class="printindex-index-section"><a href="#Break-Statement">Break Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-changes-in-awk-versions">changes in <code class="command">awk</code> versions</a></td><td class="printindex-index-section"><a href="#POSIX">POSIX</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-continue-statement-and"><code class="code">continue</code> statement and</a></td><td class="printindex-index-section"><a href="#Continue-Statement">Continue Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-CONVFMT-variable-and"><code class="code">CONVFMT</code> variable and</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-date-utility-and"><code class="code">date</code> utility and</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-field-separators-and">field separators and</a></td><td class="printindex-index-section"><a href="#Full-Line-Fields">Full Line Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-function-keyword-in"><code class="code">function</code> keyword in</a></td><td class="printindex-index-section"><a href="#Definition-Syntax">Definition Syntax</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">functions and</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-POSIX-awk-functions-and-gsub_0028_0029_002fsub_0028_0029"><code class="code">gsub()</code>/<code class="code">sub()</code></a></td><td class="printindex-index-section"><a href="#Gory-Details">Gory Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-POSIX-awk-functions-and-length_0028_0029"><code class="code">length()</code></a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-GNU-long-options-and">GNU long options and</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-interval-expressions-in">interval expressions in</a></td><td class="printindex-index-section"><a href="#Interval-Expressions">Interval Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-next_002fnextfile-statements-and"><code class="code">next</code>/<code class="code">nextfile</code> statements and</a></td><td class="printindex-index-section"><a href="#Next-Statement">Next Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-numeric-strings-and">numeric strings and</a></td><td class="printindex-index-section"><a href="#Variable-Typing">Variable Typing</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-OFMT-variable-and"><code class="code">OFMT</code> variable and</a></td><td class="printindex-index-section"><a href="#OFMT">OFMT</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-OFMT-variable-and-1"><code class="code">OFMT</code> variable and</a></td><td class="printindex-index-section"><a href="#Strings-And-Numbers">Strings And Numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-period-_0028_002e_0029_002c-using">period (<code class="code">.</code>), using</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-printf-format-strings-and"><code class="code">printf</code> format strings and</a></td><td class="printindex-index-section"><a href="#Format-Modifiers">Format Modifiers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-regular-expressions-and">regular expressions and</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-POSIX-awk-timestamps-and">timestamps and</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIX-mode">POSIX mode</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIX-mode-1">POSIX mode</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIX-mode-2">POSIX mode</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIX-mode-3">POSIX mode</a></td><td class="printindex-index-section"><a href="#Input-Summary">Input Summary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIX-mode-4">POSIX mode</a></td><td class="printindex-index-section"><a href="#Special-Caveats">Special Caveats</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIX-mode-5">POSIX mode</a></td><td class="printindex-index-section"><a href="#Close-Return-Value">Close Return Value</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIX-mode-6">POSIX mode</a></td><td class="printindex-index-section"><a href="#Scalar-Constants">Scalar Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIX-mode-7">POSIX mode</a></td><td class="printindex-index-section"><a href="#Locale-influences-conversions">Locale influences conversions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIX-mode-8">POSIX mode</a></td><td class="printindex-index-section"><a href="#POSIX-String-Comparison">POSIX String Comparison</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIX-mode-9">POSIX mode</a></td><td class="printindex-index-section"><a href="#POSIX-String-Comparison">POSIX String Comparison</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIX-mode-10">POSIX mode</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIX-mode-11">POSIX mode</a></td><td class="printindex-index-section"><a href="#Controlling-Array-Traversal">Controlling Array Traversal</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIX-mode-12">POSIX mode</a></td><td class="printindex-index-section"><a href="#POSIX-Floating-Point-Problems">POSIX Floating Point Problems</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIX-mode-13">POSIX mode</a></td><td class="printindex-index-section"><a href="#Feature-History">Feature History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIXLY_005fCORRECT-environment-variable"><code class="env">POSIXLY_CORRECT</code> environment variable</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIXLY_005fCORRECT-environment-variable-1"><code class="env">POSIXLY_CORRECT</code> environment variable</a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIXLY_005fCORRECT-environment-variable-2"><code class="env">POSIXLY_CORRECT</code> environment variable</a></td><td class="printindex-index-section"><a href="#Invoking-Summary">Invoking Summary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-POSIXLY_005fCORRECT-environment-variable-3"><code class="env">POSIXLY_CORRECT</code> environment variable</a></td><td class="printindex-index-section"><a href="#Locale-influences-conversions">Locale influences conversions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-PREC-variable"><code class="code">PREC</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-precedence">precedence</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-precedence-1">precedence</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-precedence-regexp-operators">regexp operators</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-predefined-variables">predefined variables</a></td><td class="printindex-index-section"><a href="#Built_002din-Variables">Built-in Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-predefined-variables-_002dv-option_002c-setting-with"><code class="code">-v</code> option, setting with</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-predefined-variables-conveying-information">conveying information</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-predefined-variables-user_002dmodifiable">user-modifiable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-pretty-printer_002c-interaction-with-namespaces">pretty printer, interaction with namespaces</a></td><td class="printindex-index-section"><a href="#Namespace-And-Features">Namespace And Features</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-pretty-printing">pretty printing</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-pretty-printing-1">pretty printing</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-pretty-printing-profiling_002c-difference-with">profiling, difference with</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-print-debugger-command"><code class="code">print</code> debugger command</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-print-statement"><code class="code">print</code> statement</a></td><td class="printindex-index-section"><a href="#Printing">Printing</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">print</code> statement</td><td class="printindex-index-see-also"><em class="emph">See also</em> redirection of output</td></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">print</code> statement</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-print-statement-BEGIN_002fEND-patterns-and"><code class="code">BEGIN</code>/<code class="code">END</code> patterns and</a></td><td class="printindex-index-section"><a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-print-statement-commas_002c-omitting">commas, omitting</a></td><td class="printindex-index-section"><a href="#Print-Examples">Print Examples</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-print-statement-I_002fO-operators-in">I/O operators in</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-print-statement-line-continuations-and">line continuations and</a></td><td class="printindex-index-section"><a href="#Print-Examples">Print Examples</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-print-statement-OFMT-variable-and"><code class="code">OFMT</code> variable and</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-print-statement-sprintf_0028_0029-function-and"><code class="code">sprintf()</code> function and</a></td><td class="printindex-index-section"><a href="#Round-Function">Round Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-print-variables_002c-in-debugger">print variables, in debugger</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-printf-debugger-command"><code class="code">printf</code> debugger command</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-printf-statement"><code class="code">printf</code> statement</a></td><td class="printindex-index-section"><a href="#Printing">Printing</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-printf-statement-1"><code class="code">printf</code> statement</a></td><td class="printindex-index-section"><a href="#Printf">Printf</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">printf</code> statement</td><td class="printindex-index-see-also"><em class="emph">See also</em> redirection of output</td></tr>
<tr><td></td><td class="printindex-index-entry"><code class="code">printf</code> statement</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-printf-statement-columns_002c-aligning">columns, aligning</a></td><td class="printindex-index-section"><a href="#Print-Examples">Print Examples</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-printf-statement-format_002dcontrol-characters">format-control characters</a></td><td class="printindex-index-section"><a href="#Control-Letters">Control Letters</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-printf-statement-I_002fO-operators-in">I/O operators in</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-printf-statement-modifiers">modifiers</a></td><td class="printindex-index-section"><a href="#Format-Modifiers">Format Modifiers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-printf-statement-positional-specifiers">positional specifiers</a></td><td class="printindex-index-section"><a href="#Format-Modifiers">Format Modifiers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-printf-statement-positional-specifiers-1">positional specifiers</a></td><td class="printindex-index-section"><a href="#Printf-Ordering">Printf Ordering</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-printf-statement-positional-specifiers-mixing-with-regular-formats">mixing with regular formats</a></td><td class="printindex-index-section"><a href="#Printf-Ordering">Printf Ordering</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-printf-statement-sprintf_0028_0029-function-and"><code class="code">sprintf()</code> function and</a></td><td class="printindex-index-section"><a href="#Round-Function">Round Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-printf-statement-syntax-of">syntax of</a></td><td class="printindex-index-section"><a href="#Basic-Printf">Basic Printf</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-printing">printing</a></td><td class="printindex-index-section"><a href="#Printing">Printing</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-printing-list-of-options">list of options</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-printing-mailing-labels">mailing labels</a></td><td class="printindex-index-section"><a href="#Labels-Program">Labels Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-printing-messages-from-extensions">messages from extensions</a></td><td class="printindex-index-section"><a href="#Printing-Messages">Printing Messages</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-printing-unduplicated-lines-of-text">unduplicated lines of text</a></td><td class="printindex-index-section"><a href="#Uniq-Program">Uniq Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-printing-user-information">user information</a></td><td class="printindex-index-section"><a href="#Id-Program">Id Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-private-variables">private variables</a></td><td class="printindex-index-section"><a href="#Library-Names">Library Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-process-group-ID-of-gawk-process">process group ID of <code class="command">gawk</code> process</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-process-ID-of-gawk-process">process ID of <code class="command">gawk</code> process</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-processes_002c-two_002dway-communications-with">processes, two-way communications with</a></td><td class="printindex-index-section"><a href="#Two_002dway-I_002fO">Two-way I/O</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-processing-data">processing data</a></td><td class="printindex-index-section"><a href="#Basic-High-Level">Basic High Level</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-PROCINFO-array"><code class="code">PROCINFO</code> array</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-PROCINFO-array-1"><code class="code">PROCINFO</code> array</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-PROCINFO-array-2"><code class="code">PROCINFO</code> array</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-PROCINFO-array-communications-via-ptys-and">communications via ptys and</a></td><td class="printindex-index-section"><a href="#Two_002dway-I_002fO">Two-way I/O</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-PROCINFO-array-group-membership-and">group membership and</a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-PROCINFO-array-nonfatal-output">nonfatal output</a></td><td class="printindex-index-section"><a href="#Nonfatal">Nonfatal</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-PROCINFO-array-not-flushing-pipe-buffers">not flushing pipe buffers</a></td><td class="printindex-index-section"><a href="#Noflush">Noflush</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-PROCINFO-array-platform-running-on">platform running on</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-PROCINFO-array-testing-the-field-splitting">testing the field splitting</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-PROCINFO-array-user-and-group-ID-numbers-and">user and group ID numbers and</a></td><td class="printindex-index-section"><a href="#Id-Program">Id Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-PROCINFO-array-values-of-sorted_005fin">values of <code class="code">sorted_in</code></a></td><td class="printindex-index-section"><a href="#Controlling-Scanning">Controlling Scanning</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-profiler_002c-interaction-with-namespaces">profiler, interaction with namespaces</a></td><td class="printindex-index-section"><a href="#Namespace-And-Features">Namespace And Features</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-profiling-awk-programs">profiling <code class="command">awk</code> programs</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-profiling-awk-programs-dynamically">dynamically</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-profiling_002c-compiling-gawk-for">profiling, compiling <code class="command">gawk</code> for</a></td><td class="printindex-index-section"><a href="#Performance-bugs">Performance bugs</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-profiling_002c-pretty-printing_002c-difference-with">profiling, pretty printing, difference with</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-program-identifiers">program identifiers</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-program_002c-definition-of">program, definition of</a></td><td class="printindex-index-section"><a href="#Getting-Started">Getting Started</a></td></tr>
<tr><td></td><td class="printindex-index-entry">programming</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-programming-basic-steps">basic steps</a></td><td class="printindex-index-section"><a href="#Basic-High-Level">Basic High Level</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-programming-concepts">concepts</a></td><td class="printindex-index-section"><a href="#Basic-Concepts">Basic Concepts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-programming-concepts-1">concepts</a></td><td class="printindex-index-section"><a href="#Basic-Concepts">Basic Concepts</a></td></tr>
<tr><td></td><td class="printindex-index-entry">programming conventions</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-programming-conventions-_002d_002dnon_002ddecimal_002ddata-option"><samp class="option">--non-decimal-data</samp> option</a></td><td class="printindex-index-section"><a href="#Nondecimal-Data">Nondecimal Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-programming-conventions-ARGC_002fARGV-variables"><code class="code">ARGC</code>/<code class="code">ARGV</code> variables</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-programming-conventions-exit-statement"><code class="code">exit</code> statement</a></td><td class="printindex-index-section"><a href="#Exit-Statement">Exit Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-programming-conventions-function-parameters">function parameters</a></td><td class="printindex-index-section"><a href="#Return-Statement">Return Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">functions</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-programming-conventions-functions-calling">calling</a></td><td class="printindex-index-section"><a href="#Calling-Built_002din">Calling Built-in</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-programming-conventions-functions-writing">writing</a></td><td class="printindex-index-section"><a href="#Definition-Syntax">Definition Syntax</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-programming-conventions-gawk-extensions"><code class="command">gawk</code> extensions</a></td><td class="printindex-index-section"><a href="#Internal-File-Ops">Internal File Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-programming-conventions-private-variable-names">private variable names</a></td><td class="printindex-index-section"><a href="#Library-Names">Library Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-programming-language_002c-recipe-for">programming language, recipe for</a></td><td class="printindex-index-section"><a href="#History">History</a></td></tr>
<tr><td></td><td class="printindex-index-entry">programming languages</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-programming-languages-Ada">Ada</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-programming-languages-data_002ddriven-vs_002e-procedural">data-driven vs. procedural</a></td><td class="printindex-index-section"><a href="#Getting-Started">Getting Started</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-programming-languages-Go">Go</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-programming-languages-Go-1">Go</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-programming-languages-Java">Java</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Proulx_002c-Bob">Proulx, Bob</a></td><td class="printindex-index-section"><a href="#Asking-for-help">Asking for help</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-pwcat-program"><code class="command">pwcat</code> program</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-Q">Q</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-q-debugger-command-_0028alias-for-quit_0029"><code class="code">q</code> debugger command (alias for <code class="code">quit</code>)</a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-QSE-awk">QSE <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">qualified name</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-qualified-name-definition-of">definition of</a></td><td class="printindex-index-section"><a href="#Qualified-Names">Qualified Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-qualified-name-use-of">use of</a></td><td class="printindex-index-section"><a href="#Qualified-Names">Qualified Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Quanstrom_002c-Erik">Quanstrom, Erik</a></td><td class="printindex-index-section"><a href="#Alarm-Program">Alarm Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry">question mark (<code class="code">?</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-question-mark-_0028_003f_0029-_003f_003a-operator"><code class="code">?:</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-question-mark-_0028_003f_0029-regexp-operator">regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-question-mark-_0028_003f_0029-regexp-operator-1">regexp operator</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-QuikTrim-Awk">QuikTrim Awk</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-quit-debugger-command"><code class="code">quit</code> debugger command</a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-QUIT-signal-_0028MS_002dWindows_0029"><code class="code">QUIT</code> signal (MS-Windows)</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry">quoting</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-quoting-for-small-awk-programs">for small awk programs</a></td><td class="printindex-index-section"><a href="#Comments">Comments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-quoting-in-gawk-command-lines">in <code class="command">gawk</code> command lines</a></td><td class="printindex-index-section"><a href="#Long">Long</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-quoting-in-gawk-command-lines-1">in <code class="command">gawk</code> command lines</a></td><td class="printindex-index-section"><a href="#Other-Arguments">Other Arguments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-quoting-in-gawk-command-lines-tricks-for">tricks for</a></td><td class="printindex-index-section"><a href="#Quoting">Quoting</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-R">R</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-r-debugger-command-_0028alias-for-run_0029"><code class="code">r</code> debugger command (alias for <code class="code">run</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Rakitzis_002c-Byron">Rakitzis, Byron</a></td><td class="printindex-index-section"><a href="#History-Sorting">History Sorting</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Ramey_002c-Chet">Ramey, Chet</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Ramey_002c-Chet-1">Ramey, Chet</a></td><td class="printindex-index-section"><a href="#General-Data-Types">General Data Types</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Ramming_002c-J_002e-Christopher">Ramming, J. Christopher</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-rand_0028_0029-function"><code class="code">rand()</code> function</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">random numbers</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-random-numbers-Cliff">Cliff</a></td><td class="printindex-index-section"><a href="#Cliff-Random-Function">Cliff Random Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-random-numbers-rand_0028_0029_002fsrand_0028_0029-functions"><code class="code">rand()</code>/<code class="code">srand()</code> functions</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-random-numbers-seed-of">seed of</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-range-expressions-_0028regexps_0029">range expressions (regexps)</a></td><td class="printindex-index-section"><a href="#Bracket-Expressions">Bracket Expressions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-range-patterns">range patterns</a></td><td class="printindex-index-section"><a href="#Ranges">Ranges</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-range-patterns-line-continuation-and">line continuation and</a></td><td class="printindex-index-section"><a href="#Ranges">Ranges</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Rankin_002c-Pat">Rankin, Pat</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Rankin_002c-Pat-1">Rankin, Pat</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Rankin_002c-Pat-2">Rankin, Pat</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-RapidJson-JSON-parser-library">RapidJson JSON parser library</a></td><td class="printindex-index-section"><a href="#gawkextlib">gawkextlib</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-reada_0028_0029-extension-function"><code class="code">reada()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Read-write-array">Extension Sample Read write array</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-readable-data-files_002c-checking">readable data files, checking</a></td><td class="printindex-index-section"><a href="#File-Checking">File Checking</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-readable_002eawk-program"><samp class="file">readable.awk</samp> program</a></td><td class="printindex-index-section"><a href="#File-Checking">File Checking</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-readall_0028_0029-extension-function"><code class="code">readall()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Read-write-array">Extension Sample Read write array</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-readdir-extension"><code class="code">readdir</code> extension</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Readdir">Extension Sample Readdir</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-readfile_0028_0029-extension-function"><code class="code">readfile()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Readfile">Extension Sample Readfile</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-readfile_0028_0029-user_002ddefined-function"><code class="code">readfile()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Readfile-Function">Readfile Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-reading-input-files">reading input files</a></td><td class="printindex-index-section"><a href="#Reading-Files">Reading Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-REALLY_005fUSE_005fPERSIST_005fMALLOC-environment-variable"><code class="env">REALLY_USE_PERSIST_MALLOC</code> environment variable</a></td><td class="printindex-index-section"><a href="#Persistent-Memory">Persistent Memory</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-recipe-for-a-programming-language">recipe for a programming language</a></td><td class="printindex-index-section"><a href="#History">History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-record-separators">record separators</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-record-separators-1">record separators</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-record-separators-changing">changing</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-record-separators-newlines-as">newlines as</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-record-separators-regular-expressions-as">regular expressions as</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-record-separators-with-multiline-records">with multiline records</a></td><td class="printindex-index-section"><a href="#Multiple-Line">Multiple Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-records">records</a></td><td class="printindex-index-section"><a href="#Reading-Files">Reading Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-records-1">records</a></td><td class="printindex-index-section"><a href="#Basic-High-Level">Basic High Level</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-records-multiline">multiline</a></td><td class="printindex-index-section"><a href="#Multiple-Line">Multiple Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-records-printing">printing</a></td><td class="printindex-index-section"><a href="#Print">Print</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-records-splitting-input-into">splitting input into</a></td><td class="printindex-index-section"><a href="#Records">Records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-records-terminating">terminating</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-records-treating-files-as">treating files as</a></td><td class="printindex-index-section"><a href="#gawk-split-records">gawk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-recursive-functions">recursive functions</a></td><td class="printindex-index-section"><a href="#Definition-Syntax">Definition Syntax</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-redirect-gawk-output_002c-in-debugger">redirect <code class="command">gawk</code> output, in debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry">redirection</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-redirection-of-input">of input</a></td><td class="printindex-index-section"><a href="#Getline_002fFile">Getline/File</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-redirection-of-output">of output</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-redirection-on-OpenVMS">on OpenVMS</a></td><td class="printindex-index-section"><a href="#OpenVMS-Running">OpenVMS Running</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-reference-counting_002c-sorting-arrays">reference counting, sorting arrays</a></td><td class="printindex-index-section"><a href="#Array-Sorting-Functions">Array Sorting Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-regexp">regexp</a></td><td class="printindex-index-section"><a href="#Regexp">Regexp</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-regexp-constants">regexp constants</a></td><td class="printindex-index-section"><a href="#Regexp-Usage">Regexp Usage</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-regexp-constants-1">regexp constants</a></td><td class="printindex-index-section"><a href="#Regexp-Constants">Regexp Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-regexp-constants-2">regexp constants</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><code class="code">/=&hellip;/</code></td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-regexp-constants-_002f_003d_2026_002f-_002f_003d-operator-and"><code class="code">/=</code> operator and</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regexp-constants-as-patterns">as patterns</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regexp-constants-in-gawk">in <code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Standard-Regexp-Constants">Standard Regexp Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regexp-constants-slashes-vs_002e-quotes">slashes vs. quotes</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regexp-constants-vs_002e-string-constants">vs. string constants</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-regexps_002c-empty">regexps, empty</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-register-loadable-extension">register loadable extension</a></td><td class="printindex-index-section"><a href="#Registration-Functions">Registration Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-regular-expressions">regular expressions</a></td><td class="printindex-index-section"><a href="#Regexp">Regexp</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regular-expressions-anchors-in">anchors in</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regular-expressions-as-field-separators">as field separators</a></td><td class="printindex-index-section"><a href="#Field-Separators">Field Separators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regular-expressions-as-field-separators-1">as field separators</a></td><td class="printindex-index-section"><a href="#Regexp-Field-Splitting">Regexp Field Splitting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regular-expressions-as-patterns">as patterns</a></td><td class="printindex-index-section"><a href="#Regexp-Usage">Regexp Usage</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regular-expressions-as-patterns-1">as patterns</a></td><td class="printindex-index-section"><a href="#Regexp-Patterns">Regexp Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regular-expressions-as-record-separators">as record separators</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regular-expressions-case-sensitivity">case sensitivity</a></td><td class="printindex-index-section"><a href="#Case_002dsensitivity">Case-sensitivity</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regular-expressions-case-sensitivity-1">case sensitivity</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regular-expressions-computed">computed</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regular-expressions-dynamic">dynamic</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-regular-expressions-dynamic-with-embedded-newlines">with embedded newlines</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regular-expressions-gawk_002c-command_002dline-options"><code class="command">gawk</code>, command-line options</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regular-expressions-interval-expressions-and">interval expressions and</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regular-expressions-leftmost-longest-match">leftmost longest match</a></td><td class="printindex-index-section"><a href="#Leftmost-Longest">Leftmost Longest</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regular-expressions-operators">operators</a></td><td class="printindex-index-section"><a href="#Regexp-Usage">Regexp Usage</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regular-expressions-operators-1">operators</a></td><td class="printindex-index-section"><a href="#Regexp-Operators">Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-regular-expressions-operators-for-buffers">for buffers</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-regular-expressions-operators-for-words">for words</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-regular-expressions-operators-gawk"><code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-regular-expressions-operators-precedence-of">precedence of</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-regular-expressions-searching-for">searching for</a></td><td class="printindex-index-section"><a href="#Egrep-Program">Egrep Program</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">regular expressions, constants, <em class="emph">See</em> regexp constants</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-see-entry">relational operators, <em class="emph">See</em> comparison operators</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-replace-in-string">replace in string</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-retrying-input">retrying input</a></td><td class="printindex-index-section"><a href="#Retrying-Input">Retrying Input</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-return-debugger-command"><code class="code">return</code> debugger command</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-return-statement_002c-user_002ddefined-functions"><code class="code">return</code> statement, user-defined functions</a></td><td class="printindex-index-section"><a href="#Return-Statement">Return Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-return-value_002c-close_0028_0029-function">return value, <code class="code">close()</code> function</a></td><td class="printindex-index-section"><a href="#Close-Return-Value">Close Return Value</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-rev_0028_0029-user_002ddefined-function"><code class="code">rev()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Function-Example">Function Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-revoutput-extension"><code class="code">revoutput</code> extension</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Revout">Extension Sample Revout</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-revtwoway-extension"><code class="code">revtwoway</code> extension</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Rev2way">Extension Sample Rev2way</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-rewind_0028_0029-user_002ddefined-function"><code class="code">rewind()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Rewind-Function">Rewind Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry">right angle bracket (<code class="code">&gt;</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-right-angle-bracket-_0028_003e_0029-_003e-operator"><code class="code">&gt;</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-right-angle-bracket-_0028_003e_0029-_003e-operator-1"><code class="code">&gt;</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-right-angle-bracket-_0028_003e_0029-_003e-operator-_0028I_002fO_0029"><code class="code">&gt;</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-right-angle-bracket-_0028_003e_0029-_003e_003d-operator"><code class="code">&gt;=</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-right-angle-bracket-_0028_003e_0029-_003e_003d-operator-1"><code class="code">&gt;=</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-right-angle-bracket-_0028_003e_0029-_003e_003e-operator-_0028I_002fO_0029"><code class="code">&gt;&gt;</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-right-angle-bracket-_0028_003e_0029-_003e_003e-operator-_0028I_002fO_0029-1"><code class="code">&gt;&gt;</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-right-shift_002c-bitwise">right shift, bitwise</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Ritchie_002c-Dennis">Ritchie, Dennis</a></td><td class="printindex-index-section"><a href="#Basic-Data-Typing">Basic Data Typing</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-RLENGTH-variable"><code class="code">RLENGTH</code> variable</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-RLENGTH-variable-match_0028_0029-function-and"><code class="code">match()</code> function and</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">Robbins</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Robbins-Arnold">Arnold</a></td><td class="printindex-index-section"><a href="#Command-Line-Field-Separator">Command Line Field Separator</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Robbins-Arnold-1">Arnold</a></td><td class="printindex-index-section"><a href="#Getline_002fPipe">Getline/Pipe</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Robbins-Arnold-2">Arnold</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Robbins-Arnold-3">Arnold</a></td><td class="printindex-index-section"><a href="#Alarm-Program">Alarm Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Robbins-Arnold-4">Arnold</a></td><td class="printindex-index-section"><a href="#General-Data-Types">General Data Types</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Robbins-Arnold-5">Arnold</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Robbins-Arnold-6">Arnold</a></td><td class="printindex-index-section"><a href="#Maintainers">Maintainers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Robbins-Arnold-7">Arnold</a></td><td class="printindex-index-section"><a href="#Future-Extensions">Future Extensions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Robbins-Bill">Bill</a></td><td class="printindex-index-section"><a href="#Getline_002fPipe">Getline/Pipe</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Robbins-Harry">Harry</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Robbins-Jean">Jean</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Robbins-Malka">Malka</a></td><td class="printindex-index-section"><a href="#Internationalization">Internationalization</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Robbins-Miriam">Miriam</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Robbins-Miriam-1">Miriam</a></td><td class="printindex-index-section"><a href="#Getline_002fPipe">Getline/Pipe</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Robbins-Miriam-2">Miriam</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Rommel_002c-Kai-Uwe">Rommel, Kai Uwe</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-round-to-nearest-integer">round to nearest integer</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-round_0028_0029-user_002ddefined-function"><code class="code">round()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Round-Function">Round Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-rounding-numbers">rounding numbers</a></td><td class="printindex-index-section"><a href="#Round-Function">Round Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ROUNDMODE-variable"><code class="code">ROUNDMODE</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-ROUNDMODE-variable-1"><code class="code">ROUNDMODE</code> variable</a></td><td class="printindex-index-section"><a href="#Setting-the-rounding-mode">Setting the rounding mode</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-RS-variable"><code class="code">RS</code> variable</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-RS-variable-1"><code class="code">RS</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-RS-variable-multiline-records-and">multiline records and</a></td><td class="printindex-index-section"><a href="#Multiple-Line">Multiple Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-rshift_0028_0029-function-_0028gawk_0029"><code class="code">rshift()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-RSTART-variable"><code class="code">RSTART</code> variable</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-RSTART-variable-match_0028_0029-function-and"><code class="code">match()</code> function and</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-RT-variable"><code class="code">RT</code> variable</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-RT-variable-1"><code class="code">RT</code> variable</a></td><td class="printindex-index-section"><a href="#gawk-split-records">gawk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-RT-variable-2"><code class="code">RT</code> variable</a></td><td class="printindex-index-section"><a href="#Multiple-Line">Multiple Line</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-RT-variable-3"><code class="code">RT</code> variable</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Rubin_002c-Paul">Rubin, Paul</a></td><td class="printindex-index-section"><a href="#History">History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Rubin_002c-Paul-1">Rubin, Paul</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-rule_002c-definition-of">rule, definition of</a></td><td class="printindex-index-section"><a href="#Getting-Started">Getting Started</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-run-debugger-command"><code class="code">run</code> debugger command</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-rvalues_002flvalues">rvalues/lvalues</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-S">S</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-s-debugger-command-_0028alias-for-step_0029"><code class="code">s</code> debugger command (alias for <code class="code">step</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-see-entry">Sailor Moon, <em class="emph">See</em> Moon, Sailor</td><td class="printindex-index-see-entry-section"></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sample-debugging-session">sample debugging session</a></td><td class="printindex-index-section"><a href="#Sample-Debugging-Session">Sample Debugging Session</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sandbox-mode">sandbox mode</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Saturday-Night-Live">Saturday Night Live</a></td><td class="printindex-index-section"><a href="#Dynamic-Typing">Dynamic Typing</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-save-debugger-options">save debugger options</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-scalar-or-array">scalar or array</a></td><td class="printindex-index-section"><a href="#Type-Functions">Type Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-scalar-values">scalar values</a></td><td class="printindex-index-section"><a href="#Basic-Data-Typing">Basic Data Typing</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-scanning-arrays">scanning arrays</a></td><td class="printindex-index-section"><a href="#Scanning-an-Array">Scanning an Array</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-scanning-multidimensional-arrays">scanning multidimensional arrays</a></td><td class="printindex-index-section"><a href="#Multiscanning">Multiscanning</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Schorr_002c-Andrew">Schorr, Andrew</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Schorr_002c-Andrew-1">Schorr, Andrew</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Schorr_002c-Andrew-2">Schorr, Andrew</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry">Schreiber</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Schreiber-Bert">Bert</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Schreiber-Rita">Rita</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-search-and-replace-in-strings">search and replace in strings</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-search-for-substring">search for substring</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-search-paths">search paths</a></td><td class="printindex-index-section"><a href="#Programs-Exercises">Programs Exercises</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-search-paths-1">search paths</a></td><td class="printindex-index-section"><a href="#PC-Using">PC Using</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-search-paths-2">search paths</a></td><td class="printindex-index-section"><a href="#OpenVMS-Running">OpenVMS Running</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-search-paths-for-loadable-extensions">for loadable extensions</a></td><td class="printindex-index-section"><a href="#AWKLIBPATH-Variable">AWKLIBPATH Variable</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-search-paths-for-source-files">for source files</a></td><td class="printindex-index-section"><a href="#AWKPATH-Variable">AWKPATH Variable</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-search-paths-for-source-files-1">for source files</a></td><td class="printindex-index-section"><a href="#Programs-Exercises">Programs Exercises</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-search-paths-for-source-files-2">for source files</a></td><td class="printindex-index-section"><a href="#PC-Using">PC Using</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-search-paths-for-source-files-3">for source files</a></td><td class="printindex-index-section"><a href="#OpenVMS-Running">OpenVMS Running</a></td></tr>
<tr><td></td><td class="printindex-index-entry">searching</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-searching-files-for-regular-expressions">files for regular expressions</a></td><td class="printindex-index-section"><a href="#Egrep-Program">Egrep Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-searching-for-words">for words</a></td><td class="printindex-index-section"><a href="#Dupword-Program">Dupword Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sed-utility"><code class="command">sed</code> utility</a></td><td class="printindex-index-section"><a href="#Full-Line-Fields">Full Line Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sed-utility-1"><code class="command">sed</code> utility</a></td><td class="printindex-index-section"><a href="#Simple-Sed">Simple Sed</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sed-utility-2"><code class="command">sed</code> utility</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-seeding-random-number-generator">seeding random number generator</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">semicolon (<code class="code">;</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-semicolon-_0028_003b_0029-AWKPATH-variable-and"><code class="env">AWKPATH</code> variable and</a></td><td class="printindex-index-section"><a href="#PC-Using">PC Using</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-semicolon-_0028_003b_0029-separating-rules">separating rules</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-semicolon-_0028_003b_0029-separating-statements-in-actions">separating statements in actions</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-semicolon-_0028_003b_0029-separating-statements-in-actions-1">separating statements in actions</a></td><td class="printindex-index-section"><a href="#Action-Overview">Action Overview</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-semicolon-_0028_003b_0029-separating-statements-in-actions-2">separating statements in actions</a></td><td class="printindex-index-section"><a href="#Statements">Statements</a></td></tr>
<tr><td></td><td class="printindex-index-entry">separators</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-separators-field">field</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-separators-field-1">field</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-separators-field-FIELDWIDTHS-variable-and"><code class="code">FIELDWIDTHS</code> variable and</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-separators-field-FPAT-variable-and"><code class="code">FPAT</code> variable and</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-separators-field-FS-variable-and"><code class="code">FS</code> variable and</a></td><td class="printindex-index-section"><a href="#Default-Field-Splitting">Default Field Splitting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-separators-for-records">for records</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-separators-for-records-1">for records</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-separators-for-records-2">for records</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-separators-for-records-regular-expressions-as">regular expressions as</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-separators-for-statements-in-actions">for statements in actions</a></td><td class="printindex-index-section"><a href="#Action-Overview">Action Overview</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-separators-subscript">subscript</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-set-breakpoint">set breakpoint</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-set-debugger-command"><code class="code">set</code> debugger command</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-set-directory-of-message-catalogs">set directory of message catalogs</a></td><td class="printindex-index-section"><a href="#I18N-Functions">I18N Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-set-watchpoint">set watchpoint</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-shadowing-of-variable-values">shadowing of variable values</a></td><td class="printindex-index-section"><a href="#Definition-Syntax">Definition Syntax</a></td></tr>
<tr><td></td><td class="printindex-index-entry">shell function</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-shell-function-gawklibpath_005fappend"><code class="command">gawklibpath_append</code></a></td><td class="printindex-index-section"><a href="#Shell-Startup-Files">Shell Startup Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-shell-function-gawklibpath_005fdefault"><code class="command">gawklibpath_default</code></a></td><td class="printindex-index-section"><a href="#Shell-Startup-Files">Shell Startup Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-shell-function-gawklibpath_005fprepend"><code class="command">gawklibpath_prepend</code></a></td><td class="printindex-index-section"><a href="#Shell-Startup-Files">Shell Startup Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-shell-function-gawkpath_005fappend"><code class="command">gawkpath_append</code></a></td><td class="printindex-index-section"><a href="#Shell-Startup-Files">Shell Startup Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-shell-function-gawkpath_005fdefault"><code class="command">gawkpath_default</code></a></td><td class="printindex-index-section"><a href="#Shell-Startup-Files">Shell Startup Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-shell-function-gawkpath_005fprepend"><code class="command">gawkpath_prepend</code></a></td><td class="printindex-index-section"><a href="#Shell-Startup-Files">Shell Startup Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-shell-quoting_002c-rules-for">shell quoting, rules for</a></td><td class="printindex-index-section"><a href="#Quoting">Quoting</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-shell-quoting_002c-rules-for-1">shell quoting, rules for</a></td><td class="printindex-index-section"><a href="#Other-Arguments">Other Arguments</a></td></tr>
<tr><td></td><td class="printindex-index-entry">shells</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-shells-piping-commands-into">piping commands into</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-shells-quoting">quoting</a></td><td class="printindex-index-section"><a href="#Using-Shell-Variables">Using Shell Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-shells-quoting-rules-for">rules for</a></td><td class="printindex-index-section"><a href="#Quoting">Quoting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-shells-scripts">scripts</a></td><td class="printindex-index-section"><a href="#One_002dshot">One-shot</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-shells-sea">sea</a></td><td class="printindex-index-section"><a href="#Undocumented">Undocumented</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-shells-variables">variables</a></td><td class="printindex-index-section"><a href="#Using-Shell-Variables">Using Shell Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-shift_002c-bitwise">shift, bitwise</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-short_002dcircuit-operators">short-circuit operators</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry">show in debugger</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-show-in-debugger-all-source-files">all source files</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-show-in-debugger-breakpoints">breakpoints</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-show-in-debugger-function-arguments">function arguments</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-show-in-debugger-local-variables">local variables</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-show-in-debugger-name-of-current-source-file">name of current source file</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-show-in-debugger-watchpoints">watchpoints</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-si-debugger-command-_0028alias-for-stepi_0029"><code class="code">si</code> debugger command (alias for <code class="code">stepi</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-side-effects">side effects</a></td><td class="printindex-index-section"><a href="#Concatenation">Concatenation</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-side-effects-1">side effects</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-side-effects-2">side effects</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-side-effects-array-indexing">array indexing</a></td><td class="printindex-index-section"><a href="#Reference-to-Elements">Reference to Elements</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-side-effects-asort_0028_0029-function"><code class="code">asort()</code> function</a></td><td class="printindex-index-section"><a href="#Array-Sorting-Functions">Array Sorting Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-side-effects-asorti_0028_0029-function"><code class="code">asorti()</code> function</a></td><td class="printindex-index-section"><a href="#Array-Sorting-Functions">Array Sorting Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-side-effects-assignment-expressions">assignment expressions</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-side-effects-Boolean-operators">Boolean operators</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-side-effects-conditional-expressions">conditional expressions</a></td><td class="printindex-index-section"><a href="#Conditional-Exp">Conditional Exp</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-side-effects-decrement_002fincrement-operators">decrement/increment operators</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-side-effects-FILENAME-variable"><code class="code">FILENAME</code> variable</a></td><td class="printindex-index-section"><a href="#Getline-Notes">Getline Notes</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-side-effects-function-calls">function calls</a></td><td class="printindex-index-section"><a href="#Function-Calls">Function Calls</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-side-effects-gsub_0028_0029-function"><code class="code">gsub()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-side-effects-match_0028_0029-function"><code class="code">match()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-side-effects-statements">statements</a></td><td class="printindex-index-section"><a href="#Action-Overview">Action Overview</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-side-effects-sub_0028_0029-function"><code class="code">sub()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">sidebar</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-A-Constant_0027s-Base-Does-Not-Affect-Its-Value">A Constant&rsquo;s Base Does Not Affect Its Value</a></td><td class="printindex-index-section"><a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-A-Note-About-Fuzzers">A Note About Fuzzers</a></td><td class="printindex-index-section"><a href="#Bug-definition">Bug definition</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Backslash-Before-Regular-Characters">Backslash Before Regular Characters</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Beware-The-Smoke-and-Mirrors_0021">Beware The Smoke and Mirrors!</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Carriage_002dReturn_002d_002dLine_002dFeed-Line-Endings-In-CSV-Files">Carriage-Return&ndash;Line-Feed Line Endings In CSV Files</a></td><td class="printindex-index-section"><a href="#Comma-Separated-Fields">Comma Separated Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Caveats-When-Using-Regular-Expressions-for-RS">Caveats When Using Regular Expressions for <code class="code">RS</code></a></td><td class="printindex-index-section"><a href="#gawk-split-records">gawk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Changing-FS-Does-Not-Affect-the-Fields">Changing <code class="code">FS</code> Does Not Affect the Fields</a></td><td class="printindex-index-section"><a href="#Full-Line-Fields">Full Line Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Changing-NR-and-FNR">Changing <code class="code">NR</code> and <code class="code">FNR</code></a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Controlling-Output-Buffering-with-system_0028_0029">Controlling Output Buffering with <code class="code">system()</code></a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Escape-Sequences-for-Metacharacters">Escape Sequences for Metacharacters</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-FS-and-IGNORECASE"><code class="code">FS</code> and <code class="code">IGNORECASE</code></a></td><td class="printindex-index-section"><a href="#Field-Splitting-Summary">Field Splitting Summary</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Interactive-Versus-Noninteractive-Buffering">Interactive Versus Noninteractive Buffering</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Matching-the-Null-String">Matching the Null String</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Operator-Evaluation-Order">Operator Evaluation Order</a></td><td class="printindex-index-section"><a href="#Increment-Ops">Increment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Piping-into-sh">Piping into <code class="command">sh</code></a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Pre_002dPOSIX-awk-Used-OFMT-for-String-Conversion">Pre-POSIX <code class="command">awk</code> Used <code class="code">OFMT</code> for String Conversion</a></td><td class="printindex-index-section"><a href="#Strings-And-Numbers">Strings And Numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Quoting-Shell-Variables-On-The-awk-Command-Line">Quoting Shell Variables On The <code class="command">awk</code> Command Line</a></td><td class="printindex-index-section"><a href="#Other-Arguments">Other Arguments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Recipe-for-a-Programming-Language">Recipe for a Programming Language</a></td><td class="printindex-index-section"><a href="#History">History</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Rounding-Modes-and-Conversion">Rounding Modes and Conversion</a></td><td class="printindex-index-section"><a href="#Setting-the-rounding-mode">Setting the rounding mode</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-RS-_003d-_0022_005c0_0022-Is-Not-Portable"><code class="code">RS = &quot;\0&quot;</code> Is Not Portable</a></td><td class="printindex-index-section"><a href="#gawk-split-records">gawk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-So-Why-Does-gawk-Have-BEGINFILE-and-ENDFILE_003f">So Why Does <code class="command">gawk</code> Have <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code>?</a></td><td class="printindex-index-section"><a href="#Filetrans-Function">Filetrans Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Syntactic-Ambiguities-Between-_002f_003d-and-Regular-Expressions">Syntactic Ambiguities Between &lsquo;<samp class="samp">/=</samp>&rsquo; and Regular Expressions</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Understanding-_0023_0021">Understanding &lsquo;<samp class="samp">#!</samp>&rsquo;</a></td><td class="printindex-index-section"><a href="#Executable-Scripts">Executable Scripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Understanding-_00240">Understanding <code class="code">$0</code></a></td><td class="printindex-index-section"><a href="#Changing-Fields">Changing Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-Using-_005cn-in-Bracket-Expressions-of-Dynamic-Regexps">Using <code class="code">\n</code> in Bracket Expressions of Dynamic Regexps</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sidebar-What-About-The-Empty-Regexp_003f">What About The Empty Regexp?</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-SIGHUP-signal_002c-for-dynamic-profiling"><code class="code">SIGHUP</code> signal, for dynamic profiling</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-SIGINT-signal-_0028MS_002dWindows_0029"><code class="code">SIGINT</code> signal (MS-Windows)</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry">signals</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-signals-HUP_002fSIGHUP_002c-for-profiling"><code class="code">HUP</code>/<code class="code">SIGHUP</code>, for profiling</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-signals-INT_002fSIGINT-_0028MS_002dWindows_0029"><code class="code">INT</code>/<code class="code">SIGINT</code> (MS-Windows)</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-signals-QUIT_002fSIGQUIT-_0028MS_002dWindows_0029"><code class="code">QUIT</code>/<code class="code">SIGQUIT</code> (MS-Windows)</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-signals-USR1_002fSIGUSR1_002c-for-profiling"><code class="code">USR1</code>/<code class="code">SIGUSR1</code>, for profiling</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-signature-program">signature program</a></td><td class="printindex-index-section"><a href="#Signature-Program">Signature Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-SIGQUIT-signal-_0028MS_002dWindows_0029"><code class="code">SIGQUIT</code> signal (MS-Windows)</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-SIGUSR1-signal_002c-for-dynamic-profiling"><code class="code">SIGUSR1</code> signal, for dynamic profiling</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-silent-debugger-command"><code class="code">silent</code> debugger command</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sin_0028_0029-function"><code class="code">sin()</code> function</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sine">sine</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-single-quote-_0028_0027_0029">single quote (<code class="code">'</code>)</a></td><td class="printindex-index-section"><a href="#One_002dshot">One-shot</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-single-quote-_0028_0027_0029-in-gawk-command-lines">in <code class="command">gawk</code> command lines</a></td><td class="printindex-index-section"><a href="#Long">Long</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-single-quote-_0028_0027_0029-in-shell-commands">in shell commands</a></td><td class="printindex-index-section"><a href="#Quoting">Quoting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-single-quote-_0028_0027_0029-vs_002e-apostrophe">vs. apostrophe</a></td><td class="printindex-index-section"><a href="#Comments">Comments</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-single-quote-_0028_0027_0029-with-double-quotes">with double quotes</a></td><td class="printindex-index-section"><a href="#Quoting">Quoting</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-single-records_002c-treating-files-as">single records, treating files as</a></td><td class="printindex-index-section"><a href="#gawk-split-records">gawk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-single_002dcharacter-fields">single-character fields</a></td><td class="printindex-index-section"><a href="#Single-Character-Fields">Single Character Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-single_002dprecision">single-precision</a></td><td class="printindex-index-section"><a href="#Computer-Arithmetic">Computer Arithmetic</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-single_002dstep-execution_002c-in-the-debugger">single-step execution, in the debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Skywalker_002c-Luke">Skywalker, Luke</a></td><td class="printindex-index-section"><a href="#Undocumented">Undocumented</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sleep-utility"><code class="command">sleep</code> utility</a></td><td class="printindex-index-section"><a href="#Alarm-Program">Alarm Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sleep_0028_0029-extension-function"><code class="code">sleep()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Time">Extension Sample Time</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Smith_002c-Gavin">Smith, Gavin</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Solaris_002c-POSIX_002dcompliant-awk">Solaris, POSIX-compliant <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sort-array">sort array</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sort-array-indices">sort array indices</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sort-function_002c-arrays_002c-sorting">sort function, arrays, sorting</a></td><td class="printindex-index-section"><a href="#Array-Sorting-Functions">Array Sorting Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sort-utility"><code class="command">sort</code> utility</a></td><td class="printindex-index-section"><a href="#Word-Sorting">Word Sorting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sort-utility-coprocesses-and">coprocesses and</a></td><td class="printindex-index-section"><a href="#Two_002dway-I_002fO">Two-way I/O</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sorting-characters-in-different-languages">sorting characters in different languages</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry">source code</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-awka"><code class="command">awka</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-awkcc"><code class="command">awkcc</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-AWKgo"><code class="command">AWKgo</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-Brian-Kernighan_0027s-awk">Brian Kernighan&rsquo;s <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-BusyBox-Awk">BusyBox Awk</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-cppawk"><code class="command">cppawk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-embeddable-awk-interpreter">embeddable <code class="command">awk</code> interpreter</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-frawk"><code class="command">frawk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-gawk"><code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Gawk-Distribution">Gawk Distribution</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-goawk"><code class="command">goawk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-Illumos-awk">Illumos <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-jawk"><code class="command">jawk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-libmawk">libmawk</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-mawk"><code class="command">mawk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-mixing">mixing</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-pawk-_0028profiling-version-of-Brian-Kernighan_0027s-awk_0029"><code class="command">pawk</code> (profiling version of Brian Kernighan&rsquo;s <code class="command">awk</code>)</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-pawk-_0028Python-version_0029"><code class="command">pawk</code> (Python version)</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-QSE-awk">QSE <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-QuikTrim-Awk">QuikTrim Awk</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-source-code-Solaris-awk">Solaris <code class="command">awk</code></a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-source-file_002c-show-in-debugger">source file, show in debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-source-files_002c-search-path-for">source files, search path for</a></td><td class="printindex-index-section"><a href="#Programs-Exercises">Programs Exercises</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sparse-arrays">sparse arrays</a></td><td class="printindex-index-section"><a href="#Array-Intro">Array Intro</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Spencer_002c-Henry">Spencer, Henry</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Spengler_002c-Egon">Spengler, Egon</a></td><td class="printindex-index-section"><a href="#Gory-Details">Gory Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-split-string-into-array">split string into array</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-split-utility"><code class="code">split</code> utility</a></td><td class="printindex-index-section"><a href="#Split-Program">Split Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-split_002eawk-program"><samp class="file">split.awk</samp> program</a></td><td class="printindex-index-section"><a href="#Split-Program">Split Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-split_0028_0029-function"><code class="code">split()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-split_0028_0029-function-array-elements_002c-deleting">array elements, deleting</a></td><td class="printindex-index-section"><a href="#Delete">Delete</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sprintf_0028_0029-function"><code class="code">sprintf()</code> function</a></td><td class="printindex-index-section"><a href="#OFMT">OFMT</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sprintf_0028_0029-function-1"><code class="code">sprintf()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sprintf_0028_0029-function-print_002fprintf-statements-and"><code class="code">print</code>/<code class="code">printf</code> statements and</a></td><td class="printindex-index-section"><a href="#Round-Function">Round Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sqrt_0028_0029-function"><code class="code">sqrt()</code> function</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-square-brackets-_0028_005b_005d_0029_002c-regexp-operator">square brackets (<code class="code">[]</code>), regexp operator</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-square-root">square root</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-srand_0028_0029-function"><code class="code">srand()</code> function</a></td><td class="printindex-index-section"><a href="#Numeric-Functions">Numeric Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-stack-frame-_0028debugger_0029">stack frame (debugger)</a></td><td class="printindex-index-section"><a href="#Debugging-Terms">Debugging Terms</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Stallman_002c-Richard">Stallman, Richard</a></td><td class="printindex-index-section"><a href="#Manual-History">Manual History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Stallman_002c-Richard-1">Stallman, Richard</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Stallman_002c-Richard-2">Stallman, Richard</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Stallman_002c-Richard-3">Stallman, Richard</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-standard-error">standard error</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-standard-input">standard input</a></td><td class="printindex-index-section"><a href="#Read-Terminal">Read Terminal</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-standard-input-1">standard input</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-standard-output">standard output</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-starting-the-debugger">starting the debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Invocation">Debugger Invocation</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-stat_0028_0029-extension-function"><code class="code">stat()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-File-Functions">Extension Sample File Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">statements</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-statements-compound_002c-control-statements-and">compound, control statements and</a></td><td class="printindex-index-section"><a href="#Statements">Statements</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-statements-control_002c-in-actions">control, in actions</a></td><td class="printindex-index-section"><a href="#Statements">Statements</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-statements-multiple">multiple</a></td><td class="printindex-index-section"><a href="#Statements_002fLines">Statements/Lines</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-step-debugger-command"><code class="code">step</code> debugger command</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-stepi-debugger-command"><code class="code">stepi</code> debugger command</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-stop-automatic-display_002c-in-debugger">stop automatic display, in debugger</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-STR_005fCHAIN_005fMAX-environment-variable"><code class="env">STR_CHAIN_MAX</code> environment variable</a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-stream-editors">stream editors</a></td><td class="printindex-index-section"><a href="#Full-Line-Fields">Full Line Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-stream-editors-1">stream editors</a></td><td class="printindex-index-section"><a href="#Simple-Sed">Simple Sed</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-strftime_0028_0029-function-_0028gawk_0029"><code class="code">strftime()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">string</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-string-constants">constants</a></td><td class="printindex-index-section"><a href="#Scalar-Constants">Scalar Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-string-constants-vs_002e-regexp-constants">vs. regexp constants</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-string-extraction-_0028internationalization_0029">extraction (internationalization)</a></td><td class="printindex-index-section"><a href="#String-Extraction">String Extraction</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-string-length">length</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-string-operators">operators</a></td><td class="printindex-index-section"><a href="#Concatenation">Concatenation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-string-regular-expression-match-of">regular expression match of</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-string_002dmanipulation-functions">string-manipulation functions</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-string_002dmatching-operators">string-matching operators</a></td><td class="printindex-index-section"><a href="#Regexp-Usage">Regexp Usage</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-string_002dtranslation-functions">string-translation functions</a></td><td class="printindex-index-section"><a href="#I18N-Functions">I18N Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">strings</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-strings-continuation-across-lines">continuation across lines</a></td><td class="printindex-index-section"><a href="#Scalar-Constants">Scalar Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-strings-converting">converting</a></td><td class="printindex-index-section"><a href="#Strings-And-Numbers">Strings And Numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-strings-converting-1">converting</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-strings-converting-numbers-to">numbers to</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-strings-converting-numbers-to-1">numbers to</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-strings-converting-letter-case">converting letter case</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-strings-empty">empty</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-strings-extracting">extracting</a></td><td class="printindex-index-section"><a href="#String-Extraction">String Extraction</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-strings-for-localization">for localization</a></td><td class="printindex-index-section"><a href="#Programmer-i18n">Programmer i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-strings-length-limitations">length limitations</a></td><td class="printindex-index-section"><a href="#Scalar-Constants">Scalar Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-strings-merging-arrays-into">merging arrays into</a></td><td class="printindex-index-section"><a href="#Join-Function">Join Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-strings-null">null</a></td><td class="printindex-index-section"><a href="#Regexp-Field-Splitting">Regexp Field Splitting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-strings-numeric">numeric</a></td><td class="printindex-index-section"><a href="#Variable-Typing">Variable Typing</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-strings-splitting_002c-example">splitting, example</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-strptime_0028_0029-extension-function"><code class="code">strptime()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Time">Extension Sample Time</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-strtonum_0028_0029-function-_0028gawk_0029"><code class="code">strtonum()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-strtonum_0028_0029-function-_0028gawk_0029-_002d_002dnon_002ddecimal_002ddata-option-and"><samp class="option">--non-decimal-data</samp> option and</a></td><td class="printindex-index-section"><a href="#Nondecimal-Data">Nondecimal Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sub_0028_0029-function"><code class="code">sub()</code> function</a></td><td class="printindex-index-section"><a href="#Standard-Regexp-Constants">Standard Regexp Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-sub_0028_0029-function-1"><code class="code">sub()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sub_0028_0029-function-arguments-of">arguments of</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-sub_0028_0029-function-escape-processing">escape processing</a></td><td class="printindex-index-section"><a href="#Gory-Details">Gory Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-subscript-separators">subscript separators</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry">subscripts in arrays</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-subscripts-in-arrays-multidimensional">multidimensional</a></td><td class="printindex-index-section"><a href="#Multidimensional">Multidimensional</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-subscripts-in-arrays-multidimensional-scanning">scanning</a></td><td class="printindex-index-section"><a href="#Multiscanning">Multiscanning</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-subscripts-in-arrays-numbers-as">numbers as</a></td><td class="printindex-index-section"><a href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-subscripts-in-arrays-uninitialized-variables-as">uninitialized variables as</a></td><td class="printindex-index-section"><a href="#Uninitialized-Subscripts">Uninitialized Subscripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-SUBSEP-variable"><code class="code">SUBSEP</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-SUBSEP-variable-multidimensional-arrays-and">multidimensional arrays and</a></td><td class="printindex-index-section"><a href="#Multidimensional">Multidimensional</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-substitute-in-string">substitute in string</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-substr_0028_0029-function"><code class="code">substr()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-substring">substring</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Sumner_002c-Andrew">Sumner, Andrew</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-supplementary-groups-of-gawk-process">supplementary groups of <code class="command">gawk</code> process</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-switch-statement"><code class="code">switch</code> statement</a></td><td class="printindex-index-section"><a href="#Switch-Statement">Switch Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-SYMTAB-array"><code class="code">SYMTAB</code> array</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-syntactic-ambiguity_003a-_002f_003d-operator-vs_002e-_002f_003d_2026_002f-regexp-constant">syntactic ambiguity: <code class="code">/=</code> operator vs. <code class="code">/=&hellip;/</code> regexp constant</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-system_0028_0029-function"><code class="code">system()</code> function</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-systime_0028_0029-function-_0028gawk_0029"><code class="code">systime()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-T">T</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-t-debugger-command-_0028alias-for-tbreak_0029"><code class="code">t</code> debugger command (alias for <code class="code">tbreak</code>)</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-tbreak-debugger-command"><code class="code">tbreak</code> debugger command</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Tcl">Tcl</a></td><td class="printindex-index-section"><a href="#Library-Names">Library Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-TCP_002fIP">TCP/IP</a></td><td class="printindex-index-section"><a href="#TCP_002fIP-Networking">TCP/IP Networking</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-TCP_002fIP-support-for">support for</a></td><td class="printindex-index-section"><a href="#Special-Network">Special Network</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-tee-utility"><code class="code">tee</code> utility</a></td><td class="printindex-index-section"><a href="#Tee-Program">Tee Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-tee_002eawk-program"><samp class="file">tee.awk</samp> program</a></td><td class="printindex-index-section"><a href="#Tee-Program">Tee Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-temporary-breakpoint">temporary breakpoint</a></td><td class="printindex-index-section"><a href="#Breakpoint-Control">Breakpoint Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-terminating-records">terminating records</a></td><td class="printindex-index-section"><a href="#awk-split-records">awk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-testbits_002eawk-program"><samp class="file">testbits.awk</samp> program</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-testext-extension"><code class="code">testext</code> extension</a></td><td class="printindex-index-section"><a href="#Extension-Sample-API-Tests">Extension Sample API Tests</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Texinfo">Texinfo</a></td><td class="printindex-index-section"><a href="#Conventions">Conventions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Texinfo-1">Texinfo</a></td><td class="printindex-index-section"><a href="#Library-Functions">Library Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Texinfo-2">Texinfo</a></td><td class="printindex-index-section"><a href="#Dupword-Program">Dupword Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Texinfo-3">Texinfo</a></td><td class="printindex-index-section"><a href="#Extract-Program">Extract Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Texinfo-4">Texinfo</a></td><td class="printindex-index-section"><a href="#Distribution-contents">Distribution contents</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Texinfo-5">Texinfo</a></td><td class="printindex-index-section"><a href="#Adding-Code">Adding Code</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Texinfo-chapter-beginnings-in-files">chapter beginnings in files</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Texinfo-extracting-programs-from-source-files">extracting programs from source files</a></td><td class="printindex-index-section"><a href="#Extract-Program">Extract Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-text_002c-printing">text, printing</a></td><td class="printindex-index-section"><a href="#Print">Print</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-text_002c-printing-unduplicated-lines-of">unduplicated lines of</a></td><td class="printindex-index-section"><a href="#Uniq-Program">Uniq Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-TEXTDOMAIN-variable"><code class="code">TEXTDOMAIN</code> variable</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-TEXTDOMAIN-variable-1"><code class="code">TEXTDOMAIN</code> variable</a></td><td class="printindex-index-section"><a href="#Programmer-i18n">Programmer i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-TEXTDOMAIN-variable-BEGIN-pattern-and"><code class="code">BEGIN</code> pattern and</a></td><td class="printindex-index-section"><a href="#Programmer-i18n">Programmer i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-TEXTDOMAIN-variable-portability-and">portability and</a></td><td class="printindex-index-section"><a href="#I18N-Portability">I18N Portability</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-textdomain_0028_0029-function-_0028C-library_0029"><code class="code">textdomain()</code> function (C library)</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-TIDYMEM-environment-variable"><code class="env">TIDYMEM</code> environment variable</a></td><td class="printindex-index-section"><a href="#Other-Environment-Variables">Other Environment Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-tilde-_0028_007e_0029_002c-_007e-operator">tilde (<code class="code">~</code>), <code class="code">~</code> operator</a></td><td class="printindex-index-section"><a href="#Regexp-Usage">Regexp Usage</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-tilde-_0028_007e_0029_002c-_007e-operator-1">tilde (<code class="code">~</code>), <code class="code">~</code> operator</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-tilde-_0028_007e_0029_002c-_007e-operator-2">tilde (<code class="code">~</code>), <code class="code">~</code> operator</a></td><td class="printindex-index-section"><a href="#Case_002dsensitivity">Case-sensitivity</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-tilde-_0028_007e_0029_002c-_007e-operator-3">tilde (<code class="code">~</code>), <code class="code">~</code> operator</a></td><td class="printindex-index-section"><a href="#Regexp-Constants">Regexp Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-tilde-_0028_007e_0029_002c-_007e-operator-4">tilde (<code class="code">~</code>), <code class="code">~</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-tilde-_0028_007e_0029_002c-_007e-operator-5">tilde (<code class="code">~</code>), <code class="code">~</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-tilde-_0028_007e_0029_002c-_007e-operator-6">tilde (<code class="code">~</code>), <code class="code">~</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-tilde-_0028_007e_0029_002c-_007e-operator-7">tilde (<code class="code">~</code>), <code class="code">~</code> operator</a></td><td class="printindex-index-section"><a href="#Expression-Patterns">Expression Patterns</a></td></tr>
<tr><td></td><td class="printindex-index-entry">time</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-time-alarm-clock-example-program">alarm clock example program</a></td><td class="printindex-index-section"><a href="#Alarm-Program">Alarm Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-time-localization-and">localization and</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-time-managing">managing</a></td><td class="printindex-index-section"><a href="#Getlocaltime-Function">Getlocaltime Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-time-retrieving">retrieving</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-time-functions">time functions</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-timeout_002c-reading-input">timeout, reading input</a></td><td class="printindex-index-section"><a href="#Read-Timeout">Read Timeout</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-timestamps">timestamps</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-timestamps-1">timestamps</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-timestamps-converting-dates-to">converting dates to</a></td><td class="printindex-index-section"><a href="#Time-Functions">Time Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-timestamps-formatted">formatted</a></td><td class="printindex-index-section"><a href="#Getlocaltime-Function">Getlocaltime Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-tocsv_005frec_0028_0029-user_002ddefined-function"><code class="code">tocsv_rec()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#To-CSV-Function">To CSV Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-tocsv_0028_0029-user_002ddefined-function"><code class="code">tocsv()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#To-CSV-Function">To CSV Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-tolower_0028_0029-function"><code class="code">tolower()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-toupper_0028_0029-function"><code class="code">toupper()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-tr-utility"><code class="command">tr</code> utility</a></td><td class="printindex-index-section"><a href="#Translate-Program">Translate Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-trace-debugger-command"><code class="code">trace</code> debugger command</a></td><td class="printindex-index-section"><a href="#Miscellaneous-Debugger-Commands">Miscellaneous Debugger Commands</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-trace_002c-internal-instructions">trace, internal instructions</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-traceback_002c-display-in-debugger">traceback, display in debugger</a></td><td class="printindex-index-section"><a href="#Execution-Stack">Execution Stack</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-translate-string">translate string</a></td><td class="printindex-index-section"><a href="#I18N-Functions">I18N Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-translate_002eawk-program"><samp class="file">translate.awk</samp> program</a></td><td class="printindex-index-section"><a href="#Translate-Program">Translate Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-treating-files_002c-as-single-records">treating files, as single records</a></td><td class="printindex-index-section"><a href="#gawk-split-records">gawk split records</a></td></tr>
<tr><td></td><td class="printindex-index-entry">troubleshooting</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-_002d_002dnon_002ddecimal_002ddata-option"><samp class="option">--non-decimal-data</samp> option</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-_003d_003d-operator"><code class="code">==</code> operator</a></td><td class="printindex-index-section"><a href="#Comparison-Operators">Comparison Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-awk-uses-FS-not-IFS"><code class="command">awk</code> uses <code class="code">FS</code> not <code class="code">IFS</code></a></td><td class="printindex-index-section"><a href="#Field-Separators">Field Separators</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-backslash-before-nonspecial-character">backslash before nonspecial character</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-division">division</a></td><td class="printindex-index-section"><a href="#Arithmetic-Ops">Arithmetic Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">fatal errors</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-troubleshooting-fatal-errors-field-widths_002c-specifying">field widths, specifying</a></td><td class="printindex-index-section"><a href="#Fixed-width-data">Fixed width data</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-troubleshooting-fatal-errors-printf-format-strings"><code class="code">printf</code> format strings</a></td><td class="printindex-index-section"><a href="#Format-Modifiers">Format Modifiers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-fflush_0028_0029-function"><code class="code">fflush()</code> function</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-function-call-syntax">function call syntax</a></td><td class="printindex-index-section"><a href="#Function-Calls">Function Calls</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-gawk"><code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Compatibility-Mode">Compatibility Mode</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-troubleshooting-gawk-bug-reports">bug reports</a></td><td class="printindex-index-section"><a href="#Bugs">Bugs</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-troubleshooting-gawk-fatal-errors_002c-function-arguments">fatal errors, function arguments</a></td><td class="printindex-index-section"><a href="#Calling-Built_002din">Calling Built-in</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-getline-command"><code class="code">getline</code> command</a></td><td class="printindex-index-section"><a href="#File-Checking">File Checking</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-gsub_0028_0029_002fsub_0028_0029-functions"><code class="code">gsub()</code>/<code class="code">sub()</code> functions</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-match_0028_0029-function"><code class="code">match()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-print-statement_002c-omitting-commas"><code class="code">print</code> statement, omitting commas</a></td><td class="printindex-index-section"><a href="#Print-Examples">Print Examples</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-printing">printing</a></td><td class="printindex-index-section"><a href="#Redirection">Redirection</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-quotes-with-file-names">quotes with file names</a></td><td class="printindex-index-section"><a href="#Special-FD">Special FD</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-readable-data-files">readable data files</a></td><td class="printindex-index-section"><a href="#File-Checking">File Checking</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-regexp-constants-vs_002e-string-constants">regexp constants vs. string constants</a></td><td class="printindex-index-section"><a href="#Computed-Regexps">Computed Regexps</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-string-concatenation">string concatenation</a></td><td class="printindex-index-section"><a href="#Concatenation">Concatenation</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-substr_0028_0029-function"><code class="code">substr()</code> function</a></td><td class="printindex-index-section"><a href="#String-Functions">String Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-system_0028_0029-function"><code class="code">system()</code> function</a></td><td class="printindex-index-section"><a href="#I_002fO-Functions">I/O Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-troubleshooting-typographical-errors_002c-global-variables">typographical errors, global variables</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-true_002c-logical">true, logical</a></td><td class="printindex-index-section"><a href="#Truth-Values">Truth Values</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Trueman_002c-David">Trueman, David</a></td><td class="printindex-index-section"><a href="#History">History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Trueman_002c-David-1">Trueman, David</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Trueman_002c-David-2">Trueman, David</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-trunc_002dmod-operation">trunc-mod operation</a></td><td class="printindex-index-section"><a href="#Arithmetic-Ops">Arithmetic Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-truth-values">truth values</a></td><td class="printindex-index-section"><a href="#Truth-Values">Truth Values</a></td></tr>
<tr><td></td><td class="printindex-index-entry">type</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-type-conversion">conversion</a></td><td class="printindex-index-section"><a href="#Strings-And-Numbers">Strings And Numbers</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-type-of-variable_002c-typeof_0028_0029-function-_0028gawk_0029">of variable, <code class="code">typeof()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Type-Functions">Type Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-typeof_0028_0029-function-_0028gawk_0029"><code class="code">typeof()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Type-Functions">Type Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-TZ-environment-variable"><code class="env">TZ</code> environment variable</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-U">U</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-u-debugger-command-_0028alias-for-until_0029"><code class="code">u</code> debugger command (alias for <code class="code">until</code>)</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-unassigned-array-elements">unassigned array elements</a></td><td class="printindex-index-section"><a href="#Reference-to-Elements">Reference to Elements</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-undefined-functions">undefined functions</a></td><td class="printindex-index-section"><a href="#Function-Caveats">Function Caveats</a></td></tr>
<tr><td></td><td class="printindex-index-entry">underscore (<code class="code">_</code>)</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-underscore-_0028_005f_0029-C-macro">C macro</a></td><td class="printindex-index-section"><a href="#Explaining-gettext">Explaining gettext</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-underscore-_0028_005f_0029-in-names-of-private-variables">in names of private variables</a></td><td class="printindex-index-section"><a href="#Library-Names">Library Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-underscore-_0028_005f_0029-translatable-strings">translatable strings</a></td><td class="printindex-index-section"><a href="#Programmer-i18n">Programmer i18n</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-undisplay-debugger-command"><code class="code">undisplay</code> debugger command</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-undocumented-features">undocumented features</a></td><td class="printindex-index-section"><a href="#Undocumented">Undocumented</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Unicode">Unicode</a></td><td class="printindex-index-section"><a href="#Ordinal-Functions">Ordinal Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Unicode-1">Unicode</a></td><td class="printindex-index-section"><a href="#Ranges-and-Locales">Ranges and Locales</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Unicode-2">Unicode</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-uninitialized-variables_002c-as-array-subscripts">uninitialized variables, as array subscripts</a></td><td class="printindex-index-section"><a href="#Uninitialized-Subscripts">Uninitialized Subscripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-uniq-utility"><code class="command">uniq</code> utility</a></td><td class="printindex-index-section"><a href="#Uniq-Program">Uniq Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-uniq_002eawk-program"><samp class="file">uniq.awk</samp> program</a></td><td class="printindex-index-section"><a href="#Uniq-Program">Uniq Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Unix">Unix</a></td><td class="printindex-index-section"><a href="#Glossary">Glossary</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Unix-awk-scripts-and"><code class="command">awk</code> scripts and</a></td><td class="printindex-index-section"><a href="#Executable-Scripts">Executable Scripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry">Unix <code class="command">awk</code></td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Unix-awk-backslashes-in-escape-sequences">backslashes in escape sequences</a></td><td class="printindex-index-section"><a href="#Escape-Sequences">Escape Sequences</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Unix-awk-close_0028_0029-function-and"><code class="code">close()</code> function and</a></td><td class="printindex-index-section"><a href="#Close-Return-Value">Close Return Value</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-Unix-awk-password-files_002c-field-separators-and">password files, field separators and</a></td><td class="printindex-index-section"><a href="#Command-Line-Field-Separator">Command Line Field Separator</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-unsigned-integers">unsigned integers</a></td><td class="printindex-index-section"><a href="#Computer-Arithmetic">Computer Arithmetic</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-until-debugger-command"><code class="code">until</code> debugger command</a></td><td class="printindex-index-section"><a href="#Debugger-Execution-Control">Debugger Execution Control</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-unwatch-debugger-command"><code class="code">unwatch</code> debugger command</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-up-debugger-command"><code class="code">up</code> debugger command</a></td><td class="printindex-index-section"><a href="#Execution-Stack">Execution Stack</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-uppercase-names_002c-namespace-for">uppercase names, namespace for</a></td><td class="printindex-index-section"><a href="#Default-Namespace">Default Namespace</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-user-database_002c-reading">user database, reading</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry">user-defined</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">function</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-_005fgr_005finit_0028_0029"><code class="code">_gr_init()</code></a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-_005ford_005finit_0028_0029"><code class="code">_ord_init()</code></a></td><td class="printindex-index-section"><a href="#Ordinal-Functions">Ordinal Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-_005fpw_005finit_0028_0029"><code class="code">_pw_init()</code></a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-assert_0028_0029"><code class="code">assert()</code></a></td><td class="printindex-index-section"><a href="#Assert-Function">Assert Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-beginfile_0028_0029"><code class="code">beginfile()</code></a></td><td class="printindex-index-section"><a href="#Filetrans-Function">Filetrans Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-bits2str_0028_0029"><code class="code">bits2str()</code></a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-chr_0028_0029"><code class="code">chr()</code></a></td><td class="printindex-index-section"><a href="#Ordinal-Functions">Ordinal Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-cliff_005frand_0028_0029"><code class="code">cliff_rand()</code></a></td><td class="printindex-index-section"><a href="#Cliff-Random-Function">Cliff Random Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-ctime_0028_0029"><code class="code">ctime()</code></a></td><td class="printindex-index-section"><a href="#Function-Example">Function Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-endfile_0028_0029"><code class="code">endfile()</code></a></td><td class="printindex-index-section"><a href="#Filetrans-Function">Filetrans Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-endgrent_0028_0029"><code class="code">endgrent()</code></a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-endpwent_0028_0029"><code class="code">endpwent()</code></a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-getgrent_0028_0029"><code class="code">getgrent()</code></a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-getgrent_0028_0029-1"><code class="code">getgrent()</code></a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-getgrgid_0028_0029"><code class="code">getgrgid()</code></a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-getgrnam_0028_0029"><code class="code">getgrnam()</code></a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-getgruser_0028_0029"><code class="code">getgruser()</code></a></td><td class="printindex-index-section"><a href="#Group-Functions">Group Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-getlocaltime_0028_0029"><code class="code">getlocaltime()</code></a></td><td class="printindex-index-section"><a href="#Getlocaltime-Function">Getlocaltime Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-getopt_0028_0029"><code class="code">getopt()</code></a></td><td class="printindex-index-section"><a href="#Getopt-Function">Getopt Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-getopt_0028_0029-1"><code class="code">getopt()</code></a></td><td class="printindex-index-section"><a href="#Getopt-Function">Getopt Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-getpwent_0028_0029"><code class="code">getpwent()</code></a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-getpwent_0028_0029-1"><code class="code">getpwent()</code></a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-getpwnam_0028_0029"><code class="code">getpwnam()</code></a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-getpwuid_0028_0029"><code class="code">getpwuid()</code></a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-isnumeric_0028_0029"><code class="code">isnumeric()</code></a></td><td class="printindex-index-section"><a href="#Isnumeric-Function">Isnumeric Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-join_0028_0029"><code class="code">join()</code></a></td><td class="printindex-index-section"><a href="#Join-Function">Join Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-ord_0028_0029"><code class="code">ord()</code></a></td><td class="printindex-index-section"><a href="#Ordinal-Functions">Ordinal Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-readfile_0028_0029"><code class="code">readfile()</code></a></td><td class="printindex-index-section"><a href="#Readfile-Function">Readfile Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-rev_0028_0029"><code class="code">rev()</code></a></td><td class="printindex-index-section"><a href="#Function-Example">Function Example</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-rewind_0028_0029"><code class="code">rewind()</code></a></td><td class="printindex-index-section"><a href="#Rewind-Function">Rewind Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-round_0028_0029"><code class="code">round()</code></a></td><td class="printindex-index-section"><a href="#Round-Function">Round Function</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-function-walk_005farray_0028_0029"><code class="code">walk_array()</code></a></td><td class="printindex-index-section"><a href="#Walking-Arrays">Walking Arrays</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-user_002ddefined-functions">functions</a></td><td class="printindex-index-section"><a href="#User_002ddefined">User-defined</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-user_002ddefined-functions-counts_002c-in-a-profile">counts, in a profile</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-user_002ddefined-variables">variables</a></td><td class="printindex-index-section"><a href="#Variables">Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-user_002dmodifiable-variables">user-modifiable variables</a></td><td class="printindex-index-section"><a href="#User_002dmodified">User-modified</a></td></tr>
<tr><td></td><td class="printindex-index-entry">users, information about</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-users_002c-information-about-printing">printing</a></td><td class="printindex-index-section"><a href="#Id-Program">Id Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-users_002c-information-about-retrieving">retrieving</a></td><td class="printindex-index-section"><a href="#Passwd-Functions">Passwd Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-USR1-signal_002c-for-dynamic-profiling"><code class="code">USR1</code> signal, for dynamic profiling</a></td><td class="printindex-index-section"><a href="#Profiling">Profiling</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-V">V</th></tr>
<tr><td></td><td class="printindex-index-entry">values</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-values-numeric">numeric</a></td><td class="printindex-index-section"><a href="#Basic-Data-Typing">Basic Data Typing</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-values-regexp">regexp</a></td><td class="printindex-index-section"><a href="#Strong-Regexp-Constants">Strong Regexp Constants</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-values-string">string</a></td><td class="printindex-index-section"><a href="#Basic-Data-Typing">Basic Data Typing</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-variable-assignments-and-input-files">variable assignments and input files</a></td><td class="printindex-index-section"><a href="#Other-Arguments">Other Arguments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-variable-type_002c-typeof_0028_0029-function-_0028gawk_0029">variable type, <code class="code">typeof()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Type-Functions">Type Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-variables">variables</a></td><td class="printindex-index-section"><a href="#Other-Features">Other Features</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-variables-1">variables</a></td><td class="printindex-index-section"><a href="#Basic-Data-Typing">Basic Data Typing</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-variables-assigning-on-command-line">assigning on command line</a></td><td class="printindex-index-section"><a href="#Assignment-Options">Assignment Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-variables-built_002din">built-in</a></td><td class="printindex-index-section"><a href="#Using-Variables">Using Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-variables-flag">flag</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-variables-getline-command-into_002c-using"><code class="code">getline</code> command into, using</a></td><td class="printindex-index-section"><a href="#Getline_002fVariable">Getline/Variable</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-variables-getline-command-into_002c-using-1"><code class="code">getline</code> command into, using</a></td><td class="printindex-index-section"><a href="#Getline_002fVariable_002fFile">Getline/Variable/File</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-variables-getline-command-into_002c-using-2"><code class="code">getline</code> command into, using</a></td><td class="printindex-index-section"><a href="#Getline_002fVariable_002fPipe">Getline/Variable/Pipe</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-variables-getline-command-into_002c-using-3"><code class="code">getline</code> command into, using</a></td><td class="printindex-index-section"><a href="#Getline_002fVariable_002fCoprocess">Getline/Variable/Coprocess</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1">global</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-variables-global-for-library-functions">for library functions</a></td><td class="printindex-index-section"><a href="#Library-Names">Library Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-variables-global-printing-list-of">printing list of</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-variables-initializing">initializing</a></td><td class="printindex-index-section"><a href="#Using-Variables">Using Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-variables-local-to-a-function">local to a function</a></td><td class="printindex-index-section"><a href="#Variable-Scope">Variable Scope</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-variables-predefined">predefined</a></td><td class="printindex-index-section"><a href="#Built_002din-Variables">Built-in Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-variables-predefined-_002dv-option_002c-setting-with"><code class="code">-v</code> option, setting with</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-variables-predefined-conveying-information">conveying information</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-variables-private">private</a></td><td class="printindex-index-section"><a href="#Library-Names">Library Names</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-variables-setting">setting</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-variables-shadowing">shadowing</a></td><td class="printindex-index-section"><a href="#Definition-Syntax">Definition Syntax</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-variables-types-of">types of</a></td><td class="printindex-index-section"><a href="#Assignment-Ops">Assignment Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-2"><a href="#index-variables-types-of-comparison-expressions-and">comparison expressions and</a></td><td class="printindex-index-section"><a href="#Typing-and-Comparison">Typing and Comparison</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-variables-uninitialized_002c-as-array-subscripts">uninitialized, as array subscripts</a></td><td class="printindex-index-section"><a href="#Uninitialized-Subscripts">Uninitialized Subscripts</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-variables-user_002ddefined">user-defined</a></td><td class="printindex-index-section"><a href="#Variables">Variables</a></td></tr>
<tr><td></td><td class="printindex-index-entry">version of</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-version-of-gawk"><code class="command">gawk</code></a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-version-of-gawk-extension-API"><code class="command">gawk</code> extension API</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-version-of-GNU-MP-library">GNU MP library</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-version-of-GNU-MPFR-library">GNU MPFR library</a></td><td class="printindex-index-section"><a href="#Auto_002dset">Auto-set</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-vertical-bar-_0028_007c_0029">vertical bar (<code class="code">|</code>)</a></td><td class="printindex-index-section"><a href="#Regexp-Operator-Details">Regexp Operator Details</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-vertical-bar-_0028_007c_0029-_007c-operator-_0028I_002fO_0029"><code class="code">|</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Getline_002fPipe">Getline/Pipe</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-vertical-bar-_0028_007c_0029-_007c-operator-_0028I_002fO_0029-1"><code class="code">|</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-vertical-bar-_0028_007c_0029-_007c_0026-operator-_0028I_002fO_0029"><code class="code">|&amp;</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Getline_002fCoprocess">Getline/Coprocess</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-vertical-bar-_0028_007c_0029-_007c_0026-operator-_0028I_002fO_0029-1"><code class="code">|&amp;</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-vertical-bar-_0028_007c_0029-_007c_0026-operator-_0028I_002fO_0029-2"><code class="code">|&amp;</code> operator (I/O)</a></td><td class="printindex-index-section"><a href="#Two_002dway-I_002fO">Two-way I/O</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-vertical-bar-_0028_007c_0029-_007c_007c-operator"><code class="code">||</code> operator</a></td><td class="printindex-index-section"><a href="#Boolean-Ops">Boolean Ops</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-vertical-bar-_0028_007c_0029-_007c_007c-operator-1"><code class="code">||</code> operator</a></td><td class="printindex-index-section"><a href="#Precedence">Precedence</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Vinschen_002c-Corinna">Vinschen, Corinna</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-W">W</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-w-debugger-command-_0028alias-for-watch_0029"><code class="code">w</code> debugger command (alias for <code class="code">watch</code>)</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-w-utility"><code class="command">w</code> utility</a></td><td class="printindex-index-section"><a href="#Fixed-width-data">Fixed width data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-wait_0028_0029-extension-function"><code class="code">wait()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Fork">Extension Sample Fork</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-waitpid_0028_0029-extension-function"><code class="code">waitpid()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Fork">Extension Sample Fork</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-walk_005farray_0028_0029-user_002ddefined-function"><code class="code">walk_array()</code> user-defined function</a></td><td class="printindex-index-section"><a href="#Walking-Arrays">Walking Arrays</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Wall_002c-Larry">Wall, Larry</a></td><td class="printindex-index-section"><a href="#Array-Intro">Array Intro</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Wall_002c-Larry-1">Wall, Larry</a></td><td class="printindex-index-section"><a href="#Future-Extensions">Future Extensions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Wallin_002c-Anders">Wallin, Anders</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-warnings_002c-issuing">warnings, issuing</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-watch-debugger-command"><code class="code">watch</code> debugger command</a></td><td class="printindex-index-section"><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-watchpoint-_0028debugger_0029">watchpoint (debugger)</a></td><td class="printindex-index-section"><a href="#Debugging-Terms">Debugging Terms</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-watchpoints_002c-show-in-debugger">watchpoints, show in debugger</a></td><td class="printindex-index-section"><a href="#Debugger-Info">Debugger Info</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-wc-utility"><code class="command">wc</code> utility</a></td><td class="printindex-index-section"><a href="#Wc-Program">Wc Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-wc_002eawk-program"><samp class="file">wc.awk</samp> program</a></td><td class="printindex-index-section"><a href="#wc-program"><code class="command">wc</code> program</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Weinberger_002c-Peter">Weinberger, Peter</a></td><td class="printindex-index-section"><a href="#History">History</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Weinberger_002c-Peter-1">Weinberger, Peter</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Weinberger_002c-Peter-2">Weinberger, Peter</a></td><td class="printindex-index-section"><a href="#Other-Versions">Other Versions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-where-debugger-command-_0028alias-for-backtrace_0029"><code class="code">where</code> debugger command (alias for <code class="code">backtrace</code>)</a></td><td class="printindex-index-section"><a href="#Execution-Stack">Execution Stack</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-while-statement"><code class="code">while</code> statement</a></td><td class="printindex-index-section"><a href="#While-Statement">While Statement</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-while-statement-use-of-regexps-in">use of regexps in</a></td><td class="printindex-index-section"><a href="#Regexp-Usage">Regexp Usage</a></td></tr>
<tr><td></td><td class="printindex-index-entry">whitespace</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-whitespace-as-field-separators">as field separators</a></td><td class="printindex-index-section"><a href="#Default-Field-Splitting">Default Field Splitting</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-whitespace-definition-of">definition of</a></td><td class="printindex-index-section"><a href="#Fields">Fields</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-whitespace-functions_002c-calling">functions, calling</a></td><td class="printindex-index-section"><a href="#Calling-Built_002din">Calling Built-in</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-whitespace-newlines-as">newlines as</a></td><td class="printindex-index-section"><a href="#Options">Options</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Williams_002c-Kent">Williams, Kent</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Woehlke_002c-Matthew">Woehlke, Matthew</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Woods_002c-John">Woods, John</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-word-boundaries_002c-matching">word boundaries, matching</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-word_002dboundary-operator-_0028gawk_0029">word-boundary operator (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-word_002c-regexp-definition-of">word, regexp definition of</a></td><td class="printindex-index-section"><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-wordfreq_002eawk-program"><samp class="file">wordfreq.awk</samp> program</a></td><td class="printindex-index-section"><a href="#Word-Sorting">Word Sorting</a></td></tr>
<tr><td></td><td class="printindex-index-entry">words</td><td></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-words-counting">counting</a></td><td class="printindex-index-section"><a href="#Wc-Program">Wc Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-words-duplicate_002c-searching-for">duplicate, searching for</a></td><td class="printindex-index-section"><a href="#Dupword-Program">Dupword Program</a></td></tr>
<tr><td></td><td class="printindex-index-entry index-entry-level-1"><a href="#index-words-usage-counts_002c-generating">usage counts, generating</a></td><td class="printindex-index-section"><a href="#Word-Sorting">Word Sorting</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-writea_0028_0029-extension-function"><code class="code">writea()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Read-write-array">Extension Sample Read write array</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-writeall_0028_0029-extension-function"><code class="code">writeall()</code> extension function</a></td><td class="printindex-index-section"><a href="#Extension-Sample-Read-write-array">Extension Sample Read write array</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-X">X</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-xgettext-utility"><code class="command">xgettext</code> utility</a></td><td class="printindex-index-section"><a href="#String-Extraction">String Extraction</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-XOR-bitwise-operation">XOR bitwise operation</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-xor_0028_0029-function-_0028gawk_0029"><code class="code">xor()</code> function (<code class="command">gawk</code>)</a></td><td class="printindex-index-section"><a href="#Bitwise-Functions">Bitwise Functions</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-Y">Y</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Yawitz_002c-Efraim">Yawitz, Efraim</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
<tr><th id="Index_cp_letter-Z">Z</th></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Zaretskii_002c-Eli">Zaretskii, Eli</a></td><td class="printindex-index-section"><a href="#Acknowledgments">Acknowledgments</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Zaretskii_002c-Eli-1">Zaretskii, Eli</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Zaretskii_002c-Eli-2">Zaretskii, Eli</a></td><td class="printindex-index-section"><a href="#Maintainers">Maintainers</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-zerofile_002eawk-program"><samp class="file">zerofile.awk</samp> program</a></td><td class="printindex-index-section"><a href="#Empty-Files">Empty Files</a></td></tr>
<tr><td></td><td class="printindex-index-entry"><a href="#index-Zoulas_002c-Christos">Zoulas, Christos</a></td><td class="printindex-index-section"><a href="#Contributors">Contributors</a></td></tr>
<tr><td colspan="3"><hr></td></tr>
</table>
<table class="cp-letters-footer-printindex"><tr><th>Jump to: &nbsp; </th><td><a class="summary-letter-printindex" href="#Index_cp_symbol-1"><b>_</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-2"><b>-</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-3"><b>,</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-4"><b>;</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-5"><b>:</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-6"><b>!</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-7"><b>?</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-8"><b>.</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-9"><b>'</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-10"><b>&quot;</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-11"><b>(</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-12"><b>[</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-13"><b>{</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-14"><b>@</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-15"><b>*</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-16"><b>/</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-17"><b>\</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-18"><b>&amp;</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-19"><b>#</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-20"><b>%</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-21"><b>^</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-22"><b>+</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-23"><b>&lt;</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-24"><b>=</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-25"><b>&gt;</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-26"><b>|</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-27"><b>~</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_symbol-28"><b>$</b></a>
 &nbsp; 
<br>
<a class="summary-letter-printindex" href="#Index_cp_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-J"><b>J</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-K"><b>K</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-O"><b>O</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-Q"><b>Q</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-V"><b>V</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-W"><b>W</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-X"><b>X</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-Y"><b>Y</b></a>
 &nbsp; 
<a class="summary-letter-printindex" href="#Index_cp_letter-Z"><b>Z</b></a>
 &nbsp; 
</td></tr></table>
</div>

</div>
</div>
<div class="footnotes-segment">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h5 class="footnote-body-heading"><a id="FOOT1" href="#DOCF1">(1)</a></h5>
<p>The 2018 POSIX standard is accessible online at
<a class="url" href="https://pubs.opengroup.org/onlinepubs/9699919799/">https://pubs.opengroup.org/onlinepubs/9699919799/</a>.<!-- /@w --></p>
<h5 class="footnote-body-heading"><a id="FOOT2" href="#DOCF2">(2)</a></h5>
<p>These utilities
are available on POSIX-compliant systems, as well as on traditional
Unix-based systems. If you are using some other operating system, you still need to
be familiar with the ideas of I/O redirection and pipes.</p>
<h5 class="footnote-body-heading"><a id="FOOT3" href="#DOCF3">(3)</a></h5>
<p>Some other, obsolete systems to which <code class="command">gawk</code>
was once ported are no longer supported and the code for those systems
has been removed.</p>
<h5 class="footnote-body-heading"><a id="FOOT4" href="#DOCF4">(4)</a></h5>
<p>Only
Solaris systems still use an old <code class="command">awk</code> for the
default <code class="command">awk</code> utility. A more modern <code class="command">awk</code> lives in
<samp class="file">/usr/xpg6/bin</samp> on these systems.</p>
<h5 class="footnote-body-heading"><a id="FOOT5" href="#DOCF5">(5)</a></h5>
<p>All such differences
appear in the index under the
entry &ldquo;differences in <code class="command">awk</code> and <code class="command">gawk</code>.&rdquo;</p>
<h5 class="footnote-body-heading"><a id="FOOT6" href="#DOCF6">(6)</a></h5>
<p>GNU stands for &ldquo;GNU&rsquo;s Not Unix.&rdquo;</p>
<h5 class="footnote-body-heading"><a id="FOOT7" href="#DOCF7">(7)</a></h5>
<p>The terminology &ldquo;GNU/Linux&rdquo; is explained
in the <a class="ref" href="#Glossary">Glossary</a>.</p>
<h5 class="footnote-body-heading"><a id="FOOT8" href="#DOCF8">(8)</a></h5>
<p>The &lsquo;<samp class="samp">#!</samp>&rsquo; mechanism works on
GNU/Linux systems, BSD-based systems, and commercial Unix systems.</p>
<h5 class="footnote-body-heading"><a id="FOOT9" href="#DOCF9">(9)</a></h5>
<p>The &lsquo;<samp class="samp">?</samp>&rsquo; and &lsquo;<samp class="samp">:</samp>&rsquo; referred to here is the
three-operand conditional expression described in
<a class="ref" href="#Conditional-Exp">Conditional Expressions</a>.
Splitting lines after &lsquo;<samp class="samp">?</samp>&rsquo; and &lsquo;<samp class="samp">:</samp>&rsquo; is a minor <code class="command">gawk</code>
extension; if <samp class="option">--posix</samp> is specified
(see <a class="pxref" href="#Options">Command-Line Options</a>), then this extension is disabled.</p>
<h5 class="footnote-body-heading"><a id="FOOT10" href="#DOCF10">(10)</a></h5>
<p>Other popular scripting languages include Ruby
and Perl.</p>
<h5 class="footnote-body-heading"><a id="FOOT11" href="#DOCF11">(11)</a></h5>
<p>For more detail,
please see Section 4.4 of <a class="uref" href="http://www.ietf.org/rfc/rfc3875">RFC 3875</a>. Also see the
<a class="uref" href="https://lists.gnu.org/archive/html/bug-gawk/2014-11/msg00022.html">explanatory note sent to the <code class="command">gawk</code> bug
mailing list</a>.</p>
<h5 class="footnote-body-heading"><a id="FOOT12" href="#DOCF12">(12)</a></h5>
<p>Not recommended.</p>
<h5 class="footnote-body-heading"><a id="FOOT13" href="#DOCF13">(13)</a></h5>
<p>Semicolons on MS-Windows.</p>
<h5 class="footnote-body-heading"><a id="FOOT14" href="#DOCF14">(14)</a></h5>
<p>Your version of <code class="command">gawk</code>
may use a different directory; it
will depend upon how <code class="command">gawk</code> was built and installed. The actual
directory is the value of <code class="code">$(pkgdatadir)</code> generated when
<code class="command">gawk</code> was configured.
(For more detail, see the <samp class="file">INSTALL</samp> file in the source distribution,
and see <a class="ref" href="#Quick-Installation">Compiling <code class="command">gawk</code> for Unix-Like Systems</a>.
You probably don&rsquo;t need to worry about this,
though.)</p>
<h5 class="footnote-body-heading"><a id="FOOT15" href="#DOCF15">(15)</a></h5>
<p>Your version of <code class="command">gawk</code>
may use a different directory; it
will depend upon how <code class="command">gawk</code> was built and installed. The actual
directory is the value of <code class="code">$(pkgextensiondir)</code> generated when
<code class="command">gawk</code> was configured.
(For more detail, see the <samp class="file">INSTALL</samp> file in the source distribution,
and see <a class="ref" href="#Quick-Installation">Compiling <code class="command">gawk</code> for Unix-Like Systems</a>.
You probably don&rsquo;t need to worry about this,
though.)</p>
<h5 class="footnote-body-heading"><a id="FOOT16" href="#DOCF16">(16)</a></h5>
<p>Typically, this is a
Unicode-based locale, but it doesn&rsquo;t have to be.</p>
<h5 class="footnote-body-heading"><a id="FOOT17" href="#DOCF17">(17)</a></h5>
<p>In other literature,
you may see a bracket expression referred to as either a
<em class="dfn">character set</em>, a <em class="dfn">character class</em>, or a <em class="dfn">character list</em>.</p>
<h5 class="footnote-body-heading"><a id="FOOT18" href="#DOCF18">(18)</a></h5>
<p>Use two backslashes if you&rsquo;re
using a string constant with a regexp operator or function.</p>
<h5 class="footnote-body-heading"><a id="FOOT19" href="#DOCF19">(19)</a></h5>
<p>Experienced C and C++ programmers will note
that it is possible, using something like
&lsquo;<samp class="samp">IGNORECASE = 1 &amp;&amp; /foObAr/ { &hellip; }</samp>&rsquo;
and
&lsquo;<samp class="samp">IGNORECASE = 0 || /foobar/ { &hellip; }</samp>&rsquo;.
However, this is somewhat obscure and we don&rsquo;t recommend it.</p>
<h5 class="footnote-body-heading"><a id="FOOT20" href="#DOCF20">(20)</a></h5>
<p>If you don&rsquo;t understand
this, don&rsquo;t worry about it; it just means that <code class="command">gawk</code> does the
right thing.</p>
<h5 class="footnote-body-heading"><a id="FOOT21" href="#DOCF21">(21)</a></h5>
<p>At least that we know
about.</p>
<h5 class="footnote-body-heading"><a id="FOOT22" href="#DOCF22">(22)</a></h5>
<p>In
either case, with the <samp class="option">--lint</samp> option, <code class="command">gawk</code> warns that you
are referencing an uninitialized field.</p>
<h5 class="footnote-body-heading"><a id="FOOT23" href="#DOCF23">(23)</a></h5>
<p>A <em class="dfn">binary operator</em>, such as &lsquo;<samp class="samp">*</samp>&rsquo; for
multiplication, is one that takes two operands. The distinction
is required because <code class="command">awk</code> also has unary (one-operand)
and ternary (three-operand) operators.</p>
<h5 class="footnote-body-heading"><a id="FOOT24" href="#DOCF24">(24)</a></h5>
<p>Thanks to
Andrew Schorr for this tip.</p>
<h5 class="footnote-body-heading"><a id="FOOT25" href="#DOCF25">(25)</a></h5>
<p>The <code class="command">sed</code> utility is a &ldquo;stream editor.&rdquo;
Its behavior is also defined by the POSIX standard.</p>
<h5 class="footnote-body-heading"><a id="FOOT26" href="#DOCF26">(26)</a></h5>
<p>The
CSV format lacked a formal standard definition for many years.
<a class="uref" href="http://www.ietf.org/rfc/rfc4180.txt">RFC 4180</a>
standardizes the most common practices.</p>
<h5 class="footnote-body-heading"><a id="FOOT27" href="#DOCF27">(27)</a></h5>
<p>This is not quite true. <code class="code">RT</code> could
be changed if <code class="code">RS</code> is a regular expression.</p>
<h5 class="footnote-body-heading"><a id="FOOT28" href="#DOCF28">(28)</a></h5>
<p>This assumes
that standard input is the keyboard.</p>
<h5 class="footnote-body-heading"><a id="FOOT29" href="#DOCF29">(29)</a></h5>
<p>The &ldquo;tty&rdquo; in <samp class="file">/dev/tty</samp> stands for
&ldquo;Teletype,&rdquo; a serial terminal.</p>
<h5 class="footnote-body-heading"><a id="FOOT30" href="#DOCF30">(30)</a></h5>
<p>The technical terminology is rather morbid.
The finished child is called a &ldquo;zombie,&rdquo; and cleaning up after
it is referred to as &ldquo;reaping.&rdquo;</p>
<h5 class="footnote-body-heading"><a id="FOOT31" href="#DOCF31">(31)</a></h5>
<p>Prior
to version 4.2, the return value from closing a pipe or co-process
was the full 16-bit exit value as defined by the <code class="code">wait()</code> system
call.</p>
<h5 class="footnote-body-heading"><a id="FOOT32" href="#DOCF32">(32)</a></h5>
<p>The internal representation of all numbers,
including integers, uses double-precision floating-point numbers.
On most modern systems, these are in IEEE 754 standard format.
See <a class="xref" href="#Arbitrary-Precision-Arithmetic">Arithmetic and Arbitrary-Precision Arithmetic with <code class="command">gawk</code></a>, for much more information.</p>
<h5 class="footnote-body-heading"><a id="FOOT33" href="#DOCF33">(33)</a></h5>
<p>In all examples throughout this Web page,
<code class="command">nawk</code> is BWK <code class="command">awk</code>.</p>
<h5 class="footnote-body-heading"><a id="FOOT34" href="#DOCF34">(34)</a></h5>
<p>Pathological cases can require up to
752 digits (!), but we doubt that you need to worry about this.</p>
<h5 class="footnote-body-heading"><a id="FOOT35" href="#DOCF35">(35)</a></h5>
<p>It happens that BWK
<code class="command">awk</code>, <code class="command">gawk</code>, and <code class="command">mawk</code> all &ldquo;get it right,&rdquo;
but you should not rely on this.</p>
<h5 class="footnote-body-heading"><a id="FOOT36" href="#DOCF36">(36)</a></h5>
<p><code class="command">gawk</code>
calls this <em class="dfn">unassigned</em>, as the following example shows.</p>
<h5 class="footnote-body-heading"><a id="FOOT37" href="#DOCF37">(37)</a></h5>
<p>Thus, a POSIX
numeric string and <code class="command">gawk</code>&rsquo;s strnum are the same thing.</p>
<h5 class="footnote-body-heading"><a id="FOOT38" href="#DOCF38">(38)</a></h5>
<p>Technically, string comparison is supposed to behave
the same way as if the strings were compared with the C <code class="code">strcoll()</code>
function.</p>
<h5 class="footnote-body-heading"><a id="FOOT39" href="#DOCF39">(39)</a></h5>
<p>See <a class="uref" href="http://austingroupbugs.net/view.php?id=1070">the Austin Group website</a>.</p>
<h5 class="footnote-body-heading"><a id="FOOT40" href="#DOCF40">(40)</a></h5>
<p>This
program has a bug; it prints lines starting with &lsquo;<samp class="samp">END</samp>&rsquo;. How
would you fix it?</p>
<h5 class="footnote-body-heading"><a id="FOOT41" href="#DOCF41">(41)</a></h5>
<p>The original version of <code class="command">awk</code> kept
reading and ignoring input until the end of the file was seen.</p>
<h5 class="footnote-body-heading"><a id="FOOT42" href="#DOCF42">(42)</a></h5>
<p>Some early implementations of Unix
<code class="command">awk</code> initialized <code class="code">FILENAME</code> to <code class="code">&quot;-&quot;</code>, even if there
were data files to be processed. This behavior was incorrect and should
not be relied upon in your programs.</p>
<h5 class="footnote-body-heading"><a id="FOOT43" href="#DOCF43">(43)</a></h5>
<p>Not to mention
difficult implementation issues.</p>
<h5 class="footnote-body-heading"><a id="FOOT44" href="#DOCF44">(44)</a></h5>
<p>The ordering will vary among <code class="command">awk</code>
implementations, which typically use hash tables to store array elements
and values.</p>
<h5 class="footnote-body-heading"><a id="FOOT45" href="#DOCF45">(45)</a></h5>
<p>When two elements
compare as equal, the C <code class="code">qsort()</code> function does not guarantee
that they will maintain their original relative order after sorting.
Using the string value to provide a unique ordering when the numeric
values are equal ensures that <code class="command">gawk</code> behaves consistently
across different environments.</p>
<h5 class="footnote-body-heading"><a id="FOOT46" href="#DOCF46">(46)</a></h5>
<p>Thanks to Michael Brennan for pointing this out.</p>
<h5 class="footnote-body-heading"><a id="FOOT47" href="#DOCF47">(47)</a></h5>
<p>The C version of
<code class="code">rand()</code> on many Unix systems is known to produce fairly poor
sequences of random numbers.  However, nothing requires that an
<code class="command">awk</code> implementation use the C <code class="code">rand()</code> to implement the
<code class="command">awk</code> version of <code class="code">rand()</code>.  In fact, for many years,
<code class="command">gawk</code> used the BSD <code class="code">random()</code> function, which is
considerably better than <code class="code">rand()</code>, to produce random numbers.
From version 4.1.4, courtesy of Nelson H.F. Beebe, <code class="command">gawk</code>
uses the Bayes-Durham shuffle buffer algorithm which considerably extends
the period of the random number generator, and eliminates short-range and
long-range correlations that might exist in the original generator.</p>
<h5 class="footnote-body-heading"><a id="FOOT48" href="#DOCF48">(48)</a></h5>
<p><code class="command">mawk</code>
uses a different seed each time.</p>
<h5 class="footnote-body-heading"><a id="FOOT49" href="#DOCF49">(49)</a></h5>
<p>Computer-generated random numbers really are not truly
random.  They are technically known as <em class="dfn">pseudorandom</em>.  This means
that although the numbers in a sequence appear to be random, you can in
fact generate the same sequence of random numbers over and over again.</p>
<h5 class="footnote-body-heading"><a id="FOOT50" href="#DOCF50">(50)</a></h5>
<p>Unless
you use the <samp class="option">--non-decimal-data</samp> option, which isn&rsquo;t recommended.
See <a class="xref" href="#Nondecimal-Data">Allowing Nondecimal Input Data</a> for more information.</p>
<h5 class="footnote-body-heading"><a id="FOOT51" href="#DOCF51">(51)</a></h5>
<p>Note that this means
that the record will first be regenerated using the value of <code class="code">OFS</code> if
any fields have been changed, and that the fields will be updated
after the substitution, even if the operation is a &ldquo;no-op&rdquo; such
as &lsquo;<samp class="samp">sub(/^/, &quot;&quot;)</samp>&rsquo;.</p>
<h5 class="footnote-body-heading"><a id="FOOT52" href="#DOCF52">(52)</a></h5>
<p>This is different from
C and C++, in which the first character is number zero.</p>
<h5 class="footnote-body-heading"><a id="FOOT53" href="#DOCF53">(53)</a></h5>
<p>This was rather naive of him, despite
there being a note in this section indicating that the next major version
would move to the POSIX rules.</p>
<h5 class="footnote-body-heading"><a id="FOOT54" href="#DOCF54">(54)</a></h5>
<p>A program is interactive
if the standard output is connected to a terminal device. On modern
systems, this means your keyboard and screen.</p>
<h5 class="footnote-body-heading"><a id="FOOT55" href="#DOCF55">(55)</a></h5>
<p>In private correspondence,
Dr. Kernighan has indicated to me that the way this was done
was probably a mistake.</p>
<h5 class="footnote-body-heading"><a id="FOOT56" href="#DOCF56">(56)</a></h5>
<p>See <a class="xref" href="#Glossary">Glossary</a>, especially the entries &ldquo;Epoch&rdquo; and &ldquo;UTC.&rdquo;</p>
<h5 class="footnote-body-heading"><a id="FOOT57" href="#DOCF57">(57)</a></h5>
<p>The GNU <code class="command">date</code> utility can
also do many of the things described here.  Its use may be preferable
for simple time-related operations in shell scripts.</p>
<h5 class="footnote-body-heading"><a id="FOOT58" href="#DOCF58">(58)</a></h5>
<p>Occasionally there are
minutes in a year with a leap second, which is why the
seconds can go up to 60.</p>
<h5 class="footnote-body-heading"><a id="FOOT59" href="#DOCF59">(59)</a></h5>
<p>Unfortunately,
not every system&rsquo;s <code class="code">strftime()</code> necessarily
supports all of the conversions listed here.</p>
<h5 class="footnote-body-heading"><a id="FOOT60" href="#DOCF60">(60)</a></h5>
<p>If you don&rsquo;t understand any of this, don&rsquo;t worry about
it; these facilities are meant to make it easier to &ldquo;internationalize&rdquo;
programs.
Other internationalization features are described in
<a class="ref" href="#Internationalization">Internationalization with <code class="command">gawk</code></a>.</p>
<h5 class="footnote-body-heading"><a id="FOOT61" href="#DOCF61">(61)</a></h5>
<p>This is because ISO C leaves the
behavior of the C version of <code class="code">strftime()</code> undefined and <code class="command">gawk</code>
uses the system&rsquo;s version of <code class="code">strftime()</code> if it&rsquo;s there.
Typically, the conversion specifier either does not appear in the
returned string or appears literally.</p>
<h5 class="footnote-body-heading"><a id="FOOT62" href="#DOCF62">(62)</a></h5>
<p>This example
shows that zeros come in on the left side. For <code class="command">gawk</code>, this is
always true, but in some languages, it&rsquo;s possible to have the left side
fill with ones.</p>
<h5 class="footnote-body-heading"><a id="FOOT63" href="#DOCF63">(63)</a></h5>
<p>If you don&rsquo;t
understand this paragraph, the upshot is that <code class="command">gawk</code> can only
store a particular range of integer values; numbers outside that range
are reduced to fit within the range.</p>
<h5 class="footnote-body-heading"><a id="FOOT64" href="#DOCF64">(64)</a></h5>
<p>This program won&rsquo;t actually run,
because <code class="code">foo()</code> is undefined.</p>
<h5 class="footnote-body-heading"><a id="FOOT65" href="#DOCF65">(65)</a></h5>
<p>Late in 2012.</p>
<h5 class="footnote-body-heading"><a id="FOOT66" href="#DOCF66">(66)</a></h5>
<p>Said person might even be you, sometime in the future,
at which point you will wonder, &ldquo;what was I thinking?!?&rdquo;</p>
<h5 class="footnote-body-heading"><a id="FOOT67" href="#DOCF67">(67)</a></h5>
<p>Sadly, over 35
years later, many of the lessons taught by this book have yet to be
learned by a vast number of practicing programmers.</p>
<h5 class="footnote-body-heading"><a id="FOOT68" href="#DOCF68">(68)</a></h5>
<p>The effects are
not identical.  Output of the transformed
record will be in all lowercase, while <code class="code">IGNORECASE</code> preserves the original
contents of the input record.</p>
<h5 class="footnote-body-heading"><a id="FOOT69" href="#DOCF69">(69)</a></h5>
<p>Although all the library routines could have
been rewritten to use this convention, this was not done, in order to
show how our own <code class="command">awk</code> programming style has evolved and to
provide some basis for this discussion.</p>
<h5 class="footnote-body-heading"><a id="FOOT70" href="#DOCF70">(70)</a></h5>
<p><code class="command">gawk</code>&rsquo;s <samp class="option">--dump-variables</samp> command-line
option is useful for verifying this.</p>
<h5 class="footnote-body-heading"><a id="FOOT71" href="#DOCF71">(71)</a></h5>
<p>This
is changing; many systems use Unicode, a very large character set
that includes ASCII as a subset.  On systems with full Unicode support,
a character can occupy up to 32 bits, making simple tests such as
used here prohibitively expensive.</p>
<h5 class="footnote-body-heading"><a id="FOOT72" href="#DOCF72">(72)</a></h5>
<p>ASCII
has been extended in many countries to use the values from 128 to 255
for country-specific characters.  If your  system uses these extensions,
you can simplify <code class="code">_ord_init()</code> to loop from 0 to 255.</p>
<h5 class="footnote-body-heading"><a id="FOOT73" href="#DOCF73">(73)</a></h5>
<p>It would
be nice if <code class="command">awk</code> had an assignment operator for concatenation.
The lack of an explicit operator for concatenation makes string operations
more difficult than they really need to be.</p>
<h5 class="footnote-body-heading"><a id="FOOT74" href="#DOCF74">(74)</a></h5>
<p>The <code class="code">BEGINFILE</code>
special pattern (see <a class="pxref" href="#BEGINFILE_002fENDFILE">The <code class="code">BEGINFILE</code> and <code class="code">ENDFILE</code> Special Patterns</a>) provides an alternative
mechanism for dealing with files that can&rsquo;t be opened.  However, the
code here provides a portable solution.</p>
<h5 class="footnote-body-heading"><a id="FOOT75" href="#DOCF75">(75)</a></h5>
<p>This
function was written before <code class="command">gawk</code> acquired the ability to
split strings into single characters using <code class="code">&quot;&quot;</code> as the separator.
We have left it alone, as using <code class="code">substr()</code> is more portable.</p>
<h5 class="footnote-body-heading"><a id="FOOT76" href="#DOCF76">(76)</a></h5>
<p>It is often the case that password
information is stored in a network database.</p>
<h5 class="footnote-body-heading"><a id="FOOT77" href="#DOCF77">(77)</a></h5>
<p>There is a
subtle problem with the code just presented.  Suppose that
the first time there were no names. This code adds the names with
a leading comma. It also doesn&rsquo;t check that there is a <code class="code">$4</code>.</p>
<h5 class="footnote-body-heading"><a id="FOOT78" href="#DOCF78">(78)</a></h5>
<p>Using <samp class="option">-b</samp> twice requires
separating <code class="command">gawk</code>&rsquo;s options from those of the program.  For example:
&lsquo;<samp class="samp">gawk -f getopt.awk -f split.awk -b -- -b 42m large-file.txt split-</samp>&rsquo;.</p>
<h5 class="footnote-body-heading"><a id="FOOT79" href="#DOCF79">(79)</a></h5>
<p>On some older
systems, including Solaris, the system version of <code class="command">tr</code> may require
that the lists be written as range expressions enclosed in square brackets
(&lsquo;<samp class="samp">[a-z]</samp>&rsquo;) and quoted, to prevent the shell from attempting a
file name expansion.  This is not a feature.</p>
<h5 class="footnote-body-heading"><a id="FOOT80" href="#DOCF80">(80)</a></h5>
<p>&ldquo;Real world&rdquo; is defined as
&ldquo;a program actually used to get something done.&rdquo;</p>
<h5 class="footnote-body-heading"><a id="FOOT81" href="#DOCF81">(81)</a></h5>
<p>Fully explaining the <code class="command">sh</code> language is beyond
the scope of this book. We provide some minimal explanations, but see
a good shell programming book if you wish to understand things in more
depth.</p>
<h5 class="footnote-body-heading"><a id="FOOT82" href="#DOCF82">(82)</a></h5>
<p>On some very old versions of <code class="command">awk</code>, the test
&lsquo;<samp class="samp">getline junk &lt; t</samp>&rsquo; can loop forever if the file exists but is empty.</p>
<h5 class="footnote-body-heading"><a id="FOOT83" href="#DOCF83">(83)</a></h5>
<p><code class="command">gawk</code>
does <code class="code">@include</code> processing itself in order to support the use
of <code class="command">awk</code> programs as Web CGI scripts.</p>
<h5 class="footnote-body-heading"><a id="FOOT84" href="#DOCF84">(84)</a></h5>
<p>This definition is from
<a class="uref" href="https://www.lexico.com/en/definition/state_machine">https://www.lexico.com/en/definition/state_machine</a>.</p>
<h5 class="footnote-body-heading"><a id="FOOT85" href="#DOCF85">(85)</a></h5>
<p>This is why the predefined sorting orders
start with an &lsquo;<samp class="samp">@</samp>&rsquo; character, which cannot be part of an identifier.</p>
<h5 class="footnote-body-heading"><a id="FOOT86" href="#DOCF86">(86)</a></h5>
<p>This
is true because locale-based comparison occurs only when in
POSIX-compatibility mode, and because <code class="code">asort()</code> and <code class="code">asorti()</code> are
<code class="command">gawk</code> extensions, they are not available in that case.</p>
<h5 class="footnote-body-heading"><a id="FOOT87" href="#DOCF87">(87)</a></h5>
<p>Michael
Brennan suggests the use of <code class="command">rand()</code> to generate unique
file names. This is a valid point; nevertheless, temporary files
remain more difficult to use than two-way pipes.</p>
<h5 class="footnote-body-heading"><a id="FOOT88" href="#DOCF88">(88)</a></h5>
<p>This is very
different from the same operator in the C shell and in Bash.</p>
<h5 class="footnote-body-heading"><a id="FOOT89" href="#DOCF89">(89)</a></h5>
<p>Meaning, there are too many
bug reports, or too many strange differences in behavior from when
<code class="command">gawk</code> is run normally.</p>
<h5 class="footnote-body-heading"><a id="FOOT90" href="#DOCF90">(90)</a></h5>
<p>For some operating systems, the <code class="command">gawk</code>
port doesn&rsquo;t support GNU <code class="command">gettext</code>.
Therefore, these features are not available
if you are using one of those operating systems. Sorry.</p>
<h5 class="footnote-body-heading"><a id="FOOT91" href="#DOCF91">(91)</a></h5>
<p>Americans
use a comma every three decimal places and a period for the decimal
point, while many Europeans do exactly the opposite:
1,234.56 versus 1.234,56.</p>
<h5 class="footnote-body-heading"><a id="FOOT92" href="#DOCF92">(92)</a></h5>
<p>Thanks to Bruno Haible for this
example.</p>
<h5 class="footnote-body-heading"><a id="FOOT93" href="#DOCF93">(93)</a></h5>
<p>The
<code class="command">xgettext</code> utility that comes with GNU
<code class="command">gettext</code> can handle <samp class="file">.awk</samp> files.</p>
<h5 class="footnote-body-heading"><a id="FOOT94" href="#DOCF94">(94)</a></h5>
<p>This example is borrowed
from the GNU <code class="command">gettext</code> manual.</p>
<h5 class="footnote-body-heading"><a id="FOOT95" href="#DOCF95">(95)</a></h5>
<p>This is good fodder for an &ldquo;Obfuscated
<code class="command">awk</code>&rdquo; contest.</p>
<h5 class="footnote-body-heading"><a id="FOOT96" href="#DOCF96">(96)</a></h5>
<p>Perhaps it would be better if it were
called &ldquo;Hippy.&rdquo; Ah, well.</p>
<h5 class="footnote-body-heading"><a id="FOOT97" href="#DOCF97">(97)</a></h5>
<p>Well, sort of. It seems that if <code class="env">$LC_ALL</code>
is set to &lsquo;<samp class="samp">C</samp>&rsquo;, then no translations are done. Go figure.</p>
<h5 class="footnote-body-heading"><a id="FOOT98" href="#DOCF98">(98)</a></h5>
<p>The &ldquo;primitive
instructions&rdquo; are defined by <code class="command">gawk</code> itself; the debugger
does not work at the level of machine instructions.</p>
<h5 class="footnote-body-heading"><a id="FOOT99" href="#DOCF99">(99)</a></h5>
<p>We don&rsquo;t know why they expect this, but
they do.</p>
<h5 class="footnote-body-heading"><a id="FOOT100" href="#DOCF100">(100)</a></h5>
<p>Of course, you can
always continue to use a version of <code class="command">gawk</code> that still supports
arbitrary precision arithmetic. It simply will be unmaintained.</p>
<h5 class="footnote-body-heading"><a id="FOOT101" href="#DOCF101">(101)</a></h5>
<p>There
is a very nice <a class="uref" href="http://www.validlab.com/goldberg/paper.pdf">paper on floating-point arithmetic</a> by David Goldberg, &ldquo;What Every
Computer Scientist Should Know About Floating-Point Arithmetic,&rdquo;
<cite class="cite">ACM Computing Surveys</cite> <strong class="strong">23</strong>, 1 (1991-03): 5-48.  This is
worth reading if you are interested in the details, but it does require
a background in computer science.</p>
<h5 class="footnote-body-heading"><a id="FOOT102" href="#DOCF102">(102)</a></h5>
<p>Thanks to Michael Brennan for this description, which we
have paraphrased, and for the examples.</p>
<h5 class="footnote-body-heading"><a id="FOOT103" href="#DOCF103">(103)</a></h5>
<p>It
is possible for the output to be completely different if the
C library in your system does not use the IEEE 754 even-rounding
rule to round halfway cases for <code class="code">printf</code>.</p>
<h5 class="footnote-body-heading"><a id="FOOT104" href="#DOCF104">(104)</a></h5>
<p>Weisstein, Eric W.
<cite class="cite">Sylvester&rsquo;s Sequence</cite>. From MathWorld&mdash;A Wolfram Web Resource
(<a class="url" href="http://mathworld.wolfram.com/SylvestersSequence.html">http://mathworld.wolfram.com/SylvestersSequence.html</a>).<!-- /@w --></p>
<h5 class="footnote-body-heading"><a id="FOOT105" href="#DOCF105">(105)</a></h5>
<p>You asked for it, you got it.</p>
<h5 class="footnote-body-heading"><a id="FOOT106" href="#DOCF106">(106)</a></h5>
<p>See
<a class="uref" href="http://catb.org/jargon/html/C/cookie.html">the &ldquo;cookie&rdquo; entry in the Jargon file</a> for a
definition of <em class="dfn">cookie</em>, and <a class="uref" href="http://catb.org/jargon/html/M/magic-cookie.html">the &ldquo;magic cookie&rdquo; entry in the Jargon file</a> for a nice example.
See also the entry for &ldquo;Cookie&rdquo; in the <a class="ref" href="#Glossary">Glossary</a>.
</p>
<h5 class="footnote-body-heading"><a id="FOOT107" href="#DOCF107">(107)</a></h5>
<p>This is more common on MS-Windows systems, but it
can happen on Unix-like systems as well.</p>
<h5 class="footnote-body-heading"><a id="FOOT108" href="#DOCF108">(108)</a></h5>
<p>Because the API uses only ISO C 90
features, it cannot make use of the ISO C 99 variadic macro feature to hide
that parameter. More&rsquo;s the pity.</p>
<h5 class="footnote-body-heading"><a id="FOOT109" href="#DOCF109">(109)</a></h5>
<p>Allowing both namespace plus identifier and
<code class="code">foo::bar</code> would have been too confusing to document, and to code
and test.</p>
<h5 class="footnote-body-heading"><a id="FOOT110" href="#DOCF110">(110)</a></h5>
<p>The
difference is measurable and quite real. Trust us.</p>
<h5 class="footnote-body-heading"><a id="FOOT111" href="#DOCF111">(111)</a></h5>
<p>Numeric values
are clearly less problematic, requiring only a C <code class="code">double</code> to store.
But of course, GMP and MPFR values <em class="emph">do</em> take up more memory.</p>
<h5 class="footnote-body-heading"><a id="FOOT112" href="#DOCF112">(112)</a></h5>
<p>OK, the only data structure.</p>
<h5 class="footnote-body-heading"><a id="FOOT113" href="#DOCF113">(113)</a></h5>
<p>It is also
a &ldquo;cookie,&rdquo; but the <code class="command">gawk</code> developers did not wish to overuse this
term.</p>
<h5 class="footnote-body-heading"><a id="FOOT114" href="#DOCF114">(114)</a></h5>
<p>This version is
edited slightly for presentation.  See <samp class="file">extension/filefuncs.c</samp>
in the <code class="command">gawk</code> distribution for the complete version.</p>
<h5 class="footnote-body-heading"><a id="FOOT115" href="#DOCF115">(115)</a></h5>
<p>In practice, you would probably want to
use the GNU Autotools (Automake, Autoconf, Libtool, and <code class="command">gettext</code>) to
configure and build your libraries. Instructions for doing so are beyond
the scope of this Web page. See <a class="xref" href="#gawkextlib">The <code class="code">gawkextlib</code> Project</a> for Internet links to
the tools.</p>
<h5 class="footnote-body-heading"><a id="FOOT116" href="#DOCF116">(116)</a></h5>
<p>And Life was good.</p>
<h5 class="footnote-body-heading"><a id="FOOT117" href="#DOCF117">(117)</a></h5>
<p>And
thus was born the Campaign for Rational Range Interpretation (or
RRI). A number of GNU tools have already implemented this change,
or will soon.  Thanks to Karl Berry for coining the phrase &ldquo;Rational
Range Interpretation.&rdquo;</p>
<h5 class="footnote-body-heading"><a id="FOOT118" href="#DOCF118">(118)</a></h5>
<p>See
<a class="uref" href="https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_03_05">the standard</a>
and
<a class="uref" href="https://pubs.opengroup.org/onlinepubs/9699919799/xrat/V4_xbd_chap09.html#tag_21_09_03_05">its rationale</a>.</p>
<h5 class="footnote-body-heading"><a id="FOOT119" href="#DOCF119">(119)</a></h5>
<p>The IA64 architecture
is also known as &ldquo;Itanium.&rdquo;</p>
<h5 class="footnote-body-heading"><a id="FOOT120" href="#DOCF120">(120)</a></h5>
<p>We tried. It was painful.</p>
<h5 class="footnote-body-heading"><a id="FOOT121" href="#DOCF121">(121)</a></h5>
<p>There is one GNU program that is (in our opinion)
severely difficult to bootstrap from the Git repository. For
example, on the author&rsquo;s old (but still working) PowerPC Macintosh with
macOS 10.5, it was necessary to bootstrap a ton of software, starting
with Git itself, in order to try to work with the latest code.
It&rsquo;s not pleasant, and especially on older systems, it&rsquo;s a big waste
of time.
</p>
<p>Starting with the latest tarball was no picnic either. The maintainers
had dropped <samp class="file">.gz</samp> and <samp class="file">.bz2</samp> files and only distribute
<samp class="file">.tar.xz</samp> files.  It was necessary to bootstrap <code class="command">xz</code> first!</p>
<h5 class="footnote-body-heading"><a id="FOOT122" href="#DOCF122">(122)</a></h5>
<p>A branch (since removed) created by one of the other
developers that did not include the generated files.</p>
<h5 class="footnote-body-heading"><a id="FOOT123" href="#DOCF123">(123)</a></h5>
<p>A critical central data structure
inside <code class="command">gawk</code>.</p>
<h5 class="footnote-body-heading"><a id="FOOT124" href="#DOCF124">(124)</a></h5>
<p>The <em class="dfn">symbols</em> are the variables and functions
defined inside <code class="command">gawk</code>.  Access to these symbols by code
external to <code class="command">gawk</code> loaded dynamically at runtime is
problematic on MS-Windows.</p>
<h5 class="footnote-body-heading"><a id="FOOT125" href="#DOCF125">(125)</a></h5>
<p>Compiled programs are typically written
in lower-level languages such as C, C++, or Ada,
and then translated, or <em class="dfn">compiled</em>, into a form that
the computer can execute directly.</p>
</div>



</body>
</html>
